const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-D3PGQDI8.js","assets/index-SNFsn88H.js","assets/index--p_LNCte.js","assets/index-CzbwSc2E.js","assets/components-6Yp278Dk.js","assets/theme-DxrHHsjg.js","assets/index-BNJ1ZdAv.js","assets/index-BHWf2QoM.js","assets/index-Bp0rEeD9.js","assets/index-Dj6cA1R3.js","assets/index-oa95Mr20.js","assets/index-CNL49K8X.js","assets/index-B2iry4QC.js","assets/angular-html-GqBVQ6Dm.js","assets/html-DG1TtFnM.js","assets/javascript-DNgb01dh.js","assets/css-u4bm_LMz.js","assets/angular-ts-MKs4dlu_.js","assets/scss-BfMQ58X7.js","assets/apl-C6GBNg32.js","assets/xml-BOQ9RtXF.js","assets/java-BN40hmum.js","assets/json-DWmkr0yC.js","assets/astro-DTSlZd1t.js","assets/typescript-CVESyXxo.js","assets/postcss-DmF4-xLG.js","assets/blade-CPEzV-UE.js","assets/sql-D8nBeWSR.js","assets/bsl-Dgyn0ogV.js","assets/sdbl-BLhTXw86.js","assets/cobol-NX_YbRMJ.js","assets/coffee-CXcjgkhu.js","assets/cpp-IRqjNdQP.js","assets/regexp-DoiKbUTj.js","assets/glsl-bwZ1_LLM.js","assets/c-BhsLqr-4.js","assets/crystal-DFEzbmK1.js","assets/shellscript-HNM5thJl.js","assets/edge-Cq_6DOij.js","assets/html-derivative-CDVwFiY1.js","assets/elixir-BoNJ9vXU.js","assets/elm-CTr_twwF.js","assets/erb-DuefeV9w.js","assets/ruby-C8Yez0Ov.js","assets/lua-B2--UKVN.js","assets/fortran-fixed-form-C9lV_GL-.js","assets/fortran-free-form-B3Z_eaxm.js","assets/fsharp-Vw5t3P44.js","assets/markdown-CNXuF1yM.js","assets/gdresource-D_y5yz_M.js","assets/gdshader-BSHf-0eb.js","assets/gdscript-BIguuW30.js","assets/git-commit-C0WNX4K0.js","assets/diff-Dnfm4U7b.js","assets/git-rebase-3YLVFLpI.js","assets/glimmer-js-D4fdoRWd.js","assets/glimmer-ts-DFoQQgBS.js","assets/graphql-DqgCZ2sd.js","assets/jsx-CM4fc1WH.js","assets/tsx-DqpEK-75.js","assets/hack-BV5LM4CS.js","assets/haml-B1jT_oKV.js","assets/handlebars-HtVeTy3a.js","assets/yaml-CIiI48o2.js","assets/http-CYnz8shJ.js","assets/hxml-BfFmssGd.js","assets/haxe-BgqZeg96.js","assets/imba-C6vdFTm2.js","assets/jinja-BORjBBXU.js","assets/jison-Ct8rtT8R.js","assets/julia-Czdw582_.js","assets/python-CK56Z9cH.js","assets/r-Cqv5JV-q.js","assets/latex-BpoAco4y.js","assets/tex-Dej6pUpk.js","assets/liquid-0snwLfvK.js","assets/marko-BxSrAFJn.js","assets/less-Dk1rBueR.js","assets/mdc-DfEMzj3F.js","assets/nginx-Dw0nYz9L.js","assets/nim-NHYZZDnF.js","assets/perl-DLffUHFU.js","assets/php-D3VTUn6x.js","assets/pug-BbGfWiEl.js","assets/qml-Dhho_E4W.js","assets/razor-CDyaIOPG.js","assets/csharp-D7v6OrNy.js","assets/rst-BtGMdPX_.js","assets/cmake-DbXoA79R.js","assets/sas-K_Wwm3IX.js","assets/shaderlab-CsYUIUcf.js","assets/hlsl-DkpUthgY.js","assets/shellsession-DU_2P5ZA.js","assets/soy-aWhPD8Nq.js","assets/sparql-B5YtT9lV.js","assets/turtle-C0hdQUNN.js","assets/stata-bRt97scT.js","assets/svelte-DK3KTNg_.js","assets/templ-CP2hJ0oK.js","assets/go-Cv7ZOjGq.js","assets/ts-tags-CiO5kd_m.js","assets/twig-DN6YEzOP.js","assets/vue-xldAUJov.js","assets/vue-html-x3hEOujm.js","assets/xsl-BqG2VzO2.js"])))=>i.map(i=>d[i]);
import{r as D,n as R,w as Qe,x as fv,l as qR,y as LF,z as Hn,A as mn,B as KR,C as NF,o as MF,D as BF,q as FF,F as HF}from"./components-6Yp278Dk.js";import{a as Qr,u as St,b as UF,t as kp}from"./theme-DxrHHsjg.js";const jF=5,Mf=6,Bf=10;let $F=(t,e,r,n)=>(t.events=t.events||{},t.events[r+Bf]||(t.events[r+Bf]=n(i=>{t.events[r].reduceRight((s,o)=>(o(s),s),{shared:{},...i})})),t.events[r]=t.events[r]||[],t.events[r].push(e),()=>{let i=t.events[r],s=i.indexOf(e);i.splice(s,1),i.length||(delete t.events[r],t.events[r+Bf](),delete t.events[r+Bf])}),zF=1e3,VF=(t,e)=>$F(t,n=>{let i=e(n);i&&t.events[Mf].push(i)},jF,n=>{let i=t.listen;t.listen=(...o)=>(!t.lc&&!t.active&&(t.active=!0,n()),i(...o));let s=t.off;return t.events[Mf]=[],t.off=()=>{s(),setTimeout(()=>{if(t.active&&!t.lc){t.active=!1;for(let o of t.events[Mf])o();t.events[Mf]=[]}},zF)},()=>{t.listen=i,t.off=s}}),WF=(t,e,r)=>{Array.isArray(t)||(t=[t]);let n,i=0,s=()=>{let l=t.map(c=>c.get());if(n===void 0||l.some((c,u)=>c!==n[u])){let c=++i;n=l;let u=e(...l);u&&u.then&&u.t?u.then(h=>{c===i&&o.set(h)}):o.set(u)}},o=Qr(void 0,Math.max(...t.map(l=>l.l))+1),a=s;return VF(o,()=>{let l=t.map(c=>c.listen(a,-1/o.l));return s(),()=>{for(let c of l)c()}}),o},dv=(t,e)=>WF(t,e),ba=(t={})=>{let e=Qr(t);return e.setKey=function(r,n){let i=e.value;typeof n>"u"&&r in e.value?(e.value={...e.value},delete e.value[r],e.notify(i,r)):e.value[r]!==n&&(e.value={...e.value,[r]:n},e.notify(i,r))},e};function GF(){return()=>{}}function qF(){return D.useSyncExternalStore(GF,()=>!0,()=>!1)}function To({children:t,fallback:e=null}){return qF()?D.createElement(D.Fragment,null,t()):D.createElement(D.Fragment,null,e)}function KF(t){if(typeof Proxy>"u")return t;const e=new Map,r=(...n)=>t(...n);return new Proxy(r,{get:(n,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}function ig(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Ib=t=>Array.isArray(t);function YR(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Ou(t){return typeof t=="string"||Array.isArray(t)}function _S(t){const e=[{},{}];return t?.values.forEach((r,n)=>{e[0][n]=r.get(),e[1][n]=r.getVelocity()}),e}function pv(t,e,r,n){if(typeof e=="function"){const[i,s]=_S(n);e=e(r!==void 0?r:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=_S(n);e=e(r!==void 0?r:t.custom,i,s)}return e}function sg(t,e,r){const n=t.getProps();return pv(n,e,r!==void 0?r:n.custom,t)}const mv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],gv=["initial",...mv],Hh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ya=new Set(Hh),Ri=t=>t*1e3,Pi=t=>t/1e3,YF={type:"spring",stiffness:500,damping:25,restSpeed:10},XF=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),QF={type:"keyframes",duration:.8},ZF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},JF=(t,{keyframes:e})=>e.length>2?QF:ya.has(t)?t.startsWith("scale")?XF(e[1]):YF:ZF;function _v(t,e){return t?t[e]||t.default||t:void 0}const e8={skipAnimations:!1,useManualTiming:!1},t8=t=>t!==null;function og(t,{repeat:e,repeatType:r="loop"},n){const i=t.filter(t8),s=e&&r!=="loop"&&e%2===1?0:i.length-1;return!s||n===void 0?i[s]:n}const xr=t=>t;function r8(t){let e=new Set,r=new Set,n=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,u=!1,h=!1)=>{const d=h&&n?e:r;return u&&s.add(c),d.has(c)||d.add(c),c},cancel:c=>{r.delete(c),s.delete(c)},process:c=>{if(o=c,n){i=!0;return}n=!0,[e,r]=[r,e],r.clear(),e.forEach(a),n=!1,i&&(i=!1,l.process(c))}};return l}const Ff=["read","resolveKeyframes","update","preRender","render","postRender"],n8=40;function XR(t,e){let r=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>r=!0,o=Ff.reduce((p,b)=>(p[b]=r8(s),p),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:h,postRender:f}=o,d=()=>{const p=performance.now();r=!1,i.delta=n?1e3/60:Math.max(Math.min(p-i.timestamp,n8),1),i.timestamp=p,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),h.process(i),f.process(i),i.isProcessing=!1,r&&e&&(n=!1,t(d))},g=()=>{r=!0,n=!0,i.isProcessing||t(d)};return{schedule:Ff.reduce((p,b)=>{const y=o[b];return p[b]=(v,w=!1,S=!1)=>(r||g(),y.schedule(v,w,S)),p},{}),cancel:p=>{for(let b=0;b<Ff.length;b++)o[Ff[b]].cancel(p)},state:i,steps:o}}const{schedule:_t,cancel:Ys,state:cr,steps:w0}=XR(typeof requestAnimationFrame<"u"?requestAnimationFrame:xr,!0),QR=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,i8=1e-7,s8=12;function o8(t,e,r,n,i){let s,o,a=0;do o=e+(r-e)/2,s=QR(o,n,i)-t,s>0?r=o:e=o;while(Math.abs(s)>i8&&++a<s8);return o}function va(t,e,r,n){if(t===e&&r===n)return xr;const i=s=>o8(s,0,1,t,r);return s=>s===0||s===1?s:QR(i(s),e,n)}const ZR=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,JR=t=>e=>1-t(1-e),eP=va(.33,1.53,.69,.99),bv=JR(eP),tP=ZR(bv),rP=t=>(t*=2)<1?.5*bv(t):.5*(2-Math.pow(2,-10*(t-1))),yv=t=>1-Math.sin(Math.acos(t)),nP=JR(yv),iP=ZR(yv),sP=t=>/^0[^.\s]+$/u.test(t);function a8(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||sP(t):!0}let Ap=xr;const oP=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),aP=t=>e=>typeof e=="string"&&e.startsWith(t),lP=aP("--"),l8=aP("var(--"),vv=t=>l8(t)?c8.test(t.split("/*")[0].trim()):!1,c8=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,u8=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function h8(t){const e=u8.exec(t);if(!e)return[,];const[,r,n,i]=e;return[`--${r??n}`,i]}function cP(t,e,r=1){const[n,i]=h8(t);if(!n)return;const s=window.getComputedStyle(e).getPropertyValue(n);if(s){const o=s.trim();return oP(o)?parseFloat(o):o}return vv(i)?cP(i,e,r+1):i}const os=(t,e,r)=>r>e?e:r<t?t:r,Zl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Lu={...Zl,transform:t=>os(0,1,t)},Hf={...Zl,default:1},Uh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),xs=Uh("deg"),Ii=Uh("%"),Ge=Uh("px"),f8=Uh("vh"),d8=Uh("vw"),bS={...Ii,parse:t=>Ii.parse(t)/100,transform:t=>Ii.transform(t*100)},p8=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),yS=t=>t===Zl||t===Ge,vS=(t,e)=>parseFloat(t.split(", ")[e]),wS=(t,e)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const i=n.match(/^matrix3d\((.+)\)$/u);if(i)return vS(i[1],e);{const s=n.match(/^matrix\((.+)\)$/u);return s?vS(s[1],t):0}},m8=new Set(["x","y","z"]),g8=Hh.filter(t=>!m8.has(t));function _8(t){const e=[];return g8.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e}const kl={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:wS(4,13),y:wS(5,14)};kl.translateX=kl.x;kl.translateY=kl.y;const uP=t=>e=>e.test(t),b8={test:t=>t==="auto",parse:t=>t},hP=[Zl,Ge,Ii,xs,d8,f8,b8],ES=t=>hP.find(uP(t)),Vo=new Set;let Db=!1,Ob=!1;function fP(){if(Ob){const t=Array.from(Vo).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),r=new Map;e.forEach(n=>{const i=_8(n);i.length&&(r.set(n,i),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const i=r.get(n);i&&i.forEach(([s,o])=>{var a;(a=n.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Ob=!1,Db=!1,Vo.forEach(t=>t.complete()),Vo.clear()}function dP(){Vo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Ob=!0)})}function y8(){dP(),fP()}class wv{constructor(e,r,n,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=n,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Vo.add(this),Db||(Db=!0,_t.read(dP),_t.resolveKeyframes(fP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:n,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i?.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(n&&r){const l=n.readValue(r,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Vo.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Vo.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const lu=t=>Math.round(t*1e5)/1e5,Ev=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function v8(t){return t==null}const w8=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Sv=(t,e)=>r=>!!(typeof r=="string"&&w8.test(r)&&r.startsWith(t)||e&&!v8(r)&&Object.prototype.hasOwnProperty.call(r,e)),pP=(t,e,r)=>n=>{if(typeof n!="string")return n;const[i,s,o,a]=n.match(Ev);return{[t]:parseFloat(i),[e]:parseFloat(s),[r]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},E8=t=>os(0,255,t),E0={...Zl,transform:t=>Math.round(E8(t))},Io={test:Sv("rgb","red"),parse:pP("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+E0.transform(t)+", "+E0.transform(e)+", "+E0.transform(r)+", "+lu(Lu.transform(n))+")"};function S8(t){let e="",r="",n="",i="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),i=t.substring(4,5),e+=e,r+=r,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const Lb={test:Sv("#"),parse:S8,transform:Io.transform},Xa={test:Sv("hsl","hue"),parse:pP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+Ii.transform(lu(e))+", "+Ii.transform(lu(r))+", "+lu(Lu.transform(n))+")"},yr={test:t=>Io.test(t)||Lb.test(t)||Xa.test(t),parse:t=>Io.test(t)?Io.parse(t):Xa.test(t)?Xa.parse(t):Lb.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Io.transform(t):Xa.transform(t)},x8=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function T8(t){var e,r;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Ev))===null||e===void 0?void 0:e.length)||0)+(((r=t.match(x8))===null||r===void 0?void 0:r.length)||0)>0}const mP="number",gP="color",C8="var",k8="var(",SS="${}",A8=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Nu(t){const e=t.toString(),r=[],n={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(A8,l=>(yr.test(l)?(n.color.push(s),i.push(gP),r.push(yr.parse(l))):l.startsWith(k8)?(n.var.push(s),i.push(C8),r.push(l)):(n.number.push(s),i.push(mP),r.push(parseFloat(l))),++s,SS)).split(SS);return{values:r,split:a,indexes:n,types:i}}function _P(t){return Nu(t).values}function bP(t){const{split:e,types:r}=Nu(t),n=e.length;return i=>{let s="";for(let o=0;o<n;o++)if(s+=e[o],i[o]!==void 0){const a=r[o];a===mP?s+=lu(i[o]):a===gP?s+=yr.transform(i[o]):s+=i[o]}return s}}const R8=t=>typeof t=="number"?0:t;function P8(t){const e=_P(t);return bP(t)(e.map(R8))}const Xs={test:T8,parse:_P,createTransformer:bP,getAnimatableNone:P8},I8=new Set(["brightness","contrast","saturate","opacity"]);function D8(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(Ev)||[];if(!n)return t;const i=r.replace(n,"");let s=I8.has(e)?1:0;return n!==r&&(s*=100),e+"("+s+i+")"}const O8=/\b([a-z-]*)\(.*?\)/gu,Nb={...Xs,getAnimatableNone:t=>{const e=t.match(O8);return e?e.map(D8).join(" "):t}},L8={borderWidth:Ge,borderTopWidth:Ge,borderRightWidth:Ge,borderBottomWidth:Ge,borderLeftWidth:Ge,borderRadius:Ge,radius:Ge,borderTopLeftRadius:Ge,borderTopRightRadius:Ge,borderBottomRightRadius:Ge,borderBottomLeftRadius:Ge,width:Ge,maxWidth:Ge,height:Ge,maxHeight:Ge,top:Ge,right:Ge,bottom:Ge,left:Ge,padding:Ge,paddingTop:Ge,paddingRight:Ge,paddingBottom:Ge,paddingLeft:Ge,margin:Ge,marginTop:Ge,marginRight:Ge,marginBottom:Ge,marginLeft:Ge,backgroundPositionX:Ge,backgroundPositionY:Ge},N8={rotate:xs,rotateX:xs,rotateY:xs,rotateZ:xs,scale:Hf,scaleX:Hf,scaleY:Hf,scaleZ:Hf,skew:xs,skewX:xs,skewY:xs,distance:Ge,translateX:Ge,translateY:Ge,translateZ:Ge,x:Ge,y:Ge,z:Ge,perspective:Ge,transformPerspective:Ge,opacity:Lu,originX:bS,originY:bS,originZ:Ge},xS={...Zl,transform:Math.round},xv={...L8,...N8,zIndex:xS,size:Ge,fillOpacity:Lu,strokeOpacity:Lu,numOctaves:xS},M8={...xv,color:yr,backgroundColor:yr,outlineColor:yr,fill:yr,stroke:yr,borderColor:yr,borderTopColor:yr,borderRightColor:yr,borderBottomColor:yr,borderLeftColor:yr,filter:Nb,WebkitFilter:Nb},Tv=t=>M8[t];function yP(t,e){let r=Tv(t);return r!==Nb&&(r=Xs),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const B8=new Set(["auto","none","0"]);function F8(t,e,r){let n=0,i;for(;n<t.length&&!i;){const s=t[n];typeof s=="string"&&!B8.has(s)&&Nu(s).values.length&&(i=t[n]),n++}if(i&&r)for(const s of e)t[s]=yP(r,i)}class vP extends wv{constructor(e,r,n,i,s){super(e,r,n,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),vv(c))){const u=cP(c,r.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!p8.has(n)||e.length!==2)return;const[i,s]=e,o=ES(i),a=ES(s);if(o!==a)if(yS(o)&&yS(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,n=[];for(let i=0;i<e.length;i++)a8(e[i])&&n.push(i);n.length&&F8(e,n,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=kl[n](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const i=r[r.length-1];i!==void 0&&e.getValue(n,i).jump(i,!1)}measureEndState(){var e;const{element:r,name:n,unresolvedKeyframes:i}=this;if(!r||!r.current)return;const s=r.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=kl[n](r.measureViewportBox(),window.getComputedStyle(r.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{r.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function ag(t){return typeof t=="function"}let Yd;function H8(){Yd=void 0}const Di={now:()=>(Yd===void 0&&Di.set(cr.isProcessing||e8.useManualTiming?cr.timestamp:performance.now()),Yd),set:t=>{Yd=t,queueMicrotask(H8)}},TS=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Xs.test(t)||t==="0")&&!t.startsWith("url("));function U8(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function j8(t,e,r,n){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=TS(i,e),a=TS(s,e);return!o||!a?!1:U8(t)||(r==="spring"||ag(r))&&n}const $8=40;class wP{constructor({autoplay:e=!0,delay:r=0,type:n="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Di.now(),this.options={autoplay:e,delay:r,type:n,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>$8?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&y8(),this._resolved}onKeyframesResolved(e,r){this.resolvedAt=Di.now(),this.hasAttemptedResolve=!0;const{name:n,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!j8(e,n,i,s))if(o)this.options.duration=0;else{l?.(og(e,this.options,r)),a?.(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,r);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:r,...u},this.onPostResolved())}onPostResolved(){}then(e,r){return this.currentFinishedPromise.then(e,r)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Zo=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n},EP=(t,e,r=10)=>{let n="";const i=Math.max(Math.round(e/r),2);for(let s=0;s<i;s++)n+=t(Zo(0,i-1,s))+", ";return`linear(${n.substring(0,n.length-2)})`};function SP(t,e){return e?t*(1e3/e):0}const z8=5;function xP(t,e,r){const n=Math.max(e-z8,0);return SP(r-t(n),e-n)}const Bt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},S0=.001;function V8({duration:t=Bt.duration,bounce:e=Bt.bounce,velocity:r=Bt.velocity,mass:n=Bt.mass}){let i,s,o=1-e;o=os(Bt.minDamping,Bt.maxDamping,o),t=os(Bt.minDuration,Bt.maxDuration,Pi(t)),o<1?(i=c=>{const u=c*o,h=u*t,f=u-r,d=Mb(c,o),g=Math.exp(-h);return S0-f/d*g},s=c=>{const h=c*o*t,f=h*r+r,d=Math.pow(o,2)*Math.pow(c,2)*t,g=Math.exp(-h),_=Mb(Math.pow(c,2),o);return(-i(c)+S0>0?-1:1)*((f-d)*g)/_}):(i=c=>{const u=Math.exp(-c*t),h=(c-r)*t+1;return-S0+u*h},s=c=>{const u=Math.exp(-c*t),h=(r-c)*(t*t);return u*h});const a=5/t,l=G8(i,s,a);if(t=Ri(t),isNaN(l))return{stiffness:Bt.stiffness,damping:Bt.damping,duration:t};{const c=Math.pow(l,2)*n;return{stiffness:c,damping:o*2*Math.sqrt(n*c),duration:t}}}const W8=12;function G8(t,e,r){let n=r;for(let i=1;i<W8;i++)n=n-t(n)/e(n);return n}function Mb(t,e){return t*Math.sqrt(1-e*e)}const Rp=2e4;function Cv(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<Rp;)e+=r,n=t.next(e);return e>=Rp?1/0:e}const q8=["duration","bounce"],K8=["stiffness","damping","mass"];function CS(t,e){return e.some(r=>t[r]!==void 0)}function Y8(t){let e={velocity:Bt.velocity,stiffness:Bt.stiffness,damping:Bt.damping,mass:Bt.mass,isResolvedFromDuration:!1,...t};if(!CS(t,K8)&&CS(t,q8))if(t.visualDuration){const r=t.visualDuration,n=2*Math.PI/(r*1.2),i=n*n,s=2*os(.05,1,1-t.bounce)*Math.sqrt(i);e={...e,mass:Bt.mass,stiffness:i,damping:s}}else{const r=V8(t);e={...e,...r,mass:Bt.mass},e.isResolvedFromDuration=!0}return e}function kv(t=Bt.visualDuration,e=Bt.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:i}=r;const s=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:h,velocity:f,isResolvedFromDuration:d}=Y8({...r,velocity:-Pi(r.velocity||0)}),g=f||0,_=c/(2*Math.sqrt(l*u)),m=o-s,p=Pi(Math.sqrt(l/u)),b=Math.abs(m)<5;n||(n=b?Bt.restSpeed.granular:Bt.restSpeed.default),i||(i=b?Bt.restDelta.granular:Bt.restDelta.default);let y;if(_<1){const w=Mb(p,_);y=S=>{const x=Math.exp(-_*p*S);return o-x*((g+_*p*m)/w*Math.sin(w*S)+m*Math.cos(w*S))}}else if(_===1)y=w=>o-Math.exp(-p*w)*(m+(g+p*m)*w);else{const w=p*Math.sqrt(_*_-1);y=S=>{const x=Math.exp(-_*p*S),E=Math.min(w*S,300);return o-x*((g+_*p*m)*Math.sinh(E)+w*m*Math.cosh(E))/w}}const v={calculatedDuration:d&&h||null,next:w=>{const S=y(w);if(d)a.done=w>=h;else{let x=0;_<1&&(x=w===0?Ri(g):xP(y,w,S));const E=Math.abs(x)<=n,T=Math.abs(o-S)<=i;a.done=E&&T}return a.value=a.done?o:S,a},toString:()=>{const w=Math.min(Cv(v),Rp),S=EP(x=>v.next(w*x).value,w,30);return w+"ms "+S}};return v}function kS({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=t[0],f={done:!1,value:h},d=E=>a!==void 0&&E<a||l!==void 0&&E>l,g=E=>a===void 0?l:l===void 0||Math.abs(a-E)<Math.abs(l-E)?a:l;let _=r*e;const m=h+_,p=o===void 0?m:o(m);p!==m&&(_=p-h);const b=E=>-_*Math.exp(-E/n),y=E=>p+b(E),v=E=>{const T=b(E),k=y(E);f.done=Math.abs(T)<=c,f.value=f.done?p:k};let w,S;const x=E=>{d(f.value)&&(w=E,S=kv({keyframes:[f.value,g(f.value)],velocity:xP(y,E,f.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return x(0),{calculatedDuration:null,next:E=>{let T=!1;return!S&&w===void 0&&(T=!0,v(E),x(E)),w!==void 0&&E>=w?S.next(E-w):(!T&&v(E),f)}}}const X8=va(.42,0,1,1),Q8=va(0,0,.58,1),TP=va(.42,0,.58,1),CP=t=>Array.isArray(t)&&typeof t[0]!="number",Av=t=>Array.isArray(t)&&typeof t[0]=="number",AS={linear:xr,easeIn:X8,easeInOut:TP,easeOut:Q8,circIn:yv,circInOut:iP,circOut:nP,backIn:bv,backInOut:tP,backOut:eP,anticipate:rP},RS=t=>{if(Av(t)){Ap(t.length===4);const[e,r,n,i]=t;return va(e,r,n,i)}else if(typeof t=="string")return Ap(AS[t]!==void 0),AS[t];return t},Z8=(t,e)=>r=>e(t(r)),ts=(...t)=>t.reduce(Z8),Pt=(t,e,r)=>t+(e-t)*r;function x0(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function J8({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let i=0,s=0,o=0;if(!e)i=s=o=r;else{const a=r<.5?r*(1+e):r+e-r*e,l=2*r-a;i=x0(l,a,t+1/3),s=x0(l,a,t),o=x0(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:n}}function Pp(t,e){return r=>r>0?e:t}const T0=(t,e,r)=>{const n=t*t,i=r*(e*e-n)+n;return i<0?0:Math.sqrt(i)},eH=[Lb,Io,Xa],tH=t=>eH.find(e=>e.test(t));function PS(t){const e=tH(t);if(!e)return!1;let r=e.parse(t);return e===Xa&&(r=J8(r)),r}const IS=(t,e)=>{const r=PS(t),n=PS(e);if(!r||!n)return Pp(t,e);const i={...r};return s=>(i.red=T0(r.red,n.red,s),i.green=T0(r.green,n.green,s),i.blue=T0(r.blue,n.blue,s),i.alpha=Pt(r.alpha,n.alpha,s),Io.transform(i))},Bb=new Set(["none","hidden"]);function rH(t,e){return Bb.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function nH(t,e){return r=>Pt(t,e,r)}function Rv(t){return typeof t=="number"?nH:typeof t=="string"?vv(t)?Pp:yr.test(t)?IS:oH:Array.isArray(t)?kP:typeof t=="object"?yr.test(t)?IS:iH:Pp}function kP(t,e){const r=[...t],n=r.length,i=t.map((s,o)=>Rv(s)(s,e[o]));return s=>{for(let o=0;o<n;o++)r[o]=i[o](s);return r}}function iH(t,e){const r={...t,...e},n={};for(const i in r)t[i]!==void 0&&e[i]!==void 0&&(n[i]=Rv(t[i])(t[i],e[i]));return i=>{for(const s in n)r[s]=n[s](i);return r}}function sH(t,e){var r;const n=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(r=t.values[a])!==null&&r!==void 0?r:0;n[s]=l,i[o]++}return n}const oH=(t,e)=>{const r=Xs.createTransformer(e),n=Nu(t),i=Nu(e);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?Bb.has(t)&&!i.values.length||Bb.has(e)&&!n.values.length?rH(t,e):ts(kP(sH(n,i),i.values),r):Pp(t,e)};function AP(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?Pt(t,e,r):Rv(t)(t,e)}function aH(t,e,r){const n=[],i=r||AP,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||xr:e;a=ts(l,a)}n.push(a)}return n}function lH(t,e,{clamp:r=!0,ease:n,mixer:i}={}){const s=t.length;if(Ap(s===e.length),s===1)return()=>e[0];if(s===2&&t[0]===t[1])return()=>e[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=aH(e,n,i),a=o.length,l=c=>{let u=0;if(a>1)for(;u<t.length-2&&!(c<t[u+1]);u++);const h=Zo(t[u],t[u+1],c);return o[u](h)};return r?c=>l(os(t[0],t[s-1],c)):l}function RP(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const i=Zo(0,e,n);t.push(Pt(r,1,i))}}function PP(t){const e=[0];return RP(e,t.length-1),e}function cH(t,e){return t.map(r=>r*e)}function uH(t,e){return t.map(()=>e||TP).splice(0,t.length-1)}function Ip({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const i=CP(n)?n.map(RS):RS(n),s={done:!1,value:e[0]},o=cH(r&&r.length===e.length?r:PP(e),t),a=lH(o,e,{ease:Array.isArray(i)?i:uH(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const hH=t=>{const e=({timestamp:r})=>t(r);return{start:()=>_t.update(e,!0),stop:()=>Ys(e),now:()=>cr.isProcessing?cr.timestamp:Di.now()}},fH={decay:kS,inertia:kS,tween:Ip,keyframes:Ip,spring:kv},dH=t=>t/100;class Pv extends wP{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:r,motionValue:n,element:i,keyframes:s}=this.options,o=i?.KeyframeResolver||wv,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,r,n,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:r="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=ag(r)?r:fH[r]||Ip;let l,c;a!==Ip&&typeof e[0]!="number"&&(l=ts(dH,AP(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=Cv(u));const{calculatedDuration:h}=u,f=h+i,d=f*(n+1)-i;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:f,totalDuration:d}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,r=!1){const{resolved:n}=this;if(!n){const{keyframes:E}=this.options;return{done:!0,value:E[E.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:h}=n;if(this.startTime===null)return s.next(0);const{delay:f,repeat:d,repeatType:g,repeatDelay:_,onUpdate:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),r?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const p=this.currentTime-f*(this.speed>=0?1:-1),b=this.speed>=0?p<0:p>u;this.currentTime=Math.max(p,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let y=this.currentTime,v=s;if(d){const E=Math.min(this.currentTime,u)/h;let T=Math.floor(E),k=E%1;!k&&E>=1&&(k=1),k===1&&T--,T=Math.min(T,d+1),!!(T%2)&&(g==="reverse"?(k=1-k,_&&(k-=_/h)):g==="mirror"&&(v=o)),y=os(0,1,k)*h}const w=b?{done:!1,value:l[0]}:v.next(y);a&&(w.value=a(w.value));let{done:S}=w;!b&&c!==null&&(S=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const x=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return x&&i!==void 0&&(w.value=og(l,this.options,i)),m&&m(w.value),x&&this.finish(),w}get duration(){const{resolved:e}=this;return e?Pi(e.calculatedDuration):0}get time(){return Pi(this.currentTime)}set time(e){e=Ri(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=Pi(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=hH,onPlay:r,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),r&&r();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const pH=new Set(["opacity","clipPath","filter","transform"]);function Iv(t){let e;return()=>(e===void 0&&(e=t()),e)}const mH={linearEasing:void 0};function gH(t,e){const r=Iv(t);return()=>{var n;return(n=mH[e])!==null&&n!==void 0?n:r()}}const Dp=gH(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function IP(t){return!!(typeof t=="function"&&Dp()||!t||typeof t=="string"&&(t in Fb||Dp())||Av(t)||Array.isArray(t)&&t.every(IP))}const Kc=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,Fb={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Kc([0,.65,.55,1]),circOut:Kc([.55,0,1,.45]),backIn:Kc([.31,.01,.66,-.59]),backOut:Kc([.33,1.53,.69,.99])};function DP(t,e){if(t)return typeof t=="function"&&Dp()?EP(t,e):Av(t)?Kc(t):Array.isArray(t)?t.map(r=>DP(r,e)||Fb.easeOut):Fb[t]}function _H(t,e,r,{delay:n=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:r};l&&(c.offset=l);const u=DP(a,i);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:n,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function DS(t,e){t.timeline=e,t.onfinish=null}const bH=Iv(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Op=10,yH=2e4;function vH(t){return ag(t.type)||t.type==="spring"||!IP(t.ease)}function wH(t,e){const r=new Pv({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:t[0]};const i=[];let s=0;for(;!n.done&&s<yH;)n=r.sample(s),i.push(n.value),s+=Op;return{times:void 0,keyframes:i,duration:s-Op,ease:"linear"}}const OP={anticipate:rP,backInOut:tP,circInOut:iP};function EH(t){return t in OP}class OS extends wP{constructor(e){super(e);const{name:r,motionValue:n,element:i,keyframes:s}=this.options;this.resolver=new vP(s,(o,a)=>this.onKeyframesResolved(o,a),r,n,i),this.resolver.scheduleResolve()}initPlayback(e,r){var n;let{duration:i=300,times:s,ease:o,type:a,motionValue:l,name:c,startTime:u}=this.options;if(!(!((n=l.owner)===null||n===void 0)&&n.current))return!1;if(typeof o=="string"&&Dp()&&EH(o)&&(o=OP[o]),vH(this.options)){const{onComplete:f,onUpdate:d,motionValue:g,element:_,...m}=this.options,p=wH(e,m);e=p.keyframes,e.length===1&&(e[1]=e[0]),i=p.duration,s=p.times,o=p.ease,a="keyframes"}const h=_H(l.owner.current,c,e,{...this.options,duration:i,times:s,ease:o});return h.startTime=u??this.calcStartTime(),this.pendingTimeline?(DS(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:f}=this.options;l.set(og(e,this.options,r)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:i,times:s,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:r}=e;return Pi(r)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:r}=e;return Pi(r.currentTime||0)}set time(e){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.currentTime=Ri(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:r}=e;return r.playbackRate}set speed(e){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:r}=e;return r.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:r}=e;return r.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:r}=this;if(!r)return xr;const{animation:n}=r;DS(n,e)}return xr}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:r}=e;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:r}=e;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:r,keyframes:n,duration:i,type:s,ease:o,times:a}=e;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:h,element:f,...d}=this.options,g=new Pv({...d,keyframes:n,duration:i,type:s,ease:o,times:a,isGenerator:!0}),_=Ri(this.time);c.setWithVelocity(g.sample(_-Op).value,g.sample(_).value,Op)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:r,name:n,repeatDelay:i,repeatType:s,damping:o,type:a}=e;return bH()&&n&&pH.has(n)&&r&&r.owner&&r.owner.current instanceof HTMLElement&&!r.owner.getProps().onUpdate&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const SH=Iv(()=>window.ScrollTimeline!==void 0);class LP{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,r){return Promise.all(this.animations).then(e).catch(r)}getAll(e){return this.animations[0][e]}setAll(e,r){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=r}attachTimeline(e,r){const n=this.animations.map(i=>SH()&&i.attachTimeline?i.attachTimeline(e):r(i));return()=>{n.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let r=0;r<this.animations.length;r++)e=Math.max(e,this.animations[r].duration);return e}runAll(e){this.animations.forEach(r=>r[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function xH({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const Dv=(t,e,r,n={},i,s)=>o=>{const a=_v(n,t)||{},l=a.delay||n.delay||0;let{elapsed:c=0}=n;c=c-Ri(l);let u={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};xH(a)||(u={...u,...JF(t,u)}),u.duration&&(u.duration=Ri(u.duration)),u.repeatDelay&&(u.repeatDelay=Ri(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(h=!0)),h&&!s&&e.get()!==void 0){const f=og(u.keyframes,a);if(f!==void 0)return _t.update(()=>{u.onUpdate(f),u.onComplete()}),new LP([])}return!s&&OS.supports(u)?new OS(u):new Pv(u)},TH=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),CH=t=>Ib(t)?t[t.length-1]||0:t;function Ov(t,e){t.indexOf(e)===-1&&t.push(e)}function lg(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}class Lv{constructor(){this.subscriptions=[]}add(e){return Ov(this.subscriptions,e),()=>lg(this.subscriptions,e)}notify(e,r,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,r,n);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const LS=30,kH=t=>!isNaN(parseFloat(t));class AH{constructor(e,r={}){this.version="11.12.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,i=!0)=>{const s=Di.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=Di.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=kH(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new Lv);const n=this.events[e].add(r);return e==="change"?()=>{n(),_t.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){!r||!this.passiveEffect?this.updateAndNotify(e,r):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Di.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>LS)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,LS);return SP(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Mu(t,e){return new AH(t,e)}function RH(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,Mu(r))}function PH(t,e){const r=sg(t,e);let{transitionEnd:n={},transition:i={},...s}=r||{};s={...s,...n};for(const o in s){const a=CH(s[o]);RH(t,o,a)}}const Nv=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),IH="framerAppearId",NP="data-"+Nv(IH);function MP(t){return t.props[NP]}const or=t=>!!(t&&t.getVelocity);function DH(t){return!!(or(t)&&t.add)}function Hb(t,e){const r=t.getValue("willChange");if(DH(r))return r.add(e)}function OH({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function Mv(t,e,{delay:r=0,transitionOverride:n,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;n&&(o=n);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const h in l){const f=t.getValue(h,(s=t.latestValues[h])!==null&&s!==void 0?s:null),d=l[h];if(d===void 0||u&&OH(u,h))continue;const g={delay:r,..._v(o||{},h)};let _=!1;if(window.MotionHandoffAnimation){const p=MP(t);if(p){const b=window.MotionHandoffAnimation(p,h,_t);b!==null&&(g.startTime=b,_=!0)}}Hb(t,h),f.start(Dv(h,f,d,t.shouldReduceMotion&&ya.has(h)?{type:!1}:g,t,_));const m=f.animation;m&&c.push(m)}return a&&Promise.all(c).then(()=>{_t.update(()=>{a&&PH(t,a)})}),c}function Ub(t,e,r={}){var n;const i=sg(t,e,r.type==="exit"?(n=t.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};r.transitionOverride&&(s=r.transitionOverride);const o=i?()=>Promise.all(Mv(t,i,r)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:f}=s;return LH(t,e,u+c,h,f,r)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(r.delay)])}function LH(t,e,r=0,n=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*n,l=i===1?(c=0)=>c*n:(c=0)=>a-c*n;return Array.from(t.variantChildren).sort(NH).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(Ub(c,e,{...s,delay:r+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function NH(t,e){return t.sortNodePosition(e)}function MH(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const i=e.map(s=>Ub(t,s,r));n=Promise.all(i)}else if(typeof e=="string")n=Ub(t,e,r);else{const i=typeof e=="function"?sg(t,e,r.custom):e;n=Promise.all(Mv(t,i,r))}return n.then(()=>{t.notify("AnimationComplete",e)})}const BH=gv.length;function BP(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?BP(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<BH;r++){const n=gv[r],i=t.props[n];(Ou(i)||i===!1)&&(e[n]=i)}return e}const FH=[...mv].reverse(),HH=mv.length;function UH(t){return e=>Promise.all(e.map(({animation:r,options:n})=>MH(t,r,n)))}function jH(t){let e=UH(t),r=NS(),n=!0;const i=l=>(c,u)=>{var h;const f=sg(t,u,l==="exit"?(h=t.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(f){const{transition:d,transitionEnd:g,..._}=f;c={...c,..._,...g}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,u=BP(t.parent)||{},h=[],f=new Set;let d={},g=1/0;for(let m=0;m<HH;m++){const p=FH[m],b=r[p],y=c[p]!==void 0?c[p]:u[p],v=Ou(y),w=p===l?b.isActive:null;w===!1&&(g=m);let S=y===u[p]&&y!==c[p]&&v;if(S&&n&&t.manuallyAnimateOnMount&&(S=!1),b.protectedKeys={...d},!b.isActive&&w===null||!y&&!b.prevProp||ig(y)||typeof y=="boolean")continue;const x=$H(b.prevProp,y);let E=x||p===l&&b.isActive&&!S&&v||m>g&&v,T=!1;const k=Array.isArray(y)?y:[y];let B=k.reduce(i(p),{});w===!1&&(B={});const{prevResolvedValues:P={}}=b,O={...P,...B},A=Q=>{E=!0,f.has(Q)&&(T=!0,f.delete(Q)),b.needsAnimating[Q]=!0;const ee=t.getValue(Q);ee&&(ee.liveStyle=!1)};for(const Q in O){const ee=B[Q],L=P[Q];if(d.hasOwnProperty(Q))continue;let M=!1;Ib(ee)&&Ib(L)?M=!YR(ee,L):M=ee!==L,M?ee!=null?A(Q):f.add(Q):ee!==void 0&&f.has(Q)?A(Q):b.protectedKeys[Q]=!0}b.prevProp=y,b.prevResolvedValues=B,b.isActive&&(d={...d,...B}),n&&t.blockInitialAnimation&&(E=!1),E&&(!(S&&x)||T)&&h.push(...k.map(Q=>({animation:Q,options:{type:p}})))}if(f.size){const m={};f.forEach(p=>{const b=t.getBaseTarget(p),y=t.getValue(p);y&&(y.liveStyle=!0),m[p]=b??null}),h.push({animation:m})}let _=!!h.length;return n&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(_=!1),n=!1,_?e(h):Promise.resolve()}function a(l,c){var u;if(r[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(f=>{var d;return(d=f.animationState)===null||d===void 0?void 0:d.setActive(l,c)}),r[l].isActive=c;const h=o(l);for(const f in r)r[f].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>r,reset:()=>{r=NS(),n=!0}}}function $H(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!YR(e,t):!1}function po(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function NS(){return{animate:po(!0),whileInView:po(),whileHover:po(),whileTap:po(),whileDrag:po(),whileFocus:po(),exit:po()}}class lo{constructor(e){this.isMounted=!1,this.node=e}update(){}}class zH extends lo{constructor(e){super(e),e.animationState||(e.animationState=jH(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ig(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let VH=0;class WH extends lo{constructor(){super(...arguments),this.id=VH++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const i=this.node.animationState.setActive("exit",!e);r&&!e&&i.then(()=>r(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const GH={animation:{Feature:zH},exit:{Feature:WH}},FP=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function cg(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const qH=t=>e=>FP(e)&&t(e,cg(e));function Qi(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}function rs(t,e,r,n){return Qi(t,e,qH(r),n)}const MS=(t,e)=>Math.abs(t-e);function KH(t,e){const r=MS(t.x,e.x),n=MS(t.y,e.y);return Math.sqrt(r**2+n**2)}class HP{constructor(e,r,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=k0(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,d=KH(h.offset,{x:0,y:0})>=3;if(!f&&!d)return;const{point:g}=h,{timestamp:_}=cr;this.history.push({...g,timestamp:_});const{onStart:m,onMove:p}=this.handlers;f||(m&&m(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),p&&p(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=C0(f,this.transformPagePoint),_t.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:d,onSessionEnd:g,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=k0(h.type==="pointercancel"?this.lastMoveEventInfo:C0(f,this.transformPagePoint),this.history);this.startEvent&&d&&d(h,m),g&&g(h,m)},!FP(e))return;this.dragSnapToOrigin=s,this.handlers=r,this.transformPagePoint=n,this.contextWindow=i||window;const o=cg(e),a=C0(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=cr;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=r;u&&u(e,k0(a,this.history)),this.removeListeners=ts(rs(this.contextWindow,"pointermove",this.handlePointerMove),rs(this.contextWindow,"pointerup",this.handlePointerUp),rs(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ys(this.updatePoint)}}function C0(t,e){return e?{point:e(t.point)}:t}function BS(t,e){return{x:t.x-e.x,y:t.y-e.y}}function k0({point:t},e){return{point:t,delta:BS(t,UP(e)),offset:BS(t,YH(e)),velocity:XH(e,.1)}}function YH(t){return t[0]}function UP(t){return t[t.length-1]}function XH(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const i=UP(t);for(;r>=0&&(n=t[r],!(i.timestamp-n.timestamp>Ri(e)));)r--;if(!n)return{x:0,y:0};const s=Pi(i.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-n.x)/s,y:(i.y-n.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function jP(t){let e=null;return()=>{const r=()=>{e=null};return e===null?(e=t,r):!1}}const FS=jP("dragHorizontal"),HS=jP("dragVertical");function $P(t){let e=!1;if(t==="y")e=HS();else if(t==="x")e=FS();else{const r=FS(),n=HS();r&&n?e=()=>{r(),n()}:(r&&r(),n&&n())}return e}function zP(){const t=$P(!0);return t?(t(),!1):!0}function Qa(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const VP=1e-4,QH=1-VP,ZH=1+VP,WP=.01,JH=0-WP,eU=0+WP;function pn(t){return t.max-t.min}function tU(t,e,r){return Math.abs(t-e)<=r}function US(t,e,r,n=.5){t.origin=n,t.originPoint=Pt(e.min,e.max,t.origin),t.scale=pn(r)/pn(e),t.translate=Pt(r.min,r.max,t.origin)-t.originPoint,(t.scale>=QH&&t.scale<=ZH||isNaN(t.scale))&&(t.scale=1),(t.translate>=JH&&t.translate<=eU||isNaN(t.translate))&&(t.translate=0)}function cu(t,e,r,n){US(t.x,e.x,r.x,n?n.originX:void 0),US(t.y,e.y,r.y,n?n.originY:void 0)}function jS(t,e,r){t.min=r.min+e.min,t.max=t.min+pn(e)}function rU(t,e,r){jS(t.x,e.x,r.x),jS(t.y,e.y,r.y)}function $S(t,e,r){t.min=e.min-r.min,t.max=t.min+pn(e)}function uu(t,e,r){$S(t.x,e.x,r.x),$S(t.y,e.y,r.y)}function nU(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?Pt(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?Pt(r,t,n.max):Math.min(t,r)),t}function zS(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function iU(t,{top:e,left:r,bottom:n,right:i}){return{x:zS(t.x,r,i),y:zS(t.y,e,n)}}function VS(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function sU(t,e){return{x:VS(t.x,e.x),y:VS(t.y,e.y)}}function oU(t,e){let r=.5;const n=pn(t),i=pn(e);return i>n?r=Zo(e.min,e.max-n,t.min):n>i&&(r=Zo(t.min,t.max-i,e.min)),os(0,1,r)}function aU(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const jb=.35;function lU(t=jb){return t===!1?t=0:t===!0&&(t=jb),{x:WS(t,"left","right"),y:WS(t,"top","bottom")}}function WS(t,e,r){return{min:GS(t,e),max:GS(t,r)}}function GS(t,e){return typeof t=="number"?t:t[e]||0}const qS=()=>({translate:0,scale:1,origin:0,originPoint:0}),Za=()=>({x:qS(),y:qS()}),KS=()=>({min:0,max:0}),Mt=()=>({x:KS(),y:KS()});function yn(t){return[t("x"),t("y")]}function GP({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function cU({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function uU(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function A0(t){return t===void 0||t===1}function $b({scale:t,scaleX:e,scaleY:r}){return!A0(t)||!A0(e)||!A0(r)}function Eo(t){return $b(t)||qP(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function qP(t){return YS(t.x)||YS(t.y)}function YS(t){return t&&t!=="0%"}function Lp(t,e,r){const n=t-r,i=e*n;return r+i}function XS(t,e,r,n,i){return i!==void 0&&(t=Lp(t,i,n)),Lp(t,r,n)+e}function zb(t,e=0,r=1,n,i){t.min=XS(t.min,e,r,n,i),t.max=XS(t.max,e,r,n,i)}function KP(t,{x:e,y:r}){zb(t.x,e.translate,e.scale,e.originPoint),zb(t.y,r.translate,r.scale,r.originPoint)}const QS=.999999999999,ZS=1.0000000000001;function hU(t,e,r,n=!1){const i=r.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=r[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&el(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,KP(t,o)),n&&Eo(s.latestValues)&&el(t,s.latestValues))}e.x<ZS&&e.x>QS&&(e.x=1),e.y<ZS&&e.y>QS&&(e.y=1)}function Ja(t,e){t.min=t.min+e,t.max=t.max+e}function JS(t,e,r,n,i=.5){const s=Pt(t.min,t.max,i);zb(t,e,r,s,n)}function el(t,e){JS(t.x,e.x,e.scaleX,e.scale,e.originX),JS(t.y,e.y,e.scaleY,e.scale,e.originY)}function YP(t,e){return GP(uU(t.getBoundingClientRect(),e))}function fU(t,e,r){const n=YP(t,r),{scroll:i}=e;return i&&(Ja(n.x,i.offset.x),Ja(n.y,i.offset.y)),n}const XP=({current:t})=>t?t.ownerDocument.defaultView:null,dU=new WeakMap;class pU{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Mt(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(cg(u,"page").point)},s=(u,h)=>{const{drag:f,dragPropagation:d,onDragStart:g}=this.getProps();if(f&&!d&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=$P(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),yn(m=>{let p=this.getAxisMotionValue(m).get()||0;if(Ii.test(p)){const{projection:b}=this.visualElement;if(b&&b.layout){const y=b.layout.layoutBox[m];y&&(p=pn(y)*(parseFloat(p)/100))}}this.originPoint[m]=p}),g&&_t.postRender(()=>g(u,h)),Hb(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:f,dragDirectionLock:d,onDirectionLock:g,onDrag:_}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:m}=h;if(d&&this.currentDirection===null){this.currentDirection=mU(m),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",h.point,m),this.updateAxis("y",h.point,m),this.visualElement.render(),_&&_(u,h)},a=(u,h)=>this.stop(u,h),l=()=>yn(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new HP(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:XP(this.visualElement)})}stop(e,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=r;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&_t.postRender(()=>s(e,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:i}=this.getProps();if(!n||!Uf(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=nU(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:r,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;r&&Qa(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&i?this.constraints=iU(i.layoutBox,r):this.constraints=!1,this.elastic=lU(n),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&yn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=aU(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!Qa(e))return!1;const n=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=fU(n,i.root,this.visualElement.getTransformPagePoint());let o=sU(i.layout.layoutBox,s);if(r){const a=r(cU(o));this.hasMutatedConstraints=!!a,a&&(o=GP(a))}return o}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=yn(u=>{if(!Uf(u,r,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const f=i?200:1e6,d=i?40:1e7,g={type:"inertia",velocity:n?e[u]:0,bounceStiffness:f,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(u,g)});return Promise.all(c).then(a)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return Hb(this.visualElement,e),n.start(Dv(e,n,0,r,this.visualElement,!1))}stopAnimation(){yn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){yn(e=>{var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),i=n[r];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){yn(r=>{const{drag:n}=this.getProps();if(!Uf(r,n,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(r);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[r];s.set(e[r]-Pt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Qa(r)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};yn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=oU({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),yn(o=>{if(!Uf(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Pt(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;dU.set(this.visualElement,this);const e=this.visualElement.current,r=rs(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();Qa(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),_t.read(n);const o=Qi(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(yn(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),r(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=jb,dragMomentum:a=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Uf(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function mU(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class gU extends lo{constructor(e){super(e),this.removeGroupControls=xr,this.removeListeners=xr,this.controls=new pU(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||xr}unmount(){this.removeGroupControls(),this.removeListeners()}}const ex=t=>(e,r)=>{t&&_t.postRender(()=>t(e,r))};class _U extends lo{constructor(){super(...arguments),this.removePointerDownListener=xr}onPointerDown(e){this.session=new HP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:XP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:ex(e),onStart:ex(r),onMove:n,onEnd:(s,o)=>{delete this.session,i&&_t.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=rs(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ug=D.createContext(null);function bU(){const t=D.useContext(ug);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:r,register:n}=t,i=D.useId();D.useEffect(()=>n(i),[]);const s=D.useCallback(()=>r&&r(i),[i,r]);return!e&&r?[!1,s]:[!0]}const Bv=D.createContext({}),QP=D.createContext({}),Xd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function tx(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const kc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ge.test(t))t=parseFloat(t);else return t;const r=tx(t,e.target.x),n=tx(t,e.target.y);return`${r}% ${n}%`}},yU={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,i=Xs.parse(t);if(i.length>5)return n;const s=Xs.createTransformer(t),o=typeof i[0]!="number"?1:0,a=r.x.scale*e.x,l=r.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=Pt(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}},Np={};function vU(t){Object.assign(Np,t)}const{schedule:Fv,cancel:RSe}=XR(queueMicrotask,!1);class wU extends D.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:i}=this.props,{projection:s}=e;vU(EU),s&&(r.group&&r.group.add(s),n&&n.register&&i&&n.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Xd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:i,isPresent:s}=this.props,o=n.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||_t.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Fv.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function ZP(t){const[e,r]=bU(),n=D.useContext(Bv);return R.jsx(wU,{...t,layoutGroup:n,switchLayoutGroup:D.useContext(QP),isPresent:e,safeToRemove:r})}const EU={borderRadius:{...kc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:kc,borderTopRightRadius:kc,borderBottomLeftRadius:kc,borderBottomRightRadius:kc,boxShadow:yU},JP=["TopLeft","TopRight","BottomLeft","BottomRight"],SU=JP.length,rx=t=>typeof t=="string"?parseFloat(t):t,nx=t=>typeof t=="number"||Ge.test(t);function xU(t,e,r,n,i,s){i?(t.opacity=Pt(0,r.opacity!==void 0?r.opacity:1,TU(n)),t.opacityExit=Pt(e.opacity!==void 0?e.opacity:1,0,CU(n))):s&&(t.opacity=Pt(e.opacity!==void 0?e.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let o=0;o<SU;o++){const a=`border${JP[o]}Radius`;let l=ix(e,a),c=ix(r,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||nx(l)===nx(c)?(t[a]=Math.max(Pt(rx(l),rx(c),n),0),(Ii.test(c)||Ii.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||r.rotate)&&(t.rotate=Pt(e.rotate||0,r.rotate||0,n))}function ix(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const TU=eI(0,.5,nP),CU=eI(.5,.95,xr);function eI(t,e,r){return n=>n<t?0:n>e?1:r(Zo(t,e,n))}function sx(t,e){t.min=e.min,t.max=e.max}function _n(t,e){sx(t.x,e.x),sx(t.y,e.y)}function ox(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function ax(t,e,r,n,i){return t-=e,t=Lp(t,1/r,n),i!==void 0&&(t=Lp(t,1/i,n)),t}function kU(t,e=0,r=1,n=.5,i,s=t,o=t){if(Ii.test(e)&&(e=parseFloat(e),e=Pt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Pt(s.min,s.max,n);t===s&&(a-=e),t.min=ax(t.min,e,r,a,i),t.max=ax(t.max,e,r,a,i)}function lx(t,e,[r,n,i],s,o){kU(t,e[r],e[n],e[i],e.scale,s,o)}const AU=["x","scaleX","originX"],RU=["y","scaleY","originY"];function cx(t,e,r,n){lx(t.x,e,AU,r?r.x:void 0,n?n.x:void 0),lx(t.y,e,RU,r?r.y:void 0,n?n.y:void 0)}function ux(t){return t.translate===0&&t.scale===1}function tI(t){return ux(t.x)&&ux(t.y)}function hx(t,e){return t.min===e.min&&t.max===e.max}function PU(t,e){return hx(t.x,e.x)&&hx(t.y,e.y)}function fx(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function rI(t,e){return fx(t.x,e.x)&&fx(t.y,e.y)}function dx(t){return pn(t.x)/pn(t.y)}function px(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class IU{constructor(){this.members=[]}add(e){Ov(this.members,e),e.scheduleRender()}remove(e){if(lg(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(i=>e===i);if(r===0)return!1;let n;for(let i=r;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){n=s;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function DU(t,e,r){let n="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=r?.z||0;if((i||s||o)&&(n=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:c,rotate:u,rotateX:h,rotateY:f,skewX:d,skewY:g}=r;c&&(n=`perspective(${c}px) ${n}`),u&&(n+=`rotate(${u}deg) `),h&&(n+=`rotateX(${h}deg) `),f&&(n+=`rotateY(${f}deg) `),d&&(n+=`skewX(${d}deg) `),g&&(n+=`skewY(${g}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(n+=`scale(${a}, ${l})`),n||"none"}const OU=(t,e)=>t.depth-e.depth;class LU{constructor(){this.children=[],this.isDirty=!1}add(e){Ov(this.children,e),this.isDirty=!0}remove(e){lg(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(OU),this.isDirty=!1,this.children.forEach(e)}}function Qd(t){const e=or(t)?t.get():t;return TH(e)?e.toValue():e}function NU(t,e){const r=Di.now(),n=({timestamp:i})=>{const s=i-r;s>=e&&(Ys(n),t(s-e))};return _t.read(n,!0),()=>Ys(n)}function nI(t){return t instanceof SVGElement&&t.tagName!=="svg"}function iI(t,e,r){const n=or(t)?t:Mu(t);return n.start(Dv("",n,e,r)),n.animation}const So={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Yc=typeof window<"u"&&window.MotionDebug!==void 0,R0=["","X","Y","Z"],MU={visibility:"hidden"},mx=1e3;let BU=0;function P0(t,e,r,n){const{latestValues:i}=e;i[t]&&(r[t]=i[t],e.setStaticValue(t,0),n&&(n[t]=0))}function sI(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=MP(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",_t,!(i||s))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&sI(n)}function oI({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(o={},a=e?.()){this.id=BU++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Yc&&(So.totalNodes=So.resolvedTargetDeltas=So.recalculatedProjection=0),this.nodes.forEach(UU),this.nodes.forEach(WU),this.nodes.forEach(GU),this.nodes.forEach(jU),Yc&&window.MotionDebug.record(So)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new LU)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Lv),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=nI(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let h;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=NU(f,250),Xd.hasAnimatedSinceResize&&(Xd.hasAnimatedSinceResize=!1,this.nodes.forEach(_x))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:d,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||u.getDefaultTransition()||QU,{onLayoutAnimationStart:m,onLayoutAnimationComplete:p}=u.getProps(),b=!this.targetLayout||!rI(this.targetLayout,g)||d,y=!f&&d;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||y||f&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,y);const v={..._v(_,"layout"),onPlay:m,onComplete:p};(u.shouldReduceMotion||this.options.layoutRoot)&&(v.delay=0,v.type=!1),this.startAnimation(v)}else f||_x(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ys(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(qU),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&sI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(gx);return}this.isUpdating||this.nodes.forEach(zU),this.isUpdating=!1,this.nodes.forEach(VU),this.nodes.forEach(FU),this.nodes.forEach(HU),this.clearAllSnapshots();const a=Di.now();cr.delta=os(0,1e3/60,a-cr.timestamp),cr.timestamp=a,cr.isProcessing=!0,w0.update.process(cr),w0.preRender.process(cr),w0.render.process(cr),cr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Fv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach($U),this.sharedNodes.forEach(KU)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,_t.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){_t.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Mt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!tI(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||Eo(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),ZU(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Mt();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(JU))){const{scroll:u}=this.root;u&&(Ja(l.x,u.offset.x),Ja(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=Mt();if(_n(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:f}=u;u!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&_n(l,o),Ja(l.x,h.offset.x),Ja(l.y,h.offset.y))}return l}applyTransform(o,a=!1){const l=Mt();_n(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&el(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Eo(u.latestValues)&&el(l,u.latestValues)}return Eo(this.latestValues)&&el(l,this.latestValues),l}removeTransform(o){const a=Mt();_n(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Eo(c.latestValues))continue;$b(c.latestValues)&&c.updateSnapshot();const u=Mt(),h=c.measurePageBox();_n(u,h),cx(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Eo(this.latestValues)&&cx(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==cr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=cr.timestamp,!this.targetDelta&&!this.relativeTarget){const d=this.getClosestProjectingParent();d&&d.layout&&this.animationProgress!==1?(this.relativeParent=d,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mt(),this.relativeTargetOrigin=Mt(),uu(this.relativeTargetOrigin,this.layout.layoutBox,d.layout.layoutBox),_n(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Mt(),this.targetWithTransforms=Mt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),rU(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):_n(this.target,this.layout.layoutBox),KP(this.target,this.targetDelta)):_n(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const d=this.getClosestProjectingParent();d&&!!d.resumingFrom==!!this.resumingFrom&&!d.options.layoutScroll&&d.target&&this.animationProgress!==1?(this.relativeParent=d,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mt(),this.relativeTargetOrigin=Mt(),uu(this.relativeTargetOrigin,this.target,d.target),_n(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Yc&&So.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||$b(this.parent.latestValues)||qP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===cr.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;_n(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,d=this.treeScale.y;hU(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Mt());const{target:g}=a;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ox(this.prevProjectionDelta.x,this.projectionDelta.x),ox(this.prevProjectionDelta.y,this.projectionDelta.y)),cu(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==d||!px(this.projectionDelta.x,this.prevProjectionDelta.x)||!px(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),Yc&&So.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Za(),this.projectionDelta=Za(),this.projectionDeltaWithTransform=Za()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},h=Za();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Mt(),d=l?l.source:void 0,g=this.layout?this.layout.source:void 0,_=d!==g,m=this.getStack(),p=!m||m.members.length<=1,b=!!(_&&!p&&this.options.crossfade===!0&&!this.path.some(XU));this.animationProgress=0;let y;this.mixTargetDelta=v=>{const w=v/1e3;bx(h.x,o.x,w),bx(h.y,o.y,w),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(uu(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),YU(this.relativeTarget,this.relativeTargetOrigin,f,w),y&&PU(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=Mt()),_n(y,this.relativeTarget)),_&&(this.animationValues=u,xU(u,c,this.latestValues,w,b,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ys(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=_t.update(()=>{Xd.hasAnimatedSinceResize=!0,this.currentAnimation=iI(0,mx,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(mx),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&aI(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Mt();const h=pn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const f=pn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}_n(a,l),el(a,u),cu(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new IU),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&P0("z",o,c,this.animationValues);for(let u=0;u<R0.length;u++)P0(`rotate${R0[u]}`,o,c,this.animationValues),P0(`skew${R0[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return MU;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Qd(o?.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const _={};return this.options.layoutId&&(_.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,_.pointerEvents=Qd(o?.pointerEvents)||""),this.hasProjected&&!Eo(this.latestValues)&&(_.transform=u?u({},""):"none",this.hasProjected=!1),_}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=DU(this.projectionDeltaWithTransform,this.treeScale,f),u&&(c.transform=u(f,c.transform));const{x:d,y:g}=this.projectionDelta;c.transformOrigin=`${d.origin*100}% ${g.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const _ in Np){if(f[_]===void 0)continue;const{correct:m,applyTo:p}=Np[_],b=c.transform==="none"?f[_]:m(f[_],h);if(p){const y=p.length;for(let v=0;v<y;v++)c[p[v]]=b}else c[_]=b}return this.options.layoutId&&(c.pointerEvents=h===this?Qd(o?.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(gx),this.root.sharedNodes.clear()}}}function FU(t){t.updateLayout()}function HU(t){var e;const r=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&r&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:s}=t.options,o=r.source!==t.layout.source;s==="size"?yn(h=>{const f=o?r.measuredBox[h]:r.layoutBox[h],d=pn(f);f.min=n[h].min,f.max=f.min+d}):aI(s,r.layoutBox,n)&&yn(h=>{const f=o?r.measuredBox[h]:r.layoutBox[h],d=pn(n[h]);f.max=f.min+d,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+d)});const a=Za();cu(a,n,r.layoutBox);const l=Za();o?cu(l,t.applyTransform(i,!0),r.measuredBox):cu(l,n,r.layoutBox);const c=!tI(a);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:d}=h;if(f&&d){const g=Mt();uu(g,r.layoutBox,f.layoutBox);const _=Mt();uu(_,n,d.layoutBox),rI(g,_)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=g,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function UU(t){Yc&&So.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function jU(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function $U(t){t.clearSnapshot()}function gx(t){t.clearMeasurements()}function zU(t){t.isLayoutDirty=!1}function VU(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function _x(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function WU(t){t.resolveTargetDelta()}function GU(t){t.calcProjection()}function qU(t){t.resetSkewAndRotation()}function KU(t){t.removeLeadSnapshot()}function bx(t,e,r){t.translate=Pt(e.translate,0,r),t.scale=Pt(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function yx(t,e,r,n){t.min=Pt(e.min,r.min,n),t.max=Pt(e.max,r.max,n)}function YU(t,e,r,n){yx(t.x,e.x,r.x,n),yx(t.y,e.y,r.y,n)}function XU(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const QU={duration:.45,ease:[.4,0,.1,1]},vx=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),wx=vx("applewebkit/")&&!vx("chrome/")?Math.round:xr;function Ex(t){t.min=wx(t.min),t.max=wx(t.max)}function ZU(t){Ex(t.x),Ex(t.y)}function aI(t,e,r){return t==="position"||t==="preserve-aspect"&&!tU(dx(e),dx(r),.2)}function JU(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const ej=oI({attachResizeListener:(t,e)=>Qi(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),I0={current:void 0},lI=oI({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!I0.current){const t=new ej({});t.mount(window),t.setOptions({layoutScroll:!0}),I0.current=t}return I0.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),tj={pan:{Feature:_U},drag:{Feature:gU,ProjectionNode:lI,MeasureLayout:ZP}};function Sx(t,e){const r=e?"pointerenter":"pointerleave",n=e?"onHoverStart":"onHoverEnd",i=(s,o)=>{if(s.pointerType==="touch"||zP())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e);const l=a[n];l&&_t.postRender(()=>l(s,o))};return rs(t.current,r,i,{passive:!t.getProps()[n]})}class rj extends lo{mount(){this.unmount=ts(Sx(this.node,!0),Sx(this.node,!1))}unmount(){}}class nj extends lo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ts(Qi(this.node.current,"focus",()=>this.onFocus()),Qi(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const cI=(t,e)=>e?t===e?!0:cI(t,e.parentElement):!1;function D0(t,e){if(!e)return;const r=new PointerEvent("pointer"+t);e(r,cg(r))}class ij extends lo{constructor(){super(...arguments),this.removeStartListeners=xr,this.removeEndListeners=xr,this.removeAccessibleListeners=xr,this.startPointerPress=(e,r)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),s=rs(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:h}=this.node.getProps(),f=!h&&!cI(this.node.current,a.target)?u:c;f&&_t.update(()=>f(a,l))},{passive:!(n.onTap||n.onPointerUp)}),o=rs(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=ts(s,o),this.startPress(e,r)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||D0("up",(l,c)=>{const{onTap:u}=this.node.getProps();u&&_t.postRender(()=>u(l,c))})};this.removeEndListeners(),this.removeEndListeners=Qi(this.node.current,"keyup",o),D0("down",(a,l)=>{this.startPress(a,l)})},r=Qi(this.node.current,"keydown",e),n=()=>{this.isPressing&&D0("cancel",(s,o)=>this.cancelPress(s,o))},i=Qi(this.node.current,"blur",n);this.removeAccessibleListeners=ts(r,i)}}startPress(e,r){this.isPressing=!0;const{onTapStart:n,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&_t.postRender(()=>n(e,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!zP()}cancelPress(e,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&_t.postRender(()=>n(e,r))}mount(){const e=this.node.getProps(),r=rs(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=Qi(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ts(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Vb=new WeakMap,O0=new WeakMap,sj=t=>{const e=Vb.get(t.target);e&&e(t)},oj=t=>{t.forEach(sj)};function aj({root:t,...e}){const r=t||document;O0.has(r)||O0.set(r,{});const n=O0.get(r),i=JSON.stringify(e);return n[i]||(n[i]=new IntersectionObserver(oj,{root:t,...e})),n[i]}function lj(t,e,r){const n=aj(e);return Vb.set(t,r),n.observe(t),()=>{Vb.delete(t),n.unobserve(t)}}const cj={some:0,all:1};class uj extends lo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:i="some",once:s}=e,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:cj[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),f=c?u:h;f&&f(l)};return lj(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(hj(e,r))&&this.startObserver()}unmount(){}}function hj({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const fj={inView:{Feature:uj},tap:{Feature:ij},focus:{Feature:nj},hover:{Feature:rj}},dj={layout:{ProjectionNode:lI,MeasureLayout:ZP}},Hv=D.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),hg=D.createContext({}),Uv=typeof window<"u",uI=Uv?D.useLayoutEffect:D.useEffect,hI=D.createContext({strict:!1});function pj(t,e,r,n,i){var s,o;const{visualElement:a}=D.useContext(hg),l=D.useContext(hI),c=D.useContext(ug),u=D.useContext(Hv).reducedMotion,h=D.useRef();n=n||l.renderer,!h.current&&n&&(h.current=n(t,{visualState:e,parent:a,props:r,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const f=h.current,d=D.useContext(QP);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&mj(h.current,r,i,d);const g=D.useRef(!1);D.useInsertionEffect(()=>{f&&g.current&&f.update(r,c)});const _=r[NP],m=D.useRef(!!_&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,_))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,_)));return uI(()=>{f&&(g.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),Fv.render(f.render),m.current&&f.animationState&&f.animationState.animateChanges())}),D.useEffect(()=>{f&&(!m.current&&f.animationState&&f.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{var p;(p=window.MotionHandoffMarkAsComplete)===null||p===void 0||p.call(window,_)}),m.current=!1))}),f}function mj(t,e,r,n){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:fI(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Qa(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:n,layoutScroll:l,layoutRoot:c})}function fI(t){if(t)return t.options.allowProjection!==!1?t.projection:fI(t.parent)}function gj(t,e,r){return D.useCallback(n=>{n&&t.mount&&t.mount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):Qa(r)&&(r.current=n))},[e])}function fg(t){return ig(t.animate)||gv.some(e=>Ou(t[e]))}function dI(t){return!!(fg(t)||t.variants)}function _j(t,e){if(fg(t)){const{initial:r,animate:n}=t;return{initial:r===!1||Ou(r)?r:void 0,animate:Ou(n)?n:void 0}}return t.inherit!==!1?e:{}}function bj(t){const{initial:e,animate:r}=_j(t,D.useContext(hg));return D.useMemo(()=>({initial:e,animate:r}),[xx(e),xx(r)])}function xx(t){return Array.isArray(t)?t.join(" "):t}const Tx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Al={};for(const t in Tx)Al[t]={isEnabled:e=>Tx[t].some(r=>!!e[r])};function yj(t){for(const e in t)Al[e]={...Al[e],...t[e]}}const vj=Symbol.for("motionComponentSymbol");function wj({preloadedFeatures:t,createVisualElement:e,useRender:r,useVisualState:n,Component:i}){t&&yj(t);function s(a,l){let c;const u={...D.useContext(Hv),...a,layoutId:Ej(a)},{isStatic:h}=u,f=bj(a),d=n(a,h);if(!h&&Uv){Sj();const g=xj(u);c=g.MeasureLayout,f.visualElement=pj(i,d,u,e,g.ProjectionNode)}return R.jsxs(hg.Provider,{value:f,children:[c&&f.visualElement?R.jsx(c,{visualElement:f.visualElement,...u}):null,r(i,a,gj(d,f.visualElement,l),d,h,f.visualElement)]})}const o=D.forwardRef(s);return o[vj]=i,o}function Ej({layoutId:t}){const e=D.useContext(Bv).id;return e&&t!==void 0?e+"-"+t:t}function Sj(t,e){D.useContext(hI).strict}function xj(t){const{drag:e,layout:r}=Al;if(!e&&!r)return{};const n={...e,...r};return{MeasureLayout:e?.isEnabled(t)||r?.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const Tj=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function jv(t){return typeof t!="string"||t.includes("-")?!1:!!(Tj.indexOf(t)>-1||/[A-Z]/u.test(t))}function pI(t,{style:e,vars:r},n,i){Object.assign(t.style,e,i&&i.getProjectionStyles(n));for(const s in r)t.style.setProperty(s,r[s])}const mI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function gI(t,e,r,n){pI(t,e,void 0,n);for(const i in e.attrs)t.setAttribute(mI.has(i)?i:Nv(i),e.attrs[i])}function _I(t,{layout:e,layoutId:r}){return ya.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!Np[t]||t==="opacity")}function $v(t,e,r){var n;const{style:i}=t,s={};for(const o in i)(or(i[o])||e.style&&or(e.style[o])||_I(o,t)||((n=r?.getValue(o))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function bI(t,e,r){const n=$v(t,e,r);for(const i in t)if(or(t[i])||or(e[i])){const s=Hh.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[s]=t[i]}return n}function Bu(t){const e=D.useRef(null);return e.current===null&&(e.current=t()),e.current}function Cj({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:r},n,i,s){const o={latestValues:kj(n,i,s,t),renderState:e()};return r&&(o.mount=a=>r(n,a,o)),o}const yI=t=>(e,r)=>{const n=D.useContext(hg),i=D.useContext(ug),s=()=>Cj(t,e,n,i);return r?s():Bu(s)};function kj(t,e,r,n){const i={},s=n(t,{});for(const f in s)i[f]=Qd(s[f]);let{initial:o,animate:a}=t;const l=fg(t),c=dI(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=r?r.initial===!1:!1;u=u||o===!1;const h=u?a:o;if(h&&typeof h!="boolean"&&!ig(h)){const f=Array.isArray(h)?h:[h];for(let d=0;d<f.length;d++){const g=pv(t,f[d]);if(g){const{transitionEnd:_,transition:m,...p}=g;for(const b in p){let y=p[b];if(Array.isArray(y)){const v=u?y.length-1:0;y=y[v]}y!==null&&(i[b]=y)}for(const b in _)i[b]=_[b]}}}return i}const zv=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),vI=()=>({...zv(),attrs:{}}),wI=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Aj={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Rj=Hh.length;function Pj(t,e,r){let n="",i=!0;for(let s=0;s<Rj;s++){const o=Hh[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||r){const c=wI(a,xv[o]);if(!l){i=!1;const u=Aj[o]||o;n+=`${u}(${c}) `}r&&(e[o]=c)}}return n=n.trim(),r?n=r(e,i?"":n):i&&(n="none"),n}function Vv(t,e,r){const{style:n,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(ya.has(l)){o=!0;continue}else if(lP(l)){i[l]=c;continue}else{const u=wI(c,xv[l]);l.startsWith("origin")?(a=!0,s[l]=u):n[l]=u}}if(e.transform||(o||r?n.transform=Pj(e,t.transform,r):n.transform&&(n.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;n.transformOrigin=`${l} ${c} ${u}`}}function Cx(t,e,r){return typeof t=="string"?t:Ge.transform(e+r*t)}function Ij(t,e,r){const n=Cx(e,t.x,t.width),i=Cx(r,t.y,t.height);return`${n} ${i}`}const Dj={offset:"stroke-dashoffset",array:"stroke-dasharray"},Oj={offset:"strokeDashoffset",array:"strokeDasharray"};function Lj(t,e,r=1,n=0,i=!0){t.pathLength=1;const s=i?Dj:Oj;t[s.offset]=Ge.transform(-n);const o=Ge.transform(e),a=Ge.transform(r);t[s.array]=`${o} ${a}`}function Wv(t,{attrX:e,attrY:r,attrScale:n,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,h){if(Vv(t,c,h),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:d,dimensions:g}=t;f.transform&&(g&&(d.transform=f.transform),delete f.transform),g&&(i!==void 0||s!==void 0||d.transform)&&(d.transformOrigin=Ij(g,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(f.x=e),r!==void 0&&(f.y=r),n!==void 0&&(f.scale=n),o!==void 0&&Lj(f,o,a,l,!1)}const Gv=t=>typeof t=="string"&&t.toLowerCase()==="svg",Nj={useVisualState:yI({scrapeMotionValuesFromProps:bI,createRenderState:vI,onMount:(t,e,{renderState:r,latestValues:n})=>{_t.read(()=>{try{r.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),_t.render(()=>{Wv(r,n,Gv(e.tagName),t.transformTemplate),gI(e,r)})}})},Mj={useVisualState:yI({scrapeMotionValuesFromProps:$v,createRenderState:zv})};function EI(t,e,r){for(const n in e)!or(e[n])&&!_I(n,r)&&(t[n]=e[n])}function Bj({transformTemplate:t},e){return D.useMemo(()=>{const r=zv();return Vv(r,e,t),Object.assign({},r.vars,r.style)},[e])}function Fj(t,e){const r=t.style||{},n={};return EI(n,r,t),Object.assign(n,Bj(t,e)),n}function Hj(t,e){const r={},n=Fj(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=n,r}const Uj=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Mp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Uj.has(t)}let SI=t=>!Mp(t);function jj(t){t&&(SI=e=>e.startsWith("on")?!Mp(e):t(e))}try{jj(require("@emotion/is-prop-valid").default)}catch{}function $j(t,e,r){const n={};for(const i in t)i==="values"&&typeof t.values=="object"||(SI(i)||r===!0&&Mp(i)||!e&&!Mp(i)||t.draggable&&i.startsWith("onDrag"))&&(n[i]=t[i]);return n}function zj(t,e,r,n){const i=D.useMemo(()=>{const s=vI();return Wv(s,e,Gv(n),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};EI(s,t.style,t),i.style={...s,...i.style}}return i}function Vj(t=!1){return(r,n,i,{latestValues:s},o)=>{const l=(jv(r)?zj:Hj)(n,s,o,r),c=$j(n,typeof r=="string",t),u=r!==D.Fragment?{...c,...l,ref:i}:{},{children:h}=n,f=D.useMemo(()=>or(h)?h.get():h,[h]);return D.createElement(r,{...u,children:f})}}function Wj(t,e){return function(n,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...jv(n)?Nj:Mj,preloadedFeatures:t,useRender:Vj(i),createVisualElement:e,Component:n};return wj(o)}}const Wb={current:null},xI={current:!1};function Gj(){if(xI.current=!0,!!Uv)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Wb.current=t.matches;t.addListener(e),e()}else Wb.current=!1}function qj(t,e,r){for(const n in e){const i=e[n],s=r[n];if(or(i))t.addValue(n,i);else if(or(s))t.addValue(n,Mu(i,{owner:t}));else if(s!==i)if(t.hasValue(n)){const o=t.getValue(n);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(n);t.addValue(n,Mu(o!==void 0?o:i,{owner:t}))}}for(const n in r)e[n]===void 0&&t.removeValue(n);return e}const Rl=new WeakMap,Kj=[...hP,yr,Xs],Yj=t=>Kj.find(uP(t)),kx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class TI{scrapeMotionValuesFromProps(e,r,n){return{}}constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=wv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Di.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,_t.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=fg(r),this.isVariantNode=dI(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(r,{},this);for(const f in h){const d=h[f];l[f]!==void 0&&or(d)&&d.set(l[f],!1)}}mount(e){this.current=e,Rl.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),xI.current||Gj(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Wb.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Rl.delete(this.current),this.projection&&this.projection.unmount(),Ys(this.notifyUpdate),Ys(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const r=this.features[e];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=ya.has(e),i=r.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&_t.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),s=r.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Al){const r=Al[e];if(!r)continue;const{isEnabled:n,Feature:i}=r;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Mt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<kx.length;n++){const i=kx[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=qj(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const n=this.values.get(e);r!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=Mu(r===null?void 0:r,{owner:this}),this.addValue(e,n)),n}readValue(e,r){var n;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(oP(i)||sP(i))?i=parseFloat(i):!Yj(i)&&Xs.test(r)&&(i=yP(e,r)),this.setBaseTarget(e,or(i)?i.get():i)),or(i)?i.get():i}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var r;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const o=pv(this.props,n,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);o&&(i=o[e])}if(n&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!or(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new Lv),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class CI extends TI{constructor(){super(...arguments),this.KeyframeResolver=vP}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}}function Xj(t){return window.getComputedStyle(t)}class kI extends CI{constructor(){super(...arguments),this.type="html",this.renderInstance=pI}readValueFromInstance(e,r){if(ya.has(r)){const n=Tv(r);return n&&n.default||0}else{const n=Xj(e),i=(lP(r)?n.getPropertyValue(r):n[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:r}){return YP(e,r)}build(e,r,n){Vv(e,r,n.transformTemplate)}scrapeMotionValuesFromProps(e,r,n){return $v(e,r,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;or(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}class AI extends CI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Mt}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(ya.has(r)){const n=Tv(r);return n&&n.default||0}return r=mI.has(r)?r:Nv(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,n){return bI(e,r,n)}build(e,r,n){Wv(e,r,this.isSVGTag,n.transformTemplate)}renderInstance(e,r,n,i){gI(e,r,n,i)}mount(e){this.isSVGTag=Gv(e.tagName),super.mount(e)}}const Qj=(t,e)=>jv(t)?new AI(e):new kI(e,{allowProjection:t!==D.Fragment}),Zj=Wj({...GH,...fj,...tj,...dj},Qj),Jr=KF(Zj);class Jj extends D.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function e9({children:t,isPresent:e}){const r=D.useId(),n=D.useRef(null),i=D.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=D.useContext(Hv);return D.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=i.current;if(e||!n.current||!o||!a)return;n.current.dataset.motionPopId=r;const u=document.createElement("style");return s&&(u.nonce=s),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),R.jsx(Jj,{isPresent:e,childRef:n,sizeRef:i,children:D.cloneElement(t,{ref:n})})}const t9=({children:t,initial:e,isPresent:r,onExitComplete:n,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=Bu(r9),l=D.useId(),c=D.useCallback(h=>{a.set(h,!0);for(const f of a.values())if(!f)return;n&&n()},[a,n]),u=D.useMemo(()=>({id:l,initial:e,isPresent:r,custom:i,onExitComplete:c,register:h=>(a.set(h,!1),()=>a.delete(h))}),s?[Math.random(),c]:[r,c]);return D.useMemo(()=>{a.forEach((h,f)=>a.set(f,!1))},[r]),D.useEffect(()=>{!r&&!a.size&&n&&n()},[r]),o==="popLayout"&&(t=R.jsx(e9,{isPresent:r,children:t})),R.jsx(ug.Provider,{value:u,children:t})};function r9(){return new Map}const jf=t=>t.key||"";function Ax(t){const e=[];return D.Children.forEach(t,r=>{D.isValidElement(r)&&e.push(r)}),e}const Bp=({children:t,exitBeforeEnter:e,custom:r,initial:n=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=D.useMemo(()=>Ax(t),[t]),l=a.map(jf),c=D.useRef(!0),u=D.useRef(a),h=Bu(()=>new Map),[f,d]=D.useState(a),[g,_]=D.useState(a);uI(()=>{c.current=!1,u.current=a;for(let b=0;b<g.length;b++){const y=jf(g[b]);l.includes(y)?h.delete(y):h.get(y)!==!0&&h.set(y,!1)}},[g,l.length,l.join("-")]);const m=[];if(a!==f){let b=[...a];for(let y=0;y<g.length;y++){const v=g[y],w=jf(v);l.includes(w)||(b.splice(y,0,v),m.push(v))}o==="wait"&&m.length&&(b=m),_(Ax(b)),d(a);return}const{forceRender:p}=D.useContext(Bv);return R.jsx(R.Fragment,{children:g.map(b=>{const y=jf(b),v=a===g||l.includes(y),w=()=>{if(h.has(y))h.set(y,!0);else return;let S=!0;h.forEach(x=>{x||(S=!1)}),S&&(p?.(),_(u.current),i&&i())};return R.jsx(t9,{isPresent:v,initial:!c.current||n?void 0:!1,custom:v?void 0:r,presenceAffectsLayout:s,mode:o,onExitComplete:v?void 0:w,children:b},y)})})};function n9(t,e,r){var n;if(typeof t=="string"){let i=document;e&&(Ap(!!e.current),i=e.current),r?((n=r[t])!==null&&n!==void 0||(r[t]=i.querySelectorAll(t)),t=r[t]):t=i.querySelectorAll(t)}else t instanceof Element&&(t=[t]);return Array.from(t||[])}function i9(t){return D.useEffect(()=>()=>t(),[])}function s9(t,e=100,r){const n=r({...t,keyframes:[0,e]}),i=Math.min(Cv(n),Rp);return{type:"keyframes",ease:s=>n.next(i*s).value/e,duration:Pi(i)}}function qv(t){return typeof t=="object"&&!Array.isArray(t)}function RI(t,e,r,n){return typeof t=="string"&&qv(e)?n9(t,r,n):t instanceof NodeList?Array.from(t):Array.isArray(t)?t:[t]}function Rx(t,e,r,n){var i;return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,t+parseFloat(e)):e==="<"?r:(i=n.get(e))!==null&&i!==void 0?i:t}const o9=(t,e,r)=>{const n=e-t;return((r-t)%n+n)%n+t};function a9(t,e){return CP(t)?t[o9(0,t.length,e)]:t}function l9(t,e,r){for(let n=0;n<t.length;n++){const i=t[n];i.at>e&&i.at<r&&(lg(t,i),n--)}}function c9(t,e,r,n,i,s){l9(t,i,s);for(let o=0;o<e.length;o++)t.push({value:e[o],at:Pt(i,s,n[o]),easing:a9(r,o)})}function u9(t,e){return t.at===e.at?t.value===null?1:e.value===null?-1:0:t.at-e.at}const h9="easeInOut";function f9(t,{defaultTransition:e={},...r}={},n,i){const s=e.duration||.3,o=new Map,a=new Map,l={},c=new Map;let u=0,h=0,f=0;for(let d=0;d<t.length;d++){const g=t[d];if(typeof g=="string"){c.set(g,h);continue}else if(!Array.isArray(g)){c.set(g.name,Rx(h,g.at,u,c));continue}let[_,m,p={}]=g;p.at!==void 0&&(h=Rx(h,p.at,u,c));let b=0;const y=(v,w,S,x=0,E=0)=>{const T=d9(v),{delay:k=0,times:B=PP(T),type:P="keyframes",...O}=w;let{ease:A=e.ease||"easeOut",duration:$}=w;const te=typeof k=="function"?k(x,E):k,Q=T.length,ee=ag(P)?P:i?.[P];if(Q<=2&&ee){let j=100;if(Q===2&&g9(T)){const re=T[1]-T[0];j=Math.abs(re)}const H={...O};$!==void 0&&(H.duration=Ri($));const Z=s9(H,j,ee);A=Z.ease,$=Z.duration}$??($=s);const L=h+te,M=L+$;B.length===1&&B[0]===0&&(B[1]=1);const U=B.length-T.length;U>0&&RP(B,U),T.length===1&&T.unshift(null),c9(S,T,A,B,L,M),b=Math.max(te+$,b),f=Math.max(M,f)};if(or(_)){const v=Px(_,a);y(m,p,Ix("default",v))}else{const v=RI(_,m,n,l),w=v.length;for(let S=0;S<w;S++){m=m,p=p;const x=v[S],E=Px(x,a);for(const T in m)y(m[T],p9(p,T),Ix(T,E),S,w)}}u=h,h+=b}return a.forEach((d,g)=>{for(const _ in d){const m=d[_];m.sort(u9);const p=[],b=[],y=[];for(let w=0;w<m.length;w++){const{at:S,value:x,easing:E}=m[w];p.push(x),b.push(Zo(0,f,S)),y.push(E||"easeOut")}b[0]!==0&&(b.unshift(0),p.unshift(p[0]),y.unshift(h9)),b[b.length-1]!==1&&(b.push(1),p.push(null)),o.has(g)||o.set(g,{keyframes:{},transition:{}});const v=o.get(g);v.keyframes[_]=p,v.transition[_]={...e,duration:f,ease:y,times:b,...r}}}),o}function Px(t,e){return!e.has(t)&&e.set(t,{}),e.get(t)}function Ix(t,e){return e[t]||(e[t]=[]),e[t]}function d9(t){return Array.isArray(t)?t:[t]}function p9(t,e){return t&&t[e]?{...t,...t[e]}:{...t}}const m9=t=>typeof t=="number",g9=t=>t.every(m9);function _9(t,e){return t in e}class b9 extends TI{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,r){if(_9(r,e)){const n=e[r];if(typeof n=="string"||typeof n=="number")return n}}getBaseTargetFromProps(){}removeValueFromRenderState(e,r){delete r.output[e]}measureInstanceViewportBox(){return Mt()}build(e,r){Object.assign(e.output,r)}renderInstance(e,{output:r}){Object.assign(e,r)}sortInstanceNodePosition(){return 0}}function y9(t){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},r=nI(t)?new AI(e):new kI(e);r.mount(t),Rl.set(t,r)}function v9(t){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},r=new b9(e);r.mount(t),Rl.set(t,r)}function w9(t,e){return or(t)||typeof t=="number"||typeof t=="string"&&!qv(e)}function PI(t,e,r,n){const i=[];if(w9(t,e))i.push(iI(t,qv(e)&&e.default||e,r&&(r.default||r)));else{const s=RI(t,e,n),o=s.length;for(let a=0;a<o;a++){const l=s[a],c=l instanceof Element?y9:v9;Rl.has(l)||c(l);const u=Rl.get(l),h={...r};"delay"in h&&typeof h.delay=="function"&&(h.delay=h.delay(a,o)),i.push(...Mv(u,{...e,transition:h},{}))}}return i}function E9(t,e,r){const n=[];return f9(t,e,r,{spring:kv}).forEach(({keyframes:s,transition:o},a)=>{n.push(...PI(a,s,o))}),n}function S9(t){return Array.isArray(t)&&Array.isArray(t[0])}function x9(t){function e(r,n,i){let s=[];S9(r)?s=E9(r,n,t):s=PI(r,n,i,t);const o=new LP(s);return t&&t.animations.push(o),o}return e}function T9(){const t=Bu(()=>({current:null,animations:[]})),e=Bu(()=>x9(t));return i9(()=>{t.animations.forEach(r=>r.stop())}),[t,e]}function II(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=II(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Bs(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=II(t))&&(n&&(n+=" "),n+=e);return n}const Fu=t=>typeof t=="number"&&!isNaN(t),Wo=t=>typeof t=="string",ln=t=>typeof t=="function",Zd=t=>Wo(t)||ln(t)?t:null,Gb=t=>D.isValidElement(t)||Wo(t)||ln(t)||Fu(t);function C9(t,e,r){r===void 0&&(r=300);const{scrollHeight:n,style:i}=t;requestAnimationFrame(()=>{i.minHeight="initial",i.height=n+"px",i.transition=`all ${r}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,r)})})}function jh(t){let{enter:e,exit:r,appendPosition:n=!1,collapse:i=!0,collapseDuration:s=300}=t;return function(o){let{children:a,position:l,preventExitTransition:c,done:u,nodeRef:h,isIn:f,playToast:d}=o;const g=n?`${e}--${l}`:e,_=n?`${r}--${l}`:r,m=D.useRef(0);return D.useLayoutEffect(()=>{const p=h.current,b=g.split(" "),y=v=>{v.target===h.current&&(d(),p.removeEventListener("animationend",y),p.removeEventListener("animationcancel",y),m.current===0&&v.type!=="animationcancel"&&p.classList.remove(...b))};p.classList.add(...b),p.addEventListener("animationend",y),p.addEventListener("animationcancel",y)},[]),D.useEffect(()=>{const p=h.current,b=()=>{p.removeEventListener("animationend",b),i?C9(p,u,s):u()};f||(c?b():(m.current=1,p.className+=` ${_}`,p.addEventListener("animationend",b)))},[f]),Qe.createElement(Qe.Fragment,null,a)}}function Dx(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}const Dr=new Map;let Hu=[];const qb=new Set,k9=t=>qb.forEach(e=>e(t)),DI=()=>Dr.size>0;function OI(t,e){var r;if(e)return!((r=Dr.get(e))==null||!r.isToastActive(t));let n=!1;return Dr.forEach(i=>{i.isToastActive(t)&&(n=!0)}),n}function LI(t,e){Gb(t)&&(DI()||Hu.push({content:t,options:e}),Dr.forEach(r=>{r.buildToast(t,e)}))}function Ox(t,e){Dr.forEach(r=>{e!=null&&e!=null&&e.containerId?e?.containerId===r.id&&r.toggle(t,e?.id):r.toggle(t,e?.id)})}function A9(t){const{subscribe:e,getSnapshot:r,setProps:n}=D.useRef(function(s){const o=s.containerId||1;return{subscribe(a){const l=function(u,h,f){let d=1,g=0,_=[],m=[],p=[],b=h;const y=new Map,v=new Set,w=()=>{p=Array.from(y.values()),v.forEach(E=>E())},S=E=>{m=E==null?[]:m.filter(T=>T!==E),w()},x=E=>{const{toastId:T,onOpen:k,updateId:B,children:P}=E.props,O=B==null;E.staleId&&y.delete(E.staleId),y.set(T,E),m=[...m,E.props.toastId].filter(A=>A!==E.staleId),w(),f(Dx(E,O?"added":"updated")),O&&ln(k)&&k(D.isValidElement(P)&&P.props)};return{id:u,props:b,observe:E=>(v.add(E),()=>v.delete(E)),toggle:(E,T)=>{y.forEach(k=>{T!=null&&T!==k.props.toastId||ln(k.toggle)&&k.toggle(E)})},removeToast:S,toasts:y,clearQueue:()=>{g-=_.length,_=[]},buildToast:(E,T)=>{if((j=>{let{containerId:H,toastId:Z,updateId:re}=j;const ge=H?H!==u:u!==1,X=y.has(Z)&&re==null;return ge||X})(T))return;const{toastId:k,updateId:B,data:P,staleId:O,delay:A}=T,$=()=>{S(k)},te=B==null;te&&g++;const Q={...b,style:b.toastStyle,key:d++,...Object.fromEntries(Object.entries(T).filter(j=>{let[H,Z]=j;return Z!=null})),toastId:k,updateId:B,data:P,closeToast:$,isIn:!1,className:Zd(T.className||b.toastClassName),bodyClassName:Zd(T.bodyClassName||b.bodyClassName),progressClassName:Zd(T.progressClassName||b.progressClassName),autoClose:!T.isLoading&&(ee=T.autoClose,L=b.autoClose,ee===!1||Fu(ee)&&ee>0?ee:L),deleteToast(){const j=y.get(k),{onClose:H,children:Z}=j.props;ln(H)&&H(D.isValidElement(Z)&&Z.props),f(Dx(j,"removed")),y.delete(k),g--,g<0&&(g=0),_.length>0?x(_.shift()):w()}};var ee,L;Q.closeButton=b.closeButton,T.closeButton===!1||Gb(T.closeButton)?Q.closeButton=T.closeButton:T.closeButton===!0&&(Q.closeButton=!Gb(b.closeButton)||b.closeButton);let M=E;D.isValidElement(E)&&!Wo(E.type)?M=D.cloneElement(E,{closeToast:$,toastProps:Q,data:P}):ln(E)&&(M=E({closeToast:$,toastProps:Q,data:P}));const U={content:M,props:Q,staleId:O};b.limit&&b.limit>0&&g>b.limit&&te?_.push(U):Fu(A)?setTimeout(()=>{x(U)},A):x(U)},setProps(E){b=E},setToggle:(E,T)=>{y.get(E).toggle=T},isToastActive:E=>m.some(T=>T===E),getSnapshot:()=>p}}(o,s,k9);Dr.set(o,l);const c=l.observe(a);return Hu.forEach(u=>LI(u.content,u.options)),Hu=[],()=>{c(),Dr.delete(o)}},setProps(a){var l;(l=Dr.get(o))==null||l.setProps(a)},getSnapshot(){var a;return(a=Dr.get(o))==null?void 0:a.getSnapshot()}}}(t)).current;n(t);const i=D.useSyncExternalStore(e,r,r);return{getToastToRender:function(s){if(!i)return[];const o=new Map;return t.newestOnTop&&i.reverse(),i.forEach(a=>{const{position:l}=a.props;o.has(l)||o.set(l,[]),o.get(l).push(a)}),Array.from(o,a=>s(a[0],a[1]))},isToastActive:OI,count:i?.length}}function R9(t){const[e,r]=D.useState(!1),[n,i]=D.useState(!1),s=D.useRef(null),o=D.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:a,pauseOnHover:l,closeToast:c,onClick:u,closeOnClick:h}=t;var f,d;function g(){r(!0)}function _(){r(!1)}function m(y){const v=s.current;o.canDrag&&v&&(o.didMove=!0,e&&_(),o.delta=t.draggableDirection==="x"?y.clientX-o.start:y.clientY-o.start,o.start!==y.clientX&&(o.canCloseOnClick=!1),v.style.transform=`translate3d(${t.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`},0)`,v.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function p(){document.removeEventListener("pointermove",m),document.removeEventListener("pointerup",p);const y=s.current;if(o.canDrag&&o.didMove&&y){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return i(!0),t.closeToast(),void t.collapseAll();y.style.transition="transform 0.2s, opacity 0.2s",y.style.removeProperty("transform"),y.style.removeProperty("opacity")}}(d=Dr.get((f={id:t.toastId,containerId:t.containerId,fn:r}).containerId||1))==null||d.setToggle(f.id,f.fn),D.useEffect(()=>{if(t.pauseOnFocusLoss)return document.hasFocus()||_(),window.addEventListener("focus",g),window.addEventListener("blur",_),()=>{window.removeEventListener("focus",g),window.removeEventListener("blur",_)}},[t.pauseOnFocusLoss]);const b={onPointerDown:function(y){if(t.draggable===!0||t.draggable===y.pointerType){o.didMove=!1,document.addEventListener("pointermove",m),document.addEventListener("pointerup",p);const v=s.current;o.canCloseOnClick=!0,o.canDrag=!0,v.style.transition="none",t.draggableDirection==="x"?(o.start=y.clientX,o.removalDistance=v.offsetWidth*(t.draggablePercent/100)):(o.start=y.clientY,o.removalDistance=v.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent)/100)}},onPointerUp:function(y){const{top:v,bottom:w,left:S,right:x}=s.current.getBoundingClientRect();y.nativeEvent.type!=="touchend"&&t.pauseOnHover&&y.clientX>=S&&y.clientX<=x&&y.clientY>=v&&y.clientY<=w?_():g()}};return a&&l&&(b.onMouseEnter=_,t.stacked||(b.onMouseLeave=g)),h&&(b.onClick=y=>{u&&u(y),o.canCloseOnClick&&c()}),{playToast:g,pauseToast:_,isRunning:e,preventExitTransition:n,toastRef:s,eventHandlers:b}}function P9(t){let{delay:e,isRunning:r,closeToast:n,type:i="default",hide:s,className:o,style:a,controlledProgress:l,progress:c,rtl:u,isIn:h,theme:f}=t;const d=s||l&&c===0,g={...a,animationDuration:`${e}ms`,animationPlayState:r?"running":"paused"};l&&(g.transform=`scaleX(${c})`);const _=Bs("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${f}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":u}),m=ln(o)?o({rtl:u,type:i,defaultClassName:_}):Bs(_,o),p={[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{h&&n()}};return Qe.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":d},Qe.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${f} Toastify__progress-bar--${i}`}),Qe.createElement("div",{role:"progressbar","aria-hidden":d?"true":"false","aria-label":"notification timer",className:m,style:g,...p}))}let I9=1;const NI=()=>""+I9++;function D9(t){return t&&(Wo(t.toastId)||Fu(t.toastId))?t.toastId:NI()}function hu(t,e){return LI(t,e),e.toastId}function Fp(t,e){return{...e,type:e&&e.type||t,toastId:D9(e)}}function $f(t){return(e,r)=>hu(e,Fp(t,r))}function Be(t,e){return hu(t,Fp("default",e))}Be.loading=(t,e)=>hu(t,Fp("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),Be.promise=function(t,e,r){let n,{pending:i,error:s,success:o}=e;i&&(n=Wo(i)?Be.loading(i,r):Be.loading(i.render,{...r,...i}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(u,h,f)=>{if(h==null)return void Be.dismiss(n);const d={type:u,...a,...r,data:f},g=Wo(h)?{render:h}:h;return n?Be.update(n,{...d,...g}):Be(g.render,{...d,...g}),f},c=ln(t)?t():t;return c.then(u=>l("success",o,u)).catch(u=>l("error",s,u)),c},Be.success=$f("success"),Be.info=$f("info"),Be.error=$f("error"),Be.warning=$f("warning"),Be.warn=Be.warning,Be.dark=(t,e)=>hu(t,Fp("default",{theme:"dark",...e})),Be.dismiss=function(t){(function(e){var r;if(DI()){if(e==null||Wo(r=e)||Fu(r))Dr.forEach(n=>{n.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){const n=Dr.get(e.containerId);n?n.removeToast(e.id):Dr.forEach(i=>{i.removeToast(e.id)})}}else Hu=Hu.filter(n=>e!=null&&n.options.toastId!==e)})(t)},Be.clearWaitingQueue=function(t){t===void 0&&(t={}),Dr.forEach(e=>{!e.props.limit||t.containerId&&e.id!==t.containerId||e.clearQueue()})},Be.isActive=OI,Be.update=function(t,e){e===void 0&&(e={});const r=((n,i)=>{var s;let{containerId:o}=i;return(s=Dr.get(o||1))==null?void 0:s.toasts.get(n)})(t,e);if(r){const{props:n,content:i}=r,s={delay:100,...n,...e,toastId:e.toastId||t,updateId:NI()};s.toastId!==t&&(s.staleId=t);const o=s.render||i;delete s.render,hu(o,s)}},Be.done=t=>{Be.update(t,{progress:1})},Be.onChange=function(t){return qb.add(t),()=>{qb.delete(t)}},Be.play=t=>Ox(!0,t),Be.pause=t=>Ox(!1,t);const O9=typeof window<"u"?D.useLayoutEffect:D.useEffect,zf=t=>{let{theme:e,type:r,isLoading:n,...i}=t;return Qe.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${r})`,...i})},L0={info:function(t){return Qe.createElement(zf,{...t},Qe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return Qe.createElement(zf,{...t},Qe.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return Qe.createElement(zf,{...t},Qe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return Qe.createElement(zf,{...t},Qe.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return Qe.createElement("div",{className:"Toastify__spinner"})}},L9=t=>{const{isRunning:e,preventExitTransition:r,toastRef:n,eventHandlers:i,playToast:s}=R9(t),{closeButton:o,children:a,autoClose:l,onClick:c,type:u,hideProgressBar:h,closeToast:f,transition:d,position:g,className:_,style:m,bodyClassName:p,bodyStyle:b,progressClassName:y,progressStyle:v,updateId:w,role:S,progress:x,rtl:E,toastId:T,deleteToast:k,isIn:B,isLoading:P,closeOnClick:O,theme:A}=t,$=Bs("Toastify__toast",`Toastify__toast-theme--${A}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":E},{"Toastify__toast--close-on-click":O}),te=ln(_)?_({rtl:E,position:g,type:u,defaultClassName:$}):Bs($,_),Q=function(U){let{theme:j,type:H,isLoading:Z,icon:re}=U,ge=null;const X={theme:j,type:H};return re===!1||(ln(re)?ge=re({...X,isLoading:Z}):D.isValidElement(re)?ge=D.cloneElement(re,X):Z?ge=L0.spinner():(V=>V in L0)(H)&&(ge=L0[H](X))),ge}(t),ee=!!x||!l,L={closeToast:f,type:u,theme:A};let M=null;return o===!1||(M=ln(o)?o(L):D.isValidElement(o)?D.cloneElement(o,L):function(U){let{closeToast:j,theme:H,ariaLabel:Z="close"}=U;return Qe.createElement("button",{className:`Toastify__close-button Toastify__close-button--${H}`,type:"button",onClick:re=>{re.stopPropagation(),j(re)},"aria-label":Z},Qe.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Qe.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(L)),Qe.createElement(d,{isIn:B,done:k,position:g,preventExitTransition:r,nodeRef:n,playToast:s},Qe.createElement("div",{id:T,onClick:c,"data-in":B,className:te,...i,style:m,ref:n},Qe.createElement("div",{...B&&{role:S},className:ln(p)?p({type:u}):Bs("Toastify__toast-body",p),style:b},Q!=null&&Qe.createElement("div",{className:Bs("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!P})},Q),Qe.createElement("div",null,a)),M,Qe.createElement(P9,{...w&&!ee?{key:`pb-${w}`}:{},rtl:E,theme:A,delay:l,isRunning:e,isIn:B,closeToast:f,hide:h,type:u,style:v,className:y,controlledProgress:ee,progress:x||0})))},dg=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},N9=jh(dg("bounce",!0));jh(dg("slide",!0));jh(dg("zoom"));jh(dg("flip"));const M9={position:"top-right",transition:N9,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function B9(t){let e={...M9,...t};const r=t.stacked,[n,i]=D.useState(!0),s=D.useRef(null),{getToastToRender:o,isToastActive:a,count:l}=A9(e),{className:c,style:u,rtl:h,containerId:f}=e;function d(_){const m=Bs("Toastify__toast-container",`Toastify__toast-container--${_}`,{"Toastify__toast-container--rtl":h});return ln(c)?c({position:_,rtl:h,defaultClassName:m}):Bs(m,Zd(c))}function g(){r&&(i(!0),Be.play())}return O9(()=>{if(r){var _;const m=s.current.querySelectorAll('[data-in="true"]'),p=12,b=(_=e.position)==null?void 0:_.includes("top");let y=0,v=0;Array.from(m).reverse().forEach((w,S)=>{const x=w;x.classList.add("Toastify__toast--stacked"),S>0&&(x.dataset.collapsed=`${n}`),x.dataset.pos||(x.dataset.pos=b?"top":"bot");const E=y*(n?.2:1)+(n?0:p*S);x.style.setProperty("--y",`${b?E:-1*E}px`),x.style.setProperty("--g",`${p}`),x.style.setProperty("--s",""+(1-(n?v:0))),y+=x.offsetHeight,v+=.025})}},[n,l,r]),Qe.createElement("div",{ref:s,className:"Toastify",id:f,onMouseEnter:()=>{r&&(i(!1),Be.pause())},onMouseLeave:g},o((_,m)=>{const p=m.length?{...u}:{...u,pointerEvents:"none"};return Qe.createElement("div",{className:d(_),style:p,key:`container-${_}`},m.map(b=>{let{content:y,props:v}=b;return Qe.createElement(L9,{...v,stacked:r,collapseAll:g,isIn:a(v.toastId,v.containerId),style:v.style,key:`toast-${v.key}`},y)}))}))}function Ke(t,e,{checkForDefaultPrevented:r=!0}={}){return function(i){if(t?.(i),r===!1||!i.defaultPrevented)return e?.(i)}}function F9(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function pg(...t){return e=>t.forEach(r=>F9(r,e))}function Xt(...t){return D.useCallback(pg(...t),t)}function H9(t,e){const r=D.createContext(e),n=s=>{const{children:o,...a}=s,l=D.useMemo(()=>a,Object.values(a));return R.jsx(r.Provider,{value:l,children:o})};n.displayName=t+"Provider";function i(s){const o=D.useContext(r);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[n,i]}function $h(t,e=[]){let r=[];function n(s,o){const a=D.createContext(o),l=r.length;r=[...r,o];const c=h=>{const{scope:f,children:d,...g}=h,_=f?.[t]?.[l]||a,m=D.useMemo(()=>g,Object.values(g));return R.jsx(_.Provider,{value:m,children:d})};c.displayName=s+"Provider";function u(h,f){const d=f?.[t]?.[l]||a,g=D.useContext(d);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[c,u]}const i=()=>{const s=r.map(o=>D.createContext(o));return function(a){const l=a?.[t]||s;return D.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[n,U9(i,...e)]}function U9(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=n.reduce((a,{useScope:l,scopeName:c})=>{const h=l(s)[`__scope${c}`];return{...a,...h}},{});return D.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}var Jo=globalThis?.document?D.useLayoutEffect:()=>{},j9=fv.useId||(()=>{}),$9=0;function Go(t){const[e,r]=D.useState(j9());return Jo(()=>{t||r(n=>n??String($9++))},[t]),t||(e?`radix-${e}`:"")}function Wn(t){const e=D.useRef(t);return D.useEffect(()=>{e.current=t}),D.useMemo(()=>(...r)=>e.current?.(...r),[])}function zh({prop:t,defaultProp:e,onChange:r=()=>{}}){const[n,i]=z9({defaultProp:e,onChange:r}),s=t!==void 0,o=s?t:n,a=Wn(r),l=D.useCallback(c=>{if(s){const h=typeof c=="function"?c(t):c;h!==t&&a(h)}else i(c)},[s,t,i,a]);return[o,l]}function z9({defaultProp:t,onChange:e}){const r=D.useState(t),[n]=r,i=D.useRef(n),s=Wn(e);return D.useEffect(()=>{i.current!==n&&(s(n),i.current=n)},[n,i,s]),r}var Pl=D.forwardRef((t,e)=>{const{children:r,...n}=t,i=D.Children.toArray(r),s=i.find(V9);if(s){const o=s.props.children,a=i.map(l=>l===s?D.Children.count(o)>1?D.Children.only(null):D.isValidElement(o)?o.props.children:null:l);return R.jsx(Kb,{...n,ref:e,children:D.isValidElement(o)?D.cloneElement(o,void 0,a):null})}return R.jsx(Kb,{...n,ref:e,children:r})});Pl.displayName="Slot";var Kb=D.forwardRef((t,e)=>{const{children:r,...n}=t;if(D.isValidElement(r)){const i=G9(r);return D.cloneElement(r,{...W9(n,r.props),ref:e?pg(e,i):i})}return D.Children.count(r)>1?D.Children.only(null):null});Kb.displayName="SlotClone";var MI=({children:t})=>R.jsx(R.Fragment,{children:t});function V9(t){return D.isValidElement(t)&&t.type===MI}function W9(t,e){const r={...e};for(const n in e){const i=t[n],s=e[n];/^on[A-Z]/.test(n)?i&&s?r[n]=(...a)=>{s(...a),i(...a)}:i&&(r[n]=i):n==="style"?r[n]={...i,...s}:n==="className"&&(r[n]=[i,s].filter(Boolean).join(" "))}return{...t,...r}}function G9(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var q9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Dt=q9.reduce((t,e)=>{const r=D.forwardRef((n,i)=>{const{asChild:s,...o}=n,a=s?Pl:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),R.jsx(a,{...o,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function BI(t,e){t&&qR.flushSync(()=>t.dispatchEvent(e))}function K9(t,e=globalThis?.document){const r=Wn(t);D.useEffect(()=>{const n=i=>{i.key==="Escape"&&r(i)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var Y9="DismissableLayer",Yb="dismissableLayer.update",X9="dismissableLayer.pointerDownOutside",Q9="dismissableLayer.focusOutside",Lx,FI=D.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),mg=D.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=D.useContext(FI),[u,h]=D.useState(null),f=u?.ownerDocument??globalThis?.document,[,d]=D.useState({}),g=Xt(e,x=>h(x)),_=Array.from(c.layers),[m]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),p=_.indexOf(m),b=u?_.indexOf(u):-1,y=c.layersWithOutsidePointerEventsDisabled.size>0,v=b>=p,w=e7(x=>{const E=x.target,T=[...c.branches].some(k=>k.contains(E));!v||T||(i?.(x),o?.(x),x.defaultPrevented||a?.())},f),S=t7(x=>{const E=x.target;[...c.branches].some(k=>k.contains(E))||(s?.(x),o?.(x),x.defaultPrevented||a?.())},f);return K9(x=>{b===c.layers.size-1&&(n?.(x),!x.defaultPrevented&&a&&(x.preventDefault(),a()))},f),D.useEffect(()=>{if(u)return r&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(Lx=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),Nx(),()=>{r&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=Lx)}},[u,f,r,c]),D.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),Nx())},[u,c]),D.useEffect(()=>{const x=()=>d({});return document.addEventListener(Yb,x),()=>document.removeEventListener(Yb,x)},[]),R.jsx(Dt.div,{...l,ref:g,style:{pointerEvents:y?v?"auto":"none":void 0,...t.style},onFocusCapture:Ke(t.onFocusCapture,S.onFocusCapture),onBlurCapture:Ke(t.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Ke(t.onPointerDownCapture,w.onPointerDownCapture)})});mg.displayName=Y9;var Z9="DismissableLayerBranch",J9=D.forwardRef((t,e)=>{const r=D.useContext(FI),n=D.useRef(null),i=Xt(e,n);return D.useEffect(()=>{const s=n.current;if(s)return r.branches.add(s),()=>{r.branches.delete(s)}},[r.branches]),R.jsx(Dt.div,{...t,ref:i})});J9.displayName=Z9;function e7(t,e=globalThis?.document){const r=Wn(t),n=D.useRef(!1),i=D.useRef(()=>{});return D.useEffect(()=>{const s=a=>{if(a.target&&!n.current){let l=function(){HI(X9,r,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function t7(t,e=globalThis?.document){const r=Wn(t),n=D.useRef(!1);return D.useEffect(()=>{const i=s=>{s.target&&!n.current&&HI(Q9,r,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Nx(){const t=new CustomEvent(Yb);document.dispatchEvent(t)}function HI(t,e,r,{discrete:n}){const i=r.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&i.addEventListener(t,e,{once:!0}),n?BI(i,s):i.dispatchEvent(s)}var N0="focusScope.autoFocusOnMount",M0="focusScope.autoFocusOnUnmount",Mx={bubbles:!1,cancelable:!0},r7="FocusScope",Kv=D.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=D.useState(null),c=Wn(i),u=Wn(s),h=D.useRef(null),f=Xt(e,_=>l(_)),d=D.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;D.useEffect(()=>{if(n){let _=function(y){if(d.paused||!a)return;const v=y.target;a.contains(v)?h.current=v:Ts(h.current,{select:!0})},m=function(y){if(d.paused||!a)return;const v=y.relatedTarget;v!==null&&(a.contains(v)||Ts(h.current,{select:!0}))},p=function(y){if(document.activeElement===document.body)for(const w of y)w.removedNodes.length>0&&Ts(a)};document.addEventListener("focusin",_),document.addEventListener("focusout",m);const b=new MutationObserver(p);return a&&b.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",m),b.disconnect()}}},[n,a,d.paused]),D.useEffect(()=>{if(a){Fx.add(d);const _=document.activeElement;if(!a.contains(_)){const p=new CustomEvent(N0,Mx);a.addEventListener(N0,c),a.dispatchEvent(p),p.defaultPrevented||(n7(l7(UI(a)),{select:!0}),document.activeElement===_&&Ts(a))}return()=>{a.removeEventListener(N0,c),setTimeout(()=>{const p=new CustomEvent(M0,Mx);a.addEventListener(M0,u),a.dispatchEvent(p),p.defaultPrevented||Ts(_??document.body,{select:!0}),a.removeEventListener(M0,u),Fx.remove(d)},0)}}},[a,c,u,d]);const g=D.useCallback(_=>{if(!r&&!n||d.paused)return;const m=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,p=document.activeElement;if(m&&p){const b=_.currentTarget,[y,v]=i7(b);y&&v?!_.shiftKey&&p===v?(_.preventDefault(),r&&Ts(y,{select:!0})):_.shiftKey&&p===y&&(_.preventDefault(),r&&Ts(v,{select:!0})):p===b&&_.preventDefault()}},[r,n,d.paused]);return R.jsx(Dt.div,{tabIndex:-1,...o,ref:f,onKeyDown:g})});Kv.displayName=r7;function n7(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(Ts(n,{select:e}),document.activeElement!==r)return}function i7(t){const e=UI(t),r=Bx(e,t),n=Bx(e.reverse(),t);return[r,n]}function UI(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function Bx(t,e){for(const r of t)if(!s7(r,{upTo:e}))return r}function s7(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function o7(t){return t instanceof HTMLInputElement&&"select"in t}function Ts(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&o7(t)&&e&&t.select()}}var Fx=a7();function a7(){let t=[];return{add(e){const r=t[0];e!==r&&r?.pause(),t=Hx(t,e),t.unshift(e)},remove(e){t=Hx(t,e),t[0]?.resume()}}}function Hx(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function l7(t){return t.filter(e=>e.tagName!=="A")}var c7="Portal",gg=D.forwardRef((t,e)=>{const{container:r,...n}=t,[i,s]=D.useState(!1);Jo(()=>s(!0),[]);const o=r||i&&globalThis?.document?.body;return o?LF.createPortal(R.jsx(Dt.div,{...n,ref:e}),o):null});gg.displayName=c7;function u7(t,e){return D.useReducer((r,n)=>e[r][n]??r,t)}var Bi=t=>{const{present:e,children:r}=t,n=h7(e),i=typeof r=="function"?r({present:n.isPresent}):D.Children.only(r),s=Xt(n.ref,f7(i));return typeof r=="function"||n.isPresent?D.cloneElement(i,{ref:s}):null};Bi.displayName="Presence";function h7(t){const[e,r]=D.useState(),n=D.useRef({}),i=D.useRef(t),s=D.useRef("none"),o=t?"mounted":"unmounted",[a,l]=u7(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return D.useEffect(()=>{const c=Vf(n.current);s.current=a==="mounted"?c:"none"},[a]),Jo(()=>{const c=n.current,u=i.current;if(u!==t){const f=s.current,d=Vf(c);t?l("MOUNT"):d==="none"||c?.display==="none"?l("UNMOUNT"):l(u&&f!==d?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Jo(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,h=d=>{const _=Vf(n.current).includes(d.animationName);if(d.target===e&&_&&(l("ANIMATION_END"),!i.current)){const m=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=m)})}},f=d=>{d.target===e&&(s.current=Vf(n.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:D.useCallback(c=>{c&&(n.current=getComputedStyle(c)),r(c)},[])}}function Vf(t){return t?.animationName||"none"}function f7(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var B0=0;function jI(){D.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Ux()),document.body.insertAdjacentElement("beforeend",t[1]??Ux()),B0++,()=>{B0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),B0--}},[])}function Ux(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var gi=function(){return gi=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},gi.apply(this,arguments)};function $I(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function d7(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}var Jd="right-scroll-bar-position",ep="width-before-scroll-bar",p7="with-scroll-bars-hidden",m7="--removed-body-scroll-bar-size";function F0(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function g7(t,e){var r=D.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=e,r.facade}var _7=typeof window<"u"?D.useLayoutEffect:D.useEffect,jx=new WeakMap;function b7(t,e){var r=g7(null,function(n){return t.forEach(function(i){return F0(i,n)})});return _7(function(){var n=jx.get(r);if(n){var i=new Set(n),s=new Set(t),o=r.current;i.forEach(function(a){s.has(a)||F0(a,null)}),s.forEach(function(a){i.has(a)||F0(a,o)})}jx.set(r,t)},[t]),r}function y7(t){return t}function v7(t,e){e===void 0&&(e=y7);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(s){var o=e(s,n);return r.push(o),function(){r=r.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(n=!0;r.length;){var o=r;r=[],o.forEach(s)}r={push:function(a){return s(a)},filter:function(){return r}}},assignMedium:function(s){n=!0;var o=[];if(r.length){var a=r;r=[],a.forEach(s),o=r}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),r={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),r}}}};return i}function w7(t){t===void 0&&(t={});var e=v7(null);return e.options=gi({async:!0,ssr:!1},t),e}var zI=function(t){var e=t.sideCar,r=$I(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return D.createElement(n,gi({},r))};zI.isSideCarExport=!0;function E7(t,e){return t.useMedium(e),zI}var VI=w7(),H0=function(){},_g=D.forwardRef(function(t,e){var r=D.useRef(null),n=D.useState({onScrollCapture:H0,onWheelCapture:H0,onTouchMoveCapture:H0}),i=n[0],s=n[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,h=t.shards,f=t.sideCar,d=t.noIsolation,g=t.inert,_=t.allowPinchZoom,m=t.as,p=m===void 0?"div":m,b=t.gapMode,y=$I(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),v=f,w=b7([r,e]),S=gi(gi({},y),i);return D.createElement(D.Fragment,null,u&&D.createElement(v,{sideCar:VI,removeScrollBar:c,shards:h,noIsolation:d,inert:g,setCallbacks:s,allowPinchZoom:!!_,lockRef:r,gapMode:b}),o?D.cloneElement(D.Children.only(a),gi(gi({},S),{ref:w})):D.createElement(p,gi({},S,{className:l,ref:w}),a))});_g.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};_g.classNames={fullWidth:ep,zeroRight:Jd};var S7=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function x7(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=S7();return e&&t.setAttribute("nonce",e),t}function T7(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function C7(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var k7=function(){var t=0,e=null;return{add:function(r){t==0&&(e=x7())&&(T7(e,r),C7(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},A7=function(){var t=k7();return function(e,r){D.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},WI=function(){var t=A7(),e=function(r){var n=r.styles,i=r.dynamic;return t(n,i),null};return e},R7={left:0,top:0,right:0,gap:0},U0=function(t){return parseInt(t||"",10)||0},P7=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[U0(r),U0(n),U0(i)]},I7=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return R7;var e=P7(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},D7=WI(),cl="data-scroll-locked",O7=function(t,e,r,n){var i=t.left,s=t.top,o=t.right,a=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(p7,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(a,"px ").concat(n,`;
  }
  body[`).concat(cl,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Jd,` {
    right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(ep,` {
    margin-right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(Jd," .").concat(Jd,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(ep," .").concat(ep,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(cl,`] {
    `).concat(m7,": ").concat(a,`px;
  }
`)},$x=function(){var t=parseInt(document.body.getAttribute(cl)||"0",10);return isFinite(t)?t:0},L7=function(){D.useEffect(function(){return document.body.setAttribute(cl,($x()+1).toString()),function(){var t=$x()-1;t<=0?document.body.removeAttribute(cl):document.body.setAttribute(cl,t.toString())}},[])},N7=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,i=n===void 0?"margin":n;L7();var s=D.useMemo(function(){return I7(i)},[i]);return D.createElement(D7,{styles:O7(s,!e,i,r?"":"!important")})},Xb=!1;if(typeof window<"u")try{var Wf=Object.defineProperty({},"passive",{get:function(){return Xb=!0,!0}});window.addEventListener("test",Wf,Wf),window.removeEventListener("test",Wf,Wf)}catch{Xb=!1}var Pa=Xb?{passive:!1}:!1,M7=function(t){return t.tagName==="TEXTAREA"},GI=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!M7(t)&&r[e]==="visible")},B7=function(t){return GI(t,"overflowY")},F7=function(t){return GI(t,"overflowX")},zx=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=qI(t,n);if(i){var s=KI(t,n),o=s[1],a=s[2];if(o>a)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},H7=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},U7=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},qI=function(t,e){return t==="v"?B7(e):F7(e)},KI=function(t,e){return t==="v"?H7(e):U7(e)},j7=function(t,e){return t==="h"&&e==="rtl"?-1:1},$7=function(t,e,r,n,i){var s=j7(t,window.getComputedStyle(e).direction),o=s*n,a=r.target,l=e.contains(a),c=!1,u=o>0,h=0,f=0;do{var d=KI(t,a),g=d[0],_=d[1],m=d[2],p=_-m-s*g;(g||p)&&qI(t,a)&&(h+=p,f+=g),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(Math.abs(h)<1||!i)||!u&&(Math.abs(f)<1||!i))&&(c=!0),c},Gf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Vx=function(t){return[t.deltaX,t.deltaY]},Wx=function(t){return t&&"current"in t?t.current:t},z7=function(t,e){return t[0]===e[0]&&t[1]===e[1]},V7=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},W7=0,Ia=[];function G7(t){var e=D.useRef([]),r=D.useRef([0,0]),n=D.useRef(),i=D.useState(W7++)[0],s=D.useState(WI)[0],o=D.useRef(t);D.useEffect(function(){o.current=t},[t]),D.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var _=d7([t.lockRef.current],(t.shards||[]).map(Wx),!0).filter(Boolean);return _.forEach(function(m){return m.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),_.forEach(function(m){return m.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=D.useCallback(function(_,m){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!o.current.allowPinchZoom;var p=Gf(_),b=r.current,y="deltaX"in _?_.deltaX:b[0]-p[0],v="deltaY"in _?_.deltaY:b[1]-p[1],w,S=_.target,x=Math.abs(y)>Math.abs(v)?"h":"v";if("touches"in _&&x==="h"&&S.type==="range")return!1;var E=zx(x,S);if(!E)return!0;if(E?w=x:(w=x==="v"?"h":"v",E=zx(x,S)),!E)return!1;if(!n.current&&"changedTouches"in _&&(y||v)&&(n.current=w),!w)return!0;var T=n.current||w;return $7(T,m,_,T==="h"?y:v,!0)},[]),l=D.useCallback(function(_){var m=_;if(!(!Ia.length||Ia[Ia.length-1]!==s)){var p="deltaY"in m?Vx(m):Gf(m),b=e.current.filter(function(w){return w.name===m.type&&(w.target===m.target||m.target===w.shadowParent)&&z7(w.delta,p)})[0];if(b&&b.should){m.cancelable&&m.preventDefault();return}if(!b){var y=(o.current.shards||[]).map(Wx).filter(Boolean).filter(function(w){return w.contains(m.target)}),v=y.length>0?a(m,y[0]):!o.current.noIsolation;v&&m.cancelable&&m.preventDefault()}}},[]),c=D.useCallback(function(_,m,p,b){var y={name:_,delta:m,target:p,should:b,shadowParent:q7(p)};e.current.push(y),setTimeout(function(){e.current=e.current.filter(function(v){return v!==y})},1)},[]),u=D.useCallback(function(_){r.current=Gf(_),n.current=void 0},[]),h=D.useCallback(function(_){c(_.type,Vx(_),_.target,a(_,t.lockRef.current))},[]),f=D.useCallback(function(_){c(_.type,Gf(_),_.target,a(_,t.lockRef.current))},[]);D.useEffect(function(){return Ia.push(s),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Pa),document.addEventListener("touchmove",l,Pa),document.addEventListener("touchstart",u,Pa),function(){Ia=Ia.filter(function(_){return _!==s}),document.removeEventListener("wheel",l,Pa),document.removeEventListener("touchmove",l,Pa),document.removeEventListener("touchstart",u,Pa)}},[]);var d=t.removeScrollBar,g=t.inert;return D.createElement(D.Fragment,null,g?D.createElement(s,{styles:V7(i)}):null,d?D.createElement(N7,{gapMode:t.gapMode}):null)}function q7(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const K7=E7(VI,G7);var Yv=D.forwardRef(function(t,e){return D.createElement(_g,gi({},t,{ref:e,sideCar:K7}))});Yv.classNames=_g.classNames;var Y7=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Da=new WeakMap,qf=new WeakMap,Kf={},j0=0,YI=function(t){return t&&(t.host||YI(t.parentNode))},X7=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=YI(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},Q7=function(t,e,r,n){var i=X7(e,Array.isArray(t)?t:[t]);Kf[r]||(Kf[r]=new WeakMap);var s=Kf[r],o=[],a=new Set,l=new Set(i),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};i.forEach(c);var u=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))u(f);else try{var d=f.getAttribute(n),g=d!==null&&d!=="false",_=(Da.get(f)||0)+1,m=(s.get(f)||0)+1;Da.set(f,_),s.set(f,m),o.push(f),_===1&&g&&qf.set(f,!0),m===1&&f.setAttribute(r,"true"),g||f.setAttribute(n,"true")}catch(p){console.error("aria-hidden: cannot operate on ",f,p)}})};return u(e),a.clear(),j0++,function(){o.forEach(function(h){var f=Da.get(h)-1,d=s.get(h)-1;Da.set(h,f),s.set(h,d),f||(qf.has(h)||h.removeAttribute(n),qf.delete(h)),d||h.removeAttribute(r)}),j0--,j0||(Da=new WeakMap,Da=new WeakMap,qf=new WeakMap,Kf={})}},XI=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),i=Y7(t);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live]"))),Q7(n,i,r,"aria-hidden")):function(){return null}},Xv="Dialog",[QI,ISe]=$h(Xv),[Z7,Xn]=QI(Xv),ZI=t=>{const{__scopeDialog:e,children:r,open:n,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=D.useRef(null),l=D.useRef(null),[c=!1,u]=zh({prop:n,defaultProp:i,onChange:s});return R.jsx(Z7,{scope:e,triggerRef:a,contentRef:l,contentId:Go(),titleId:Go(),descriptionId:Go(),open:c,onOpenChange:u,onOpenToggle:D.useCallback(()=>u(h=>!h),[u]),modal:o,children:r})};ZI.displayName=Xv;var JI="DialogTrigger",eD=D.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=Xn(JI,r),s=Xt(e,i.triggerRef);return R.jsx(Dt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Jv(i.open),...n,ref:s,onClick:Ke(t.onClick,i.onOpenToggle)})});eD.displayName=JI;var Qv="DialogPortal",[J7,tD]=QI(Qv,{forceMount:void 0}),rD=t=>{const{__scopeDialog:e,forceMount:r,children:n,container:i}=t,s=Xn(Qv,e);return R.jsx(J7,{scope:e,forceMount:r,children:D.Children.map(n,o=>R.jsx(Bi,{present:r||s.open,children:R.jsx(gg,{asChild:!0,container:i,children:o})}))})};rD.displayName=Qv;var Hp="DialogOverlay",nD=D.forwardRef((t,e)=>{const r=tD(Hp,t.__scopeDialog),{forceMount:n=r.forceMount,...i}=t,s=Xn(Hp,t.__scopeDialog);return s.modal?R.jsx(Bi,{present:n||s.open,children:R.jsx(e$,{...i,ref:e})}):null});nD.displayName=Hp;var e$=D.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=Xn(Hp,r);return R.jsx(Yv,{as:Pl,allowPinchZoom:!0,shards:[i.contentRef],children:R.jsx(Dt.div,{"data-state":Jv(i.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),ea="DialogContent",iD=D.forwardRef((t,e)=>{const r=tD(ea,t.__scopeDialog),{forceMount:n=r.forceMount,...i}=t,s=Xn(ea,t.__scopeDialog);return R.jsx(Bi,{present:n||s.open,children:s.modal?R.jsx(t$,{...i,ref:e}):R.jsx(r$,{...i,ref:e})})});iD.displayName=ea;var t$=D.forwardRef((t,e)=>{const r=Xn(ea,t.__scopeDialog),n=D.useRef(null),i=Xt(e,r.contentRef,n);return D.useEffect(()=>{const s=n.current;if(s)return XI(s)},[]),R.jsx(sD,{...t,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ke(t.onCloseAutoFocus,s=>{s.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:Ke(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:Ke(t.onFocusOutside,s=>s.preventDefault())})}),r$=D.forwardRef((t,e)=>{const r=Xn(ea,t.__scopeDialog),n=D.useRef(!1),i=D.useRef(!1);return R.jsx(sD,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{t.onCloseAutoFocus?.(s),s.defaultPrevented||(n.current||r.triggerRef.current?.focus(),s.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:s=>{t.onInteractOutside?.(s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;r.triggerRef.current?.contains(o)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),sD=D.forwardRef((t,e)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=Xn(ea,r),l=D.useRef(null),c=Xt(e,l);return jI(),R.jsxs(R.Fragment,{children:[R.jsx(Kv,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:s,children:R.jsx(mg,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":Jv(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),R.jsxs(R.Fragment,{children:[R.jsx(n$,{titleId:a.titleId}),R.jsx(s$,{contentRef:l,descriptionId:a.descriptionId})]})]})}),Zv="DialogTitle",oD=D.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=Xn(Zv,r);return R.jsx(Dt.h2,{id:i.titleId,...n,ref:e})});oD.displayName=Zv;var aD="DialogDescription",lD=D.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=Xn(aD,r);return R.jsx(Dt.p,{id:i.descriptionId,...n,ref:e})});lD.displayName=aD;var cD="DialogClose",uD=D.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=Xn(cD,r);return R.jsx(Dt.button,{type:"button",...n,ref:e,onClick:Ke(t.onClick,()=>i.onOpenChange(!1))})});uD.displayName=cD;function Jv(t){return t?"open":"closed"}var hD="DialogTitleWarning",[DSe,fD]=H9(hD,{contentName:ea,titleName:Zv,docsSlug:"dialog"}),n$=({titleId:t})=>{const e=fD(hD),r=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return D.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},i$="DialogDescriptionWarning",s$=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${fD(i$).contentName}}.`;return D.useEffect(()=>{const i=t.current?.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},dD=ZI,o$=eD,pD=rD,mD=nD,gD=iD,a$=oD,l$=lD,_D=uD;function je(...t){let e="";for(const r of t)e=bD(e,c$(r));return e}function c$(t){if(typeof t=="string"||typeof t=="number")return t;if(typeof t!="object")return"";if(Array.isArray(t))return je(...t);let e="";for(const r in t)t[r]&&(e=bD(e,r));return e}function bD(t,e){return e?t?t+" "+e:t+e:t}const On=va(.4,0,.2,1),qt=D.memo(({icon:t,size:e="xl",className:r,iconClassName:n,disabledClassName:i,disabled:s=!1,title:o,onClick:a,children:l})=>R.jsx("button",{className:je("flex items-center text-bolt-elements-item-contentDefault bg-transparent enabled:hover:text-bolt-elements-item-contentActive rounded-md p-1 enabled:hover:bg-bolt-elements-item-backgroundActive disabled:cursor-not-allowed",{[je("opacity-30",i)]:s},r),title:o,disabled:s,onClick:c=>{s||a?.(c)},children:l||R.jsx("div",{className:je(t,u$(e),n)})}));function u$(t){return t==="sm"?"text-sm":t==="md"?"text-md":t==="lg"?"text-lg":t==="xl"?"text-xl":"text-2xl"}const Up={duration:.15,ease:On},yD={closed:{opacity:0,transition:Up},open:{opacity:1,transition:Up}},vD={closed:{x:"-50%",y:"-40%",scale:.96,opacity:0,transition:Up},open:{x:"-50%",y:"-50%",scale:1,opacity:1,transition:Up}},Gx=D.memo(({type:t,children:e,onClick:r})=>R.jsx("button",{className:je("inline-flex h-[35px] items-center justify-center rounded-lg px-4 text-sm leading-none focus:outline-none",{"bg-bolt-elements-button-primary-background text-bolt-elements-button-primary-text hover:bg-bolt-elements-button-primary-backgroundHover":t==="primary","bg-bolt-elements-button-secondary-background text-bolt-elements-button-secondary-text hover:bg-bolt-elements-button-secondary-backgroundHover":t==="secondary","bg-bolt-elements-button-danger-background text-bolt-elements-button-danger-text hover:bg-bolt-elements-button-danger-backgroundHover":t==="danger"}),onClick:r,children:e})),wD=D.memo(({className:t,children:e,...r})=>R.jsx(a$,{className:je("px-5 py-4 flex items-center justify-between border-b border-bolt-elements-borderColor text-lg font-semibold leading-6 text-bolt-elements-textPrimary",t),...r,children:e})),h$=D.memo(({className:t,children:e,...r})=>R.jsx(l$,{className:je("px-5 py-4 text-bolt-elements-textPrimary text-md",t),...r,children:e})),f$=D.memo(({className:t,children:e,onBackdrop:r,onClose:n})=>R.jsxs(pD,{children:[R.jsx(mD,{onClick:r,asChild:!0,children:R.jsx(Jr.div,{className:"bg-black/50 fixed inset-0 z-max",initial:"closed",animate:"open",exit:"closed",variants:yD})}),R.jsx(gD,{asChild:!0,children:R.jsxs(Jr.div,{className:je("fixed top-[50%] left-[50%] z-max max-h-[85vh] w-[90vw] max-w-[450px] translate-x-[-50%] translate-y-[-50%] border border-bolt-elements-borderColor rounded-lg bg-bolt-elements-background-depth-2 shadow-lg focus:outline-none overflow-hidden",t),initial:"closed",animate:"open",exit:"closed",variants:vD,children:[e,R.jsx(_D,{asChild:!0,onClick:n,children:R.jsx(qt,{icon:"i-ph:x",className:"absolute top-[10px] right-[10px]"})})]})})]})),d$=D.memo(({className:t})=>{const e=St(kp),[r,n]=D.useState(!1);return D.useEffect(()=>{n(!0)},[]),r&&R.jsx(qt,{className:t,icon:e==="dark"?"i-ph-sun-dim-duotone":"i-ph-moon-stars-duotone",size:"xl",title:"Toggle Theme",onClick:UF})}),p$="t",Xc={"settings-tabs":"s",active:p$,"settings-button":"u","settings-danger-area":"v"};let ED="info";const m$="HTMLRewriter"in globalThis,g$=!m$,_$={trace:(...t)=>_i("trace",void 0,t),debug:(...t)=>_i("debug",void 0,t),info:(...t)=>_i("info",void 0,t),warn:(...t)=>_i("warn",void 0,t),error:(...t)=>_i("error",void 0,t),setLevel:SD};function Fr(t){return{trace:(...e)=>_i("trace",t,e),debug:(...e)=>_i("debug",t,e),info:(...e)=>_i("info",t,e),warn:(...e)=>_i("warn",t,e),error:(...e)=>_i("error",t,e),setLevel:SD}}function SD(t){t==="trace"||t==="debug"||(ED=t)}function _i(t,e,r){const n=["trace","debug","info","warn","error"];if(n.indexOf(t)<n.indexOf(ED))return;const i=r.reduce((u,h)=>u.endsWith(`
`)?u+h:u?`${u} ${h}`:h,"");if(!g$){console.log(`[${t.toUpperCase()}]`,i);return}const s=b$(t),a=qx(s,t==="warn"?"black":"white"),l=qx("#77828D","white"),c=[a];typeof e=="string"&&c.push("",l),console.log(`%c${t.toUpperCase()}${e?`%c %c${e}`:""}`,...c,i)}function qx(t,e){return`background-color: ${t}; color: white; border: 4px solid ${t}; color: ${e};`}function b$(t){switch(t){case"trace":case"debug":return"#77828D";case"info":return"#1389FD";case"warn":return"#FFDB6C";case"error":return"#EE4744";default:return"black"}}const Jl=Fr("Render"),y$=Fr("ChatHistory");async function v$(){if(typeof indexedDB>"u"){console.error("indexedDB is not available in this environment.");return}return new Promise(t=>{const e=indexedDB.open("boltHistory",1);e.onupgradeneeded=r=>{const n=r.target.result;if(!n.objectStoreNames.contains("chats")){const i=n.createObjectStore("chats",{keyPath:"id"});i.createIndex("id","id",{unique:!0}),i.createIndex("urlId","urlId",{unique:!0})}},e.onsuccess=r=>{t(r.target.result)},e.onerror=r=>{t(void 0),y$.error(r.target.error)}})}async function Qb(t){return new Promise((e,r)=>{const s=t.transaction("chats","readonly").objectStore("chats").getAll();s.onsuccess=()=>e(s.result),s.onerror=()=>r(s.error)})}async function ew(t,e,r,n,i,s){return new Promise((o,a)=>{const c=t.transaction("chats","readwrite").objectStore("chats");if(s&&isNaN(Date.parse(s))){a(new Error("Invalid timestamp"));return}const u=c.put({id:e,messages:r,urlId:n,description:i,timestamp:s??new Date().toISOString()});u.onsuccess=()=>o(),u.onerror=()=>a(u.error)})}async function Il(t,e){return await E$(t,e)||await w$(t,e)}async function w$(t,e){return new Promise((r,n)=>{const a=t.transaction("chats","readonly").objectStore("chats").index("urlId").get(e);a.onsuccess=()=>r(a.result),a.onerror=()=>n(a.error)})}async function E$(t,e){return new Promise((r,n)=>{const o=t.transaction("chats","readonly").objectStore("chats").get(e);o.onsuccess=()=>r(o.result),o.onerror=()=>n(o.error)})}async function xD(t,e){return new Promise((r,n)=>{const o=t.transaction("chats","readwrite").objectStore("chats").delete(e);o.onsuccess=()=>r(void 0),o.onerror=()=>n(o.error)})}async function TD(t){return new Promise((e,r)=>{const s=t.transaction("chats","readonly").objectStore("chats").getAllKeys();s.onsuccess=()=>{const o=s.result.reduce((a,l)=>Math.max(+a,+l),0);e(String(+o+1))},s.onerror=()=>r(s.error)})}async function CD(t,e){const r=await S$(t);if(r.includes(e)){let n=2;for(;r.includes(`${e}-${n}`);)n++;return`${e}-${n}`}else return e}async function S$(t){return new Promise((e,r)=>{const i=t.transaction("chats","readonly").objectStore("chats"),s=[],o=i.openCursor();o.onsuccess=a=>{const l=a.target.result;l?(s.push(l.value.urlId),l.continue()):e(s)},o.onerror=()=>{r(o.error)}})}async function x$(t,e,r){const n=await Il(t,e);if(!n)throw new Error("Chat not found");const i=n.messages.findIndex(o=>o.id===r);if(i===-1)throw new Error("Message not found");const s=n.messages.slice(0,i+1);return tw(t,n.description?`${n.description} (fork)`:"Forked chat",s)}async function T$(t,e){const r=await Il(t,e);if(!r)throw new Error("Chat not found");return tw(t,`${r.description||"Chat"} (copy)`,r.messages)}async function tw(t,e,r){const n=await TD(t),i=await CD(t,n);return await ew(t,n,r,i,e),i}async function C$(t,e,r){const n=await Il(t,e);if(!n)throw new Error("Chat not found");if(!r.trim())throw new Error("Description cannot be empty");await ew(t,e,n.messages,n.urlId,r,n.timestamp)}var er={},bg={};bg.byteLength=R$;bg.toByteArray=I$;bg.fromByteArray=L$;var bi=[],vn=[],k$=typeof Uint8Array<"u"?Uint8Array:Array,$0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Oa=0,A$=$0.length;Oa<A$;++Oa)bi[Oa]=$0[Oa],vn[$0.charCodeAt(Oa)]=Oa;vn[45]=62;vn[95]=63;function kD(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function R$(t){var e=kD(t),r=e[0],n=e[1];return(r+n)*3/4-n}function P$(t,e,r){return(e+r)*3/4-r}function I$(t){var e,r=kD(t),n=r[0],i=r[1],s=new k$(P$(t,n,i)),o=0,a=i>0?n-4:n,l;for(l=0;l<a;l+=4)e=vn[t.charCodeAt(l)]<<18|vn[t.charCodeAt(l+1)]<<12|vn[t.charCodeAt(l+2)]<<6|vn[t.charCodeAt(l+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=vn[t.charCodeAt(l)]<<2|vn[t.charCodeAt(l+1)]>>4,s[o++]=e&255),i===1&&(e=vn[t.charCodeAt(l)]<<10|vn[t.charCodeAt(l+1)]<<4|vn[t.charCodeAt(l+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function D$(t){return bi[t>>18&63]+bi[t>>12&63]+bi[t>>6&63]+bi[t&63]}function O$(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(D$(n));return i.join("")}function L$(t){for(var e,r=t.length,n=r%3,i=[],s=16383,o=0,a=r-n;o<a;o+=s)i.push(O$(t,o,o+s>a?a:o+s));return n===1?(e=t[r-1],i.push(bi[e>>2]+bi[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(bi[e>>10]+bi[e>>4&63]+bi[e<<2&63]+"=")),i.join("")}var rw={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */rw.read=function(t,e,r,n,i){var s,o,a=i*8-n-1,l=(1<<a)-1,c=l>>1,u=-7,h=r?i-1:0,f=r?-1:1,d=t[e+h];for(h+=f,s=d&(1<<-u)-1,d>>=-u,u+=a;u>0;s=s*256+t[e+h],h+=f,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=n;u>0;o=o*256+t[e+h],h+=f,u-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:(d?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-c}return(d?-1:1)*o*Math.pow(2,s-n)};rw.write=function(t,e,r,n,i,s){var o,a,l,c=s*8-i-1,u=(1<<c)-1,h=u>>1,f=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:s-1,g=n?1:-1,_=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?e+=f/l:e+=f*Math.pow(2,1-h),e*l>=2&&(o++,l/=2),o+h>=u?(a=0,o=u):o+h>=1?(a=(e*l-1)*Math.pow(2,i),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[r+d]=a&255,d+=g,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[r+d]=o&255,d+=g,o/=256,c-=8);t[r+d-g]|=_*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=bg,r=rw,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=w,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i;const{Uint8Array:s,ArrayBuffer:o,SharedArrayBuffer:a}=globalThis;u.TYPED_ARRAY_SUPPORT=l(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const z=new s(1),I={foo:function(){return 42}};return Object.setPrototypeOf(I,s.prototype),Object.setPrototypeOf(z,I),z.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function c(z){if(z>i)throw new RangeError('The value "'+z+'" is invalid for option "size"');const I=new s(z);return Object.setPrototypeOf(I,u.prototype),I}function u(z,I,N){if(typeof z=="number"){if(typeof I=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(z)}return h(z,I,N)}u.poolSize=8192;function h(z,I,N){if(typeof z=="string")return _(z,I);if(o.isView(z))return p(z);if(z==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof z);if(xe(z,o)||z&&xe(z.buffer,o)||typeof a<"u"&&(xe(z,a)||z&&xe(z.buffer,a)))return b(z,I,N);if(typeof z=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const q=z.valueOf&&z.valueOf();if(q!=null&&q!==z)return u.from(q,I,N);const le=y(z);if(le)return le;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof z[Symbol.toPrimitive]=="function")return u.from(z[Symbol.toPrimitive]("string"),I,N);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof z)}u.from=function(z,I,N){return h(z,I,N)},Object.setPrototypeOf(u.prototype,s.prototype),Object.setPrototypeOf(u,s);function f(z){if(typeof z!="number")throw new TypeError('"size" argument must be of type number');if(z<0)throw new RangeError('The value "'+z+'" is invalid for option "size"')}function d(z,I,N){return f(z),z<=0?c(z):I!==void 0?typeof N=="string"?c(z).fill(I,N):c(z).fill(I):c(z)}u.alloc=function(z,I,N){return d(z,I,N)};function g(z){return f(z),c(z<0?0:v(z)|0)}u.allocUnsafe=function(z){return g(z)},u.allocUnsafeSlow=function(z){return g(z)};function _(z,I){if((typeof I!="string"||I==="")&&(I="utf8"),!u.isEncoding(I))throw new TypeError("Unknown encoding: "+I);const N=S(z,I)|0;let q=c(N);const le=q.write(z,I);return le!==N&&(q=q.slice(0,le)),q}function m(z){const I=z.length<0?0:v(z.length)|0,N=c(I);for(let q=0;q<I;q+=1)N[q]=z[q]&255;return N}function p(z){if(xe(z,s)){const I=new s(z);return b(I.buffer,I.byteOffset,I.byteLength)}return m(z)}function b(z,I,N){if(I<0||z.byteLength<I)throw new RangeError('"offset" is outside of buffer bounds');if(z.byteLength<I+(N||0))throw new RangeError('"length" is outside of buffer bounds');let q;return I===void 0&&N===void 0?q=new s(z):N===void 0?q=new s(z,I):q=new s(z,I,N),Object.setPrototypeOf(q,u.prototype),q}function y(z){if(u.isBuffer(z)){const I=v(z.length)|0,N=c(I);return N.length===0||z.copy(N,0,0,I),N}if(z.length!==void 0)return typeof z.length!="number"||ue(z.length)?c(0):m(z);if(z.type==="Buffer"&&Array.isArray(z.data))return m(z.data)}function v(z){if(z>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return z|0}function w(z){return+z!=z&&(z=0),u.alloc(+z)}u.isBuffer=function(I){return I!=null&&I._isBuffer===!0&&I!==u.prototype},u.compare=function(I,N){if(xe(I,s)&&(I=u.from(I,I.offset,I.byteLength)),xe(N,s)&&(N=u.from(N,N.offset,N.byteLength)),!u.isBuffer(I)||!u.isBuffer(N))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(I===N)return 0;let q=I.length,le=N.length;for(let be=0,we=Math.min(q,le);be<we;++be)if(I[be]!==N[be]){q=I[be],le=N[be];break}return q<le?-1:le<q?1:0},u.isEncoding=function(I){switch(String(I).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(I,N){if(!Array.isArray(I))throw new TypeError('"list" argument must be an Array of Buffers');if(I.length===0)return u.alloc(0);let q;if(N===void 0)for(N=0,q=0;q<I.length;++q)N+=I[q].length;const le=u.allocUnsafe(N);let be=0;for(q=0;q<I.length;++q){let we=I[q];if(xe(we,s))be+we.length>le.length?(u.isBuffer(we)||(we=u.from(we)),we.copy(le,be)):s.prototype.set.call(le,we,be);else if(u.isBuffer(we))we.copy(le,be);else throw new TypeError('"list" argument must be an Array of Buffers');be+=we.length}return le};function S(z,I){if(u.isBuffer(z))return z.length;if(o.isView(z)||xe(z,o))return z.byteLength;if(typeof z!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof z);const N=z.length,q=arguments.length>2&&arguments[2]===!0;if(!q&&N===0)return 0;let le=!1;for(;;)switch(I){case"ascii":case"latin1":case"binary":return N;case"utf8":case"utf-8":return ye(z).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N*2;case"hex":return N>>>1;case"base64":return Te(z).length;default:if(le)return q?-1:ye(z).length;I=(""+I).toLowerCase(),le=!0}}u.byteLength=S;function x(z,I,N){let q=!1;if((I===void 0||I<0)&&(I=0),I>this.length||((N===void 0||N>this.length)&&(N=this.length),N<=0)||(N>>>=0,I>>>=0,N<=I))return"";for(z||(z="utf8");;)switch(z){case"hex":return j(this,I,N);case"utf8":case"utf-8":return Q(this,I,N);case"ascii":return M(this,I,N);case"latin1":case"binary":return U(this,I,N);case"base64":return te(this,I,N);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,I,N);default:if(q)throw new TypeError("Unknown encoding: "+z);z=(z+"").toLowerCase(),q=!0}}u.prototype._isBuffer=!0;function E(z,I,N){const q=z[I];z[I]=z[N],z[N]=q}u.prototype.swap16=function(){const I=this.length;if(I%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let N=0;N<I;N+=2)E(this,N,N+1);return this},u.prototype.swap32=function(){const I=this.length;if(I%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let N=0;N<I;N+=4)E(this,N,N+3),E(this,N+1,N+2);return this},u.prototype.swap64=function(){const I=this.length;if(I%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let N=0;N<I;N+=8)E(this,N,N+7),E(this,N+1,N+6),E(this,N+2,N+5),E(this,N+3,N+4);return this},u.prototype.toString=function(){const I=this.length;return I===0?"":arguments.length===0?Q(this,0,I):x.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(I){if(!u.isBuffer(I))throw new TypeError("Argument must be a Buffer");return this===I?!0:u.compare(this,I)===0},u.prototype.inspect=function(){let I="";const N=t.INSPECT_MAX_BYTES;return I=this.toString("hex",0,N).replace(/(.{2})/g,"$1 ").trim(),this.length>N&&(I+=" ... "),"<Buffer "+I+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(I,N,q,le,be){if(xe(I,s)&&(I=u.from(I,I.offset,I.byteLength)),!u.isBuffer(I))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof I);if(N===void 0&&(N=0),q===void 0&&(q=I?I.length:0),le===void 0&&(le=0),be===void 0&&(be=this.length),N<0||q>I.length||le<0||be>this.length)throw new RangeError("out of range index");if(le>=be&&N>=q)return 0;if(le>=be)return-1;if(N>=q)return 1;if(N>>>=0,q>>>=0,le>>>=0,be>>>=0,this===I)return 0;let we=be-le,qe=q-N;const st=Math.min(we,qe),wt=this.slice(le,be),Ct=I.slice(N,q);for(let pt=0;pt<st;++pt)if(wt[pt]!==Ct[pt]){we=wt[pt],qe=Ct[pt];break}return we<qe?-1:qe<we?1:0};function T(z,I,N,q,le){if(z.length===0)return-1;if(typeof N=="string"?(q=N,N=0):N>2147483647?N=2147483647:N<-2147483648&&(N=-2147483648),N=+N,ue(N)&&(N=le?0:z.length-1),N<0&&(N=z.length+N),N>=z.length){if(le)return-1;N=z.length-1}else if(N<0)if(le)N=0;else return-1;if(typeof I=="string"&&(I=u.from(I,q)),u.isBuffer(I))return I.length===0?-1:k(z,I,N,q,le);if(typeof I=="number")return I=I&255,typeof s.prototype.indexOf=="function"?le?s.prototype.indexOf.call(z,I,N):s.prototype.lastIndexOf.call(z,I,N):k(z,[I],N,q,le);throw new TypeError("val must be string, number or Buffer")}function k(z,I,N,q,le){let be=1,we=z.length,qe=I.length;if(q!==void 0&&(q=String(q).toLowerCase(),q==="ucs2"||q==="ucs-2"||q==="utf16le"||q==="utf-16le")){if(z.length<2||I.length<2)return-1;be=2,we/=2,qe/=2,N/=2}function st(Ct,pt){return be===1?Ct[pt]:Ct.readUInt16BE(pt*be)}let wt;if(le){let Ct=-1;for(wt=N;wt<we;wt++)if(st(z,wt)===st(I,Ct===-1?0:wt-Ct)){if(Ct===-1&&(Ct=wt),wt-Ct+1===qe)return Ct*be}else Ct!==-1&&(wt-=wt-Ct),Ct=-1}else for(N+qe>we&&(N=we-qe),wt=N;wt>=0;wt--){let Ct=!0;for(let pt=0;pt<qe;pt++)if(st(z,wt+pt)!==st(I,pt)){Ct=!1;break}if(Ct)return wt}return-1}u.prototype.includes=function(I,N,q){return this.indexOf(I,N,q)!==-1},u.prototype.indexOf=function(I,N,q){return T(this,I,N,q,!0)},u.prototype.lastIndexOf=function(I,N,q){return T(this,I,N,q,!1)};function B(z,I,N,q){N=Number(N)||0;const le=z.length-N;q?(q=Number(q),q>le&&(q=le)):q=le;const be=I.length;q>be/2&&(q=be/2);let we;for(we=0;we<q;++we){const qe=parseInt(I.substr(we*2,2),16);if(ue(qe))return we;z[N+we]=qe}return we}function P(z,I,N,q){return Ae(ye(I,z.length-N),z,N,q)}function O(z,I,N,q){return Ae(Se(I),z,N,q)}function A(z,I,N,q){return Ae(Te(I),z,N,q)}function $(z,I,N,q){return Ae(pe(I,z.length-N),z,N,q)}u.prototype.write=function(I,N,q,le){if(N===void 0)le="utf8",q=this.length,N=0;else if(q===void 0&&typeof N=="string")le=N,q=this.length,N=0;else if(isFinite(N))N=N>>>0,isFinite(q)?(q=q>>>0,le===void 0&&(le="utf8")):(le=q,q=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const be=this.length-N;if((q===void 0||q>be)&&(q=be),I.length>0&&(q<0||N<0)||N>this.length)throw new RangeError("Attempt to write outside buffer bounds");le||(le="utf8");let we=!1;for(;;)switch(le){case"hex":return B(this,I,N,q);case"utf8":case"utf-8":return P(this,I,N,q);case"ascii":case"latin1":case"binary":return O(this,I,N,q);case"base64":return A(this,I,N,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,I,N,q);default:if(we)throw new TypeError("Unknown encoding: "+le);le=(""+le).toLowerCase(),we=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function te(z,I,N){return I===0&&N===z.length?e.fromByteArray(z):e.fromByteArray(z.slice(I,N))}function Q(z,I,N){N=Math.min(z.length,N);const q=[];let le=I;for(;le<N;){const be=z[le];let we=null,qe=be>239?4:be>223?3:be>191?2:1;if(le+qe<=N){let st,wt,Ct,pt;switch(qe){case 1:be<128&&(we=be);break;case 2:st=z[le+1],(st&192)===128&&(pt=(be&31)<<6|st&63,pt>127&&(we=pt));break;case 3:st=z[le+1],wt=z[le+2],(st&192)===128&&(wt&192)===128&&(pt=(be&15)<<12|(st&63)<<6|wt&63,pt>2047&&(pt<55296||pt>57343)&&(we=pt));break;case 4:st=z[le+1],wt=z[le+2],Ct=z[le+3],(st&192)===128&&(wt&192)===128&&(Ct&192)===128&&(pt=(be&15)<<18|(st&63)<<12|(wt&63)<<6|Ct&63,pt>65535&&pt<1114112&&(we=pt))}}we===null?(we=65533,qe=1):we>65535&&(we-=65536,q.push(we>>>10&1023|55296),we=56320|we&1023),q.push(we),le+=qe}return L(q)}const ee=4096;function L(z){const I=z.length;if(I<=ee)return String.fromCharCode.apply(String,z);let N="",q=0;for(;q<I;)N+=String.fromCharCode.apply(String,z.slice(q,q+=ee));return N}function M(z,I,N){let q="";N=Math.min(z.length,N);for(let le=I;le<N;++le)q+=String.fromCharCode(z[le]&127);return q}function U(z,I,N){let q="";N=Math.min(z.length,N);for(let le=I;le<N;++le)q+=String.fromCharCode(z[le]);return q}function j(z,I,N){const q=z.length;(!I||I<0)&&(I=0),(!N||N<0||N>q)&&(N=q);let le="";for(let be=I;be<N;++be)le+=Ce[z[be]];return le}function H(z,I,N){const q=z.slice(I,N);let le="";for(let be=0;be<q.length-1;be+=2)le+=String.fromCharCode(q[be]+q[be+1]*256);return le}u.prototype.slice=function(I,N){const q=this.length;I=~~I,N=N===void 0?q:~~N,I<0?(I+=q,I<0&&(I=0)):I>q&&(I=q),N<0?(N+=q,N<0&&(N=0)):N>q&&(N=q),N<I&&(N=I);const le=this.subarray(I,N);return Object.setPrototypeOf(le,u.prototype),le};function Z(z,I,N){if(z%1!==0||z<0)throw new RangeError("offset is not uint");if(z+I>N)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(I,N,q){I=I>>>0,N=N>>>0,q||Z(I,N,this.length);let le=this[I],be=1,we=0;for(;++we<N&&(be*=256);)le+=this[I+we]*be;return le},u.prototype.readUintBE=u.prototype.readUIntBE=function(I,N,q){I=I>>>0,N=N>>>0,q||Z(I,N,this.length);let le=this[I+--N],be=1;for(;N>0&&(be*=256);)le+=this[I+--N]*be;return le},u.prototype.readUint8=u.prototype.readUInt8=function(I,N){return I=I>>>0,N||Z(I,1,this.length),this[I]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(I,N){return I=I>>>0,N||Z(I,2,this.length),this[I]|this[I+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(I,N){return I=I>>>0,N||Z(I,2,this.length),this[I]<<8|this[I+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(I,N){return I=I>>>0,N||Z(I,4,this.length),(this[I]|this[I+1]<<8|this[I+2]<<16)+this[I+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(I,N){return I=I>>>0,N||Z(I,4,this.length),this[I]*16777216+(this[I+1]<<16|this[I+2]<<8|this[I+3])},u.prototype.readBigUInt64LE=Pe(function(I){I=I>>>0,ae(I,"offset");const N=this[I],q=this[I+7];(N===void 0||q===void 0)&&W(I,this.length-8);const le=N+this[++I]*2**8+this[++I]*2**16+this[++I]*2**24,be=this[++I]+this[++I]*2**8+this[++I]*2**16+q*2**24;return BigInt(le)+(BigInt(be)<<BigInt(32))}),u.prototype.readBigUInt64BE=Pe(function(I){I=I>>>0,ae(I,"offset");const N=this[I],q=this[I+7];(N===void 0||q===void 0)&&W(I,this.length-8);const le=N*2**24+this[++I]*2**16+this[++I]*2**8+this[++I],be=this[++I]*2**24+this[++I]*2**16+this[++I]*2**8+q;return(BigInt(le)<<BigInt(32))+BigInt(be)}),u.prototype.readIntLE=function(I,N,q){I=I>>>0,N=N>>>0,q||Z(I,N,this.length);let le=this[I],be=1,we=0;for(;++we<N&&(be*=256);)le+=this[I+we]*be;return be*=128,le>=be&&(le-=Math.pow(2,8*N)),le},u.prototype.readIntBE=function(I,N,q){I=I>>>0,N=N>>>0,q||Z(I,N,this.length);let le=N,be=1,we=this[I+--le];for(;le>0&&(be*=256);)we+=this[I+--le]*be;return be*=128,we>=be&&(we-=Math.pow(2,8*N)),we},u.prototype.readInt8=function(I,N){return I=I>>>0,N||Z(I,1,this.length),this[I]&128?(255-this[I]+1)*-1:this[I]},u.prototype.readInt16LE=function(I,N){I=I>>>0,N||Z(I,2,this.length);const q=this[I]|this[I+1]<<8;return q&32768?q|4294901760:q},u.prototype.readInt16BE=function(I,N){I=I>>>0,N||Z(I,2,this.length);const q=this[I+1]|this[I]<<8;return q&32768?q|4294901760:q},u.prototype.readInt32LE=function(I,N){return I=I>>>0,N||Z(I,4,this.length),this[I]|this[I+1]<<8|this[I+2]<<16|this[I+3]<<24},u.prototype.readInt32BE=function(I,N){return I=I>>>0,N||Z(I,4,this.length),this[I]<<24|this[I+1]<<16|this[I+2]<<8|this[I+3]},u.prototype.readBigInt64LE=Pe(function(I){I=I>>>0,ae(I,"offset");const N=this[I],q=this[I+7];(N===void 0||q===void 0)&&W(I,this.length-8);const le=this[I+4]+this[I+5]*2**8+this[I+6]*2**16+(q<<24);return(BigInt(le)<<BigInt(32))+BigInt(N+this[++I]*2**8+this[++I]*2**16+this[++I]*2**24)}),u.prototype.readBigInt64BE=Pe(function(I){I=I>>>0,ae(I,"offset");const N=this[I],q=this[I+7];(N===void 0||q===void 0)&&W(I,this.length-8);const le=(N<<24)+this[++I]*2**16+this[++I]*2**8+this[++I];return(BigInt(le)<<BigInt(32))+BigInt(this[++I]*2**24+this[++I]*2**16+this[++I]*2**8+q)}),u.prototype.readFloatLE=function(I,N){return I=I>>>0,N||Z(I,4,this.length),r.read(this,I,!0,23,4)},u.prototype.readFloatBE=function(I,N){return I=I>>>0,N||Z(I,4,this.length),r.read(this,I,!1,23,4)},u.prototype.readDoubleLE=function(I,N){return I=I>>>0,N||Z(I,8,this.length),r.read(this,I,!0,52,8)},u.prototype.readDoubleBE=function(I,N){return I=I>>>0,N||Z(I,8,this.length),r.read(this,I,!1,52,8)};function re(z,I,N,q,le,be){if(!u.isBuffer(z))throw new TypeError('"buffer" argument must be a Buffer instance');if(I>le||I<be)throw new RangeError('"value" argument is out of bounds');if(N+q>z.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(I,N,q,le){if(I=+I,N=N>>>0,q=q>>>0,!le){const qe=Math.pow(2,8*q)-1;re(this,I,N,q,qe,0)}let be=1,we=0;for(this[N]=I&255;++we<q&&(be*=256);)this[N+we]=I/be&255;return N+q},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(I,N,q,le){if(I=+I,N=N>>>0,q=q>>>0,!le){const qe=Math.pow(2,8*q)-1;re(this,I,N,q,qe,0)}let be=q-1,we=1;for(this[N+be]=I&255;--be>=0&&(we*=256);)this[N+be]=I/we&255;return N+q},u.prototype.writeUint8=u.prototype.writeUInt8=function(I,N,q){return I=+I,N=N>>>0,q||re(this,I,N,1,255,0),this[N]=I&255,N+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(I,N,q){return I=+I,N=N>>>0,q||re(this,I,N,2,65535,0),this[N]=I&255,this[N+1]=I>>>8,N+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(I,N,q){return I=+I,N=N>>>0,q||re(this,I,N,2,65535,0),this[N]=I>>>8,this[N+1]=I&255,N+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(I,N,q){return I=+I,N=N>>>0,q||re(this,I,N,4,4294967295,0),this[N+3]=I>>>24,this[N+2]=I>>>16,this[N+1]=I>>>8,this[N]=I&255,N+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(I,N,q){return I=+I,N=N>>>0,q||re(this,I,N,4,4294967295,0),this[N]=I>>>24,this[N+1]=I>>>16,this[N+2]=I>>>8,this[N+3]=I&255,N+4};function ge(z,I,N,q,le){he(I,q,le,z,N,7);let be=Number(I&BigInt(4294967295));z[N++]=be,be=be>>8,z[N++]=be,be=be>>8,z[N++]=be,be=be>>8,z[N++]=be;let we=Number(I>>BigInt(32)&BigInt(4294967295));return z[N++]=we,we=we>>8,z[N++]=we,we=we>>8,z[N++]=we,we=we>>8,z[N++]=we,N}function X(z,I,N,q,le){he(I,q,le,z,N,7);let be=Number(I&BigInt(4294967295));z[N+7]=be,be=be>>8,z[N+6]=be,be=be>>8,z[N+5]=be,be=be>>8,z[N+4]=be;let we=Number(I>>BigInt(32)&BigInt(4294967295));return z[N+3]=we,we=we>>8,z[N+2]=we,we=we>>8,z[N+1]=we,we=we>>8,z[N]=we,N+8}u.prototype.writeBigUInt64LE=Pe(function(I,N=0){return ge(this,I,N,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Pe(function(I,N=0){return X(this,I,N,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(I,N,q,le){if(I=+I,N=N>>>0,!le){const st=Math.pow(2,8*q-1);re(this,I,N,q,st-1,-st)}let be=0,we=1,qe=0;for(this[N]=I&255;++be<q&&(we*=256);)I<0&&qe===0&&this[N+be-1]!==0&&(qe=1),this[N+be]=(I/we>>0)-qe&255;return N+q},u.prototype.writeIntBE=function(I,N,q,le){if(I=+I,N=N>>>0,!le){const st=Math.pow(2,8*q-1);re(this,I,N,q,st-1,-st)}let be=q-1,we=1,qe=0;for(this[N+be]=I&255;--be>=0&&(we*=256);)I<0&&qe===0&&this[N+be+1]!==0&&(qe=1),this[N+be]=(I/we>>0)-qe&255;return N+q},u.prototype.writeInt8=function(I,N,q){return I=+I,N=N>>>0,q||re(this,I,N,1,127,-128),I<0&&(I=255+I+1),this[N]=I&255,N+1},u.prototype.writeInt16LE=function(I,N,q){return I=+I,N=N>>>0,q||re(this,I,N,2,32767,-32768),this[N]=I&255,this[N+1]=I>>>8,N+2},u.prototype.writeInt16BE=function(I,N,q){return I=+I,N=N>>>0,q||re(this,I,N,2,32767,-32768),this[N]=I>>>8,this[N+1]=I&255,N+2},u.prototype.writeInt32LE=function(I,N,q){return I=+I,N=N>>>0,q||re(this,I,N,4,2147483647,-2147483648),this[N]=I&255,this[N+1]=I>>>8,this[N+2]=I>>>16,this[N+3]=I>>>24,N+4},u.prototype.writeInt32BE=function(I,N,q){return I=+I,N=N>>>0,q||re(this,I,N,4,2147483647,-2147483648),I<0&&(I=4294967295+I+1),this[N]=I>>>24,this[N+1]=I>>>16,this[N+2]=I>>>8,this[N+3]=I&255,N+4},u.prototype.writeBigInt64LE=Pe(function(I,N=0){return ge(this,I,N,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Pe(function(I,N=0){return X(this,I,N,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function V(z,I,N,q,le,be){if(N+q>z.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("Index out of range")}function ie(z,I,N,q,le){return I=+I,N=N>>>0,le||V(z,I,N,4),r.write(z,I,N,q,23,4),N+4}u.prototype.writeFloatLE=function(I,N,q){return ie(this,I,N,!0,q)},u.prototype.writeFloatBE=function(I,N,q){return ie(this,I,N,!1,q)};function se(z,I,N,q,le){return I=+I,N=N>>>0,le||V(z,I,N,8),r.write(z,I,N,q,52,8),N+8}u.prototype.writeDoubleLE=function(I,N,q){return se(this,I,N,!0,q)},u.prototype.writeDoubleBE=function(I,N,q){return se(this,I,N,!1,q)},u.prototype.copy=function(I,N,q,le){if(!u.isBuffer(I))throw new TypeError("argument should be a Buffer");if(q||(q=0),!le&&le!==0&&(le=this.length),N>=I.length&&(N=I.length),N||(N=0),le>0&&le<q&&(le=q),le===q||I.length===0||this.length===0)return 0;if(N<0)throw new RangeError("targetStart out of bounds");if(q<0||q>=this.length)throw new RangeError("Index out of range");if(le<0)throw new RangeError("sourceEnd out of bounds");le>this.length&&(le=this.length),I.length-N<le-q&&(le=I.length-N+q);const be=le-q;return this===I&&typeof s.prototype.copyWithin=="function"?this.copyWithin(N,q,le):s.prototype.set.call(I,this.subarray(q,le),N),be},u.prototype.fill=function(I,N,q,le){if(typeof I=="string"){if(typeof N=="string"?(le=N,N=0,q=this.length):typeof q=="string"&&(le=q,q=this.length),le!==void 0&&typeof le!="string")throw new TypeError("encoding must be a string");if(typeof le=="string"&&!u.isEncoding(le))throw new TypeError("Unknown encoding: "+le);if(I.length===1){const we=I.charCodeAt(0);(le==="utf8"&&we<128||le==="latin1")&&(I=we)}}else typeof I=="number"?I=I&255:typeof I=="boolean"&&(I=Number(I));if(N<0||this.length<N||this.length<q)throw new RangeError("Out of range index");if(q<=N)return this;N=N>>>0,q=q===void 0?this.length:q>>>0,I||(I=0);let be;if(typeof I=="number")for(be=N;be<q;++be)this[be]=I;else{const we=u.isBuffer(I)?I:u.from(I,le),qe=we.length;if(qe===0)throw new TypeError('The value "'+I+'" is invalid for argument "value"');for(be=0;be<q-N;++be)this[be+N]=we[be%qe]}return this};const me={};function de(z,I,N){me[z]=class extends N{constructor(){super(),Object.defineProperty(this,"message",{value:I.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${z}]`,this.stack,delete this.name}get code(){return z}set code(le){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:le,writable:!0})}toString(){return`${this.name} [${z}]: ${this.message}`}}}de("ERR_BUFFER_OUT_OF_BOUNDS",function(z){return z?`${z} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),de("ERR_INVALID_ARG_TYPE",function(z,I){return`The "${z}" argument must be of type number. Received type ${typeof I}`},TypeError),de("ERR_OUT_OF_RANGE",function(z,I,N){let q=`The value of "${z}" is out of range.`,le=N;return Number.isInteger(N)&&Math.abs(N)>2**32?le=ve(String(N)):typeof N=="bigint"&&(le=String(N),(N>BigInt(2)**BigInt(32)||N<-(BigInt(2)**BigInt(32)))&&(le=ve(le)),le+="n"),q+=` It must be ${I}. Received ${le}`,q},RangeError);function ve(z){let I="",N=z.length;const q=z[0]==="-"?1:0;for(;N>=q+4;N-=3)I=`_${z.slice(N-3,N)}${I}`;return`${z.slice(0,N)}${I}`}function F(z,I,N){ae(I,"offset"),(z[I]===void 0||z[I+N]===void 0)&&W(I,z.length-(N+1))}function he(z,I,N,q,le,be){if(z>N||z<I){const we=typeof I=="bigint"?"n":"";let qe;throw I===0||I===BigInt(0)?qe=`>= 0${we} and < 2${we} ** ${(be+1)*8}${we}`:qe=`>= -(2${we} ** ${(be+1)*8-1}${we}) and < 2 ** ${(be+1)*8-1}${we}`,new me.ERR_OUT_OF_RANGE("value",qe,z)}F(q,le,be)}function ae(z,I){if(typeof z!="number")throw new me.ERR_INVALID_ARG_TYPE(I,"number",z)}function W(z,I,N){throw Math.floor(z)!==z?(ae(z,N),new me.ERR_OUT_OF_RANGE("offset","an integer",z)):I<0?new me.ERR_BUFFER_OUT_OF_BOUNDS:new me.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${I}`,z)}const G=/[^+/0-9A-Za-z-_]/g;function oe(z){if(z=z.split("=")[0],z=z.trim().replace(G,""),z.length<2)return"";for(;z.length%4!==0;)z=z+"=";return z}function ye(z,I){I=I||1/0;let N;const q=z.length;let le=null;const be=[];for(let we=0;we<q;++we){if(N=z.charCodeAt(we),N>55295&&N<57344){if(!le){if(N>56319){(I-=3)>-1&&be.push(239,191,189);continue}else if(we+1===q){(I-=3)>-1&&be.push(239,191,189);continue}le=N;continue}if(N<56320){(I-=3)>-1&&be.push(239,191,189),le=N;continue}N=(le-55296<<10|N-56320)+65536}else le&&(I-=3)>-1&&be.push(239,191,189);if(le=null,N<128){if((I-=1)<0)break;be.push(N)}else if(N<2048){if((I-=2)<0)break;be.push(N>>6|192,N&63|128)}else if(N<65536){if((I-=3)<0)break;be.push(N>>12|224,N>>6&63|128,N&63|128)}else if(N<1114112){if((I-=4)<0)break;be.push(N>>18|240,N>>12&63|128,N>>6&63|128,N&63|128)}else throw new Error("Invalid code point")}return be}function Se(z){const I=[];for(let N=0;N<z.length;++N)I.push(z.charCodeAt(N)&255);return I}function pe(z,I){let N,q,le;const be=[];for(let we=0;we<z.length&&!((I-=2)<0);++we)N=z.charCodeAt(we),q=N>>8,le=N%256,be.push(le),be.push(q);return be}function Te(z){return e.toByteArray(oe(z))}function Ae(z,I,N,q){let le;for(le=0;le<q&&!(le+N>=I.length||le>=z.length);++le)I[le+N]=z[le];return le}function xe(z,I){return z instanceof I||z!=null&&z.constructor!=null&&z.constructor.name!=null&&z.constructor.name===I.name}function ue(z){return z!==z}const Ce=function(){const z="0123456789abcdef",I=new Array(256);for(let N=0;N<16;++N){const q=N*16;for(let le=0;le<16;++le)I[q+le]=z[N]+z[le]}return I}();function Pe(z){return typeof BigInt>"u"?ze:z}function ze(){throw new Error("BigInt not supported")}})(er);const Ne=er.Buffer,N$=er.Blob,M$=er.BlobOptions,AD=er.Buffer,B$=er.File,F$=er.FileOptions,H$=er.INSPECT_MAX_BYTES,U$=er.SlowBuffer,j$=er.TranscodeEncoding,$$=er.atob,z$=er.btoa,V$=er.constants,W$=er.isAscii,G$=er.isUtf8,q$=er.kMaxLength,K$=er.kStringMaxLength,Y$=er.resolveObjectURL,X$=er.transcode,Q$=Object.freeze(Object.defineProperty({__proto__:null,Blob:N$,BlobOptions:M$,Buffer:AD,File:B$,FileOptions:F$,INSPECT_MAX_BYTES:H$,SlowBuffer:U$,TranscodeEncoding:j$,atob:$$,btoa:z$,constants:V$,default:Ne,isAscii:W$,isUtf8:G$,kMaxLength:q$,kStringMaxLength:K$,resolveObjectURL:Y$,transcode:X$},Symbol.toStringTag,{value:"Module"})),Z$="https://stackblitz.com",J$=new Error;J$.stack="";function ez(){let t,e;function r(){e=new Promise(n=>t=n)}return r(),{get promise(){return e},resolve(n){return t(n)},reset:r}}let Yf;const tz={initialized:!1,forwardAuth:!0,redirectUri:"",authComplete:ez(),clientId:"",oauthScope:"",broadcastChannel:null,get editorOrigin(){return Yf==null&&(Yf=new URL(globalThis.WEBCONTAINER_API_IFRAME_URL??Z$).origin),Yf},set editorOrigin(t){Yf=t},tokens:null,cleanup:[]};function RD(t){const e={d:{}};for(const r of Object.keys(t)){const n=t[r];if("file"in n){const s=n.file.contents,o=typeof s=="string"?s:rz(s),a=typeof s=="string"?{}:{b:!0};e.d[r]={f:{c:o,...a}};continue}const i=RD(n.directory);e.d[r]=i}return e}function rz(t){let e="";for(const r of t)e+=String.fromCharCode(r);return e}var fu;(function(t){t.UncaughtException="PREVIEW_UNCAUGHT_EXCEPTION",t.UnhandledRejection="PREVIEW_UNHANDLED_REJECTION",t.ConsoleError="PREVIEW_CONSOLE_ERROR"})(fu||(fu={}));var nz=Object.defineProperty,iz=(t,e)=>{for(var r in e)nz(t,r,{get:e[r],enumerable:!0})},An={};iz(An,{createEndpoint:()=>PD,expose:()=>sw,proxy:()=>BD,proxyMarker:()=>nw,releaseProxy:()=>ID,transfer:()=>MD,transferHandlers:()=>iw,windowEndpoint:()=>cz,wrap:()=>LD});var nw=Symbol("Comlink.proxy"),PD=Symbol("Comlink.endpoint"),ID=Symbol("Comlink.releaseProxy"),Zb=Symbol("Comlink.thrown"),DD=t=>typeof t=="object"&&t!==null||typeof t=="function",sz={canHandle:t=>DD(t)&&t[nw],serialize(t){const{port1:e,port2:r}=new MessageChannel;return sw(t,e),[r,[r]]},deserialize(t){return t.start(),LD(t)}},oz={canHandle:t=>DD(t)&&Zb in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},iw=new Map([["proxy",sz],["throw",oz]]);function sw(t,e=self){e.addEventListener("message",function r(n){if(!n||!n.data)return;const{id:i,type:s,path:o}=Object.assign({path:[]},n.data),a=(n.data.argumentList||[]).map(Co);let l;try{const c=o.slice(0,-1).reduce((h,f)=>h[f],t),u=o.reduce((h,f)=>h[f],t);switch(s){case 0:l=u;break;case 1:c[o.slice(-1)[0]]=Co(n.data.value),l=!0;break;case 2:l=u.apply(c,a);break;case 3:{const h=new u(...a);l=BD(h)}break;case 4:{const{port1:h,port2:f}=new MessageChannel;sw(t,f),l=MD(h,[h])}break;case 5:l=void 0;break}}catch(c){l={value:c,[Zb]:0}}Promise.resolve(l).catch(c=>({value:c,[Zb]:0})).then(c=>{const[u,h]=ow(c);e.postMessage(Object.assign(Object.assign({},u),{id:i}),h),s===5&&(e.removeEventListener("message",r),OD(e))})}),e.start&&e.start()}function az(t){return t.constructor.name==="MessagePort"}function OD(t){az(t)&&t.close()}function LD(t,e){return Jb(t,[],e)}function Xf(t){if(t)throw new Error("Proxy has been released and is not useable")}function Jb(t,e=[],r=function(){}){let n=!1;const i=new Proxy(r,{get(s,o){if(Xf(n),o===ID)return()=>La(t,{type:5,path:e.map(a=>a.toString())}).then(()=>{OD(t),n=!0});if(o==="then"){if(e.length===0)return{then:()=>i};const a=La(t,{type:0,path:e.map(l=>l.toString())}).then(Co);return a.then.bind(a)}return Jb(t,[...e,o])},set(s,o,a){Xf(n);const[l,c]=ow(a);return La(t,{type:1,path:[...e,o].map(u=>u.toString()),value:l},c).then(Co)},apply(s,o,a){Xf(n);const l=e[e.length-1];if(l===PD)return La(t,{type:4}).then(Co);if(l==="bind")return Jb(t,e.slice(0,-1));const[c,u]=Kx(a);return La(t,{type:2,path:e.map(h=>h.toString()),argumentList:c},u).then(Co)},construct(s,o){Xf(n);const[a,l]=Kx(o);return La(t,{type:3,path:e.map(c=>c.toString()),argumentList:a},l).then(Co)}});return i}function lz(t){return Array.prototype.concat.apply([],t)}function Kx(t){const e=t.map(ow);return[e.map(r=>r[0]),lz(e.map(r=>r[1]))]}var ND=new WeakMap;function MD(t,e){return ND.set(t,e),t}function BD(t){return Object.assign(t,{[nw]:!0})}function cz(t,e=self,r="*"){return{postMessage:(n,i)=>t.postMessage(n,r,i),addEventListener:e.addEventListener.bind(e),removeEventListener:e.removeEventListener.bind(e)}}function ow(t){for(const[e,r]of iw)if(r.canHandle(t)){const[n,i]=r.serialize(t);return[{type:3,name:e,value:n},i]}return[{type:0,value:t},ND.get(t)||[]]}function Co(t){switch(t.type){case 3:return iw.get(t.name).deserialize(t.value);case 0:return t.value}}function La(t,e,r){return new Promise(n=>{const i=uz();t.addEventListener("message",function s(o){!o.data||!o.data.id||o.data.id!==i||(t.removeEventListener("message",s),n(o.data))}),t.start&&t.start(),t.postMessage(Object.assign({id:i},e),r)})}function uz(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}const hz=[fu.ConsoleError,fu.UncaughtException,fu.UnhandledRejection];function fz(t){return!(t==null||typeof t!="object"||!("type"in t)||!hz.includes(t.type))}let Qf=null,Zf=null,z0={};const dz=new TextDecoder,pz=new TextEncoder;class Do{_instance;_runtimeInfo;fs;internal;static _instance=null;_tornDown=!1;_unsubscribeFromTokenChangedListener=()=>{};constructor(e,r,n){this._instance=e,this._runtimeInfo=n,this.fs=new wz(r),this.internal=new mz(e)}async spawn(e,r,n){let i=[];Array.isArray(r)?i=r:n=r;let s,o=new ReadableStream;if(n?.output!==!1){const _=W0();s=_.push,o=_.stream}let a,l,c,u;if(l=new ReadableStream,u=new ReadableStream,n?.stdout){const _=W0();a=_.push,l=_.stream}if(n?.stderr){const _=W0();c=_.push,u=_.stream}const h=tp(V0(s)),f=tp(V0(a)),d=tp(V0(c)),g=await this._instance.run({command:e,args:i,cwd:n?.cwd,env:n?.env,terminal:n?.terminal},f,d,h);return new vz(g,o,l,u)}on(e,r){if(e==="preview-message"){const s=r;r=o=>{fz(o)&&s(o)}}const{listener:n,subscribe:i}=e1(r);return i(this._instance.on(e,An.proxy(n)))}mount(e,r){const n=e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):pz.encode(JSON.stringify(RD(e)));return this._instance.loadFiles(An.transfer(n,[n.buffer]),{mountPoints:r?.mountPoint})}get path(){return this._runtimeInfo.path}get workdir(){return this._runtimeInfo.cwd}teardown(){if(this._tornDown)throw new Error("WebContainer already torn down");this._tornDown=!0,this._unsubscribeFromTokenChangedListener(),this.fs._teardown(),this._instance.teardown(),this._instance[An.releaseProxy](),Do._instance===this&&(Do._instance=null)}static async boot(e={}){const{workdirName:r}=e;if(window.crossOriginIsolated&&e.coep==="none"&&console.warn(`A Cross-Origin-Embedder-Policy header is required in cross origin isolated environments.
Set the 'coep' option to 'require-corp'.`),r?.includes("/")||r===".."||r===".")throw new Error("workdirName should be a valid folder name");for(;Qf;)await Qf;if(Do._instance)throw new Error("Only a single WebContainer instance can be booted");const n=Ez(e);Qf=n.catch(()=>{});try{const i=await n;return Do._instance=i,i}finally{Qf=null}}}class mz{_instance;constructor(e){this._instance=e}watchPaths(e,r){const{listener:n,subscribe:i}=e1(r);return i(this._instance.watchPaths(e,An.proxy(n)))}getProcesses(){return this._instance.getProcesses()}onProcessesRemove(e){const{listener:r,subscribe:n}=e1(e);return n(this._instance.onProcessesRemove(An.proxy(r)))}serialize(e,r){return this._instance.serialize(e,r)}}const gz=1,_z=2;class bz{name;_type;constructor(e,r){this.name=e,this._type=r}isFile(){return this._type===gz}isDirectory(){return this._type===_z}}class yz{_apiClient;_path;_options;_listener;_wrappedListener;_watcher;_closed=!1;constructor(e,r,n,i){this._apiClient=e,this._path=r,this._options=n,this._listener=i,this._apiClient._watchers.add(this),this._wrappedListener=(s,o)=>{this._listener&&!this._closed&&this._listener(s,o)},this._apiClient._fs.watch(this._path,this._options,tp(this._wrappedListener)).then(s=>{this._watcher=s,this._closed&&this._teardown()}).catch(console.error)}close(){this._closed||(this._closed=!0,this._apiClient._watchers.delete(this),this._teardown())}_teardown(){this._watcher?.close().finally(()=>{this._watcher?.[An.releaseProxy]()})}}class vz{output;input;exit;_process;stdout;stderr;constructor(e,r,n,i){this.output=r,this._process=e,this.input=new WritableStream({write:s=>{this._getProcess()?.write(s).catch(()=>{})}}),this.exit=this._onExit(),this.stdout=n,this.stderr=i}kill(){this._getProcess()?.kill()}resize(e){this._getProcess()?.resize(e)}async _onExit(){try{return await this._process.onExit}finally{this._process?.[An.releaseProxy](),this._process=null}}_getProcess(){return this._process==null&&console.warn("This process already exited"),this._process}}class wz{_fs;_watchers=new Set([]);constructor(e){this._fs=e}rm(...e){return this._fs.rm(...e)}async readFile(e,r){return await this._fs.readFile(e,r)}async rename(e,r){return await this._fs.rename(e,r)}async writeFile(e,r,n){if(r instanceof Uint8Array){const i=r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength);r=An.transfer(new Uint8Array(i),[i])}await this._fs.writeFile(e,r,n)}async readdir(e,r){const n=await this._fs.readdir(e,r);return xz(n)||Tz(n)?n:n.map(s=>new bz(s.name,s["Symbol(type)"]))}async mkdir(e,r){return await this._fs.mkdir(e,r)}watch(e,r,n){return typeof r=="function"&&(n=r,r=null),new yz(this,e,r,n)}_teardown(){this._fs[An.releaseProxy]();for(const e of this._watchers)e.close()}}async function Ez(t){const{serverPromise:e}=Sz(t),n=await(await e).build({host:window.location.host,version:"1.3.0-internal.10",workdirName:t.workdirName,forwardPreviewErrors:t.forwardPreviewErrors}),i=await n.fs(),s=await n.runtimeInfo();return new Do(n,i,s)}function V0(t){if(t!=null)return e=>{e instanceof Uint8Array?t(dz.decode(e)):e==null&&t(null)}}function tp(t){if(t!=null)return An.proxy(t)}function Sz(t){if(Zf!=null)return t.coep!==z0.coep&&(console.warn(`Attempting to boot WebContainer with 'coep: ${t.coep}'`),console.warn(`First boot had 'coep: ${z0.coep}', new settings will not take effect!`)),{serverPromise:Zf};const e=document.createElement("iframe");e.style.display="none",e.setAttribute("allow","cross-origin-isolated");const r=Cz();t.coep&&r.searchParams.set("coep",t.coep),e.src=r.toString();const{origin:n}=r;return z0={...t},Zf=new Promise(i=>{const s=o=>{if(o.origin!==n)return;const{data:a}=o;if(a.type==="init"){i(An.wrap(o.ports[0]));return}if(a.type==="warning"){console[a.level].call(console,a.message);return}};window.addEventListener("message",s)}),document.body.insertBefore(e,null),{serverPromise:Zf}}function xz(t){return typeof t[0]=="string"}function Tz(t){return t[0]instanceof Uint8Array}function Cz(){const t=new URL(tz.editorOrigin);return t.pathname="/headless",t.searchParams.set("version","1.3.0-internal.10"),t}function W0(){let t=null;return{stream:new ReadableStream({start(n){t=n}}),push:n=>{n!=null?t?.enqueue(n):(t?.close(),t=null)}}}function e1(t){let e=!1,r=()=>{};return{subscribe(i){return i.then(s=>{r=s,e&&r()}),()=>{e=!0,r()}},listener:(...i)=>{e||t(...i)}}}function kz(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var FD={exports:{}},Vt=FD.exports={},di,pi;function t1(){throw new Error("setTimeout has not been defined")}function r1(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?di=setTimeout:di=t1}catch{di=t1}try{typeof clearTimeout=="function"?pi=clearTimeout:pi=r1}catch{pi=r1}})();function HD(t){if(di===setTimeout)return setTimeout(t,0);if((di===t1||!di)&&setTimeout)return di=setTimeout,setTimeout(t,0);try{return di(t,0)}catch{try{return di.call(null,t,0)}catch{return di.call(this,t,0)}}}function Az(t){if(pi===clearTimeout)return clearTimeout(t);if((pi===r1||!pi)&&clearTimeout)return pi=clearTimeout,clearTimeout(t);try{return pi(t)}catch{try{return pi.call(null,t)}catch{return pi.call(this,t)}}}var Zi=[],ul=!1,Oo,rp=-1;function Rz(){!ul||!Oo||(ul=!1,Oo.length?Zi=Oo.concat(Zi):rp=-1,Zi.length&&UD())}function UD(){if(!ul){var t=HD(Rz);ul=!0;for(var e=Zi.length;e;){for(Oo=Zi,Zi=[];++rp<e;)Oo&&Oo[rp].run();rp=-1,e=Zi.length}Oo=null,ul=!1,Az(t)}}Vt.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Zi.push(new jD(t,e)),Zi.length===1&&!ul&&HD(UD)};function jD(t,e){this.fun=t,this.array=e}jD.prototype.run=function(){this.fun.apply(null,this.array)};Vt.title="browser";Vt.browser=!0;Vt.env={};Vt.argv=[];Vt.version="";Vt.versions={};function gs(){}Vt.on=gs;Vt.addListener=gs;Vt.once=gs;Vt.off=gs;Vt.removeListener=gs;Vt.removeAllListeners=gs;Vt.emit=gs;Vt.prependListener=gs;Vt.prependOnceListener=gs;Vt.listeners=function(t){return[]};Vt.binding=function(t){throw new Error("process.binding is not supported")};Vt.cwd=function(){return"/"};Vt.chdir=function(t){throw new Error("process.chdir is not supported")};Vt.umask=function(){return 0};var Pz=FD.exports;const Ft=kz(Pz);function ti(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function Yx(t,e){for(var r="",n=0,i=-1,s=0,o,a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var l=r.lastIndexOf("/");if(l!==r.length-1){l===-1?(r="",n=0):(r=r.slice(0,l),n=r.length-1-r.lastIndexOf("/")),i=a,s=0;continue}}else if(r.length===2||r.length===1){r="",n=0,i=a,s=0;continue}}e&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+="/"+t.slice(i+1,a):r=t.slice(i+1,a),n=a-i-1;i=a,s=0}else o===46&&s!==-1?++s:s=-1}return r}function Iz(t,e){var r=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||"");return r?r===e.root?r+n:r+t+n:n}var hl={resolve:function(){for(var e="",r=!1,n,i=arguments.length-1;i>=-1&&!r;i--){var s;i>=0?s=arguments[i]:(n===void 0&&(n=Ft.cwd()),s=n),ti(s),s.length!==0&&(e=s+"/"+e,r=s.charCodeAt(0)===47)}return e=Yx(e,!r),r?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(ti(e),e.length===0)return".";var r=e.charCodeAt(0)===47,n=e.charCodeAt(e.length-1)===47;return e=Yx(e,!r),e.length===0&&!r&&(e="."),e.length>0&&n&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return ti(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,r=0;r<arguments.length;++r){var n=arguments[r];ti(n),n.length>0&&(e===void 0?e=n:e+="/"+n)}return e===void 0?".":hl.normalize(e)},relative:function(e,r){if(ti(e),ti(r),e===r||(e=hl.resolve(e),r=hl.resolve(r),e===r))return"";for(var n=1;n<e.length&&e.charCodeAt(n)===47;++n);for(var i=e.length,s=i-n,o=1;o<r.length&&r.charCodeAt(o)===47;++o);for(var a=r.length,l=a-o,c=s<l?s:l,u=-1,h=0;h<=c;++h){if(h===c){if(l>c){if(r.charCodeAt(o+h)===47)return r.slice(o+h+1);if(h===0)return r.slice(o+h)}else s>c&&(e.charCodeAt(n+h)===47?u=h:h===0&&(u=0));break}var f=e.charCodeAt(n+h),d=r.charCodeAt(o+h);if(f!==d)break;f===47&&(u=h)}var g="";for(h=n+u+1;h<=i;++h)(h===i||e.charCodeAt(h)===47)&&(g.length===0?g+="..":g+="/..");return g.length>0?g+r.slice(o+u):(o+=u,r.charCodeAt(o)===47&&++o,r.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(ti(e),e.length===0)return".";for(var r=e.charCodeAt(0),n=r===47,i=-1,s=!0,o=e.length-1;o>=1;--o)if(r=e.charCodeAt(o),r===47){if(!s){i=o;break}}else s=!1;return i===-1?n?"/":".":n&&i===1?"//":e.slice(0,i)},basename:function(e,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');ti(e);var n=0,i=-1,s=!0,o;if(r!==void 0&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var a=r.length-1,l=-1;for(o=e.length-1;o>=0;--o){var c=e.charCodeAt(o);if(c===47){if(!s){n=o+1;break}}else l===-1&&(s=!1,l=o+1),a>=0&&(c===r.charCodeAt(a)?--a===-1&&(i=o):(a=-1,i=l))}return n===i?i=l:i===-1&&(i=e.length),e.slice(n,i)}else{for(o=e.length-1;o>=0;--o)if(e.charCodeAt(o)===47){if(!s){n=o+1;break}}else i===-1&&(s=!1,i=o+1);return i===-1?"":e.slice(n,i)}},extname:function(e){ti(e);for(var r=-1,n=0,i=-1,s=!0,o=0,a=e.length-1;a>=0;--a){var l=e.charCodeAt(a);if(l===47){if(!s){n=a+1;break}continue}i===-1&&(s=!1,i=a+1),l===46?r===-1?r=a:o!==1&&(o=1):r!==-1&&(o=-1)}return r===-1||i===-1||o===0||o===1&&r===i-1&&r===n+1?"":e.slice(r,i)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return Iz("/",e)},parse:function(e){ti(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return r;var n=e.charCodeAt(0),i=n===47,s;i?(r.root="/",s=1):s=0;for(var o=-1,a=0,l=-1,c=!0,u=e.length-1,h=0;u>=s;--u){if(n=e.charCodeAt(u),n===47){if(!c){a=u+1;break}continue}l===-1&&(c=!1,l=u+1),n===46?o===-1?o=u:h!==1&&(h=1):o!==-1&&(h=-1)}return o===-1||l===-1||h===0||h===1&&o===l-1&&o===a+1?l!==-1&&(a===0&&i?r.base=r.name=e.slice(1,l):r.base=r.name=e.slice(a,l)):(a===0&&i?(r.name=e.slice(1,o),r.base=e.slice(1,l)):(r.name=e.slice(a,o),r.base=e.slice(a,l)),r.ext=e.slice(o,l)),a>0?r.dir=e.slice(0,a-1):i&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};hl.posix=hl;var Re=hl;function Fn(t){throw new Error(`Unreachable: ${t}`)}const mo=Fr("ActionRunner");class Dz{#t;#r=Promise.resolve();#e;runnerId=Qr(`${Date.now()}`);actions=ba({});constructor(e,r){this.#t=e,this.#e=r}addAction(e){const{actionId:r}=e;if(this.actions.get()[r])return;const s=new AbortController;this.actions.setKey(r,{...e.action,status:"pending",executed:!1,abort:()=>{s.abort(),this.#o(r,{status:"aborted"})},abortSignal:s.signal}),this.#r.then(()=>{this.#o(r,{status:"running"})})}async runAction(e,r=!1){const{actionId:n}=e,i=this.actions.get()[n];i||Fn(`Action ${n} not found`),!i.executed&&(r&&i.type!=="file"||(this.#o(n,{...i,...e.action,executed:!r}),this.#r=this.#r.then(()=>this.#n(n,r)).catch(s=>{console.error("Action failed:",s)}),await this.#r))}async#n(e,r=!1){const n=this.actions.get()[e];this.#o(e,{status:"running"});try{switch(n.type){case"shell":{await this.#s(n);break}case"file":{await this.#a(n);break}case"start":{this.#i(n).then(()=>this.#o(e,{status:"complete"})).catch(()=>this.#o(e,{status:"failed",error:"Action failed"})),await new Promise(i=>setTimeout(i,2e3));return}}this.#o(e,{status:r?"running":n.abortSignal.aborted?"aborted":"complete"})}catch(i){throw this.#o(e,{status:"failed",error:"Action failed"}),mo.error(`[${n.type}]:Action failed

`,i),i}}async#s(e){e.type!=="shell"&&Fn("Expected shell action");const r=this.#e();await r.ready(),(!r||!r.terminal||!r.process)&&Fn("Shell terminal not found");const n=await r.executeCommand(this.runnerId.get(),e.content);if(mo.debug(`${e.type} Shell Response: [exit code:${n?.exitCode}]`),n?.exitCode!=0)throw new Error("Failed To Execute Shell Command")}async#i(e){e.type!=="start"&&Fn("Expected shell action"),this.#e||Fn("Shell terminal not found");const r=this.#e();await r.ready(),(!r||!r.terminal||!r.process)&&Fn("Shell terminal not found");const n=await r.executeCommand(this.runnerId.get(),e.content);if(mo.debug(`${e.type} Shell Response: [exit code:${n?.exitCode}]`),n?.exitCode!=0)throw new Error("Failed To Start Application");return n}async#a(e){e.type!=="file"&&Fn("Expected file action");const r=await this.#t;let n=Re.dirname(e.filePath);if(n=n.replace(/\/+$/g,""),n!==".")try{await r.fs.mkdir(n,{recursive:!0}),mo.debug("Created folder",n)}catch(i){mo.error(`Failed to create folder

`,i)}try{await r.fs.writeFile(e.filePath,e.content),mo.debug(`File written ${e.filePath}`)}catch(i){mo.error(`Failed to write file

`,i)}}#o(e,r){const n=this.actions.get();this.actions.setKey(e,{...n[e],...r})}}/*! js-cookie v3.0.5 | MIT */function Jf(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}var Oz={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function n1(t,e){function r(i,s,o){if(!(typeof document>"u")){o=Jf({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var l in o)o[l]&&(a+="; "+l,o[l]!==!0&&(a+="="+o[l].split(";")[0]));return document.cookie=i+"="+t.write(s,i)+a}}function n(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var s=document.cookie?document.cookie.split("; "):[],o={},a=0;a<s.length;a++){var l=s[a].split("="),c=l.slice(1).join("=");try{var u=decodeURIComponent(l[0]);if(o[u]=t.read(c,u),i===u)break}catch{}}return i?o[i]:o}}return Object.create({set:r,get:n,remove:function(i,s){r(i,"",Jf({},s,{expires:-1}))},withAttributes:function(i){return n1(this.converter,Jf({},this.attributes,i))},withConverter:function(i){return n1(Jf({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var ct=n1(Oz,{path:"/"}),Lz={};const $D="project",Vh=`/home/${$D}`,Nz=/^\[Model: (.*?)\]\n\n/,Mz=/\[Provider: (.*?)\]\n\n/,Bz="claude-3-5-sonnet-latest",G0="cachedPrompt",aw=Fr("Constants"),ec=[{name:"Anthropic",staticModels:[{name:"claude-3-5-sonnet-latest",label:"Claude 3.5 Sonnet (new)",provider:"Anthropic",maxTokenAllowed:8e3},{name:"claude-3-5-sonnet-20240620",label:"Claude 3.5 Sonnet (old)",provider:"Anthropic",maxTokenAllowed:8e3},{name:"claude-3-5-haiku-latest",label:"Claude 3.5 Haiku (new)",provider:"Anthropic",maxTokenAllowed:8e3},{name:"claude-3-opus-latest",label:"Claude 3 Opus",provider:"Anthropic",maxTokenAllowed:8e3},{name:"claude-3-sonnet-20240229",label:"Claude 3 Sonnet",provider:"Anthropic",maxTokenAllowed:8e3},{name:"claude-3-haiku-20240307",label:"Claude 3 Haiku",provider:"Anthropic",maxTokenAllowed:8e3}],getApiKeyLink:"https://console.anthropic.com/settings/keys"},{name:"Ollama",staticModels:[],getDynamicModels:jz,getApiKeyLink:"https://ollama.com/download",labelForGetApiKey:"Download Ollama",icon:"i-ph:cloud-arrow-down"},{name:"OpenAILike",staticModels:[],getDynamicModels:$z},{name:"Cohere",staticModels:[{name:"command-r-plus-08-2024",label:"Command R plus Latest",provider:"Cohere",maxTokenAllowed:4096},{name:"command-r-08-2024",label:"Command R Latest",provider:"Cohere",maxTokenAllowed:4096},{name:"command-r-plus",label:"Command R plus",provider:"Cohere",maxTokenAllowed:4096},{name:"command-r",label:"Command R",provider:"Cohere",maxTokenAllowed:4096},{name:"command",label:"Command",provider:"Cohere",maxTokenAllowed:4096},{name:"command-nightly",label:"Command Nightly",provider:"Cohere",maxTokenAllowed:4096},{name:"command-light",label:"Command Light",provider:"Cohere",maxTokenAllowed:4096},{name:"command-light-nightly",label:"Command Light Nightly",provider:"Cohere",maxTokenAllowed:4096},{name:"c4ai-aya-expanse-8b",label:"c4AI Aya Expanse 8b",provider:"Cohere",maxTokenAllowed:4096},{name:"c4ai-aya-expanse-32b",label:"c4AI Aya Expanse 32b",provider:"Cohere",maxTokenAllowed:4096}],getApiKeyLink:"https://dashboard.cohere.com/api-keys"},{name:"OpenRouter",staticModels:[{name:"gpt-4o",label:"GPT-4o",provider:"OpenAI",maxTokenAllowed:8e3},{name:"anthropic/claude-3.5-sonnet",label:"Anthropic: Claude 3.5 Sonnet (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"anthropic/claude-3-haiku",label:"Anthropic: Claude 3 Haiku (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"deepseek/deepseek-coder",label:"Deepseek-Coder V2 236B (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"google/gemini-flash-1.5",label:"Google Gemini Flash 1.5 (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"google/gemini-pro-1.5",label:"Google Gemini Pro 1.5 (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"x-ai/grok-beta",label:"xAI Grok Beta (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"mistralai/mistral-nemo",label:"OpenRouter Mistral Nemo (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"qwen/qwen-110b-chat",label:"OpenRouter Qwen 110b Chat (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"cohere/command",label:"Cohere Command (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:4096}],getDynamicModels:zz,getApiKeyLink:"https://openrouter.ai/settings/keys"},{name:"Google",staticModels:[{name:"gemini-1.5-flash-latest",label:"Gemini 1.5 Flash",provider:"Google",maxTokenAllowed:8192},{name:"gemini-2.0-flash-exp",label:"Gemini 2.0 Flash",provider:"Google",maxTokenAllowed:8192},{name:"gemini-1.5-flash-002",label:"Gemini 1.5 Flash-002",provider:"Google",maxTokenAllowed:8192},{name:"gemini-1.5-flash-8b",label:"Gemini 1.5 Flash-8b",provider:"Google",maxTokenAllowed:8192},{name:"gemini-1.5-pro-latest",label:"Gemini 1.5 Pro",provider:"Google",maxTokenAllowed:8192},{name:"gemini-1.5-pro-002",label:"Gemini 1.5 Pro-002",provider:"Google",maxTokenAllowed:8192},{name:"gemini-exp-1206",label:"Gemini exp-1206",provider:"Google",maxTokenAllowed:8192}],getApiKeyLink:"https://aistudio.google.com/app/apikey"},{name:"Groq",staticModels:[{name:"llama-3.1-70b-versatile",label:"Llama 3.1 70b (Groq)",provider:"Groq",maxTokenAllowed:8e3},{name:"llama-3.1-8b-instant",label:"Llama 3.1 8b (Groq)",provider:"Groq",maxTokenAllowed:8e3},{name:"llama-3.2-11b-vision-preview",label:"Llama 3.2 11b (Groq)",provider:"Groq",maxTokenAllowed:8e3},{name:"llama-3.2-3b-preview",label:"Llama 3.2 3b (Groq)",provider:"Groq",maxTokenAllowed:8e3},{name:"llama-3.2-1b-preview",label:"Llama 3.2 1b (Groq)",provider:"Groq",maxTokenAllowed:8e3}],getApiKeyLink:"https://console.groq.com/keys"},{name:"HuggingFace",staticModels:[{name:"Qwen/Qwen2.5-Coder-32B-Instruct",label:"Qwen2.5-Coder-32B-Instruct (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"01-ai/Yi-1.5-34B-Chat",label:"Yi-1.5-34B-Chat (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"codellama/CodeLlama-34b-Instruct-hf",label:"CodeLlama-34b-Instruct (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"NousResearch/Hermes-3-Llama-3.1-8B",label:"Hermes-3-Llama-3.1-8B (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"Qwen/Qwen2.5-Coder-32B-Instruct",label:"Qwen2.5-Coder-32B-Instruct (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"Qwen/Qwen2.5-72B-Instruct",label:"Qwen2.5-72B-Instruct (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"meta-llama/Llama-3.1-70B-Instruct",label:"Llama-3.1-70B-Instruct (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"meta-llama/Llama-3.1-405B",label:"Llama-3.1-405B (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"01-ai/Yi-1.5-34B-Chat",label:"Yi-1.5-34B-Chat (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"codellama/CodeLlama-34b-Instruct-hf",label:"CodeLlama-34b-Instruct (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"NousResearch/Hermes-3-Llama-3.1-8B",label:"Hermes-3-Llama-3.1-8B (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3}],getApiKeyLink:"https://huggingface.co/settings/tokens"},{name:"OpenAI",staticModels:[{name:"gpt-4o-mini",label:"GPT-4o Mini",provider:"OpenAI",maxTokenAllowed:8e3},{name:"gpt-4-turbo",label:"GPT-4 Turbo",provider:"OpenAI",maxTokenAllowed:8e3},{name:"gpt-4",label:"GPT-4",provider:"OpenAI",maxTokenAllowed:8e3},{name:"gpt-3.5-turbo",label:"GPT-3.5 Turbo",provider:"OpenAI",maxTokenAllowed:8e3}],getApiKeyLink:"https://platform.openai.com/api-keys"},{name:"xAI",staticModels:[{name:"grok-beta",label:"xAI Grok Beta",provider:"xAI",maxTokenAllowed:8e3}],getApiKeyLink:"https://docs.x.ai/docs/quickstart#creating-an-api-key"},{name:"Deepseek",staticModels:[{name:"deepseek-coder",label:"Deepseek-Coder",provider:"Deepseek",maxTokenAllowed:8e3},{name:"deepseek-chat",label:"Deepseek-Chat",provider:"Deepseek",maxTokenAllowed:8e3}],getApiKeyLink:"https://platform.deepseek.com/apiKeys"},{name:"Mistral",staticModels:[{name:"open-mistral-7b",label:"Mistral 7B",provider:"Mistral",maxTokenAllowed:8e3},{name:"open-mixtral-8x7b",label:"Mistral 8x7B",provider:"Mistral",maxTokenAllowed:8e3},{name:"open-mixtral-8x22b",label:"Mistral 8x22B",provider:"Mistral",maxTokenAllowed:8e3},{name:"open-codestral-mamba",label:"Codestral Mamba",provider:"Mistral",maxTokenAllowed:8e3},{name:"open-mistral-nemo",label:"Mistral Nemo",provider:"Mistral",maxTokenAllowed:8e3},{name:"ministral-8b-latest",label:"Mistral 8B",provider:"Mistral",maxTokenAllowed:8e3},{name:"mistral-small-latest",label:"Mistral Small",provider:"Mistral",maxTokenAllowed:8e3},{name:"codestral-latest",label:"Codestral",provider:"Mistral",maxTokenAllowed:8e3},{name:"mistral-large-latest",label:"Mistral Large Latest",provider:"Mistral",maxTokenAllowed:8e3}],getApiKeyLink:"https://console.mistral.ai/api-keys/"},{name:"LMStudio",staticModels:[],getDynamicModels:Vz,getApiKeyLink:"https://lmstudio.ai/",labelForGetApiKey:"Get LMStudio",icon:"i-ph:cloud-arrow-down"},{name:"Together",getDynamicModels:Hz,staticModels:[{name:"Qwen/Qwen2.5-Coder-32B-Instruct",label:"Qwen/Qwen2.5-Coder-32B-Instruct",provider:"Together",maxTokenAllowed:8e3},{name:"meta-llama/Llama-3.2-90B-Vision-Instruct-Turbo",label:"meta-llama/Llama-3.2-90B-Vision-Instruct-Turbo",provider:"Together",maxTokenAllowed:8e3},{name:"mistralai/Mixtral-8x7B-Instruct-v0.1",label:"Mixtral 8x7B Instruct",provider:"Together",maxTokenAllowed:8192}],getApiKeyLink:"https://api.together.xyz/settings/api-keys"}],Fz=ec[0],zD=ec.map(t=>t.staticModels).flat();let i1=[...zD];async function Hz(t,e){try{const r=e?.baseUrl||void 0||"",n="Together";if(!r)return[];let i="";return t&&t[n]&&(i=t[n]),i?(await(await fetch(`${r}/models`,{headers:{Authorization:`Bearer ${i}`}})).json()||[]).filter(l=>l.type=="chat").map(l=>({name:l.id,label:`${l.display_name} - in:$${l.pricing.input.toFixed(2)} out:$${l.pricing.output.toFixed(2)} - context ${Math.floor(l.context_length/1e3)}k`,provider:n,maxTokenAllowed:8e3})):[]}catch(r){return console.error("Error getting OpenAILike models:",r),[]}}const Uz=t=>{const e=t?.baseUrl||void 0||"http://localhost:11434";return typeof window<"u"?e:Lz.RUNNING_IN_DOCKER==="true"?e.replace("localhost","host.docker.internal"):e};async function jz(t,e){try{const r=Uz(e);return(await(await fetch(`${r}/api/tags`)).json()).models.map(s=>({name:s.name,label:`${s.name} (${s.details.parameter_size})`,provider:"Ollama",maxTokenAllowed:8e3}))}catch(r){return aw.warn("Failed to get Ollama models: ",r.message||""),[]}}async function $z(t,e){try{const r=e?.baseUrl||void 0||"";if(!r)return[];let n="";return t&&t.OpenAILike&&(n=t.OpenAILike),(await(await fetch(`${r}/models`,{headers:{Authorization:`Bearer ${n}`}})).json()).data.map(o=>({name:o.id,label:o.id,provider:"OpenAILike"}))}catch(r){return console.error("Error getting OpenAILike models:",r),[]}}async function zz(){return(await(await fetch("https://openrouter.ai/api/v1/models",{headers:{"Content-Type":"application/json"}})).json()).data.sort((e,r)=>e.name.localeCompare(r.name)).map(e=>({name:e.id,label:`${e.name} - in:$${(e.pricing.prompt*1e6).toFixed(2)} out:$${(e.pricing.completion*1e6).toFixed(2)} - context ${Math.floor(e.context_length/1e3)}k`,provider:"OpenRouter",maxTokenAllowed:8e3}))}async function Vz(t,e){if(typeof window>"u")return[];try{const r=e?.baseUrl||void 0||"http://localhost:1234";return(await(await fetch(`${r}/v1/models`)).json()).data.map(s=>({name:s.id,label:s.id,provider:"LMStudio"}))}catch(r){return aw.warn("Failed to get LMStudio models: ",r.message||""),[]}}async function Wz(t){let e={};try{const r=ct.get("apiKeys");if(r){const n=JSON.parse(r);typeof n=="object"&&n!==null&&(e=n)}}catch(r){aw.warn(`Failed to fetch apikeys from cookies: ${r?.message}`)}return i1=[...(await Promise.all(ec.filter(r=>!!r.getDynamicModels).map(r=>r.getDynamicModels(e,t?.[r.name])))).flat(),...zD],i1}let ko=new Promise(()=>{});ko=Promise.resolve().then(()=>Do.boot({workdirName:$D})).then(t=>t);class Gz{#t;selectedFile=Qr();documents=ba({});currentDocument=dv([this.documents,this.selectedFile],(e,r)=>{if(r)return e[r]});constructor(e){this.#t=e}setDocuments(e){const r=this.documents.value;this.documents.set(Object.fromEntries(Object.entries(e).map(([n,i])=>{if(i===void 0||i.type==="folder")return;const s=r?.[n];return[n,{value:i.content,filePath:n,scroll:s?.scroll}]}).filter(Boolean)))}setSelectedFile(e){this.selectedFile.set(e)}updateScrollPosition(e,r){const i=this.documents.get()[e];i&&this.documents.setKey(e,{...i,scroll:r})}updateFile(e,r){const i=this.documents.get()[e];if(!i)return;i.value!==r&&this.documents.setKey(e,{...i,value:r})}}function np(t,e){if(!t)return null;const r="utf8",n="binary",i=e?.chunkLength??24;let s=e?.chunkBegin??0;if(e?.chunkBegin==null){let o=np(t,{chunkLength:i,chunkBegin:s});return o===r&&(s=Math.max(0,Math.floor(t.length/2)-i),o=np(t,{chunkLength:i,chunkBegin:s}),o===r&&(s=Math.max(0,t.length-i),o=np(t,{chunkLength:i,chunkBegin:s}))),o}else{if(s=qz(t,s),s===-1)return n;const o=Kz(t,Math.min(t.length,s+i));if(o>t.length)return n;const a=t.toString(r,s,o);for(let l=0;l<a.length;++l){const c=a.charCodeAt(l);if(c===65533||c<=8)return n}return r}}function qz(t,e){if(e===0)return 0;if(!Yz(t[e]))return e;let r=e-3;return r>=0&&fl(t[r])||(r=e-2,r>=0&&(fl(t[r])||jp(t[r])))||(r=e-1,r>=0&&(fl(t[r])||jp(t[r])||VD(t[r])))?r:-1}function Kz(t,e){if(e===t.length)return e;let r=e-3;if(r>=0&&fl(t[r]))return e+1;if(r=e-2,r>=0){if(fl(t[r]))return e+2;if(jp(t[r]))return e+1}if(r=e-1,r>=0){if(fl(t[r]))return e+3;if(jp(t[r]))return e+2;if(VD(t[r]))return e+1}return e}function fl(t){return t>>3===30}function jp(t){return t>>4===14}function VD(t){return t>>5===6}function Yz(t){return t>>6===2}function Xz(t,e){let r,n=[],i=Promise.resolve();const s=()=>{r=self.setTimeout(async()=>{await i,n.length>0&&(i=Promise.resolve(e(n))),r=void 0,n=[]},t)};return(...o)=>{n.push(o),r||s()}}function co(){}co.prototype={diff:function(e,r){var n,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.callback;typeof i=="function"&&(s=i,i={}),this.options=i;var o=this;function a(v){return s?(setTimeout(function(){s(void 0,v)},0),!0):v}e=this.castInput(e),r=this.castInput(r),e=this.removeEmpty(this.tokenize(e)),r=this.removeEmpty(this.tokenize(r));var l=r.length,c=e.length,u=1,h=l+c;i.maxEditLength&&(h=Math.min(h,i.maxEditLength));var f=(n=i.timeout)!==null&&n!==void 0?n:1/0,d=Date.now()+f,g=[{oldPos:-1,lastComponent:void 0}],_=this.extractCommon(g[0],r,e,0);if(g[0].oldPos+1>=c&&_+1>=l)return a([{value:this.join(r),count:r.length}]);var m=-1/0,p=1/0;function b(){for(var v=Math.max(m,-u);v<=Math.min(p,u);v+=2){var w=void 0,S=g[v-1],x=g[v+1];S&&(g[v-1]=void 0);var E=!1;if(x){var T=x.oldPos-v;E=x&&0<=T&&T<l}var k=S&&S.oldPos+1<c;if(!E&&!k){g[v]=void 0;continue}if(!k||E&&S.oldPos+1<x.oldPos?w=o.addToPath(x,!0,void 0,0):w=o.addToPath(S,void 0,!0,1),_=o.extractCommon(w,r,e,v),w.oldPos+1>=c&&_+1>=l)return a(Qz(o,w.lastComponent,r,e,o.useLongestToken));g[v]=w,w.oldPos+1>=c&&(p=Math.min(p,v-1)),_+1>=l&&(m=Math.max(m,v+1))}u++}if(s)(function v(){setTimeout(function(){if(u>h||Date.now()>d)return s();b()||v()},0)})();else for(;u<=h&&Date.now()<=d;){var y=b();if(y)return y}},addToPath:function(e,r,n,i){var s=e.lastComponent;return s&&s.added===r&&s.removed===n?{oldPos:e.oldPos+i,lastComponent:{count:s.count+1,added:r,removed:n,previousComponent:s.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:r,removed:n,previousComponent:s}}},extractCommon:function(e,r,n,i){for(var s=r.length,o=n.length,a=e.oldPos,l=a-i,c=0;l+1<s&&a+1<o&&this.equals(r[l+1],n[a+1]);)l++,a++,c++;return c&&(e.lastComponent={count:c,previousComponent:e.lastComponent}),e.oldPos=a,l},equals:function(e,r){return this.options.comparator?this.options.comparator(e,r):e===r||this.options.ignoreCase&&e.toLowerCase()===r.toLowerCase()},removeEmpty:function(e){for(var r=[],n=0;n<e.length;n++)e[n]&&r.push(e[n]);return r},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};function Qz(t,e,r,n,i){for(var s=[],o;e;)s.push(e),o=e.previousComponent,delete e.previousComponent,e=o;s.reverse();for(var a=0,l=s.length,c=0,u=0;a<l;a++){var h=s[a];if(h.removed){if(h.value=t.join(n.slice(u,u+h.count)),u+=h.count,a&&s[a-1].added){var d=s[a-1];s[a-1]=s[a],s[a]=d}}else{if(!h.added&&i){var f=r.slice(c,c+h.count);f=f.map(function(_,m){var p=n[u+m];return p.length>_.length?p:_}),h.value=t.join(f)}else h.value=t.join(r.slice(c,c+h.count));c+=h.count,h.added||(u+=h.count)}}var g=s[l-1];return l>1&&typeof g.value=="string"&&(g.added||g.removed)&&t.equals("",g.value)&&(s[l-2].value+=g.value,s.pop()),s}var Xx=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,Qx=/\S/,WD=new co;WD.equals=function(t,e){return this.options.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e||this.options.ignoreWhitespace&&!Qx.test(t)&&!Qx.test(e)};WD.tokenize=function(t){for(var e=t.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),r=0;r<e.length-1;r++)!e[r+1]&&e[r+2]&&Xx.test(e[r])&&Xx.test(e[r+2])&&(e[r]+=e[r+2],e.splice(r+1,2),r--);return e};var lw=new co;lw.tokenize=function(t){this.options.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var e=[],r=t.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var n=0;n<r.length;n++){var i=r[n];n%2&&!this.options.newlineIsToken?e[e.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),e.push(i))}return e};function Zz(t,e,r){return lw.diff(t,e,r)}var Jz=new co;Jz.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var eV=new co;eV.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function ip(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ip=function(e){return typeof e}:ip=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ip(t)}function q0(t){return tV(t)||rV(t)||nV(t)||iV()}function tV(t){if(Array.isArray(t))return s1(t)}function rV(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function nV(t,e){if(t){if(typeof t=="string")return s1(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s1(t,e)}}function s1(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function iV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var sV=Object.prototype.toString,Uu=new co;Uu.useLongestToken=!0;Uu.tokenize=lw.tokenize;Uu.castInput=function(t){var e=this.options,r=e.undefinedReplacement,n=e.stringifyReplacer,i=n===void 0?function(s,o){return typeof o>"u"?r:o}:n;return typeof t=="string"?t:JSON.stringify(o1(t,null,null,i),i,"  ")};Uu.equals=function(t,e){return co.prototype.equals.call(Uu,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function o1(t,e,r,n,i){e=e||[],r=r||[],n&&(t=n(i,t));var s;for(s=0;s<e.length;s+=1)if(e[s]===t)return r[s];var o;if(sV.call(t)==="[object Array]"){for(e.push(t),o=new Array(t.length),r.push(o),s=0;s<t.length;s+=1)o[s]=o1(t[s],e,r,n,i);return e.pop(),r.pop(),o}if(t&&t.toJSON&&(t=t.toJSON()),ip(t)==="object"&&t!==null){e.push(t),o={},r.push(o);var a=[],l;for(l in t)t.hasOwnProperty(l)&&a.push(l);for(a.sort(),s=0;s<a.length;s+=1)l=a[s],o[l]=o1(t[l],e,r,n,l);e.pop(),r.pop()}else o=t;return o}var a1=new co;a1.tokenize=function(t){return t.slice()};a1.join=a1.removeEmpty=function(t){return t};function oV(t,e,r,n,i,s,o){o||(o={}),typeof o.context>"u"&&(o.context=4);var a=Zz(r,n,o);if(!a)return;a.push({value:"",lines:[]});function l(p){return p.map(function(b){return" "+b})}for(var c=[],u=0,h=0,f=[],d=1,g=1,_=function(b){var y=a[b],v=y.lines||y.value.replace(/\n$/,"").split(`
`);if(y.lines=v,y.added||y.removed){var w;if(!u){var S=a[b-1];u=d,h=g,S&&(f=o.context>0?l(S.lines.slice(-o.context)):[],u-=f.length,h-=f.length)}(w=f).push.apply(w,q0(v.map(function(A){return(y.added?"+":"-")+A}))),y.added?g+=v.length:d+=v.length}else{if(u)if(v.length<=o.context*2&&b<a.length-2){var x;(x=f).push.apply(x,q0(l(v)))}else{var E,T=Math.min(v.length,o.context);(E=f).push.apply(E,q0(l(v.slice(0,T))));var k={oldStart:u,oldLines:d-u+T,newStart:h,newLines:g-h+T,lines:f};if(b>=a.length-2&&v.length<=o.context){var B=/\n$/.test(r),P=/\n$/.test(n),O=v.length==0&&f.length>k.oldLines;!B&&O&&r.length>0&&f.splice(k.oldLines,0,"\\ No newline at end of file"),(!B&&!O||!P)&&f.push("\\ No newline at end of file")}c.push(k),u=0,h=0,f=[]}d+=v.length,g+=v.length}},m=0;m<a.length;m++)_(m);return{oldFileName:t,newFileName:e,oldHeader:i,newHeader:s,hunks:c}}function GD(t){if(Array.isArray(t))return t.map(GD).join(`
`);var e=[];t.oldFileName==t.newFileName&&e.push("Index: "+t.oldFileName),e.push("==================================================================="),e.push("--- "+t.oldFileName+(typeof t.oldHeader>"u"?"":"	"+t.oldHeader)),e.push("+++ "+t.newFileName+(typeof t.newHeader>"u"?"":"	"+t.newHeader));for(var r=0;r<t.hunks.length;r++){var n=t.hunks[r];n.oldLines===0&&(n.oldStart-=1),n.newLines===0&&(n.newStart-=1),e.push("@@ -"+n.oldStart+","+n.oldLines+" +"+n.newStart+","+n.newLines+" @@"),e.push.apply(e,n.lines)}return e.join(`
`)+`
`}function aV(t,e,r,n,i,s,o){return GD(oV(t,e,r,n,i,s,o))}function lV(t,e){const r={};let n=!1;for(const[i,s]of e){const o=t[i];if(o?.type!=="file")continue;const a=cV(i,s,o.content);a&&(n=!0,a.length>o.content.length?r[i]={type:"file",content:o.content}:r[i]={type:"diff",content:a})}if(n)return r}function cV(t,e,r){let n=aV(t,t,e,r);const i=`--- ${t}
+++ ${t}
`,s=n.indexOf(i);if(s>=0&&(n=n.slice(s+i.length)),n!=="")return n}const uV=new RegExp(`^${Vh}/`);function K0(t){return t.replace(uV,"")}const Zx=Fr("FilesStore"),hV=new TextDecoder("utf8",{fatal:!0});class fV{#t;#r=0;#e=new Map;files=ba({});get filesCount(){return this.#r}constructor(e){this.#t=e,this.#n()}getFile(e){const r=this.files.get()[e];if(r?.type==="file")return r}getFileModifications(){return lV(this.files.get(),this.#e)}resetFileModifications(){this.#e.clear()}async saveFile(e,r){const n=await this.#t;try{const i=Re.relative(n.workdir,e);if(!i)throw new Error(`EINVAL: invalid file path, write '${i}'`);const s=this.getFile(e)?.content;s||Fn("Expected content to be defined"),await n.fs.writeFile(i,r),this.#e.has(e)||this.#e.set(e,s),this.files.setKey(e,{type:"file",content:r,isBinary:!1}),Zx.info("File updated")}catch(i){throw Zx.error(`Failed to update file content

`,i),i}}async#n(){(await this.#t).internal.watchPaths({include:[`${Vh}/**`],exclude:["**/node_modules",".git"],includeContent:!0},Xz(100,this.#s.bind(this)))}#s(e){const r=e.flat(2);for(const{type:n,path:i,buffer:s}of r){const o=i.replace(/\/+$/g,"");switch(n){case"add_dir":{this.files.setKey(o,{type:"folder"});break}case"remove_dir":{this.files.setKey(o,void 0);for(const[a]of Object.entries(this.files))a.startsWith(o)&&this.files.setKey(a,void 0);break}case"add_file":case"change":{n==="add_file"&&this.#r++;let a="";const l=dV(s);l||(a=this.#i(s)),this.files.setKey(o,{type:"file",content:a,isBinary:l});break}case"remove_file":{this.#r--,this.files.setKey(o,void 0);break}}}}#i(e){if(!e||e.byteLength===0)return"";try{return hV.decode(e)}catch(r){return console.log(r),""}}}function dV(t){return t===void 0?!1:np(pV(t),{chunkLength:100})==="binary"}function pV(t){return AD.from(t.buffer,t.byteOffset,t.byteLength)}class mV{#t=new Map;#r;previews=Qr([]);constructor(e){this.#r=e,this.#e()}async#e(){(await this.#r).on("port",(r,n,i)=>{let s=this.#t.get(r);if(n==="close"&&s){this.#t.delete(r),this.previews.set(this.previews.get().filter(a=>a.port!==r));return}const o=this.previews.get();s||(s={port:r,ready:n==="open",baseUrl:i},this.#t.set(r,s),o.push(s)),s.ready=n==="open",s.baseUrl=i,this.previews.set([...o])})}}function qD(){if(typeof Promise.withResolvers=="function")return Promise.withResolvers();let t,e;const r=new Promise((n,i)=>{t=n,e=i});return{resolve:t,reject:e,promise:r}}async function gV(t,e){const r=[],n=await t.spawn("/bin/jsh",["--osc",...r],{terminal:{cols:e.cols??80,rows:e.rows??15}}),i=n.input.getWriter(),s=n.output,o=qD();let a=!1;return s.pipeTo(new WritableStream({write(l){if(!a){const[,c]=l.match(/\x1b\]654;([^\x07]+)\x07/)||[];c==="interactive"&&(a=!0,o.resolve())}e.write(l)}})),e.onData(l=>{a&&i.write(l)}),await o.promise,n}class _V{#t;#r;#e;#n;#s;executionState=Qr();#i;#a;constructor(){this.#r=new Promise(e=>{this.#t=e})}ready(){return this.#r}async init(e,r){this.#e=e,this.#n=r;const{process:n,output:i}=await this.newBoltShellProcess(e,r);this.#s=n,this.#i=i.getReader(),await this.waitTillOscCode("interactive"),this.#t?.()}get terminal(){return this.#n}get process(){return this.#s}async executeCommand(e,r){if(!this.process||!this.terminal)return;const n=this.executionState.get();this.terminal.input(""),n&&n.executionPrms&&await n.executionPrms,this.terminal.input(r.trim()+`
`);const i=this.getCurrentExecutionResult();this.executionState.set({sessionId:e,active:!0,executionPrms:i});const s=await i;return this.executionState.set({sessionId:e,active:!1}),s}async newBoltShellProcess(e,r){const n=[],i=await e.spawn("/bin/jsh",["--osc",...n],{terminal:{cols:r.cols??80,rows:r.rows??15}}),s=i.input.getWriter();this.#a=s;const[o,a]=i.output.tee(),l=qD();let c=!1;return a.pipeTo(new WritableStream({write(u){if(!c){const[,h]=u.match(/\x1b\]654;([^\x07]+)\x07/)||[];h==="interactive"&&(c=!0,l.resolve())}r.write(u)}})),r.onData(u=>{c&&s.write(u)}),await l.promise,{process:i,output:o}}async getCurrentExecutionResult(){const{output:e,exitCode:r}=await this.waitTillOscCode("exit");return{output:e,exitCode:r}}async waitTillOscCode(e){let r="",n=0;if(!this.#i)return{output:r,exitCode:n};const i=this.#i;for(;;){const{value:s,done:o}=await i.read();if(o)break;const a=s||"";r+=a;const[,l,,,c]=a.match(/\x1b\]654;([^\x07=]+)=?((-?\d+):(\d+))?\x07/)||[];if(l==="exit"&&(n=parseInt(c,10)),l===e)break}return{output:r,exitCode:n}}}function bV(){return new _V}const KD="\x1B[0m",yV={reset:KD,clear:"\x1B[g",red:"\x1B[1;31m"},Jx={red:t=>`${yV.red}${t}${KD}`};class vV{#t;#r=[];#e=bV();showTerminal=Qr(!0);constructor(e){this.#t=e}get boltTerminal(){return this.#e}toggleTerminal(e){this.showTerminal.set(e!==void 0?e:!this.showTerminal.get())}async attachBoltTerminal(e){try{const r=await this.#t;await this.#e.init(r,e)}catch(r){e.write(Jx.red(`Failed to spawn bolt shell

`)+r.message);return}}async attachTerminal(e){try{const r=await gV(await this.#t,e);this.#r.push({terminal:e,process:r})}catch(r){e.write(Jx.red(`Failed to spawn shell

`)+r.message);return}}onTerminalResize(e,r){for(const{process:n}of this.#r)n.resize({cols:e,rows:r})}}function ed(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var YD={exports:{}};(function(t,e){(function(r){t.exports=r()})(function(){return function r(n,i,s){function o(c,u){if(!i[c]){if(!n[c]){var h=typeof ed=="function"&&ed;if(!u&&h)return h(c,!0);if(a)return a(c,!0);var f=new Error("Cannot find module '"+c+"'");throw f.code="MODULE_NOT_FOUND",f}var d=i[c]={exports:{}};n[c][0].call(d.exports,function(g){var _=n[c][1][g];return o(_||g)},d,d.exports,r,n,i,s)}return i[c].exports}for(var a=typeof ed=="function"&&ed,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(r,n,i){var s=r("./utils"),o=r("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var c,u,h,f,d,g,_,m=[],p=0,b=l.length,y=b,v=s.getTypeOf(l)!=="string";p<l.length;)y=b-p,h=v?(c=l[p++],u=p<b?l[p++]:0,p<b?l[p++]:0):(c=l.charCodeAt(p++),u=p<b?l.charCodeAt(p++):0,p<b?l.charCodeAt(p++):0),f=c>>2,d=(3&c)<<4|u>>4,g=1<y?(15&u)<<2|h>>6:64,_=2<y?63&h:64,m.push(a.charAt(f)+a.charAt(d)+a.charAt(g)+a.charAt(_));return m.join("")},i.decode=function(l){var c,u,h,f,d,g,_=0,m=0,p="data:";if(l.substr(0,p.length)===p)throw new Error("Invalid base64 input, it looks like a data url.");var b,y=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&y--,l.charAt(l.length-2)===a.charAt(64)&&y--,y%1!=0)throw new Error("Invalid base64 input, bad content length.");for(b=o.uint8array?new Uint8Array(0|y):new Array(0|y);_<l.length;)c=a.indexOf(l.charAt(_++))<<2|(f=a.indexOf(l.charAt(_++)))>>4,u=(15&f)<<4|(d=a.indexOf(l.charAt(_++)))>>2,h=(3&d)<<6|(g=a.indexOf(l.charAt(_++))),b[m++]=c,d!==64&&(b[m++]=u),g!==64&&(b[m++]=h);return b}},{"./support":30,"./utils":32}],2:[function(r,n,i){var s=r("./external"),o=r("./stream/DataWorker"),a=r("./stream/Crc32Probe"),l=r("./stream/DataLengthProbe");function c(u,h,f,d,g){this.compressedSize=u,this.uncompressedSize=h,this.crc32=f,this.compression=d,this.compressedContent=g}c.prototype={getContentWorker:function(){var u=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),h=this;return u.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(u,h,f){return u.pipe(new a).pipe(new l("uncompressedSize")).pipe(h.compressWorker(f)).pipe(new l("compressedSize")).withStreamInfo("compression",h)},n.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,n,i){var s=r("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,n,i){var s=r("./utils"),o=function(){for(var a,l=[],c=0;c<256;c++){a=c;for(var u=0;u<8;u++)a=1&a?3988292384^a>>>1:a>>>1;l[c]=a}return l}();n.exports=function(a,l){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?function(c,u,h,f){var d=o,g=f+h;c^=-1;for(var _=f;_<g;_++)c=c>>>8^d[255&(c^u[_])];return-1^c}(0|l,a,a.length,0):function(c,u,h,f){var d=o,g=f+h;c^=-1;for(var _=f;_<g;_++)c=c>>>8^d[255&(c^u.charCodeAt(_))];return-1^c}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(r,n,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(r,n,i){var s=null;s=typeof Promise<"u"?Promise:r("lie"),n.exports={Promise:s}},{lie:37}],7:[function(r,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=r("pako"),a=r("./utils"),l=r("./stream/GenericWorker"),c=s?"uint8array":"array";function u(h,f){l.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=f,this.meta={}}i.magic="\b\0",a.inherits(u,l),u.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(c,h.data),!1)},u.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(f){h.push({data:f,meta:h.meta})}},i.compressWorker=function(h){return new u("Deflate",h)},i.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,n,i){function s(d,g){var _,m="";for(_=0;_<g;_++)m+=String.fromCharCode(255&d),d>>>=8;return m}function o(d,g,_,m,p,b){var y,v,w=d.file,S=d.compression,x=b!==c.utf8encode,E=a.transformTo("string",b(w.name)),T=a.transformTo("string",c.utf8encode(w.name)),k=w.comment,B=a.transformTo("string",b(k)),P=a.transformTo("string",c.utf8encode(k)),O=T.length!==w.name.length,A=P.length!==k.length,$="",te="",Q="",ee=w.dir,L=w.date,M={crc32:0,compressedSize:0,uncompressedSize:0};g&&!_||(M.crc32=d.crc32,M.compressedSize=d.compressedSize,M.uncompressedSize=d.uncompressedSize);var U=0;g&&(U|=8),x||!O&&!A||(U|=2048);var j=0,H=0;ee&&(j|=16),p==="UNIX"?(H=798,j|=function(re,ge){var X=re;return re||(X=ge?16893:33204),(65535&X)<<16}(w.unixPermissions,ee)):(H=20,j|=function(re){return 63&(re||0)}(w.dosPermissions)),y=L.getUTCHours(),y<<=6,y|=L.getUTCMinutes(),y<<=5,y|=L.getUTCSeconds()/2,v=L.getUTCFullYear()-1980,v<<=4,v|=L.getUTCMonth()+1,v<<=5,v|=L.getUTCDate(),O&&(te=s(1,1)+s(u(E),4)+T,$+="up"+s(te.length,2)+te),A&&(Q=s(1,1)+s(u(B),4)+P,$+="uc"+s(Q.length,2)+Q);var Z="";return Z+=`
\0`,Z+=s(U,2),Z+=S.magic,Z+=s(y,2),Z+=s(v,2),Z+=s(M.crc32,4),Z+=s(M.compressedSize,4),Z+=s(M.uncompressedSize,4),Z+=s(E.length,2),Z+=s($.length,2),{fileRecord:h.LOCAL_FILE_HEADER+Z+E+$,dirRecord:h.CENTRAL_FILE_HEADER+s(H,2)+Z+s(B.length,2)+"\0\0\0\0"+s(j,4)+s(m,4)+E+$+B}}var a=r("../utils"),l=r("../stream/GenericWorker"),c=r("../utf8"),u=r("../crc32"),h=r("../signature");function f(d,g,_,m){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=g,this.zipPlatform=_,this.encodeFileName=m,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(f,l),f.prototype.push=function(d){var g=d.meta.percent||0,_=this.entriesCount,m=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,l.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:_?(g+100*(_-m-1))/_:100}}))},f.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var g=this.streamFiles&&!d.file.dir;if(g){var _=o(d,g,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:_.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(d){this.accumulate=!1;var g=this.streamFiles&&!d.file.dir,_=o(d,g,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(_.dirRecord),g)this.push({data:function(m){return h.DATA_DESCRIPTOR+s(m.crc32,4)+s(m.compressedSize,4)+s(m.uncompressedSize,4)}(d),meta:{percent:100}});else for(this.push({data:_.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var d=this.bytesWritten,g=0;g<this.dirRecords.length;g++)this.push({data:this.dirRecords[g],meta:{percent:100}});var _=this.bytesWritten-d,m=function(p,b,y,v,w){var S=a.transformTo("string",w(v));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(p,2)+s(p,2)+s(b,4)+s(y,4)+s(S.length,2)+S}(this.dirRecords.length,_,d,this.zipComment,this.encodeFileName);this.push({data:m,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(d){this._sources.push(d);var g=this;return d.on("data",function(_){g.processChunk(_)}),d.on("end",function(){g.closedSource(g.previous.streamInfo),g._sources.length?g.prepareNextSource():g.end()}),d.on("error",function(_){g.error(_)}),this},f.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(d){var g=this._sources;if(!l.prototype.error.call(this,d))return!1;for(var _=0;_<g.length;_++)try{g[_].error(d)}catch{}return!0},f.prototype.lock=function(){l.prototype.lock.call(this);for(var d=this._sources,g=0;g<d.length;g++)d[g].lock()},n.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,n,i){var s=r("../compressions"),o=r("./ZipFileWorker");i.generateWorker=function(a,l,c){var u=new o(l.streamFiles,c,l.platform,l.encodeFileName),h=0;try{a.forEach(function(f,d){h++;var g=function(b,y){var v=b||y,w=s[v];if(!w)throw new Error(v+" is not a valid compression method !");return w}(d.options.compression,l.compression),_=d.options.compressionOptions||l.compressionOptions||{},m=d.dir,p=d.date;d._compressWorker(g,_).withStreamInfo("file",{name:f,dir:m,date:p,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(u)}),u.entriesCount=h}catch(f){u.error(f)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,n,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(s.prototype=r("./object")).loadAsync=r("./load"),s.support=r("./support"),s.defaults=r("./defaults"),s.version="3.10.1",s.loadAsync=function(o,a){return new s().loadAsync(o,a)},s.external=r("./external"),n.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,n,i){var s=r("./utils"),o=r("./external"),a=r("./utf8"),l=r("./zipEntries"),c=r("./stream/Crc32Probe"),u=r("./nodejsUtils");function h(f){return new o.Promise(function(d,g){var _=f.decompressed.getContentWorker().pipe(new c);_.on("error",function(m){g(m)}).on("end",function(){_.streamInfo.crc32!==f.decompressed.crc32?g(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}n.exports=function(f,d){var g=this;return d=s.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),u.isNode&&u.isStream(f)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",f,!0,d.optimizedBinaryString,d.base64).then(function(_){var m=new l(d);return m.load(_),m}).then(function(_){var m=[o.Promise.resolve(_)],p=_.files;if(d.checkCRC32)for(var b=0;b<p.length;b++)m.push(h(p[b]));return o.Promise.all(m)}).then(function(_){for(var m=_.shift(),p=m.files,b=0;b<p.length;b++){var y=p[b],v=y.fileNameStr,w=s.resolve(y.fileNameStr);g.file(w,y.decompressed,{binary:!0,optimizedBinaryString:!0,date:y.date,dir:y.dir,comment:y.fileCommentStr.length?y.fileCommentStr:null,unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions,createFolders:d.createFolders}),y.dir||(g.file(w).unsafeOriginalName=v)}return m.zipComment.length&&(g.comment=m.zipComment),g})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,n,i){var s=r("../utils"),o=r("../stream/GenericWorker");function a(l,c){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}s.inherits(a,o),a.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(u){c.push({data:u,meta:{percent:0}})}).on("error",function(u){c.isPaused?this.generatedError=u:c.error(u)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,n,i){var s=r("readable-stream").Readable;function o(a,l,c){s.call(this,l),this._helper=a;var u=this;a.on("data",function(h,f){u.push(h)||u._helper.pause(),c&&c(f)}).on("error",function(h){u.emit("error",h)}).on("end",function(){u.push(null)})}r("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},n.exports=o},{"../utils":32,"readable-stream":16}],14:[function(r,n,i){n.exports={isNode:typeof Ne<"u",newBufferFrom:function(s,o){if(Ne.from&&Ne.from!==Uint8Array.from)return Ne.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Ne(s,o)},allocBuffer:function(s){if(Ne.alloc)return Ne.alloc(s);var o=new Ne(s);return o.fill(0),o},isBuffer:function(s){return Ne.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(r,n,i){function s(w,S,x){var E,T=a.getTypeOf(S),k=a.extend(x||{},u);k.date=k.date||new Date,k.compression!==null&&(k.compression=k.compression.toUpperCase()),typeof k.unixPermissions=="string"&&(k.unixPermissions=parseInt(k.unixPermissions,8)),k.unixPermissions&&16384&k.unixPermissions&&(k.dir=!0),k.dosPermissions&&16&k.dosPermissions&&(k.dir=!0),k.dir&&(w=p(w)),k.createFolders&&(E=m(w))&&b.call(this,E,!0);var B=T==="string"&&k.binary===!1&&k.base64===!1;x&&x.binary!==void 0||(k.binary=!B),(S instanceof h&&S.uncompressedSize===0||k.dir||!S||S.length===0)&&(k.base64=!1,k.binary=!0,S="",k.compression="STORE",T="string");var P=null;P=S instanceof h||S instanceof l?S:g.isNode&&g.isStream(S)?new _(w,S):a.prepareContent(w,S,k.binary,k.optimizedBinaryString,k.base64);var O=new f(w,P,k);this.files[w]=O}var o=r("./utf8"),a=r("./utils"),l=r("./stream/GenericWorker"),c=r("./stream/StreamHelper"),u=r("./defaults"),h=r("./compressedObject"),f=r("./zipObject"),d=r("./generate"),g=r("./nodejsUtils"),_=r("./nodejs/NodejsStreamInputAdapter"),m=function(w){w.slice(-1)==="/"&&(w=w.substring(0,w.length-1));var S=w.lastIndexOf("/");return 0<S?w.substring(0,S):""},p=function(w){return w.slice(-1)!=="/"&&(w+="/"),w},b=function(w,S){return S=S!==void 0?S:u.createFolders,w=p(w),this.files[w]||s.call(this,w,null,{dir:!0,createFolders:S}),this.files[w]};function y(w){return Object.prototype.toString.call(w)==="[object RegExp]"}var v={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(w){var S,x,E;for(S in this.files)E=this.files[S],(x=S.slice(this.root.length,S.length))&&S.slice(0,this.root.length)===this.root&&w(x,E)},filter:function(w){var S=[];return this.forEach(function(x,E){w(x,E)&&S.push(E)}),S},file:function(w,S,x){if(arguments.length!==1)return w=this.root+w,s.call(this,w,S,x),this;if(y(w)){var E=w;return this.filter(function(k,B){return!B.dir&&E.test(k)})}var T=this.files[this.root+w];return T&&!T.dir?T:null},folder:function(w){if(!w)return this;if(y(w))return this.filter(function(T,k){return k.dir&&w.test(T)});var S=this.root+w,x=b.call(this,S),E=this.clone();return E.root=x.name,E},remove:function(w){w=this.root+w;var S=this.files[w];if(S||(w.slice(-1)!=="/"&&(w+="/"),S=this.files[w]),S&&!S.dir)delete this.files[w];else for(var x=this.filter(function(T,k){return k.name.slice(0,w.length)===w}),E=0;E<x.length;E++)delete this.files[x[E].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(w){var S,x={};try{if((x=a.extend(w||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=x.type.toLowerCase(),x.compression=x.compression.toUpperCase(),x.type==="binarystring"&&(x.type="string"),!x.type)throw new Error("No output type specified.");a.checkSupport(x.type),x.platform!=="darwin"&&x.platform!=="freebsd"&&x.platform!=="linux"&&x.platform!=="sunos"||(x.platform="UNIX"),x.platform==="win32"&&(x.platform="DOS");var E=x.comment||this.comment||"";S=d.generateWorker(this,x,E)}catch(T){(S=new l("error")).error(T)}return new c(S,x.type||"string",x.mimeType)},generateAsync:function(w,S){return this.generateInternalStream(w).accumulate(S)},generateNodeStream:function(w,S){return(w=w||{}).type||(w.type="nodebuffer"),this.generateInternalStream(w).toNodejsStream(S)}};n.exports=v},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,n,i){n.exports=r("stream")},{stream:void 0}],17:[function(r,n,i){var s=r("./DataReader");function o(a){s.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}r("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),c=a.charCodeAt(1),u=a.charCodeAt(2),h=a.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===l&&this.data[f+1]===c&&this.data[f+2]===u&&this.data[f+3]===h)return f-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),c=a.charCodeAt(1),u=a.charCodeAt(2),h=a.charCodeAt(3),f=this.readData(4);return l===f[0]&&c===f[1]&&u===f[2]&&h===f[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=o},{"../utils":32,"./DataReader":18}],18:[function(r,n,i){var s=r("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,c=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=a,c},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},n.exports=o},{"../utils":32}],19:[function(r,n,i){var s=r("./Uint8ArrayReader");function o(a){s.call(this,a)}r("../utils").inherits(o,s),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,n,i){var s=r("./DataReader");function o(a){s.call(this,a)}r("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=o},{"../utils":32,"./DataReader":18}],21:[function(r,n,i){var s=r("./ArrayReader");function o(a){s.call(this,a)}r("../utils").inherits(o,s),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(r,n,i){var s=r("../utils"),o=r("../support"),a=r("./ArrayReader"),l=r("./StringReader"),c=r("./NodeBufferReader"),u=r("./Uint8ArrayReader");n.exports=function(h){var f=s.getTypeOf(h);return s.checkSupport(f),f!=="string"||o.uint8array?f==="nodebuffer"?new c(h):o.uint8array?new u(s.transformTo("uint8array",h)):new a(s.transformTo("array",h)):new l(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,n,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,n,i){var s=r("./GenericWorker"),o=r("../utils");function a(l){s.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,s),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},n.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(r,n,i){var s=r("./GenericWorker"),o=r("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(a,s),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},n.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,n,i){var s=r("../utils"),o=r("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(a,o),a.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}o.prototype.processChunk.call(this,l)},n.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(r,n,i){var s=r("../utils"),o=r("./GenericWorker");function a(l){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(u){c.dataIsReady=!0,c.data=u,c.max=u&&u.length||0,c.type=s.getTypeOf(u),c.isPaused||c._tickAndRepeat()},function(u){c.error(u)})}s.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(r,n,i){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},n.exports=s},{}],29:[function(r,n,i){var s=r("../utils"),o=r("./ConvertWorker"),a=r("./GenericWorker"),l=r("../base64"),c=r("../support"),u=r("../external"),h=null;if(c.nodestream)try{h=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(g,_){return new u.Promise(function(m,p){var b=[],y=g._internalType,v=g._outputType,w=g._mimeType;g.on("data",function(S,x){b.push(S),_&&_(x)}).on("error",function(S){b=[],p(S)}).on("end",function(){try{var S=function(x,E,T){switch(x){case"blob":return s.newBlob(s.transformTo("arraybuffer",E),T);case"base64":return l.encode(E);default:return s.transformTo(x,E)}}(v,function(x,E){var T,k=0,B=null,P=0;for(T=0;T<E.length;T++)P+=E[T].length;switch(x){case"string":return E.join("");case"array":return Array.prototype.concat.apply([],E);case"uint8array":for(B=new Uint8Array(P),T=0;T<E.length;T++)B.set(E[T],k),k+=E[T].length;return B;case"nodebuffer":return Ne.concat(E);default:throw new Error("concat : unsupported type '"+x+"'")}}(y,b),w);m(S)}catch(x){p(x)}b=[]}).resume()})}function d(g,_,m){var p=_;switch(_){case"blob":case"arraybuffer":p="uint8array";break;case"base64":p="string"}try{this._internalType=p,this._outputType=_,this._mimeType=m,s.checkSupport(p),this._worker=g.pipe(new o(p)),g.lock()}catch(b){this._worker=new a("error"),this._worker.error(b)}}d.prototype={accumulate:function(g){return f(this,g)},on:function(g,_){var m=this;return g==="data"?this._worker.on(g,function(p){_.call(m,p.data,p.meta)}):this._worker.on(g,function(){s.delay(_,arguments,m)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(g){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},g)}},n.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,n,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Ne<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!r("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(r,n,i){for(var s=r("./utils"),o=r("./support"),a=r("./nodejsUtils"),l=r("./stream/GenericWorker"),c=new Array(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;c[254]=c[254]=1;function h(){l.call(this,"utf-8 decode"),this.leftOver=null}function f(){l.call(this,"utf-8 encode")}i.utf8encode=function(d){return o.nodebuffer?a.newBufferFrom(d,"utf-8"):function(g){var _,m,p,b,y,v=g.length,w=0;for(b=0;b<v;b++)(64512&(m=g.charCodeAt(b)))==55296&&b+1<v&&(64512&(p=g.charCodeAt(b+1)))==56320&&(m=65536+(m-55296<<10)+(p-56320),b++),w+=m<128?1:m<2048?2:m<65536?3:4;for(_=o.uint8array?new Uint8Array(w):new Array(w),b=y=0;y<w;b++)(64512&(m=g.charCodeAt(b)))==55296&&b+1<v&&(64512&(p=g.charCodeAt(b+1)))==56320&&(m=65536+(m-55296<<10)+(p-56320),b++),m<128?_[y++]=m:(m<2048?_[y++]=192|m>>>6:(m<65536?_[y++]=224|m>>>12:(_[y++]=240|m>>>18,_[y++]=128|m>>>12&63),_[y++]=128|m>>>6&63),_[y++]=128|63&m);return _}(d)},i.utf8decode=function(d){return o.nodebuffer?s.transformTo("nodebuffer",d).toString("utf-8"):function(g){var _,m,p,b,y=g.length,v=new Array(2*y);for(_=m=0;_<y;)if((p=g[_++])<128)v[m++]=p;else if(4<(b=c[p]))v[m++]=65533,_+=b-1;else{for(p&=b===2?31:b===3?15:7;1<b&&_<y;)p=p<<6|63&g[_++],b--;1<b?v[m++]=65533:p<65536?v[m++]=p:(p-=65536,v[m++]=55296|p>>10&1023,v[m++]=56320|1023&p)}return v.length!==m&&(v.subarray?v=v.subarray(0,m):v.length=m),s.applyFromCharCode(v)}(d=s.transformTo(o.uint8array?"uint8array":"array",d))},s.inherits(h,l),h.prototype.processChunk=function(d){var g=s.transformTo(o.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var _=g;(g=new Uint8Array(_.length+this.leftOver.length)).set(this.leftOver,0),g.set(_,this.leftOver.length)}else g=this.leftOver.concat(g);this.leftOver=null}var m=function(b,y){var v;for((y=y||b.length)>b.length&&(y=b.length),v=y-1;0<=v&&(192&b[v])==128;)v--;return v<0||v===0?y:v+c[b[v]]>y?v:y}(g),p=g;m!==g.length&&(o.uint8array?(p=g.subarray(0,m),this.leftOver=g.subarray(m,g.length)):(p=g.slice(0,m),this.leftOver=g.slice(m,g.length))),this.push({data:i.utf8decode(p),meta:d.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=h,s.inherits(f,l),f.prototype.processChunk=function(d){this.push({data:i.utf8encode(d.data),meta:d.meta})},i.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,n,i){var s=r("./support"),o=r("./base64"),a=r("./nodejsUtils"),l=r("./external");function c(_){return _}function u(_,m){for(var p=0;p<_.length;++p)m[p]=255&_.charCodeAt(p);return m}r("setimmediate"),i.newBlob=function(_,m){i.checkSupport("blob");try{return new Blob([_],{type:m})}catch{try{var p=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return p.append(_),p.getBlob(m)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(_,m,p){var b=[],y=0,v=_.length;if(v<=p)return String.fromCharCode.apply(null,_);for(;y<v;)m==="array"||m==="nodebuffer"?b.push(String.fromCharCode.apply(null,_.slice(y,Math.min(y+p,v)))):b.push(String.fromCharCode.apply(null,_.subarray(y,Math.min(y+p,v)))),y+=p;return b.join("")},stringifyByChar:function(_){for(var m="",p=0;p<_.length;p++)m+=String.fromCharCode(_[p]);return m},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function f(_){var m=65536,p=i.getTypeOf(_),b=!0;if(p==="uint8array"?b=h.applyCanBeUsed.uint8array:p==="nodebuffer"&&(b=h.applyCanBeUsed.nodebuffer),b)for(;1<m;)try{return h.stringifyByChunk(_,p,m)}catch{m=Math.floor(m/2)}return h.stringifyByChar(_)}function d(_,m){for(var p=0;p<_.length;p++)m[p]=_[p];return m}i.applyFromCharCode=f;var g={};g.string={string:c,array:function(_){return u(_,new Array(_.length))},arraybuffer:function(_){return g.string.uint8array(_).buffer},uint8array:function(_){return u(_,new Uint8Array(_.length))},nodebuffer:function(_){return u(_,a.allocBuffer(_.length))}},g.array={string:f,array:c,arraybuffer:function(_){return new Uint8Array(_).buffer},uint8array:function(_){return new Uint8Array(_)},nodebuffer:function(_){return a.newBufferFrom(_)}},g.arraybuffer={string:function(_){return f(new Uint8Array(_))},array:function(_){return d(new Uint8Array(_),new Array(_.byteLength))},arraybuffer:c,uint8array:function(_){return new Uint8Array(_)},nodebuffer:function(_){return a.newBufferFrom(new Uint8Array(_))}},g.uint8array={string:f,array:function(_){return d(_,new Array(_.length))},arraybuffer:function(_){return _.buffer},uint8array:c,nodebuffer:function(_){return a.newBufferFrom(_)}},g.nodebuffer={string:f,array:function(_){return d(_,new Array(_.length))},arraybuffer:function(_){return g.nodebuffer.uint8array(_).buffer},uint8array:function(_){return d(_,new Uint8Array(_.length))},nodebuffer:c},i.transformTo=function(_,m){if(m=m||"",!_)return m;i.checkSupport(_);var p=i.getTypeOf(m);return g[p][_](m)},i.resolve=function(_){for(var m=_.split("/"),p=[],b=0;b<m.length;b++){var y=m[b];y==="."||y===""&&b!==0&&b!==m.length-1||(y===".."?p.pop():p.push(y))}return p.join("/")},i.getTypeOf=function(_){return typeof _=="string"?"string":Object.prototype.toString.call(_)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(_)?"nodebuffer":s.uint8array&&_ instanceof Uint8Array?"uint8array":s.arraybuffer&&_ instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(_){if(!s[_.toLowerCase()])throw new Error(_+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(_){var m,p,b="";for(p=0;p<(_||"").length;p++)b+="\\x"+((m=_.charCodeAt(p))<16?"0":"")+m.toString(16).toUpperCase();return b},i.delay=function(_,m,p){setImmediate(function(){_.apply(p||null,m||[])})},i.inherits=function(_,m){function p(){}p.prototype=m.prototype,_.prototype=new p},i.extend=function(){var _,m,p={};for(_=0;_<arguments.length;_++)for(m in arguments[_])Object.prototype.hasOwnProperty.call(arguments[_],m)&&p[m]===void 0&&(p[m]=arguments[_][m]);return p},i.prepareContent=function(_,m,p,b,y){return l.Promise.resolve(m).then(function(v){return s.blob&&(v instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(v))!==-1)&&typeof FileReader<"u"?new l.Promise(function(w,S){var x=new FileReader;x.onload=function(E){w(E.target.result)},x.onerror=function(E){S(E.target.error)},x.readAsArrayBuffer(v)}):v}).then(function(v){var w=i.getTypeOf(v);return w?(w==="arraybuffer"?v=i.transformTo("uint8array",v):w==="string"&&(y?v=o.decode(v):p&&b!==!0&&(v=function(S){return u(S,s.uint8array?new Uint8Array(S.length):new Array(S.length))}(v))),v):l.Promise.reject(new Error("Can't read the data of '"+_+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,n,i){var s=r("./reader/readerFor"),o=r("./utils"),a=r("./signature"),l=r("./zipEntry"),c=r("./support");function u(h){this.files=[],this.loadOptions=h}u.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(f)+", expected "+o.pretty(h)+")")}},isSignature:function(h,f){var d=this.reader.index;this.reader.setIndex(h);var g=this.reader.readString(4)===f;return this.reader.setIndex(d),g},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),f=c.uint8array?"uint8array":"array",d=o.transformTo(f,h);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,f,d,g=this.zip64EndOfCentralSize-44;0<g;)h=this.reader.readInt(2),f=this.reader.readInt(4),d=this.reader.readData(f),this.zip64ExtensibleData[h]={id:h,length:f,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,f;for(h=0;h<this.files.length;h++)f=this.files[h],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(h=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var f=h;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var g=f-d;if(0<g)this.isSignature(f,a.CENTRAL_FILE_HEADER)||(this.reader.zero=g);else if(g<0)throw new Error("Corrupted zip: missing "+Math.abs(g)+" bytes.")},prepareReader:function(h){this.reader=s(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,n,i){var s=r("./reader/readerFor"),o=r("./utils"),a=r("./compressedObject"),l=r("./crc32"),c=r("./utf8"),u=r("./compressions"),h=r("./support");function f(d,g){this.options=d,this.loadOptions=g}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var g,_;if(d.skip(22),this.fileNameLength=d.readInt(2),_=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(_),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((g=function(m){for(var p in u)if(Object.prototype.hasOwnProperty.call(u,p)&&u[p].magic===m)return u[p];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,g,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var g=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(g),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var g,_,m,p=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<p;)g=d.readInt(2),_=d.readInt(2),m=d.readData(_),this.extraFields[g]={id:g,length:_,value:m};d.setIndex(p)},handleUTF8:function(){var d=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(g!==null)this.fileNameStr=g;else{var _=o.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(_)}var m=this.findExtraFieldUnicodeComment();if(m!==null)this.fileCommentStr=m;else{var p=o.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(p)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var g=s(d.value);return g.readInt(1)!==1||l(this.fileName)!==g.readInt(4)?null:c.utf8decode(g.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var g=s(d.value);return g.readInt(1)!==1||l(this.fileComment)!==g.readInt(4)?null:c.utf8decode(g.readData(d.length-5))}return null}},n.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,n,i){function s(g,_,m){this.name=g,this.dir=m.dir,this.date=m.date,this.comment=m.comment,this.unixPermissions=m.unixPermissions,this.dosPermissions=m.dosPermissions,this._data=_,this._dataBinary=m.binary,this.options={compression:m.compression,compressionOptions:m.compressionOptions}}var o=r("./stream/StreamHelper"),a=r("./stream/DataWorker"),l=r("./utf8"),c=r("./compressedObject"),u=r("./stream/GenericWorker");s.prototype={internalStream:function(g){var _=null,m="string";try{if(!g)throw new Error("No output type specified.");var p=(m=g.toLowerCase())==="string"||m==="text";m!=="binarystring"&&m!=="text"||(m="string"),_=this._decompressWorker();var b=!this._dataBinary;b&&!p&&(_=_.pipe(new l.Utf8EncodeWorker)),!b&&p&&(_=_.pipe(new l.Utf8DecodeWorker))}catch(y){(_=new u("error")).error(y)}return new o(_,m,"")},async:function(g,_){return this.internalStream(g).accumulate(_)},nodeStream:function(g,_){return this.internalStream(g||"nodebuffer").toNodejsStream(_)},_compressWorker:function(g,_){if(this._data instanceof c&&this._data.compression.magic===g.magic)return this._data.getCompressedWorker();var m=this._decompressWorker();return this._dataBinary||(m=m.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(m,g,_)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof u?this._data:new a(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<h.length;d++)s.prototype[h[d]]=f;n.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,n,i){(function(s){var o,a,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var c=0,u=new l(g),h=s.document.createTextNode("");u.observe(h,{characterData:!0}),o=function(){h.data=c=++c%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var _=s.document.createElement("script");_.onreadystatechange=function(){g(),_.onreadystatechange=null,_.parentNode.removeChild(_),_=null},s.document.documentElement.appendChild(_)}:function(){setTimeout(g,0)};else{var f=new s.MessageChannel;f.port1.onmessage=g,o=function(){f.port2.postMessage(0)}}var d=[];function g(){var _,m;a=!0;for(var p=d.length;p;){for(m=d,d=[],_=-1;++_<p;)m[_]();p=d.length}a=!1}n.exports=function(_){d.push(_)!==1||a||o()}}).call(this,typeof Hn<"u"?Hn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,n,i){var s=r("immediate");function o(){}var a={},l=["REJECTED"],c=["FULFILLED"],u=["PENDING"];function h(p){if(typeof p!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,p!==o&&_(this,p)}function f(p,b,y){this.promise=p,typeof b=="function"&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),typeof y=="function"&&(this.onRejected=y,this.callRejected=this.otherCallRejected)}function d(p,b,y){s(function(){var v;try{v=b(y)}catch(w){return a.reject(p,w)}v===p?a.reject(p,new TypeError("Cannot resolve promise with itself")):a.resolve(p,v)})}function g(p){var b=p&&p.then;if(p&&(typeof p=="object"||typeof p=="function")&&typeof b=="function")return function(){b.apply(p,arguments)}}function _(p,b){var y=!1;function v(x){y||(y=!0,a.reject(p,x))}function w(x){y||(y=!0,a.resolve(p,x))}var S=m(function(){b(w,v)});S.status==="error"&&v(S.value)}function m(p,b){var y={};try{y.value=p(b),y.status="success"}catch(v){y.status="error",y.value=v}return y}(n.exports=h).prototype.finally=function(p){if(typeof p!="function")return this;var b=this.constructor;return this.then(function(y){return b.resolve(p()).then(function(){return y})},function(y){return b.resolve(p()).then(function(){throw y})})},h.prototype.catch=function(p){return this.then(null,p)},h.prototype.then=function(p,b){if(typeof p!="function"&&this.state===c||typeof b!="function"&&this.state===l)return this;var y=new this.constructor(o);return this.state!==u?d(y,this.state===c?p:b,this.outcome):this.queue.push(new f(y,p,b)),y},f.prototype.callFulfilled=function(p){a.resolve(this.promise,p)},f.prototype.otherCallFulfilled=function(p){d(this.promise,this.onFulfilled,p)},f.prototype.callRejected=function(p){a.reject(this.promise,p)},f.prototype.otherCallRejected=function(p){d(this.promise,this.onRejected,p)},a.resolve=function(p,b){var y=m(g,b);if(y.status==="error")return a.reject(p,y.value);var v=y.value;if(v)_(p,v);else{p.state=c,p.outcome=b;for(var w=-1,S=p.queue.length;++w<S;)p.queue[w].callFulfilled(b)}return p},a.reject=function(p,b){p.state=l,p.outcome=b;for(var y=-1,v=p.queue.length;++y<v;)p.queue[y].callRejected(b);return p},h.resolve=function(p){return p instanceof this?p:a.resolve(new this(o),p)},h.reject=function(p){var b=new this(o);return a.reject(b,p)},h.all=function(p){var b=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var y=p.length,v=!1;if(!y)return this.resolve([]);for(var w=new Array(y),S=0,x=-1,E=new this(o);++x<y;)T(p[x],x);return E;function T(k,B){b.resolve(k).then(function(P){w[B]=P,++S!==y||v||(v=!0,a.resolve(E,w))},function(P){v||(v=!0,a.reject(E,P))})}},h.race=function(p){var b=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var y=p.length,v=!1;if(!y)return this.resolve([]);for(var w=-1,S=new this(o);++w<y;)x=p[w],b.resolve(x).then(function(E){v||(v=!0,a.resolve(S,E))},function(E){v||(v=!0,a.reject(S,E))});var x;return S}},{immediate:36}],38:[function(r,n,i){var s={};(0,r("./lib/utils/common").assign)(s,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),n.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,n,i){var s=r("./zlib/deflate"),o=r("./utils/common"),a=r("./utils/strings"),l=r("./zlib/messages"),c=r("./zlib/zstream"),u=Object.prototype.toString,h=0,f=-1,d=0,g=8;function _(p){if(!(this instanceof _))return new _(p);this.options=o.assign({level:f,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},p||{});var b=this.options;b.raw&&0<b.windowBits?b.windowBits=-b.windowBits:b.gzip&&0<b.windowBits&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var y=s.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(y!==h)throw new Error(l[y]);if(b.header&&s.deflateSetHeader(this.strm,b.header),b.dictionary){var v;if(v=typeof b.dictionary=="string"?a.string2buf(b.dictionary):u.call(b.dictionary)==="[object ArrayBuffer]"?new Uint8Array(b.dictionary):b.dictionary,(y=s.deflateSetDictionary(this.strm,v))!==h)throw new Error(l[y]);this._dict_set=!0}}function m(p,b){var y=new _(b);if(y.push(p,!0),y.err)throw y.msg||l[y.err];return y.result}_.prototype.push=function(p,b){var y,v,w=this.strm,S=this.options.chunkSize;if(this.ended)return!1;v=b===~~b?b:b===!0?4:0,typeof p=="string"?w.input=a.string2buf(p):u.call(p)==="[object ArrayBuffer]"?w.input=new Uint8Array(p):w.input=p,w.next_in=0,w.avail_in=w.input.length;do{if(w.avail_out===0&&(w.output=new o.Buf8(S),w.next_out=0,w.avail_out=S),(y=s.deflate(w,v))!==1&&y!==h)return this.onEnd(y),!(this.ended=!0);w.avail_out!==0&&(w.avail_in!==0||v!==4&&v!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(w.output,w.next_out))):this.onData(o.shrinkBuf(w.output,w.next_out)))}while((0<w.avail_in||w.avail_out===0)&&y!==1);return v===4?(y=s.deflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===h):v!==2||(this.onEnd(h),!(w.avail_out=0))},_.prototype.onData=function(p){this.chunks.push(p)},_.prototype.onEnd=function(p){p===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},i.Deflate=_,i.deflate=m,i.deflateRaw=function(p,b){return(b=b||{}).raw=!0,m(p,b)},i.gzip=function(p,b){return(b=b||{}).gzip=!0,m(p,b)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,n,i){var s=r("./zlib/inflate"),o=r("./utils/common"),a=r("./utils/strings"),l=r("./zlib/constants"),c=r("./zlib/messages"),u=r("./zlib/zstream"),h=r("./zlib/gzheader"),f=Object.prototype.toString;function d(_){if(!(this instanceof d))return new d(_);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},_||{});var m=this.options;m.raw&&0<=m.windowBits&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),!(0<=m.windowBits&&m.windowBits<16)||_&&_.windowBits||(m.windowBits+=32),15<m.windowBits&&m.windowBits<48&&!(15&m.windowBits)&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var p=s.inflateInit2(this.strm,m.windowBits);if(p!==l.Z_OK)throw new Error(c[p]);this.header=new h,s.inflateGetHeader(this.strm,this.header)}function g(_,m){var p=new d(m);if(p.push(_,!0),p.err)throw p.msg||c[p.err];return p.result}d.prototype.push=function(_,m){var p,b,y,v,w,S,x=this.strm,E=this.options.chunkSize,T=this.options.dictionary,k=!1;if(this.ended)return!1;b=m===~~m?m:m===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof _=="string"?x.input=a.binstring2buf(_):f.call(_)==="[object ArrayBuffer]"?x.input=new Uint8Array(_):x.input=_,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new o.Buf8(E),x.next_out=0,x.avail_out=E),(p=s.inflate(x,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&T&&(S=typeof T=="string"?a.string2buf(T):f.call(T)==="[object ArrayBuffer]"?new Uint8Array(T):T,p=s.inflateSetDictionary(this.strm,S)),p===l.Z_BUF_ERROR&&k===!0&&(p=l.Z_OK,k=!1),p!==l.Z_STREAM_END&&p!==l.Z_OK)return this.onEnd(p),!(this.ended=!0);x.next_out&&(x.avail_out!==0&&p!==l.Z_STREAM_END&&(x.avail_in!==0||b!==l.Z_FINISH&&b!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(y=a.utf8border(x.output,x.next_out),v=x.next_out-y,w=a.buf2string(x.output,y),x.next_out=v,x.avail_out=E-v,v&&o.arraySet(x.output,x.output,y,v,0),this.onData(w)):this.onData(o.shrinkBuf(x.output,x.next_out)))),x.avail_in===0&&x.avail_out===0&&(k=!0)}while((0<x.avail_in||x.avail_out===0)&&p!==l.Z_STREAM_END);return p===l.Z_STREAM_END&&(b=l.Z_FINISH),b===l.Z_FINISH?(p=s.inflateEnd(this.strm),this.onEnd(p),this.ended=!0,p===l.Z_OK):b!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(x.avail_out=0))},d.prototype.onData=function(_){this.chunks.push(_)},d.prototype.onEnd=function(_){_===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},i.Inflate=d,i.inflate=g,i.inflateRaw=function(_,m){return(m=m||{}).raw=!0,g(_,m)},i.ungzip=g},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var u=c.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])}}return l},i.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var o={arraySet:function(l,c,u,h,f){if(c.subarray&&l.subarray)l.set(c.subarray(u,u+h),f);else for(var d=0;d<h;d++)l[f+d]=c[u+d]},flattenChunks:function(l){var c,u,h,f,d,g;for(c=h=0,u=l.length;c<u;c++)h+=l[c].length;for(g=new Uint8Array(h),c=f=0,u=l.length;c<u;c++)d=l[c],g.set(d,f),f+=d.length;return g}},a={arraySet:function(l,c,u,h,f){for(var d=0;d<h;d++)l[f+d]=c[u+d]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(s)},{}],42:[function(r,n,i){var s=r("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new s.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function u(h,f){if(f<65537&&(h.subarray&&a||!h.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(h,f));for(var d="",g=0;g<f;g++)d+=String.fromCharCode(h[g]);return d}l[254]=l[254]=1,i.string2buf=function(h){var f,d,g,_,m,p=h.length,b=0;for(_=0;_<p;_++)(64512&(d=h.charCodeAt(_)))==55296&&_+1<p&&(64512&(g=h.charCodeAt(_+1)))==56320&&(d=65536+(d-55296<<10)+(g-56320),_++),b+=d<128?1:d<2048?2:d<65536?3:4;for(f=new s.Buf8(b),_=m=0;m<b;_++)(64512&(d=h.charCodeAt(_)))==55296&&_+1<p&&(64512&(g=h.charCodeAt(_+1)))==56320&&(d=65536+(d-55296<<10)+(g-56320),_++),d<128?f[m++]=d:(d<2048?f[m++]=192|d>>>6:(d<65536?f[m++]=224|d>>>12:(f[m++]=240|d>>>18,f[m++]=128|d>>>12&63),f[m++]=128|d>>>6&63),f[m++]=128|63&d);return f},i.buf2binstring=function(h){return u(h,h.length)},i.binstring2buf=function(h){for(var f=new s.Buf8(h.length),d=0,g=f.length;d<g;d++)f[d]=h.charCodeAt(d);return f},i.buf2string=function(h,f){var d,g,_,m,p=f||h.length,b=new Array(2*p);for(d=g=0;d<p;)if((_=h[d++])<128)b[g++]=_;else if(4<(m=l[_]))b[g++]=65533,d+=m-1;else{for(_&=m===2?31:m===3?15:7;1<m&&d<p;)_=_<<6|63&h[d++],m--;1<m?b[g++]=65533:_<65536?b[g++]=_:(_-=65536,b[g++]=55296|_>>10&1023,b[g++]=56320|1023&_)}return u(b,g)},i.utf8border=function(h,f){var d;for((f=f||h.length)>h.length&&(f=h.length),d=f-1;0<=d&&(192&h[d])==128;)d--;return d<0||d===0?f:d+l[h[d]]>f?d:f}},{"./common":41}],43:[function(r,n,i){n.exports=function(s,o,a,l){for(var c=65535&s|0,u=s>>>16&65535|0,h=0;a!==0;){for(a-=h=2e3<a?2e3:a;u=u+(c=c+o[l++]|0)|0,--h;);c%=65521,u%=65521}return c|u<<16|0}},{}],44:[function(r,n,i){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,n,i){var s=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();n.exports=function(o,a,l,c){var u=s,h=c+l;o^=-1;for(var f=c;f<h;f++)o=o>>>8^u[255&(o^a[f])];return-1^o}},{}],46:[function(r,n,i){var s,o=r("../utils/common"),a=r("./trees"),l=r("./adler32"),c=r("./crc32"),u=r("./messages"),h=0,f=4,d=0,g=-2,_=-1,m=4,p=2,b=8,y=9,v=286,w=30,S=19,x=2*v+1,E=15,T=3,k=258,B=k+T+1,P=42,O=113,A=1,$=2,te=3,Q=4;function ee(F,he){return F.msg=u[he],he}function L(F){return(F<<1)-(4<F?9:0)}function M(F){for(var he=F.length;0<=--he;)F[he]=0}function U(F){var he=F.state,ae=he.pending;ae>F.avail_out&&(ae=F.avail_out),ae!==0&&(o.arraySet(F.output,he.pending_buf,he.pending_out,ae,F.next_out),F.next_out+=ae,he.pending_out+=ae,F.total_out+=ae,F.avail_out-=ae,he.pending-=ae,he.pending===0&&(he.pending_out=0))}function j(F,he){a._tr_flush_block(F,0<=F.block_start?F.block_start:-1,F.strstart-F.block_start,he),F.block_start=F.strstart,U(F.strm)}function H(F,he){F.pending_buf[F.pending++]=he}function Z(F,he){F.pending_buf[F.pending++]=he>>>8&255,F.pending_buf[F.pending++]=255&he}function re(F,he){var ae,W,G=F.max_chain_length,oe=F.strstart,ye=F.prev_length,Se=F.nice_match,pe=F.strstart>F.w_size-B?F.strstart-(F.w_size-B):0,Te=F.window,Ae=F.w_mask,xe=F.prev,ue=F.strstart+k,Ce=Te[oe+ye-1],Pe=Te[oe+ye];F.prev_length>=F.good_match&&(G>>=2),Se>F.lookahead&&(Se=F.lookahead);do if(Te[(ae=he)+ye]===Pe&&Te[ae+ye-1]===Ce&&Te[ae]===Te[oe]&&Te[++ae]===Te[oe+1]){oe+=2,ae++;do;while(Te[++oe]===Te[++ae]&&Te[++oe]===Te[++ae]&&Te[++oe]===Te[++ae]&&Te[++oe]===Te[++ae]&&Te[++oe]===Te[++ae]&&Te[++oe]===Te[++ae]&&Te[++oe]===Te[++ae]&&Te[++oe]===Te[++ae]&&oe<ue);if(W=k-(ue-oe),oe=ue-k,ye<W){if(F.match_start=he,Se<=(ye=W))break;Ce=Te[oe+ye-1],Pe=Te[oe+ye]}}while((he=xe[he&Ae])>pe&&--G!=0);return ye<=F.lookahead?ye:F.lookahead}function ge(F){var he,ae,W,G,oe,ye,Se,pe,Te,Ae,xe=F.w_size;do{if(G=F.window_size-F.lookahead-F.strstart,F.strstart>=xe+(xe-B)){for(o.arraySet(F.window,F.window,xe,xe,0),F.match_start-=xe,F.strstart-=xe,F.block_start-=xe,he=ae=F.hash_size;W=F.head[--he],F.head[he]=xe<=W?W-xe:0,--ae;);for(he=ae=xe;W=F.prev[--he],F.prev[he]=xe<=W?W-xe:0,--ae;);G+=xe}if(F.strm.avail_in===0)break;if(ye=F.strm,Se=F.window,pe=F.strstart+F.lookahead,Te=G,Ae=void 0,Ae=ye.avail_in,Te<Ae&&(Ae=Te),ae=Ae===0?0:(ye.avail_in-=Ae,o.arraySet(Se,ye.input,ye.next_in,Ae,pe),ye.state.wrap===1?ye.adler=l(ye.adler,Se,Ae,pe):ye.state.wrap===2&&(ye.adler=c(ye.adler,Se,Ae,pe)),ye.next_in+=Ae,ye.total_in+=Ae,Ae),F.lookahead+=ae,F.lookahead+F.insert>=T)for(oe=F.strstart-F.insert,F.ins_h=F.window[oe],F.ins_h=(F.ins_h<<F.hash_shift^F.window[oe+1])&F.hash_mask;F.insert&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[oe+T-1])&F.hash_mask,F.prev[oe&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=oe,oe++,F.insert--,!(F.lookahead+F.insert<T)););}while(F.lookahead<B&&F.strm.avail_in!==0)}function X(F,he){for(var ae,W;;){if(F.lookahead<B){if(ge(F),F.lookahead<B&&he===h)return A;if(F.lookahead===0)break}if(ae=0,F.lookahead>=T&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+T-1])&F.hash_mask,ae=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart),ae!==0&&F.strstart-ae<=F.w_size-B&&(F.match_length=re(F,ae)),F.match_length>=T)if(W=a._tr_tally(F,F.strstart-F.match_start,F.match_length-T),F.lookahead-=F.match_length,F.match_length<=F.max_lazy_match&&F.lookahead>=T){for(F.match_length--;F.strstart++,F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+T-1])&F.hash_mask,ae=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart,--F.match_length!=0;);F.strstart++}else F.strstart+=F.match_length,F.match_length=0,F.ins_h=F.window[F.strstart],F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+1])&F.hash_mask;else W=a._tr_tally(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++;if(W&&(j(F,!1),F.strm.avail_out===0))return A}return F.insert=F.strstart<T-1?F.strstart:T-1,he===f?(j(F,!0),F.strm.avail_out===0?te:Q):F.last_lit&&(j(F,!1),F.strm.avail_out===0)?A:$}function V(F,he){for(var ae,W,G;;){if(F.lookahead<B){if(ge(F),F.lookahead<B&&he===h)return A;if(F.lookahead===0)break}if(ae=0,F.lookahead>=T&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+T-1])&F.hash_mask,ae=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart),F.prev_length=F.match_length,F.prev_match=F.match_start,F.match_length=T-1,ae!==0&&F.prev_length<F.max_lazy_match&&F.strstart-ae<=F.w_size-B&&(F.match_length=re(F,ae),F.match_length<=5&&(F.strategy===1||F.match_length===T&&4096<F.strstart-F.match_start)&&(F.match_length=T-1)),F.prev_length>=T&&F.match_length<=F.prev_length){for(G=F.strstart+F.lookahead-T,W=a._tr_tally(F,F.strstart-1-F.prev_match,F.prev_length-T),F.lookahead-=F.prev_length-1,F.prev_length-=2;++F.strstart<=G&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+T-1])&F.hash_mask,ae=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart),--F.prev_length!=0;);if(F.match_available=0,F.match_length=T-1,F.strstart++,W&&(j(F,!1),F.strm.avail_out===0))return A}else if(F.match_available){if((W=a._tr_tally(F,0,F.window[F.strstart-1]))&&j(F,!1),F.strstart++,F.lookahead--,F.strm.avail_out===0)return A}else F.match_available=1,F.strstart++,F.lookahead--}return F.match_available&&(W=a._tr_tally(F,0,F.window[F.strstart-1]),F.match_available=0),F.insert=F.strstart<T-1?F.strstart:T-1,he===f?(j(F,!0),F.strm.avail_out===0?te:Q):F.last_lit&&(j(F,!1),F.strm.avail_out===0)?A:$}function ie(F,he,ae,W,G){this.good_length=F,this.max_lazy=he,this.nice_length=ae,this.max_chain=W,this.func=G}function se(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=b,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*x),this.dyn_dtree=new o.Buf16(2*(2*w+1)),this.bl_tree=new o.Buf16(2*(2*S+1)),M(this.dyn_ltree),M(this.dyn_dtree),M(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(E+1),this.heap=new o.Buf16(2*v+1),M(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*v+1),M(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function me(F){var he;return F&&F.state?(F.total_in=F.total_out=0,F.data_type=p,(he=F.state).pending=0,he.pending_out=0,he.wrap<0&&(he.wrap=-he.wrap),he.status=he.wrap?P:O,F.adler=he.wrap===2?0:1,he.last_flush=h,a._tr_init(he),d):ee(F,g)}function de(F){var he=me(F);return he===d&&function(ae){ae.window_size=2*ae.w_size,M(ae.head),ae.max_lazy_match=s[ae.level].max_lazy,ae.good_match=s[ae.level].good_length,ae.nice_match=s[ae.level].nice_length,ae.max_chain_length=s[ae.level].max_chain,ae.strstart=0,ae.block_start=0,ae.lookahead=0,ae.insert=0,ae.match_length=ae.prev_length=T-1,ae.match_available=0,ae.ins_h=0}(F.state),he}function ve(F,he,ae,W,G,oe){if(!F)return g;var ye=1;if(he===_&&(he=6),W<0?(ye=0,W=-W):15<W&&(ye=2,W-=16),G<1||y<G||ae!==b||W<8||15<W||he<0||9<he||oe<0||m<oe)return ee(F,g);W===8&&(W=9);var Se=new se;return(F.state=Se).strm=F,Se.wrap=ye,Se.gzhead=null,Se.w_bits=W,Se.w_size=1<<Se.w_bits,Se.w_mask=Se.w_size-1,Se.hash_bits=G+7,Se.hash_size=1<<Se.hash_bits,Se.hash_mask=Se.hash_size-1,Se.hash_shift=~~((Se.hash_bits+T-1)/T),Se.window=new o.Buf8(2*Se.w_size),Se.head=new o.Buf16(Se.hash_size),Se.prev=new o.Buf16(Se.w_size),Se.lit_bufsize=1<<G+6,Se.pending_buf_size=4*Se.lit_bufsize,Se.pending_buf=new o.Buf8(Se.pending_buf_size),Se.d_buf=1*Se.lit_bufsize,Se.l_buf=3*Se.lit_bufsize,Se.level=he,Se.strategy=oe,Se.method=ae,de(F)}s=[new ie(0,0,0,0,function(F,he){var ae=65535;for(ae>F.pending_buf_size-5&&(ae=F.pending_buf_size-5);;){if(F.lookahead<=1){if(ge(F),F.lookahead===0&&he===h)return A;if(F.lookahead===0)break}F.strstart+=F.lookahead,F.lookahead=0;var W=F.block_start+ae;if((F.strstart===0||F.strstart>=W)&&(F.lookahead=F.strstart-W,F.strstart=W,j(F,!1),F.strm.avail_out===0)||F.strstart-F.block_start>=F.w_size-B&&(j(F,!1),F.strm.avail_out===0))return A}return F.insert=0,he===f?(j(F,!0),F.strm.avail_out===0?te:Q):(F.strstart>F.block_start&&(j(F,!1),F.strm.avail_out),A)}),new ie(4,4,8,4,X),new ie(4,5,16,8,X),new ie(4,6,32,32,X),new ie(4,4,16,16,V),new ie(8,16,32,32,V),new ie(8,16,128,128,V),new ie(8,32,128,256,V),new ie(32,128,258,1024,V),new ie(32,258,258,4096,V)],i.deflateInit=function(F,he){return ve(F,he,b,15,8,0)},i.deflateInit2=ve,i.deflateReset=de,i.deflateResetKeep=me,i.deflateSetHeader=function(F,he){return F&&F.state?F.state.wrap!==2?g:(F.state.gzhead=he,d):g},i.deflate=function(F,he){var ae,W,G,oe;if(!F||!F.state||5<he||he<0)return F?ee(F,g):g;if(W=F.state,!F.output||!F.input&&F.avail_in!==0||W.status===666&&he!==f)return ee(F,F.avail_out===0?-5:g);if(W.strm=F,ae=W.last_flush,W.last_flush=he,W.status===P)if(W.wrap===2)F.adler=0,H(W,31),H(W,139),H(W,8),W.gzhead?(H(W,(W.gzhead.text?1:0)+(W.gzhead.hcrc?2:0)+(W.gzhead.extra?4:0)+(W.gzhead.name?8:0)+(W.gzhead.comment?16:0)),H(W,255&W.gzhead.time),H(W,W.gzhead.time>>8&255),H(W,W.gzhead.time>>16&255),H(W,W.gzhead.time>>24&255),H(W,W.level===9?2:2<=W.strategy||W.level<2?4:0),H(W,255&W.gzhead.os),W.gzhead.extra&&W.gzhead.extra.length&&(H(W,255&W.gzhead.extra.length),H(W,W.gzhead.extra.length>>8&255)),W.gzhead.hcrc&&(F.adler=c(F.adler,W.pending_buf,W.pending,0)),W.gzindex=0,W.status=69):(H(W,0),H(W,0),H(W,0),H(W,0),H(W,0),H(W,W.level===9?2:2<=W.strategy||W.level<2?4:0),H(W,3),W.status=O);else{var ye=b+(W.w_bits-8<<4)<<8;ye|=(2<=W.strategy||W.level<2?0:W.level<6?1:W.level===6?2:3)<<6,W.strstart!==0&&(ye|=32),ye+=31-ye%31,W.status=O,Z(W,ye),W.strstart!==0&&(Z(W,F.adler>>>16),Z(W,65535&F.adler)),F.adler=1}if(W.status===69)if(W.gzhead.extra){for(G=W.pending;W.gzindex<(65535&W.gzhead.extra.length)&&(W.pending!==W.pending_buf_size||(W.gzhead.hcrc&&W.pending>G&&(F.adler=c(F.adler,W.pending_buf,W.pending-G,G)),U(F),G=W.pending,W.pending!==W.pending_buf_size));)H(W,255&W.gzhead.extra[W.gzindex]),W.gzindex++;W.gzhead.hcrc&&W.pending>G&&(F.adler=c(F.adler,W.pending_buf,W.pending-G,G)),W.gzindex===W.gzhead.extra.length&&(W.gzindex=0,W.status=73)}else W.status=73;if(W.status===73)if(W.gzhead.name){G=W.pending;do{if(W.pending===W.pending_buf_size&&(W.gzhead.hcrc&&W.pending>G&&(F.adler=c(F.adler,W.pending_buf,W.pending-G,G)),U(F),G=W.pending,W.pending===W.pending_buf_size)){oe=1;break}oe=W.gzindex<W.gzhead.name.length?255&W.gzhead.name.charCodeAt(W.gzindex++):0,H(W,oe)}while(oe!==0);W.gzhead.hcrc&&W.pending>G&&(F.adler=c(F.adler,W.pending_buf,W.pending-G,G)),oe===0&&(W.gzindex=0,W.status=91)}else W.status=91;if(W.status===91)if(W.gzhead.comment){G=W.pending;do{if(W.pending===W.pending_buf_size&&(W.gzhead.hcrc&&W.pending>G&&(F.adler=c(F.adler,W.pending_buf,W.pending-G,G)),U(F),G=W.pending,W.pending===W.pending_buf_size)){oe=1;break}oe=W.gzindex<W.gzhead.comment.length?255&W.gzhead.comment.charCodeAt(W.gzindex++):0,H(W,oe)}while(oe!==0);W.gzhead.hcrc&&W.pending>G&&(F.adler=c(F.adler,W.pending_buf,W.pending-G,G)),oe===0&&(W.status=103)}else W.status=103;if(W.status===103&&(W.gzhead.hcrc?(W.pending+2>W.pending_buf_size&&U(F),W.pending+2<=W.pending_buf_size&&(H(W,255&F.adler),H(W,F.adler>>8&255),F.adler=0,W.status=O)):W.status=O),W.pending!==0){if(U(F),F.avail_out===0)return W.last_flush=-1,d}else if(F.avail_in===0&&L(he)<=L(ae)&&he!==f)return ee(F,-5);if(W.status===666&&F.avail_in!==0)return ee(F,-5);if(F.avail_in!==0||W.lookahead!==0||he!==h&&W.status!==666){var Se=W.strategy===2?function(pe,Te){for(var Ae;;){if(pe.lookahead===0&&(ge(pe),pe.lookahead===0)){if(Te===h)return A;break}if(pe.match_length=0,Ae=a._tr_tally(pe,0,pe.window[pe.strstart]),pe.lookahead--,pe.strstart++,Ae&&(j(pe,!1),pe.strm.avail_out===0))return A}return pe.insert=0,Te===f?(j(pe,!0),pe.strm.avail_out===0?te:Q):pe.last_lit&&(j(pe,!1),pe.strm.avail_out===0)?A:$}(W,he):W.strategy===3?function(pe,Te){for(var Ae,xe,ue,Ce,Pe=pe.window;;){if(pe.lookahead<=k){if(ge(pe),pe.lookahead<=k&&Te===h)return A;if(pe.lookahead===0)break}if(pe.match_length=0,pe.lookahead>=T&&0<pe.strstart&&(xe=Pe[ue=pe.strstart-1])===Pe[++ue]&&xe===Pe[++ue]&&xe===Pe[++ue]){Ce=pe.strstart+k;do;while(xe===Pe[++ue]&&xe===Pe[++ue]&&xe===Pe[++ue]&&xe===Pe[++ue]&&xe===Pe[++ue]&&xe===Pe[++ue]&&xe===Pe[++ue]&&xe===Pe[++ue]&&ue<Ce);pe.match_length=k-(Ce-ue),pe.match_length>pe.lookahead&&(pe.match_length=pe.lookahead)}if(pe.match_length>=T?(Ae=a._tr_tally(pe,1,pe.match_length-T),pe.lookahead-=pe.match_length,pe.strstart+=pe.match_length,pe.match_length=0):(Ae=a._tr_tally(pe,0,pe.window[pe.strstart]),pe.lookahead--,pe.strstart++),Ae&&(j(pe,!1),pe.strm.avail_out===0))return A}return pe.insert=0,Te===f?(j(pe,!0),pe.strm.avail_out===0?te:Q):pe.last_lit&&(j(pe,!1),pe.strm.avail_out===0)?A:$}(W,he):s[W.level].func(W,he);if(Se!==te&&Se!==Q||(W.status=666),Se===A||Se===te)return F.avail_out===0&&(W.last_flush=-1),d;if(Se===$&&(he===1?a._tr_align(W):he!==5&&(a._tr_stored_block(W,0,0,!1),he===3&&(M(W.head),W.lookahead===0&&(W.strstart=0,W.block_start=0,W.insert=0))),U(F),F.avail_out===0))return W.last_flush=-1,d}return he!==f?d:W.wrap<=0?1:(W.wrap===2?(H(W,255&F.adler),H(W,F.adler>>8&255),H(W,F.adler>>16&255),H(W,F.adler>>24&255),H(W,255&F.total_in),H(W,F.total_in>>8&255),H(W,F.total_in>>16&255),H(W,F.total_in>>24&255)):(Z(W,F.adler>>>16),Z(W,65535&F.adler)),U(F),0<W.wrap&&(W.wrap=-W.wrap),W.pending!==0?d:1)},i.deflateEnd=function(F){var he;return F&&F.state?(he=F.state.status)!==P&&he!==69&&he!==73&&he!==91&&he!==103&&he!==O&&he!==666?ee(F,g):(F.state=null,he===O?ee(F,-3):d):g},i.deflateSetDictionary=function(F,he){var ae,W,G,oe,ye,Se,pe,Te,Ae=he.length;if(!F||!F.state||(oe=(ae=F.state).wrap)===2||oe===1&&ae.status!==P||ae.lookahead)return g;for(oe===1&&(F.adler=l(F.adler,he,Ae,0)),ae.wrap=0,Ae>=ae.w_size&&(oe===0&&(M(ae.head),ae.strstart=0,ae.block_start=0,ae.insert=0),Te=new o.Buf8(ae.w_size),o.arraySet(Te,he,Ae-ae.w_size,ae.w_size,0),he=Te,Ae=ae.w_size),ye=F.avail_in,Se=F.next_in,pe=F.input,F.avail_in=Ae,F.next_in=0,F.input=he,ge(ae);ae.lookahead>=T;){for(W=ae.strstart,G=ae.lookahead-(T-1);ae.ins_h=(ae.ins_h<<ae.hash_shift^ae.window[W+T-1])&ae.hash_mask,ae.prev[W&ae.w_mask]=ae.head[ae.ins_h],ae.head[ae.ins_h]=W,W++,--G;);ae.strstart=W,ae.lookahead=T-1,ge(ae)}return ae.strstart+=ae.lookahead,ae.block_start=ae.strstart,ae.insert=ae.lookahead,ae.lookahead=0,ae.match_length=ae.prev_length=T-1,ae.match_available=0,F.next_in=Se,F.input=pe,F.avail_in=ye,ae.wrap=oe,d},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,n,i){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,n,i){n.exports=function(s,o){var a,l,c,u,h,f,d,g,_,m,p,b,y,v,w,S,x,E,T,k,B,P,O,A,$;a=s.state,l=s.next_in,A=s.input,c=l+(s.avail_in-5),u=s.next_out,$=s.output,h=u-(o-s.avail_out),f=u+(s.avail_out-257),d=a.dmax,g=a.wsize,_=a.whave,m=a.wnext,p=a.window,b=a.hold,y=a.bits,v=a.lencode,w=a.distcode,S=(1<<a.lenbits)-1,x=(1<<a.distbits)-1;e:do{y<15&&(b+=A[l++]<<y,y+=8,b+=A[l++]<<y,y+=8),E=v[b&S];t:for(;;){if(b>>>=T=E>>>24,y-=T,(T=E>>>16&255)===0)$[u++]=65535&E;else{if(!(16&T)){if(!(64&T)){E=v[(65535&E)+(b&(1<<T)-1)];continue t}if(32&T){a.mode=12;break e}s.msg="invalid literal/length code",a.mode=30;break e}k=65535&E,(T&=15)&&(y<T&&(b+=A[l++]<<y,y+=8),k+=b&(1<<T)-1,b>>>=T,y-=T),y<15&&(b+=A[l++]<<y,y+=8,b+=A[l++]<<y,y+=8),E=w[b&x];r:for(;;){if(b>>>=T=E>>>24,y-=T,!(16&(T=E>>>16&255))){if(!(64&T)){E=w[(65535&E)+(b&(1<<T)-1)];continue r}s.msg="invalid distance code",a.mode=30;break e}if(B=65535&E,y<(T&=15)&&(b+=A[l++]<<y,(y+=8)<T&&(b+=A[l++]<<y,y+=8)),d<(B+=b&(1<<T)-1)){s.msg="invalid distance too far back",a.mode=30;break e}if(b>>>=T,y-=T,(T=u-h)<B){if(_<(T=B-T)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break e}if(O=p,(P=0)===m){if(P+=g-T,T<k){for(k-=T;$[u++]=p[P++],--T;);P=u-B,O=$}}else if(m<T){if(P+=g+m-T,(T-=m)<k){for(k-=T;$[u++]=p[P++],--T;);if(P=0,m<k){for(k-=T=m;$[u++]=p[P++],--T;);P=u-B,O=$}}}else if(P+=m-T,T<k){for(k-=T;$[u++]=p[P++],--T;);P=u-B,O=$}for(;2<k;)$[u++]=O[P++],$[u++]=O[P++],$[u++]=O[P++],k-=3;k&&($[u++]=O[P++],1<k&&($[u++]=O[P++]))}else{for(P=u-B;$[u++]=$[P++],$[u++]=$[P++],$[u++]=$[P++],2<(k-=3););k&&($[u++]=$[P++],1<k&&($[u++]=$[P++]))}break}}break}}while(l<c&&u<f);l-=k=y>>3,b&=(1<<(y-=k<<3))-1,s.next_in=l,s.next_out=u,s.avail_in=l<c?c-l+5:5-(l-c),s.avail_out=u<f?f-u+257:257-(u-f),a.hold=b,a.bits=y}},{}],49:[function(r,n,i){var s=r("../utils/common"),o=r("./adler32"),a=r("./crc32"),l=r("./inffast"),c=r("./inftrees"),u=1,h=2,f=0,d=-2,g=1,_=852,m=592;function p(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function b(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function y(P){var O;return P&&P.state?(O=P.state,P.total_in=P.total_out=O.total=0,P.msg="",O.wrap&&(P.adler=1&O.wrap),O.mode=g,O.last=0,O.havedict=0,O.dmax=32768,O.head=null,O.hold=0,O.bits=0,O.lencode=O.lendyn=new s.Buf32(_),O.distcode=O.distdyn=new s.Buf32(m),O.sane=1,O.back=-1,f):d}function v(P){var O;return P&&P.state?((O=P.state).wsize=0,O.whave=0,O.wnext=0,y(P)):d}function w(P,O){var A,$;return P&&P.state?($=P.state,O<0?(A=0,O=-O):(A=1+(O>>4),O<48&&(O&=15)),O&&(O<8||15<O)?d:($.window!==null&&$.wbits!==O&&($.window=null),$.wrap=A,$.wbits=O,v(P))):d}function S(P,O){var A,$;return P?($=new b,(P.state=$).window=null,(A=w(P,O))!==f&&(P.state=null),A):d}var x,E,T=!0;function k(P){if(T){var O;for(x=new s.Buf32(512),E=new s.Buf32(32),O=0;O<144;)P.lens[O++]=8;for(;O<256;)P.lens[O++]=9;for(;O<280;)P.lens[O++]=7;for(;O<288;)P.lens[O++]=8;for(c(u,P.lens,0,288,x,0,P.work,{bits:9}),O=0;O<32;)P.lens[O++]=5;c(h,P.lens,0,32,E,0,P.work,{bits:5}),T=!1}P.lencode=x,P.lenbits=9,P.distcode=E,P.distbits=5}function B(P,O,A,$){var te,Q=P.state;return Q.window===null&&(Q.wsize=1<<Q.wbits,Q.wnext=0,Q.whave=0,Q.window=new s.Buf8(Q.wsize)),$>=Q.wsize?(s.arraySet(Q.window,O,A-Q.wsize,Q.wsize,0),Q.wnext=0,Q.whave=Q.wsize):($<(te=Q.wsize-Q.wnext)&&(te=$),s.arraySet(Q.window,O,A-$,te,Q.wnext),($-=te)?(s.arraySet(Q.window,O,A-$,$,0),Q.wnext=$,Q.whave=Q.wsize):(Q.wnext+=te,Q.wnext===Q.wsize&&(Q.wnext=0),Q.whave<Q.wsize&&(Q.whave+=te))),0}i.inflateReset=v,i.inflateReset2=w,i.inflateResetKeep=y,i.inflateInit=function(P){return S(P,15)},i.inflateInit2=S,i.inflate=function(P,O){var A,$,te,Q,ee,L,M,U,j,H,Z,re,ge,X,V,ie,se,me,de,ve,F,he,ae,W,G=0,oe=new s.Buf8(4),ye=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return d;(A=P.state).mode===12&&(A.mode=13),ee=P.next_out,te=P.output,M=P.avail_out,Q=P.next_in,$=P.input,L=P.avail_in,U=A.hold,j=A.bits,H=L,Z=M,he=f;e:for(;;)switch(A.mode){case g:if(A.wrap===0){A.mode=13;break}for(;j<16;){if(L===0)break e;L--,U+=$[Q++]<<j,j+=8}if(2&A.wrap&&U===35615){oe[A.check=0]=255&U,oe[1]=U>>>8&255,A.check=a(A.check,oe,2,0),j=U=0,A.mode=2;break}if(A.flags=0,A.head&&(A.head.done=!1),!(1&A.wrap)||(((255&U)<<8)+(U>>8))%31){P.msg="incorrect header check",A.mode=30;break}if((15&U)!=8){P.msg="unknown compression method",A.mode=30;break}if(j-=4,F=8+(15&(U>>>=4)),A.wbits===0)A.wbits=F;else if(F>A.wbits){P.msg="invalid window size",A.mode=30;break}A.dmax=1<<F,P.adler=A.check=1,A.mode=512&U?10:12,j=U=0;break;case 2:for(;j<16;){if(L===0)break e;L--,U+=$[Q++]<<j,j+=8}if(A.flags=U,(255&A.flags)!=8){P.msg="unknown compression method",A.mode=30;break}if(57344&A.flags){P.msg="unknown header flags set",A.mode=30;break}A.head&&(A.head.text=U>>8&1),512&A.flags&&(oe[0]=255&U,oe[1]=U>>>8&255,A.check=a(A.check,oe,2,0)),j=U=0,A.mode=3;case 3:for(;j<32;){if(L===0)break e;L--,U+=$[Q++]<<j,j+=8}A.head&&(A.head.time=U),512&A.flags&&(oe[0]=255&U,oe[1]=U>>>8&255,oe[2]=U>>>16&255,oe[3]=U>>>24&255,A.check=a(A.check,oe,4,0)),j=U=0,A.mode=4;case 4:for(;j<16;){if(L===0)break e;L--,U+=$[Q++]<<j,j+=8}A.head&&(A.head.xflags=255&U,A.head.os=U>>8),512&A.flags&&(oe[0]=255&U,oe[1]=U>>>8&255,A.check=a(A.check,oe,2,0)),j=U=0,A.mode=5;case 5:if(1024&A.flags){for(;j<16;){if(L===0)break e;L--,U+=$[Q++]<<j,j+=8}A.length=U,A.head&&(A.head.extra_len=U),512&A.flags&&(oe[0]=255&U,oe[1]=U>>>8&255,A.check=a(A.check,oe,2,0)),j=U=0}else A.head&&(A.head.extra=null);A.mode=6;case 6:if(1024&A.flags&&(L<(re=A.length)&&(re=L),re&&(A.head&&(F=A.head.extra_len-A.length,A.head.extra||(A.head.extra=new Array(A.head.extra_len)),s.arraySet(A.head.extra,$,Q,re,F)),512&A.flags&&(A.check=a(A.check,$,re,Q)),L-=re,Q+=re,A.length-=re),A.length))break e;A.length=0,A.mode=7;case 7:if(2048&A.flags){if(L===0)break e;for(re=0;F=$[Q+re++],A.head&&F&&A.length<65536&&(A.head.name+=String.fromCharCode(F)),F&&re<L;);if(512&A.flags&&(A.check=a(A.check,$,re,Q)),L-=re,Q+=re,F)break e}else A.head&&(A.head.name=null);A.length=0,A.mode=8;case 8:if(4096&A.flags){if(L===0)break e;for(re=0;F=$[Q+re++],A.head&&F&&A.length<65536&&(A.head.comment+=String.fromCharCode(F)),F&&re<L;);if(512&A.flags&&(A.check=a(A.check,$,re,Q)),L-=re,Q+=re,F)break e}else A.head&&(A.head.comment=null);A.mode=9;case 9:if(512&A.flags){for(;j<16;){if(L===0)break e;L--,U+=$[Q++]<<j,j+=8}if(U!==(65535&A.check)){P.msg="header crc mismatch",A.mode=30;break}j=U=0}A.head&&(A.head.hcrc=A.flags>>9&1,A.head.done=!0),P.adler=A.check=0,A.mode=12;break;case 10:for(;j<32;){if(L===0)break e;L--,U+=$[Q++]<<j,j+=8}P.adler=A.check=p(U),j=U=0,A.mode=11;case 11:if(A.havedict===0)return P.next_out=ee,P.avail_out=M,P.next_in=Q,P.avail_in=L,A.hold=U,A.bits=j,2;P.adler=A.check=1,A.mode=12;case 12:if(O===5||O===6)break e;case 13:if(A.last){U>>>=7&j,j-=7&j,A.mode=27;break}for(;j<3;){if(L===0)break e;L--,U+=$[Q++]<<j,j+=8}switch(A.last=1&U,j-=1,3&(U>>>=1)){case 0:A.mode=14;break;case 1:if(k(A),A.mode=20,O!==6)break;U>>>=2,j-=2;break e;case 2:A.mode=17;break;case 3:P.msg="invalid block type",A.mode=30}U>>>=2,j-=2;break;case 14:for(U>>>=7&j,j-=7&j;j<32;){if(L===0)break e;L--,U+=$[Q++]<<j,j+=8}if((65535&U)!=(U>>>16^65535)){P.msg="invalid stored block lengths",A.mode=30;break}if(A.length=65535&U,j=U=0,A.mode=15,O===6)break e;case 15:A.mode=16;case 16:if(re=A.length){if(L<re&&(re=L),M<re&&(re=M),re===0)break e;s.arraySet(te,$,Q,re,ee),L-=re,Q+=re,M-=re,ee+=re,A.length-=re;break}A.mode=12;break;case 17:for(;j<14;){if(L===0)break e;L--,U+=$[Q++]<<j,j+=8}if(A.nlen=257+(31&U),U>>>=5,j-=5,A.ndist=1+(31&U),U>>>=5,j-=5,A.ncode=4+(15&U),U>>>=4,j-=4,286<A.nlen||30<A.ndist){P.msg="too many length or distance symbols",A.mode=30;break}A.have=0,A.mode=18;case 18:for(;A.have<A.ncode;){for(;j<3;){if(L===0)break e;L--,U+=$[Q++]<<j,j+=8}A.lens[ye[A.have++]]=7&U,U>>>=3,j-=3}for(;A.have<19;)A.lens[ye[A.have++]]=0;if(A.lencode=A.lendyn,A.lenbits=7,ae={bits:A.lenbits},he=c(0,A.lens,0,19,A.lencode,0,A.work,ae),A.lenbits=ae.bits,he){P.msg="invalid code lengths set",A.mode=30;break}A.have=0,A.mode=19;case 19:for(;A.have<A.nlen+A.ndist;){for(;ie=(G=A.lencode[U&(1<<A.lenbits)-1])>>>16&255,se=65535&G,!((V=G>>>24)<=j);){if(L===0)break e;L--,U+=$[Q++]<<j,j+=8}if(se<16)U>>>=V,j-=V,A.lens[A.have++]=se;else{if(se===16){for(W=V+2;j<W;){if(L===0)break e;L--,U+=$[Q++]<<j,j+=8}if(U>>>=V,j-=V,A.have===0){P.msg="invalid bit length repeat",A.mode=30;break}F=A.lens[A.have-1],re=3+(3&U),U>>>=2,j-=2}else if(se===17){for(W=V+3;j<W;){if(L===0)break e;L--,U+=$[Q++]<<j,j+=8}j-=V,F=0,re=3+(7&(U>>>=V)),U>>>=3,j-=3}else{for(W=V+7;j<W;){if(L===0)break e;L--,U+=$[Q++]<<j,j+=8}j-=V,F=0,re=11+(127&(U>>>=V)),U>>>=7,j-=7}if(A.have+re>A.nlen+A.ndist){P.msg="invalid bit length repeat",A.mode=30;break}for(;re--;)A.lens[A.have++]=F}}if(A.mode===30)break;if(A.lens[256]===0){P.msg="invalid code -- missing end-of-block",A.mode=30;break}if(A.lenbits=9,ae={bits:A.lenbits},he=c(u,A.lens,0,A.nlen,A.lencode,0,A.work,ae),A.lenbits=ae.bits,he){P.msg="invalid literal/lengths set",A.mode=30;break}if(A.distbits=6,A.distcode=A.distdyn,ae={bits:A.distbits},he=c(h,A.lens,A.nlen,A.ndist,A.distcode,0,A.work,ae),A.distbits=ae.bits,he){P.msg="invalid distances set",A.mode=30;break}if(A.mode=20,O===6)break e;case 20:A.mode=21;case 21:if(6<=L&&258<=M){P.next_out=ee,P.avail_out=M,P.next_in=Q,P.avail_in=L,A.hold=U,A.bits=j,l(P,Z),ee=P.next_out,te=P.output,M=P.avail_out,Q=P.next_in,$=P.input,L=P.avail_in,U=A.hold,j=A.bits,A.mode===12&&(A.back=-1);break}for(A.back=0;ie=(G=A.lencode[U&(1<<A.lenbits)-1])>>>16&255,se=65535&G,!((V=G>>>24)<=j);){if(L===0)break e;L--,U+=$[Q++]<<j,j+=8}if(ie&&!(240&ie)){for(me=V,de=ie,ve=se;ie=(G=A.lencode[ve+((U&(1<<me+de)-1)>>me)])>>>16&255,se=65535&G,!(me+(V=G>>>24)<=j);){if(L===0)break e;L--,U+=$[Q++]<<j,j+=8}U>>>=me,j-=me,A.back+=me}if(U>>>=V,j-=V,A.back+=V,A.length=se,ie===0){A.mode=26;break}if(32&ie){A.back=-1,A.mode=12;break}if(64&ie){P.msg="invalid literal/length code",A.mode=30;break}A.extra=15&ie,A.mode=22;case 22:if(A.extra){for(W=A.extra;j<W;){if(L===0)break e;L--,U+=$[Q++]<<j,j+=8}A.length+=U&(1<<A.extra)-1,U>>>=A.extra,j-=A.extra,A.back+=A.extra}A.was=A.length,A.mode=23;case 23:for(;ie=(G=A.distcode[U&(1<<A.distbits)-1])>>>16&255,se=65535&G,!((V=G>>>24)<=j);){if(L===0)break e;L--,U+=$[Q++]<<j,j+=8}if(!(240&ie)){for(me=V,de=ie,ve=se;ie=(G=A.distcode[ve+((U&(1<<me+de)-1)>>me)])>>>16&255,se=65535&G,!(me+(V=G>>>24)<=j);){if(L===0)break e;L--,U+=$[Q++]<<j,j+=8}U>>>=me,j-=me,A.back+=me}if(U>>>=V,j-=V,A.back+=V,64&ie){P.msg="invalid distance code",A.mode=30;break}A.offset=se,A.extra=15&ie,A.mode=24;case 24:if(A.extra){for(W=A.extra;j<W;){if(L===0)break e;L--,U+=$[Q++]<<j,j+=8}A.offset+=U&(1<<A.extra)-1,U>>>=A.extra,j-=A.extra,A.back+=A.extra}if(A.offset>A.dmax){P.msg="invalid distance too far back",A.mode=30;break}A.mode=25;case 25:if(M===0)break e;if(re=Z-M,A.offset>re){if((re=A.offset-re)>A.whave&&A.sane){P.msg="invalid distance too far back",A.mode=30;break}ge=re>A.wnext?(re-=A.wnext,A.wsize-re):A.wnext-re,re>A.length&&(re=A.length),X=A.window}else X=te,ge=ee-A.offset,re=A.length;for(M<re&&(re=M),M-=re,A.length-=re;te[ee++]=X[ge++],--re;);A.length===0&&(A.mode=21);break;case 26:if(M===0)break e;te[ee++]=A.length,M--,A.mode=21;break;case 27:if(A.wrap){for(;j<32;){if(L===0)break e;L--,U|=$[Q++]<<j,j+=8}if(Z-=M,P.total_out+=Z,A.total+=Z,Z&&(P.adler=A.check=A.flags?a(A.check,te,Z,ee-Z):o(A.check,te,Z,ee-Z)),Z=M,(A.flags?U:p(U))!==A.check){P.msg="incorrect data check",A.mode=30;break}j=U=0}A.mode=28;case 28:if(A.wrap&&A.flags){for(;j<32;){if(L===0)break e;L--,U+=$[Q++]<<j,j+=8}if(U!==(4294967295&A.total)){P.msg="incorrect length check",A.mode=30;break}j=U=0}A.mode=29;case 29:he=1;break e;case 30:he=-3;break e;case 31:return-4;case 32:default:return d}return P.next_out=ee,P.avail_out=M,P.next_in=Q,P.avail_in=L,A.hold=U,A.bits=j,(A.wsize||Z!==P.avail_out&&A.mode<30&&(A.mode<27||O!==4))&&B(P,P.output,P.next_out,Z-P.avail_out)?(A.mode=31,-4):(H-=P.avail_in,Z-=P.avail_out,P.total_in+=H,P.total_out+=Z,A.total+=Z,A.wrap&&Z&&(P.adler=A.check=A.flags?a(A.check,te,Z,P.next_out-Z):o(A.check,te,Z,P.next_out-Z)),P.data_type=A.bits+(A.last?64:0)+(A.mode===12?128:0)+(A.mode===20||A.mode===15?256:0),(H==0&&Z===0||O===4)&&he===f&&(he=-5),he)},i.inflateEnd=function(P){if(!P||!P.state)return d;var O=P.state;return O.window&&(O.window=null),P.state=null,f},i.inflateGetHeader=function(P,O){var A;return P&&P.state&&2&(A=P.state).wrap?((A.head=O).done=!1,f):d},i.inflateSetDictionary=function(P,O){var A,$=O.length;return P&&P.state?(A=P.state).wrap!==0&&A.mode!==11?d:A.mode===11&&o(1,O,$,0)!==A.check?-3:B(P,O,$,$)?(A.mode=31,-4):(A.havedict=1,f):d},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,n,i){var s=r("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(u,h,f,d,g,_,m,p){var b,y,v,w,S,x,E,T,k,B=p.bits,P=0,O=0,A=0,$=0,te=0,Q=0,ee=0,L=0,M=0,U=0,j=null,H=0,Z=new s.Buf16(16),re=new s.Buf16(16),ge=null,X=0;for(P=0;P<=15;P++)Z[P]=0;for(O=0;O<d;O++)Z[h[f+O]]++;for(te=B,$=15;1<=$&&Z[$]===0;$--);if($<te&&(te=$),$===0)return g[_++]=20971520,g[_++]=20971520,p.bits=1,0;for(A=1;A<$&&Z[A]===0;A++);for(te<A&&(te=A),P=L=1;P<=15;P++)if(L<<=1,(L-=Z[P])<0)return-1;if(0<L&&(u===0||$!==1))return-1;for(re[1]=0,P=1;P<15;P++)re[P+1]=re[P]+Z[P];for(O=0;O<d;O++)h[f+O]!==0&&(m[re[h[f+O]]++]=O);if(x=u===0?(j=ge=m,19):u===1?(j=o,H-=257,ge=a,X-=257,256):(j=l,ge=c,-1),P=A,S=_,ee=O=U=0,v=-1,w=(M=1<<(Q=te))-1,u===1&&852<M||u===2&&592<M)return 1;for(;;){for(E=P-ee,k=m[O]<x?(T=0,m[O]):m[O]>x?(T=ge[X+m[O]],j[H+m[O]]):(T=96,0),b=1<<P-ee,A=y=1<<Q;g[S+(U>>ee)+(y-=b)]=E<<24|T<<16|k|0,y!==0;);for(b=1<<P-1;U&b;)b>>=1;if(b!==0?(U&=b-1,U+=b):U=0,O++,--Z[P]==0){if(P===$)break;P=h[f+m[O]]}if(te<P&&(U&w)!==v){for(ee===0&&(ee=te),S+=A,L=1<<(Q=P-ee);Q+ee<$&&!((L-=Z[Q+ee])<=0);)Q++,L<<=1;if(M+=1<<Q,u===1&&852<M||u===2&&592<M)return 1;g[v=U&w]=te<<24|Q<<16|S-_|0}}return U!==0&&(g[S+U]=P-ee<<24|64<<16|0),p.bits=te,0}},{"../utils/common":41}],51:[function(r,n,i){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,n,i){var s=r("../utils/common"),o=0,a=1;function l(G){for(var oe=G.length;0<=--oe;)G[oe]=0}var c=0,u=29,h=256,f=h+1+u,d=30,g=19,_=2*f+1,m=15,p=16,b=7,y=256,v=16,w=17,S=18,x=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],E=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],k=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],B=new Array(2*(f+2));l(B);var P=new Array(2*d);l(P);var O=new Array(512);l(O);var A=new Array(256);l(A);var $=new Array(u);l($);var te,Q,ee,L=new Array(d);function M(G,oe,ye,Se,pe){this.static_tree=G,this.extra_bits=oe,this.extra_base=ye,this.elems=Se,this.max_length=pe,this.has_stree=G&&G.length}function U(G,oe){this.dyn_tree=G,this.max_code=0,this.stat_desc=oe}function j(G){return G<256?O[G]:O[256+(G>>>7)]}function H(G,oe){G.pending_buf[G.pending++]=255&oe,G.pending_buf[G.pending++]=oe>>>8&255}function Z(G,oe,ye){G.bi_valid>p-ye?(G.bi_buf|=oe<<G.bi_valid&65535,H(G,G.bi_buf),G.bi_buf=oe>>p-G.bi_valid,G.bi_valid+=ye-p):(G.bi_buf|=oe<<G.bi_valid&65535,G.bi_valid+=ye)}function re(G,oe,ye){Z(G,ye[2*oe],ye[2*oe+1])}function ge(G,oe){for(var ye=0;ye|=1&G,G>>>=1,ye<<=1,0<--oe;);return ye>>>1}function X(G,oe,ye){var Se,pe,Te=new Array(m+1),Ae=0;for(Se=1;Se<=m;Se++)Te[Se]=Ae=Ae+ye[Se-1]<<1;for(pe=0;pe<=oe;pe++){var xe=G[2*pe+1];xe!==0&&(G[2*pe]=ge(Te[xe]++,xe))}}function V(G){var oe;for(oe=0;oe<f;oe++)G.dyn_ltree[2*oe]=0;for(oe=0;oe<d;oe++)G.dyn_dtree[2*oe]=0;for(oe=0;oe<g;oe++)G.bl_tree[2*oe]=0;G.dyn_ltree[2*y]=1,G.opt_len=G.static_len=0,G.last_lit=G.matches=0}function ie(G){8<G.bi_valid?H(G,G.bi_buf):0<G.bi_valid&&(G.pending_buf[G.pending++]=G.bi_buf),G.bi_buf=0,G.bi_valid=0}function se(G,oe,ye,Se){var pe=2*oe,Te=2*ye;return G[pe]<G[Te]||G[pe]===G[Te]&&Se[oe]<=Se[ye]}function me(G,oe,ye){for(var Se=G.heap[ye],pe=ye<<1;pe<=G.heap_len&&(pe<G.heap_len&&se(oe,G.heap[pe+1],G.heap[pe],G.depth)&&pe++,!se(oe,Se,G.heap[pe],G.depth));)G.heap[ye]=G.heap[pe],ye=pe,pe<<=1;G.heap[ye]=Se}function de(G,oe,ye){var Se,pe,Te,Ae,xe=0;if(G.last_lit!==0)for(;Se=G.pending_buf[G.d_buf+2*xe]<<8|G.pending_buf[G.d_buf+2*xe+1],pe=G.pending_buf[G.l_buf+xe],xe++,Se===0?re(G,pe,oe):(re(G,(Te=A[pe])+h+1,oe),(Ae=x[Te])!==0&&Z(G,pe-=$[Te],Ae),re(G,Te=j(--Se),ye),(Ae=E[Te])!==0&&Z(G,Se-=L[Te],Ae)),xe<G.last_lit;);re(G,y,oe)}function ve(G,oe){var ye,Se,pe,Te=oe.dyn_tree,Ae=oe.stat_desc.static_tree,xe=oe.stat_desc.has_stree,ue=oe.stat_desc.elems,Ce=-1;for(G.heap_len=0,G.heap_max=_,ye=0;ye<ue;ye++)Te[2*ye]!==0?(G.heap[++G.heap_len]=Ce=ye,G.depth[ye]=0):Te[2*ye+1]=0;for(;G.heap_len<2;)Te[2*(pe=G.heap[++G.heap_len]=Ce<2?++Ce:0)]=1,G.depth[pe]=0,G.opt_len--,xe&&(G.static_len-=Ae[2*pe+1]);for(oe.max_code=Ce,ye=G.heap_len>>1;1<=ye;ye--)me(G,Te,ye);for(pe=ue;ye=G.heap[1],G.heap[1]=G.heap[G.heap_len--],me(G,Te,1),Se=G.heap[1],G.heap[--G.heap_max]=ye,G.heap[--G.heap_max]=Se,Te[2*pe]=Te[2*ye]+Te[2*Se],G.depth[pe]=(G.depth[ye]>=G.depth[Se]?G.depth[ye]:G.depth[Se])+1,Te[2*ye+1]=Te[2*Se+1]=pe,G.heap[1]=pe++,me(G,Te,1),2<=G.heap_len;);G.heap[--G.heap_max]=G.heap[1],function(Pe,ze){var z,I,N,q,le,be,we=ze.dyn_tree,qe=ze.max_code,st=ze.stat_desc.static_tree,wt=ze.stat_desc.has_stree,Ct=ze.stat_desc.extra_bits,pt=ze.stat_desc.extra_base,Cc=ze.stat_desc.max_length,Nf=0;for(q=0;q<=m;q++)Pe.bl_count[q]=0;for(we[2*Pe.heap[Pe.heap_max]+1]=0,z=Pe.heap_max+1;z<_;z++)Cc<(q=we[2*we[2*(I=Pe.heap[z])+1]+1]+1)&&(q=Cc,Nf++),we[2*I+1]=q,qe<I||(Pe.bl_count[q]++,le=0,pt<=I&&(le=Ct[I-pt]),be=we[2*I],Pe.opt_len+=be*(q+le),wt&&(Pe.static_len+=be*(st[2*I+1]+le)));if(Nf!==0){do{for(q=Cc-1;Pe.bl_count[q]===0;)q--;Pe.bl_count[q]--,Pe.bl_count[q+1]+=2,Pe.bl_count[Cc]--,Nf-=2}while(0<Nf);for(q=Cc;q!==0;q--)for(I=Pe.bl_count[q];I!==0;)qe<(N=Pe.heap[--z])||(we[2*N+1]!==q&&(Pe.opt_len+=(q-we[2*N+1])*we[2*N],we[2*N+1]=q),I--)}}(G,oe),X(Te,Ce,G.bl_count)}function F(G,oe,ye){var Se,pe,Te=-1,Ae=oe[1],xe=0,ue=7,Ce=4;for(Ae===0&&(ue=138,Ce=3),oe[2*(ye+1)+1]=65535,Se=0;Se<=ye;Se++)pe=Ae,Ae=oe[2*(Se+1)+1],++xe<ue&&pe===Ae||(xe<Ce?G.bl_tree[2*pe]+=xe:pe!==0?(pe!==Te&&G.bl_tree[2*pe]++,G.bl_tree[2*v]++):xe<=10?G.bl_tree[2*w]++:G.bl_tree[2*S]++,Te=pe,Ce=(xe=0)===Ae?(ue=138,3):pe===Ae?(ue=6,3):(ue=7,4))}function he(G,oe,ye){var Se,pe,Te=-1,Ae=oe[1],xe=0,ue=7,Ce=4;for(Ae===0&&(ue=138,Ce=3),Se=0;Se<=ye;Se++)if(pe=Ae,Ae=oe[2*(Se+1)+1],!(++xe<ue&&pe===Ae)){if(xe<Ce)for(;re(G,pe,G.bl_tree),--xe!=0;);else pe!==0?(pe!==Te&&(re(G,pe,G.bl_tree),xe--),re(G,v,G.bl_tree),Z(G,xe-3,2)):xe<=10?(re(G,w,G.bl_tree),Z(G,xe-3,3)):(re(G,S,G.bl_tree),Z(G,xe-11,7));Te=pe,Ce=(xe=0)===Ae?(ue=138,3):pe===Ae?(ue=6,3):(ue=7,4)}}l(L);var ae=!1;function W(G,oe,ye,Se){Z(G,(c<<1)+(Se?1:0),3),function(pe,Te,Ae,xe){ie(pe),H(pe,Ae),H(pe,~Ae),s.arraySet(pe.pending_buf,pe.window,Te,Ae,pe.pending),pe.pending+=Ae}(G,oe,ye)}i._tr_init=function(G){ae||(function(){var oe,ye,Se,pe,Te,Ae=new Array(m+1);for(pe=Se=0;pe<u-1;pe++)for($[pe]=Se,oe=0;oe<1<<x[pe];oe++)A[Se++]=pe;for(A[Se-1]=pe,pe=Te=0;pe<16;pe++)for(L[pe]=Te,oe=0;oe<1<<E[pe];oe++)O[Te++]=pe;for(Te>>=7;pe<d;pe++)for(L[pe]=Te<<7,oe=0;oe<1<<E[pe]-7;oe++)O[256+Te++]=pe;for(ye=0;ye<=m;ye++)Ae[ye]=0;for(oe=0;oe<=143;)B[2*oe+1]=8,oe++,Ae[8]++;for(;oe<=255;)B[2*oe+1]=9,oe++,Ae[9]++;for(;oe<=279;)B[2*oe+1]=7,oe++,Ae[7]++;for(;oe<=287;)B[2*oe+1]=8,oe++,Ae[8]++;for(X(B,f+1,Ae),oe=0;oe<d;oe++)P[2*oe+1]=5,P[2*oe]=ge(oe,5);te=new M(B,x,h+1,f,m),Q=new M(P,E,0,d,m),ee=new M(new Array(0),T,0,g,b)}(),ae=!0),G.l_desc=new U(G.dyn_ltree,te),G.d_desc=new U(G.dyn_dtree,Q),G.bl_desc=new U(G.bl_tree,ee),G.bi_buf=0,G.bi_valid=0,V(G)},i._tr_stored_block=W,i._tr_flush_block=function(G,oe,ye,Se){var pe,Te,Ae=0;0<G.level?(G.strm.data_type===2&&(G.strm.data_type=function(xe){var ue,Ce=4093624447;for(ue=0;ue<=31;ue++,Ce>>>=1)if(1&Ce&&xe.dyn_ltree[2*ue]!==0)return o;if(xe.dyn_ltree[18]!==0||xe.dyn_ltree[20]!==0||xe.dyn_ltree[26]!==0)return a;for(ue=32;ue<h;ue++)if(xe.dyn_ltree[2*ue]!==0)return a;return o}(G)),ve(G,G.l_desc),ve(G,G.d_desc),Ae=function(xe){var ue;for(F(xe,xe.dyn_ltree,xe.l_desc.max_code),F(xe,xe.dyn_dtree,xe.d_desc.max_code),ve(xe,xe.bl_desc),ue=g-1;3<=ue&&xe.bl_tree[2*k[ue]+1]===0;ue--);return xe.opt_len+=3*(ue+1)+5+5+4,ue}(G),pe=G.opt_len+3+7>>>3,(Te=G.static_len+3+7>>>3)<=pe&&(pe=Te)):pe=Te=ye+5,ye+4<=pe&&oe!==-1?W(G,oe,ye,Se):G.strategy===4||Te===pe?(Z(G,2+(Se?1:0),3),de(G,B,P)):(Z(G,4+(Se?1:0),3),function(xe,ue,Ce,Pe){var ze;for(Z(xe,ue-257,5),Z(xe,Ce-1,5),Z(xe,Pe-4,4),ze=0;ze<Pe;ze++)Z(xe,xe.bl_tree[2*k[ze]+1],3);he(xe,xe.dyn_ltree,ue-1),he(xe,xe.dyn_dtree,Ce-1)}(G,G.l_desc.max_code+1,G.d_desc.max_code+1,Ae+1),de(G,G.dyn_ltree,G.dyn_dtree)),V(G),Se&&ie(G)},i._tr_tally=function(G,oe,ye){return G.pending_buf[G.d_buf+2*G.last_lit]=oe>>>8&255,G.pending_buf[G.d_buf+2*G.last_lit+1]=255&oe,G.pending_buf[G.l_buf+G.last_lit]=255&ye,G.last_lit++,oe===0?G.dyn_ltree[2*ye]++:(G.matches++,oe--,G.dyn_ltree[2*(A[ye]+h+1)]++,G.dyn_dtree[2*j(oe)]++),G.last_lit===G.lit_bufsize-1},i._tr_align=function(G){Z(G,2,3),re(G,y,B),function(oe){oe.bi_valid===16?(H(oe,oe.bi_buf),oe.bi_buf=0,oe.bi_valid=0):8<=oe.bi_valid&&(oe.pending_buf[oe.pending++]=255&oe.bi_buf,oe.bi_buf>>=8,oe.bi_valid-=8)}(G)}},{"../utils/common":41}],53:[function(r,n,i){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,n,i){(function(s){(function(o,a){if(!o.setImmediate){var l,c,u,h,f=1,d={},g=!1,_=o.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(o);m=m&&m.setTimeout?m:o,l={}.toString.call(o.process)==="[object process]"?function(v){Ft.nextTick(function(){b(v)})}:function(){if(o.postMessage&&!o.importScripts){var v=!0,w=o.onmessage;return o.onmessage=function(){v=!1},o.postMessage("","*"),o.onmessage=w,v}}()?(h="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",y,!1):o.attachEvent("onmessage",y),function(v){o.postMessage(h+v,"*")}):o.MessageChannel?((u=new MessageChannel).port1.onmessage=function(v){b(v.data)},function(v){u.port2.postMessage(v)}):_&&"onreadystatechange"in _.createElement("script")?(c=_.documentElement,function(v){var w=_.createElement("script");w.onreadystatechange=function(){b(v),w.onreadystatechange=null,c.removeChild(w),w=null},c.appendChild(w)}):function(v){setTimeout(b,0,v)},m.setImmediate=function(v){typeof v!="function"&&(v=new Function(""+v));for(var w=new Array(arguments.length-1),S=0;S<w.length;S++)w[S]=arguments[S+1];var x={callback:v,args:w};return d[f]=x,l(f),f++},m.clearImmediate=p}function p(v){delete d[v]}function b(v){if(g)setTimeout(b,0,v);else{var w=d[v];if(w){g=!0;try{(function(S){var x=S.callback,E=S.args;switch(E.length){case 0:x();break;case 1:x(E[0]);break;case 2:x(E[0],E[1]);break;case 3:x(E[0],E[1],E[2]);break;default:x.apply(a,E)}})(w)}finally{p(v),g=!1}}}}function y(v){v.source===o&&typeof v.data=="string"&&v.data.indexOf(h)===0&&b(+v.data.slice(h.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Hn<"u"?Hn:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(YD);var wV=YD.exports;const EV=mn(wV);var XD={exports:{}};(function(t,e){(function(r,n){n()})(Hn,function(){function r(c,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function n(c,u,h){var f=new XMLHttpRequest;f.open("GET",c),f.responseType="blob",f.onload=function(){l(f.response,u,h)},f.onerror=function(){console.error("could not download file")},f.send()}function i(c){var u=new XMLHttpRequest;u.open("HEAD",c,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function s(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(u)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Hn=="object"&&Hn.global===Hn?Hn:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(c,u,h){var f=o.URL||o.webkitURL,d=document.createElement("a");u=u||c.name||"download",d.download=u,d.rel="noopener",typeof c=="string"?(d.href=c,d.origin===location.origin?s(d):i(d.href)?n(c,u,h):s(d,d.target="_blank")):(d.href=f.createObjectURL(c),setTimeout(function(){f.revokeObjectURL(d.href)},4e4),setTimeout(function(){s(d)},0))}:"msSaveOrOpenBlob"in navigator?function(c,u,h){if(u=u||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(r(c,h),u);else if(i(c))n(c,u,h);else{var f=document.createElement("a");f.href=c,f.target="_blank",setTimeout(function(){s(f)})}}:function(c,u,h,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof c=="string")return n(c,u,h);var d=c.type==="application/octet-stream",g=/constructor/i.test(o.HTMLElement)||o.safari,_=/CriOS\/[\d]+/.test(navigator.userAgent);if((_||d&&g||a)&&typeof FileReader<"u"){var m=new FileReader;m.onloadend=function(){var y=m.result;y=_?y:y.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=y:location=y,f=null},m.readAsDataURL(c)}else{var p=o.URL||o.webkitURL,b=p.createObjectURL(c);f?f.location=b:location.href=b,f=null,setTimeout(function(){p.revokeObjectURL(b)},4e4)}});o.saveAs=l.saveAs=l,t.exports=l})})(XD);var SV=XD.exports;function yg(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof Ft=="object"&&Ft.version!==void 0?`Node.js/${Ft.version.substr(1)} (${Ft.platform}; ${Ft.arch})`:"<environment undetectable>"}function cw(t,e,r,n){if(typeof r!="function")throw new Error("method for before hook must be a function");return n||(n={}),Array.isArray(e)?e.reverse().reduce((i,s)=>cw.bind(null,t,s,i,n),r)():Promise.resolve().then(()=>t.registry[e]?t.registry[e].reduce((i,s)=>s.hook.bind(null,i,n),r)():r(n))}function xV(t,e,r,n){const i=n;t.registry[r]||(t.registry[r]=[]),e==="before"&&(n=(s,o)=>Promise.resolve().then(i.bind(null,o)).then(s.bind(null,o))),e==="after"&&(n=(s,o)=>{let a;return Promise.resolve().then(s.bind(null,o)).then(l=>(a=l,i(a,o))).then(()=>a)}),e==="error"&&(n=(s,o)=>Promise.resolve().then(s.bind(null,o)).catch(a=>i(a,o))),t.registry[r].push({hook:n,orig:i})}function TV(t,e,r){if(!t.registry[e])return;const n=t.registry[e].map(i=>i.orig).indexOf(r);n!==-1&&t.registry[e].splice(n,1)}const eT=Function.bind,tT=eT.bind(eT);function QD(t,e,r){const n=tT(TV,null).apply(null,r?[e,r]:[e]);t.api={remove:n},t.remove=n,["before","error","after","wrap"].forEach(i=>{const s=r?[e,i,r]:[e,i];t[i]=t.api[i]=tT(xV,null).apply(null,s)})}function CV(){const t=Symbol("Singular"),e={registry:{}},r=cw.bind(null,e,t);return QD(r,e,t),r}function kV(){const t={registry:{}},e=cw.bind(null,t);return QD(e,t),e}const AV={Singular:CV,Collection:kV};var RV="0.0.0-development",PV=`octokit-endpoint.js/${RV} ${yg()}`,IV={method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":PV},mediaType:{format:""}};function DV(t){return t?Object.keys(t).reduce((e,r)=>(e[r.toLowerCase()]=t[r],e),{}):{}}function OV(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);if(e===null)return!0;const r=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Function.prototype.call(r)===Function.prototype.call(t)}function ZD(t,e){const r=Object.assign({},t);return Object.keys(e).forEach(n=>{OV(e[n])?n in t?r[n]=ZD(t[n],e[n]):Object.assign(r,{[n]:e[n]}):Object.assign(r,{[n]:e[n]})}),r}function rT(t){for(const e in t)t[e]===void 0&&delete t[e];return t}function l1(t,e,r){if(typeof e=="string"){let[i,s]=e.split(" ");r=Object.assign(s?{method:i,url:s}:{url:i},r)}else r=Object.assign({},e);r.headers=DV(r.headers),rT(r),rT(r.headers);const n=ZD(t||{},r);return r.url==="/graphql"&&(t&&t.mediaType.previews?.length&&(n.mediaType.previews=t.mediaType.previews.filter(i=>!n.mediaType.previews.includes(i)).concat(n.mediaType.previews)),n.mediaType.previews=(n.mediaType.previews||[]).map(i=>i.replace(/-preview/,""))),n}function LV(t,e){const r=/\?/.test(t)?"&":"?",n=Object.keys(e);return n.length===0?t:t+r+n.map(i=>i==="q"?"q="+e.q.split("+").map(encodeURIComponent).join("+"):`${i}=${encodeURIComponent(e[i])}`).join("&")}var NV=/\{[^}]+\}/g;function MV(t){return t.replace(/^\W+|\W+$/g,"").split(/,/)}function BV(t){const e=t.match(NV);return e?e.map(MV).reduce((r,n)=>r.concat(n),[]):[]}function nT(t,e){const r={__proto__:null};for(const n of Object.keys(t))e.indexOf(n)===-1&&(r[n]=t[n]);return r}function JD(t){return t.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e}).join("")}function tl(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Ac(t,e,r){return e=t==="+"||t==="#"?JD(e):tl(e),r?tl(r)+"="+e:e}function Na(t){return t!=null}function Y0(t){return t===";"||t==="&"||t==="?"}function FV(t,e,r,n){var i=t[r],s=[];if(Na(i)&&i!=="")if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")i=i.toString(),n&&n!=="*"&&(i=i.substring(0,parseInt(n,10))),s.push(Ac(e,i,Y0(e)?r:""));else if(n==="*")Array.isArray(i)?i.filter(Na).forEach(function(o){s.push(Ac(e,o,Y0(e)?r:""))}):Object.keys(i).forEach(function(o){Na(i[o])&&s.push(Ac(e,i[o],o))});else{const o=[];Array.isArray(i)?i.filter(Na).forEach(function(a){o.push(Ac(e,a))}):Object.keys(i).forEach(function(a){Na(i[a])&&(o.push(tl(a)),o.push(Ac(e,i[a].toString())))}),Y0(e)?s.push(tl(r)+"="+o.join(",")):o.length!==0&&s.push(o.join(","))}else e===";"?Na(i)&&s.push(tl(r)):i===""&&(e==="&"||e==="?")?s.push(tl(r)+"="):i===""&&s.push("");return s}function HV(t){return{expand:UV.bind(null,t)}}function UV(t,e){var r=["+","#",".","/",";","?","&"];return t=t.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(n,i,s){if(i){let a="";const l=[];if(r.indexOf(i.charAt(0))!==-1&&(a=i.charAt(0),i=i.substr(1)),i.split(/,/g).forEach(function(c){var u=/([^:\*]*)(?::(\d+)|(\*))?/.exec(c);l.push(FV(e,a,u[1],u[2]||u[3]))}),a&&a!=="+"){var o=",";return a==="?"?o="&":a!=="#"&&(o=a),(l.length!==0?a:"")+l.join(o)}else return l.join(",")}else return JD(s)}),t==="/"?t:t.replace(/\/$/,"")}function eO(t){let e=t.method.toUpperCase(),r=(t.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),n=Object.assign({},t.headers),i,s=nT(t,["method","baseUrl","url","headers","request","mediaType"]);const o=BV(r);r=HV(r).expand(s),/^http/.test(r)||(r=t.baseUrl+r);const a=Object.keys(t).filter(u=>o.includes(u)).concat("baseUrl"),l=nT(s,a);if(!/application\/octet-stream/i.test(n.accept)&&(t.mediaType.format&&(n.accept=n.accept.split(/,/).map(u=>u.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${t.mediaType.format}`)).join(",")),r.endsWith("/graphql")&&t.mediaType.previews?.length)){const u=n.accept.match(/[\w-]+(?=-preview)/g)||[];n.accept=u.concat(t.mediaType.previews).map(h=>{const f=t.mediaType.format?`.${t.mediaType.format}`:"+json";return`application/vnd.github.${h}-preview${f}`}).join(",")}return["GET","HEAD"].includes(e)?r=LV(r,l):"data"in l?i=l.data:Object.keys(l).length&&(i=l),!n["content-type"]&&typeof i<"u"&&(n["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(e)&&typeof i>"u"&&(i=""),Object.assign({method:e,url:r,headers:n},typeof i<"u"?{body:i}:null,t.request?{request:t.request}:null)}function jV(t,e,r){return eO(l1(t,e,r))}function tO(t,e){const r=l1(t,e),n=jV.bind(null,r);return Object.assign(n,{DEFAULTS:r,defaults:tO.bind(null,r),merge:l1.bind(null,r),parse:eO})}var $V=tO(null,IV);class td extends Error{name;status;request;response;constructor(e,r,n){super(e),this.name="HttpError",this.status=Number.parseInt(r),Number.isNaN(this.status)&&(this.status=0),"response"in n&&(this.response=n.response);const i=Object.assign({},n.request);n.request.headers.authorization&&(i.headers=Object.assign({},n.request.headers,{authorization:n.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),i.url=i.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=i}}var zV="0.0.0-development",VV={headers:{"user-agent":`octokit-request.js/${zV} ${yg()}`}};function WV(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);if(e===null)return!0;const r=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Function.prototype.call(r)===Function.prototype.call(t)}async function iT(t){const e=t.request?.fetch||globalThis.fetch;if(!e)throw new Error("fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing");const r=t.request?.log||console,n=t.request?.parseSuccessResponseBody!==!1,i=WV(t.body)||Array.isArray(t.body)?JSON.stringify(t.body):t.body,s=Object.fromEntries(Object.entries(t.headers).map(([h,f])=>[h,String(f)]));let o;try{o=await e(t.url,{method:t.method,body:i,redirect:t.request?.redirect,headers:s,signal:t.request?.signal,...t.body&&{duplex:"half"}})}catch(h){let f="Unknown Error";if(h instanceof Error){if(h.name==="AbortError")throw h.status=500,h;f=h.message,h.name==="TypeError"&&"cause"in h&&(h.cause instanceof Error?f=h.cause.message:typeof h.cause=="string"&&(f=h.cause))}const d=new td(f,500,{request:t});throw d.cause=h,d}const a=o.status,l=o.url,c={};for(const[h,f]of o.headers)c[h]=f;const u={url:l,status:a,headers:c,data:""};if("deprecation"in c){const h=c.link&&c.link.match(/<([^>]+)>; rel="deprecation"/),f=h&&h.pop();r.warn(`[@octokit/request] "${t.method} ${t.url}" is deprecated. It is scheduled to be removed on ${c.sunset}${f?`. See ${f}`:""}`)}if(a===204||a===205)return u;if(t.method==="HEAD"){if(a<400)return u;throw new td(o.statusText,a,{response:u,request:t})}if(a===304)throw u.data=await X0(o),new td("Not modified",a,{response:u,request:t});if(a>=400)throw u.data=await X0(o),new td(GV(u.data),a,{response:u,request:t});return u.data=n?await X0(o):o.body,u}async function X0(t){const e=t.headers.get("content-type");return/application\/json/.test(e)?t.json().catch(()=>t.text()).catch(()=>""):!e||/^text\/|charset=utf-8$/.test(e)?t.text():t.arrayBuffer()}function GV(t){if(typeof t=="string")return t;if(t instanceof ArrayBuffer)return"Unknown error";if("message"in t){const e="documentation_url"in t?` - ${t.documentation_url}`:"";return Array.isArray(t.errors)?`${t.message}: ${t.errors.map(r=>JSON.stringify(r)).join(", ")}${e}`:`${t.message}${e}`}return`Unknown error: ${JSON.stringify(t)}`}function c1(t,e){const r=t.defaults(e);return Object.assign(function(i,s){const o=r.merge(i,s);if(!o.request||!o.request.hook)return iT(r.parse(o));const a=(l,c)=>iT(r.parse(r.merge(l,c)));return Object.assign(a,{endpoint:r,defaults:c1.bind(null,r)}),o.request.hook(a,o)},{endpoint:r,defaults:c1.bind(null,r)})}var u1=c1($V,VV),qV="0.0.0-development";function KV(t){return`Request failed due to following response errors:
`+t.errors.map(e=>` - ${e.message}`).join(`
`)}var YV=class extends Error{constructor(t,e,r){super(KV(r)),this.request=t,this.headers=e,this.response=r,this.errors=r.errors,this.data=r.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}name="GraphqlResponseError";errors;data},XV=["method","baseUrl","url","headers","request","query","mediaType"],QV=["query","method","url"],sT=/\/api\/v3\/?$/;function ZV(t,e,r){if(r){if(typeof e=="string"&&"query"in r)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(const o in r)if(QV.includes(o))return Promise.reject(new Error(`[@octokit/graphql] "${o}" cannot be used as variable name`))}const n=typeof e=="string"?Object.assign({query:e},r):e,i=Object.keys(n).reduce((o,a)=>XV.includes(a)?(o[a]=n[a],o):(o.variables||(o.variables={}),o.variables[a]=n[a],o),{}),s=n.baseUrl||t.endpoint.DEFAULTS.baseUrl;return sT.test(s)&&(i.url=s.replace(sT,"/api/graphql")),t(i).then(o=>{if(o.data.errors){const a={};for(const l of Object.keys(o.headers))a[l]=o.headers[l];throw new YV(i,a,o.data)}return o.data.data})}function uw(t,e){const r=t.defaults(e);return Object.assign((i,s)=>ZV(r,i,s),{defaults:uw.bind(null,r),endpoint:r.endpoint})}uw(u1,{headers:{"user-agent":`octokit-graphql.js/${qV} ${yg()}`},method:"POST",url:"/graphql"});function JV(t){return uw(t,{method:"POST",url:"/graphql"})}var eW=/^v1\./,tW=/^ghs_/,rW=/^ghu_/;async function nW(t){const e=t.split(/\./).length===3,r=eW.test(t)||tW.test(t),n=rW.test(t);return{type:"token",token:t,tokenType:e?"app":r?"installation":n?"user-to-server":"oauth"}}function iW(t){return t.split(/\./).length===3?`bearer ${t}`:`token ${t}`}async function sW(t,e,r,n){const i=e.endpoint.merge(r,n);return i.headers.authorization=iW(t),e(i)}var oW=function(e){if(!e)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof e!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return e=e.replace(/^(token|bearer) +/i,""),Object.assign(nW.bind(null,e),{hook:sW.bind(null,e)})};const rO="6.1.2",oT=()=>{},aW=console.warn.bind(console),lW=console.error.bind(console),aT=`octokit-core.js/${rO} ${yg()}`;let cW=class{static VERSION=rO;static defaults(e){return class extends this{constructor(...n){const i=n[0]||{};if(typeof e=="function"){super(e(i));return}super(Object.assign({},e,i,i.userAgent&&e.userAgent?{userAgent:`${i.userAgent} ${e.userAgent}`}:null))}}}static plugins=[];static plugin(...e){const r=this.plugins;return class extends this{static plugins=r.concat(e.filter(i=>!r.includes(i)))}}constructor(e={}){const r=new AV.Collection,n={baseUrl:u1.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},e.request,{hook:r.bind(null,"request")}),mediaType:{previews:[],format:""}};if(n.headers["user-agent"]=e.userAgent?`${e.userAgent} ${aT}`:aT,e.baseUrl&&(n.baseUrl=e.baseUrl),e.previews&&(n.mediaType.previews=e.previews),e.timeZone&&(n.headers["time-zone"]=e.timeZone),this.request=u1.defaults(n),this.graphql=JV(this.request).defaults(n),this.log=Object.assign({debug:oT,info:oT,warn:aW,error:lW},e.log),this.hook=r,e.authStrategy){const{authStrategy:s,...o}=e,a=s(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:o},e.auth));r.wrap("request",a.hook),this.auth=a}else if(!e.auth)this.auth=async()=>({type:"unauthenticated"});else{const s=oW(e.auth);r.wrap("request",s.hook),this.auth=s}const i=this.constructor;for(let s=0;s<i.plugins.length;++s)Object.assign(this,i.plugins[s](this,e))}request;graphql;log;hook;auth};const uW="5.3.1";function nO(t){t.hook.wrap("request",(e,r)=>{t.log.debug("request",r);const n=Date.now(),i=t.request.endpoint.parse(r),s=i.url.replace(r.baseUrl,"");return e(r).then(o=>{const a=o.headers["x-github-request-id"];return t.log.info(`${i.method} ${s} - ${o.status} with id ${a} in ${Date.now()-n}ms`),o}).catch(o=>{const a=o.response?.headers["x-github-request-id"]||"UNKNOWN";throw t.log.error(`${i.method} ${s} - ${o.status} with id ${a} in ${Date.now()-n}ms`),o})})}nO.VERSION=uW;var hW="0.0.0-development";function fW(t){if(!t.data)return{...t,data:[]};if(!("total_count"in t.data&&!("url"in t.data)))return t;const r=t.data.incomplete_results,n=t.data.repository_selection,i=t.data.total_count;delete t.data.incomplete_results,delete t.data.repository_selection,delete t.data.total_count;const s=Object.keys(t.data)[0],o=t.data[s];return t.data=o,typeof r<"u"&&(t.data.incomplete_results=r),typeof n<"u"&&(t.data.repository_selection=n),t.data.total_count=i,t}function hw(t,e,r){const n=typeof e=="function"?e.endpoint(r):t.request.endpoint(e,r),i=typeof e=="function"?e:t.request,s=n.method,o=n.headers;let a=n.url;return{[Symbol.asyncIterator]:()=>({async next(){if(!a)return{done:!0};try{const l=await i({method:s,url:a,headers:o}),c=fW(l);return a=((c.headers.link||"").match(/<([^>]+)>;\s*rel="next"/)||[])[1],{value:c}}catch(l){if(l.status!==409)throw l;return a="",{value:{status:200,headers:{},data:[]}}}}})}}function iO(t,e,r,n){return typeof r=="function"&&(n=r,r=void 0),sO(t,[],hw(t,e,r)[Symbol.asyncIterator](),n)}function sO(t,e,r,n){return r.next().then(i=>{if(i.done)return e;let s=!1;function o(){s=!0}return e=e.concat(n?n(i.value,o):i.value.data),s?e:sO(t,e,r,n)})}Object.assign(iO,{iterator:hw});function oO(t){return{paginate:Object.assign(iO.bind(null,t),{iterator:hw.bind(null,t)})}}oO.VERSION=hW;const dW="13.2.6",pW={actions:{addCustomLabelsToSelfHostedRunnerForOrg:["POST /orgs/{org}/actions/runners/{runner_id}/labels"],addCustomLabelsToSelfHostedRunnerForRepo:["POST /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],addSelectedRepoToOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],addSelectedRepoToOrgVariable:["PUT /orgs/{org}/actions/variables/{name}/repositories/{repository_id}"],approveWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/approve"],cancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/cancel"],createEnvironmentVariable:["POST /repos/{owner}/{repo}/environments/{environment_name}/variables"],createOrUpdateEnvironmentSecret:["PUT /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}"],createOrUpdateOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/actions/secrets/{secret_name}"],createOrgVariable:["POST /orgs/{org}/actions/variables"],createRegistrationTokenForOrg:["POST /orgs/{org}/actions/runners/registration-token"],createRegistrationTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/registration-token"],createRemoveTokenForOrg:["POST /orgs/{org}/actions/runners/remove-token"],createRemoveTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/remove-token"],createRepoVariable:["POST /repos/{owner}/{repo}/actions/variables"],createWorkflowDispatch:["POST /repos/{owner}/{repo}/actions/workflows/{workflow_id}/dispatches"],deleteActionsCacheById:["DELETE /repos/{owner}/{repo}/actions/caches/{cache_id}"],deleteActionsCacheByKey:["DELETE /repos/{owner}/{repo}/actions/caches{?key,ref}"],deleteArtifact:["DELETE /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],deleteEnvironmentSecret:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}"],deleteEnvironmentVariable:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}"],deleteOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}"],deleteOrgVariable:["DELETE /orgs/{org}/actions/variables/{name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/actions/secrets/{secret_name}"],deleteRepoVariable:["DELETE /repos/{owner}/{repo}/actions/variables/{name}"],deleteSelfHostedRunnerFromOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}"],deleteSelfHostedRunnerFromRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}"],deleteWorkflowRun:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}"],deleteWorkflowRunLogs:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],disableSelectedRepositoryGithubActionsOrganization:["DELETE /orgs/{org}/actions/permissions/repositories/{repository_id}"],disableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/disable"],downloadArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}/{archive_format}"],downloadJobLogsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}/logs"],downloadWorkflowRunAttemptLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/logs"],downloadWorkflowRunLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],enableSelectedRepositoryGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories/{repository_id}"],enableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/enable"],forceCancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/force-cancel"],generateRunnerJitconfigForOrg:["POST /orgs/{org}/actions/runners/generate-jitconfig"],generateRunnerJitconfigForRepo:["POST /repos/{owner}/{repo}/actions/runners/generate-jitconfig"],getActionsCacheList:["GET /repos/{owner}/{repo}/actions/caches"],getActionsCacheUsage:["GET /repos/{owner}/{repo}/actions/cache/usage"],getActionsCacheUsageByRepoForOrg:["GET /orgs/{org}/actions/cache/usage-by-repository"],getActionsCacheUsageForOrg:["GET /orgs/{org}/actions/cache/usage"],getAllowedActionsOrganization:["GET /orgs/{org}/actions/permissions/selected-actions"],getAllowedActionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/selected-actions"],getArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],getCustomOidcSubClaimForRepo:["GET /repos/{owner}/{repo}/actions/oidc/customization/sub"],getEnvironmentPublicKey:["GET /repos/{owner}/{repo}/environments/{environment_name}/secrets/public-key"],getEnvironmentSecret:["GET /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}"],getEnvironmentVariable:["GET /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}"],getGithubActionsDefaultWorkflowPermissionsOrganization:["GET /orgs/{org}/actions/permissions/workflow"],getGithubActionsDefaultWorkflowPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/workflow"],getGithubActionsPermissionsOrganization:["GET /orgs/{org}/actions/permissions"],getGithubActionsPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions"],getJobForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}"],getOrgPublicKey:["GET /orgs/{org}/actions/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}"],getOrgVariable:["GET /orgs/{org}/actions/variables/{name}"],getPendingDeploymentsForRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments"],getRepoPermissions:["GET /repos/{owner}/{repo}/actions/permissions",{},{renamed:["actions","getGithubActionsPermissionsRepository"]}],getRepoPublicKey:["GET /repos/{owner}/{repo}/actions/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/actions/secrets/{secret_name}"],getRepoVariable:["GET /repos/{owner}/{repo}/actions/variables/{name}"],getReviewsForRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/approvals"],getSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}"],getSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}"],getWorkflow:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}"],getWorkflowAccessToRepository:["GET /repos/{owner}/{repo}/actions/permissions/access"],getWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}"],getWorkflowRunAttempt:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}"],getWorkflowRunUsage:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/timing"],getWorkflowUsage:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/timing"],listArtifactsForRepo:["GET /repos/{owner}/{repo}/actions/artifacts"],listEnvironmentSecrets:["GET /repos/{owner}/{repo}/environments/{environment_name}/secrets"],listEnvironmentVariables:["GET /repos/{owner}/{repo}/environments/{environment_name}/variables"],listJobsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/jobs"],listJobsForWorkflowRunAttempt:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/jobs"],listLabelsForSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}/labels"],listLabelsForSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],listOrgSecrets:["GET /orgs/{org}/actions/secrets"],listOrgVariables:["GET /orgs/{org}/actions/variables"],listRepoOrganizationSecrets:["GET /repos/{owner}/{repo}/actions/organization-secrets"],listRepoOrganizationVariables:["GET /repos/{owner}/{repo}/actions/organization-variables"],listRepoSecrets:["GET /repos/{owner}/{repo}/actions/secrets"],listRepoVariables:["GET /repos/{owner}/{repo}/actions/variables"],listRepoWorkflows:["GET /repos/{owner}/{repo}/actions/workflows"],listRunnerApplicationsForOrg:["GET /orgs/{org}/actions/runners/downloads"],listRunnerApplicationsForRepo:["GET /repos/{owner}/{repo}/actions/runners/downloads"],listSelectedReposForOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}/repositories"],listSelectedReposForOrgVariable:["GET /orgs/{org}/actions/variables/{name}/repositories"],listSelectedRepositoriesEnabledGithubActionsOrganization:["GET /orgs/{org}/actions/permissions/repositories"],listSelfHostedRunnersForOrg:["GET /orgs/{org}/actions/runners"],listSelfHostedRunnersForRepo:["GET /repos/{owner}/{repo}/actions/runners"],listWorkflowRunArtifacts:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/artifacts"],listWorkflowRuns:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/runs"],listWorkflowRunsForRepo:["GET /repos/{owner}/{repo}/actions/runs"],reRunJobForWorkflowRun:["POST /repos/{owner}/{repo}/actions/jobs/{job_id}/rerun"],reRunWorkflow:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun"],reRunWorkflowFailedJobs:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun-failed-jobs"],removeAllCustomLabelsFromSelfHostedRunnerForOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}/labels"],removeAllCustomLabelsFromSelfHostedRunnerForRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],removeCustomLabelFromSelfHostedRunnerForOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}/labels/{name}"],removeCustomLabelFromSelfHostedRunnerForRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels/{name}"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],removeSelectedRepoFromOrgVariable:["DELETE /orgs/{org}/actions/variables/{name}/repositories/{repository_id}"],reviewCustomGatesForRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/deployment_protection_rule"],reviewPendingDeploymentsForRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments"],setAllowedActionsOrganization:["PUT /orgs/{org}/actions/permissions/selected-actions"],setAllowedActionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/selected-actions"],setCustomLabelsForSelfHostedRunnerForOrg:["PUT /orgs/{org}/actions/runners/{runner_id}/labels"],setCustomLabelsForSelfHostedRunnerForRepo:["PUT /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],setCustomOidcSubClaimForRepo:["PUT /repos/{owner}/{repo}/actions/oidc/customization/sub"],setGithubActionsDefaultWorkflowPermissionsOrganization:["PUT /orgs/{org}/actions/permissions/workflow"],setGithubActionsDefaultWorkflowPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/workflow"],setGithubActionsPermissionsOrganization:["PUT /orgs/{org}/actions/permissions"],setGithubActionsPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories"],setSelectedReposForOrgVariable:["PUT /orgs/{org}/actions/variables/{name}/repositories"],setSelectedRepositoriesEnabledGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories"],setWorkflowAccessToRepository:["PUT /repos/{owner}/{repo}/actions/permissions/access"],updateEnvironmentVariable:["PATCH /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}"],updateOrgVariable:["PATCH /orgs/{org}/actions/variables/{name}"],updateRepoVariable:["PATCH /repos/{owner}/{repo}/actions/variables/{name}"]},activity:{checkRepoIsStarredByAuthenticatedUser:["GET /user/starred/{owner}/{repo}"],deleteRepoSubscription:["DELETE /repos/{owner}/{repo}/subscription"],deleteThreadSubscription:["DELETE /notifications/threads/{thread_id}/subscription"],getFeeds:["GET /feeds"],getRepoSubscription:["GET /repos/{owner}/{repo}/subscription"],getThread:["GET /notifications/threads/{thread_id}"],getThreadSubscriptionForAuthenticatedUser:["GET /notifications/threads/{thread_id}/subscription"],listEventsForAuthenticatedUser:["GET /users/{username}/events"],listNotificationsForAuthenticatedUser:["GET /notifications"],listOrgEventsForAuthenticatedUser:["GET /users/{username}/events/orgs/{org}"],listPublicEvents:["GET /events"],listPublicEventsForRepoNetwork:["GET /networks/{owner}/{repo}/events"],listPublicEventsForUser:["GET /users/{username}/events/public"],listPublicOrgEvents:["GET /orgs/{org}/events"],listReceivedEventsForUser:["GET /users/{username}/received_events"],listReceivedPublicEventsForUser:["GET /users/{username}/received_events/public"],listRepoEvents:["GET /repos/{owner}/{repo}/events"],listRepoNotificationsForAuthenticatedUser:["GET /repos/{owner}/{repo}/notifications"],listReposStarredByAuthenticatedUser:["GET /user/starred"],listReposStarredByUser:["GET /users/{username}/starred"],listReposWatchedByUser:["GET /users/{username}/subscriptions"],listStargazersForRepo:["GET /repos/{owner}/{repo}/stargazers"],listWatchedReposForAuthenticatedUser:["GET /user/subscriptions"],listWatchersForRepo:["GET /repos/{owner}/{repo}/subscribers"],markNotificationsAsRead:["PUT /notifications"],markRepoNotificationsAsRead:["PUT /repos/{owner}/{repo}/notifications"],markThreadAsDone:["DELETE /notifications/threads/{thread_id}"],markThreadAsRead:["PATCH /notifications/threads/{thread_id}"],setRepoSubscription:["PUT /repos/{owner}/{repo}/subscription"],setThreadSubscription:["PUT /notifications/threads/{thread_id}/subscription"],starRepoForAuthenticatedUser:["PUT /user/starred/{owner}/{repo}"],unstarRepoForAuthenticatedUser:["DELETE /user/starred/{owner}/{repo}"]},apps:{addRepoToInstallation:["PUT /user/installations/{installation_id}/repositories/{repository_id}",{},{renamed:["apps","addRepoToInstallationForAuthenticatedUser"]}],addRepoToInstallationForAuthenticatedUser:["PUT /user/installations/{installation_id}/repositories/{repository_id}"],checkToken:["POST /applications/{client_id}/token"],createFromManifest:["POST /app-manifests/{code}/conversions"],createInstallationAccessToken:["POST /app/installations/{installation_id}/access_tokens"],deleteAuthorization:["DELETE /applications/{client_id}/grant"],deleteInstallation:["DELETE /app/installations/{installation_id}"],deleteToken:["DELETE /applications/{client_id}/token"],getAuthenticated:["GET /app"],getBySlug:["GET /apps/{app_slug}"],getInstallation:["GET /app/installations/{installation_id}"],getOrgInstallation:["GET /orgs/{org}/installation"],getRepoInstallation:["GET /repos/{owner}/{repo}/installation"],getSubscriptionPlanForAccount:["GET /marketplace_listing/accounts/{account_id}"],getSubscriptionPlanForAccountStubbed:["GET /marketplace_listing/stubbed/accounts/{account_id}"],getUserInstallation:["GET /users/{username}/installation"],getWebhookConfigForApp:["GET /app/hook/config"],getWebhookDelivery:["GET /app/hook/deliveries/{delivery_id}"],listAccountsForPlan:["GET /marketplace_listing/plans/{plan_id}/accounts"],listAccountsForPlanStubbed:["GET /marketplace_listing/stubbed/plans/{plan_id}/accounts"],listInstallationReposForAuthenticatedUser:["GET /user/installations/{installation_id}/repositories"],listInstallationRequestsForAuthenticatedApp:["GET /app/installation-requests"],listInstallations:["GET /app/installations"],listInstallationsForAuthenticatedUser:["GET /user/installations"],listPlans:["GET /marketplace_listing/plans"],listPlansStubbed:["GET /marketplace_listing/stubbed/plans"],listReposAccessibleToInstallation:["GET /installation/repositories"],listSubscriptionsForAuthenticatedUser:["GET /user/marketplace_purchases"],listSubscriptionsForAuthenticatedUserStubbed:["GET /user/marketplace_purchases/stubbed"],listWebhookDeliveries:["GET /app/hook/deliveries"],redeliverWebhookDelivery:["POST /app/hook/deliveries/{delivery_id}/attempts"],removeRepoFromInstallation:["DELETE /user/installations/{installation_id}/repositories/{repository_id}",{},{renamed:["apps","removeRepoFromInstallationForAuthenticatedUser"]}],removeRepoFromInstallationForAuthenticatedUser:["DELETE /user/installations/{installation_id}/repositories/{repository_id}"],resetToken:["PATCH /applications/{client_id}/token"],revokeInstallationAccessToken:["DELETE /installation/token"],scopeToken:["POST /applications/{client_id}/token/scoped"],suspendInstallation:["PUT /app/installations/{installation_id}/suspended"],unsuspendInstallation:["DELETE /app/installations/{installation_id}/suspended"],updateWebhookConfigForApp:["PATCH /app/hook/config"]},billing:{getGithubActionsBillingOrg:["GET /orgs/{org}/settings/billing/actions"],getGithubActionsBillingUser:["GET /users/{username}/settings/billing/actions"],getGithubPackagesBillingOrg:["GET /orgs/{org}/settings/billing/packages"],getGithubPackagesBillingUser:["GET /users/{username}/settings/billing/packages"],getSharedStorageBillingOrg:["GET /orgs/{org}/settings/billing/shared-storage"],getSharedStorageBillingUser:["GET /users/{username}/settings/billing/shared-storage"]},checks:{create:["POST /repos/{owner}/{repo}/check-runs"],createSuite:["POST /repos/{owner}/{repo}/check-suites"],get:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}"],getSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}"],listAnnotations:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}/annotations"],listForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-runs"],listForSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}/check-runs"],listSuitesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-suites"],rerequestRun:["POST /repos/{owner}/{repo}/check-runs/{check_run_id}/rerequest"],rerequestSuite:["POST /repos/{owner}/{repo}/check-suites/{check_suite_id}/rerequest"],setSuitesPreferences:["PATCH /repos/{owner}/{repo}/check-suites/preferences"],update:["PATCH /repos/{owner}/{repo}/check-runs/{check_run_id}"]},codeScanning:{deleteAnalysis:["DELETE /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}{?confirm_delete}"],getAlert:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}",{},{renamedParameters:{alert_id:"alert_number"}}],getAnalysis:["GET /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}"],getCodeqlDatabase:["GET /repos/{owner}/{repo}/code-scanning/codeql/databases/{language}"],getDefaultSetup:["GET /repos/{owner}/{repo}/code-scanning/default-setup"],getSarif:["GET /repos/{owner}/{repo}/code-scanning/sarifs/{sarif_id}"],listAlertInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances"],listAlertsForOrg:["GET /orgs/{org}/code-scanning/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/code-scanning/alerts"],listAlertsInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances",{},{renamed:["codeScanning","listAlertInstances"]}],listCodeqlDatabases:["GET /repos/{owner}/{repo}/code-scanning/codeql/databases"],listRecentAnalyses:["GET /repos/{owner}/{repo}/code-scanning/analyses"],updateAlert:["PATCH /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}"],updateDefaultSetup:["PATCH /repos/{owner}/{repo}/code-scanning/default-setup"],uploadSarif:["POST /repos/{owner}/{repo}/code-scanning/sarifs"]},codesOfConduct:{getAllCodesOfConduct:["GET /codes_of_conduct"],getConductCode:["GET /codes_of_conduct/{key}"]},codespaces:{addRepositoryForSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}/repositories/{repository_id}"],addSelectedRepoToOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}"],checkPermissionsForDevcontainer:["GET /repos/{owner}/{repo}/codespaces/permissions_check"],codespaceMachinesForAuthenticatedUser:["GET /user/codespaces/{codespace_name}/machines"],createForAuthenticatedUser:["POST /user/codespaces"],createOrUpdateOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],createOrUpdateSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}"],createWithPrForAuthenticatedUser:["POST /repos/{owner}/{repo}/pulls/{pull_number}/codespaces"],createWithRepoForAuthenticatedUser:["POST /repos/{owner}/{repo}/codespaces"],deleteForAuthenticatedUser:["DELETE /user/codespaces/{codespace_name}"],deleteFromOrganization:["DELETE /orgs/{org}/members/{username}/codespaces/{codespace_name}"],deleteOrgSecret:["DELETE /orgs/{org}/codespaces/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],deleteSecretForAuthenticatedUser:["DELETE /user/codespaces/secrets/{secret_name}"],exportForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/exports"],getCodespacesForUserInOrg:["GET /orgs/{org}/members/{username}/codespaces"],getExportDetailsForAuthenticatedUser:["GET /user/codespaces/{codespace_name}/exports/{export_id}"],getForAuthenticatedUser:["GET /user/codespaces/{codespace_name}"],getOrgPublicKey:["GET /orgs/{org}/codespaces/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/codespaces/secrets/{secret_name}"],getPublicKeyForAuthenticatedUser:["GET /user/codespaces/secrets/public-key"],getRepoPublicKey:["GET /repos/{owner}/{repo}/codespaces/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],getSecretForAuthenticatedUser:["GET /user/codespaces/secrets/{secret_name}"],listDevcontainersInRepositoryForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/devcontainers"],listForAuthenticatedUser:["GET /user/codespaces"],listInOrganization:["GET /orgs/{org}/codespaces",{},{renamedParameters:{org_id:"org"}}],listInRepositoryForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces"],listOrgSecrets:["GET /orgs/{org}/codespaces/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/codespaces/secrets"],listRepositoriesForSecretForAuthenticatedUser:["GET /user/codespaces/secrets/{secret_name}/repositories"],listSecretsForAuthenticatedUser:["GET /user/codespaces/secrets"],listSelectedReposForOrgSecret:["GET /orgs/{org}/codespaces/secrets/{secret_name}/repositories"],preFlightWithRepoForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/new"],publishForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/publish"],removeRepositoryForSecretForAuthenticatedUser:["DELETE /user/codespaces/secrets/{secret_name}/repositories/{repository_id}"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}"],repoMachinesForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/machines"],setRepositoriesForSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}/repositories"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories"],startForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/start"],stopForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/stop"],stopInOrganization:["POST /orgs/{org}/members/{username}/codespaces/{codespace_name}/stop"],updateForAuthenticatedUser:["PATCH /user/codespaces/{codespace_name}"]},copilot:{addCopilotSeatsForTeams:["POST /orgs/{org}/copilot/billing/selected_teams"],addCopilotSeatsForUsers:["POST /orgs/{org}/copilot/billing/selected_users"],cancelCopilotSeatAssignmentForTeams:["DELETE /orgs/{org}/copilot/billing/selected_teams"],cancelCopilotSeatAssignmentForUsers:["DELETE /orgs/{org}/copilot/billing/selected_users"],getCopilotOrganizationDetails:["GET /orgs/{org}/copilot/billing"],getCopilotSeatDetailsForUser:["GET /orgs/{org}/members/{username}/copilot"],listCopilotSeats:["GET /orgs/{org}/copilot/billing/seats"],usageMetricsForEnterprise:["GET /enterprises/{enterprise}/copilot/usage"],usageMetricsForOrg:["GET /orgs/{org}/copilot/usage"],usageMetricsForTeam:["GET /orgs/{org}/team/{team_slug}/copilot/usage"]},dependabot:{addSelectedRepoToOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}"],createOrUpdateOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],deleteOrgSecret:["DELETE /orgs/{org}/dependabot/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],getAlert:["GET /repos/{owner}/{repo}/dependabot/alerts/{alert_number}"],getOrgPublicKey:["GET /orgs/{org}/dependabot/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/dependabot/secrets/{secret_name}"],getRepoPublicKey:["GET /repos/{owner}/{repo}/dependabot/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],listAlertsForEnterprise:["GET /enterprises/{enterprise}/dependabot/alerts"],listAlertsForOrg:["GET /orgs/{org}/dependabot/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/dependabot/alerts"],listOrgSecrets:["GET /orgs/{org}/dependabot/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/dependabot/secrets"],listSelectedReposForOrgSecret:["GET /orgs/{org}/dependabot/secrets/{secret_name}/repositories"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories"],updateAlert:["PATCH /repos/{owner}/{repo}/dependabot/alerts/{alert_number}"]},dependencyGraph:{createRepositorySnapshot:["POST /repos/{owner}/{repo}/dependency-graph/snapshots"],diffRange:["GET /repos/{owner}/{repo}/dependency-graph/compare/{basehead}"],exportSbom:["GET /repos/{owner}/{repo}/dependency-graph/sbom"]},emojis:{get:["GET /emojis"]},gists:{checkIsStarred:["GET /gists/{gist_id}/star"],create:["POST /gists"],createComment:["POST /gists/{gist_id}/comments"],delete:["DELETE /gists/{gist_id}"],deleteComment:["DELETE /gists/{gist_id}/comments/{comment_id}"],fork:["POST /gists/{gist_id}/forks"],get:["GET /gists/{gist_id}"],getComment:["GET /gists/{gist_id}/comments/{comment_id}"],getRevision:["GET /gists/{gist_id}/{sha}"],list:["GET /gists"],listComments:["GET /gists/{gist_id}/comments"],listCommits:["GET /gists/{gist_id}/commits"],listForUser:["GET /users/{username}/gists"],listForks:["GET /gists/{gist_id}/forks"],listPublic:["GET /gists/public"],listStarred:["GET /gists/starred"],star:["PUT /gists/{gist_id}/star"],unstar:["DELETE /gists/{gist_id}/star"],update:["PATCH /gists/{gist_id}"],updateComment:["PATCH /gists/{gist_id}/comments/{comment_id}"]},git:{createBlob:["POST /repos/{owner}/{repo}/git/blobs"],createCommit:["POST /repos/{owner}/{repo}/git/commits"],createRef:["POST /repos/{owner}/{repo}/git/refs"],createTag:["POST /repos/{owner}/{repo}/git/tags"],createTree:["POST /repos/{owner}/{repo}/git/trees"],deleteRef:["DELETE /repos/{owner}/{repo}/git/refs/{ref}"],getBlob:["GET /repos/{owner}/{repo}/git/blobs/{file_sha}"],getCommit:["GET /repos/{owner}/{repo}/git/commits/{commit_sha}"],getRef:["GET /repos/{owner}/{repo}/git/ref/{ref}"],getTag:["GET /repos/{owner}/{repo}/git/tags/{tag_sha}"],getTree:["GET /repos/{owner}/{repo}/git/trees/{tree_sha}"],listMatchingRefs:["GET /repos/{owner}/{repo}/git/matching-refs/{ref}"],updateRef:["PATCH /repos/{owner}/{repo}/git/refs/{ref}"]},gitignore:{getAllTemplates:["GET /gitignore/templates"],getTemplate:["GET /gitignore/templates/{name}"]},interactions:{getRestrictionsForAuthenticatedUser:["GET /user/interaction-limits"],getRestrictionsForOrg:["GET /orgs/{org}/interaction-limits"],getRestrictionsForRepo:["GET /repos/{owner}/{repo}/interaction-limits"],getRestrictionsForYourPublicRepos:["GET /user/interaction-limits",{},{renamed:["interactions","getRestrictionsForAuthenticatedUser"]}],removeRestrictionsForAuthenticatedUser:["DELETE /user/interaction-limits"],removeRestrictionsForOrg:["DELETE /orgs/{org}/interaction-limits"],removeRestrictionsForRepo:["DELETE /repos/{owner}/{repo}/interaction-limits"],removeRestrictionsForYourPublicRepos:["DELETE /user/interaction-limits",{},{renamed:["interactions","removeRestrictionsForAuthenticatedUser"]}],setRestrictionsForAuthenticatedUser:["PUT /user/interaction-limits"],setRestrictionsForOrg:["PUT /orgs/{org}/interaction-limits"],setRestrictionsForRepo:["PUT /repos/{owner}/{repo}/interaction-limits"],setRestrictionsForYourPublicRepos:["PUT /user/interaction-limits",{},{renamed:["interactions","setRestrictionsForAuthenticatedUser"]}]},issues:{addAssignees:["POST /repos/{owner}/{repo}/issues/{issue_number}/assignees"],addLabels:["POST /repos/{owner}/{repo}/issues/{issue_number}/labels"],checkUserCanBeAssigned:["GET /repos/{owner}/{repo}/assignees/{assignee}"],checkUserCanBeAssignedToIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/assignees/{assignee}"],create:["POST /repos/{owner}/{repo}/issues"],createComment:["POST /repos/{owner}/{repo}/issues/{issue_number}/comments"],createLabel:["POST /repos/{owner}/{repo}/labels"],createMilestone:["POST /repos/{owner}/{repo}/milestones"],deleteComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}"],deleteLabel:["DELETE /repos/{owner}/{repo}/labels/{name}"],deleteMilestone:["DELETE /repos/{owner}/{repo}/milestones/{milestone_number}"],get:["GET /repos/{owner}/{repo}/issues/{issue_number}"],getComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}"],getEvent:["GET /repos/{owner}/{repo}/issues/events/{event_id}"],getLabel:["GET /repos/{owner}/{repo}/labels/{name}"],getMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}"],list:["GET /issues"],listAssignees:["GET /repos/{owner}/{repo}/assignees"],listComments:["GET /repos/{owner}/{repo}/issues/{issue_number}/comments"],listCommentsForRepo:["GET /repos/{owner}/{repo}/issues/comments"],listEvents:["GET /repos/{owner}/{repo}/issues/{issue_number}/events"],listEventsForRepo:["GET /repos/{owner}/{repo}/issues/events"],listEventsForTimeline:["GET /repos/{owner}/{repo}/issues/{issue_number}/timeline"],listForAuthenticatedUser:["GET /user/issues"],listForOrg:["GET /orgs/{org}/issues"],listForRepo:["GET /repos/{owner}/{repo}/issues"],listLabelsForMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}/labels"],listLabelsForRepo:["GET /repos/{owner}/{repo}/labels"],listLabelsOnIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/labels"],listMilestones:["GET /repos/{owner}/{repo}/milestones"],lock:["PUT /repos/{owner}/{repo}/issues/{issue_number}/lock"],removeAllLabels:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels"],removeAssignees:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/assignees"],removeLabel:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels/{name}"],setLabels:["PUT /repos/{owner}/{repo}/issues/{issue_number}/labels"],unlock:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/lock"],update:["PATCH /repos/{owner}/{repo}/issues/{issue_number}"],updateComment:["PATCH /repos/{owner}/{repo}/issues/comments/{comment_id}"],updateLabel:["PATCH /repos/{owner}/{repo}/labels/{name}"],updateMilestone:["PATCH /repos/{owner}/{repo}/milestones/{milestone_number}"]},licenses:{get:["GET /licenses/{license}"],getAllCommonlyUsed:["GET /licenses"],getForRepo:["GET /repos/{owner}/{repo}/license"]},markdown:{render:["POST /markdown"],renderRaw:["POST /markdown/raw",{headers:{"content-type":"text/plain; charset=utf-8"}}]},meta:{get:["GET /meta"],getAllVersions:["GET /versions"],getOctocat:["GET /octocat"],getZen:["GET /zen"],root:["GET /"]},migrations:{deleteArchiveForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/archive"],deleteArchiveForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/archive"],downloadArchiveForOrg:["GET /orgs/{org}/migrations/{migration_id}/archive"],getArchiveForAuthenticatedUser:["GET /user/migrations/{migration_id}/archive"],getStatusForAuthenticatedUser:["GET /user/migrations/{migration_id}"],getStatusForOrg:["GET /orgs/{org}/migrations/{migration_id}"],listForAuthenticatedUser:["GET /user/migrations"],listForOrg:["GET /orgs/{org}/migrations"],listReposForAuthenticatedUser:["GET /user/migrations/{migration_id}/repositories"],listReposForOrg:["GET /orgs/{org}/migrations/{migration_id}/repositories"],listReposForUser:["GET /user/migrations/{migration_id}/repositories",{},{renamed:["migrations","listReposForAuthenticatedUser"]}],startForAuthenticatedUser:["POST /user/migrations"],startForOrg:["POST /orgs/{org}/migrations"],unlockRepoForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/repos/{repo_name}/lock"],unlockRepoForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/repos/{repo_name}/lock"]},oidc:{getOidcCustomSubTemplateForOrg:["GET /orgs/{org}/actions/oidc/customization/sub"],updateOidcCustomSubTemplateForOrg:["PUT /orgs/{org}/actions/oidc/customization/sub"]},orgs:{addSecurityManagerTeam:["PUT /orgs/{org}/security-managers/teams/{team_slug}"],assignTeamToOrgRole:["PUT /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}"],assignUserToOrgRole:["PUT /orgs/{org}/organization-roles/users/{username}/{role_id}"],blockUser:["PUT /orgs/{org}/blocks/{username}"],cancelInvitation:["DELETE /orgs/{org}/invitations/{invitation_id}"],checkBlockedUser:["GET /orgs/{org}/blocks/{username}"],checkMembershipForUser:["GET /orgs/{org}/members/{username}"],checkPublicMembershipForUser:["GET /orgs/{org}/public_members/{username}"],convertMemberToOutsideCollaborator:["PUT /orgs/{org}/outside_collaborators/{username}"],createCustomOrganizationRole:["POST /orgs/{org}/organization-roles"],createInvitation:["POST /orgs/{org}/invitations"],createOrUpdateCustomProperties:["PATCH /orgs/{org}/properties/schema"],createOrUpdateCustomPropertiesValuesForRepos:["PATCH /orgs/{org}/properties/values"],createOrUpdateCustomProperty:["PUT /orgs/{org}/properties/schema/{custom_property_name}"],createWebhook:["POST /orgs/{org}/hooks"],delete:["DELETE /orgs/{org}"],deleteCustomOrganizationRole:["DELETE /orgs/{org}/organization-roles/{role_id}"],deleteWebhook:["DELETE /orgs/{org}/hooks/{hook_id}"],enableOrDisableSecurityProductOnAllOrgRepos:["POST /orgs/{org}/{security_product}/{enablement}"],get:["GET /orgs/{org}"],getAllCustomProperties:["GET /orgs/{org}/properties/schema"],getCustomProperty:["GET /orgs/{org}/properties/schema/{custom_property_name}"],getMembershipForAuthenticatedUser:["GET /user/memberships/orgs/{org}"],getMembershipForUser:["GET /orgs/{org}/memberships/{username}"],getOrgRole:["GET /orgs/{org}/organization-roles/{role_id}"],getWebhook:["GET /orgs/{org}/hooks/{hook_id}"],getWebhookConfigForOrg:["GET /orgs/{org}/hooks/{hook_id}/config"],getWebhookDelivery:["GET /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}"],list:["GET /organizations"],listAppInstallations:["GET /orgs/{org}/installations"],listBlockedUsers:["GET /orgs/{org}/blocks"],listCustomPropertiesValuesForRepos:["GET /orgs/{org}/properties/values"],listFailedInvitations:["GET /orgs/{org}/failed_invitations"],listForAuthenticatedUser:["GET /user/orgs"],listForUser:["GET /users/{username}/orgs"],listInvitationTeams:["GET /orgs/{org}/invitations/{invitation_id}/teams"],listMembers:["GET /orgs/{org}/members"],listMembershipsForAuthenticatedUser:["GET /user/memberships/orgs"],listOrgRoleTeams:["GET /orgs/{org}/organization-roles/{role_id}/teams"],listOrgRoleUsers:["GET /orgs/{org}/organization-roles/{role_id}/users"],listOrgRoles:["GET /orgs/{org}/organization-roles"],listOrganizationFineGrainedPermissions:["GET /orgs/{org}/organization-fine-grained-permissions"],listOutsideCollaborators:["GET /orgs/{org}/outside_collaborators"],listPatGrantRepositories:["GET /orgs/{org}/personal-access-tokens/{pat_id}/repositories"],listPatGrantRequestRepositories:["GET /orgs/{org}/personal-access-token-requests/{pat_request_id}/repositories"],listPatGrantRequests:["GET /orgs/{org}/personal-access-token-requests"],listPatGrants:["GET /orgs/{org}/personal-access-tokens"],listPendingInvitations:["GET /orgs/{org}/invitations"],listPublicMembers:["GET /orgs/{org}/public_members"],listSecurityManagerTeams:["GET /orgs/{org}/security-managers"],listWebhookDeliveries:["GET /orgs/{org}/hooks/{hook_id}/deliveries"],listWebhooks:["GET /orgs/{org}/hooks"],patchCustomOrganizationRole:["PATCH /orgs/{org}/organization-roles/{role_id}"],pingWebhook:["POST /orgs/{org}/hooks/{hook_id}/pings"],redeliverWebhookDelivery:["POST /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}/attempts"],removeCustomProperty:["DELETE /orgs/{org}/properties/schema/{custom_property_name}"],removeMember:["DELETE /orgs/{org}/members/{username}"],removeMembershipForUser:["DELETE /orgs/{org}/memberships/{username}"],removeOutsideCollaborator:["DELETE /orgs/{org}/outside_collaborators/{username}"],removePublicMembershipForAuthenticatedUser:["DELETE /orgs/{org}/public_members/{username}"],removeSecurityManagerTeam:["DELETE /orgs/{org}/security-managers/teams/{team_slug}"],reviewPatGrantRequest:["POST /orgs/{org}/personal-access-token-requests/{pat_request_id}"],reviewPatGrantRequestsInBulk:["POST /orgs/{org}/personal-access-token-requests"],revokeAllOrgRolesTeam:["DELETE /orgs/{org}/organization-roles/teams/{team_slug}"],revokeAllOrgRolesUser:["DELETE /orgs/{org}/organization-roles/users/{username}"],revokeOrgRoleTeam:["DELETE /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}"],revokeOrgRoleUser:["DELETE /orgs/{org}/organization-roles/users/{username}/{role_id}"],setMembershipForUser:["PUT /orgs/{org}/memberships/{username}"],setPublicMembershipForAuthenticatedUser:["PUT /orgs/{org}/public_members/{username}"],unblockUser:["DELETE /orgs/{org}/blocks/{username}"],update:["PATCH /orgs/{org}"],updateMembershipForAuthenticatedUser:["PATCH /user/memberships/orgs/{org}"],updatePatAccess:["POST /orgs/{org}/personal-access-tokens/{pat_id}"],updatePatAccesses:["POST /orgs/{org}/personal-access-tokens"],updateWebhook:["PATCH /orgs/{org}/hooks/{hook_id}"],updateWebhookConfigForOrg:["PATCH /orgs/{org}/hooks/{hook_id}/config"]},packages:{deletePackageForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}"],deletePackageForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}"],deletePackageForUser:["DELETE /users/{username}/packages/{package_type}/{package_name}"],deletePackageVersionForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForUser:["DELETE /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getAllPackageVersionsForAPackageOwnedByAnOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions",{},{renamed:["packages","getAllPackageVersionsForPackageOwnedByOrg"]}],getAllPackageVersionsForAPackageOwnedByTheAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions",{},{renamed:["packages","getAllPackageVersionsForPackageOwnedByAuthenticatedUser"]}],getAllPackageVersionsForPackageOwnedByAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions"],getPackageForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}"],getPackageForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}"],getPackageForUser:["GET /users/{username}/packages/{package_type}/{package_name}"],getPackageVersionForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],listDockerMigrationConflictingPackagesForAuthenticatedUser:["GET /user/docker/conflicts"],listDockerMigrationConflictingPackagesForOrganization:["GET /orgs/{org}/docker/conflicts"],listDockerMigrationConflictingPackagesForUser:["GET /users/{username}/docker/conflicts"],listPackagesForAuthenticatedUser:["GET /user/packages"],listPackagesForOrganization:["GET /orgs/{org}/packages"],listPackagesForUser:["GET /users/{username}/packages"],restorePackageForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/restore{?token}"],restorePackageForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/restore{?token}"],restorePackageForUser:["POST /users/{username}/packages/{package_type}/{package_name}/restore{?token}"],restorePackageVersionForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForUser:["POST /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"]},projects:{addCollaborator:["PUT /projects/{project_id}/collaborators/{username}"],createCard:["POST /projects/columns/{column_id}/cards"],createColumn:["POST /projects/{project_id}/columns"],createForAuthenticatedUser:["POST /user/projects"],createForOrg:["POST /orgs/{org}/projects"],createForRepo:["POST /repos/{owner}/{repo}/projects"],delete:["DELETE /projects/{project_id}"],deleteCard:["DELETE /projects/columns/cards/{card_id}"],deleteColumn:["DELETE /projects/columns/{column_id}"],get:["GET /projects/{project_id}"],getCard:["GET /projects/columns/cards/{card_id}"],getColumn:["GET /projects/columns/{column_id}"],getPermissionForUser:["GET /projects/{project_id}/collaborators/{username}/permission"],listCards:["GET /projects/columns/{column_id}/cards"],listCollaborators:["GET /projects/{project_id}/collaborators"],listColumns:["GET /projects/{project_id}/columns"],listForOrg:["GET /orgs/{org}/projects"],listForRepo:["GET /repos/{owner}/{repo}/projects"],listForUser:["GET /users/{username}/projects"],moveCard:["POST /projects/columns/cards/{card_id}/moves"],moveColumn:["POST /projects/columns/{column_id}/moves"],removeCollaborator:["DELETE /projects/{project_id}/collaborators/{username}"],update:["PATCH /projects/{project_id}"],updateCard:["PATCH /projects/columns/cards/{card_id}"],updateColumn:["PATCH /projects/columns/{column_id}"]},pulls:{checkIfMerged:["GET /repos/{owner}/{repo}/pulls/{pull_number}/merge"],create:["POST /repos/{owner}/{repo}/pulls"],createReplyForReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies"],createReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],createReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments"],deletePendingReview:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],deleteReviewComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}"],dismissReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/dismissals"],get:["GET /repos/{owner}/{repo}/pulls/{pull_number}"],getReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],getReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}"],list:["GET /repos/{owner}/{repo}/pulls"],listCommentsForReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/comments"],listCommits:["GET /repos/{owner}/{repo}/pulls/{pull_number}/commits"],listFiles:["GET /repos/{owner}/{repo}/pulls/{pull_number}/files"],listRequestedReviewers:["GET /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],listReviewComments:["GET /repos/{owner}/{repo}/pulls/{pull_number}/comments"],listReviewCommentsForRepo:["GET /repos/{owner}/{repo}/pulls/comments"],listReviews:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],merge:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/merge"],removeRequestedReviewers:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],requestReviewers:["POST /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],submitReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/events"],update:["PATCH /repos/{owner}/{repo}/pulls/{pull_number}"],updateBranch:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/update-branch"],updateReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],updateReviewComment:["PATCH /repos/{owner}/{repo}/pulls/comments/{comment_id}"]},rateLimit:{get:["GET /rate_limit"]},reactions:{createForCommitComment:["POST /repos/{owner}/{repo}/comments/{comment_id}/reactions"],createForIssue:["POST /repos/{owner}/{repo}/issues/{issue_number}/reactions"],createForIssueComment:["POST /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions"],createForPullRequestReviewComment:["POST /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions"],createForRelease:["POST /repos/{owner}/{repo}/releases/{release_id}/reactions"],createForTeamDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions"],createForTeamDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions"],deleteForCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}/reactions/{reaction_id}"],deleteForIssue:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/reactions/{reaction_id}"],deleteForIssueComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions/{reaction_id}"],deleteForPullRequestComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions/{reaction_id}"],deleteForRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}/reactions/{reaction_id}"],deleteForTeamDiscussion:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions/{reaction_id}"],deleteForTeamDiscussionComment:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions/{reaction_id}"],listForCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}/reactions"],listForIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/reactions"],listForIssueComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions"],listForPullRequestReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions"],listForRelease:["GET /repos/{owner}/{repo}/releases/{release_id}/reactions"],listForTeamDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions"],listForTeamDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions"]},repos:{acceptInvitation:["PATCH /user/repository_invitations/{invitation_id}",{},{renamed:["repos","acceptInvitationForAuthenticatedUser"]}],acceptInvitationForAuthenticatedUser:["PATCH /user/repository_invitations/{invitation_id}"],addAppAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],addCollaborator:["PUT /repos/{owner}/{repo}/collaborators/{username}"],addStatusCheckContexts:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],addTeamAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],addUserAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],cancelPagesDeployment:["POST /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}/cancel"],checkAutomatedSecurityFixes:["GET /repos/{owner}/{repo}/automated-security-fixes"],checkCollaborator:["GET /repos/{owner}/{repo}/collaborators/{username}"],checkPrivateVulnerabilityReporting:["GET /repos/{owner}/{repo}/private-vulnerability-reporting"],checkVulnerabilityAlerts:["GET /repos/{owner}/{repo}/vulnerability-alerts"],codeownersErrors:["GET /repos/{owner}/{repo}/codeowners/errors"],compareCommits:["GET /repos/{owner}/{repo}/compare/{base}...{head}"],compareCommitsWithBasehead:["GET /repos/{owner}/{repo}/compare/{basehead}"],createAutolink:["POST /repos/{owner}/{repo}/autolinks"],createCommitComment:["POST /repos/{owner}/{repo}/commits/{commit_sha}/comments"],createCommitSignatureProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],createCommitStatus:["POST /repos/{owner}/{repo}/statuses/{sha}"],createDeployKey:["POST /repos/{owner}/{repo}/keys"],createDeployment:["POST /repos/{owner}/{repo}/deployments"],createDeploymentBranchPolicy:["POST /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies"],createDeploymentProtectionRule:["POST /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules"],createDeploymentStatus:["POST /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],createDispatchEvent:["POST /repos/{owner}/{repo}/dispatches"],createForAuthenticatedUser:["POST /user/repos"],createFork:["POST /repos/{owner}/{repo}/forks"],createInOrg:["POST /orgs/{org}/repos"],createOrUpdateCustomPropertiesValues:["PATCH /repos/{owner}/{repo}/properties/values"],createOrUpdateEnvironment:["PUT /repos/{owner}/{repo}/environments/{environment_name}"],createOrUpdateFileContents:["PUT /repos/{owner}/{repo}/contents/{path}"],createOrgRuleset:["POST /orgs/{org}/rulesets"],createPagesDeployment:["POST /repos/{owner}/{repo}/pages/deployments"],createPagesSite:["POST /repos/{owner}/{repo}/pages"],createRelease:["POST /repos/{owner}/{repo}/releases"],createRepoRuleset:["POST /repos/{owner}/{repo}/rulesets"],createTagProtection:["POST /repos/{owner}/{repo}/tags/protection"],createUsingTemplate:["POST /repos/{template_owner}/{template_repo}/generate"],createWebhook:["POST /repos/{owner}/{repo}/hooks"],declineInvitation:["DELETE /user/repository_invitations/{invitation_id}",{},{renamed:["repos","declineInvitationForAuthenticatedUser"]}],declineInvitationForAuthenticatedUser:["DELETE /user/repository_invitations/{invitation_id}"],delete:["DELETE /repos/{owner}/{repo}"],deleteAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],deleteAdminBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],deleteAnEnvironment:["DELETE /repos/{owner}/{repo}/environments/{environment_name}"],deleteAutolink:["DELETE /repos/{owner}/{repo}/autolinks/{autolink_id}"],deleteBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection"],deleteCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}"],deleteCommitSignatureProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],deleteDeployKey:["DELETE /repos/{owner}/{repo}/keys/{key_id}"],deleteDeployment:["DELETE /repos/{owner}/{repo}/deployments/{deployment_id}"],deleteDeploymentBranchPolicy:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],deleteFile:["DELETE /repos/{owner}/{repo}/contents/{path}"],deleteInvitation:["DELETE /repos/{owner}/{repo}/invitations/{invitation_id}"],deleteOrgRuleset:["DELETE /orgs/{org}/rulesets/{ruleset_id}"],deletePagesSite:["DELETE /repos/{owner}/{repo}/pages"],deletePullRequestReviewProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],deleteRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}"],deleteReleaseAsset:["DELETE /repos/{owner}/{repo}/releases/assets/{asset_id}"],deleteRepoRuleset:["DELETE /repos/{owner}/{repo}/rulesets/{ruleset_id}"],deleteTagProtection:["DELETE /repos/{owner}/{repo}/tags/protection/{tag_protection_id}"],deleteWebhook:["DELETE /repos/{owner}/{repo}/hooks/{hook_id}"],disableAutomatedSecurityFixes:["DELETE /repos/{owner}/{repo}/automated-security-fixes"],disableDeploymentProtectionRule:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}"],disablePrivateVulnerabilityReporting:["DELETE /repos/{owner}/{repo}/private-vulnerability-reporting"],disableVulnerabilityAlerts:["DELETE /repos/{owner}/{repo}/vulnerability-alerts"],downloadArchive:["GET /repos/{owner}/{repo}/zipball/{ref}",{},{renamed:["repos","downloadZipballArchive"]}],downloadTarballArchive:["GET /repos/{owner}/{repo}/tarball/{ref}"],downloadZipballArchive:["GET /repos/{owner}/{repo}/zipball/{ref}"],enableAutomatedSecurityFixes:["PUT /repos/{owner}/{repo}/automated-security-fixes"],enablePrivateVulnerabilityReporting:["PUT /repos/{owner}/{repo}/private-vulnerability-reporting"],enableVulnerabilityAlerts:["PUT /repos/{owner}/{repo}/vulnerability-alerts"],generateReleaseNotes:["POST /repos/{owner}/{repo}/releases/generate-notes"],get:["GET /repos/{owner}/{repo}"],getAccessRestrictions:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],getAdminBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],getAllDeploymentProtectionRules:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules"],getAllEnvironments:["GET /repos/{owner}/{repo}/environments"],getAllStatusCheckContexts:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts"],getAllTopics:["GET /repos/{owner}/{repo}/topics"],getAppsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps"],getAutolink:["GET /repos/{owner}/{repo}/autolinks/{autolink_id}"],getBranch:["GET /repos/{owner}/{repo}/branches/{branch}"],getBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection"],getBranchRules:["GET /repos/{owner}/{repo}/rules/branches/{branch}"],getClones:["GET /repos/{owner}/{repo}/traffic/clones"],getCodeFrequencyStats:["GET /repos/{owner}/{repo}/stats/code_frequency"],getCollaboratorPermissionLevel:["GET /repos/{owner}/{repo}/collaborators/{username}/permission"],getCombinedStatusForRef:["GET /repos/{owner}/{repo}/commits/{ref}/status"],getCommit:["GET /repos/{owner}/{repo}/commits/{ref}"],getCommitActivityStats:["GET /repos/{owner}/{repo}/stats/commit_activity"],getCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}"],getCommitSignatureProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],getCommunityProfileMetrics:["GET /repos/{owner}/{repo}/community/profile"],getContent:["GET /repos/{owner}/{repo}/contents/{path}"],getContributorsStats:["GET /repos/{owner}/{repo}/stats/contributors"],getCustomDeploymentProtectionRule:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}"],getCustomPropertiesValues:["GET /repos/{owner}/{repo}/properties/values"],getDeployKey:["GET /repos/{owner}/{repo}/keys/{key_id}"],getDeployment:["GET /repos/{owner}/{repo}/deployments/{deployment_id}"],getDeploymentBranchPolicy:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],getDeploymentStatus:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses/{status_id}"],getEnvironment:["GET /repos/{owner}/{repo}/environments/{environment_name}"],getLatestPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/latest"],getLatestRelease:["GET /repos/{owner}/{repo}/releases/latest"],getOrgRuleSuite:["GET /orgs/{org}/rulesets/rule-suites/{rule_suite_id}"],getOrgRuleSuites:["GET /orgs/{org}/rulesets/rule-suites"],getOrgRuleset:["GET /orgs/{org}/rulesets/{ruleset_id}"],getOrgRulesets:["GET /orgs/{org}/rulesets"],getPages:["GET /repos/{owner}/{repo}/pages"],getPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/{build_id}"],getPagesDeployment:["GET /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}"],getPagesHealthCheck:["GET /repos/{owner}/{repo}/pages/health"],getParticipationStats:["GET /repos/{owner}/{repo}/stats/participation"],getPullRequestReviewProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],getPunchCardStats:["GET /repos/{owner}/{repo}/stats/punch_card"],getReadme:["GET /repos/{owner}/{repo}/readme"],getReadmeInDirectory:["GET /repos/{owner}/{repo}/readme/{dir}"],getRelease:["GET /repos/{owner}/{repo}/releases/{release_id}"],getReleaseAsset:["GET /repos/{owner}/{repo}/releases/assets/{asset_id}"],getReleaseByTag:["GET /repos/{owner}/{repo}/releases/tags/{tag}"],getRepoRuleSuite:["GET /repos/{owner}/{repo}/rulesets/rule-suites/{rule_suite_id}"],getRepoRuleSuites:["GET /repos/{owner}/{repo}/rulesets/rule-suites"],getRepoRuleset:["GET /repos/{owner}/{repo}/rulesets/{ruleset_id}"],getRepoRulesets:["GET /repos/{owner}/{repo}/rulesets"],getStatusChecksProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],getTeamsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams"],getTopPaths:["GET /repos/{owner}/{repo}/traffic/popular/paths"],getTopReferrers:["GET /repos/{owner}/{repo}/traffic/popular/referrers"],getUsersWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users"],getViews:["GET /repos/{owner}/{repo}/traffic/views"],getWebhook:["GET /repos/{owner}/{repo}/hooks/{hook_id}"],getWebhookConfigForRepo:["GET /repos/{owner}/{repo}/hooks/{hook_id}/config"],getWebhookDelivery:["GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}"],listActivities:["GET /repos/{owner}/{repo}/activity"],listAutolinks:["GET /repos/{owner}/{repo}/autolinks"],listBranches:["GET /repos/{owner}/{repo}/branches"],listBranchesForHeadCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/branches-where-head"],listCollaborators:["GET /repos/{owner}/{repo}/collaborators"],listCommentsForCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/comments"],listCommitCommentsForRepo:["GET /repos/{owner}/{repo}/comments"],listCommitStatusesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/statuses"],listCommits:["GET /repos/{owner}/{repo}/commits"],listContributors:["GET /repos/{owner}/{repo}/contributors"],listCustomDeploymentRuleIntegrations:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/apps"],listDeployKeys:["GET /repos/{owner}/{repo}/keys"],listDeploymentBranchPolicies:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies"],listDeploymentStatuses:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],listDeployments:["GET /repos/{owner}/{repo}/deployments"],listForAuthenticatedUser:["GET /user/repos"],listForOrg:["GET /orgs/{org}/repos"],listForUser:["GET /users/{username}/repos"],listForks:["GET /repos/{owner}/{repo}/forks"],listInvitations:["GET /repos/{owner}/{repo}/invitations"],listInvitationsForAuthenticatedUser:["GET /user/repository_invitations"],listLanguages:["GET /repos/{owner}/{repo}/languages"],listPagesBuilds:["GET /repos/{owner}/{repo}/pages/builds"],listPublic:["GET /repositories"],listPullRequestsAssociatedWithCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/pulls"],listReleaseAssets:["GET /repos/{owner}/{repo}/releases/{release_id}/assets"],listReleases:["GET /repos/{owner}/{repo}/releases"],listTagProtection:["GET /repos/{owner}/{repo}/tags/protection"],listTags:["GET /repos/{owner}/{repo}/tags"],listTeams:["GET /repos/{owner}/{repo}/teams"],listWebhookDeliveries:["GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries"],listWebhooks:["GET /repos/{owner}/{repo}/hooks"],merge:["POST /repos/{owner}/{repo}/merges"],mergeUpstream:["POST /repos/{owner}/{repo}/merge-upstream"],pingWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/pings"],redeliverWebhookDelivery:["POST /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}/attempts"],removeAppAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],removeCollaborator:["DELETE /repos/{owner}/{repo}/collaborators/{username}"],removeStatusCheckContexts:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],removeStatusCheckProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],removeTeamAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],removeUserAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],renameBranch:["POST /repos/{owner}/{repo}/branches/{branch}/rename"],replaceAllTopics:["PUT /repos/{owner}/{repo}/topics"],requestPagesBuild:["POST /repos/{owner}/{repo}/pages/builds"],setAdminBranchProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],setAppAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],setStatusCheckContexts:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],setTeamAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],setUserAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],testPushWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/tests"],transfer:["POST /repos/{owner}/{repo}/transfer"],update:["PATCH /repos/{owner}/{repo}"],updateBranchProtection:["PUT /repos/{owner}/{repo}/branches/{branch}/protection"],updateCommitComment:["PATCH /repos/{owner}/{repo}/comments/{comment_id}"],updateDeploymentBranchPolicy:["PUT /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],updateInformationAboutPagesSite:["PUT /repos/{owner}/{repo}/pages"],updateInvitation:["PATCH /repos/{owner}/{repo}/invitations/{invitation_id}"],updateOrgRuleset:["PUT /orgs/{org}/rulesets/{ruleset_id}"],updatePullRequestReviewProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],updateRelease:["PATCH /repos/{owner}/{repo}/releases/{release_id}"],updateReleaseAsset:["PATCH /repos/{owner}/{repo}/releases/assets/{asset_id}"],updateRepoRuleset:["PUT /repos/{owner}/{repo}/rulesets/{ruleset_id}"],updateStatusCheckPotection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks",{},{renamed:["repos","updateStatusCheckProtection"]}],updateStatusCheckProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],updateWebhook:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}"],updateWebhookConfigForRepo:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}/config"],uploadReleaseAsset:["POST /repos/{owner}/{repo}/releases/{release_id}/assets{?name,label}",{baseUrl:"https://uploads.github.com"}]},search:{code:["GET /search/code"],commits:["GET /search/commits"],issuesAndPullRequests:["GET /search/issues"],labels:["GET /search/labels"],repos:["GET /search/repositories"],topics:["GET /search/topics"],users:["GET /search/users"]},secretScanning:{getAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"],listAlertsForEnterprise:["GET /enterprises/{enterprise}/secret-scanning/alerts"],listAlertsForOrg:["GET /orgs/{org}/secret-scanning/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/secret-scanning/alerts"],listLocationsForAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}/locations"],updateAlert:["PATCH /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"]},securityAdvisories:{createFork:["POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/forks"],createPrivateVulnerabilityReport:["POST /repos/{owner}/{repo}/security-advisories/reports"],createRepositoryAdvisory:["POST /repos/{owner}/{repo}/security-advisories"],createRepositoryAdvisoryCveRequest:["POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/cve"],getGlobalAdvisory:["GET /advisories/{ghsa_id}"],getRepositoryAdvisory:["GET /repos/{owner}/{repo}/security-advisories/{ghsa_id}"],listGlobalAdvisories:["GET /advisories"],listOrgRepositoryAdvisories:["GET /orgs/{org}/security-advisories"],listRepositoryAdvisories:["GET /repos/{owner}/{repo}/security-advisories"],updateRepositoryAdvisory:["PATCH /repos/{owner}/{repo}/security-advisories/{ghsa_id}"]},teams:{addOrUpdateMembershipForUserInOrg:["PUT /orgs/{org}/teams/{team_slug}/memberships/{username}"],addOrUpdateProjectPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/projects/{project_id}"],addOrUpdateRepoPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],checkPermissionsForProjectInOrg:["GET /orgs/{org}/teams/{team_slug}/projects/{project_id}"],checkPermissionsForRepoInOrg:["GET /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],create:["POST /orgs/{org}/teams"],createDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],createDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions"],deleteDiscussionCommentInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],deleteDiscussionInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],deleteInOrg:["DELETE /orgs/{org}/teams/{team_slug}"],getByName:["GET /orgs/{org}/teams/{team_slug}"],getDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],getDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],getMembershipForUserInOrg:["GET /orgs/{org}/teams/{team_slug}/memberships/{username}"],list:["GET /orgs/{org}/teams"],listChildInOrg:["GET /orgs/{org}/teams/{team_slug}/teams"],listDiscussionCommentsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],listDiscussionsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions"],listForAuthenticatedUser:["GET /user/teams"],listMembersInOrg:["GET /orgs/{org}/teams/{team_slug}/members"],listPendingInvitationsInOrg:["GET /orgs/{org}/teams/{team_slug}/invitations"],listProjectsInOrg:["GET /orgs/{org}/teams/{team_slug}/projects"],listReposInOrg:["GET /orgs/{org}/teams/{team_slug}/repos"],removeMembershipForUserInOrg:["DELETE /orgs/{org}/teams/{team_slug}/memberships/{username}"],removeProjectInOrg:["DELETE /orgs/{org}/teams/{team_slug}/projects/{project_id}"],removeRepoInOrg:["DELETE /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],updateDiscussionCommentInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],updateDiscussionInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],updateInOrg:["PATCH /orgs/{org}/teams/{team_slug}"]},users:{addEmailForAuthenticated:["POST /user/emails",{},{renamed:["users","addEmailForAuthenticatedUser"]}],addEmailForAuthenticatedUser:["POST /user/emails"],addSocialAccountForAuthenticatedUser:["POST /user/social_accounts"],block:["PUT /user/blocks/{username}"],checkBlocked:["GET /user/blocks/{username}"],checkFollowingForUser:["GET /users/{username}/following/{target_user}"],checkPersonIsFollowedByAuthenticated:["GET /user/following/{username}"],createGpgKeyForAuthenticated:["POST /user/gpg_keys",{},{renamed:["users","createGpgKeyForAuthenticatedUser"]}],createGpgKeyForAuthenticatedUser:["POST /user/gpg_keys"],createPublicSshKeyForAuthenticated:["POST /user/keys",{},{renamed:["users","createPublicSshKeyForAuthenticatedUser"]}],createPublicSshKeyForAuthenticatedUser:["POST /user/keys"],createSshSigningKeyForAuthenticatedUser:["POST /user/ssh_signing_keys"],deleteEmailForAuthenticated:["DELETE /user/emails",{},{renamed:["users","deleteEmailForAuthenticatedUser"]}],deleteEmailForAuthenticatedUser:["DELETE /user/emails"],deleteGpgKeyForAuthenticated:["DELETE /user/gpg_keys/{gpg_key_id}",{},{renamed:["users","deleteGpgKeyForAuthenticatedUser"]}],deleteGpgKeyForAuthenticatedUser:["DELETE /user/gpg_keys/{gpg_key_id}"],deletePublicSshKeyForAuthenticated:["DELETE /user/keys/{key_id}",{},{renamed:["users","deletePublicSshKeyForAuthenticatedUser"]}],deletePublicSshKeyForAuthenticatedUser:["DELETE /user/keys/{key_id}"],deleteSocialAccountForAuthenticatedUser:["DELETE /user/social_accounts"],deleteSshSigningKeyForAuthenticatedUser:["DELETE /user/ssh_signing_keys/{ssh_signing_key_id}"],follow:["PUT /user/following/{username}"],getAuthenticated:["GET /user"],getByUsername:["GET /users/{username}"],getContextForUser:["GET /users/{username}/hovercard"],getGpgKeyForAuthenticated:["GET /user/gpg_keys/{gpg_key_id}",{},{renamed:["users","getGpgKeyForAuthenticatedUser"]}],getGpgKeyForAuthenticatedUser:["GET /user/gpg_keys/{gpg_key_id}"],getPublicSshKeyForAuthenticated:["GET /user/keys/{key_id}",{},{renamed:["users","getPublicSshKeyForAuthenticatedUser"]}],getPublicSshKeyForAuthenticatedUser:["GET /user/keys/{key_id}"],getSshSigningKeyForAuthenticatedUser:["GET /user/ssh_signing_keys/{ssh_signing_key_id}"],list:["GET /users"],listBlockedByAuthenticated:["GET /user/blocks",{},{renamed:["users","listBlockedByAuthenticatedUser"]}],listBlockedByAuthenticatedUser:["GET /user/blocks"],listEmailsForAuthenticated:["GET /user/emails",{},{renamed:["users","listEmailsForAuthenticatedUser"]}],listEmailsForAuthenticatedUser:["GET /user/emails"],listFollowedByAuthenticated:["GET /user/following",{},{renamed:["users","listFollowedByAuthenticatedUser"]}],listFollowedByAuthenticatedUser:["GET /user/following"],listFollowersForAuthenticatedUser:["GET /user/followers"],listFollowersForUser:["GET /users/{username}/followers"],listFollowingForUser:["GET /users/{username}/following"],listGpgKeysForAuthenticated:["GET /user/gpg_keys",{},{renamed:["users","listGpgKeysForAuthenticatedUser"]}],listGpgKeysForAuthenticatedUser:["GET /user/gpg_keys"],listGpgKeysForUser:["GET /users/{username}/gpg_keys"],listPublicEmailsForAuthenticated:["GET /user/public_emails",{},{renamed:["users","listPublicEmailsForAuthenticatedUser"]}],listPublicEmailsForAuthenticatedUser:["GET /user/public_emails"],listPublicKeysForUser:["GET /users/{username}/keys"],listPublicSshKeysForAuthenticated:["GET /user/keys",{},{renamed:["users","listPublicSshKeysForAuthenticatedUser"]}],listPublicSshKeysForAuthenticatedUser:["GET /user/keys"],listSocialAccountsForAuthenticatedUser:["GET /user/social_accounts"],listSocialAccountsForUser:["GET /users/{username}/social_accounts"],listSshSigningKeysForAuthenticatedUser:["GET /user/ssh_signing_keys"],listSshSigningKeysForUser:["GET /users/{username}/ssh_signing_keys"],setPrimaryEmailVisibilityForAuthenticated:["PATCH /user/email/visibility",{},{renamed:["users","setPrimaryEmailVisibilityForAuthenticatedUser"]}],setPrimaryEmailVisibilityForAuthenticatedUser:["PATCH /user/email/visibility"],unblock:["DELETE /user/blocks/{username}"],unfollow:["DELETE /user/following/{username}"],updateAuthenticated:["PATCH /user"]}};var mW=pW;const qo=new Map;for(const[t,e]of Object.entries(mW))for(const[r,n]of Object.entries(e)){const[i,s,o]=n,[a,l]=i.split(/ /),c=Object.assign({method:a,url:l},s);qo.has(t)||qo.set(t,new Map),qo.get(t).set(r,{scope:t,methodName:r,endpointDefaults:c,decorations:o})}const gW={has({scope:t},e){return qo.get(t).has(e)},getOwnPropertyDescriptor(t,e){return{value:this.get(t,e),configurable:!0,writable:!0,enumerable:!0}},defineProperty(t,e,r){return Object.defineProperty(t.cache,e,r),!0},deleteProperty(t,e){return delete t.cache[e],!0},ownKeys({scope:t}){return[...qo.get(t).keys()]},set(t,e,r){return t.cache[e]=r},get({octokit:t,scope:e,cache:r},n){if(r[n])return r[n];const i=qo.get(e).get(n);if(!i)return;const{endpointDefaults:s,decorations:o}=i;return o?r[n]=bW(t,e,n,s,o):r[n]=t.request.defaults(s),r[n]}};function _W(t){const e={};for(const r of qo.keys())e[r]=new Proxy({octokit:t,scope:r,cache:{}},gW);return e}function bW(t,e,r,n,i){const s=t.request.defaults(n);function o(...a){let l=s.endpoint.merge(...a);if(i.mapToData)return l=Object.assign({},l,{data:l[i.mapToData],[i.mapToData]:void 0}),s(l);if(i.renamed){const[c,u]=i.renamed;t.log.warn(`octokit.${e}.${r}() has been renamed to octokit.${c}.${u}()`)}if(i.deprecated&&t.log.warn(i.deprecated),i.renamedParameters){const c=s.endpoint.merge(...a);for(const[u,h]of Object.entries(i.renamedParameters))u in c&&(t.log.warn(`"${u}" parameter is deprecated for "octokit.${e}.${r}()". Use "${h}" instead`),h in c||(c[h]=c[u]),delete c[u]);return s(c)}return s(...a)}return Object.assign(o,s)}function aO(t){const e=_W(t);return{...e,rest:e}}aO.VERSION=dW;const yW="21.0.2",vW=cW.plugin(nO,aO,oO).defaults({userAgent:`octokit-rest.js/${yW}`});class wW{#t=new mV(ko);#r=new fV(ko);#e=new Gz(this.#r);#n=new vV(ko);artifacts=ba({});showWorkbench=Qr(!1);currentView=Qr("code");unsavedFiles=Qr(new Set);modifiedFiles=new Set;artifactIdList=[];#s=Promise.resolve();constructor(){}addToExecutionQueue(e){this.#s=this.#s.then(()=>e())}get previews(){return this.#t.previews}get files(){return this.#r.files}get currentDocument(){return this.#e.currentDocument}get selectedFile(){return this.#e.selectedFile}get firstArtifact(){return this.#i(this.artifactIdList[0])}get filesCount(){return this.#r.filesCount}get showTerminal(){return this.#n.showTerminal}get boltTerminal(){return this.#n.boltTerminal}toggleTerminal(e){this.#n.toggleTerminal(e)}attachTerminal(e){this.#n.attachTerminal(e)}attachBoltTerminal(e){this.#n.attachBoltTerminal(e)}onTerminalResize(e,r){this.#n.onTerminalResize(e,r)}setDocuments(e){if(this.#e.setDocuments(e),this.#r.filesCount>0&&this.currentDocument.get()===void 0){for(const[r,n]of Object.entries(e))if(n?.type==="file"){this.setSelectedFile(r);break}}}setShowWorkbench(e){this.showWorkbench.set(e)}setCurrentDocumentContent(e){const r=this.currentDocument.get()?.filePath;if(!r)return;const n=this.#r.getFile(r)?.content,i=n!==void 0&&n!==e;this.#e.updateFile(r,e);const s=this.currentDocument.get();if(s){const o=this.unsavedFiles.get();if(i&&o.has(s.filePath))return;const a=new Set(o);i?a.add(s.filePath):a.delete(s.filePath),this.unsavedFiles.set(a)}}setCurrentDocumentScrollPosition(e){const r=this.currentDocument.get();if(!r)return;const{filePath:n}=r;this.#e.updateScrollPosition(n,e)}setSelectedFile(e){this.#e.setSelectedFile(e)}async saveFile(e){const n=this.#e.documents.get()[e];if(n===void 0)return;await this.#r.saveFile(e,n.value);const i=new Set(this.unsavedFiles.get());i.delete(e),this.unsavedFiles.set(i)}async saveCurrentDocument(){const e=this.currentDocument.get();e!==void 0&&await this.saveFile(e.filePath)}resetCurrentDocument(){const e=this.currentDocument.get();if(e===void 0)return;const{filePath:r}=e,n=this.#r.getFile(r);n&&this.setCurrentDocumentContent(n.content)}async saveAllFiles(){for(const e of this.unsavedFiles.get())await this.saveFile(e)}getFileModifcations(){return this.#r.getFileModifications()}resetAllFileModifications(){this.#r.resetFileModifications()}abortAllActions(){}addArtifact({messageId:e,title:r,id:n,type:i}){this.#i(e)||(this.artifactIdList.includes(e)||this.artifactIdList.push(e),this.artifacts.setKey(e,{id:n,title:r,closed:!1,type:i,runner:new Dz(ko,()=>this.boltTerminal)}))}updateArtifact({messageId:e},r){const n=this.#i(e);n&&this.artifacts.setKey(e,{...n,...r})}addAction(e){this._addAction(e)}async _addAction(e){const{messageId:r}=e,n=this.#i(r);return n||Fn("Artifact not found"),n.runner.addAction(e)}runAction(e,r=!1){r?this._runAction(e,r):this.addToExecutionQueue(()=>this._runAction(e,r))}async _runAction(e,r=!1){const{messageId:n}=e,i=this.#i(n);if(i||Fn("Artifact not found"),e.action.type==="file"){const s=await ko,o=Re.join(s.workdir,e.action.filePath);this.selectedFile.value!==o&&this.setSelectedFile(o),this.currentView.value!=="code"&&this.currentView.set("code"),this.#e.documents.get()[o]||await i.runner.runAction(e,r),this.#e.updateFile(o,e.action.content),r||(await i.runner.runAction(e),this.resetAllFileModifications())}else await i.runner.runAction(e)}#i(e){return this.artifacts.get()[e]}async downloadZip(){const e=new EV,r=this.files.get(),n=(Ji.value??"project").toLocaleLowerCase().split(" ").join("_"),i=Date.now().toString(36).slice(-6),s=`${n}_${i}`;for(const[a,l]of Object.entries(r))if(l?.type==="file"&&!l.isBinary){const c=K0(a),u=c.split("/");if(u.length>1){let h=e;for(let f=0;f<u.length-1;f++)h=h.folder(u[f]);h.file(u[u.length-1],l.content)}else e.file(c,l.content)}const o=await e.generateAsync({type:"blob"});SV.saveAs(o,`${s}.zip`)}async syncFiles(e){const r=this.files.get(),n=[];for(const[i,s]of Object.entries(r))if(s?.type==="file"&&!s.isBinary){const o=K0(i),a=o.split("/");let l=e;for(let h=0;h<a.length-1;h++)l=await l.getDirectoryHandle(a[h],{create:!0});const u=await(await l.getFileHandle(a[a.length-1],{create:!0})).createWritable();await u.write(s.content),await u.close(),n.push(o)}return n}async pushToGitHub(e,r,n){try{const i=n||ct.get("githubToken"),s=r||ct.get("githubUsername");if(!i||!s)throw new Error("GitHub token or username is not set in cookies or provided.");const o=new vW({auth:i});let a;try{a=(await o.repos.get({owner:s,repo:e})).data}catch(_){if(_ instanceof Error&&"status"in _&&_.status===404){const{data:m}=await o.repos.createForAuthenticatedUser({name:e,private:!1,auto_init:!0});a=m}else throw console.log("cannot create repo!"),_}const l=this.files.get();if(!l||Object.keys(l).length===0)throw new Error("No files found to push");const u=(await Promise.all(Object.entries(l).map(async([_,m])=>{if(m?.type==="file"&&m.content){const{data:p}=await o.git.createBlob({owner:a.owner.login,repo:a.name,content:Ne.from(m.content).toString("base64"),encoding:"base64"});return{path:K0(_),sha:p.sha}}return null}))).filter(Boolean);if(u.length===0)throw new Error("No valid files to push");const{data:h}=await o.git.getRef({owner:a.owner.login,repo:a.name,ref:`heads/${a.default_branch||"main"}`}),f=h.object.sha,{data:d}=await o.git.createTree({owner:a.owner.login,repo:a.name,base_tree:f,tree:u.map(_=>({path:_.path,mode:"100644",type:"blob",sha:_.sha}))}),{data:g}=await o.git.createCommit({owner:a.owner.login,repo:a.name,message:"Initial commit from your app",tree:d.sha,parents:[f]});await o.git.updateRef({owner:a.owner.login,repo:a.name,ref:`heads/${a.default_branch||"main"}`,sha:g.sha}),alert(`Repository created and code pushed: ${a.html_url}`)}catch(i){throw console.error("Error pushing to GitHub:",i),i}}}const Ve=new wW,gt=await v$(),Fs=Qr(void 0),Ji=Qr(void 0);function lO(){const t=KR(),{id:e}=NF(),[r]=MF(),[n,i]=D.useState([]),[s,o]=D.useState(!1),[a,l]=D.useState();return D.useEffect(()=>{if(!gt){o(!0),Be.error("Chat persistence is unavailable");return}e&&Il(gt,e).then(c=>{if(c&&c.messages.length>0){const u=r.get("rewindTo"),h=u?c.messages.slice(0,c.messages.findIndex(f=>f.id===u)+1):c.messages;i(h),l(c.urlId),Ji.set(c.description),Fs.set(c.id)}else t("/",{replace:!0});o(!0)}).catch(c=>{Be.error(c.message)})},[]),{ready:!e||s,initialMessages:n,storeMessageHistory:async c=>{if(!gt||c.length===0)return;const{firstArtifact:u}=Ve;if(!a&&u?.id){const h=await CD(gt,u.id);lT(h),l(h)}if(!Ji.get()&&u?.title&&Ji.set(u?.title),n.length===0&&!Fs.get()){const h=await TD(gt);Fs.set(h),a||lT(h)}await ew(gt,Fs.get(),c,a,Ji.get())},duplicateCurrentChat:async c=>{if(!(!gt||!e&&!c))try{const u=await T$(gt,e||c);t(`/chat/${u}`),Be.success("Chat duplicated successfully")}catch(u){Be.error("Failed to duplicate chat"),console.log(u)}},importChat:async(c,u)=>{if(gt)try{const h=await tw(gt,c,u);window.location.href=`/chat/${h}`,Be.success("Chat imported successfully")}catch(h){h instanceof Error?Be.error("Failed to import chat: "+h.message):Be.error("Failed to import chat")}},exportChat:async(c=a)=>{if(!gt||!c)return;const u=await Il(gt,c),h={messages:u.messages,description:u.description,exportDate:new Date().toISOString()},f=new Blob([JSON.stringify(h,null,2)],{type:"application/json"}),d=URL.createObjectURL(f),g=document.createElement("a");g.href=d,g.download=`chat-${new Date().toISOString()}.json`,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(d)}}}function lT(t){const e=new URL(window.location.href);e.pathname=`/chat/${t}`,window.history.replaceState({},"",e)}function EW(){const t=KR(),[e,r]=D.useState(!1),n=(o,a)=>{const l=new Blob([JSON.stringify(o,null,2)],{type:"application/json"}),c=URL.createObjectURL(l),u=document.createElement("a");u.href=c,u.download=a,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(c)},i=async()=>{if(!gt){Be.error("Database is not available");return}try{r(!0);const o=await Qb(gt);await Promise.all(o.map(a=>xD(gt,a.id))),Be.success("All chats deleted successfully"),t("/",{replace:!0})}catch(o){Be.error("Failed to delete chats"),console.error(o)}finally{r(!1)}},s=async()=>{if(!gt){Be.error("Database is not available");return}try{const a={chats:await Qb(gt),exportDate:new Date().toISOString()};n(a,`all-chats-${new Date().toISOString()}.json`),Be.success("Chats exported successfully")}catch(o){Be.error("Failed to export chats"),console.error(o)}};return R.jsx(R.Fragment,{children:R.jsxs("div",{className:"p-4",children:[R.jsx("h3",{className:"text-lg font-medium text-bolt-elements-textPrimary mb-4",children:"Chat History"}),R.jsx("button",{onClick:s,className:je("bg-bolt-elements-button-primary-background","rounded-lg px-4 py-2 mb-4 transition-colors duration-200","hover:bg-bolt-elements-button-primary-backgroundHover","text-bolt-elements-button-primary-text"),children:"Export All Chats"}),R.jsxs("div",{className:je("text-bolt-elements-textPrimary rounded-lg py-4 mb-4",Xc["settings-danger-area"]),children:[R.jsx("h4",{className:"font-semibold",children:"Danger Area"}),R.jsx("p",{className:"mb-2",children:"This action cannot be undone!"}),R.jsx("button",{onClick:i,disabled:e,className:je("bg-bolt-elements-button-danger-background","rounded-lg px-4 py-2 transition-colors duration-200",e?"opacity-50 cursor-not-allowed":"hover:bg-bolt-elements-button-danger-backgroundHover","text-bolt-elements-button-danger-text"),children:e?"Deleting...":"Delete All Chats"})]})]})})}function SW(t){const e=D.useRef({value:t,previous:t});return D.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function cO(t){const[e,r]=D.useState(void 0);return Jo(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;r({width:o,height:a})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var fw="Switch",[xW,NSe]=$h(fw),[TW,CW]=xW(fw),uO=D.forwardRef((t,e)=>{const{__scopeSwitch:r,name:n,checked:i,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...h}=t,[f,d]=D.useState(null),g=Xt(e,y=>d(y)),_=D.useRef(!1),m=f?u||!!f.closest("form"):!0,[p=!1,b]=zh({prop:i,defaultProp:s,onChange:c});return R.jsxs(TW,{scope:r,checked:p,disabled:a,children:[R.jsx(Dt.button,{type:"button",role:"switch","aria-checked":p,"aria-required":o,"data-state":dO(p),"data-disabled":a?"":void 0,disabled:a,value:l,...h,ref:g,onClick:Ke(t.onClick,y=>{b(v=>!v),m&&(_.current=y.isPropagationStopped(),_.current||y.stopPropagation())})}),m&&R.jsx(kW,{control:f,bubbles:!_.current,name:n,value:l,checked:p,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});uO.displayName=fw;var hO="SwitchThumb",fO=D.forwardRef((t,e)=>{const{__scopeSwitch:r,...n}=t,i=CW(hO,r);return R.jsx(Dt.span,{"data-state":dO(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:e})});fO.displayName=hO;var kW=t=>{const{control:e,checked:r,bubbles:n=!0,...i}=t,s=D.useRef(null),o=SW(r),a=cO(e);return D.useEffect(()=>{const l=s.current,c=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(c,"checked").set;if(o!==r&&h){const f=new Event("click",{bubbles:n});h.call(l,r),l.dispatchEvent(f)}},[o,r,n]),R.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:s,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function dO(t){return t?"checked":"unchecked"}var AW=uO,RW=fO;const h1=D.memo(({className:t,onCheckedChange:e,checked:r})=>R.jsx(AW,{className:je("relative h-6 w-11 cursor-pointer rounded-full bg-bolt-elements-button-primary-background","transition-colors duration-200 ease-in-out","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50","data-[state=checked]:bg-bolt-elements-item-contentAccent",t),checked:r,onCheckedChange:n=>e?.(n),children:R.jsx(RW,{className:je("block h-5 w-5 rounded-full bg-white","shadow-lg shadow-black/20","transition-transform duration-200 ease-in-out","translate-x-0.5","data-[state=checked]:translate-x-[1.375rem]","will-change-transform")})})),PW=["Ollama","LMStudio","OpenAILike"],pO=["OpenAILike","LMStudio","Ollama"],IW=ba({toggleTerminal:{key:"j",ctrlOrMetaKey:!0,action:()=>Ve.toggleTerminal()}}),mO={};ec.forEach(t=>{mO[t.name]={...t,settings:{enabled:!1}}});const rd=ba(mO),Q0=Qr(!1),Z0=Qr(!0);function Wh(){const t=St(rd),e=St(Q0),r=St(Z0),[n,i]=D.useState([]);D.useEffect(()=>{const l=ct.get("providers");if(l)try{const h=JSON.parse(l);Object.keys(h).forEach(f=>{const d=t[f];rd.setKey(f,{...d,settings:{...h[f],enabled:h[f].enabled||!0}})})}catch(h){console.error("Failed to parse providers from cookies:",h)}const c=ct.get("isDebugEnabled");c&&Q0.set(c==="true");const u=ct.get("isLocalModelsEnabled");u&&Z0.set(u==="true")},[]),D.useEffect(()=>{const l=rd.get(),c={};Object.keys(l).forEach(u=>{c[u]=l[u].settings}),ct.set("providers",JSON.stringify(c))},[t]),D.useEffect(()=>{let l=Object.entries(t).filter(([c,u])=>u.settings.enabled).map(([c,u])=>u);r||(l=l.filter(c=>!pO.includes(c.name))),i(l)},[t,r]);const s=D.useCallback((l,c)=>{const u=t[l].settings;rd.setKey(l,{...t[l],settings:{...u,...c}})},[]),o=D.useCallback(l=>{Q0.set(l),ct.set("isDebugEnabled",String(l))},[]),a=D.useCallback(l=>{Z0.set(l),ct.set("isLocalModelsEnabled",String(l))},[]);return{providers:t,activeProviders:n,updateProviderSettings:s,debug:e,enableDebugMode:o,isLocalModel:r,enableLocalModels:a}}function DW(){const{providers:t,updateProviderSettings:e,isLocalModel:r}=Wh(),[n,i]=D.useState([]),[s,o]=D.useState("");return D.useEffect(()=>{let a=Object.entries(t).map(([l,c])=>({...c,name:l}));s&&s.length>0&&(a=a.filter(l=>l.name.toLowerCase().includes(s.toLowerCase()))),r||(a=a.filter(l=>!pO.includes(l.name))),a.sort((l,c)=>l.name.localeCompare(c.name)),i(a)},[t,s,r]),R.jsxs("div",{className:"p-4",children:[R.jsx("div",{className:"flex mb-4",children:R.jsx("input",{type:"text",placeholder:"Search providers...",value:s,onChange:a=>o(a.target.value),className:"w-full bg-white dark:bg-bolt-elements-background-depth-4 relative px-2 py-1.5 rounded-md focus:outline-none placeholder-bolt-elements-textTertiary text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary border border-bolt-elements-borderColor"})}),n.map(a=>R.jsxs("div",{className:"flex flex-col mb-2 provider-item hover:bg-bolt-elements-bg-depth-3 p-4 rounded-lg border border-bolt-elements-borderColor ",children:[R.jsxs("div",{className:"flex items-center justify-between mb-2",children:[R.jsx("span",{className:"text-bolt-elements-textPrimary",children:a.name}),R.jsx(h1,{className:"ml-auto",checked:a.settings.enabled,onCheckedChange:l=>e(a.name,{...a.settings,enabled:l})})]}),PW.includes(a.name)&&a.settings.enabled&&R.jsxs("div",{className:"mt-2",children:[R.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary mb-1",children:"Base URL:"}),R.jsx("input",{type:"text",value:a.settings.baseUrl||"",onChange:l=>e(a.name,{...a.settings,baseUrl:l.target.value}),placeholder:`Enter ${a.name} base URL`,className:"w-full bg-white dark:bg-bolt-elements-background-depth-4 relative px-2 py-1.5 rounded-md focus:outline-none placeholder-bolt-elements-textTertiary text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary border border-bolt-elements-borderColor"})]})]},a.name))]})}function OW(){const{debug:t,enableDebugMode:e,isLocalModel:r,enableLocalModels:n}=Wh();return R.jsxs("div",{className:"p-4 bg-bolt-elements-bg-depth-2 border border-bolt-elements-borderColor rounded-lg mb-4",children:[R.jsxs("div",{className:"mb-6",children:[R.jsx("h3",{className:"text-lg font-medium text-bolt-elements-textPrimary mb-4",children:"Optional Features"}),R.jsxs("div",{className:"flex items-center justify-between mb-2",children:[R.jsx("span",{className:"text-bolt-elements-textPrimary",children:"Debug Info"}),R.jsx(h1,{className:"ml-auto",checked:t,onCheckedChange:e})]})]}),R.jsxs("div",{className:"mb-6 border-t border-bolt-elements-borderColor pt-4",children:[R.jsx("h3",{className:"text-lg font-medium text-bolt-elements-textPrimary mb-4",children:"Experimental Features"}),R.jsx("p",{className:"text-sm text-bolt-elements-textSecondary mb-4",children:"Disclaimer: Experimental features may be unstable and are subject to change."}),R.jsxs("div",{className:"flex items-center justify-between mb-2",children:[R.jsx("span",{className:"text-bolt-elements-textPrimary",children:"Enable Local Models"}),R.jsx(h1,{className:"ml-auto",checked:r,onCheckedChange:n})]})]})]})}const LW="6598794965bc2dff32f4f60185bf8d2c4b0841f0",NW={commit:LW};var Ma={};const cT=NW.commit;function MW(){const{providers:t}=Wh(),[e,r]=D.useState([]);D.useEffect(()=>{r(Object.entries(t).filter(([i,s])=>s.settings.enabled).map(([i,s])=>s.name))},[t]);const n=D.useCallback(()=>{const i={OS:navigator.platform,Browser:navigator.userAgent,ActiveFeatures:e,BaseURLs:{Ollama:Ma.REACT_APP_OLLAMA_URL,OpenAI:Ma.REACT_APP_OPENAI_URL,LMStudio:Ma.REACT_APP_LM_STUDIO_URL},Version:cT};navigator.clipboard.writeText(JSON.stringify(i,null,2)).then(()=>{alert("Debug information copied to clipboard!")})},[t]);return R.jsxs("div",{className:"p-4",children:[R.jsx("h3",{className:"text-lg font-medium text-bolt-elements-textPrimary mb-4",children:"Debug Tab"}),R.jsx("button",{onClick:n,className:"bg-blue-500 text-white rounded-lg px-4 py-2 hover:bg-blue-600 mb-4 transition-colors duration-200",children:"Copy to Clipboard"}),R.jsx("h4",{className:"text-md font-medium text-bolt-elements-textPrimary",children:"System Information"}),R.jsxs("p",{className:"text-bolt-elements-textSecondary",children:["OS: ",navigator.platform]}),R.jsxs("p",{className:"text-bolt-elements-textSecondary",children:["Browser: ",navigator.userAgent]}),R.jsx("h4",{className:"text-md font-medium text-bolt-elements-textPrimary mt-4",children:"Active Features"}),R.jsx("ul",{children:e.map(i=>R.jsx("li",{className:"text-bolt-elements-textSecondary",children:i},i))}),R.jsx("h4",{className:"text-md font-medium text-bolt-elements-textPrimary mt-4",children:"Base URLs"}),R.jsxs("ul",{children:[R.jsxs("li",{className:"text-bolt-elements-textSecondary",children:["Ollama: ",Ma.REACT_APP_OLLAMA_URL]}),R.jsxs("li",{className:"text-bolt-elements-textSecondary",children:["OpenAI: ",Ma.REACT_APP_OPENAI_URL]}),R.jsxs("li",{className:"text-bolt-elements-textSecondary",children:["LM Studio: ",Ma.REACT_APP_LM_STUDIO_URL]})]}),R.jsx("h4",{className:"text-md font-medium text-bolt-elements-textPrimary mt-4",children:"Version Information"}),R.jsxs("p",{className:"text-bolt-elements-textSecondary",children:["Version Hash: ",cT]})]})}function BW(){const[t,e]=D.useState(ct.get("githubUsername")||""),[r,n]=D.useState(ct.get("githubToken")||""),i=()=>{ct.set("githubUsername",t),ct.set("githubToken",r),Be.success("GitHub credentials saved successfully!")};return R.jsxs("div",{className:"p-4 mb-4 border border-bolt-elements-borderColor rounded-lg bg-bolt-elements-background-depth-3",children:[R.jsx("h3",{className:"text-lg font-medium text-bolt-elements-textPrimary mb-4",children:"GitHub Connection"}),R.jsxs("div",{className:"flex mb-4",children:[R.jsxs("div",{className:"flex-1 mr-2",children:[R.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary mb-1",children:"GitHub Username:"}),R.jsx("input",{type:"text",value:t,onChange:s=>e(s.target.value),className:"w-full bg-white dark:bg-bolt-elements-background-depth-4 relative px-2 py-1.5 rounded-md focus:outline-none placeholder-bolt-elements-textTertiary text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary border border-bolt-elements-borderColor"})]}),R.jsxs("div",{className:"flex-1",children:[R.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary mb-1",children:"Personal Access Token:"}),R.jsx("input",{type:"password",value:r,onChange:s=>n(s.target.value),className:"w-full bg-white dark:bg-bolt-elements-background-depth-4 relative px-2 py-1.5 rounded-md focus:outline-none placeholder-bolt-elements-textTertiary text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary border border-bolt-elements-borderColor"})]})]}),R.jsx("div",{className:"flex mb-4",children:R.jsx("button",{onClick:i,className:"bg-bolt-elements-button-primary-background rounded-lg px-4 py-2 mr-2 transition-colors duration-200 hover:bg-bolt-elements-button-primary-backgroundHover text-bolt-elements-button-primary-text",children:"Save Connection"})})]})}const FW=({open:t,onClose:e})=>{const{debug:r}=Wh(),[n,i]=D.useState("chat-history"),s=[{id:"chat-history",label:"Chat History",icon:"i-ph:book",component:R.jsx(EW,{})},{id:"providers",label:"Providers",icon:"i-ph:key",component:R.jsx(DW,{})},{id:"features",label:"Features",icon:"i-ph:star",component:R.jsx(OW,{})},{id:"connection",label:"Connection",icon:"i-ph:link",component:R.jsx(BW,{})},...r?[{id:"debug",label:"Debug Tab",icon:"i-ph:bug",component:R.jsx(MW,{})}]:[]];return R.jsx(dD,{open:t,children:R.jsxs(pD,{children:[R.jsx(mD,{asChild:!0,onClick:e,children:R.jsx(Jr.div,{className:"bg-black/50 fixed inset-0 z-max backdrop-blur-sm",initial:"closed",animate:"open",exit:"closed",variants:yD})}),R.jsx(gD,{asChild:!0,children:R.jsxs(Jr.div,{className:"fixed top-[50%] left-[50%] z-max h-[85vh] w-[90vw] max-w-[900px] translate-x-[-50%] translate-y-[-50%] border border-bolt-elements-borderColor rounded-lg shadow-lg focus:outline-none overflow-hidden",initial:"closed",animate:"open",exit:"closed",variants:vD,children:[R.jsxs("div",{className:"flex h-full",children:[R.jsxs("div",{className:je("w-48 border-r border-bolt-elements-borderColor bg-bolt-elements-background-depth-1 p-4 flex flex-col justify-between",Xc["settings-tabs"]),children:[R.jsx(wD,{className:"flex-shrink-0 text-lg font-semibold text-bolt-elements-textPrimary mb-2",children:"Settings"}),s.map(o=>R.jsxs("button",{onClick:()=>i(o.id),className:je(n===o.id?Xc.active:""),children:[R.jsx("div",{className:o.icon}),o.label]},o.id)),R.jsxs("div",{className:"mt-auto flex flex-col gap-2",children:[R.jsxs("a",{href:"https://github.com/stackblitz-labs/bolt.diy",target:"_blank",rel:"noopener noreferrer",className:je(Xc["settings-button"],"flex items-center gap-2"),children:[R.jsx("div",{className:"i-ph:github-logo"}),"GitHub"]}),R.jsxs("a",{href:"https://stackblitz-labs.github.io/bolt.diy/",target:"_blank",rel:"noopener noreferrer",className:je(Xc["settings-button"],"flex items-center gap-2"),children:[R.jsx("div",{className:"i-ph:book"}),"Docs"]})]})]}),R.jsx("div",{className:"flex-1 flex flex-col p-8 pt-10 bg-bolt-elements-background-depth-2",children:R.jsx("div",{className:"flex-1 overflow-y-auto",children:s.find(o=>o.id===n)?.component})})]}),R.jsx(_D,{asChild:!0,onClick:e,children:R.jsx(qt,{icon:"i-ph:x",className:"absolute top-[10px] right-[10px]"})})]})})]})})},HW=D.memo(({onClick:t})=>R.jsx(qt,{onClick:t,icon:"i-ph:gear",size:"xl",title:"Settings",className:"text-[#666] hover:text-bolt-elements-textPrimary hover:bg-bolt-elements-item-backgroundActive/10 transition-colors"})),UW=["top","right","bottom","left"],Qs=Math.min,an=Math.max,$p=Math.round,nd=Math.floor,Oi=t=>({x:t,y:t}),jW={left:"right",right:"left",bottom:"top",top:"bottom"},$W={start:"end",end:"start"};function f1(t,e,r){return an(t,Qs(e,r))}function as(t,e){return typeof t=="function"?t(e):t}function ls(t){return t.split("-")[0]}function tc(t){return t.split("-")[1]}function dw(t){return t==="x"?"y":"x"}function pw(t){return t==="y"?"height":"width"}function Zs(t){return["top","bottom"].includes(ls(t))?"y":"x"}function mw(t){return dw(Zs(t))}function zW(t,e,r){r===void 0&&(r=!1);const n=tc(t),i=mw(t),s=pw(i);let o=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=zp(o)),[o,zp(o)]}function VW(t){const e=zp(t);return[d1(t),e,d1(e)]}function d1(t){return t.replace(/start|end/g,e=>$W[e])}function WW(t,e,r){const n=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return r?e?i:n:e?n:i;case"left":case"right":return e?s:o;default:return[]}}function GW(t,e,r,n){const i=tc(t);let s=WW(ls(t),r==="start",n);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(d1)))),s}function zp(t){return t.replace(/left|right|bottom|top/g,e=>jW[e])}function qW(t){return{top:0,right:0,bottom:0,left:0,...t}}function gO(t){return typeof t!="number"?qW(t):{top:t,right:t,bottom:t,left:t}}function Vp(t){const{x:e,y:r,width:n,height:i}=t;return{width:n,height:i,top:r,left:e,right:e+n,bottom:r+i,x:e,y:r}}function uT(t,e,r){let{reference:n,floating:i}=t;const s=Zs(e),o=mw(e),a=pw(o),l=ls(e),c=s==="y",u=n.x+n.width/2-i.width/2,h=n.y+n.height/2-i.height/2,f=n[a]/2-i[a]/2;let d;switch(l){case"top":d={x:u,y:n.y-i.height};break;case"bottom":d={x:u,y:n.y+n.height};break;case"right":d={x:n.x+n.width,y:h};break;case"left":d={x:n.x-i.width,y:h};break;default:d={x:n.x,y:n.y}}switch(tc(e)){case"start":d[o]-=f*(r&&c?-1:1);break;case"end":d[o]+=f*(r&&c?-1:1);break}return d}const KW=async(t,e,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:o}=r,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:h}=uT(c,n,l),f=n,d={},g=0;for(let _=0;_<a.length;_++){const{name:m,fn:p}=a[_],{x:b,y,data:v,reset:w}=await p({x:u,y:h,initialPlacement:n,placement:f,strategy:i,middlewareData:d,rects:c,platform:o,elements:{reference:t,floating:e}});u=b??u,h=y??h,d={...d,[m]:{...d[m],...v}},w&&g<=50&&(g++,typeof w=="object"&&(w.placement&&(f=w.placement),w.rects&&(c=w.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):w.rects),{x:u,y:h}=uT(c,f,l)),_=-1)}return{x:u,y:h,placement:f,strategy:i,middlewareData:d}};async function ju(t,e){var r;e===void 0&&(e={});const{x:n,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:f=!1,padding:d=0}=as(e,t),g=gO(d),m=a[f?h==="floating"?"reference":"floating":h],p=Vp(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(m)))==null||r?m:m.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),b=h==="floating"?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,y=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),v=await(s.isElement==null?void 0:s.isElement(y))?await(s.getScale==null?void 0:s.getScale(y))||{x:1,y:1}:{x:1,y:1},w=Vp(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:y,strategy:l}):b);return{top:(p.top-w.top+g.top)/v.y,bottom:(w.bottom-p.bottom+g.bottom)/v.y,left:(p.left-w.left+g.left)/v.x,right:(w.right-p.right+g.right)/v.x}}const YW=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=as(t,e)||{};if(c==null)return{};const h=gO(u),f={x:r,y:n},d=mw(i),g=pw(d),_=await o.getDimensions(c),m=d==="y",p=m?"top":"left",b=m?"bottom":"right",y=m?"clientHeight":"clientWidth",v=s.reference[g]+s.reference[d]-f[d]-s.floating[g],w=f[d]-s.reference[d],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let x=S?S[y]:0;(!x||!await(o.isElement==null?void 0:o.isElement(S)))&&(x=a.floating[y]||s.floating[g]);const E=v/2-w/2,T=x/2-_[g]/2-1,k=Qs(h[p],T),B=Qs(h[b],T),P=k,O=x-_[g]-B,A=x/2-_[g]/2+E,$=f1(P,A,O),te=!l.arrow&&tc(i)!=null&&A!==$&&s.reference[g]/2-(A<P?k:B)-_[g]/2<0,Q=te?A<P?A-P:A-O:0;return{[d]:f[d]+Q,data:{[d]:$,centerOffset:A-$-Q,...te&&{alignmentOffset:Q}},reset:te}}}),XW=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:_=!0,...m}=as(t,e);if((r=s.arrow)!=null&&r.alignmentOffset)return{};const p=ls(i),b=Zs(a),y=ls(a)===a,v=await(l.isRTL==null?void 0:l.isRTL(c.floating)),w=f||(y||!_?[zp(a)]:VW(a)),S=g!=="none";!f&&S&&w.push(...GW(a,_,g,v));const x=[a,...w],E=await ju(e,m),T=[];let k=((n=s.flip)==null?void 0:n.overflows)||[];if(u&&T.push(E[p]),h){const A=zW(i,o,v);T.push(E[A[0]],E[A[1]])}if(k=[...k,{placement:i,overflows:T}],!T.every(A=>A<=0)){var B,P;const A=(((B=s.flip)==null?void 0:B.index)||0)+1,$=x[A];if($)return{data:{index:A,overflows:k},reset:{placement:$}};let te=(P=k.filter(Q=>Q.overflows[0]<=0).sort((Q,ee)=>Q.overflows[1]-ee.overflows[1])[0])==null?void 0:P.placement;if(!te)switch(d){case"bestFit":{var O;const Q=(O=k.filter(ee=>{if(S){const L=Zs(ee.placement);return L===b||L==="y"}return!0}).map(ee=>[ee.placement,ee.overflows.filter(L=>L>0).reduce((L,M)=>L+M,0)]).sort((ee,L)=>ee[1]-L[1])[0])==null?void 0:O[0];Q&&(te=Q);break}case"initialPlacement":te=a;break}if(i!==te)return{reset:{placement:te}}}return{}}}};function hT(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function fT(t){return UW.some(e=>t[e]>=0)}const QW=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...i}=as(t,e);switch(n){case"referenceHidden":{const s=await ju(e,{...i,elementContext:"reference"}),o=hT(s,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:fT(o)}}}case"escaped":{const s=await ju(e,{...i,altBoundary:!0}),o=hT(s,r.floating);return{data:{escapedOffsets:o,escaped:fT(o)}}}default:return{}}}}};async function ZW(t,e){const{placement:r,platform:n,elements:i}=t,s=await(n.isRTL==null?void 0:n.isRTL(i.floating)),o=ls(r),a=tc(r),l=Zs(r)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,h=as(e,t);let{mainAxis:f,crossAxis:d,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof g=="number"&&(d=a==="end"?g*-1:g),l?{x:d*u,y:f*c}:{x:f*c,y:d*u}}const JW=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await ZW(e,t);return o===((r=a.offset)==null?void 0:r.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},eG=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:m=>{let{x:p,y:b}=m;return{x:p,y:b}}},...l}=as(t,e),c={x:r,y:n},u=await ju(e,l),h=Zs(ls(i)),f=dw(h);let d=c[f],g=c[h];if(s){const m=f==="y"?"top":"left",p=f==="y"?"bottom":"right",b=d+u[m],y=d-u[p];d=f1(b,d,y)}if(o){const m=h==="y"?"top":"left",p=h==="y"?"bottom":"right",b=g+u[m],y=g-u[p];g=f1(b,g,y)}const _=a.fn({...e,[f]:d,[h]:g});return{..._,data:{x:_.x-r,y:_.y-n,enabled:{[f]:s,[h]:o}}}}}},tG=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=as(t,e),u={x:r,y:n},h=Zs(i),f=dw(h);let d=u[f],g=u[h];const _=as(a,e),m=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(l){const y=f==="y"?"height":"width",v=s.reference[f]-s.floating[y]+m.mainAxis,w=s.reference[f]+s.reference[y]-m.mainAxis;d<v?d=v:d>w&&(d=w)}if(c){var p,b;const y=f==="y"?"width":"height",v=["top","left"].includes(ls(i)),w=s.reference[h]-s.floating[y]+(v&&((p=o.offset)==null?void 0:p[h])||0)+(v?0:m.crossAxis),S=s.reference[h]+s.reference[y]+(v?0:((b=o.offset)==null?void 0:b[h])||0)-(v?m.crossAxis:0);g<w?g=w:g>S&&(g=S)}return{[f]:d,[h]:g}}}},rG=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=as(t,e),u=await ju(e,c),h=ls(i),f=tc(i),d=Zs(i)==="y",{width:g,height:_}=s.floating;let m,p;h==="top"||h==="bottom"?(m=h,p=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(p=h,m=f==="end"?"top":"bottom");const b=_-u.top-u.bottom,y=g-u.left-u.right,v=Qs(_-u[m],b),w=Qs(g-u[p],y),S=!e.middlewareData.shift;let x=v,E=w;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(E=y),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(x=b),S&&!f){const k=an(u.left,0),B=an(u.right,0),P=an(u.top,0),O=an(u.bottom,0);d?E=g-2*(k!==0||B!==0?k+B:an(u.left,u.right)):x=_-2*(P!==0||O!==0?P+O:an(u.top,u.bottom))}await l({...e,availableWidth:E,availableHeight:x});const T=await o.getDimensions(a.floating);return g!==T.width||_!==T.height?{reset:{rects:!0}}:{}}}};function vg(){return typeof window<"u"}function rc(t){return _O(t)?(t.nodeName||"").toLowerCase():"#document"}function fn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Fi(t){var e;return(e=(_O(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function _O(t){return vg()?t instanceof Node||t instanceof fn(t).Node:!1}function Gn(t){return vg()?t instanceof Element||t instanceof fn(t).Element:!1}function Ni(t){return vg()?t instanceof HTMLElement||t instanceof fn(t).HTMLElement:!1}function dT(t){return!vg()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof fn(t).ShadowRoot}function Gh(t){const{overflow:e,overflowX:r,overflowY:n,display:i}=qn(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!["inline","contents"].includes(i)}function nG(t){return["table","td","th"].includes(rc(t))}function wg(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function gw(t){const e=_w(),r=Gn(t)?qn(t):t;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function iG(t){let e=Js(t);for(;Ni(e)&&!Dl(e);){if(gw(e))return e;if(wg(e))return null;e=Js(e)}return null}function _w(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Dl(t){return["html","body","#document"].includes(rc(t))}function qn(t){return fn(t).getComputedStyle(t)}function Eg(t){return Gn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Js(t){if(rc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||dT(t)&&t.host||Fi(t);return dT(e)?e.host:e}function bO(t){const e=Js(t);return Dl(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ni(e)&&Gh(e)?e:bO(e)}function $u(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const i=bO(t),s=i===((n=t.ownerDocument)==null?void 0:n.body),o=fn(i);if(s){const a=p1(o);return e.concat(o,o.visualViewport||[],Gh(i)?i:[],a&&r?$u(a):[])}return e.concat(i,$u(i,[],r))}function p1(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function yO(t){const e=qn(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=Ni(t),s=i?t.offsetWidth:r,o=i?t.offsetHeight:n,a=$p(r)!==s||$p(n)!==o;return a&&(r=s,n=o),{width:r,height:n,$:a}}function bw(t){return Gn(t)?t:t.contextElement}function dl(t){const e=bw(t);if(!Ni(e))return Oi(1);const r=e.getBoundingClientRect(),{width:n,height:i,$:s}=yO(e);let o=(s?$p(r.width):r.width)/n,a=(s?$p(r.height):r.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const sG=Oi(0);function vO(t){const e=fn(t);return!_w()||!e.visualViewport?sG:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function oG(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==fn(t)?!1:e}function ta(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const i=t.getBoundingClientRect(),s=bw(t);let o=Oi(1);e&&(n?Gn(n)&&(o=dl(n)):o=dl(t));const a=oG(s,r,n)?vO(s):Oi(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,h=i.height/o.y;if(s){const f=fn(s),d=n&&Gn(n)?fn(n):n;let g=f,_=p1(g);for(;_&&n&&d!==g;){const m=dl(_),p=_.getBoundingClientRect(),b=qn(_),y=p.left+(_.clientLeft+parseFloat(b.paddingLeft))*m.x,v=p.top+(_.clientTop+parseFloat(b.paddingTop))*m.y;l*=m.x,c*=m.y,u*=m.x,h*=m.y,l+=y,c+=v,g=fn(_),_=p1(g)}}return Vp({width:u,height:h,x:l,y:c})}function yw(t,e){const r=Eg(t).scrollLeft;return e?e.left+r:ta(Fi(t)).left+r}function wO(t,e,r){r===void 0&&(r=!1);const n=t.getBoundingClientRect(),i=n.left+e.scrollLeft-(r?0:yw(t,n)),s=n.top+e.scrollTop;return{x:i,y:s}}function aG(t){let{elements:e,rect:r,offsetParent:n,strategy:i}=t;const s=i==="fixed",o=Fi(n),a=e?wg(e.floating):!1;if(n===o||a&&s)return r;let l={scrollLeft:0,scrollTop:0},c=Oi(1);const u=Oi(0),h=Ni(n);if((h||!h&&!s)&&((rc(n)!=="body"||Gh(o))&&(l=Eg(n)),Ni(n))){const d=ta(n);c=dl(n),u.x=d.x+n.clientLeft,u.y=d.y+n.clientTop}const f=o&&!h&&!s?wO(o,l,!0):Oi(0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:r.y*c.y-l.scrollTop*c.y+u.y+f.y}}function lG(t){return Array.from(t.getClientRects())}function cG(t){const e=Fi(t),r=Eg(t),n=t.ownerDocument.body,i=an(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=an(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+yw(t);const a=-r.scrollTop;return qn(n).direction==="rtl"&&(o+=an(e.clientWidth,n.clientWidth)-i),{width:i,height:s,x:o,y:a}}function uG(t,e){const r=fn(t),n=Fi(t),i=r.visualViewport;let s=n.clientWidth,o=n.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=_w();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function hG(t,e){const r=ta(t,!0,e==="fixed"),n=r.top+t.clientTop,i=r.left+t.clientLeft,s=Ni(t)?dl(t):Oi(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=n*s.y;return{width:o,height:a,x:l,y:c}}function pT(t,e,r){let n;if(e==="viewport")n=uG(t,r);else if(e==="document")n=cG(Fi(t));else if(Gn(e))n=hG(e,r);else{const i=vO(t);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Vp(n)}function EO(t,e){const r=Js(t);return r===e||!Gn(r)||Dl(r)?!1:qn(r).position==="fixed"||EO(r,e)}function fG(t,e){const r=e.get(t);if(r)return r;let n=$u(t,[],!1).filter(a=>Gn(a)&&rc(a)!=="body"),i=null;const s=qn(t).position==="fixed";let o=s?Js(t):t;for(;Gn(o)&&!Dl(o);){const a=qn(o),l=gw(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Gh(o)&&!l&&EO(t,o))?n=n.filter(u=>u!==o):i=a,o=Js(o)}return e.set(t,n),n}function dG(t){let{element:e,boundary:r,rootBoundary:n,strategy:i}=t;const o=[...r==="clippingAncestors"?wg(e)?[]:fG(e,this._c):[].concat(r),n],a=o[0],l=o.reduce((c,u)=>{const h=pT(e,u,i);return c.top=an(h.top,c.top),c.right=Qs(h.right,c.right),c.bottom=Qs(h.bottom,c.bottom),c.left=an(h.left,c.left),c},pT(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function pG(t){const{width:e,height:r}=yO(t);return{width:e,height:r}}function mG(t,e,r){const n=Ni(e),i=Fi(e),s=r==="fixed",o=ta(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Oi(0);if(n||!n&&!s)if((rc(e)!=="body"||Gh(i))&&(a=Eg(e)),n){const f=ta(e,!0,s,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else i&&(l.x=yw(i));const c=i&&!n&&!s?wO(i,a):Oi(0),u=o.left+a.scrollLeft-l.x-c.x,h=o.top+a.scrollTop-l.y-c.y;return{x:u,y:h,width:o.width,height:o.height}}function J0(t){return qn(t).position==="static"}function mT(t,e){if(!Ni(t)||qn(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return Fi(t)===r&&(r=r.ownerDocument.body),r}function SO(t,e){const r=fn(t);if(wg(t))return r;if(!Ni(t)){let i=Js(t);for(;i&&!Dl(i);){if(Gn(i)&&!J0(i))return i;i=Js(i)}return r}let n=mT(t,e);for(;n&&nG(n)&&J0(n);)n=mT(n,e);return n&&Dl(n)&&J0(n)&&!gw(n)?r:n||iG(t)||r}const gG=async function(t){const e=this.getOffsetParent||SO,r=this.getDimensions,n=await r(t.floating);return{reference:mG(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function _G(t){return qn(t).direction==="rtl"}const bG={convertOffsetParentRelativeRectToViewportRelativeRect:aG,getDocumentElement:Fi,getClippingRect:dG,getOffsetParent:SO,getElementRects:gG,getClientRects:lG,getDimensions:pG,getScale:dl,isElement:Gn,isRTL:_G};function yG(t,e){let r=null,n;const i=Fi(t);function s(){var a;clearTimeout(n),(a=r)==null||a.disconnect(),r=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:h,height:f}=t.getBoundingClientRect();if(a||e(),!h||!f)return;const d=nd(u),g=nd(i.clientWidth-(c+h)),_=nd(i.clientHeight-(u+f)),m=nd(c),b={rootMargin:-d+"px "+-g+"px "+-_+"px "+-m+"px",threshold:an(0,Qs(1,l))||1};let y=!0;function v(w){const S=w[0].intersectionRatio;if(S!==l){if(!y)return o();S?o(!1,S):n=setTimeout(()=>{o(!1,1e-7)},1e3)}y=!1}try{r=new IntersectionObserver(v,{...b,root:i.ownerDocument})}catch{r=new IntersectionObserver(v,b)}r.observe(t)}return o(!0),s}function vG(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=bw(t),u=i||s?[...c?$u(c):[],...$u(e)]:[];u.forEach(p=>{i&&p.addEventListener("scroll",r,{passive:!0}),s&&p.addEventListener("resize",r)});const h=c&&a?yG(c,r):null;let f=-1,d=null;o&&(d=new ResizeObserver(p=>{let[b]=p;b&&b.target===c&&d&&(d.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var y;(y=d)==null||y.observe(e)})),r()}),c&&!l&&d.observe(c),d.observe(e));let g,_=l?ta(t):null;l&&m();function m(){const p=ta(t);_&&(p.x!==_.x||p.y!==_.y||p.width!==_.width||p.height!==_.height)&&r(),_=p,g=requestAnimationFrame(m)}return r(),()=>{var p;u.forEach(b=>{i&&b.removeEventListener("scroll",r),s&&b.removeEventListener("resize",r)}),h?.(),(p=d)==null||p.disconnect(),d=null,l&&cancelAnimationFrame(g)}}const wG=JW,EG=eG,SG=XW,xG=rG,TG=QW,gT=YW,CG=tG,kG=(t,e,r)=>{const n=new Map,i={platform:bG,...r},s={...i.platform,_c:n};return KW(t,e,{...i,platform:s})};var sp=typeof document<"u"?D.useLayoutEffect:D.useEffect;function Wp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!Wp(t[n],e[n]))return!1;return!0}if(i=Object.keys(t),r=i.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,i[n]))return!1;for(n=r;n--!==0;){const s=i[n];if(!(s==="_owner"&&t.$$typeof)&&!Wp(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function xO(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function _T(t,e){const r=xO(t);return Math.round(e*r)/r}function e_(t){const e=D.useRef(t);return sp(()=>{e.current=t}),e}function AG(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,h]=D.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[f,d]=D.useState(n);Wp(f,n)||d(n);const[g,_]=D.useState(null),[m,p]=D.useState(null),b=D.useCallback(ee=>{ee!==S.current&&(S.current=ee,_(ee))},[]),y=D.useCallback(ee=>{ee!==x.current&&(x.current=ee,p(ee))},[]),v=s||g,w=o||m,S=D.useRef(null),x=D.useRef(null),E=D.useRef(u),T=l!=null,k=e_(l),B=e_(i),P=e_(c),O=D.useCallback(()=>{if(!S.current||!x.current)return;const ee={placement:e,strategy:r,middleware:f};B.current&&(ee.platform=B.current),kG(S.current,x.current,ee).then(L=>{const M={...L,isPositioned:P.current!==!1};A.current&&!Wp(E.current,M)&&(E.current=M,qR.flushSync(()=>{h(M)}))})},[f,e,r,B,P]);sp(()=>{c===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,h(ee=>({...ee,isPositioned:!1})))},[c]);const A=D.useRef(!1);sp(()=>(A.current=!0,()=>{A.current=!1}),[]),sp(()=>{if(v&&(S.current=v),w&&(x.current=w),v&&w){if(k.current)return k.current(v,w,O);O()}},[v,w,O,k,T]);const $=D.useMemo(()=>({reference:S,floating:x,setReference:b,setFloating:y}),[b,y]),te=D.useMemo(()=>({reference:v,floating:w}),[v,w]),Q=D.useMemo(()=>{const ee={position:r,left:0,top:0};if(!te.floating)return ee;const L=_T(te.floating,u.x),M=_T(te.floating,u.y);return a?{...ee,transform:"translate("+L+"px, "+M+"px)",...xO(te.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:L,top:M}},[r,a,te.floating,u.x,u.y]);return D.useMemo(()=>({...u,update:O,refs:$,elements:te,floatingStyles:Q}),[u,O,$,te,Q])}const RG=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:i}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?gT({element:n.current,padding:i}).fn(r):{}:n?gT({element:n,padding:i}).fn(r):{}}}},PG=(t,e)=>({...wG(t),options:[t,e]}),IG=(t,e)=>({...EG(t),options:[t,e]}),DG=(t,e)=>({...CG(t),options:[t,e]}),OG=(t,e)=>({...SG(t),options:[t,e]}),LG=(t,e)=>({...xG(t),options:[t,e]}),NG=(t,e)=>({...TG(t),options:[t,e]}),MG=(t,e)=>({...RG(t),options:[t,e]});var BG="Arrow",TO=D.forwardRef((t,e)=>{const{children:r,width:n=10,height:i=5,...s}=t;return R.jsx(Dt.svg,{...s,ref:e,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:R.jsx("polygon",{points:"0,0 30,0 15,10"})})});TO.displayName=BG;var FG=TO;function vw(t,e=[]){let r=[];function n(s,o){const a=D.createContext(o),l=r.length;r=[...r,o];function c(h){const{scope:f,children:d,...g}=h,_=f?.[t][l]||a,m=D.useMemo(()=>g,Object.values(g));return R.jsx(_.Provider,{value:m,children:d})}function u(h,f){const d=f?.[t][l]||a,g=D.useContext(d);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const i=()=>{const s=r.map(o=>D.createContext(o));return function(a){const l=a?.[t]||s;return D.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[n,HG(i,...e)]}function HG(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=n.reduce((a,{useScope:l,scopeName:c})=>{const h=l(s)[`__scope${c}`];return{...a,...h}},{});return D.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}var ww="Popper",[CO,Sg]=vw(ww),[UG,kO]=CO(ww),AO=t=>{const{__scopePopper:e,children:r}=t,[n,i]=D.useState(null);return R.jsx(UG,{scope:e,anchor:n,onAnchorChange:i,children:r})};AO.displayName=ww;var RO="PopperAnchor",PO=D.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...i}=t,s=kO(RO,r),o=D.useRef(null),a=Xt(e,o);return D.useEffect(()=>{s.onAnchorChange(n?.current||o.current)}),n?null:R.jsx(Dt.div,{...i,ref:a})});PO.displayName=RO;var Ew="PopperContent",[jG,$G]=CO(Ew),IO=D.forwardRef((t,e)=>{const{__scopePopper:r,side:n="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:d="optimized",onPlaced:g,..._}=t,m=kO(Ew,r),[p,b]=D.useState(null),y=Xt(e,X=>b(X)),[v,w]=D.useState(null),S=cO(v),x=S?.width??0,E=S?.height??0,T=n+(s!=="center"?"-"+s:""),k=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},B=Array.isArray(c)?c:[c],P=B.length>0,O={padding:k,boundary:B.filter(VG),altBoundary:P},{refs:A,floatingStyles:$,placement:te,isPositioned:Q,middlewareData:ee}=AG({strategy:"fixed",placement:T,whileElementsMounted:(...X)=>vG(...X,{animationFrame:d==="always"}),elements:{reference:m.anchor},middleware:[PG({mainAxis:i+E,alignmentAxis:o}),l&&IG({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?DG():void 0,...O}),l&&OG({...O}),LG({...O,apply:({elements:X,rects:V,availableWidth:ie,availableHeight:se})=>{const{width:me,height:de}=V.reference,ve=X.floating.style;ve.setProperty("--radix-popper-available-width",`${ie}px`),ve.setProperty("--radix-popper-available-height",`${se}px`),ve.setProperty("--radix-popper-anchor-width",`${me}px`),ve.setProperty("--radix-popper-anchor-height",`${de}px`)}}),v&&MG({element:v,padding:a}),WG({arrowWidth:x,arrowHeight:E}),f&&NG({strategy:"referenceHidden",...O})]}),[L,M]=LO(te),U=Wn(g);Jo(()=>{Q&&U?.()},[Q,U]);const j=ee.arrow?.x,H=ee.arrow?.y,Z=ee.arrow?.centerOffset!==0,[re,ge]=D.useState();return Jo(()=>{p&&ge(window.getComputedStyle(p).zIndex)},[p]),R.jsx("div",{ref:A.setFloating,"data-radix-popper-content-wrapper":"",style:{...$,transform:Q?$.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:re,"--radix-popper-transform-origin":[ee.transformOrigin?.x,ee.transformOrigin?.y].join(" "),...ee.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:R.jsx(jG,{scope:r,placedSide:L,onArrowChange:w,arrowX:j,arrowY:H,shouldHideArrow:Z,children:R.jsx(Dt.div,{"data-side":L,"data-align":M,..._,ref:y,style:{..._.style,animation:Q?void 0:"none"}})})})});IO.displayName=Ew;var DO="PopperArrow",zG={top:"bottom",right:"left",bottom:"top",left:"right"},OO=D.forwardRef(function(e,r){const{__scopePopper:n,...i}=e,s=$G(DO,n),o=zG[s.placedSide];return R.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:R.jsx(FG,{...i,ref:r,style:{...i.style,display:"block"}})})});OO.displayName=DO;function VG(t){return t!==null}var WG=t=>({name:"transformOrigin",options:t,fn(e){const{placement:r,rects:n,middlewareData:i}=e,o=i.arrow?.centerOffset!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=LO(r),h={start:"0%",center:"50%",end:"100%"}[u],f=(i.arrow?.x??0)+a/2,d=(i.arrow?.y??0)+l/2;let g="",_="";return c==="bottom"?(g=o?h:`${f}px`,_=`${-l}px`):c==="top"?(g=o?h:`${f}px`,_=`${n.floating.height+l}px`):c==="right"?(g=`${-l}px`,_=o?h:`${d}px`):c==="left"&&(g=`${n.floating.width+l}px`,_=o?h:`${d}px`),{data:{x:g,y:_}}}});function LO(t){const[e,r="center"]=t.split("-");return[e,r]}var NO=AO,MO=PO,BO=IO,FO=OO,GG="VisuallyHidden",HO=D.forwardRef((t,e)=>R.jsx(Dt.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));HO.displayName=GG;var qG=HO,[xg,MSe]=$h("Tooltip",[Sg]),Tg=Sg(),UO="TooltipProvider",KG=700,m1="tooltip.open",[YG,Sw]=xg(UO),Gp=t=>{const{__scopeTooltip:e,delayDuration:r=KG,skipDelayDuration:n=300,disableHoverableContent:i=!1,children:s}=t,[o,a]=D.useState(!0),l=D.useRef(!1),c=D.useRef(0);return D.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),R.jsx(YG,{scope:e,isOpenDelayed:o,delayDuration:r,onOpen:D.useCallback(()=>{window.clearTimeout(c.current),a(!1)},[]),onClose:D.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a(!0),n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:D.useCallback(u=>{l.current=u},[]),disableHoverableContent:i,children:s})};Gp.displayName=UO;var Cg="Tooltip",[XG,qh]=xg(Cg),jO=t=>{const{__scopeTooltip:e,children:r,open:n,defaultOpen:i=!1,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=t,l=Sw(Cg,t.__scopeTooltip),c=Tg(e),[u,h]=D.useState(null),f=Go(),d=D.useRef(0),g=o??l.disableHoverableContent,_=a??l.delayDuration,m=D.useRef(!1),[p=!1,b]=zh({prop:n,defaultProp:i,onChange:x=>{x?(l.onOpen(),document.dispatchEvent(new CustomEvent(m1))):l.onClose(),s?.(x)}}),y=D.useMemo(()=>p?m.current?"delayed-open":"instant-open":"closed",[p]),v=D.useCallback(()=>{window.clearTimeout(d.current),d.current=0,m.current=!1,b(!0)},[b]),w=D.useCallback(()=>{window.clearTimeout(d.current),d.current=0,b(!1)},[b]),S=D.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>{m.current=!0,b(!0),d.current=0},_)},[_,b]);return D.useEffect(()=>()=>{d.current&&(window.clearTimeout(d.current),d.current=0)},[]),R.jsx(NO,{...c,children:R.jsx(XG,{scope:e,contentId:f,open:p,stateAttribute:y,trigger:u,onTriggerChange:h,onTriggerEnter:D.useCallback(()=>{l.isOpenDelayed?S():v()},[l.isOpenDelayed,S,v]),onTriggerLeave:D.useCallback(()=>{g?w():(window.clearTimeout(d.current),d.current=0)},[w,g]),onOpen:v,onClose:w,disableHoverableContent:g,children:r})})};jO.displayName=Cg;var g1="TooltipTrigger",$O=D.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,i=qh(g1,r),s=Sw(g1,r),o=Tg(r),a=D.useRef(null),l=Xt(e,a,i.onTriggerChange),c=D.useRef(!1),u=D.useRef(!1),h=D.useCallback(()=>c.current=!1,[]);return D.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),R.jsx(MO,{asChild:!0,...o,children:R.jsx(Dt.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...n,ref:l,onPointerMove:Ke(t.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:Ke(t.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:Ke(t.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Ke(t.onFocus,()=>{c.current||i.onOpen()}),onBlur:Ke(t.onBlur,i.onClose),onClick:Ke(t.onClick,i.onClose)})})});$O.displayName=g1;var xw="TooltipPortal",[QG,ZG]=xg(xw,{forceMount:void 0}),zO=t=>{const{__scopeTooltip:e,forceMount:r,children:n,container:i}=t,s=qh(xw,e);return R.jsx(QG,{scope:e,forceMount:r,children:R.jsx(Bi,{present:r||s.open,children:R.jsx(gg,{asChild:!0,container:i,children:n})})})};zO.displayName=xw;var Ol="TooltipContent",VO=D.forwardRef((t,e)=>{const r=ZG(Ol,t.__scopeTooltip),{forceMount:n=r.forceMount,side:i="top",...s}=t,o=qh(Ol,t.__scopeTooltip);return R.jsx(Bi,{present:n||o.open,children:o.disableHoverableContent?R.jsx(WO,{side:i,...s,ref:e}):R.jsx(JG,{side:i,...s,ref:e})})}),JG=D.forwardRef((t,e)=>{const r=qh(Ol,t.__scopeTooltip),n=Sw(Ol,t.__scopeTooltip),i=D.useRef(null),s=Xt(e,i),[o,a]=D.useState(null),{trigger:l,onClose:c}=r,u=i.current,{onPointerInTransitChange:h}=n,f=D.useCallback(()=>{a(null),h(!1)},[h]),d=D.useCallback((g,_)=>{const m=g.currentTarget,p={x:g.clientX,y:g.clientY},b=rq(p,m.getBoundingClientRect()),y=nq(p,b),v=iq(_.getBoundingClientRect()),w=oq([...y,...v]);a(w),h(!0)},[h]);return D.useEffect(()=>()=>f(),[f]),D.useEffect(()=>{if(l&&u){const g=m=>d(m,u),_=m=>d(m,l);return l.addEventListener("pointerleave",g),u.addEventListener("pointerleave",_),()=>{l.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",_)}}},[l,u,d,f]),D.useEffect(()=>{if(o){const g=_=>{const m=_.target,p={x:_.clientX,y:_.clientY},b=l?.contains(m)||u?.contains(m),y=!sq(p,o);b?f():y&&(f(),c())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[l,u,o,c,f]),R.jsx(WO,{...t,ref:s})}),[eq,tq]=xg(Cg,{isInside:!1}),WO=D.forwardRef((t,e)=>{const{__scopeTooltip:r,children:n,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=t,l=qh(Ol,r),c=Tg(r),{onClose:u}=l;return D.useEffect(()=>(document.addEventListener(m1,u),()=>document.removeEventListener(m1,u)),[u]),D.useEffect(()=>{if(l.trigger){const h=f=>{f.target?.contains(l.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,u]),R.jsx(mg,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:R.jsxs(BO,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[R.jsx(MI,{children:n}),R.jsx(eq,{scope:r,isInside:!0,children:R.jsx(qG,{id:l.contentId,role:"tooltip",children:i||n})})]})})});VO.displayName=Ol;var GO="TooltipArrow",qO=D.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,i=Tg(r);return tq(GO,r).isInside?null:R.jsx(FO,{...i,...n,ref:e})});qO.displayName=GO;function rq(t,e){const r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(r,n,i,s)){case s:return"left";case i:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function nq(t,e,r=5){const n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function iq(t){const{top:e,right:r,bottom:n,left:i}=t;return[{x:i,y:e},{x:r,y:e},{x:r,y:n},{x:i,y:n}]}function sq(t,e){const{x:r,y:n}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,u=e[o].y;l>n!=u>n&&r<(c-a)*(n-l)/(u-l)+a&&(i=!i)}return i}function oq(t){const e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),aq(e)}function aq(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const i=t[n];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const r=[];for(let n=t.length-1;n>=0;n--){const i=t[n];for(;r.length>=2;){const s=r[r.length-1],o=r[r.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))r.pop();else break}r.push(i)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var lq=Gp,cq=jO,uq=$O,hq=zO,fq=VO,dq=qO;const ra=({tooltip:t,children:e,sideOffset:r=5,className:n="",arrowClassName:i="",tooltipStyle:s={},position:o="top",maxWidth:a=250,delay:l=0})=>R.jsxs(cq,{delayDuration:l,children:[R.jsx(uq,{asChild:!0,children:e}),R.jsx(hq,{children:R.jsxs(fq,{side:o,className:`
            z-[2000]
            px-2.5
            py-1.5
            max-h-[300px]
            select-none
            rounded-md
            bg-bolt-elements-background-depth-3
            text-bolt-elements-textPrimary
            text-sm
            leading-tight
            shadow-lg
            animate-in
            fade-in-0
            zoom-in-95
            data-[state=closed]:animate-out
            data-[state=closed]:fade-out-0
            data-[state=closed]:zoom-out-95
            ${n}
          `,sideOffset:r,style:{maxWidth:a,...s},children:[R.jsx("div",{className:"break-words",children:t}),R.jsx(dq,{className:`
              fill-bolt-elements-background-depth-3
              ${i}
            `,width:12,height:6})]})})]}),id="<boltArtifact",bT="</boltArtifact>",pq="<boltAction",yT="</boltAction>",sd=Fr("MessageParser");class mq{constructor(e={}){this._options=e}#t=new Map;parse(e,r){let n=this.#t.get(e);n||(n={position:0,insideAction:!1,insideArtifact:!1,currentAction:{content:""},actionId:0},this.#t.set(e,n));let i="",s=n.position,o=!1;for(;s<r.length;){if(n.insideArtifact){const a=n.currentArtifact;if(a===void 0&&Fn("Artifact not initialized"),n.insideAction){const l=r.indexOf(yT,s),c=n.currentAction;if(l!==-1){c.content+=r.slice(s,l);let u=c.content.trim();"type"in c&&c.type==="file"&&(u+=`
`),c.content=u,this._options.callbacks?.onActionClose?.({artifactId:a.id,messageId:e,actionId:String(n.actionId-1),action:c}),n.insideAction=!1,n.currentAction={content:""},s=l+yT.length}else{if("type"in c&&c.type==="file"){const u=r.slice(s);this._options.callbacks?.onActionStream?.({artifactId:a.id,messageId:e,actionId:String(n.actionId-1),action:{...c,content:u,filePath:c.filePath}})}break}}else{const l=r.indexOf(pq,s),c=r.indexOf(bT,s);if(l!==-1&&(c===-1||l<c)){const u=r.indexOf(">",l);if(u!==-1)n.insideAction=!0,n.currentAction=this.#r(r,l,u),this._options.callbacks?.onActionOpen?.({artifactId:a.id,messageId:e,actionId:String(n.actionId++),action:n.currentAction}),s=u+1;else break}else if(c!==-1)this._options.callbacks?.onArtifactClose?.({messageId:e,...a}),n.insideArtifact=!1,n.currentArtifact=void 0,s=c+bT.length;else break}}else if(r[s]==="<"&&r[s+1]!=="/"){let a=s,l="";for(;a<r.length&&l.length<id.length;){if(l+=r[a],l===id){const c=r[a+1];if(c&&c!==">"&&c!==" "){i+=r.slice(s,a+1),s=a+1;break}const u=r.indexOf(">",a);if(u!==-1){const h=r.slice(s,u+1),f=this.#e(h,"title"),d=this.#e(h,"type"),g=this.#e(h,"id");f||sd.warn("Artifact title missing"),g||sd.warn("Artifact id missing"),n.insideArtifact=!0;const _={id:g,title:f,type:d};n.currentArtifact=_,this._options.callbacks?.onArtifactOpen?.({messageId:e,..._});const m=this._options.artifactElement??gq;i+=m({messageId:e}),s=u+1}else o=!0;break}else if(!id.startsWith(l)){i+=r.slice(s,a+1),s=a+1;break}a++}if(a===r.length&&id.startsWith(l))break}else i+=r[s],s++;if(o)break}return n.position=s,i}reset(){this.#t.clear()}#r(e,r,n){const i=e.slice(r,n+1),s=this.#e(i,"type"),o={type:s,content:""};if(s==="file"){const a=this.#e(i,"filePath");a||sd.debug("File path not specified"),o.filePath=a}else["shell","start"].includes(s)||sd.warn(`Unknown action type '${s}'`);return o}#e(e,r){const n=e.match(new RegExp(`${r}="([^"]*)"`,"i"));return n?n[1]:void 0}}const gq=t=>`<div ${['class="__boltArtifact__"',...Object.entries(t).map(([r,n])=>`data-${_q(r)}=${JSON.stringify(n)}`)].join(" ")}></div>`;function _q(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}const Rc=Fr("useMessageParser"),bq=new mq({callbacks:{onArtifactOpen:t=>{Rc.trace("onArtifactOpen",t),Ve.showWorkbench.set(!0),Ve.addArtifact(t)},onArtifactClose:t=>{Rc.trace("onArtifactClose"),Ve.updateArtifact(t,{closed:!0})},onActionOpen:t=>{Rc.trace("onActionOpen",t.action),t.action.type!=="shell"&&Ve.addAction(t)},onActionClose:t=>{Rc.trace("onActionClose",t.action),t.action.type==="shell"&&Ve.addAction(t),Ve.runAction(t)},onActionStream:t=>{Rc.trace("onActionStream",t.action),Ve.runAction(t,!0)}}});function yq(){const[t,e]=D.useState({}),r=D.useCallback((n,i)=>{for(const[s,o]of n.entries())if(o.role==="assistant"){const a=bq.parse(o.id,o.content);e(l=>({...l,[s]:(l[s]||"")+a}))}},[]);return{parsedMessages:t,parseMessages:r}}const vT=Fr("usePromptEnhancement");function vq(){const[t,e]=D.useState(!1),[r,n]=D.useState(!1);return{enhancingPrompt:t,promptEnhanced:r,enhancePrompt:async(o,a,l,c,u)=>{e(!0),n(!1);const h={message:o,model:l,provider:c};u&&(h.apiKeys=u);const d=(await fetch("/api/enhancer",{method:"POST",body:JSON.stringify(h)})).body?.getReader(),g=o;if(d){const _=new TextDecoder;let m="",p;try{for(a("");;){const{value:b,done:y}=await d.read();if(y)break;m+=_.decode(b),vT.trace("Set input",m),a(m)}}catch(b){p=b,a(g)}finally{p&&vT.error(p),e(!1),n(!0),setTimeout(()=>{a(m)})}}},resetEnhancer:()=>{e(!1),n(!1)}}}class wq{#t=new EventTarget;dispatch(e){this.#t.dispatchEvent(new Event(e))}on(e,r){return this.#t.addEventListener(e,r),()=>{this.#t.removeEventListener(e,r)}}}const KO=new wq;function Eq(){const t=St(IW);D.useEffect(()=>{const e=r=>{const{key:n,ctrlKey:i,shiftKey:s,altKey:o,metaKey:a}=r;for(const l in t){const c=t[l];if(c.key.toLowerCase()===n.toLowerCase()&&(c.ctrlOrMetaKey?i||a:(c.ctrlKey===void 0||c.ctrlKey===i)&&(c.metaKey===void 0||c.metaKey===a))&&(c.shiftKey===void 0||c.shiftKey===s)&&(c.altKey===void 0||c.altKey===o)){KO.dispatch(l),r.preventDefault(),r.stopPropagation(),c.action();break}}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[t])}function Sq(){const t=D.useRef(!0),e=D.useRef(),r=D.useRef(),n=D.useRef(),i=D.useCallback(o=>{o?new ResizeObserver(()=>{if(t.current&&e.current){const{scrollHeight:l,clientHeight:c}=e.current,u=l-c;e.current.scrollTo({top:u})}}).observe(o):(n.current?.disconnect(),n.current=void 0)},[]),s=D.useCallback(o=>{o?(r.current=()=>{const{scrollTop:a,scrollHeight:l,clientHeight:c}=o,u=l-c;t.current=Math.abs(a-u)<=10},o.addEventListener("scroll",r.current),e.current=o):(r.current&&e.current?.removeEventListener("scroll",r.current),e.current=void 0,r.current=void 0)},[]);return[i,s]}function YO({initialDescription:t=Ji.get(),customChatId:e,syncWithGlobalStore:r}){const n=St(Fs),[i,s]=D.useState(!1),[o,a]=D.useState(t),[l,c]=D.useState();D.useEffect(()=>{c(e||n)},[e,n]),D.useEffect(()=>{a(t)},[t]);const u=D.useCallback(()=>s(p=>!p),[]),h=D.useCallback(p=>{a(p.target.value)},[]),f=D.useCallback(async()=>{if(!gt||!l)return t;try{return(await Il(gt,l))?.description||t}catch(p){return console.error("Failed to fetch latest description:",p),t}},[gt,l,t]),d=D.useCallback(async()=>{const p=await f();a(p),u()},[f,u]),g=D.useCallback(p=>{const b=p.trim();if(b===t)return u(),!1;const y=b.length>0&&b.length<=100,v=/^[a-zA-Z0-9\s]+$/.test(b);return y?v?!0:(Be.error("Description can only contain alphanumeric characters and spaces."),!1):(Be.error("Description must be between 1 and 100 characters."),!1)},[]),_=D.useCallback(async p=>{if(p.preventDefault(),!!g(o)){try{if(!gt){Be.error("Chat persistence is not available");return}if(!l){Be.error("Chat Id is not available");return}await C$(gt,l,o),r&&Ji.set(o),Be.success("Chat description updated successfully")}catch(b){Be.error("Failed to update chat description: "+b.message)}u()}},[o,gt,l,t,e]),m=D.useCallback(async p=>{p.key==="Escape"&&await d()},[d]);return{editing:i,handleChange:h,handleBlur:d,handleSubmit:_,handleKeyDown:m,currentDescription:o,toggleEditMode:u}}const XO=(t=1024)=>{const[e,r]=D.useState(window.innerWidth<t);return D.useEffect(()=>{const n=()=>r(window.innerWidth<t);return window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}},[t]),e};function xq({item:t,onDelete:e,onDuplicate:r,exportChat:n}){const{id:i}=BF(),s=i===t.urlId,{editing:o,handleChange:a,handleBlur:l,handleSubmit:c,handleKeyDown:u,currentDescription:h,toggleEditMode:f}=YO({initialDescription:t.description,customChatId:t.id,syncWithGlobalStore:s}),d=R.jsxs("form",{onSubmit:c,className:"flex-1 flex items-center",children:[R.jsx("input",{type:"text",className:"flex-1 bg-bolt-elements-background-depth-1 text-bolt-elements-textPrimary rounded px-2 mr-2",autoFocus:!0,value:h,onChange:a,onBlur:l,onKeyDown:u}),R.jsx("button",{type:"submit",className:"i-ph:check scale-110 hover:text-bolt-elements-item-contentAccent",onMouseDown:c})]});return R.jsx("div",{className:je("group rounded-md text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary hover:bg-bolt-elements-background-depth-3 overflow-hidden flex justify-between items-center px-2 py-1",{"[&&]:text-bolt-elements-textPrimary bg-bolt-elements-background-depth-3":s}),children:o?d:R.jsxs("a",{href:`/chat/${t.urlId}`,className:"flex w-full relative truncate block",children:[h,R.jsx("div",{className:je("absolute right-0 z-1 top-0 bottom-0 bg-gradient-to-l from-bolt-elements-background-depth-2 group-hover:from-bolt-elements-background-depth-3 box-content pl-3 to-transparent w-10 flex justify-end group-hover:w-22 group-hover:from-99%",{"from-bolt-elements-background-depth-3 w-10 ":s}),children:R.jsxs("div",{className:"flex items-center p-1 text-bolt-elements-textSecondary opacity-0 group-hover:opacity-100 transition-opacity",children:[R.jsx(od,{toolTipContent:"Export chat",icon:"i-ph:download-simple",onClick:g=>{g.preventDefault(),n(t.id)}}),r&&R.jsx(od,{toolTipContent:"Duplicate chat",icon:"i-ph:copy",onClick:()=>r?.(t.id)}),R.jsx(od,{toolTipContent:"Rename chat",icon:"i-ph:pencil-fill",onClick:g=>{g.preventDefault(),f()}}),R.jsx(o$,{asChild:!0,children:R.jsx(od,{toolTipContent:"Delete chat",icon:"i-ph:trash",className:"[&&]:hover:text-bolt-elements-button-danger-text",onClick:g=>{g.preventDefault(),e?.(g)}})})]})})]})})}const od=({toolTipContent:t,icon:e,className:r,onClick:n})=>R.jsx(ra,{tooltip:t,children:R.jsx("button",{type:"button",className:`scale-110 mr-2 hover:text-bolt-elements-item-contentAccent ${e} ${r||""}`,onClick:n})});function Cr(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function cs(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Tq(t,e){const r=Cr(t);return isNaN(e)?cs(t,NaN):(e&&r.setDate(r.getDate()+e),r)}const QO=6048e5,Cq=864e5;let kq={};function kg(){return kq}function na(t,e){const r=kg(),n=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,i=Cr(t),s=i.getDay(),o=(s<n?7:0)+s-n;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function qp(t){return na(t,{weekStartsOn:1})}function ZO(t){const e=Cr(t),r=e.getFullYear(),n=cs(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=qp(n),s=cs(t,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=qp(s);return e.getTime()>=i.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function Kp(t){const e=Cr(t);return e.setHours(0,0,0,0),e}function wT(t){const e=Cr(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function Aq(t,e){const r=Kp(t),n=Kp(e),i=+r-wT(r),s=+n-wT(n);return Math.round((i-s)/Cq)}function Rq(t){const e=ZO(t),r=cs(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),qp(r)}function Ag(t){return cs(t,Date.now())}function JO(t,e){const r=Kp(t),n=Kp(e);return+r==+n}function Pq(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Iq(t){if(!Pq(t)&&typeof t!="number")return!1;const e=Cr(t);return!isNaN(Number(e))}function Dq(t){const e=Cr(t),r=cs(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Oq={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Lq=(t,e,r)=>{let n;const i=Oq[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function t_(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const Nq={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Mq={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Bq={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Fq={date:t_({formats:Nq,defaultWidth:"full"}),time:t_({formats:Mq,defaultWidth:"full"}),dateTime:t_({formats:Bq,defaultWidth:"full"})},Hq={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Uq=(t,e,r,n)=>Hq[t];function Pc(t){return(e,r)=>{const n=r?.context?String(r.context):"standalone";let i;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=r?.width?String(r.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=r?.width?String(r.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const jq={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},$q={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},zq={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Vq={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Wq={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Gq={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},qq=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Kq={ordinalNumber:qq,era:Pc({values:jq,defaultWidth:"wide"}),quarter:Pc({values:$q,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Pc({values:zq,defaultWidth:"wide"}),day:Pc({values:Vq,defaultWidth:"wide"}),dayPeriod:Pc({values:Wq,defaultWidth:"wide",formattingValues:Gq,defaultFormattingWidth:"wide"})};function Ic(t){return(e,r={})=>{const n=r.width,i=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?Xq(a,h=>h.test(o)):Yq(a,h=>h.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function Yq(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function Xq(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function Qq(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const i=n[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const Zq=/^(\d+)(th|st|nd|rd)?/i,Jq=/\d+/i,eK={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},tK={any:[/^b/i,/^(a|c)/i]},rK={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},nK={any:[/1/i,/2/i,/3/i,/4/i]},iK={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},sK={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},oK={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},aK={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},lK={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},cK={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},uK={ordinalNumber:Qq({matchPattern:Zq,parsePattern:Jq,valueCallback:t=>parseInt(t,10)}),era:Ic({matchPatterns:eK,defaultMatchWidth:"wide",parsePatterns:tK,defaultParseWidth:"any"}),quarter:Ic({matchPatterns:rK,defaultMatchWidth:"wide",parsePatterns:nK,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ic({matchPatterns:iK,defaultMatchWidth:"wide",parsePatterns:sK,defaultParseWidth:"any"}),day:Ic({matchPatterns:oK,defaultMatchWidth:"wide",parsePatterns:aK,defaultParseWidth:"any"}),dayPeriod:Ic({matchPatterns:lK,defaultMatchWidth:"any",parsePatterns:cK,defaultParseWidth:"any"})},hK={code:"en-US",formatDistance:Lq,formatLong:Fq,formatRelative:Uq,localize:Kq,match:uK,options:{weekStartsOn:0,firstWeekContainsDate:1}};function fK(t){const e=Cr(t);return Aq(e,Dq(e))+1}function dK(t){const e=Cr(t),r=+qp(e)-+Rq(e);return Math.round(r/QO)+1}function eL(t,e){const r=Cr(t),n=r.getFullYear(),i=kg(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,o=cs(t,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const a=na(o,e),l=cs(t,0);l.setFullYear(n,0,s),l.setHours(0,0,0,0);const c=na(l,e);return r.getTime()>=a.getTime()?n+1:r.getTime()>=c.getTime()?n:n-1}function pK(t,e){const r=kg(),n=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,i=eL(t,e),s=cs(t,0);return s.setFullYear(i,0,n),s.setHours(0,0,0,0),na(s,e)}function mK(t,e){const r=Cr(t),n=+na(r,e)-+pK(r,e);return Math.round(n/QO)+1}function mt(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const vs={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return mt(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):mt(r+1,2)},d(t,e){return mt(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return mt(t.getHours()%12||12,e.length)},H(t,e){return mt(t.getHours(),e.length)},m(t,e){return mt(t.getMinutes(),e.length)},s(t,e){return mt(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return mt(i,e.length)}},Ba={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ET={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return vs.y(t,e)},Y:function(t,e,r,n){const i=eL(t,n),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return mt(o,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):mt(s,e.length)},R:function(t,e){const r=ZO(t);return mt(r,e.length)},u:function(t,e){const r=t.getFullYear();return mt(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return mt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return mt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return vs.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return mt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const i=mK(t,n);return e==="wo"?r.ordinalNumber(i,{unit:"week"}):mt(i,e.length)},I:function(t,e,r){const n=dK(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):mt(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):vs.d(t,e)},D:function(t,e,r){const n=fK(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):mt(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return mt(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return mt(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return mt(i,e.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let i;switch(n===12?i=Ba.noon:n===0?i=Ba.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let i;switch(n>=17?i=Ba.evening:n>=12?i=Ba.afternoon:n>=4?i=Ba.morning:i=Ba.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return vs.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):vs.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):mt(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):mt(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):vs.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):vs.s(t,e)},S:function(t,e){return vs.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return xT(n);case"XXXX":case"XX":return xo(n);case"XXXXX":case"XXX":default:return xo(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return xT(n);case"xxxx":case"xx":return xo(n);case"xxxxx":case"xxx":default:return xo(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+ST(n,":");case"OOOO":default:return"GMT"+xo(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+ST(n,":");case"zzzz":default:return"GMT"+xo(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return mt(n,e.length)},T:function(t,e,r){const n=t.getTime();return mt(n,e.length)}};function ST(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Math.trunc(n/60),s=n%60;return s===0?r+String(i):r+String(i)+e+mt(s,2)}function xT(t,e){return t%60===0?(t>0?"-":"+")+mt(Math.abs(t)/60,2):xo(t,e)}function xo(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=mt(Math.trunc(n/60),2),s=mt(n%60,2);return r+i+e+s}const TT=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},tL=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},gK=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return TT(t,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",TT(n,e)).replace("{{time}}",tL(i,e))},_K={p:tL,P:gK},bK=/^D+$/,yK=/^Y+$/,vK=["D","DD","YY","YYYY"];function wK(t){return bK.test(t)}function EK(t){return yK.test(t)}function SK(t,e,r){const n=xK(t,e,r);if(console.warn(n),vK.includes(t))throw new RangeError(n)}function xK(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const TK=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,CK=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,kK=/^'([^]*?)'?$/,AK=/''/g,RK=/[a-zA-Z]/;function r_(t,e,r){const n=kg(),i=n.locale??hK,s=n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,o=n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=Cr(t);if(!Iq(a))throw new RangeError("Invalid time value");let l=e.match(CK).map(u=>{const h=u[0];if(h==="p"||h==="P"){const f=_K[h];return f(u,i.formatLong)}return u}).join("").match(TK).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const h=u[0];if(h==="'")return{isToken:!1,value:PK(u)};if(ET[h])return{isToken:!0,value:u};if(h.match(RK))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:u}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(u=>{if(!u.isToken)return u.value;const h=u.value;(EK(h)||wK(h))&&SK(h,e,String(t));const f=ET[h[0]];return f(a,h,i.localize,c)}).join("")}function PK(t){const e=t.match(kK);return e?e[1].replace(AK,"'"):t}function IK(t,e){const r=Cr(t),n=Cr(e);return r.getTime()>n.getTime()}function DK(t,e,r){const n=na(t,r),i=na(e,r);return+n==+i}function OK(t,e){const r=Cr(t),n=Cr(e);return r.getFullYear()===n.getFullYear()}function LK(t,e){return DK(t,Ag(t),e)}function NK(t){return OK(t,Ag(t))}function MK(t){return JO(t,Ag(t))}function rL(t,e){return Tq(t,-e)}function BK(t){return JO(t,rL(Ag(t),1))}function FK(t){const e=t.toSorted((i,s)=>Date.parse(s.timestamp)-Date.parse(i.timestamp)),r={},n=[];return e.forEach(i=>{const s=HK(new Date(i.timestamp));if(s in r)r[s].items.push(i);else{const o={category:s,items:[i]};r[s]=o,n.push(o)}}),n}function HK(t){if(MK(t))return"Today";if(BK(t))return"Yesterday";if(LK(t))return r_(t,"eeee");const e=rL(new Date,30);return IK(t,e)?"Last 30 Days":NK(t)?r_(t,"MMMM"):r_(t,"MMMM yyyy")}function Rg(t,e=100){if(e===0)return t;let r;return function(...n){const i=this;clearTimeout(r),r=window.setTimeout(()=>{t.apply(i,n)},e)}}function UK({items:t=[],searchFields:e=["description"],debounceMs:r=300}){const[n,i]=D.useState(""),s=D.useCallback(Rg(i,r),[]),o=D.useCallback(l=>{s(l.target.value)},[s]),a=D.useMemo(()=>{if(!n.trim())return t;const l=n.toLowerCase();return t.filter(c=>e.some(u=>{const h=c[u];return typeof h=="string"?h.toLowerCase().includes(l):!1}))},[t,n,e]);return{searchQuery:n,filteredItems:a,handleSearchChange:o}}const jK={closed:{opacity:0,visibility:"hidden",left:"-150px",transition:{duration:.2,ease:On}},open:{opacity:1,visibility:"initial",left:0,transition:{duration:.2,ease:On}}},$K=()=>{const{duplicateCurrentChat:t,exportChat:e}=lO(),r=D.useRef(null),[n,i]=D.useState([]),[s,o]=D.useState(!1),[a,l]=D.useState(null),[c,u]=D.useState(!1),{filteredItems:h,handleSearchChange:f}=UK({items:n,searchFields:["description"]}),d=D.useCallback(()=>{gt&&Qb(gt).then(b=>b.filter(y=>y.urlId&&y.description)).then(i).catch(b=>Be.error(b.message))},[]),g=D.useCallback((b,y)=>{b.preventDefault(),gt&&xD(gt,y.id).then(()=>{d(),Fs.get()===y.id&&(window.location.pathname="/")}).catch(v=>{Be.error("Failed to delete conversation"),_$.error(v)})},[]),_=()=>{l(null)};D.useEffect(()=>{s&&d()},[s]),D.useEffect(()=>{function v(w){w.pageX<40&&o(!0),r.current&&w.clientX>r.current.getBoundingClientRect().right+40&&o(!1)}return window.addEventListener("mousemove",v),()=>{window.removeEventListener("mousemove",v)}},[]);const m=(b,y)=>{b.preventDefault(),l({type:"delete",item:y})},p=async b=>{await t(b),d()};return R.jsxs(Jr.div,{ref:r,initial:"closed",animate:s?"open":"closed",variants:jK,className:"flex selection-accent flex-col side-menu fixed top-0 w-[350px] h-full bg-bolt-elements-background-depth-2 border-r rounded-r-3xl border-bolt-elements-borderColor z-sidebar shadow-xl shadow-bolt-elements-sidebar-dropdownShadow text-sm",children:[R.jsx("div",{className:"flex items-center h-[var(--header-height)]"}),R.jsxs("div",{className:"flex-1 flex flex-col h-full w-full overflow-hidden",children:[R.jsx("div",{className:"p-4 select-none",children:R.jsxs("a",{href:"/",className:"flex gap-2 items-center bg-bolt-elements-sidebar-buttonBackgroundDefault text-bolt-elements-sidebar-buttonText hover:bg-bolt-elements-sidebar-buttonBackgroundHover rounded-md p-2 transition-theme",children:[R.jsx("span",{className:"inline-block i-bolt:chat scale-110"}),"Start new chat"]})}),R.jsx("div",{className:"pl-4 pr-4 my-2",children:R.jsx("div",{className:"relative w-full",children:R.jsx("input",{className:"w-full bg-white dark:bg-bolt-elements-background-depth-4 relative px-2 py-1.5 rounded-md focus:outline-none placeholder-bolt-elements-textTertiary text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary border border-bolt-elements-borderColor",type:"search",placeholder:"Search",onChange:f,"aria-label":"Search chats"})})}),R.jsx("div",{className:"text-bolt-elements-textPrimary font-medium pl-6 pr-5 my-2",children:"Your Chats"}),R.jsxs("div",{className:"flex-1 overflow-auto pl-4 pr-5 pb-5",children:[h.length===0&&R.jsx("div",{className:"pl-2 text-bolt-elements-textTertiary",children:n.length===0?"No previous conversations":"No matches found"}),R.jsxs(dD,{open:a!==null,children:[FK(h).map(({category:b,items:y})=>R.jsxs("div",{className:"mt-4 first:mt-0 space-y-1",children:[R.jsx("div",{className:"text-bolt-elements-textTertiary sticky top-0 z-1 bg-bolt-elements-background-depth-2 pl-2 pt-2 pb-1",children:b}),y.map(v=>R.jsx(xq,{item:v,exportChat:e,onDelete:w=>m(w,v),onDuplicate:()=>p(v.id)},v.id))]},b)),R.jsx(f$,{onBackdrop:_,onClose:_,children:a?.type==="delete"&&R.jsxs(R.Fragment,{children:[R.jsx(wD,{children:"Delete Chat?"}),R.jsx(h$,{asChild:!0,children:R.jsxs("div",{children:[R.jsxs("p",{children:["You are about to delete ",R.jsx("strong",{children:a.item.description}),"."]}),R.jsx("p",{className:"mt-1",children:"Are you sure you want to delete this chat?"})]})}),R.jsxs("div",{className:"px-5 pb-4 bg-bolt-elements-background-depth-2 flex gap-2 justify-end",children:[R.jsx(Gx,{type:"secondary",onClick:_,children:"Cancel"}),R.jsx(Gx,{type:"danger",onClick:b=>{g(b,a.item),_()},children:"Delete"})]})]})})]})]}),R.jsxs("div",{className:"flex items-center justify-between border-t border-bolt-elements-borderColor p-4",children:[R.jsx(HW,{onClick:()=>u(!0)}),R.jsx(d$,{})]})]}),R.jsx(FW,{open:c,onClose:()=>u(!1)})]})};let dt=class nL{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,r,n){[e,r]=Ll(this,e,r);let i=[];return this.decompose(0,e,i,2),n.length&&n.decompose(0,n.length,i,3),this.decompose(r,this.length,i,1),yi.from(i,this.length-(r-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,r=this.length){[e,r]=Ll(this,e,r);let n=[];return this.decompose(e,r,n,0),yi.from(n,r-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let r=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),i=new du(this),s=new du(e);for(let o=r,a=r;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=n)return!0}}iter(e=1){return new du(this,e)}iterRange(e,r=this.length){return new iL(this,e,r)}iterLines(e,r){let n;if(e==null)n=this.iter();else{r==null&&(r=this.lines+1);let i=this.line(e).from;n=this.iterRange(i,Math.max(i,r==this.lines+1?this.length:r<=1?0:this.line(r-1).to))}return new sL(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?nL.empty:e.length<=32?new Ut(e):yi.from(Ut.split(e,[]))}};class Ut extends dt{constructor(e,r=zK(e)){super(),this.text=e,this.length=r}get lines(){return this.text.length}get children(){return null}lineInner(e,r,n,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((r?n:a)>=e)return new VK(i,a,n,o);i=a+1,n++}}decompose(e,r,n,i){let s=e<=0&&r>=this.length?this:new Ut(CT(this.text,e,r),Math.min(r,this.length)-Math.max(0,e));if(i&1){let o=n.pop(),a=op(s.text,o.text.slice(),0,s.length);if(a.length<=32)n.push(new Ut(a,o.length+s.length));else{let l=a.length>>1;n.push(new Ut(a.slice(0,l)),new Ut(a.slice(l)))}}else n.push(s)}replace(e,r,n){if(!(n instanceof Ut))return super.replace(e,r,n);[e,r]=Ll(this,e,r);let i=op(this.text,op(n.text,CT(this.text,0,e)),r),s=this.length+n.length-(r-e);return i.length<=32?new Ut(i,s):yi.from(Ut.split(i,[]),s)}sliceString(e,r=this.length,n=`
`){[e,r]=Ll(this,e,r);let i="";for(let s=0,o=0;s<=r&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(i+=n),e<l&&r>s&&(i+=a.slice(Math.max(0,e-s),r-s)),s=l+1}return i}flatten(e){for(let r of this.text)e.push(r)}scanIdentical(){return 0}static split(e,r){let n=[],i=-1;for(let s of e)n.push(s),i+=s.length+1,n.length==32&&(r.push(new Ut(n,i)),n=[],i=-1);return i>-1&&r.push(new Ut(n,i)),r}}class yi extends dt{constructor(e,r){super(),this.children=e,this.length=r,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,r,n,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,l=n+o.lines-1;if((r?l:a)>=e)return o.lineInner(e,r,n,i);i=a+1,n=l+1}}decompose(e,r,n,i){for(let s=0,o=0;o<=r&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&r>=o){let c=i&((o<=e?1:0)|(l>=r?2:0));o>=e&&l<=r&&!c?n.push(a):a.decompose(e-o,r-o,n,c)}o=l+1}}replace(e,r,n){if([e,r]=Ll(this,e,r),n.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&r<=a){let l=o.replace(e-s,r-s,n),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let u=this.children.slice();return u[i]=l,new yi(u,this.length-(r-e)+n.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,r,n)}sliceString(e,r=this.length,n=`
`){[e,r]=Ll(this,e,r);let i="";for(let s=0,o=0;s<this.children.length&&o<=r;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(i+=n),e<l&&r>o&&(i+=a.sliceString(e-o,r-o,n)),o=l+1}return i}flatten(e){for(let r of this.children)r.flatten(e)}scanIdentical(e,r){if(!(e instanceof yi))return 0;let n=0,[i,s,o,a]=r>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=r,s+=r){if(i==o||s==a)return n;let l=this.children[i],c=e.children[s];if(l!=c)return n+l.scanIdentical(c,r);n+=l.length+1}}static from(e,r=e.reduce((n,i)=>n+i.length+1,-1)){let n=0;for(let d of e)n+=d.lines;if(n<32){let d=[];for(let g of e)g.flatten(d);return new Ut(d,r)}let i=Math.max(32,n>>5),s=i<<1,o=i>>1,a=[],l=0,c=-1,u=[];function h(d){let g;if(d.lines>s&&d instanceof yi)for(let _ of d.children)h(_);else d.lines>o&&(l>o||!l)?(f(),a.push(d)):d instanceof Ut&&l&&(g=u[u.length-1])instanceof Ut&&d.lines+g.lines<=32?(l+=d.lines,c+=d.length+1,u[u.length-1]=new Ut(g.text.concat(d.text),g.length+1+d.length)):(l+d.lines>i&&f(),l+=d.lines,c+=d.length+1,u.push(d))}function f(){l!=0&&(a.push(u.length==1?u[0]:yi.from(u,c)),c=-1,l=u.length=0)}for(let d of e)h(d);return f(),a.length==1?a[0]:new yi(a,r)}}dt.empty=new Ut([""],0);function zK(t){let e=-1;for(let r of t)e+=r.length+1;return e}function op(t,e,r=0,n=1e9){for(let i=0,s=0,o=!0;s<t.length&&i<=n;s++){let a=t[s],l=i+a.length;l>=r&&(l>n&&(a=a.slice(0,n-i)),i<r&&(a=a.slice(r-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=l+1}return e}function CT(t,e,r){return op(t,[""],e,r)}class du{constructor(e,r=1){this.dir=r,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[r>0?1:(e instanceof Ut?e.text.length:e.children.length)<<1]}nextInner(e,r){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,i=this.nodes[n],s=this.offsets[n],o=s>>1,a=i instanceof Ut?i.text.length:i.children.length;if(o==(r>0?a:0)){if(n==0)return this.done=!0,this.value="",this;r>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(r>0?0:1)){if(this.offsets[n]+=r,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Ut){let l=i.text[o+(r<0?-1:0)];if(this.offsets[n]+=r,l.length>Math.max(0,e))return this.value=e==0?l:r>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(r<0?-1:0)];e>l.length?(e-=l.length,this.offsets[n]+=r):(r<0&&this.offsets[n]--,this.nodes.push(l),this.offsets.push(r>0?1:(l instanceof Ut?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class iL{constructor(e,r,n){this.value="",this.done=!1,this.cursor=new du(e,r>n?-1:1),this.pos=r>n?e.length:0,this.from=Math.min(r,n),this.to=Math.max(r,n)}nextInner(e,r){if(r<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,r<0?this.pos-this.to:this.from-this.pos);let n=r<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*r,this.value=i.length<=n?i:r<0?i.slice(i.length-n):i.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class sL{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:r,lineBreak:n,value:i}=this.inner.next(e);return r&&this.afterBreak?(this.value="",this.afterBreak=!1):r?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(dt.prototype[Symbol.iterator]=function(){return this.iter()},du.prototype[Symbol.iterator]=iL.prototype[Symbol.iterator]=sL.prototype[Symbol.iterator]=function(){return this});class VK{constructor(e,r,n,i){this.from=e,this.to=r,this.number=n,this.text=i}get length(){return this.to-this.from}}function Ll(t,e,r){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,r))]}let pl="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=1;t<pl.length;t++)pl[t]+=pl[t-1];function WK(t){for(let e=1;e<pl.length;e+=2)if(pl[e]>t)return pl[e-1]<=t;return!1}function kT(t){return t>=127462&&t<=127487}const AT=8205;function fr(t,e,r=!0,n=!0){return(r?oL:GK)(t,e,n)}function oL(t,e,r){if(e==t.length)return e;e&&aL(t.charCodeAt(e))&&lL(t.charCodeAt(e-1))&&e--;let n=Wr(t,e);for(e+=Un(n);e<t.length;){let i=Wr(t,e);if(n==AT||i==AT||r&&WK(i))e+=Un(i),n=i;else if(kT(i)){let s=0,o=e-2;for(;o>=0&&kT(Wr(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function GK(t,e,r){for(;e>0;){let n=oL(t,e-2,r);if(n<e)return n;e--}return 0}function aL(t){return t>=56320&&t<57344}function lL(t){return t>=55296&&t<56320}function Wr(t,e){let r=t.charCodeAt(e);if(!lL(r)||e+1==t.length)return r;let n=t.charCodeAt(e+1);return aL(n)?(r-55296<<10)+(n-56320)+65536:r}function Tw(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Un(t){return t<65536?1:2}const _1=/\r\n?|\n/;var wr=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(wr||(wr={}));class Li{constructor(e){this.sections=e}get length(){let e=0;for(let r=0;r<this.sections.length;r+=2)e+=this.sections[r];return e}get newLength(){let e=0;for(let r=0;r<this.sections.length;r+=2){let n=this.sections[r+1];e+=n<0?this.sections[r]:n}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let r=0,n=0,i=0;r<this.sections.length;){let s=this.sections[r++],o=this.sections[r++];o<0?(e(n,i,s),i+=s):i+=o,n+=s}}iterChangedRanges(e,r=!1){b1(this,e,r)}get invertedDesc(){let e=[];for(let r=0;r<this.sections.length;){let n=this.sections[r++],i=this.sections[r++];i<0?e.push(n,i):e.push(i,n)}return new Li(e)}composeDesc(e){return this.empty?e:e.empty?this:cL(this,e)}mapDesc(e,r=!1){return e.empty?this:y1(this,e,r)}mapPos(e,r=-1,n=wr.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=i+a;if(l<0){if(c>e)return s+(e-i);s+=a}else{if(n!=wr.Simple&&c>=e&&(n==wr.TrackDel&&i<e&&c>e||n==wr.TrackBefore&&i<e||n==wr.TrackAfter&&c>e))return null;if(c>e||c==e&&r<0&&!a)return e==i||r<0?s:s+l;s+=l}i=c}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,r=e){for(let n=0,i=0;n<this.sections.length&&i<=r;){let s=this.sections[n++],o=this.sections[n++],a=i+s;if(o>=0&&i<=r&&a>=e)return i<e&&a>r?"cover":!0;i=a}return!1}toString(){let e="";for(let r=0;r<this.sections.length;){let n=this.sections[r++],i=this.sections[r++];e+=(e?" ":"")+n+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(r=>typeof r!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Li(e)}static create(e){return new Li(e)}}class Qt extends Li{constructor(e,r){super(e),this.inserted=r}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return b1(this,(r,n,i,s,o)=>e=e.replace(i,i+(n-r),o),!1),e}mapDesc(e,r=!1){return y1(this,e,r,!0)}invert(e){let r=this.sections.slice(),n=[];for(let i=0,s=0;i<r.length;i+=2){let o=r[i],a=r[i+1];if(a>=0){r[i]=a,r[i+1]=o;let l=i>>1;for(;n.length<l;)n.push(dt.empty);n.push(o?e.slice(s,s+o):dt.empty)}s+=o}return new Qt(r,n)}compose(e){return this.empty?e:e.empty?this:cL(this,e,!0)}map(e,r=!1){return e.empty?this:y1(this,e,r,!0)}iterChanges(e,r=!1){b1(this,e,r)}get desc(){return Li.create(this.sections)}filter(e){let r=[],n=[],i=[],s=new zu(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,l-a);vr(i,u,-1);let h=s.ins==-1?-1:s.off==0?s.ins:0;vr(r,u,h),h>0&&Hs(n,r,s.text),s.forward(u),a+=u}let c=e[o++];for(;a<c;){if(s.done)break e;let u=Math.min(s.len,c-a);vr(r,u,-1),vr(i,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),a+=u}}return{changes:new Qt(r,n),filtered:Li.create(i)}}toJSON(){let e=[];for(let r=0;r<this.sections.length;r+=2){let n=this.sections[r],i=this.sections[r+1];i<0?e.push(n):i==0?e.push([n]):e.push([n].concat(this.inserted[r>>1].toJSON()))}return e}static of(e,r,n){let i=[],s=[],o=0,a=null;function l(u=!1){if(!u&&!i.length)return;o<r&&vr(i,r-o,-1);let h=new Qt(i,s);a=a?a.compose(h.map(a)):h,i=[],s=[],o=0}function c(u){if(Array.isArray(u))for(let h of u)c(h);else if(u instanceof Qt){if(u.length!=r)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${r})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:h,to:f=h,insert:d}=u;if(h>f||h<0||f>r)throw new RangeError(`Invalid change range ${h} to ${f} (in doc of length ${r})`);let g=d?typeof d=="string"?dt.of(d.split(n||_1)):d:dt.empty,_=g.length;if(h==f&&_==0)return;h<o&&l(),h>o&&vr(i,h-o,-1),vr(i,f-h,_),Hs(s,i,g),o=f}}return c(e),l(!a),a}static empty(e){return new Qt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let r=[],n=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")r.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)r.push(s[0],0);else{for(;n.length<i;)n.push(dt.empty);n[i]=dt.of(s.slice(1)),r.push(s[0],n[i].length)}}}return new Qt(r,n)}static createSet(e,r){return new Qt(e,r)}}function vr(t,e,r,n=!1){if(e==0&&r<=0)return;let i=t.length-2;i>=0&&r<=0&&r==t[i+1]?t[i]+=e:e==0&&t[i]==0?t[i+1]+=r:n?(t[i]+=e,t[i+1]+=r):t.push(e,r)}function Hs(t,e,r){if(r.length==0)return;let n=e.length-2>>1;if(n<t.length)t[t.length-1]=t[t.length-1].append(r);else{for(;t.length<n;)t.push(dt.empty);t.push(r)}}function b1(t,e,r){let n=t.inserted;for(let i=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)i+=a,s+=a;else{let c=i,u=s,h=dt.empty;for(;c+=a,u+=l,l&&n&&(h=h.append(n[o-2>>1])),!(r||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(i,c,s,u,h),i=c,s=u}}}function y1(t,e,r,n=!1){let i=[],s=n?[]:null,o=new zu(t),a=new zu(e);for(let l=-1;;)if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);vr(i,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!r))){let c=a.len;for(vr(i,a.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=u&&(vr(i,0,o.ins),s&&Hs(s,i,o.text),l=o.i),o.forward(u),c-=u}a.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(a.ins==-1){let h=Math.min(u,a.len);c+=h,u-=h,a.forward(h)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;vr(i,c,l<o.i?o.ins:0),s&&l<o.i&&Hs(s,i,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return s?Qt.createSet(i,s):Li.create(i);throw new Error("Mismatched change set lengths")}}function cL(t,e,r=!1){let n=[],i=r?[]:null,s=new zu(t),o=new zu(e);for(let a=!1;;){if(s.done&&o.done)return i?Qt.createSet(n,i):Li.create(n);if(s.ins==0)vr(n,s.len,0,a),s.next();else if(o.len==0&&!o.done)vr(n,0,o.ins,a),i&&Hs(i,n,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),c=n.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;vr(n,l,u,a),i&&u&&Hs(i,n,o.text)}else o.ins==-1?(vr(n,s.off?0:s.len,l,a),i&&Hs(i,n,s.textBit(l))):(vr(n,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&Hs(i,n,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||n.length>c),s.forward2(l),o.forward(l)}}}}class zu{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,r=this.i-2>>1;return r>=e.length?dt.empty:e[r]}textBit(e){let{inserted:r}=this.set,n=this.i-2>>1;return n>=r.length&&!e?dt.empty:r[n].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Lo{constructor(e,r,n){this.from=e,this.to=r,this.flags=n}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,r=-1){let n,i;return this.empty?n=i=e.mapPos(this.from,r):(n=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),n==this.from&&i==this.to?this:new Lo(n,i,this.flags)}extend(e,r=e){if(e<=this.anchor&&r>=this.anchor)return ke.range(e,r);let n=Math.abs(e-this.anchor)>Math.abs(r-this.anchor)?e:r;return ke.range(this.anchor,n)}eq(e,r=!1){return this.anchor==e.anchor&&this.head==e.head&&(!r||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ke.range(e.anchor,e.head)}static create(e,r,n){return new Lo(e,r,n)}}class ke{constructor(e,r){this.ranges=e,this.mainIndex=r}map(e,r=-1){return e.empty?this:ke.create(this.ranges.map(n=>n.map(e,r)),this.mainIndex)}eq(e,r=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n],r))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ke([this.main],0)}addRange(e,r=!0){return ke.create([e].concat(this.ranges),r?0:this.mainIndex+1)}replaceRange(e,r=this.mainIndex){let n=this.ranges.slice();return n[r]=e,ke.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ke(e.ranges.map(r=>Lo.fromJSON(r)),e.main)}static single(e,r=e){return new ke([ke.range(e,r)],0)}static create(e,r=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=n:s.from<n)return ke.normalized(e.slice(),r);n=s.to}return new ke(e,r)}static cursor(e,r=0,n,i){return Lo.create(e,e,(r==0?0:r<0?8:16)|(n==null?7:Math.min(6,n))|(i??16777215)<<6)}static range(e,r,n,i){let s=(n??16777215)<<6|(i==null?7:Math.min(6,i));return r<e?Lo.create(r,e,48|s):Lo.create(e,r,(r>e?8:0)|s)}static normalized(e,r=0){let n=e[r];e.sort((i,s)=>i.from-s.from),r=e.indexOf(n);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);i<=r&&r--,e.splice(--i,2,s.anchor>s.head?ke.range(l,a):ke.range(a,l))}}return new ke(e,r)}}function uL(t,e){for(let r of t.ranges)if(r.to>e)throw new RangeError("Selection points outside of document")}let Cw=0;class Ue{constructor(e,r,n,i,s){this.combine=e,this.compareInput=r,this.compare=n,this.isStatic=i,this.id=Cw++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Ue(e.combine||(r=>r),e.compareInput||((r,n)=>r===n),e.compare||(e.combine?(r,n)=>r===n:kw),!!e.static,e.enables)}of(e){return new ap([],this,0,e)}compute(e,r){if(this.isStatic)throw new Error("Can't compute a static facet");return new ap(e,this,1,r)}computeN(e,r){if(this.isStatic)throw new Error("Can't compute a static facet");return new ap(e,this,2,r)}from(e,r){return r||(r=n=>n),this.compute([e],n=>r(n.field(e)))}}function kw(t,e){return t==e||t.length==e.length&&t.every((r,n)=>r===e[n])}class ap{constructor(e,r,n,i){this.dependencies=e,this.facet=r,this.type=n,this.value=i,this.id=Cw++}dynamicSlot(e){var r;let n=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,c=!1,u=[];for(let h of this.dependencies)h=="doc"?l=!0:h=="selection"?c=!0:((r=e[h.id])!==null&&r!==void 0?r:1)&1||u.push(e[h.id]);return{create(h){return h.values[o]=n(h),1},update(h,f){if(l&&f.docChanged||c&&(f.docChanged||f.selection)||v1(h,u)){let d=n(h);if(a?!RT(d,h.values[o],i):!i(d,h.values[o]))return h.values[o]=d,1}return 0},reconfigure:(h,f)=>{let d,g=f.config.address[s];if(g!=null){let _=Xp(f,g);if(this.dependencies.every(m=>m instanceof Ue?f.facet(m)===h.facet(m):m instanceof ar?f.field(m,!1)==h.field(m,!1):!0)||(a?RT(d=n(h),_,i):i(d=n(h),_)))return h.values[o]=_,0}else d=n(h);return h.values[o]=d,1}}}}function RT(t,e,r){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!r(t[n],e[n]))return!1;return!0}function v1(t,e){let r=!1;for(let n of e)pu(t,n)&1&&(r=!0);return r}function qK(t,e,r){let n=r.map(l=>t[l.id]),i=r.map(l=>l.type),s=n.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let c=[];for(let u=0;u<n.length;u++){let h=Xp(l,n[u]);if(i[u]==2)for(let f of h)c.push(f);else c.push(h)}return e.combine(c)}return{create(l){for(let c of n)pu(l,c);return l.values[o]=a(l),1},update(l,c){if(!v1(l,s))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,c){let u=v1(l,n),h=c.config.facets[e.id],f=c.facet(e);if(h&&!u&&kw(r,h))return l.values[o]=f,0;let d=a(l);return e.compare(d,f)?(l.values[o]=f,0):(l.values[o]=d,1)}}}const PT=Ue.define({static:!0});class ar{constructor(e,r,n,i,s){this.id=e,this.createF=r,this.updateF=n,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let r=new ar(Cw++,e.create,e.update,e.compare||((n,i)=>n===i),e);return e.provide&&(r.provides=e.provide(r)),r}create(e){let r=e.facet(PT).find(n=>n.field==this);return(r?.create||this.createF)(e)}slot(e){let r=e[this.id]>>1;return{create:n=>(n.values[r]=this.create(n),1),update:(n,i)=>{let s=n.values[r],o=this.updateF(s,i);return this.compareF(s,o)?0:(n.values[r]=o,1)},reconfigure:(n,i)=>i.config.address[this.id]!=null?(n.values[r]=i.field(this),0):(n.values[r]=this.create(n),1)}}init(e){return[this,PT.of({field:this,create:e})]}get extension(){return this}}const Ao={lowest:4,low:3,default:2,high:1,highest:0};function Dc(t){return e=>new hL(e,t)}const uo={highest:Dc(Ao.highest),high:Dc(Ao.high),default:Dc(Ao.default),low:Dc(Ao.low),lowest:Dc(Ao.lowest)};class hL{constructor(e,r){this.inner=e,this.prec=r}}class nc{of(e){return new w1(this,e)}reconfigure(e){return nc.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class w1{constructor(e,r){this.compartment=e,this.inner=r}}class Yp{constructor(e,r,n,i,s,o){for(this.base=e,this.compartments=r,this.dynamicSlots=n,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let r=this.address[e.id];return r==null?e.default:this.staticValues[r>>1]}static resolve(e,r,n){let i=[],s=Object.create(null),o=new Map;for(let f of KK(e,r,o))f instanceof ar?i.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let a=Object.create(null),l=[],c=[];for(let f of i)a[f.id]=c.length<<1,c.push(d=>f.slot(d));let u=n?.config.facets;for(let f in s){let d=s[f],g=d[0].facet,_=u&&u[f]||[];if(d.every(m=>m.type==0))if(a[g.id]=l.length<<1|1,kw(_,d))l.push(n.facet(g));else{let m=g.combine(d.map(p=>p.value));l.push(n&&g.compare(m,n.facet(g))?n.facet(g):m)}else{for(let m of d)m.type==0?(a[m.id]=l.length<<1|1,l.push(m.value)):(a[m.id]=c.length<<1,c.push(p=>m.dynamicSlot(p)));a[g.id]=c.length<<1,c.push(m=>qK(m,g,d))}}let h=c.map(f=>f(a));return new Yp(e,o,h,a,l,s)}}function KK(t,e,r){let n=[[],[],[],[],[]],i=new Map;function s(o,a){let l=i.get(o);if(l!=null){if(l<=a)return;let c=n[l].indexOf(o);c>-1&&n[l].splice(c,1),o instanceof w1&&r.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let c of o)s(c,a);else if(o instanceof w1){if(r.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;r.set(o.compartment,c),s(c,a)}else if(o instanceof hL)s(o.inner,o.prec);else if(o instanceof ar)n[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof ap)n[a].push(o),o.facet.extensions&&s(o.facet.extensions,Ao.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,a)}}return s(t,Ao.default),n.reduce((o,a)=>o.concat(a))}function pu(t,e){if(e&1)return 2;let r=e>>1,n=t.status[r];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;t.status[r]=4;let i=t.computeSlot(t,t.config.dynamicSlots[r]);return t.status[r]=2|i}function Xp(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const fL=Ue.define(),E1=Ue.define({combine:t=>t.some(e=>e),static:!0}),dL=Ue.define({combine:t=>t.length?t[0]:void 0,static:!0}),pL=Ue.define(),mL=Ue.define(),gL=Ue.define(),_L=Ue.define({combine:t=>t.length?t[0]:!1});class _s{constructor(e,r){this.type=e,this.value=r}static define(){return new YK}}class YK{of(e){return new _s(this,e)}}class XK{constructor(e){this.map=e}of(e){return new Je(this,e)}}class Je{constructor(e,r){this.type=e,this.value=r}map(e){let r=this.type.map(this.value,e);return r===void 0?void 0:r==this.value?this:new Je(this.type,r)}is(e){return this.type==e}static define(e={}){return new XK(e.map||(r=>r))}static mapEffects(e,r){if(!e.length)return e;let n=[];for(let i of e){let s=i.map(r);s&&n.push(s)}return n}}Je.reconfigure=Je.define();Je.appendConfig=Je.define();class Kt{constructor(e,r,n,i,s,o){this.startState=e,this.changes=r,this.selection=n,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,n&&uL(n,r.newLength),s.some(a=>a.type==Kt.time)||(this.annotations=s.concat(Kt.time.of(Date.now())))}static create(e,r,n,i,s,o){return new Kt(e,r,n,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let r of this.annotations)if(r.type==e)return r.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let r=this.annotation(Kt.userEvent);return!!(r&&(r==e||r.length>e.length&&r.slice(0,e.length)==e&&r[e.length]=="."))}}Kt.time=_s.define();Kt.userEvent=_s.define();Kt.addToHistory=_s.define();Kt.remote=_s.define();function QK(t,e){let r=[];for(let n=0,i=0;;){let s,o;if(n<t.length&&(i==e.length||e[i]>=t[n]))s=t[n++],o=t[n++];else if(i<e.length)s=e[i++],o=e[i++];else return r;!r.length||r[r.length-1]<s?r.push(s,o):r[r.length-1]<o&&(r[r.length-1]=o)}}function bL(t,e,r){var n;let i,s,o;return r?(i=e.changes,s=Qt.empty(e.changes.length),o=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(n=t.selection)===null||n===void 0?void 0:n.map(i),effects:Je.mapEffects(t.effects,i).concat(Je.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function S1(t,e,r){let n=e.selection,i=ml(e.annotations);return e.userEvent&&(i=i.concat(Kt.userEvent.of(e.userEvent))),{changes:e.changes instanceof Qt?e.changes:Qt.of(e.changes||[],r,t.facet(dL)),selection:n&&(n instanceof ke?n:ke.single(n.anchor,n.head)),effects:ml(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function yL(t,e,r){let n=S1(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(r=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(r=!1);let o=!!e[s].sequential;n=bL(n,S1(t,e[s],o?n.changes.newLength:t.doc.length),o)}let i=Kt.create(t,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return JK(r?ZK(i):i)}function ZK(t){let e=t.startState,r=!0;for(let i of e.facet(pL)){let s=i(t);if(s===!1){r=!1;break}Array.isArray(s)&&(r=r===!0?s:QK(r,s))}if(r!==!0){let i,s;if(r===!1)s=t.changes.invertedDesc,i=Qt.empty(e.doc.length);else{let o=t.changes.filter(r);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=Kt.create(e,i,t.selection&&t.selection.map(s),Je.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let n=e.facet(mL);for(let i=n.length-1;i>=0;i--){let s=n[i](t);s instanceof Kt?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Kt?t=s[0]:t=yL(e,ml(s),!1)}return t}function JK(t){let e=t.startState,r=e.facet(gL),n=t;for(let i=r.length-1;i>=0;i--){let s=r[i](t);s&&Object.keys(s).length&&(n=bL(n,S1(e,s,t.changes.newLength),!0))}return n==t?t:Kt.create(e,t.changes,t.selection,n.effects,n.annotations,n.scrollIntoView)}const eY=[];function ml(t){return t==null?eY:Array.isArray(t)?t:[t]}var Yt=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Yt||(Yt={}));const tY=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let x1;try{x1=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function rY(t){if(x1)return x1.test(t);for(let e=0;e<t.length;e++){let r=t[e];if(/\w/.test(r)||r>""&&(r.toUpperCase()!=r.toLowerCase()||tY.test(r)))return!0}return!1}function nY(t){return e=>{if(!/\S/.test(e))return Yt.Space;if(rY(e))return Yt.Word;for(let r=0;r<t.length;r++)if(e.indexOf(t[r])>-1)return Yt.Word;return Yt.Other}}class ot{constructor(e,r,n,i,s,o){this.config=e,this.doc=r,this.selection=n,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)pu(this,a<<1);this.computeSlot=null}field(e,r=!0){let n=this.config.address[e.id];if(n==null){if(r)throw new RangeError("Field is not present in this state");return}return pu(this,n),Xp(this,n)}update(...e){return yL(this,e,!0)}applyTransaction(e){let r=this.config,{base:n,compartments:i}=r;for(let a of e.effects)a.is(nc.reconfigure)?(r&&(i=new Map,r.compartments.forEach((l,c)=>i.set(c,l)),r=null),i.set(a.value.compartment,a.value.extension)):a.is(Je.reconfigure)?(r=null,n=a.value):a.is(Je.appendConfig)&&(r=null,n=ml(n).concat(a.value));let s;r?s=e.startState.values.slice():(r=Yp.resolve(n,i,this),s=new ot(r,this.doc,this.selection,r.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let o=e.startState.facet(E1)?e.newSelection:e.newSelection.asSingle();new ot(r,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:e},range:ke.cursor(r.from+e.length)}))}changeByRange(e){let r=this.selection,n=e(r.ranges[0]),i=this.changes(n.changes),s=[n.range],o=ml(n.effects);for(let a=1;a<r.ranges.length;a++){let l=e(r.ranges[a]),c=this.changes(l.changes),u=c.map(i);for(let f=0;f<a;f++)s[f]=s[f].map(u);let h=i.mapDesc(c,!0);s.push(l.range.map(h)),i=i.compose(u),o=Je.mapEffects(o,u).concat(Je.mapEffects(ml(l.effects),h))}return{changes:i,selection:ke.create(s,r.mainIndex),effects:o}}changes(e=[]){return e instanceof Qt?e:Qt.of(e,this.doc.length,this.facet(ot.lineSeparator))}toText(e){return dt.of(e.split(this.facet(ot.lineSeparator)||_1))}sliceDoc(e=0,r=this.doc.length){return this.doc.sliceString(e,r,this.lineBreak)}facet(e){let r=this.config.address[e.id];return r==null?e.default:(pu(this,r),Xp(this,r))}toJSON(e){let r={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let i=e[n];i instanceof ar&&this.config.address[i.id]!=null&&(r[n]=i.spec.toJSON(this.field(e[n]),this))}return r}static fromJSON(e,r={},n){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(n){for(let s in n)if(Object.prototype.hasOwnProperty.call(e,s)){let o=n[s],a=e[s];i.push(o.init(l=>o.spec.fromJSON(a,l)))}}return ot.create({doc:e.doc,selection:ke.fromJSON(e.selection),extensions:r.extensions?i.concat([r.extensions]):i})}static create(e={}){let r=Yp.resolve(e.extensions||[],new Map),n=e.doc instanceof dt?e.doc:dt.of((e.doc||"").split(r.staticFacet(ot.lineSeparator)||_1)),i=e.selection?e.selection instanceof ke?e.selection:ke.single(e.selection.anchor,e.selection.head):ke.single(0);return uL(i,n.length),r.staticFacet(E1)||(i=i.asSingle()),new ot(r,n,i,r.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(ot.tabSize)}get lineBreak(){return this.facet(ot.lineSeparator)||`
`}get readOnly(){return this.facet(_L)}phrase(e,...r){for(let n of this.facet(ot.phrases))if(Object.prototype.hasOwnProperty.call(n,e)){e=n[e];break}return r.length&&(e=e.replace(/\$(\$|\d*)/g,(n,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>r.length?n:r[s-1]})),e}languageDataAt(e,r,n=-1){let i=[];for(let s of this.facet(fL))for(let o of s(this,r,n))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return nY(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:r,from:n,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-n,a=e-n;for(;o>0;){let l=fr(r,o,!1);if(s(r.slice(l,o))!=Yt.Word)break;o=l}for(;a<i;){let l=fr(r,a);if(s(r.slice(a,l))!=Yt.Word)break;a=l}return o==a?null:ke.range(o+n,a+n)}}ot.allowMultipleSelections=E1;ot.tabSize=Ue.define({combine:t=>t.length?t[0]:4});ot.lineSeparator=dL;ot.readOnly=_L;ot.phrases=Ue.define({compare(t,e){let r=Object.keys(t),n=Object.keys(e);return r.length==n.length&&r.every(i=>t[i]==e[i])}});ot.languageData=fL;ot.changeFilter=pL;ot.transactionFilter=mL;ot.transactionExtender=gL;nc.reconfigure=Je.define();function wa(t,e,r={}){let n={};for(let i of t)for(let s of Object.keys(i)){let o=i[s],a=n[s];if(a===void 0)n[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(r,s))n[s]=r[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)n[i]===void 0&&(n[i]=e[i]);return n}class ia{eq(e){return this==e}range(e,r=e){return T1.create(e,r,this)}}ia.prototype.startSide=ia.prototype.endSide=0;ia.prototype.point=!1;ia.prototype.mapMode=wr.TrackDel;let T1=class vL{constructor(e,r,n){this.from=e,this.to=r,this.value=n}static create(e,r,n){return new vL(e,r,n)}};function C1(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class Aw{constructor(e,r,n,i){this.from=e,this.to=r,this.value=n,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,r,n,i=0){let s=n?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let l=o+a>>1,c=s[l]-e||(n?this.value[l].endSide:this.value[l].startSide)-r;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,r,n,i){for(let s=this.findIndex(r,-1e9,!0),o=this.findIndex(n,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,r){let n=[],i=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,h=this.to[l]+e,f,d;if(u==h){let g=r.mapPos(u,c.startSide,c.mapMode);if(g==null||(f=d=g,c.startSide!=c.endSide&&(d=r.mapPos(u,c.endSide),d<f)))continue}else if(f=r.mapPos(u,c.startSide),d=r.mapPos(h,c.endSide),f>d||f==d&&c.startSide>0&&c.endSide<=0)continue;(d-f||c.endSide-c.startSide)<0||(o<0&&(o=f),c.point&&(a=Math.max(a,d-f)),n.push(c),i.push(f-o),s.push(d-o))}return{mapped:n.length?new Aw(i,s,n,a):null,pos:o}}}class ut{constructor(e,r,n,i){this.chunkPos=e,this.chunk=r,this.nextLayer=n,this.maxPoint=i}static create(e,r,n,i){return new ut(e,r,n,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let r of this.chunk)e+=r.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:r=[],sort:n=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(r.length==0&&!o)return this;if(n&&(r=r.slice().sort(C1)),this.isEmpty)return r.length?ut.of(r):this;let a=new wL(this,null,-1).goto(0),l=0,c=[],u=new sa;for(;a.value||l<r.length;)if(l<r.length&&(a.from-r[l].from||a.startSide-r[l].value.startSide)>=0){let h=r[l++];u.addInner(h.from,h.to,h.value)||c.push(h)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==r.length||this.chunkEnd(a.chunkIndex)<r[l].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||c.push(T1.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?ut.empty:this.nextLayer.update({add:c,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let r=[],n=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)i=Math.max(i,l.maxPoint),r.push(l),n.push(e.mapPos(a));else if(c===!0){let{mapped:u,pos:h}=l.map(a,e);u&&(i=Math.max(i,u.maxPoint),r.push(u),n.push(h))}}let s=this.nextLayer.map(e);return r.length==0?s:new ut(n,r,s||ut.empty,i)}between(e,r,n){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(r>=s&&e<=s+o.length&&o.between(s,e-s,r-s,n)===!1)return}this.nextLayer.between(e,r,n)}}iter(e=0){return Vu.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,r=0){return Vu.from(e).goto(r)}static compare(e,r,n,i,s=-1){let o=e.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),a=r.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),l=IT(o,a,n),c=new Oc(o,l,s),u=new Oc(a,l,s);n.iterGaps((h,f,d)=>DT(c,h,u,f,d,i)),n.empty&&n.length==0&&DT(c,0,u,0,0,i)}static eq(e,r,n=0,i){i==null&&(i=999999999);let s=e.filter(u=>!u.isEmpty&&r.indexOf(u)<0),o=r.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=IT(s,o),l=new Oc(s,a,0).goto(n),c=new Oc(o,a,0).goto(n);for(;;){if(l.to!=c.to||!k1(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>i)return!0;l.next(),c.next()}}static spans(e,r,n,i,s=-1){let o=new Oc(e,null,s).goto(r),a=r,l=o.openStart;for(;;){let c=Math.min(o.to,n);if(o.point){let u=o.activeForPoint(o.to),h=o.pointFrom<r?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,l);i.point(a,c,o.point,u,h,o.pointRank),l=Math.min(o.openEnd(c),u.length)}else c>a&&(i.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>n)return l+(o.point&&o.to>n?1:0);a=o.to,o.next()}}static of(e,r=!1){let n=new sa;for(let i of e instanceof T1?[e]:r?iY(e):e)n.add(i.from,i.to,i.value);return n.finish()}static join(e){if(!e.length)return ut.empty;let r=e[e.length-1];for(let n=e.length-2;n>=0;n--)for(let i=e[n];i!=ut.empty;i=i.nextLayer)r=new ut(i.chunkPos,i.chunk,r,Math.max(i.maxPoint,r.maxPoint));return r}}ut.empty=new ut([],[],null,-1);function iY(t){if(t.length>1)for(let e=t[0],r=1;r<t.length;r++){let n=t[r];if(C1(e,n)>0)return t.slice().sort(C1);e=n}return t}ut.empty.nextLayer=ut.empty;class sa{finishChunk(e){this.chunks.push(new Aw(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,r,n){this.addInner(e,r,n)||(this.nextLayer||(this.nextLayer=new sa)).add(e,r,n)}addInner(e,r,n){let i=e-this.lastTo||n.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(r-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=r,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,r-e)),!0)}addChunk(e,r){if((e-this.lastTo||r.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,r.maxPoint),this.chunks.push(r),this.chunkPos.push(e);let n=r.value.length-1;return this.last=r.value[n],this.lastFrom=r.from[n]+e,this.lastTo=r.to[n]+e,!0}finish(){return this.finishInner(ut.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let r=ut.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,r}}function IT(t,e,r){let n=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&n.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=n.get(s.chunk[o]);a!=null&&(r?r.mapPos(a):a)==s.chunkPos[o]&&!r?.touchesRange(a,a+s.chunk[o].length)&&i.add(s.chunk[o])}return i}class wL{constructor(e,r,n,i=0){this.layer=e,this.skip=r,this.minPoint=n,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,r=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,r,!1),this}gotoInner(e,r,n){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],r,!0);(!n||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,r){(this.to-e||this.endSide-r)<0&&this.gotoInner(e,r,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],r=this.layer.chunk[this.chunkIndex],n=e+r.from[this.rangeIndex];if(this.from=n,this.to=e+r.to[this.rangeIndex],this.value=r.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Vu{constructor(e){this.heap=e}static from(e,r=null,n=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&i.push(new wL(o,r,n,s));return i.length==1?i[0]:new Vu(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,r=-1e9){for(let n of this.heap)n.goto(e,r);for(let n=this.heap.length>>1;n>=0;n--)n_(this.heap,n);return this.next(),this}forward(e,r){for(let n of this.heap)n.forward(e,r);for(let n=this.heap.length>>1;n>=0;n--)n_(this.heap,n);(this.to-e||this.value.endSide-r)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),n_(this.heap,0)}}}function n_(t,e){for(let r=t[e];;){let n=(e<<1)+1;if(n>=t.length)break;let i=t[n];if(n+1<t.length&&i.compare(t[n+1])>=0&&(i=t[n+1],n++),r.compare(i)<0)break;t[n]=r,t[e]=i,e=n}}class Oc{constructor(e,r,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Vu.from(e,r,n)}goto(e,r=-1e9){return this.cursor.goto(e,r),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=r,this.openStart=-1,this.next(),this}forward(e,r){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-r)<0;)this.removeActive(this.minActive);this.cursor.forward(e,r)}removeActive(e){ad(this.active,e),ad(this.activeTo,e),ad(this.activeRank,e),this.minActive=OT(this.active,this.activeTo)}addActive(e){let r=0,{value:n,to:i,rank:s}=this.cursor;for(;r<this.activeRank.length&&(s-this.activeRank[r]||i-this.activeTo[r])>0;)r++;ld(this.active,r,n),ld(this.activeTo,r,i),ld(this.activeRank,r,s),e&&ld(e,r,this.cursor.from),this.minActive=OT(this.active,this.activeTo)}next(){let e=this.to,r=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&ad(n,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(n),this.cursor.next();else if(r&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let i=n.length-1;i>=0&&n[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let r=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&r.push(this.active[n]);return r.reverse()}openEnd(e){let r=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)r++;return r}}function DT(t,e,r,n,i,s){t.goto(e),r.goto(n);let o=n+i,a=n,l=n-e;for(;;){let c=t.to+l-r.to||t.endSide-r.endSide,u=c<0?t.to+l:r.to,h=Math.min(u,o);if(t.point||r.point?t.point&&r.point&&(t.point==r.point||t.point.eq(r.point))&&k1(t.activeForPoint(t.to),r.activeForPoint(r.to))||s.comparePoint(a,h,t.point,r.point):h>a&&!k1(t.active,r.active)&&s.compareRange(a,h,t.active,r.active),u>o)break;a=u,c<=0&&t.next(),c>=0&&r.next()}}function k1(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!=e[r]&&!t[r].eq(e[r]))return!1;return!0}function ad(t,e){for(let r=e,n=t.length-1;r<n;r++)t[r]=t[r+1];t.pop()}function ld(t,e,r){for(let n=t.length-1;n>=e;n--)t[n+1]=t[n];t[e]=r}function OT(t,e){let r=-1,n=1e9;for(let i=0;i<e.length;i++)(e[i]-n||t[i].endSide-t[r].endSide)<0&&(r=i,n=e[i]);return r}function Pg(t,e,r=t.length){let n=0;for(let i=0;i<r;)t.charCodeAt(i)==9?(n+=e-n%e,i++):(n++,i=fr(t,i));return n}function sY(t,e,r,n){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?r-s%r:1,i=fr(t,i)}return n===!0?-1:t.length}const A1="",LT=typeof Symbol>"u"?"__"+A1:Symbol.for(A1),R1=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),NT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class eo{constructor(e,r){this.rules=[];let{finish:n}=r||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,c){let u=[],h=/^@(\w+)\b/.exec(o[0]),f=h&&h[1]=="keyframes";if(h&&a==null)return l.push(o[0]+";");for(let d in a){let g=a[d];if(/&/.test(d))s(d.split(/,\s*/).map(_=>o.map(m=>_.replace(/&/,m))).reduce((_,m)=>_.concat(m)),g,l);else if(g&&typeof g=="object"){if(!h)throw new RangeError("The value of a property ("+d+") should be a primitive value.");s(i(d),g,u,f)}else g!=null&&u.push(d.replace(/_.*/,"").replace(/[A-Z]/g,_=>"-"+_.toLowerCase())+": "+g+";")}(u.length||f)&&l.push((n&&!h&&!c?o.map(n):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=NT[LT]||1;return NT[LT]=e+1,A1+e.toString(36)}static mount(e,r,n){let i=e[R1],s=n&&n.nonce;i?s&&i.setNonce(s):i=new oY(e,s),i.mount(Array.isArray(r)?r:[r],e)}}let MT=new Map;class oY{constructor(e,r){let n=e.ownerDocument||e,i=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=MT.get(n);if(s)return e[R1]=s;this.sheet=new i.CSSStyleSheet,MT.set(n,this)}else this.styleTag=n.createElement("style"),r&&this.styleTag.setAttribute("nonce",r);this.modules=[],e[R1]=this}mount(e,r){let n=this.sheet,i=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),n)for(let c=0;c<a.rules.length;c++)n.insertRule(a.rules[c],i++)}else{for(;s<l;)i+=this.modules[s++].rules.length;i+=a.rules.length,s++}}if(n)r.adoptedStyleSheets.indexOf(this.sheet)<0&&(r.adoptedStyleSheets=[this.sheet,...r.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=r.head||r;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var to={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Wu={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},aY=typeof navigator<"u"&&/Mac/.test(navigator.platform),lY=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var hr=0;hr<10;hr++)to[48+hr]=to[96+hr]=String(hr);for(var hr=1;hr<=24;hr++)to[hr+111]="F"+hr;for(var hr=65;hr<=90;hr++)to[hr]=String.fromCharCode(hr+32),Wu[hr]=String.fromCharCode(hr);for(var i_ in to)Wu.hasOwnProperty(i_)||(Wu[i_]=to[i_]);function cY(t){var e=aY&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||lY&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",r=!e&&t.key||(t.shiftKey?Wu:to)[t.keyCode]||t.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}function Gu(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function P1(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function lp(t,e){if(!e.anchorNode)return!1;try{return P1(t,e.anchorNode)}catch{return!1}}function qu(t){return t.nodeType==3?aa(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function mu(t,e,r,n){return r?BT(t,e,r,n,-1)||BT(t,e,r,n,1):!1}function oa(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function Qp(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function BT(t,e,r,n,i){for(;;){if(t==r&&e==n)return!0;if(e==(i<0?0:Mi(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=oa(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?Mi(t):0}else return!1}}function Mi(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Ig(t,e){let r=e?t.left:t.right;return{left:r,right:r,top:t.top,bottom:t.bottom}}function uY(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function EL(t,e){let r=e.width/t.offsetWidth,n=e.height/t.offsetHeight;return(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.width-t.offsetWidth)<1)&&(r=1),(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.height-t.offsetHeight)<1)&&(n=1),{scaleX:r,scaleY:n}}function hY(t,e,r,n,i,s,o,a){let l=t.ownerDocument,c=l.defaultView||window;for(let u=t,h=!1;u&&!h;)if(u.nodeType==1){let f,d=u==l.body,g=1,_=1;if(d)f=uY(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(h=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let b=u.getBoundingClientRect();({scaleX:g,scaleY:_}=EL(u,b)),f={left:b.left,right:b.left+u.clientWidth*g,top:b.top,bottom:b.top+u.clientHeight*_}}let m=0,p=0;if(i=="nearest")e.top<f.top?(p=-(f.top-e.top+o),r>0&&e.bottom>f.bottom+p&&(p=e.bottom-f.bottom+p+o)):e.bottom>f.bottom&&(p=e.bottom-f.bottom+o,r<0&&e.top-p<f.top&&(p=-(f.top+p-e.top+o)));else{let b=e.bottom-e.top,y=f.bottom-f.top;p=(i=="center"&&b<=y?e.top+b/2-y/2:i=="start"||i=="center"&&r<0?e.top-o:e.bottom-y+o)-f.top}if(n=="nearest"?e.left<f.left?(m=-(f.left-e.left+s),r>0&&e.right>f.right+m&&(m=e.right-f.right+m+s)):e.right>f.right&&(m=e.right-f.right+s,r<0&&e.left<f.left+m&&(m=-(f.left+m-e.left+s))):m=(n=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:n=="start"==a?e.left-s:e.right-(f.right-f.left)+s)-f.left,m||p)if(d)c.scrollBy(m,p);else{let b=0,y=0;if(p){let v=u.scrollTop;u.scrollTop+=p/_,y=(u.scrollTop-v)*_}if(m){let v=u.scrollLeft;u.scrollLeft+=m/g,b=(u.scrollLeft-v)*g}e={left:e.left-b,top:e.top-y,right:e.right-b,bottom:e.bottom-y},b&&Math.abs(b-m)<1&&(n="nearest"),y&&Math.abs(y-p)<1&&(i="nearest")}if(d)break;u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function fY(t){let e=t.ownerDocument,r,n;for(let i=t.parentNode;i&&!(i==e.body||r&&n);)if(i.nodeType==1)!n&&i.scrollHeight>i.clientHeight&&(n=i),!r&&i.scrollWidth>i.clientWidth&&(r=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:r,y:n}}class dY{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:r,focusNode:n}=e;this.set(r,Math.min(e.anchorOffset,r?Mi(r):0),n,Math.min(e.focusOffset,n?Mi(n):0))}set(e,r,n,i){this.anchorNode=e,this.anchorOffset=r,this.focusNode=n,this.focusOffset=i}}let Fa=null;function SL(t){if(t.setActive)return t.setActive();if(Fa)return t.focus(Fa);let e=[];for(let r=t;r&&(e.push(r,r.scrollTop,r.scrollLeft),r!=r.ownerDocument);r=r.parentNode);if(t.focus(Fa==null?{get preventScroll(){return Fa={preventScroll:!0},!0}}:void 0),!Fa){Fa=!1;for(let r=0;r<e.length;){let n=e[r++],i=e[r++],s=e[r++];n.scrollTop!=i&&(n.scrollTop=i),n.scrollLeft!=s&&(n.scrollLeft=s)}}}let FT;function aa(t,e,r=e){let n=FT||(FT=document.createRange());return n.setEnd(t,r),n.setStart(t,e),n}function gl(t,e,r,n){let i={key:e,code:e,keyCode:r,which:r,cancelable:!0};n&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=n);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function pY(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function xL(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function mY(t,e){let r=e.focusNode,n=e.focusOffset;if(!r||e.anchorNode!=r||e.anchorOffset!=n)return!1;for(n=Math.min(n,Mi(r));;)if(n){if(r.nodeType!=1)return!1;let i=r.childNodes[n-1];i.contentEditable=="false"?n--:(r=i,n=Mi(r))}else{if(r==t)return!0;n=oa(r),r=r.parentNode}}function TL(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function CL(t,e){for(let r=t,n=e;;){if(r.nodeType==3&&n>0)return{node:r,offset:n};if(r.nodeType==1&&n>0){if(r.contentEditable=="false")return null;r=r.childNodes[n-1],n=Mi(r)}else if(r.parentNode&&!Qp(r))n=oa(r),r=r.parentNode;else return null}}function kL(t,e){for(let r=t,n=e;;){if(r.nodeType==3&&n<r.nodeValue.length)return{node:r,offset:n};if(r.nodeType==1&&n<r.childNodes.length){if(r.contentEditable=="false")return null;r=r.childNodes[n],n=0}else if(r.parentNode&&!Qp(r))n=oa(r)+1,r=r.parentNode;else return null}}class Er{constructor(e,r,n=!0){this.node=e,this.offset=r,this.precise=n}static before(e,r){return new Er(e.parentNode,oa(e),r)}static after(e,r){return new Er(e.parentNode,oa(e)+1,r)}}const Rw=[];class yt{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let r=this.posAtStart;for(let n of this.children){if(n==e)return r;r+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,r){if(this.flags&2){let n=this.dom,i=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=i?i.nextSibling:n.firstChild)){let a=yt.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,r),o.flags&=-8}if(s=i?i.nextSibling:n.firstChild,r&&!r.written&&r.node==n&&s!=o.dom&&(r.written=!0),o.dom.parentNode==n)for(;s&&s!=o.dom;)s=HT(s);else n.insertBefore(o.dom,s);i=o.dom}for(s=i?i.nextSibling:n.firstChild,s&&r&&r.node==n&&(r.written=!0);s;)s=HT(s)}else if(this.flags&1)for(let n of this.children)n.flags&7&&(n.sync(e,r),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,r){let n;if(e==this.dom)n=this.dom.childNodes[r];else{let i=Mi(e)==0?0:r==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?n=e:n=e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!yt.get(n);)n=n.nextSibling;if(!n)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==n)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,r,n=0){let i=-1,s=-1,o=-1,a=-1;for(let l=0,c=n,u=n;l<this.children.length;l++){let h=this.children[l],f=c+h.length;if(c<e&&f>r)return h.domBoundsAround(e,r,c);if(f>=e&&i==-1&&(i=l,s=c),c>r&&h.dom.parentNode==this.dom){o=l,a=u;break}u=f,c=f+h.breakAfter}return{from:s,to:a<0?n+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let r=this.parent;r;r=r.parent){if(e&&(r.flags|=2),r.flags&1)return;r.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let r=e.parent;if(!r)return e;e=r}}replaceChildren(e,r,n=Rw){this.markDirty();for(let i=e;i<r;i++){let s=this.children[i];s.parent==this&&n.indexOf(s)<0&&s.destroy()}n.length<250?this.children.splice(e,r-e,...n):this.children=[].concat(this.children.slice(0,e),n,this.children.slice(r));for(let i=0;i<n.length;i++)n[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new AL(this.children,e,this.children.length)}childPos(e,r=1){return this.childCursor().findPos(e,r)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,r,n,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}yt.prototype.breakAfter=0;function HT(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class AL{constructor(e,r,n){this.children=e,this.pos=r,this.i=n,this.off=0}findPos(e,r=1){for(;;){if(e>this.pos||e==this.pos&&(r>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function RL(t,e,r,n,i,s,o,a,l){let{children:c}=t,u=c.length?c[e]:null,h=s.length?s[s.length-1]:null,f=h?h.breakAfter:o;if(!(e==n&&u&&!o&&!f&&s.length<2&&u.merge(r,i,s.length?h:null,r==0,a,l))){if(n<c.length){let d=c[n];d&&(i<d.length||d.breakAfter&&h?.breakAfter)?(e==n&&(d=d.split(i),i=0),!f&&h&&d.merge(0,i,h,!0,0,l)?s[s.length-1]=d:((i||d.children.length&&!d.children[0].length)&&d.merge(0,i,null,!1,0,l),s.push(d))):d?.breakAfter&&(h?h.breakAfter=1:o=1),n++}for(u&&(u.breakAfter=o,r>0&&(!o&&s.length&&u.merge(r,u.length,s[0],!1,a,0)?u.breakAfter=s.shift().breakAfter:(r<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(r,u.length,null,!1,a,0),e++));e<n&&s.length;)if(c[n-1].become(s[s.length-1]))n--,s.pop(),l=s.length?0:a;else if(c[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&n<c.length&&!c[e-1].breakAfter&&c[n].merge(0,0,c[e-1],!1,a,l)&&e--,(e<n||s.length)&&t.replaceChildren(e,n,s)}}function PL(t,e,r,n,i,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(r,1),{i:c,off:u}=o.findPos(e,-1),h=e-r;for(let f of n)h+=f.length;t.length+=h,RL(t,c,u,a,l,n,0,i,s)}let Gr=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},I1=typeof document<"u"?document:{documentElement:{style:{}}};const D1=/Edge\/(\d+)/.exec(Gr.userAgent),IL=/MSIE \d/.test(Gr.userAgent),O1=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Gr.userAgent),Dg=!!(IL||O1||D1),UT=!Dg&&/gecko\/(\d+)/i.test(Gr.userAgent),s_=!Dg&&/Chrome\/(\d+)/.exec(Gr.userAgent),jT="webkitFontSmoothing"in I1.documentElement.style,DL=!Dg&&/Apple Computer/.test(Gr.vendor),$T=DL&&(/Mobile\/\w+/.test(Gr.userAgent)||Gr.maxTouchPoints>2);var Fe={mac:$T||/Mac/.test(Gr.platform),windows:/Win/.test(Gr.platform),linux:/Linux|X11/.test(Gr.platform),ie:Dg,ie_version:IL?I1.documentMode||6:O1?+O1[1]:D1?+D1[1]:0,gecko:UT,gecko_version:UT?+(/Firefox\/(\d+)/.exec(Gr.userAgent)||[0,0])[1]:0,chrome:!!s_,chrome_version:s_?+s_[1]:0,ios:$T,android:/Android\b/.test(Gr.userAgent),webkit:jT,safari:DL,webkit_version:jT?+(/\bAppleWebKit\/(\d+)/.exec(Gr.userAgent)||[0,0])[1]:0,tabSize:I1.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const gY=256;class Kn extends yt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,r){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(r&&r.node==this.dom&&(r.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,r,n){return this.flags&8||n&&(!(n instanceof Kn)||this.length-(r-e)+n.length>gY||n.flags&8)?!1:(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(r),this.markDirty(),!0)}split(e){let r=new Kn(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),r.flags|=this.flags&8,r}localPosFromDOM(e,r){return e==this.dom?r:r?this.text.length:0}domAtPos(e){return new Er(this.dom,e)}domBoundsAround(e,r,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,r){return _Y(this.dom,e,r)}}class us extends yt{constructor(e,r=[],n=0){super(),this.mark=e,this.children=r,this.length=n;for(let i of r)i.setParent(this)}setAttrs(e){if(xL(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let r in this.mark.attrs)e.setAttribute(r,this.mark.attrs[r]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,r){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,r)}merge(e,r,n,i,s,o){return n&&(!(n instanceof us&&n.mark.eq(this.mark))||e&&s<=0||r<this.length&&o<=0)?!1:(PL(this,e,r,n?n.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let r=[],n=0,i=-1,s=0;for(let a of this.children){let l=n+a.length;l>e&&r.push(n<e?a.split(e-n):a),i<0&&n>=e&&(i=s),n=l,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new us(this.mark,r,o)}domAtPos(e){return OL(this,e)}coordsAt(e,r){return NL(this,e,r)}}function _Y(t,e,r){let n=t.nodeValue.length;e>n&&(e=n);let i=e,s=e,o=0;e==0&&r<0||e==n&&r>=0?Fe.chrome||Fe.gecko||(e?(i--,o=1):s<n&&(s++,o=-1)):r<0?i--:s<n&&s++;let a=aa(t,i,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:r>=0)?0:a.length-1];return Fe.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?Ig(l,o<0):l||null}class No extends yt{static create(e,r,n){return new No(e,r,n)}constructor(e,r,n){super(),this.widget=e,this.length=r,this.side=n,this.prevWidget=null}split(e){let r=No.create(this.widget,this.length-e,this.side);return this.length-=e,r}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,r,n,i,s,o){return n&&(!(n instanceof No)||!this.widget.compare(n.widget)||e>0&&s<=0||r<this.length&&o<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-r),!0)}become(e){return e instanceof No&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return dt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:r}=e,n=r&&r.state.doc,i=this.posAtStart;return n?n.slice(i,i+this.length):dt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Er.before(this.dom):Er.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,r){let n=this.widget.coordsAt(this.dom,e,r);if(n)return n;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?i.length-1:0;s=i[a],!(e>0?a==0:a==i.length-1||s.top<s.bottom);a+=o?-1:1);return Ig(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Nl extends yt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Nl&&e.side==this.side}split(){return new Nl(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Er.before(this.dom):Er.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return dt.empty}get isHidden(){return!0}}Kn.prototype.children=No.prototype.children=Nl.prototype.children=Rw;function OL(t,e){let r=t.dom,{children:n}=t,i=0;for(let s=0;i<n.length;i++){let o=n[i],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==r)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=i;s>0;s--){let o=n[s-1];if(o.dom.parentNode==r)return o.domAtPos(o.length)}for(let s=i;s<n.length;s++){let o=n[s];if(o.dom.parentNode==r)return o.domAtPos(0)}return new Er(r,0)}function LL(t,e,r){let n,{children:i}=t;r>0&&e instanceof us&&i.length&&(n=i[i.length-1])instanceof us&&n.mark.eq(e.mark)?LL(n,e.children[0],r-1):(i.push(e),e.setParent(t)),t.length+=e.length}function NL(t,e,r){let n=null,i=-1,s=null,o=-1;function a(c,u){for(let h=0,f=0;h<c.children.length&&f<=u;h++){let d=c.children[h],g=f+d.length;g>=u&&(d.children.length?a(d,u-f):(!s||s.isHidden&&r>0)&&(g>u||f==g&&d.getSide()>0)?(s=d,o=u-f):(f<u||f==g&&d.getSide()<0&&!d.isHidden)&&(n=d,i=u-f)),f=g}}a(t,e);let l=(r<0?n:s)||n||s;return l?l.coordsAt(Math.max(0,l==n?i:o),r):bY(t)}function bY(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let r=qu(e);return r[r.length-1]||null}function L1(t,e){for(let r in t)r=="class"&&e.class?e.class+=" "+t.class:r=="style"&&e.style?e.style+=";"+t.style:e[r]=t[r];return e}const zT=Object.create(null);function Zp(t,e,r){if(t==e)return!0;t||(t=zT),e||(e=zT);let n=Object.keys(t),i=Object.keys(e);if(n.length-(r&&n.indexOf(r)>-1?1:0)!=i.length-(r&&i.indexOf(r)>-1?1:0))return!1;for(let s of n)if(s!=r&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function N1(t,e,r){let n=!1;if(e)for(let i in e)r&&i in r||(n=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(r)for(let i in r)e&&e[i]==r[i]||(n=!0,i=="style"?t.style.cssText=r[i]:t.setAttribute(i,r[i]));return n}function yY(t){let e=Object.create(null);for(let r=0;r<t.attributes.length;r++){let n=t.attributes[r];e[n.name]=n.value}return e}class ic{eq(e){return!1}updateDOM(e,r){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,r,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Lr=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(Lr||(Lr={}));class it extends ia{constructor(e,r,n,i){super(),this.startSide=e,this.endSide=r,this.widget=n,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Kh(e)}static widget(e){let r=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return r+=n&&!e.inlineOrder?r>0?3e8:-4e8:r>0?1e8:-1e8,new ro(e,r,r,n,e.widget||null,!1)}static replace(e){let r=!!e.block,n,i;if(e.isBlockGap)n=-5e8,i=4e8;else{let{start:s,end:o}=ML(e,r);n=(s?r?-3e8:-1:5e8)-1,i=(o?r?2e8:1:-6e8)+1}return new ro(e,n,i,r,e.widget||null,!0)}static line(e){return new Yh(e)}static set(e,r=!1){return ut.of(e,r)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}it.none=ut.empty;class Kh extends it{constructor(e){let{start:r,end:n}=ML(e);super(r?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var r,n;return this==e||e instanceof Kh&&this.tagName==e.tagName&&(this.class||((r=this.attrs)===null||r===void 0?void 0:r.class))==(e.class||((n=e.attrs)===null||n===void 0?void 0:n.class))&&Zp(this.attrs,e.attrs,"class")}range(e,r=e){if(e>=r)throw new RangeError("Mark decorations may not be empty");return super.range(e,r)}}Kh.prototype.point=!1;class Yh extends it{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Yh&&this.spec.class==e.spec.class&&Zp(this.spec.attributes,e.spec.attributes)}range(e,r=e){if(r!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,r)}}Yh.prototype.mapMode=wr.TrackBefore;Yh.prototype.point=!0;class ro extends it{constructor(e,r,n,i,s,o){super(r,n,s,e),this.block=i,this.isReplace=o,this.mapMode=i?r<=0?wr.TrackBefore:wr.TrackAfter:wr.TrackDel}get type(){return this.startSide!=this.endSide?Lr.WidgetRange:this.startSide<=0?Lr.WidgetBefore:Lr.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof ro&&vY(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,r=e){if(this.isReplace&&(e>r||e==r&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&r!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,r)}}ro.prototype.point=!0;function ML(t,e=!1){let{inclusiveStart:r,inclusiveEnd:n}=t;return r==null&&(r=t.inclusive),n==null&&(n=t.inclusive),{start:r??e,end:n??e}}function vY(t,e){return t==e||!!(t&&e&&t.compare(e))}function M1(t,e,r,n=0){let i=r.length-1;i>=0&&r[i]+n>=t?r[i]=Math.max(r[i],e):r.push(t,e)}class Gt extends yt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,r,n,i,s,o){if(n){if(!(n instanceof Gt))return!1;this.dom||n.transferDOM(this)}return i&&this.setDeco(n?n.attrs:null),PL(this,e,r,n?n.children.slice():[],s,o),!0}split(e){let r=new Gt;if(r.breakAfter=this.breakAfter,this.length==0)return r;let{i:n,off:i}=this.childPos(e);i&&(r.append(this.children[n].split(i),0),this.children[n].merge(i,this.children[n].length,null,!1,0,0),n++);for(let s=n;s<this.children.length;s++)r.append(this.children[s],0);for(;n>0&&this.children[n-1].length==0;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,r}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Zp(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,r){LL(this,e,r)}addLineDeco(e){let r=e.spec.attributes,n=e.spec.class;r&&(this.attrs=L1(r,this.attrs||{})),n&&(this.attrs=L1({class:n},this.attrs||{}))}domAtPos(e){return OL(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,r){var n;this.dom?this.flags&4&&(xL(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(N1(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,r);let i=this.dom.lastChild;for(;i&&yt.get(i)instanceof us;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((n=yt.get(i))===null||n===void 0?void 0:n.isEditable)==!1&&(!Fe.ios||!this.children.some(s=>s instanceof Kn))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,r;for(let n of this.children){if(!(n instanceof Kn)||/[^ -~]/.test(n.text))return null;let i=qu(n.dom);if(i.length!=1)return null;e+=i[0].width,r=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:r}:null}coordsAt(e,r){let n=NL(this,e,r);if(!this.children.length&&n&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=n.bottom-n.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let o=(s-i.textHeight)/2;return{top:n.top+o,bottom:n.bottom-o,left:n.left,right:n.left}}}return n}become(e){return e instanceof Gt&&this.children.length==0&&e.children.length==0&&Zp(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,r){for(let n=0,i=0;n<e.children.length;n++){let s=e.children[n],o=i+s.length;if(o>=r){if(s instanceof Gt)return s;if(o>r)break}i=o+s.breakAfter}return null}}class ns extends yt{constructor(e,r,n){super(),this.widget=e,this.length=r,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(e,r,n,i,s,o){return n&&(!(n instanceof ns)||!this.widget.compare(n.widget)||e>0&&s<=0||r<this.length&&o<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-r),!0)}domAtPos(e){return e==0?Er.before(this.dom):Er.after(this.dom,e==this.length)}split(e){let r=this.length-e;this.length=e;let n=new ns(this.widget,r,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return Rw}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):dt.empty}domBoundsAround(){return null}become(e){return e instanceof ns&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,r){let n=this.widget.coordsAt(this.dom,e,r);return n||(this.widget instanceof B1?null:Ig(this.dom.getBoundingClientRect(),this.length?e==0:r<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:r,endSide:n}=this.deco;return r==n?!1:e<0?r<0:n>0}}class B1 extends ic{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class gu{constructor(e,r,n,i){this.doc=e,this.pos=r,this.end=n,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=r}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof ns&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Gt),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(cd(new Nl(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof ns)&&this.getLine()}buildText(e,r,n){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(r.slice(r.length-n)),this.getLine().append(cd(new Kn(this.text.slice(this.textOff,this.textOff+i)),r),n),this.atCursorPos=!0,this.textOff+=i,e-=i,n=0}}span(e,r,n,i){this.buildText(r-e,n,i),this.pos=r,this.openStart<0&&(this.openStart=i)}point(e,r,n,i,s,o){if(this.disallowBlockEffectsFor[o]&&n instanceof ro){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(r>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=r-e;if(n instanceof ro)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new ns(n.widget||Ml.block,a,n));else{let l=No.create(n.widget||Ml.inline,a,a?0:n.startSide),c=this.atCursorPos&&!l.isEditable&&s<=i.length&&(e<r||n.startSide>0),u=!l.isEditable&&(e<r||s>i.length||n.startSide<=0),h=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),c&&(h.append(cd(new Nl(1),i),s),s=i.length+Math.max(0,s-i.length)),h.append(cd(l,i),s),this.atCursorPos=u,this.pendingBuffer=u?e<r||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=r),this.openStart<0&&(this.openStart=s)}static build(e,r,n,i,s){let o=new gu(e,r,n,s);return o.openEnd=ut.spans(i,r,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function cd(t,e){for(let r of e)t=new us(r,[t],t.length);return t}class Ml extends ic{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Ml.inline=new Ml("span");Ml.block=new Ml("div");var It=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(It||(It={}));const la=It.LTR,Pw=It.RTL;function BL(t){let e=[];for(let r=0;r<t.length;r++)e.push(1<<+t[r]);return e}const wY=BL("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),EY=BL("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),F1=Object.create(null),ri=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),r=t.charCodeAt(1);F1[e]=r,F1[r]=-e}function FL(t){return t<=247?wY[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?EY[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const SY=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Us{get dir(){return this.level%2?Pw:la}constructor(e,r,n){this.from=e,this.to=r,this.level=n}side(e,r){return this.dir==r==e?this.to:this.from}forward(e,r){return e==(this.dir==r)}static find(e,r,n,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=r&&a.to>=r){if(a.level==n)return o;(s<0||(i!=0?i<0?a.from<r:a.to>r:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function HL(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++){let n=t[r],i=e[r];if(n.from!=i.from||n.to!=i.to||n.direction!=i.direction||!HL(n.inner,i.inner))return!1}return!0}const bt=[];function xY(t,e,r,n,i){for(let s=0;s<=n.length;s++){let o=s?n[s-1].to:e,a=s<n.length?n[s].from:r,l=s?256:i;for(let c=o,u=l,h=l;c<a;c++){let f=FL(t.charCodeAt(c));f==512?f=u:f==8&&h==4&&(f=16),bt[c]=f==4?2:f,f&7&&(h=f),u=f}for(let c=o,u=l,h=l;c<a;c++){let f=bt[c];if(f==128)c<a-1&&u==bt[c+1]&&u&24?f=bt[c]=u:bt[c]=256;else if(f==64){let d=c+1;for(;d<a&&bt[d]==64;)d++;let g=c&&u==8||d<r&&bt[d]==8?h==1?1:8:256;for(let _=c;_<d;_++)bt[_]=g;c=d-1}else f==8&&h==1&&(bt[c]=1);u=f,f&7&&(h=f)}}}function TY(t,e,r,n,i){let s=i==1?2:1;for(let o=0,a=0,l=0;o<=n.length;o++){let c=o?n[o-1].to:e,u=o<n.length?n[o].from:r;for(let h=c,f,d,g;h<u;h++)if(d=F1[f=t.charCodeAt(h)])if(d<0){for(let _=a-3;_>=0;_-=3)if(ri[_+1]==-d){let m=ri[_+2],p=m&2?i:m&4?m&1?s:i:0;p&&(bt[h]=bt[ri[_]]=p),a=_;break}}else{if(ri.length==189)break;ri[a++]=h,ri[a++]=f,ri[a++]=l}else if((g=bt[h])==2||g==1){let _=g==i;l=_?0:1;for(let m=a-3;m>=0;m-=3){let p=ri[m+2];if(p&2)break;if(_)ri[m+2]|=2;else{if(p&4)break;ri[m+2]|=4}}}}}function CY(t,e,r,n){for(let i=0,s=n;i<=r.length;i++){let o=i?r[i-1].to:t,a=i<r.length?r[i].from:e;for(let l=o;l<a;){let c=bt[l];if(c==256){let u=l+1;for(;;)if(u==a){if(i==r.length)break;u=r[i++].to,a=i<r.length?r[i].from:e}else if(bt[u]==256)u++;else break;let h=s==1,f=(u<e?bt[u]:n)==1,d=h==f?h?1:2:n;for(let g=u,_=i,m=_?r[_-1].to:t;g>l;)g==m&&(g=r[--_].from,m=_?r[_-1].to:t),bt[--g]=d;l=u}else s=c,l++}}}function H1(t,e,r,n,i,s,o){let a=n%2?2:1;if(n%2==i%2)for(let l=e,c=0;l<r;){let u=!0,h=!1;if(c==s.length||l<s[c].from){let _=bt[l];_!=a&&(u=!1,h=_==16)}let f=!u&&a==1?[]:null,d=u?n:n+1,g=l;e:for(;;)if(c<s.length&&g==s[c].from){if(h)break e;let _=s[c];if(!u)for(let m=_.to,p=c+1;;){if(m==r)break e;if(p<s.length&&s[p].from==m)m=s[p++].to;else{if(bt[m]==a)break e;break}}if(c++,f)f.push(_);else{_.from>l&&o.push(new Us(l,_.from,d));let m=_.direction==la!=!(d%2);U1(t,m?n+1:n,i,_.inner,_.from,_.to,o),l=_.to}g=_.to}else{if(g==r||(u?bt[g]!=a:bt[g]==a))break;g++}f?H1(t,l,g,n+1,i,f,o):l<g&&o.push(new Us(l,g,d)),l=g}else for(let l=r,c=s.length;l>e;){let u=!0,h=!1;if(!c||l>s[c-1].to){let _=bt[l-1];_!=a&&(u=!1,h=_==16)}let f=!u&&a==1?[]:null,d=u?n:n+1,g=l;e:for(;;)if(c&&g==s[c-1].to){if(h)break e;let _=s[--c];if(!u)for(let m=_.from,p=c;;){if(m==e)break e;if(p&&s[p-1].to==m)m=s[--p].from;else{if(bt[m-1]==a)break e;break}}if(f)f.push(_);else{_.to<l&&o.push(new Us(_.to,l,d));let m=_.direction==la!=!(d%2);U1(t,m?n+1:n,i,_.inner,_.from,_.to,o),l=_.from}g=_.from}else{if(g==e||(u?bt[g-1]!=a:bt[g-1]==a))break;g--}f?H1(t,g,l,n+1,i,f,o):g<l&&o.push(new Us(g,l,d)),l=g}}function U1(t,e,r,n,i,s,o){let a=e%2?2:1;xY(t,i,s,n,a),TY(t,i,s,n,a),CY(i,s,n,a),H1(t,i,s,e,r,n,o)}function kY(t,e,r){if(!t)return[new Us(0,0,e==Pw?1:0)];if(e==la&&!r.length&&!SY.test(t))return UL(t.length);if(r.length)for(;t.length>bt.length;)bt[bt.length]=256;let n=[],i=e==la?0:1;return U1(t,i,i,r,0,t.length,n),n}function UL(t){return[new Us(0,t,0)]}let jL="";function AY(t,e,r,n,i){var s;let o=n.head-t.from,a=Us.find(e,o,(s=n.bidiLevel)!==null&&s!==void 0?s:-1,n.assoc),l=e[a],c=l.side(i,r);if(o==c){let f=a+=i?1:-1;if(f<0||f>=e.length)return null;l=e[a=f],o=l.side(!i,r),c=l.side(i,r)}let u=fr(t.text,o,l.forward(i,r));(u<l.from||u>l.to)&&(u=c),jL=t.text.slice(Math.min(o,u),Math.max(o,u));let h=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return h&&u==c&&h.level+(i?0:1)<l.level?ke.cursor(h.side(!i,r)+t.from,h.forward(i,r)?1:-1,h.level):ke.cursor(u+t.from,l.forward(i,r)?-1:1,l.level)}function RY(t,e,r){for(let n=e;n<r;n++){let i=FL(t.charCodeAt(n));if(i==1)return la;if(i==2||i==4)return Pw}return la}const $L=Ue.define(),zL=Ue.define(),VL=Ue.define(),WL=Ue.define(),j1=Ue.define(),GL=Ue.define(),qL=Ue.define(),Iw=Ue.define(),Dw=Ue.define(),KL=Ue.define({combine:t=>t.some(e=>e)}),YL=Ue.define({combine:t=>t.some(e=>e)}),XL=Ue.define();class _l{constructor(e,r="nearest",n="nearest",i=5,s=5,o=!1){this.range=e,this.y=r,this.x=n,this.yMargin=i,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new _l(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new _l(ke.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const ud=Je.define({map:(t,e)=>t.map(e)}),QL=Je.define();function cn(t,e,r){let n=t.facet(WL);n.length?n[0](e):window.onerror?window.onerror(String(e),r,void 0,void 0,e):r?console.error(r+":",e):console.error(e)}const Os=Ue.define({combine:t=>t.length?t[0]:!0});let PY=0;const Qc=Ue.define();class mr{constructor(e,r,n,i,s){this.id=e,this.create=r,this.domEventHandlers=n,this.domEventObservers=i,this.extension=s(this)}static define(e,r){const{eventHandlers:n,eventObservers:i,provide:s,decorations:o}=r||{};return new mr(PY++,e,n,i,a=>{let l=[Qc.of(a)];return o&&l.push(Ku.of(c=>{let u=c.plugin(a);return u?o(u):it.none})),s&&l.push(s(a)),l})}static fromClass(e,r){return mr.define(n=>new e(n),r)}}class o_{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let r=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(r)}catch(n){if(cn(r.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(r){cn(e.state,r,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var r;if(!((r=this.value)===null||r===void 0)&&r.destroy)try{this.value.destroy()}catch(n){cn(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const ZL=Ue.define(),Og=Ue.define(),Ku=Ue.define(),JL=Ue.define(),Ow=Ue.define(),e3=Ue.define();function VT(t,e){let r=t.state.facet(e3);if(!r.length)return r;let n=r.map(s=>s instanceof Function?s(t):s),i=[];return ut.spans(n,e.from,e.to,{point(){},span(s,o,a,l){let c=s-e.from,u=o-e.from,h=i;for(let f=a.length-1;f>=0;f--,l--){let d=a[f].spec.bidiIsolate,g;if(d==null&&(d=RY(e.text,c,u)),l>0&&h.length&&(g=h[h.length-1]).to==c&&g.direction==d)g.to=u,h=g.inner;else{let _={from:c,to:u,direction:d,inner:[]};h.push(_),h=_.inner}}}}),i}const t3=Ue.define();function Lw(t){let e=0,r=0,n=0,i=0;for(let s of t.state.facet(t3)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(r=Math.max(r,o.right)),o.top!=null&&(n=Math.max(n,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:r,top:n,bottom:i}}const Zc=Ue.define();class Rn{constructor(e,r,n,i){this.fromA=e,this.toA=r,this.fromB=n,this.toB=i}join(e){return new Rn(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let r=e.length,n=this;for(;r>0;r--){let i=e[r-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),e.splice(r-1,1)}}return e.splice(r,0,n),e}static extendWithRanges(e,r){if(r.length==0)return e;let n=[];for(let i=0,s=0,o=0,a=0;;i++){let l=i==e.length?null:e[i],c=o-a,u=l?l.fromB:1e9;for(;s<r.length&&r[s]<u;){let h=r[s],f=r[s+1],d=Math.max(a,h),g=Math.min(u,f);if(d<=g&&new Rn(d+c,g+c,d,g).addToSet(n),f>u)break;s+=2}if(!l)return n;new Rn(l.fromA,l.toA,l.fromB,l.toB).addToSet(n),o=l.toA,a=l.toB}}}class Jp{constructor(e,r,n){this.view=e,this.state=r,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=Qt.empty(this.startState.doc.length);for(let s of n)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,a,l)=>i.push(new Rn(s,o,a,l))),this.changedRanges=i}static create(e,r,n){return new Jp(e,r,n)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class WT extends yt{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=it.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Gt],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Rn(0,0,0,e.state.doc.length)],0,null)}update(e){var r;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((r=this.domChanged)===null||r===void 0)&&r.newSel?i=this.domChanged.newSel.head:!BY(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?DY(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;n=new Rn(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(n.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Fe.ie||Fe.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=NY(o,a,e.changes);return n=Rn.extendWithRanges(n,l),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,r,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,r,n);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Fe.chrome||Fe.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof ns&&o.widget instanceof B1&&s.push(o.dom);i.updateGaps(s)}updateChildren(e,r,n){let i=n?n.range.addToSet(e.slice()):e,s=this.childCursor(r);for(let o=i.length-1;;o--){let a=o>=0?i[o]:null;if(!a)break;let{fromA:l,toA:c,fromB:u,toB:h}=a,f,d,g,_;if(n&&n.range.fromB<h&&n.range.toB>u){let v=gu.build(this.view.state.doc,u,n.range.fromB,this.decorations,this.dynamicDecorationMap),w=gu.build(this.view.state.doc,n.range.toB,h,this.decorations,this.dynamicDecorationMap);d=v.breakAtStart,g=v.openStart,_=w.openEnd;let S=this.compositionView(n);w.breakAtStart?S.breakAfter=1:w.content.length&&S.merge(S.length,S.length,w.content[0],!1,w.openStart,0)&&(S.breakAfter=w.content[0].breakAfter,w.content.shift()),v.content.length&&S.merge(0,0,v.content[v.content.length-1],!0,0,v.openEnd)&&v.content.pop(),f=v.content.concat(S).concat(w.content)}else({content:f,breakAtStart:d,openStart:g,openEnd:_}=gu.build(this.view.state.doc,u,h,this.decorations,this.dynamicDecorationMap));let{i:m,off:p}=s.findPos(c,1),{i:b,off:y}=s.findPos(l,-1);RL(this,b,y,m,p,f,d,g,_)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let r of e.transactions)for(let n of r.effects)n.is(QL)&&(this.editContextFormatting=n.value)}compositionView(e){let r=new Kn(e.text.nodeValue);r.flags|=8;for(let{deco:i}of e.marks)r=new us(i,[r],r.length);let n=new Gt;return n.append(r,0),n}fixCompositionDOM(e){let r=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=yt.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},n=this.childPos(e.range.fromB,1),i=this.children[n.i];r(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)n=i.childPos(n.off,1),i=i.children[n.i],r(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,r=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let n=this.view.root.activeElement,i=n==this.dom,s=!i&&lp(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(i||r||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),c=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(Fe.gecko&&a.empty&&!this.hasComposition&&IY(l)){let h=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(h,l.node.childNodes[l.offset]||null)),l=c=new Er(h,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!mu(l.node,l.offset,u.anchorNode,u.anchorOffset)||!mu(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,a))&&(this.view.observer.ignore(()=>{Fe.android&&Fe.chrome&&this.dom.contains(u.focusNode)&&MY(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let h=Gu(this.view.root);if(h)if(a.empty){if(Fe.gecko){let f=OY(l.node,l.offset);if(f&&f!=3){let d=(f==1?CL:kL)(l.node,l.offset);d&&(l=new Er(d.node,d.offset))}}h.collapse(l.node,l.offset),a.bidiLevel!=null&&h.caretBidiLevel!==void 0&&(h.caretBidiLevel=a.bidiLevel)}else if(h.extend){h.collapse(l.node,l.offset);try{h.extend(c.node,c.offset)}catch{}}else{let f=document.createRange();a.anchor>a.head&&([l,c]=[c,l]),f.setEnd(c.node,c.offset),f.setStart(l.node,l.offset),h.removeAllRanges(),h.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new Er(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new Er(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,r){return this.hasComposition&&r.empty&&mu(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==r.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,r=e.state.selection.main,n=Gu(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!n||!r.empty||!r.assoc||!n.modify)return;let o=Gt.find(this,r.head);if(!o)return;let a=o.posAtStart;if(r.head==a||r.head==a+o.length)return;let l=this.coordsAt(r.head,-1),c=this.coordsAt(r.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(r.head+r.assoc);n.collapse(u.node,u.offset),n.modify("move",r.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=r.from&&n.collapse(i,s)}moveToLine(e){let r=this.dom,n;if(e.node!=r)return e;for(let i=e.offset;!n&&i<r.childNodes.length;i++){let s=yt.get(r.childNodes[i]);s instanceof Gt&&(n=s.domAtPos(0))}for(let i=e.offset-1;!n&&i>=0;i--){let s=yt.get(r.childNodes[i]);s instanceof Gt&&(n=s.domAtPos(s.length))}return n?new Er(n.node,n.offset,!0):e}nearest(e){for(let r=e;r;){let n=yt.get(r);if(n&&n.rootView==this)return n;r=r.parentNode}return null}posFromDOM(e,r){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,r)+n.posAtStart}domAtPos(e){let{i:r,off:n}=this.childCursor().findPos(e,-1);for(;r<this.children.length-1;){let i=this.children[r];if(n<i.length||i instanceof Gt)break;r++,n=0}return this.children[r].domAtPos(n)}coordsAt(e,r){let n=null,i=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,c=l-a.length;if(l<e)break;if(c<=e&&(c<e||a.covers(-1))&&(l>e||a.covers(1))&&(!n||a instanceof Gt&&!(n instanceof Gt&&r>=0)))n=a,i=c;else if(n&&c==e&&l==e&&a instanceof ns&&Math.abs(r)<2){if(a.deco.startSide<0)break;o&&(n=null)}s=c}return n?n.coordsAt(e-i,r):null}coordsForChar(e){let{i:r,off:n}=this.childPos(e,1),i=this.children[r];if(!(i instanceof Gt))return null;for(;i.children.length;){let{i:a,off:l}=i.childPos(n,1);for(;;a++){if(a==i.children.length)return null;if((i=i.children[a]).length)break}n=l}if(!(i instanceof Kn))return null;let s=fr(i.text,n);if(s==n)return null;let o=aa(i.dom,n,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let r=[],{from:n,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==It.LTR;for(let c=0,u=0;u<this.children.length;u++){let h=this.children[u],f=c+h.length;if(f>i)break;if(c>=n){let d=h.dom.getBoundingClientRect();if(r.push(d.height),o){let g=h.dom.lastChild,_=g?qu(g):[];if(_.length){let m=_[_.length-1],p=l?m.right-d.left:d.right-m.left;p>a&&(a=p,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=f)}}}c=f+h.breakAfter}return r}textDirectionAt(e){let{i:r}=this.childPos(e,1);return getComputedStyle(this.children[r].dom).direction=="rtl"?It.RTL:It.LTR}measureTextSize(){for(let s of this.children)if(s instanceof Gt){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),r,n,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=qu(e.firstChild)[0];r=e.getBoundingClientRect().height,n=s?s.width/27:7,i=s?s.height:r,e.remove()}),{lineHeight:r,charWidth:n,textHeight:i}}childCursor(e=this.length){let r=this.children.length;return r&&(e-=this.children[--r].length),new AL(this.children,e,r)}computeBlockGapDeco(){let e=[],r=this.view.viewState;for(let n=0,i=0;;i++){let s=i==r.viewports.length?null:r.viewports[i],o=s?s.from-1:this.length;if(o>n){let a=(r.lineBlockAt(o).bottom-r.lineBlockAt(n).top)/this.view.scaleY;e.push(it.replace({widget:new B1(a),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!s)break;n=s.to+1}return it.set(e)}updateDeco(){let e=1,r=this.view.state.facet(Ku).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),n=!1,i=this.view.state.facet(JL).map((s,o)=>{let a=typeof s=="function";return a&&(n=!0),a?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=n,r.push(ut.join(i))),this.decorations=[this.editContextFormatting,...r,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(XL))try{if(c(this.view,e.range,e))return!0}catch(u){cn(this.view.state,u,"scroll handler")}let{range:r}=e,n=this.coordsAt(r.head,r.empty?r.assoc:r.head>r.anchor?-1:1),i;if(!n)return;!r.empty&&(i=this.coordsAt(r.anchor,r.anchor>r.head?-1:1))&&(n={left:Math.min(n.left,i.left),top:Math.min(n.top,i.top),right:Math.max(n.right,i.right),bottom:Math.max(n.bottom,i.bottom)});let s=Lw(this.view),o={left:n.left-s.left,top:n.top-s.top,right:n.right+s.right,bottom:n.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;hY(this.view.scrollDOM,o,r.head<r.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==It.LTR)}}function IY(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function r3(t,e){let r=t.observer.selectionRange;if(!r.focusNode)return null;let n=CL(r.focusNode,r.focusOffset),i=kL(r.focusNode,r.focusOffset),s=n||i;if(i&&n&&i.node!=n.node){let a=yt.get(i.node);if(!a||a instanceof Kn&&a.text!=i.node.nodeValue)s=i;else if(t.docView.lastCompositionAfterCursor){let l=yt.get(n.node);!l||l instanceof Kn&&l.text!=n.node.nodeValue||(s=i)}}if(t.docView.lastCompositionAfterCursor=s!=n,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function DY(t,e,r){let n=r3(t,r);if(!n)return null;let{node:i,from:s,to:o}=n,a=i.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(n.from,n.to)!=a)return null;let l=e.invertedDesc,c=new Rn(l.mapPos(s),l.mapPos(o),s,o),u=[];for(let h=i.parentNode;;h=h.parentNode){let f=yt.get(h);if(f instanceof us)u.push({node:h,deco:f.mark});else{if(f instanceof Gt||h.nodeName=="DIV"&&h.parentNode==t.contentDOM)return{range:c,text:i,marks:u,line:h};if(h!=t.contentDOM)u.push({node:h,deco:new Kh({inclusive:!0,attributes:yY(h),tagName:h.tagName.toLowerCase()})});else return null}}}function OY(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let LY=class{constructor(){this.changes=[]}compareRange(e,r){M1(e,r,this.changes)}comparePoint(e,r){M1(e,r,this.changes)}};function NY(t,e,r){let n=new LY;return ut.compare(t,e,r,n),n.changes}function MY(t,e){for(let r=t;r&&r!=e;r=r.assignedSlot||r.parentNode)if(r.nodeType==1&&r.contentEditable=="false")return!0;return!1}function BY(t,e){let r=!1;return e&&t.iterChangedRanges((n,i)=>{n<e.to&&i>e.from&&(r=!0)}),r}function FY(t,e,r=1){let n=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return ke.cursor(e);s==0?r=1:s==i.length&&(r=-1);let o=s,a=s;r<0?o=fr(i.text,s,!1):a=fr(i.text,s);let l=n(i.text.slice(o,a));for(;o>0;){let c=fr(i.text,o,!1);if(n(i.text.slice(c,o))!=l)break;o=c}for(;a<i.length;){let c=fr(i.text,a);if(n(i.text.slice(a,c))!=l)break;a=c}return ke.range(o+i.from,a+i.from)}function HY(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function UY(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function a_(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function GT(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function qT(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function $1(t,e,r){let n,i,s,o,a=!1,l,c,u,h;for(let g=t.firstChild;g;g=g.nextSibling){let _=qu(g);for(let m=0;m<_.length;m++){let p=_[m];i&&a_(i,p)&&(p=GT(qT(p,i.bottom),i.top));let b=HY(e,p),y=UY(r,p);if(b==0&&y==0)return g.nodeType==3?KT(g,e,r):$1(g,e,r);if(!n||o>y||o==y&&s>b){n=g,i=p,s=b,o=y;let v=y?r<p.top?-1:1:b?e<p.left?-1:1:0;a=!v||(v>0?m<_.length-1:m>0)}b==0?r>p.bottom&&(!u||u.bottom<p.bottom)?(l=g,u=p):r<p.top&&(!h||h.top>p.top)&&(c=g,h=p):u&&a_(u,p)?u=qT(u,p.bottom):h&&a_(h,p)&&(h=GT(h,p.top))}}if(u&&u.bottom>=r?(n=l,i=u):h&&h.top<=r&&(n=c,i=h),!n)return{node:t,offset:0};let f=Math.max(i.left,Math.min(i.right,e));if(n.nodeType==3)return KT(n,f,r);if(a&&n.contentEditable!="false")return $1(n,f,r);let d=Array.prototype.indexOf.call(t.childNodes,n)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:d}}function KT(t,e,r){let n=t.nodeValue.length,i=-1,s=1e9,o=0;for(let a=0;a<n;a++){let l=aa(t,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let h=(u.top>r?u.top-r:r-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&h<s){let f=e>=(u.left+u.right)/2,d=f;if((Fe.chrome||Fe.gecko)&&aa(t,a).getBoundingClientRect().left==u.right&&(d=!f),h<=0)return{node:t,offset:a+(d?1:0)};i=a+(d?1:0),s=h}}}return{node:t,offset:i>-1?i:o>0?t.nodeValue.length:0}}function n3(t,e,r,n=-1){var i,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:c}=t.viewState,{x:u,y:h}=e,f=h-a;if(f<0)return 0;if(f>c)return t.state.doc.length;for(let v=t.viewState.heightOracle.textHeight/2,w=!1;l=t.elementAtHeight(f),l.type!=Lr.Text;)for(;f=n>0?l.bottom+v:l.top-v,!(f>=0&&f<=c);){if(w)return r?null:0;w=!0,n=-n}h=a+f;let d=l.from;if(d<t.viewport.from)return t.viewport.from==0?0:r?null:YT(t,o,l,u,h);if(d>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:r?null:YT(t,o,l,u,h);let g=t.dom.ownerDocument,_=t.root.elementFromPoint?t.root:g,m=_.elementFromPoint(u,h);m&&!t.contentDOM.contains(m)&&(m=null),m||(u=Math.max(o.left+1,Math.min(o.right-1,u)),m=_.elementFromPoint(u,h),m&&!t.contentDOM.contains(m)&&(m=null));let p,b=-1;if(m&&((i=t.docView.nearest(m))===null||i===void 0?void 0:i.isEditable)!=!1){if(g.caretPositionFromPoint){let v=g.caretPositionFromPoint(u,h);v&&({offsetNode:p,offset:b}=v)}else if(g.caretRangeFromPoint){let v=g.caretRangeFromPoint(u,h);v&&({startContainer:p,startOffset:b}=v,(!t.contentDOM.contains(p)||Fe.safari&&jY(p,b,u)||Fe.chrome&&$Y(p,b,u))&&(p=void 0))}p&&(b=Math.min(Mi(p),b))}if(!p||!t.docView.dom.contains(p)){let v=Gt.find(t.docView,d);if(!v)return f>l.top+l.height/2?l.to:l.from;({node:p,offset:b}=$1(v.dom,u,h))}let y=t.docView.nearest(p);if(!y)return null;if(y.isWidget&&((s=y.dom)===null||s===void 0?void 0:s.nodeType)==1){let v=y.dom.getBoundingClientRect();return e.y<v.top||e.y<=v.bottom&&e.x<=(v.left+v.right)/2?y.posAtStart:y.posAtEnd}else return y.localPosFromDOM(p,b)+y.posAtStart}function YT(t,e,r,n,i){let s=Math.round((n-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&r.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((i-r.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(r.from,r.to);return r.from+sY(o,s,t.state.tabSize)}function jY(t,e,r){let n;if(t.nodeType!=3||e!=(n=t.nodeValue.length))return!1;for(let i=t.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return aa(t,n-1,n).getBoundingClientRect().left>r}function $Y(t,e,r){if(e!=0)return!1;for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let n=t.nodeType==1?t.getBoundingClientRect():aa(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return r-n.left>5}function z1(t,e){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){for(let n of r.type)if(n.to>e||n.to==e&&(n.to==r.to||n.type==Lr.Text))return n}return r}function zY(t,e,r,n){let i=z1(t,e.head),s=!n||i.type!=Lr.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(i.from),l=t.posAtCoords({x:r==(a==It.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return ke.cursor(l,r?-1:1)}return ke.cursor(r?i.to:i.from,r?-1:1)}function XT(t,e,r,n){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),o=t.textDirectionAt(i.from);for(let a=e,l=null;;){let c=AY(i,s,o,a,r),u=jL;if(!c){if(i.number==(r?t.state.doc.lines:1))return a;u=`
`,i=t.state.doc.line(i.number+(r?1:-1)),s=t.bidiSpans(i),c=t.visualLineSide(i,!r)}if(l){if(!l(u))return a}else{if(!n)return c;l=n(u)}a=c}}function VY(t,e,r){let n=t.state.charCategorizer(e),i=n(r);return s=>{let o=n(s);return i==Yt.Space&&(i=o),i==o}}function WY(t,e,r,n){let i=e.head,s=r?1:-1;if(i==(r?t.state.doc.length:0))return ke.cursor(i,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(i,e.assoc||-1),u=t.documentTop;if(c)o==null&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let d=t.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(i-d.from))),a=(s<0?d.top:d.bottom)+u}let h=l.left+o,f=n??t.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let g=a+(f+d)*s,_=n3(t,{x:h,y:g},!1,s);if(g<l.top||g>l.bottom||(s<0?_<i:_>i)){let m=t.docView.coordsForChar(_),p=!m||g<m.top?-1:1;return ke.cursor(_,p,void 0,o)}}}function cp(t,e,r){for(;;){let n=0;for(let i of t)i.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=n||r||(e-s<o-e?-1:1);e=l<0?s:o,n=l}});if(!n)return e}}function l_(t,e,r){let n=cp(t.state.facet(Ow).map(i=>i(t)),r.from,e.head>r.from?-1:1);return n==r.from?r:ke.cursor(n,n<r.from?1:-1)}const Jc="";class GY{constructor(e,r){this.points=e,this.text="",this.lineSeparator=r.facet(ot.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Jc}readRange(e,r){if(!e)return this;let n=e.parentNode;for(let i=e;;){this.findPointBefore(n,i);let s=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==r)break;let a=yt.get(i),l=yt.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:Qp(i))||Qp(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=o}return this.findPointBefore(n,r),this}readTextNode(e){let r=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,r.length));for(let n=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=r.indexOf(this.lineSeparator,n),o=this.lineSeparator.length):(a=i.exec(r))&&(s=a.index,o=a[0].length),this.append(r.slice(n,s<0?r.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);n=s+o}}readNode(e){if(e.cmIgnore)return;let r=yt.get(e),n=r&&r.overrideDOMText;if(n!=null){this.findPointInside(e,n.length);for(let i=n.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,r){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==r&&(n.pos=this.text.length)}findPointInside(e,r){for(let n of this.points)(e.nodeType==3?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+(qY(e,n.node,n.offset)?r:0))}}function qY(t,e,r){for(;;){if(!e||r<Mi(e))return!1;if(e==t)return!0;r=oa(e)+1,e=e.parentNode}}class QT{constructor(e,r){this.node=e,this.offset=r,this.pos=-1}}class KY{constructor(e,r,n,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=r>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&r>-1)this.newSel=null;else if(r>-1&&(this.bounds=e.docView.domBoundsAround(r,n,0))){let a=s||o?[]:QY(e),l=new GY(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=ZY(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!P1(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!P1(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),u=e.viewport;if((Fe.ios||Fe.chrome)&&e.state.selection.main.empty&&l!=c&&(u.from>0||u.to<e.state.doc.length)){let h=Math.min(l,c),f=Math.max(l,c),d=u.from-h,g=u.to-f;(d==0||d==1||h==0)&&(g==0||g==-1||f==e.state.doc.length)&&(l=0,c=e.state.doc.length)}this.newSel=ke.single(c,l)}}}function i3(t,e){let r,{newSel:n}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=i.from,c=null;(s===8||Fe.android&&e.text.length<a-o)&&(l=i.to,c="end");let u=XY(t.state.doc.sliceString(o,a,Jc),e.text,l-o,c);u&&(Fe.chrome&&s==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==Jc+Jc&&u.toB--,r={from:o+u.from,to:o+u.toA,insert:dt.of(e.text.slice(u.from,u.toB).split(Jc))})}else n&&(!t.hasFocus&&t.state.facet(Os)||n.main.eq(i))&&(n=null);if(!r&&!n)return!1;if(!r&&e.typeOver&&!i.empty&&n&&n.main.empty?r={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:r&&r.from>=i.from&&r.to<=i.to&&(r.from!=i.from||r.to!=i.to)&&i.to-i.from-(r.to-r.from)<=4?r={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,r.from).append(r.insert).append(t.state.doc.slice(r.to,i.to))}:(Fe.mac||Fe.android)&&r&&r.from==r.to&&r.from==i.head-1&&/^\. ?$/.test(r.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(n&&r.insert.length==2&&(n=ke.single(n.main.anchor-1,n.main.head-1)),r={from:i.from,to:i.to,insert:dt.of([" "])}):Fe.chrome&&r&&r.from==r.to&&r.from==i.head&&r.insert.toString()==`
 `&&t.lineWrapping&&(n&&(n=ke.single(n.main.anchor-1,n.main.head-1)),r={from:i.from,to:i.to,insert:dt.of([" "])}),r)return Nw(t,r,n,s);if(n&&!n.main.eq(i)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:n,scrollIntoView:o,userEvent:a}),!0}else return!1}function Nw(t,e,r,n=-1){if(Fe.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(Fe.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&gl(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||n==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&gl(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&gl(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=YY(t,e,r));return t.state.facet(GL).some(l=>l(t,e.from,e.to,s,a))||t.dispatch(a()),!0}function YY(t,e,r){let n,i=t.state,s=i.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!r||r.main.empty&&r.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?i.sliceDoc(s.from,e.from):"",l=s.to>e.to?i.sliceDoc(e.to,s.to):"";n=i.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+l))}else{let a=i.changes(e),l=r&&r.main.to<=a.newLength?r.main:void 0;if(i.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),u,h=r&&r3(t,r.main.head);if(h){let g=e.insert.length-(e.to-e.from);u={from:h.from,to:h.to-g}}else u=t.state.doc.lineAt(s.head);let f=s.to-e.to,d=s.to-s.from;n=i.changeByRange(g=>{if(g.from==s.from&&g.to==s.to)return{changes:a,range:l||g.map(a)};let _=g.to-f,m=_-c.length;if(g.to-g.from!=d||t.state.sliceDoc(m,_)!=c||g.to>=u.from&&g.from<=u.to)return{range:g};let p=i.changes({from:m,to:_,insert:e.insert}),b=g.to-s.to;return{changes:p,range:l?ke.range(Math.max(0,l.anchor+b),Math.max(0,l.head+b)):g.map(p)}})}else n={changes:a,selection:l&&i.selection.replaceRange(l)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),i.update(n,{userEvent:o,scrollIntoView:!0})}function XY(t,e,r,n){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(n=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&t.length<e.length){let l=r<=s&&r>=o?s-r:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function QY(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:s}=t.observer.selectionRange;return r&&(e.push(new QT(r,n)),(i!=r||s!=n)&&e.push(new QT(i,s))),e}function ZY(t,e){if(t.length==0)return null;let r=t[0].pos,n=t.length==2?t[1].pos:r;return r>-1&&n>-1?ke.single(r+e,n+e):null}class JY{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Fe.safari&&e.contentDOM.addEventListener("input",()=>null),Fe.gecko&&mX(e.contentDOM.ownerDocument)}handleEvent(e){!aX(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,r){let n=this.handlers[e];if(n){for(let i of n.observers)i(this.view,r);for(let i of n.handlers){if(r.defaultPrevented)break;if(i(this.view,r)){r.preventDefault();break}}}}ensureHandlers(e){let r=eX(e),n=this.handlers,i=this.view.contentDOM;for(let s in r)if(s!="scroll"){let o=!r[s].handlers.length,a=n[s];a&&o!=!a.handlers.length&&(i.removeEventListener(s,this.handleEvent),a=null),a||i.addEventListener(s,this.handleEvent,{passive:o})}for(let s in n)s!="scroll"&&!r[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=r}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&o3.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Fe.android&&Fe.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let r;return Fe.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((r=s3.find(n=>n.keyCode==e.keyCode))&&!e.ctrlKey||tX.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=r||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let r=this.pendingIOSKey;return!r||r.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,gl(this.view.contentDOM,r.key,r.keyCode,r instanceof KeyboardEvent?r:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Fe.safari&&!Fe.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function ZT(t,e){return(r,n)=>{try{return e.call(t,n,r)}catch(i){cn(r.state,i)}}}function eX(t){let e=Object.create(null);function r(n){return e[n]||(e[n]={observers:[],handlers:[]})}for(let n of t){let i=n.spec;if(i&&i.domEventHandlers)for(let s in i.domEventHandlers){let o=i.domEventHandlers[s];o&&r(s).handlers.push(ZT(n.value,o))}if(i&&i.domEventObservers)for(let s in i.domEventObservers){let o=i.domEventObservers[s];o&&r(s).observers.push(ZT(n.value,o))}}for(let n in Yn)r(n).handlers.push(Yn[n]);for(let n in Ln)r(n).observers.push(Ln[n]);return e}const s3=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],tX="dthko",o3=[16,17,18,20,91,92,224,225],hd=6;function fd(t){return Math.max(0,t)*.7+8}function rX(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class nX{constructor(e,r,n,i){this.view=e,this.startEvent=r,this.style=n,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=r,this.scrollParents=fY(e.contentDOM),this.atoms=e.state.facet(Ow).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=r.shiftKey,this.multiple=e.state.facet(ot.allowMultipleSelections)&&iX(e,r),this.dragging=oX(e,r)&&c3(r)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&rX(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let r=0,n=0,i=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=Lw(this.view);e.clientX-l.left<=i+hd?r=-fd(i-e.clientX):e.clientX+l.right>=o-hd&&(r=fd(e.clientX-o)),e.clientY-l.top<=s+hd?n=-fd(s-e.clientY):e.clientY+l.bottom>=a-hd&&(n=fd(e.clientY-a)),this.setScrollSpeed(r,n)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,r){this.scrollSpeed={x:e,y:r},e||r?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:r}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),r&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=r,r=0),(e||r)&&this.view.win.scrollBy(e,r),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let r=null;for(let n=0;n<e.ranges.length;n++){let i=e.ranges[n],s=null;if(i.empty){let o=cp(this.atoms,i.from,0);o!=i.from&&(s=ke.cursor(o,-1))}else{let o=cp(this.atoms,i.from,-1),a=cp(this.atoms,i.to,1);(o!=i.from||a!=i.to)&&(s=ke.range(i.from==i.anchor?o:a,i.from==i.head?o:a))}s&&(r||(r=e.ranges.slice()),r[n]=s)}return r?ke.create(r,e.mainIndex):e}select(e){let{view:r}=this,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!n.eq(r.state.selection,this.dragging===!1))&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(r=>r.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function iX(t,e){let r=t.state.facet($L);return r.length?r[0](e):Fe.mac?e.metaKey:e.ctrlKey}function sX(t,e){let r=t.state.facet(zL);return r.length?r[0](e):Fe.mac?!e.altKey:!e.ctrlKey}function oX(t,e){let{main:r}=t.state.selection;if(r.empty)return!1;let n=Gu(t.root);if(!n||n.rangeCount==0)return!0;let i=n.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function aX(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target,n;r!=t.contentDOM;r=r.parentNode)if(!r||r.nodeType==11||(n=yt.get(r))&&n.ignoreEvent(e))return!1;return!0}const Yn=Object.create(null),Ln=Object.create(null),a3=Fe.ie&&Fe.ie_version<15||Fe.ios&&Fe.webkit_version<604;function lX(t){let e=t.dom.parentNode;if(!e)return;let r=e.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{t.focus(),r.remove(),l3(t,r.value)},50)}function Lg(t,e,r){for(let n of t.facet(e))r=n(r,t);return r}function l3(t,e){e=Lg(t.state,Iw,e);let{state:r}=t,n,i=1,s=r.toText(e),o=s.lines==r.selection.ranges.length;if(V1!=null&&r.selection.ranges.every(l=>l.empty)&&V1==s.toString()){let l=-1;n=r.changeByRange(c=>{let u=r.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let h=r.toText((o?s.line(i++).text:e)+r.lineBreak);return{changes:{from:u.from,insert:h},range:ke.cursor(c.from+h.length)}})}else o?n=r.changeByRange(l=>{let c=s.line(i++);return{changes:{from:l.from,to:l.to,insert:c.text},range:ke.cursor(l.from+c.length)}}):n=r.replaceSelection(s);t.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}Ln.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};Yn.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Ln.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Ln.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Yn.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let r=null;for(let n of t.state.facet(VL))if(r=n(t,e),r)break;if(!r&&e.button==0&&(r=hX(t,e)),r){let n=!t.hasFocus;t.inputState.startMouseSelection(new nX(t,e,r,n)),n&&t.observer.ignore(()=>{SL(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}return!1};function JT(t,e,r,n){if(n==1)return ke.cursor(e,r);if(n==2)return FY(t.state,e,r);{let i=Gt.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,ke.range(o,a)}}let eC=(t,e,r)=>e>=r.top&&e<=r.bottom&&t>=r.left&&t<=r.right;function cX(t,e,r,n){let i=Gt.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&eC(r,n,o))return-1;let a=i.coordsAt(s,1);return a&&eC(r,n,a)?1:o&&o.bottom>=n?-1:1}function tC(t,e){let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:r,bias:cX(t,r,e.clientX,e.clientY)}}const uX=Fe.ie&&Fe.ie_version<=11;let rC=null,nC=0,iC=0;function c3(t){if(!uX)return t.detail;let e=rC,r=iC;return rC=t,iC=Date.now(),nC=!e||r>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(nC+1)%3:1}function hX(t,e){let r=tC(t,e),n=c3(e),i=t.state.selection;return{update(s){s.docChanged&&(r.pos=s.changes.mapPos(r.pos),i=i.map(s.changes))},get(s,o,a){let l=tC(t,s),c,u=JT(t,l.pos,l.bias,n);if(r.pos!=l.pos&&!o){let h=JT(t,r.pos,r.bias,n),f=Math.min(h.from,u.from),d=Math.max(h.to,u.to);u=f<u.from?ke.range(f,d):ke.range(d,f)}return o?i.replaceRange(i.main.extend(u.from,u.to)):a&&n==1&&i.ranges.length>1&&(c=fX(i,l.pos))?c:a?i.addRange(u):ke.create([u])}}}function fX(t,e){for(let r=0;r<t.ranges.length;r++){let{from:n,to:i}=t.ranges[r];if(n<=e&&i>=e)return ke.create(t.ranges.slice(0,r).concat(t.ranges.slice(r+1)),t.mainIndex==r?0:t.mainIndex-(t.mainIndex>r?1:0))}return null}Yn.dragstart=(t,e)=>{let{selection:{main:r}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,o=s+i.length;(s>=r.to||o<=r.from)&&(r=ke.range(s,o))}}let{inputState:n}=t;return n.mouseSelection&&(n.mouseSelection.dragging=!0),n.draggedContent=r,e.dataTransfer&&(e.dataTransfer.setData("Text",Lg(t.state,Dw,t.state.sliceDoc(r.from,r.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Yn.dragend=t=>(t.inputState.draggedContent=null,!1);function sC(t,e,r,n){if(r=Lg(t.state,Iw,r),!r)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=n&&s&&sX(t,e)?{from:s.from,to:s.to}:null,a={from:i,insert:r},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Yn.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let r=e.dataTransfer.files;if(r&&r.length){let n=Array(r.length),i=0,s=()=>{++i==r.length&&sC(t,e,n.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<r.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(n[o]=a.result),s()},a.readAsText(r[o])}return!0}else{let n=e.dataTransfer.getData("Text");if(n)return sC(t,e,n,!0),!0}return!1};Yn.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let r=a3?null:e.clipboardData;return r?(l3(t,r.getData("text/plain")||r.getData("text/uri-list")),!0):(lX(t),!1)};function dX(t,e){let r=t.dom.parentNode;if(!r)return;let n=r.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=e,n.focus(),n.selectionEnd=e.length,n.selectionStart=0,setTimeout(()=>{n.remove(),t.focus()},50)}function pX(t){let e=[],r=[],n=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),r.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>i&&(e.push(o.text),r.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),i=o.number}n=!0}return{text:Lg(t,Dw,e.join(t.lineBreak)),ranges:r,linewise:n}}let V1=null;Yn.copy=Yn.cut=(t,e)=>{let{text:r,ranges:n,linewise:i}=pX(t.state);if(!r&&!i)return!1;V1=i?r:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"});let s=a3?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",r),!0):(dX(t,r),!1)};const u3=_s.define();function h3(t,e){let r=[];for(let n of t.facet(qL)){let i=n(t,e);i&&r.push(i)}return r?t.update({effects:r,annotations:u3.of(!0)}):null}function f3(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let r=h3(t.state,e);r?t.dispatch(r):t.update([])}},10)}Ln.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),f3(t)};Ln.blur=t=>{t.observer.clearSelectionRange(),f3(t)};Ln.compositionstart=Ln.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Ln.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Fe.chrome&&Fe.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Ln.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Yn.beforeinput=(t,e)=>{var r,n;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(r=e.dataTransfer)===null||r===void 0?void 0:r.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=t.posAtDOM(a.startContainer,a.startOffset),c=t.posAtDOM(a.endContainer,a.endOffset);return Nw(t,{from:l,to:c,insert:t.state.toText(s)},null),!0}}let i;if(Fe.chrome&&Fe.android&&(i=s3.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return Fe.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),Fe.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Ln.compositionend(t,e),20),!1};const oC=new Set;function mX(t){oC.has(t)||(oC.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const aC=["pre-wrap","normal","pre-line","break-spaces"];let Bl=!1;function lC(){Bl=!1}class gX{constructor(e){this.lineWrapping=e,this.doc=dt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,r){let n=this.doc.lineAt(r).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((r-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return aC.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let r=!1;for(let n=0;n<e.length;n++){let i=e[n];i<0?n++:this.heightSamples[Math.floor(i*10)]||(r=!0,this.heightSamples[Math.floor(i*10)]=!0)}return r}refresh(e,r,n,i,s,o){let a=aC.indexOf(e)>-1,l=Math.round(r)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=r,this.charWidth=n,this.textHeight=i,this.lineLength=s,l){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class _X{constructor(e,r){this.from=e,this.heights=r,this.index=0}get more(){return this.index<this.heights.length}}class vi{constructor(e,r,n,i,s){this.from=e,this.length=r,this.top=n,this.height=i,this._content=s}get type(){return typeof this._content=="number"?Lr.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof ro?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let r=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new vi(this.from,this.length+e.length,this.top,this.height+e.height,r)}}var xt=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(xt||(xt={}));const up=.001;class Nr{constructor(e,r,n=2){this.length=e,this.height=r,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>up&&(Bl=!0),this.height=e)}replace(e,r,n){return Nr.of(n)}decomposeLeft(e,r){r.push(this)}decomposeRight(e,r){r.push(this)}applyChanges(e,r,n,i){let s=this,o=n.doc;for(let a=i.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:u,toB:h}=i[a],f=s.lineAt(l,xt.ByPosNoHeight,n.setDoc(r),0,0),d=f.to>=c?f:s.lineAt(c,xt.ByPosNoHeight,n,0,0);for(h+=d.to-c,c=d.to;a>0&&f.from<=i[a-1].toA;)l=i[a-1].fromA,u=i[a-1].fromB,a--,l<f.from&&(f=s.lineAt(l,xt.ByPosNoHeight,n,0,0));u+=f.from-l,l=f.from;let g=Mw.build(n.setDoc(o),e,u,h);s=em(s,s.replace(l,c,g))}return s.updateHeight(n,0)}static empty(){return new sn(0,0)}static of(e){if(e.length==1)return e[0];let r=0,n=e.length,i=0,s=0;for(;;)if(r==n)if(i>s*2){let a=e[r-1];a.break?e.splice(--r,1,a.left,null,a.right):e.splice(--r,1,a.left,a.right),n+=1+a.break,i-=a.size}else if(s>i*2){let a=e[n];a.break?e.splice(n,1,a.left,null,a.right):e.splice(n,1,a.left,a.right),n+=2+a.break,s-=a.size}else break;else if(i<s){let a=e[r++];a&&(i+=a.size)}else{let a=e[--n];a&&(s+=a.size)}let o=0;return e[r-1]==null?(o=1,r--):e[r]==null&&(o=1,n++),new bX(Nr.of(e.slice(0,r)),o,Nr.of(e.slice(n)))}}function em(t,e){return t==e?t:(t.constructor!=e.constructor&&(Bl=!0),e)}Nr.prototype.size=1;class d3 extends Nr{constructor(e,r,n){super(e,r),this.deco=n}blockAt(e,r,n,i){return new vi(i,this.length,n,this.height,this.deco||0)}lineAt(e,r,n,i,s){return this.blockAt(0,n,i,s)}forEachLine(e,r,n,i,s,o){e<=s+this.length&&r>=s&&o(this.blockAt(0,n,i,s))}updateHeight(e,r=0,n=!1,i){return i&&i.from<=r&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class sn extends d3{constructor(e,r){super(e,r,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,r,n,i){return new vi(i,this.length,n,this.height,this.breaks)}replace(e,r,n){let i=n[0];return n.length==1&&(i instanceof sn||i instanceof ur&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof ur?i=new sn(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Nr.of(n)}updateHeight(e,r=0,n=!1,i){return i&&i.from<=r&&i.more?this.setHeight(i.heights[i.index++]):(n||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class ur extends Nr{constructor(e){super(e,0)}heightMetrics(e,r){let n=e.doc.lineAt(r).number,i=e.doc.lineAt(r+this.length).number,s=i-n+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:n,lastLine:i,perLine:o,perChar:a}}blockAt(e,r,n,i){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(r,i);if(r.lineWrapping){let c=i+(e<r.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length)),u=r.doc.lineAt(c),h=a+u.length*l,f=Math.max(n,e-h/2);return new vi(u.from,u.length,f,h,0)}else{let c=Math.max(0,Math.min(o-s,Math.floor((e-n)/a))),{from:u,length:h}=r.doc.line(s+c);return new vi(u,h,n+a*c,a,0)}}lineAt(e,r,n,i,s){if(r==xt.ByHeight)return this.blockAt(e,n,i,s);if(r==xt.ByPosNoHeight){let{from:d,to:g}=n.doc.lineAt(e);return new vi(d,g-d,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(n,s),c=n.doc.lineAt(e),u=a+c.length*l,h=c.number-o,f=i+a*h+l*(c.from-s-h);return new vi(c.from,c.length,Math.max(i,Math.min(f,i+this.height-u)),u,0)}forEachLine(e,r,n,i,s,o){e=Math.max(e,s),r=Math.min(r,s+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(n,s);for(let u=e,h=i;u<=r;){let f=n.doc.lineAt(u);if(u==e){let g=f.number-a;h+=l*g+c*(e-s-g)}let d=l+c*f.length;o(new vi(f.from,f.length,h,d,0)),h+=d,u=f.to+1}}replace(e,r,n){let i=this.length-r;if(i>0){let s=n[n.length-1];s instanceof ur?n[n.length-1]=new ur(s.length+i):n.push(null,new ur(i-1))}if(e>0){let s=n[0];s instanceof ur?n[0]=new ur(e+s.length):n.unshift(new ur(e-1),null)}return Nr.of(n)}decomposeLeft(e,r){r.push(new ur(e-1),null)}decomposeRight(e,r){r.push(null,new ur(this.length-e-1))}updateHeight(e,r=0,n=!1,i){let s=r+this.length;if(i&&i.from<=r+this.length&&i.more){let o=[],a=Math.max(r,i.from),l=-1;for(i.from>r&&o.push(new ur(i.from-r-1).updateHeight(e,r));a<=s&&i.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let h=i.heights[i.index++];l==-1?l=h:Math.abs(h-l)>=up&&(l=-2);let f=new sn(u,h);f.outdated=!1,o.push(f),a+=u+1}a<=s&&o.push(null,new ur(s-a).updateHeight(e,a));let c=Nr.of(o);return(l<0||Math.abs(c.height-this.height)>=up||Math.abs(l-this.heightMetrics(e,r).perLine)>=up)&&(Bl=!0),em(this,c)}else(n||this.outdated)&&(this.setHeight(e.heightForGap(r,r+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class bX extends Nr{constructor(e,r,n){super(e.length+r+n.length,e.height+n.height,r|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return this.flags&1}blockAt(e,r,n,i){let s=n+this.left.height;return e<s?this.left.blockAt(e,r,n,i):this.right.blockAt(e,r,s,i+this.left.length+this.break)}lineAt(e,r,n,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,l=r==xt.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,r,n,i,s):this.right.lineAt(e,r,n,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let u=r==xt.ByPosNoHeight?xt.ByPosNoHeight:xt.ByPos;return l?c.join(this.right.lineAt(a,u,n,o,a)):this.left.lineAt(a,u,n,i,s).join(c)}forEachLine(e,r,n,i,s,o){let a=i+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,r,n,i,s,o),r>=l&&this.right.forEachLine(e,r,n,a,l,o);else{let c=this.lineAt(l,xt.ByPos,n,i,s);e<c.from&&this.left.forEachLine(e,c.from-1,n,i,s,o),c.to>=e&&c.from<=r&&o(c),r>c.to&&this.right.forEachLine(c.to+1,r,n,a,l,o)}}replace(e,r,n){let i=this.left.length+this.break;if(r<i)return this.balanced(this.left.replace(e,r,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,r-i,n));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of n)s.push(a);if(e>0&&cC(s,o-1),r<this.length){let a=s.length;this.decomposeRight(r,s),cC(s,a)}return Nr.of(s)}decomposeLeft(e,r){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,r);r.push(this.left),this.break&&(n++,e>=n&&r.push(null)),e>n&&this.right.decomposeLeft(e-n,r)}decomposeRight(e,r){let n=this.left.length,i=n+this.break;if(e>=i)return this.right.decomposeRight(e-i,r);e<n&&this.left.decomposeRight(e,r),this.break&&e<i&&r.push(null),r.push(this.right)}balanced(e,r){return e.size>2*r.size||r.size>2*e.size?Nr.of(this.break?[e,null,r]:[e,r]):(this.left=em(this.left,e),this.right=em(this.right,r),this.setHeight(e.height+r.height),this.outdated=e.outdated||r.outdated,this.size=e.size+r.size,this.length=e.length+this.break+r.length,this)}updateHeight(e,r=0,n=!1,i){let{left:s,right:o}=this,a=r+s.length+this.break,l=null;return i&&i.from<=r+s.length&&i.more?l=s=s.updateHeight(e,r,n,i):s.updateHeight(e,r,n),i&&i.from<=a+o.length&&i.more?l=o=o.updateHeight(e,a,n,i):o.updateHeight(e,a,n),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function cC(t,e){let r,n;t[e]==null&&(r=t[e-1])instanceof ur&&(n=t[e+1])instanceof ur&&t.splice(e-1,3,new ur(r.length+1+n.length))}const yX=5;class Mw{constructor(e,r){this.pos=e,this.oracle=r,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,r){if(this.lineStart>-1){let n=Math.min(r,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof sn?i.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new sn(n-this.pos,-1)),this.writtenTo=n,r>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=r}point(e,r,n){if(e<r||n.heightRelevant){let i=n.widget?n.widget.estimatedHeight:0,s=n.widget?n.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=r-e;n.block?this.addBlock(new d3(o,i,n)):(o||s||i>=yX)&&this.addLineDeco(i,s,o)}else r>e&&this.span(e,r);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:r}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=r,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new sn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,r){let n=new ur(r-e);return this.oracle.doc.lineAt(e).to==r&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof sn)return e;let r=new sn(0,-1);return this.nodes.push(r),r}addBlock(e){this.enterLine();let r=e.deco;r&&r.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,r&&r.endSide>0&&(this.covering=e)}addLineDeco(e,r,n){let i=this.ensureLine();i.length+=n,i.collapsed+=n,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=r,this.writtenTo=this.pos=this.pos+n}finish(e){let r=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(r instanceof sn)&&!this.isCovered?this.nodes.push(new sn(0,-1)):(this.writtenTo<this.pos||r==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=e;for(let i of this.nodes)i instanceof sn&&i.updateHeight(this.oracle,n),n+=i?i.length:1;return this.nodes}static build(e,r,n,i){let s=new Mw(n,e);return ut.spans(r,n,i,s,0),s.finish(n)}}function vX(t,e,r){let n=new wX;return ut.compare(t,e,r,n,0),n.changes}class wX{constructor(){this.changes=[]}compareRange(){}comparePoint(e,r,n,i){(e<r||n&&n.heightRelevant||i&&i.heightRelevant)&&M1(e,r,this.changes,5)}}function EX(t,e){let r=t.getBoundingClientRect(),n=t.ownerDocument,i=n.defaultView||window,s=Math.max(0,r.left),o=Math.min(i.innerWidth,r.right),a=Math.max(0,r.top),l=Math.min(i.innerHeight,r.bottom);for(let c=t.parentNode;c&&c!=n.body;)if(c.nodeType==1){let u=c,h=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&h.overflow!="visible"){let f=u.getBoundingClientRect();s=Math.max(s,f.left),o=Math.min(o,f.right),a=Math.max(a,f.top),l=Math.min(c==t.parentNode?i.innerHeight:l,f.bottom)}c=h.position=="absolute"||h.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-r.left,right:Math.max(s,o)-r.left,top:a-(r.top+e),bottom:Math.max(a,l)-(r.top+e)}}function SX(t,e){let r=t.getBoundingClientRect();return{left:0,right:r.right-r.left,top:e,bottom:r.bottom-(r.top+e)}}class c_{constructor(e,r,n,i){this.from=e,this.to=r,this.size=n,this.displaySize=i}static same(e,r){if(e.length!=r.length)return!1;for(let n=0;n<e.length;n++){let i=e[n],s=r[n];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,r){return it.replace({widget:new xX(this.displaySize*(r?e.scaleY:e.scaleX),r)}).range(this.from,this.to)}}class xX extends ic{constructor(e,r){super(),this.size=e,this.vertical=r}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class uC{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=hC,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=It.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let r=e.facet(Og).some(n=>typeof n!="function"&&n.class=="cm-lineWrapping");this.heightOracle=new gX(r),this.stateDeco=e.facet(Ku).filter(n=>typeof n!="function"),this.heightMap=Nr.empty().applyChanges(this.stateDeco,dt.empty,this.heightOracle.setDoc(e.doc),[new Rn(0,0,0,e.doc.length)]);for(let n=0;n<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());n++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=it.set(this.lineGaps.map(n=>n.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:r}=this.state.selection;for(let n=0;n<=1;n++){let i=n?r.head:r.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new dd(s,o))}}return this.viewports=e.sort((n,i)=>n.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?hC:new Bw(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(eu(e,this.scaler))})}update(e,r=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(Ku).filter(u=>typeof u!="function");let i=e.changedRanges,s=Rn.extendWithRanges(i,vX(n,this.stateDeco,e?e.changes:Qt.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);lC(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||Bl)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(r&&(r.range.head<l.from||r.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,r));let c=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),r&&(this.scrollTarget=r),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(YL)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let r=e.contentDOM,n=window.getComputedStyle(r),i=this.heightOracle,s=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?It.RTL:It.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=r.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,u=0;if(a.width&&a.height){let{scaleX:v,scaleY:w}=EL(r,a);(v>.005&&Math.abs(this.scaleX-v)>.005||w>.005&&Math.abs(this.scaleY-w)>.005)&&(this.scaleX=v,this.scaleY=w,c|=8,o=l=!0)}let h=(parseInt(n.paddingTop)||0)*this.scaleY,f=(parseInt(n.paddingBottom)||0)*this.scaleY;(this.paddingTop!=h||this.paddingBottom!=f)&&(this.paddingTop=h,this.paddingBottom=f,c|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=8);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=TL(e.scrollDOM);let g=(this.printing?SX:EX)(r,this.paddingTop),_=g.top-this.pixelViewport.top,m=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let p=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(p!=this.inView&&(this.inView=p,p&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let b=a.width;if((this.contentDOMWidth!=b||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,c|=8),l){let v=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(v)&&(o=!0),o||i.lineWrapping&&Math.abs(b-this.contentDOMWidth)>i.charWidth){let{lineHeight:w,charWidth:S,textHeight:x}=e.docView.measureTextSize();o=w>0&&i.refresh(s,w,S,x,b/S,v),o&&(e.docView.minWidth=0,c|=8)}_>0&&m>0?u=Math.max(_,m):_<0&&m<0&&(u=Math.min(_,m)),lC();for(let w of this.viewports){let S=w.from==this.viewport.from?v:e.docView.measureVisibleLineHeights(w);this.heightMap=(o?Nr.empty().applyChanges(this.stateDeco,dt.empty,this.heightOracle,[new Rn(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new _X(w.from,S))}Bl&&(c|=2)}let y=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(c&2||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,r){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new dd(i.lineAt(o-n*1e3,xt.ByHeight,s,0,0).from,i.lineAt(a+(1-n)*1e3,xt.ByHeight,s,0,0).to);if(r){let{head:c}=r.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),h=i.lineAt(c,xt.ByPos,s,0,0),f;r.y=="center"?f=(h.top+h.bottom)/2-u/2:r.y=="start"||r.y=="nearest"&&c<l.from?f=h.top:f=h.bottom-u,l=new dd(i.lineAt(f-1e3/2,xt.ByHeight,s,0,0).from,i.lineAt(f+u+1e3/2,xt.ByHeight,s,0,0).to)}}return l}mapViewport(e,r){let n=r.mapPos(e.from,-1),i=r.mapPos(e.to,1);return new dd(this.heightMap.lineAt(n,xt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,xt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:r},n=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,xt.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(r,xt.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-n,250)))&&(r==this.state.doc.length||s>=a+Math.max(10,Math.min(n,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,r){if(!e.length||r.empty)return e;let n=[];for(let i of e)r.touchesRange(i.from,i.to)||n.push(new c_(r.mapPos(i.from),r.mapPos(i.to),i.size,i.displaySize));return n}ensureLineGaps(e,r){let n=this.heightOracle.lineWrapping,i=n?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=It.LTR&&!n)return[];let a=[],l=(u,h,f,d)=>{if(h-u<s)return;let g=this.state.selection.main,_=[g.from];g.empty||_.push(g.to);for(let p of _)if(p>u&&p<h){l(u,p-10,f,d),l(p+10,h,f,d);return}let m=CX(e,p=>p.from>=f.from&&p.to<=f.to&&Math.abs(p.from-u)<s&&Math.abs(p.to-h)<s&&!_.some(b=>p.from<b&&p.to>b));if(!m){if(h<f.to&&r&&n&&r.visibleRanges.some(y=>y.from<=h&&y.to>=h)){let y=r.moveToLineBoundary(ke.cursor(h),!1,!0).head;y>u&&(h=y)}let p=this.gapSize(f,u,h,d),b=n||p<2e6?p:2e6;m=new c_(u,h,p,b)}a.push(m)},c=u=>{if(u.length<o||u.type!=Lr.Text)return;let h=TX(u.from,u.to,this.stateDeco);if(h.total<o)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,d,g;if(n){let _=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,m,p;if(f!=null){let b=md(h,f),y=((this.visibleBottom-this.visibleTop)/2+_)/u.height;m=b-y,p=b+y}else m=(this.visibleTop-u.top-_)/u.height,p=(this.visibleBottom-u.top+_)/u.height;d=pd(h,m),g=pd(h,p)}else{let _=h.total*this.heightOracle.charWidth,m=i*this.heightOracle.charWidth,p=0;if(_>2e6)for(let S of e)S.from>=u.from&&S.from<u.to&&S.size!=S.displaySize&&S.from*this.heightOracle.charWidth+p<this.pixelViewport.left&&(p=S.size-S.displaySize);let b=this.pixelViewport.left+p,y=this.pixelViewport.right+p,v,w;if(f!=null){let S=md(h,f),x=((y-b)/2+m)/_;v=S-x,w=S+x}else v=(b-m)/_,w=(y+m)/_;d=pd(h,v),g=pd(h,w)}d>u.from&&l(u.from,d,u,h),g<u.to&&l(g,u.to,u,h)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(c):c(u);return a}gapSize(e,r,n,i){let s=md(i,n)-md(i,r);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){c_.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=it.set(e.map(r=>r.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let r=[];ut.spans(e,this.viewport.from,this.viewport.to,{span(i,s){r.push({from:i,to:s})},point(){}},20);let n=r.length!=this.visibleRanges.length||this.visibleRanges.some((i,s)=>i.from!=r[s].from||i.to!=r[s].to);return this.visibleRanges=r,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(r=>r.from<=e&&r.to>=e)||eu(this.heightMap.lineAt(e,xt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(r=>r.top<=e&&r.bottom>=e)||eu(this.heightMap.lineAt(this.scaler.fromDOM(e),xt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let r=this.lineBlockAtHeight(e+8);return r.from>=this.viewport.from||this.viewportLines[0].top-e>200?r:this.viewportLines[0]}elementAtHeight(e){return eu(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class dd{constructor(e,r){this.from=e,this.to=r}}function TX(t,e,r){let n=[],i=t,s=0;return ut.spans(r,t,e,{span(){},point(o,a){o>i&&(n.push({from:i,to:o}),s+=o-i),i=a}},20),i<e&&(n.push({from:i,to:e}),s+=e-i),{total:s,ranges:n}}function pd({total:t,ranges:e},r){if(r<=0)return e[0].from;if(r>=1)return e[e.length-1].to;let n=Math.floor(t*r);for(let i=0;;i++){let{from:s,to:o}=e[i],a=o-s;if(n<=a)return s+n;n-=a}}function md(t,e){let r=0;for(let{from:n,to:i}of t.ranges){if(e<=i){r+=e-n;break}r+=i-n}return r/t.total}function CX(t,e){for(let r of t)if(e(r))return r}const hC={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class Bw{constructor(e,r,n){let i=0,s=0,o=0;this.viewports=n.map(({from:a,to:l})=>{let c=r.lineAt(a,xt.ByPos,e,0,0).top,u=r.lineAt(l,xt.ByPos,e,0,0).bottom;return i+=u-c,{from:a,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(r.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let r=0,n=0,i=0;;r++){let s=r<this.viewports.length?this.viewports[r]:null;if(!s||e<s.top)return i+(e-n)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);n=s.bottom,i=s.domBottom}}fromDOM(e){for(let r=0,n=0,i=0;;r++){let s=r<this.viewports.length?this.viewports[r]:null;if(!s||e<s.domTop)return n+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);n=s.bottom,i=s.domBottom}}eq(e){return e instanceof Bw?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((r,n)=>r.from==e.viewports[n].from&&r.to==e.viewports[n].to):!1}}function eu(t,e){if(e.scale==1)return t;let r=e.toDOM(t.top),n=e.toDOM(t.bottom);return new vi(t.from,t.length,r,n-r,Array.isArray(t._content)?t._content.map(i=>eu(i,e)):t._content)}const gd=Ue.define({combine:t=>t.join(" ")}),W1=Ue.define({combine:t=>t.indexOf(!0)>-1}),G1=eo.newName(),p3=eo.newName(),m3=eo.newName(),g3={"&light":"."+p3,"&dark":"."+m3};function q1(t,e,r){return new eo(e,{finish(n){return/&/.test(n)?n.replace(/&\w*/,i=>{if(i=="&")return t;if(!r||!r[i])throw new RangeError(`Unsupported selector: ${i}`);return r[i]}):t+" "+n}})}const kX=q1("."+G1,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},g3),AX={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},u_=Fe.ie&&Fe.ie_version<=11;class RX{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new dY,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(r=>{for(let n of r)this.queue.push(n);(Fe.ie&&Fe.ie_version<=11||Fe.ios&&e.composing)&&r.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(Fe.chrome&&Fe.chrome_version<126)&&(this.editContext=new IX(e),e.state.facet(Os)&&(e.contentDOM.editContext=this.editContext.editContext)),u_&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var r;((r=this.view.docView)===null||r===void 0?void 0:r.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(r=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),r.length>0&&r[r.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(r=>{r.length>0&&r[r.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((r,n)=>r!=e[n]))){this.gapIntersection.disconnect();for(let r of e)this.gapIntersection.observe(r);this.gaps=e}}onSelectionChange(e){let r=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,i=this.selectionRange;if(n.state.facet(Os)?n.root.activeElement!=this.dom:!lp(this.dom,i))return;let s=i.anchorNode&&n.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){r||(this.selectionChanged=!1);return}(Fe.ie&&Fe.ie_version<=11||Fe.android&&Fe.chrome)&&!n.state.selection.main.empty&&i.focusNode&&mu(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,r=Gu(e.root);if(!r)return!1;let n=Fe.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&PX(this.view,r)||r;if(!n||this.selectionRange.eq(n))return!1;let i=lp(this.dom,n);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&mY(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,r){this.selectionRange.set(e.node,e.offset,r.node,r.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,r=null;for(let n=this.dom;n;)if(n.nodeType==1)!r&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:r||(r=this.scrollTargets.slice(0,e)),r&&r.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(e<this.scrollTargets.length&&!r&&(r=this.scrollTargets.slice(0,e)),r){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=r)n.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,AX),u_&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),u_&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,r){var n;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&gl(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:r,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let r=-1,n=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),r==-1?{from:r,to:n}=o:(r=Math.min(o.from,r),n=Math.max(o.to,n)))}return{from:r,to:n,typeOver:i}}readChange(){let{from:e,to:r,typeOver:n}=this.processRecords(),i=this.selectionChanged&&lp(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new KY(this.view,e,r,n);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let r=this.readChange();if(!r)return this.view.requestMeasure(),!1;let n=this.view.state,i=i3(this.view,r);return this.view.state==n&&(r.domChanged||r.newSel&&!r.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let r=this.view.docView.nearest(e.target);if(!r||r.ignoreMutation(e))return null;if(r.markDirty(e.type=="attributes"),e.type=="attributes"&&(r.flags|=4),e.type=="childList"){let n=fC(r,e.previousSibling||e.target.previousSibling,-1),i=fC(r,e.nextSibling||e.target.nextSibling,1);return{from:n?r.posAfter(n):r.posAtStart,to:i?r.posBefore(i):r.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Os)!=e.state.facet(Os)&&(e.view.contentDOM.editContext=e.state.facet(Os)?this.editContext.editContext:null))}destroy(){var e,r,n;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(r=this.gapIntersection)===null||r===void 0||r.disconnect(),(n=this.resizeScroll)===null||n===void 0||n.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function fC(t,e,r){for(;e;){let n=yt.get(e);if(n&&n.parent==t)return n;let i=e.parentNode;e=i!=t.dom?i:r>0?e.nextSibling:e.previousSibling}return null}function dC(t,e){let r=e.startContainer,n=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return mu(o.node,o.offset,i,s)&&([r,n,i,s]=[i,s,r,n]),{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:s}}function PX(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return dC(t,i)}let r=null;function n(i){i.preventDefault(),i.stopImmediatePropagation(),r=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",n,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",n,!0),r?dC(t,r):null}class IX{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let r=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=n=>{let{anchor:i}=e.state.selection.main,s=this.toEditorPos(n.updateRangeStart),o=this.toEditorPos(n.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:n.updateRangeStart,editorBase:s,drifted:!1});let a={from:s,to:o,insert:dt.of(n.text.split(`
`))};a.from==this.from&&i<this.from?a.from=i:a.to==this.to&&i>this.to&&(a.to=i),!(a.from==a.to&&!a.insert.length)&&(this.pendingContextChange=a,e.state.readOnly||Nw(e,a,ke.single(this.toEditorPos(n.selectionStart),this.toEditorPos(n.selectionEnd))),this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)))},this.handlers.characterboundsupdate=n=>{let i=[],s=null;for(let o=this.toEditorPos(n.rangeStart),a=this.toEditorPos(n.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,i.push(s)}r.updateCharacterBounds(n.rangeStart,i)},this.handlers.textformatupdate=n=>{let i=[];for(let s of n.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(o!="None"&&a!="None"){let l=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;i.push(it.mark({attributes:{style:l}}).range(this.toEditorPos(s.rangeStart),this.toEditorPos(s.rangeEnd)))}}e.dispatch({effects:QL.of(it.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:n}=this.composing;this.composing=null,n&&this.reset(e.state)}};for(let n in this.handlers)r.addEventListener(n,this.handlers[n]);this.measureReq={read:n=>{this.editContext.updateControlBounds(n.contentDOM.getBoundingClientRect());let i=Gu(n.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let r=0,n=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,c)=>{if(n)return;let u=c.length-(o-s);if(i&&o>=i.to)if(i.from==s&&i.to==o&&i.insert.eq(c)){i=this.pendingContextChange=null,r+=u,this.to+=u;return}else i=null,this.revertPending(e.state);if(s+=r,o+=r,o<=this.from)this.from+=u,this.to+=u;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+c.length>3e4){n=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),c.toString()),this.to+=u}r+=u}),i&&!n&&this.revertPending(e.state),!n}update(e){let r=this.pendingContextChange;this.composing&&(this.composing.drifted||e.transactions.some(n=>!n.isUserEvent("input.type")&&n.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||r)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:r}=e.selection.main;this.from=Math.max(0,r-1e4),this.to=Math.min(e.doc.length,r+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let r=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(r.from),this.toContextPos(r.from+r.insert.length),e.doc.sliceString(r.from,r.to))}setSelection(e){let{main:r}=e.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,r.anchor))),i=this.toContextPos(r.head);(this.editContext.selectionStart!=n||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(n,i)}rangeIsValid(e){let{head:r}=e.selection.main;return!(this.from>0&&r-this.from<500||this.to<e.doc.length&&this.to-r<500||this.to-this.from>1e4*3)}toEditorPos(e){let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let r=this.composing;return r&&r.drifted?r.contextBase+(e-r.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class He{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var r;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:n}=e;this.dispatchTransactions=e.dispatchTransactions||n&&(i=>i.forEach(s=>n(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||pY(e.parent)||document,this.viewState=new uC(e.state||ot.create(e)),e.scrollTo&&e.scrollTo.is(ud)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Qc).map(i=>new o_(i));for(let i of this.plugins)i.update(this);this.observer=new RX(this),this.inputState=new JY(this),this.inputState.ensureHandlers(this.plugins),this.docView=new WT(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((r=document.fonts)===null||r===void 0)&&r.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let r=e.length==1&&e[0]instanceof Kt?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(r,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let r=!1,n=!1,i,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(f=>f.annotation(u3))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=h3(s,o),l||(a=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(u=null)):this.observer.clear(),s.facet(ot.phrases)!=this.state.facet(ot.phrases))return this.setState(s);i=Jp.create(this,s,e),i.flags|=a;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(h&&(h=h.map(f.changes)),f.scrollIntoView){let{main:d}=f.state.selection;h=new _l(d.empty?d:ke.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of f.effects)d.is(ud)&&(h=d.value.clip(this.state))}this.viewState.update(i,h),this.bidiCache=tm.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),r=this.docView.update(i),this.state.facet(Zc)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(r,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(gd)!=i.state.facet(gd)&&(this.viewState.mustMeasureContent=!0),(r||n||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),r&&this.docViewUpdate(),!i.empty)for(let f of this.state.facet(j1))try{f(i)}catch(d){cn(this.state,d,"update listener")}(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!i3(this,u)&&c.force&&gl(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let r=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new uC(e),this.plugins=e.facet(Qc).map(n=>new o_(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView.destroy(),this.docView=new WT(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}r&&this.focus(),this.requestMeasure()}updatePlugins(e){let r=e.startState.facet(Qc),n=e.state.facet(Qc);if(r!=n){let i=[];for(let s of n){let o=r.indexOf(s);if(o<0)i.push(new o_(s));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);r!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let r=e.value;if(r&&r.docViewUpdate)try{r.docViewUpdate(this)}catch(n){cn(this.state,n,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let r=null,n=this.scrollDOM,i=n.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(TL(n))s=-1,o=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(i);s=d.from,o=d.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(d=>{try{return d.read(this)}catch(g){return cn(this.state,g),pC}}),h=Jp.create(this,this.state,[]),f=!1;h.flags|=l,r?r.flags|=l:r=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),f=this.docView.update(h),f&&this.docViewUpdate());for(let d=0;d<c.length;d++)if(u[d]!=pC)try{let g=c[d];g.write&&g.write(u[d],this)}catch(g){cn(this.state,g)}if(f&&this.docView.updateSelection(!0),!h.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let g=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(g>1||g<-1){i=i+g,n.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(r&&!r.empty)for(let a of this.state.facet(j1))a(r)}get themeClasses(){return G1+" "+(this.state.facet(W1)?m3:p3)+" "+this.state.facet(gd)}updateAttrs(){let e=mC(this,ZL,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),r={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Os)?"true":"false",class:"cm-content",style:`${Fe.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(r["aria-readonly"]="true"),mC(this,Og,r);let n=this.observer.ignore(()=>{let i=N1(this.contentDOM,this.contentAttrs,r),s=N1(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=r,n}showAnnouncements(e){let r=!0;for(let n of e)for(let i of n.effects)if(i.is(He.announce)){r&&(this.announceDOM.textContent=""),r=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Zc);let e=this.state.facet(He.cspNonce);eo.mount(this.root,this.styleModules.concat(kX).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let r=0;r<this.measureRequests.length;r++)if(this.measureRequests[r].key===e.key){this.measureRequests[r]=e;return}}this.measureRequests.push(e)}}plugin(e){let r=this.pluginMap.get(e);return(r===void 0||r&&r.spec!=e)&&this.pluginMap.set(e,r=this.plugins.find(n=>n.spec==e)||null),r&&r.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,r,n){return l_(this,e,XT(this,e,r,n))}moveByGroup(e,r){return l_(this,e,XT(this,e,r,n=>VY(this,e.head,n)))}visualLineSide(e,r){let n=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=n[r?n.length-1:0];return ke.cursor(s.side(r,i)+e.from,s.forward(!r,i)?1:-1)}moveToLineBoundary(e,r,n=!0){return zY(this,e,r,n)}moveVertically(e,r,n){return l_(this,e,WY(this,e,r,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,r=0){return this.docView.posFromDOM(e,r)}posAtCoords(e,r=!0){return this.readMeasured(),n3(this,e,r)}coordsAtPos(e,r=1){this.readMeasured();let n=this.docView.coordsAt(e,r);if(!n||n.left==n.right)return n;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[Us.find(s,e-i.from,-1,r)];return Ig(n,o.dir==It.LTR==r>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(KL)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>DX)return UL(e.length);let r=this.textDirectionAt(e.from),n;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==r&&(s.fresh||HL(s.isolates,n=VT(this,e))))return s.order;n||(n=VT(this,e));let i=kY(e.text,r,n);return this.bidiCache.push(new tm(e.from,e.to,r,n,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Fe.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{SL(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,r={}){return ud.of(new _l(typeof e=="number"?ke.cursor(e):e,r.y,r.x,r.yMargin,r.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:r}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return ud.of(new _l(ke.cursor(n.from),"start","start",n.top-e,r,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return mr.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return mr.define(()=>({}),{eventObservers:e})}static theme(e,r){let n=eo.newName(),i=[gd.of(n),Zc.of(q1(`.${n}`,e))];return r&&r.dark&&i.push(W1.of(!0)),i}static baseTheme(e){return uo.lowest(Zc.of(q1("."+G1,e,g3)))}static findFromDOM(e){var r;let n=e.querySelector(".cm-content"),i=n&&yt.get(n)||yt.get(e);return((r=i?.rootView)===null||r===void 0?void 0:r.view)||null}}He.styleModule=Zc;He.inputHandler=GL;He.clipboardInputFilter=Iw;He.clipboardOutputFilter=Dw;He.scrollHandler=XL;He.focusChangeEffect=qL;He.perLineTextDirection=KL;He.exceptionSink=WL;He.updateListener=j1;He.editable=Os;He.mouseSelectionStyle=VL;He.dragMovesSelection=zL;He.clickAddsSelectionRange=$L;He.decorations=Ku;He.outerDecorations=JL;He.atomicRanges=Ow;He.bidiIsolatedRanges=e3;He.scrollMargins=t3;He.darkTheme=W1;He.cspNonce=Ue.define({combine:t=>t.length?t[0]:""});He.contentAttributes=Og;He.editorAttributes=ZL;He.lineWrapping=He.contentAttributes.of({class:"cm-lineWrapping"});He.announce=Je.define();const DX=4096,pC={};class tm{constructor(e,r,n,i,s,o){this.from=e,this.to=r,this.dir=n,this.isolates=i,this.fresh=s,this.order=o}static update(e,r){if(r.empty&&!e.some(s=>s.fresh))return e;let n=[],i=e.length?e[e.length-1].dir:It.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!r.touchesRange(o.from,o.to)&&n.push(new tm(r.mapPos(o.from,1),r.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return n}}function mC(t,e,r){for(let n=t.state.facet(e),i=n.length-1;i>=0;i--){let s=n[i],o=typeof s=="function"?s(t):s;o&&L1(o,r)}return r}const OX=Fe.mac?"mac":Fe.windows?"win":Fe.linux?"linux":"key";function LX(t,e){const r=t.split(/-(?!$)/);let n=r[r.length-1];n=="Space"&&(n=" ");let i,s,o,a;for(let l=0;l<r.length-1;++l){const c=r[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))i=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return i&&(n="Alt-"+n),s&&(n="Ctrl-"+n),a&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function _d(t,e,r){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),r!==!1&&e.shiftKey&&(t="Shift-"+t),t}const NX=uo.default(He.domEventHandlers({keydown(t,e){return b3(_3(e.state),t,e,"editor")}})),Ng=Ue.define({enables:NX}),gC=new WeakMap;function _3(t){let e=t.facet(Ng),r=gC.get(e);return r||gC.set(e,r=FX(e.reduce((n,i)=>n.concat(i),[]))),r}function MX(t,e,r){return b3(_3(t.state),e,t,r)}let Ls=null;const BX=4e3;function FX(t,e=OX){let r=Object.create(null),n=Object.create(null),i=(o,a)=>{let l=n[o];if(l==null)n[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,c,u)=>{var h,f;let d=r[o]||(r[o]=Object.create(null)),g=a.split(/ (?!$)/).map(p=>LX(p,e));for(let p=1;p<g.length;p++){let b=g.slice(0,p).join(" ");i(b,!0),d[b]||(d[b]={preventDefault:!0,stopPropagation:!1,run:[y=>{let v=Ls={view:y,prefix:b,scope:o};return setTimeout(()=>{Ls==v&&(Ls=null)},BX),!0}]})}let _=g.join(" ");i(_,!1);let m=d[_]||(d[_]={preventDefault:!1,stopPropagation:!1,run:((f=(h=d._any)===null||h===void 0?void 0:h.run)===null||f===void 0?void 0:f.slice())||[]});l&&m.run.push(l),c&&(m.preventDefault=!0),u&&(m.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let u=r[c]||(r[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:h}=o;for(let f in u)u[f].run.push(d=>h(d,K1))}let l=o[e]||o.key;if(l)for(let c of a)s(c,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(c,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return r}let K1=null;function b3(t,e,r,n){K1=e;let i=cY(e),s=Wr(i,0),o=Un(s)==i.length&&i!=" ",a="",l=!1,c=!1,u=!1;Ls&&Ls.view==r&&Ls.scope==n&&(a=Ls.prefix+" ",o3.indexOf(e.keyCode)<0&&(c=!0,Ls=null));let h=new Set,f=m=>{if(m){for(let p of m.run)if(!h.has(p)&&(h.add(p),p(r)))return m.stopPropagation&&(u=!0),!0;m.preventDefault&&(m.stopPropagation&&(u=!0),c=!0)}return!1},d=t[n],g,_;return d&&(f(d[a+_d(i,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Fe.windows&&e.ctrlKey&&e.altKey)&&(g=to[e.keyCode])&&g!=i?(f(d[a+_d(g,e,!0)])||e.shiftKey&&(_=Wu[e.keyCode])!=i&&_!=g&&f(d[a+_d(_,e,!1)]))&&(l=!0):o&&e.shiftKey&&f(d[a+_d(i,e,!0)])&&(l=!0),!l&&f(d._any)&&(l=!0)),c&&(l=!0),l&&u&&e.stopPropagation(),K1=null,l}class Xh{constructor(e,r,n,i,s){this.className=e,this.left=r,this.top=n,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,r){return r.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,r,n){if(n.empty){let i=e.coordsAtPos(n.head,n.assoc||1);if(!i)return[];let s=y3(e);return[new Xh(r,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return HX(e,r,n)}}function y3(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==It.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function _C(t,e,r,n){let i=t.coordsAtPos(e,r*2);if(!i)return n;let s=t.dom.getBoundingClientRect(),o=(i.top+i.bottom)/2,a=t.posAtCoords({x:s.left+1,y:o}),l=t.posAtCoords({x:s.right-1,y:o});return a==null||l==null?n:{from:Math.max(n.from,Math.min(a,l)),to:Math.min(n.to,Math.max(a,l))}}function HX(t,e,r){if(r.to<=t.viewport.from||r.from>=t.viewport.to)return[];let n=Math.max(r.from,t.viewport.from),i=Math.min(r.to,t.viewport.to),s=t.textDirection==It.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=y3(t),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),h=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),f=a.right-(u?parseInt(u.paddingRight):0),d=z1(t,n),g=z1(t,i),_=d.type==Lr.Text?d:null,m=g.type==Lr.Text?g:null;if(_&&(t.lineWrapping||d.widgetLineBreaks)&&(_=_C(t,n,1,_)),m&&(t.lineWrapping||g.widgetLineBreaks)&&(m=_C(t,i,-1,m)),_&&m&&_.from==m.from&&_.to==m.to)return b(y(r.from,r.to,_));{let w=_?y(r.from,null,_):v(d,!1),S=m?y(null,r.to,m):v(g,!0),x=[];return(_||d).to<(m||g).from-(_&&m?1:0)||d.widgetLineBreaks>1&&w.bottom+t.defaultLineHeight/2<S.top?x.push(p(h,w.bottom,f,S.top)):w.bottom<S.top&&t.elementAtHeight((w.bottom+S.top)/2).type==Lr.Text&&(w.bottom=S.top=(w.bottom+S.top)/2),b(w).concat(x).concat(b(S))}function p(w,S,x,E){return new Xh(e,w-l.left,S-l.top-.01,x-w,E-S+.01)}function b({top:w,bottom:S,horizontal:x}){let E=[];for(let T=0;T<x.length;T+=2)E.push(p(x[T],w,x[T+1],S));return E}function y(w,S,x){let E=1e9,T=-1e9,k=[];function B(A,$,te,Q,ee){let L=t.coordsAtPos(A,A==x.to?-2:2),M=t.coordsAtPos(te,te==x.from?2:-2);!L||!M||(E=Math.min(L.top,M.top,E),T=Math.max(L.bottom,M.bottom,T),ee==It.LTR?k.push(s&&$?h:L.left,s&&Q?f:M.right):k.push(!s&&Q?h:M.left,!s&&$?f:L.right))}let P=w??x.from,O=S??x.to;for(let A of t.visibleRanges)if(A.to>P&&A.from<O)for(let $=Math.max(A.from,P),te=Math.min(A.to,O);;){let Q=t.state.doc.lineAt($);for(let ee of t.bidiSpans(Q)){let L=ee.from+Q.from,M=ee.to+Q.from;if(L>=te)break;M>$&&B(Math.max(L,$),w==null&&L<=P,Math.min(M,te),S==null&&M>=O,ee.dir)}if($=Q.to+1,$>=te)break}return k.length==0&&B(P,w==null,O,S==null,t.textDirection),{top:E,bottom:T,horizontal:k}}function v(w,S){let x=a.top+(S?w.top:w.bottom);return{top:x,bottom:x,horizontal:[]}}}function UX(t,e){return t.constructor==e.constructor&&t.eq(e)}class jX{constructor(e,r){this.view=e,this.layer=r,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),r.above&&this.dom.classList.add("cm-layer-above"),r.class&&this.dom.classList.add(r.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),r.mount&&r.mount(this.dom,e)}update(e){e.startState.facet(hp)!=e.state.facet(hp)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let r=0,n=e.facet(hp);for(;r<n.length&&n[r]!=this.layer;)r++;this.dom.style.zIndex=String((this.layer.above?150:-1)-r)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:r}=this.view;(e!=this.scaleX||r!=this.scaleY)&&(this.scaleX=e,this.scaleY=r,this.dom.style.transform=`scale(${1/e}, ${1/r})`)}draw(e){if(e.length!=this.drawn.length||e.some((r,n)=>!UX(r,this.drawn[n]))){let r=this.dom.firstChild,n=0;for(let i of e)i.update&&r&&i.constructor&&this.drawn[n].constructor&&i.update(r,this.drawn[n])?(r=r.nextSibling,n++):this.dom.insertBefore(i.draw(),r);for(;r;){let i=r.nextSibling;r.remove(),r=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const hp=Ue.define();function v3(t){return[mr.define(e=>new jX(e,t)),hp.of(t)]}const w3=!Fe.ios,Yu=Ue.define({combine(t){return wa(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,r)=>Math.min(e,r),drawRangeCursor:(e,r)=>e||r})}});function $X(t={}){return[Yu.of(t),zX,VX,WX,YL.of(!0)]}function E3(t){return t.startState.facet(Yu)!=t.state.facet(Yu)}const zX=v3({above:!0,markers(t){let{state:e}=t,r=e.facet(Yu),n=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty?!s||w3:r.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=i.empty?i:ke.cursor(i.head,i.head>i.anchor?-1:1);for(let l of Xh.forRange(t,o,a))n.push(l)}}return n},update(t,e){t.transactions.some(n=>n.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let r=E3(t);return r&&bC(t.state,e),t.docChanged||t.selectionSet||r},mount(t,e){bC(e.state,t)},class:"cm-cursorLayer"});function bC(t,e){e.style.animationDuration=t.facet(Yu).cursorBlinkRate+"ms"}const VX=v3({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:Xh.forRange(t,"cm-selectionBackground",e)).reduce((e,r)=>e.concat(r))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||E3(t)},class:"cm-selectionLayer"}),Y1={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};w3&&(Y1[".cm-line"].caretColor=Y1[".cm-content"].caretColor="transparent !important");const WX=uo.highest(He.theme(Y1)),S3=Je.define({map(t,e){return t==null?null:e.mapPos(t)}}),tu=ar.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((r,n)=>n.is(S3)?n.value:r,t)}}),GX=mr.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let r=t.state.field(tu);r==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(tu)!=r||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(tu),r=e!=null&&t.coordsAtPos(e);if(!r)return null;let n=t.scrollDOM.getBoundingClientRect();return{left:r.left-n.left+t.scrollDOM.scrollLeft*t.scaleX,top:r.top-n.top+t.scrollDOM.scrollTop*t.scaleY,height:r.bottom-r.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:r}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/r+"px",this.cursor.style.height=t.height/r+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(tu)!=t&&this.view.dispatch({effects:S3.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function qX(){return[tu,GX]}const yC=mr.fromClass(class{constructor(){this.height=1e3,this.attrs={style:"padding-bottom: 1000px"}}update(t){let{view:e}=t,r=e.viewState.editorHeight-e.defaultLineHeight-e.documentPadding.top-.5;r>=0&&r!=this.height&&(this.height=r,this.attrs={style:`padding-bottom: ${r}px`})}});function KX(){return[yC,Og.of(t=>{var e;return((e=t.plugin(yC))===null||e===void 0?void 0:e.attrs)||null})]}function YX(){return QX}const XX=it.line({class:"cm-activeLine"}),QX=mr.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,r=[];for(let n of t.state.selection.ranges){let i=t.lineBlockAt(n.head);i.from>e&&(r.push(XX.range(i.from)),e=i.from)}return it.set(r)}},{decorations:t=>t.decorations}),Lc="-10000px";class ZX{constructor(e,r,n,i){this.facet=r,this.createTooltipView=n,this.removeTooltipView=i,this.input=e.state.facet(r),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=n(o,s))}update(e,r){var n;let i=e.state.facet(this.facet),s=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=r?[]:null;for(let l=0;l<s.length;l++){let c=s[l],u=-1;if(c){for(let h=0;h<this.tooltips.length;h++){let f=this.tooltips[h];f&&f.create==c.create&&(u=h)}if(u<0)o[l]=this.createTooltipView(c,l?o[l-1]:null),a&&(a[l]=!!c.above);else{let h=o[l]=this.tooltipViews[u];a&&(a[l]=r[u]),h.update&&h.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(n=l.destroy)===null||n===void 0||n.call(l));return r&&(a.forEach((l,c)=>r[c]=l),r.length=a.length),this.input=i,this.tooltips=s,this.tooltipViews=o,!0}}function JX(t={}){return fp.of(t)}function eQ(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const fp=Ue.define({combine:t=>{var e,r,n;return{position:Fe.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((r=t.find(i=>i.parent))===null||r===void 0?void 0:r.parent)||null,tooltipSpace:((n=t.find(i=>i.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||eQ}}}),vC=new WeakMap,x3=mr.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(fp);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new ZX(t,Fw,(r,n)=>this.createTooltip(r,n),r=>{this.resizeObserver&&this.resizeObserver.unobserve(r.dom),r.dom.remove()}),this.above=this.manager.tooltips.map(r=>!!r.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(r=>{Date.now()>this.lastTransaction-50&&r.length>0&&r[r.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let r=e||t.geometryChanged,n=t.state.facet(fp);if(n.position!=this.position&&!this.madeAbsolute){this.position=n.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;r=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);r=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);r&&this.maybeMeasure()}createTooltip(t,e){let r=t.create(this.view),n=e?e.dom:null;if(r.dom.classList.add("cm-tooltip"),t.arrow&&!r.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",r.dom.appendChild(i)}return r.dom.style.position=this.position,r.dom.style.top=Lc,r.dom.style.left="0px",this.container.insertBefore(r.dom,n),r.mount&&r.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(r.dom),r}destroy(){var t,e,r;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(t=n.destroy)===null||t===void 0||t.call(n);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(r=this.intersectionObserver)===null||r===void 0||r.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,r=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(Fe.gecko)r=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==Lc&&s.style.left=="0px"){let o=s.getBoundingClientRect();r=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(r||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let n=this.view.scrollDOM.getBoundingClientRect(),i=Lw(this.view);return{visible:{left:n.left+i.left,top:n.top+i.top,right:n.right-i.right,bottom:n.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(fp).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:r}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:r,space:n,scaleX:i,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,h=t.pos[a],f=t.size[a];if(!h||l.clip!==!1&&(h.bottom<=Math.max(r.top,n.top)||h.top>=Math.min(r.bottom,n.bottom)||h.right<Math.max(r.left,n.left)-.1||h.left>Math.min(r.right,n.right)+.1)){u.style.top=Lc;continue}let d=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,g=d?7:0,_=f.right-f.left,m=(e=vC.get(c))!==null&&e!==void 0?e:f.bottom-f.top,p=c.offset||rQ,b=this.view.textDirection==It.LTR,y=f.width>n.right-n.left?b?n.left:n.right-f.width:b?Math.max(n.left,Math.min(h.left-(d?14:0)+p.x,n.right-_)):Math.min(Math.max(n.left,h.left-_+(d?14:0)-p.x),n.right-_),v=this.above[a];!l.strictSide&&(v?h.top-m-g-p.y<n.top:h.bottom+m+g+p.y>n.bottom)&&v==n.bottom-h.bottom>h.top-n.top&&(v=this.above[a]=!v);let w=(v?h.top-n.top:n.bottom-h.bottom)-g;if(w<m&&c.resize!==!1){if(w<this.view.defaultLineHeight){u.style.top=Lc;continue}vC.set(c,m),u.style.height=(m=w)/s+"px"}else u.style.height&&(u.style.height="");let S=v?h.top-m-g-p.y:h.bottom+g+p.y,x=y+_;if(c.overlap!==!0)for(let E of o)E.left<x&&E.right>y&&E.top<S+m&&E.bottom>S&&(S=v?E.top-m-2-g:E.bottom+g+2);if(this.position=="absolute"?(u.style.top=(S-t.parent.top)/s+"px",u.style.left=(y-t.parent.left)/i+"px"):(u.style.top=S/s+"px",u.style.left=y/i+"px"),d){let E=h.left+(b?p.x:-p.x)-(y+14-7);d.style.left=E/i+"px"}c.overlap!==!0&&o.push({left:y,top:S,right:x,bottom:S+m}),u.classList.toggle("cm-tooltip-above",v),u.classList.toggle("cm-tooltip-below",!v),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Lc}},{eventObservers:{scroll(){this.maybeMeasure()}}}),tQ=He.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),rQ={x:0,y:0},Fw=Ue.define({enables:[x3,tQ]});function T3(t,e){let r=t.plugin(x3);if(!r)return null;let n=r.manager.tooltips.indexOf(e);return n<0?null:r.manager.tooltipViews[n]}const wC=Ue.define({combine(t){let e,r;for(let n of t)e=e||n.topContainer,r=r||n.bottomContainer;return{topContainer:e,bottomContainer:r}}});function rm(t,e){let r=t.plugin(C3),n=r?r.specs.indexOf(e):-1;return n>-1?r.panels[n]:null}const C3=mr.fromClass(class{constructor(t){this.input=t.state.facet(nm),this.specs=this.input.filter(r=>r),this.panels=this.specs.map(r=>r(t));let e=t.state.facet(wC);this.top=new bd(t,!0,e.topContainer),this.bottom=new bd(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(r=>r.top)),this.bottom.sync(this.panels.filter(r=>!r.top));for(let r of this.panels)r.dom.classList.add("cm-panel"),r.mount&&r.mount()}update(t){let e=t.state.facet(wC);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new bd(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new bd(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let r=t.state.facet(nm);if(r!=this.input){let n=r.filter(l=>l),i=[],s=[],o=[],a=[];for(let l of n){let c=this.specs.indexOf(l),u;c<0?(u=l(t.view),a.push(u)):(u=this.panels[c],u.update&&u.update(t)),i.push(u),(u.top?s:o).push(u)}this.specs=n,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let n of this.panels)n.update&&n.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>He.scrollMargins.of(e=>{let r=e.plugin(t);return r&&{top:r.top.scrollMargin(),bottom:r.bottom.scrollMargin()}})});let bd=class{constructor(e,r,n){this.view=e,this.top=r,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let r of this.panels)r.destroy&&e.indexOf(r)<0&&r.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let r=this.container||this.view.dom;r.insertBefore(this.dom,this.top?r.firstChild:null)}let e=this.dom.firstChild;for(let r of this.panels)if(r.dom.parentNode==this.dom){for(;e!=r.dom;)e=EC(e);e=e.nextSibling}else this.dom.insertBefore(r.dom,e);for(;e;)e=EC(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}};function EC(t){let e=t.nextSibling;return t.remove(),e}const nm=Ue.define({enables:C3});class hs extends ia{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}hs.prototype.elementClass="";hs.prototype.toDOM=void 0;hs.prototype.mapMode=wr.TrackBefore;hs.prototype.startSide=hs.prototype.endSide=-1;hs.prototype.point=!0;const dp=Ue.define(),nQ=Ue.define(),iQ={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>ut.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},_u=Ue.define();function sQ(t){return[k3(),_u.of(Object.assign(Object.assign({},iQ),t))]}const SC=Ue.define({combine:t=>t.some(e=>e)});function k3(t){return[oQ]}const oQ=mr.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(_u).map(e=>new TC(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(SC),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,r=t.view.viewport,n=Math.min(e.to,r.to)-Math.max(e.from,r.from);this.syncGutters(n<(r.to-r.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(SC)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let r=ut.iter(this.view.state.facet(dp),this.view.viewport.from),n=[],i=this.gutters.map(s=>new aQ(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(n.length&&(n=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==Lr.Text&&o){X1(r,n,a.from);for(let l of i)l.line(this.view,a,n);o=!1}else if(a.widget)for(let l of i)l.widget(this.view,a)}else if(s.type==Lr.Text){X1(r,n,s.from);for(let o of i)o.line(this.view,s,n)}else if(s.widget)for(let o of i)o.widget(this.view,s);for(let s of i)s.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(_u),r=t.state.facet(_u),n=t.docChanged||t.heightChanged||t.viewportChanged||!ut.eq(t.startState.facet(dp),t.state.facet(dp),t.view.viewport.from,t.view.viewport.to);if(e==r)for(let i of this.gutters)i.update(t)&&(n=!0);else{n=!0;let i=[];for(let s of r){let o=e.indexOf(s);o<0?i.push(new TC(this.view,s)):(this.gutters[o].update(t),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)this.dom.appendChild(s.dom);this.gutters=i}return n}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>He.scrollMargins.of(e=>{let r=e.plugin(t);return!r||r.gutters.length==0||!r.fixed?null:e.textDirection==It.LTR?{left:r.dom.offsetWidth*e.scaleX}:{right:r.dom.offsetWidth*e.scaleX}})});function xC(t){return Array.isArray(t)?t:[t]}function X1(t,e,r){for(;t.value&&t.from<=r;)t.from==r&&e.push(t.value),t.next()}class aQ{constructor(e,r,n){this.gutter=e,this.height=n,this.i=0,this.cursor=ut.iter(e.markers,r.from)}addElement(e,r,n){let{gutter:i}=this,s=(r.top-this.height)/e.scaleY,o=r.height/e.scaleY;if(this.i==i.elements.length){let a=new A3(e,o,s,n);i.elements.push(a),i.dom.appendChild(a.dom)}else i.elements[this.i].update(e,o,s,n);this.height=r.bottom,this.i++}line(e,r,n){let i=[];X1(this.cursor,i,r.from),n.length&&(i=i.concat(n));let s=this.gutter.config.lineMarker(e,r,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,r,i)}widget(e,r){let n=this.gutter.config.widgetMarker(e,r.widget,r),i=n?[n]:null;for(let s of e.state.facet(nQ)){let o=s(e,r.widget,r);o&&(i||(i=[])).push(o)}i&&this.addElement(e,r,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let r=e.elements.pop();e.dom.removeChild(r.dom),r.destroy()}}}class TC{constructor(e,r){this.view=e,this.config=r,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in r.domEventHandlers)this.dom.addEventListener(n,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=i.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);r.domEventHandlers[n](e,a,i)&&i.preventDefault()});this.markers=xC(r.markers(e)),r.initialSpacer&&(this.spacer=new A3(e,0,0,[r.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let r=this.markers;if(this.markers=xC(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let n=e.view.viewport;return!ut.eq(this.markers,r,n.from,n.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class A3{constructor(e,r,n,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,r,n,i)}update(e,r,n,i){this.height!=r&&(this.height=r,this.dom.style.height=r+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),lQ(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,r){let n="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<r.length?r[s++]:null,c=!1;if(l){let u=l.elementClass;u&&(n+=" "+u);for(let h=o;h<this.markers.length;h++)if(this.markers[h].compare(l)){a=h,c=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(i);let h=i.nextSibling;i.remove(),i=h}}if(!l)break;l.toDOM&&(c?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),c&&o++}this.dom.className=n,this.markers=r}destroy(){this.setMarkers(null,[])}}function lQ(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].compare(e[r]))return!1;return!0}const cQ=Ue.define(),uQ=Ue.define(),rl=Ue.define({combine(t){return wa(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,r){let n=Object.assign({},e);for(let i in r){let s=n[i],o=r[i];n[i]=s?(a,l,c)=>s(a,l,c)||o(a,l,c):o}return n}})}});class h_ extends hs{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function f_(t,e){return t.state.facet(rl).formatNumber(e,t.state)}const hQ=_u.compute([rl],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(cQ)},lineMarker(e,r,n){return n.some(i=>i.toDOM)?null:new h_(f_(e,e.state.doc.lineAt(r.from).number))},widgetMarker:(e,r,n)=>{for(let i of e.state.facet(uQ)){let s=i(e,r,n);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(rl)!=e.state.facet(rl),initialSpacer(e){return new h_(f_(e,CC(e.state.doc.lines)))},updateSpacer(e,r){let n=f_(r.view,CC(r.view.state.doc.lines));return n==e.number?e:new h_(n)},domEventHandlers:t.facet(rl).domEventHandlers}));function fQ(t={}){return[rl.of(t),k3(),hQ]}function CC(t){let e=9;for(;e<t;)e=e*10+9;return e}const dQ=new class extends hs{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},pQ=dp.compute(["selection"],t=>{let e=[],r=-1;for(let n of t.selection.ranges){let i=t.doc.lineAt(n.head).from;i>r&&(r=i,e.push(dQ.range(i)))}return ut.of(e)});function mQ(){return pQ}const gQ=1024;let _Q=0;class Tn{constructor(e,r){this.from=e,this.to=r}}class rt{constructor(e={}){this.id=_Q++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=en.match(e)),r=>{let n=e(r);return n===void 0?null:[this,n]}}}rt.closedBy=new rt({deserialize:t=>t.split(" ")});rt.openedBy=new rt({deserialize:t=>t.split(" ")});rt.group=new rt({deserialize:t=>t.split(" ")});rt.isolate=new rt({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});rt.contextHash=new rt({perNode:!0});rt.lookAhead=new rt({perNode:!0});rt.mounted=new rt({perNode:!0});class Xu{constructor(e,r,n){this.tree=e,this.overlay=r,this.parser=n}static get(e){return e&&e.props&&e.props[rt.mounted.id]}}const bQ=Object.create(null);class en{constructor(e,r,n,i=0){this.name=e,this.props=r,this.id=n,this.flags=i}static define(e){let r=e.props&&e.props.length?Object.create(null):bQ,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new en(e.name||"",r,e.id,n);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");r[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let r=this.prop(rt.group);return r?r.indexOf(e)>-1:!1}return this.id==e}static match(e){let r=Object.create(null);for(let n in e)for(let i of n.split(" "))r[i]=e[n];return n=>{for(let i=n.prop(rt.group),s=-1;s<(i?i.length:0);s++){let o=r[s<0?n.name:i[s]];if(o)return o}}}}en.none=new en("",Object.create(null),0,8);class R3{constructor(e){this.types=e;for(let r=0;r<e.length;r++)if(e[r].id!=r)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let r=[];for(let n of this.types){let i=null;for(let s of e){let o=s(n);o&&(i||(i=Object.assign({},n.props)),i[o[0].id]=o[1])}r.push(i?new en(n.name,i,n.id,n.flags):n)}return new R3(r)}}const yd=new WeakMap,kC=new WeakMap;var Lt;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Lt||(Lt={}));class Jt{constructor(e,r,n,i,s){if(this.type=e,this.children=r,this.positions=n,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=Xu.get(this);if(e&&!e.overlay)return e.tree.toString();let r="";for(let n of this.children){let i=n.toString();i&&(r&&(r+=","),r+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(r.length?"("+r+")":""):r}cursor(e=0){return new im(this.topNode,e)}cursorAt(e,r=0,n=0){let i=yd.get(this)||this.topNode,s=new im(i);return s.moveTo(e,r),yd.set(this,s._tree),s}get topNode(){return new Tr(this,0,0,null)}resolve(e,r=0){let n=Qu(yd.get(this)||this.topNode,e,r,!1);return yd.set(this,n),n}resolveInner(e,r=0){let n=Qu(kC.get(this)||this.topNode,e,r,!0);return kC.set(this,n),n}resolveStack(e,r=0){return wQ(this,e,r)}iterate(e){let{enter:r,leave:n,from:i=0,to:s=this.length}=e,o=e.mode||0,a=(o&Lt.IncludeAnonymous)>0;for(let l=this.cursor(o|Lt.IncludeAnonymous);;){let c=!1;if(l.from<=s&&l.to>=i&&(!a&&l.type.isAnonymous||r(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&n&&(a||!l.type.isAnonymous)&&n(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let r in this.props)e.push([+r,this.props[r]]);return e}balance(e={}){return this.children.length<=8?this:jw(en.none,this.children,this.positions,0,this.children.length,0,this.length,(r,n,i)=>new Jt(this.type,r,n,i,this.propValues),e.makeTree||((r,n,i)=>new Jt(en.none,r,n,i)))}static build(e){return EQ(e)}}Jt.empty=new Jt(en.none,[],[],0);class Hw{constructor(e,r){this.buffer=e,this.index=r}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Hw(this.buffer,this.index)}}class no{constructor(e,r,n){this.buffer=e,this.length=r,this.set=n}get type(){return en.none}toString(){let e=[];for(let r=0;r<this.buffer.length;)e.push(this.childString(r)),r=this.buffer[r+3];return e.join(",")}childString(e){let r=this.buffer[e],n=this.buffer[e+3],i=this.set.types[r],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,n==e)return s;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,r,n,i,s){let{buffer:o}=this,a=-1;for(let l=e;l!=r&&!(P3(s,i,o[l+1],o[l+2])&&(a=l,n>0));l=o[l+3]);return a}slice(e,r,n){let i=this.buffer,s=new Uint16Array(r-e),o=0;for(let a=e,l=0;a<r;){s[l++]=i[a++],s[l++]=i[a++]-n;let c=s[l++]=i[a++]-n;s[l++]=i[a++]-e,o=Math.max(o,c)}return new no(s,o,this.set)}}function P3(t,e,r,n){switch(t){case-2:return r<e;case-1:return n>=e&&r<e;case 0:return r<e&&n>e;case 1:return r<=e&&n>e;case 2:return n>e;case 4:return!0}}function Qu(t,e,r,n){for(var i;t.from==t.to||(r<1?t.from>=e:t.from>e)||(r>-1?t.to<=e:t.to<e);){let o=!n&&t instanceof Tr&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=n?0:Lt.IgnoreOverlays;if(n)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof Tr&&o.index<0&&((i=a.enter(e,r,s))===null||i===void 0?void 0:i.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,r,s);if(!o)return t;t=o}}class I3{cursor(e=0){return new im(this,e)}getChild(e,r=null,n=null){let i=AC(this,e,r,n);return i.length?i[0]:null}getChildren(e,r=null,n=null){return AC(this,e,r,n)}resolve(e,r=0){return Qu(this,e,r,!1)}resolveInner(e,r=0){return Qu(this,e,r,!0)}matchContext(e){return Q1(this.parent,e)}enterUnfinishedNodesBefore(e){let r=this.childBefore(e),n=this;for(;r;){let i=r.lastChild;if(!i||i.to!=r.to)break;i.type.isError&&i.from==i.to?(n=r,r=i.prevSibling):r=i}return n}get node(){return this}get next(){return this.parent}}class Tr extends I3{constructor(e,r,n,i){super(),this._tree=e,this.from=r,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,r,n,i,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=r>0?a.length:-1;e!=c;e+=r){let u=a[e],h=l[e]+o.from;if(P3(i,n,h,h+u.length)){if(u instanceof no){if(s&Lt.ExcludeBuffers)continue;let f=u.findChild(0,u.buffer.length,r,n-h,i);if(f>-1)return new Ti(new yQ(o,u,e,h),null,f)}else if(s&Lt.IncludeAnonymous||!u.type.isAnonymous||Uw(u)){let f;if(!(s&Lt.IgnoreMounts)&&(f=Xu.get(u))&&!f.overlay)return new Tr(f.tree,h,e,o);let d=new Tr(u,h,e,o);return s&Lt.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(r<0?u.children.length-1:0,r,n,i)}}}if(s&Lt.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+r:e=r<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,r,n=0){let i;if(!(n&Lt.IgnoreOverlays)&&(i=Xu.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:o,to:a}of i.overlay)if((r>0?o<=s:o<s)&&(r<0?a>=s:a>s))return new Tr(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,r,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function AC(t,e,r,n){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(r!=null){for(let o=!1;!o;)if(o=i.type.is(r),!i.nextSibling())return s}for(;;){if(n!=null&&i.type.is(n))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return n==null?s:[]}}function Q1(t,e,r=e.length-1){for(let n=t;r>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[r]&&e[r]!=n.name)return!1;r--}}return!0}class yQ{constructor(e,r,n,i){this.parent=e,this.buffer=r,this.index=n,this.start=i}}class Ti extends I3{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,r,n){super(),this.context=e,this._parent=r,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,r,n){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,r-this.context.start,n);return s<0?null:new Ti(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,r,n=0){if(n&Lt.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],r>0?1:-1,e-this.context.start,r);return s<0?null:new Ti(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,r=e.buffer[this.index+3];return r<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Ti(this.context,this._parent,r):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,r=this._parent?this._parent.index+4:0;return this.index==r?this.externalSibling(-1):new Ti(this.context,this._parent,e.findChild(r,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],r=[],{buffer:n}=this.context,i=this.index+4,s=n.buffer[this.index+3];if(s>i){let o=n.buffer[this.index+1];e.push(n.slice(i,s,o)),r.push(0)}return new Jt(this.type,e,r,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function D3(t){if(!t.length)return null;let e=0,r=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>r.from||o.to<r.to)&&(r=o,e=s)}let n=r instanceof Tr&&r.index<0?null:r.parent,i=t.slice();return n?i[e]=n:i.splice(e,1),new vQ(i,r)}class vQ{constructor(e,r){this.heads=e,this.node=r}get next(){return D3(this.heads)}}function wQ(t,e,r){let n=t.resolveInner(e,r),i=null;for(let s=n instanceof Tr?n:n.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(i||(i=[n])).push(o.resolve(e,r)),s=o}else{let o=Xu.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new Tr(o.tree,o.overlay[0].from+s.from,-1,s);(i||(i=[n])).push(Qu(a,e,r,!1))}}return i?D3(i):n}class im{get name(){return this.type.name}constructor(e,r=0){if(this.mode=r,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Tr)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,r){this.index=e;let{start:n,buffer:i}=this.buffer;return this.type=r||i.set.types[i.buffer[e]],this.from=n+i.buffer[e+1],this.to=n+i.buffer[e+2],!0}yield(e){return e?e instanceof Tr?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,r,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,r,n,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,r-this.buffer.start,n);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,r,n=this.mode){return this.buffer?n&Lt.ExcludeBuffers?!1:this.enterChild(1,e,r):this.yield(this._tree.enter(e,r,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Lt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Lt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:r}=this.buffer,n=this.stack.length-1;if(e<0){let i=n<0?0:this.stack[n]+4;if(this.index!=i)return this.yieldBuf(r.findChild(i,this.index,-1,0,4))}else{let i=r.buffer[this.index+3];if(i<(n<0?r.buffer.length:r.buffer[this.stack[n]+3]))return this.yieldBuf(i)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let r,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:r,parent:n}=i)}else({index:r,_parent:n}=this._tree);for(;n;{index:r,_parent:n}=n)if(r>-1)for(let s=r+e,o=e<0?-1:n._tree.children.length;s!=o;s+=e){let a=n._tree.children[s];if(this.mode&Lt.IncludeAnonymous||a instanceof no||!a.type.isAnonymous||Uw(a))return!1}return!0}move(e,r){if(r&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,r=0){for(;(this.from==this.to||(r<1?this.from>=e:this.from>e)||(r>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,r););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,r=null,n=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;r=o,n=s+1;break e}i=this.stack[--s]}for(let i=n;i<this.stack.length;i++)r=new Ti(this.buffer,r,this.stack[i]);return this.bufferNode=new Ti(this.buffer,r,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,r){for(let n=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&r&&r(this),i=this.type.isAnonymous,!n)return;if(this.nextSibling())break;this.parent(),n--,i=!0}}}matchContext(e){if(!this.buffer)return Q1(this.node.parent,e);let{buffer:r}=this.buffer,{types:n}=r.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return Q1(this._tree,e,i);let o=n[r.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function Uw(t){return t.children.some(e=>e instanceof no||!e.type.isAnonymous||Uw(e))}function EQ(t){var e;let{buffer:r,nodeSet:n,maxBufferLength:i=gQ,reused:s=[],minRepeatType:o=n.types.length}=t,a=Array.isArray(r)?new Hw(r,r.length):r,l=n.types,c=0,u=0;function h(w,S,x,E,T,k){let{id:B,start:P,end:O,size:A}=a,$=u,te=c;for(;A<0;)if(a.next(),A==-1){let U=s[B];x.push(U),E.push(P-w);return}else if(A==-3){c=B;return}else if(A==-4){u=B;return}else throw new RangeError(`Unrecognized record size: ${A}`);let Q=l[B],ee,L,M=P-w;if(O-P<=i&&(L=m(a.pos-S,T))){let U=new Uint16Array(L.size-L.skip),j=a.pos-L.size,H=U.length;for(;a.pos>j;)H=p(L.start,U,H);ee=new no(U,O-L.start,n),M=L.start-w}else{let U=a.pos-A;a.next();let j=[],H=[],Z=B>=o?B:-1,re=0,ge=O;for(;a.pos>U;)Z>=0&&a.id==Z&&a.size>=0?(a.end<=ge-i&&(g(j,H,P,re,a.end,ge,Z,$,te),re=j.length,ge=a.end),a.next()):k>2500?f(P,U,j,H):h(P,U,j,H,Z,k+1);if(Z>=0&&re>0&&re<j.length&&g(j,H,P,re,P,ge,Z,$,te),j.reverse(),H.reverse(),Z>-1&&re>0){let X=d(Q,te);ee=jw(Q,j,H,0,j.length,0,O-P,X,X)}else ee=_(Q,j,H,O-P,$-O,te)}x.push(ee),E.push(M)}function f(w,S,x,E){let T=[],k=0,B=-1;for(;a.pos>S;){let{id:P,start:O,end:A,size:$}=a;if($>4)a.next();else{if(B>-1&&O<B)break;B<0&&(B=A-i),T.push(P,O,A),k++,a.next()}}if(k){let P=new Uint16Array(k*4),O=T[T.length-2];for(let A=T.length-3,$=0;A>=0;A-=3)P[$++]=T[A],P[$++]=T[A+1]-O,P[$++]=T[A+2]-O,P[$++]=$;x.push(new no(P,T[2]-O,n)),E.push(O-w)}}function d(w,S){return(x,E,T)=>{let k=0,B=x.length-1,P,O;if(B>=0&&(P=x[B])instanceof Jt){if(!B&&P.type==w&&P.length==T)return P;(O=P.prop(rt.lookAhead))&&(k=E[B]+P.length+O)}return _(w,x,E,T,k,S)}}function g(w,S,x,E,T,k,B,P,O){let A=[],$=[];for(;w.length>E;)A.push(w.pop()),$.push(S.pop()+x-T);w.push(_(n.types[B],A,$,k-T,P-k,O)),S.push(T-x)}function _(w,S,x,E,T,k,B){if(k){let P=[rt.contextHash,k];B=B?[P].concat(B):[P]}if(T>25){let P=[rt.lookAhead,T];B=B?[P].concat(B):[P]}return new Jt(w,S,x,E,B)}function m(w,S){let x=a.fork(),E=0,T=0,k=0,B=x.end-i,P={size:0,start:0,skip:0};e:for(let O=x.pos-w;x.pos>O;){let A=x.size;if(x.id==S&&A>=0){P.size=E,P.start=T,P.skip=k,k+=4,E+=4,x.next();continue}let $=x.pos-A;if(A<0||$<O||x.start<B)break;let te=x.id>=o?4:0,Q=x.start;for(x.next();x.pos>$;){if(x.size<0)if(x.size==-3)te+=4;else break e;else x.id>=o&&(te+=4);x.next()}T=Q,E+=A,k+=te}return(S<0||E==w)&&(P.size=E,P.start=T,P.skip=k),P.size>4?P:void 0}function p(w,S,x){let{id:E,start:T,end:k,size:B}=a;if(a.next(),B>=0&&E<o){let P=x;if(B>4){let O=a.pos-(B-4);for(;a.pos>O;)x=p(w,S,x)}S[--x]=P,S[--x]=k-w,S[--x]=T-w,S[--x]=E}else B==-3?c=E:B==-4&&(u=E);return x}let b=[],y=[];for(;a.pos>0;)h(t.start||0,t.bufferStart||0,b,y,-1,0);let v=(e=t.length)!==null&&e!==void 0?e:b.length?y[0]+b[0].length:0;return new Jt(l[t.topID],b.reverse(),y.reverse(),v)}const RC=new WeakMap;function pp(t,e){if(!t.isAnonymous||e instanceof no||e.type!=t)return 1;let r=RC.get(e);if(r==null){r=1;for(let n of e.children){if(n.type!=t||!(n instanceof Jt)){r=1;break}r+=pp(t,n)}RC.set(e,r)}return r}function jw(t,e,r,n,i,s,o,a,l){let c=0;for(let g=n;g<i;g++)c+=pp(t,e[g]);let u=Math.ceil(c*1.5/8),h=[],f=[];function d(g,_,m,p,b){for(let y=m;y<p;){let v=y,w=_[y],S=pp(t,g[y]);for(y++;y<p;y++){let x=pp(t,g[y]);if(S+x>=u)break;S+=x}if(y==v+1){if(S>u){let x=g[v];d(x.children,x.positions,0,x.children.length,_[v]+b);continue}h.push(g[v])}else{let x=_[y-1]+g[y-1].length-w;h.push(jw(t,g,_,v,y,w,x,null,l))}f.push(w+b-s)}}return d(e,r,n,i,0),(a||l)(h,f,o)}class HSe{constructor(){this.map=new WeakMap}setBuffer(e,r,n){let i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(r,n)}getBuffer(e,r){let n=this.map.get(e);return n&&n.get(r)}set(e,r){e instanceof Ti?this.setBuffer(e.context.buffer,e.index,r):e instanceof Tr&&this.map.set(e.tree,r)}get(e){return e instanceof Ti?this.getBuffer(e.context.buffer,e.index):e instanceof Tr?this.map.get(e.tree):void 0}cursorSet(e,r){e.buffer?this.setBuffer(e.buffer.buffer,e.index,r):this.map.set(e.tree,r)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class is{constructor(e,r,n,i,s=!1,o=!1){this.from=e,this.to=r,this.tree=n,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,r=[],n=!1){let i=[new is(0,e.length,e,0,!1,n)];for(let s of r)s.to>e.length&&i.push(s);return i}static applyChanges(e,r,n=128){if(!r.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<r.length?r[a]:null,h=u?u.fromA:1e9;if(h-l>=n)for(;o&&o.from<h;){let f=o;if(l>=f.from||h<=f.to||c){let d=Math.max(f.from,l)-c,g=Math.min(f.to,h)-c;f=d>=g?null:new is(d,g,f.tree,f.offset+c,a>0,!!u)}if(f&&i.push(f),o.to>h)break;o=s<e.length?e[s++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return i}}let SQ=class{startParse(e,r,n){return typeof e=="string"&&(e=new xQ(e)),n=n?n.length?n.map(i=>new Tn(i.from,i.to)):[new Tn(0,0)]:[new Tn(0,e.length)],this.createParse(e,r||[],n)}parse(e,r,n){let i=this.startParse(e,r,n);for(;;){let s=i.advance();if(s)return s}}};class xQ{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,r){return this.string.slice(e,r)}}function jSe(t){return(e,r,n,i)=>new CQ(e,t,r,n,i)}class PC{constructor(e,r,n,i,s){this.parser=e,this.parse=r,this.overlay=n,this.target=i,this.from=s}}function IC(t){if(!t.length||t.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(t))}class TQ{constructor(e,r,n,i,s,o,a){this.parser=e,this.predicate=r,this.mounts=n,this.index=i,this.start=s,this.target=o,this.prev=a,this.depth=0,this.ranges=[]}}const Z1=new rt({perNode:!0});class CQ{constructor(e,r,n,i,s){this.nest=r,this.input=n,this.fragments=i,this.ranges=s,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let n=this.baseParse.advance();if(!n)return null;if(this.baseParse=null,this.baseTree=n,this.startInner(),this.stoppedAt!=null)for(let i of this.inner)i.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let n=this.baseTree;return this.stoppedAt!=null&&(n=new Jt(n.type,n.children,n.positions,n.length,n.propValues.concat([[Z1,this.stoppedAt]]))),n}let e=this.inner[this.innerDone],r=e.parse.advance();if(r){this.innerDone++;let n=Object.assign(Object.create(null),e.target.props);n[rt.mounted.id]=new Xu(r,e.overlay,e.parser),e.target.props=n}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let r=this.innerDone;r<this.inner.length;r++)this.inner[r].from<e&&(e=Math.min(e,this.inner[r].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let r=this.innerDone;r<this.inner.length;r++)this.inner[r].parse.stopAt(e)}startInner(){let e=new RQ(this.fragments),r=null,n=null,i=new im(new Tr(this.baseTree,this.ranges[0].from,0,null),Lt.IncludeAnonymous|Lt.IgnoreMounts);e:for(let s,o;;){let a=!0,l;if(this.stoppedAt!=null&&i.from>=this.stoppedAt)a=!1;else if(e.hasNode(i)){if(r){let c=r.mounts.find(u=>u.frag.from<=i.from&&u.frag.to>=i.to&&u.mount.overlay);if(c)for(let u of c.mount.overlay){let h=u.from+c.pos,f=u.to+c.pos;h>=i.from&&f<=i.to&&!r.ranges.some(d=>d.from<f&&d.to>h)&&r.ranges.push({from:h,to:f})}}a=!1}else if(n&&(o=kQ(n.ranges,i.from,i.to)))a=o!=2;else if(!i.type.isAnonymous&&(s=this.nest(i,this.input))&&(i.from<i.to||!s.overlay)){i.tree||AQ(i);let c=e.findMounts(i.from,s.parser);if(typeof s.overlay=="function")r=new TQ(s.parser,s.overlay,c,this.inner.length,i.from,i.tree,r);else{let u=LC(this.ranges,s.overlay||(i.from<i.to?[new Tn(i.from,i.to)]:[]));u.length&&IC(u),(u.length||!s.overlay)&&this.inner.push(new PC(s.parser,u.length?s.parser.startParse(this.input,NC(c,u),u):s.parser.startParse(""),s.overlay?s.overlay.map(h=>new Tn(h.from-i.from,h.to-i.from)):null,i.tree,u.length?u[0].from:i.from)),s.overlay?u.length&&(n={ranges:u,depth:0,prev:n}):a=!1}}else if(r&&(l=r.predicate(i))&&(l===!0&&(l=new Tn(i.from,i.to)),l.from<l.to)){let c=r.ranges.length-1;c>=0&&r.ranges[c].to==l.from?r.ranges[c]={from:r.ranges[c].from,to:l.to}:r.ranges.push(l)}if(a&&i.firstChild())r&&r.depth++,n&&n.depth++;else for(;!i.nextSibling();){if(!i.parent())break e;if(r&&!--r.depth){let c=LC(this.ranges,r.ranges);c.length&&(IC(c),this.inner.splice(r.index,0,new PC(r.parser,r.parser.startParse(this.input,NC(r.mounts,c),c),r.ranges.map(u=>new Tn(u.from-r.start,u.to-r.start)),r.target,c[0].from))),r=r.prev}n&&!--n.depth&&(n=n.prev)}}}}function kQ(t,e,r){for(let n of t){if(n.from>=r)break;if(n.to>e)return n.from<=e&&n.to>=r?2:1}return 0}function DC(t,e,r,n,i,s){if(e<r){let o=t.buffer[e+1];n.push(t.slice(e,r,o)),i.push(o-s)}}function AQ(t){let{node:e}=t,r=[],n=e.context.buffer;do r.push(t.index),t.parent();while(!t.tree);let i=t.tree,s=i.children.indexOf(n),o=i.children[s],a=o.buffer,l=[s];function c(u,h,f,d,g,_){let m=r[_],p=[],b=[];DC(o,u,m,p,b,d);let y=a[m+1],v=a[m+2];l.push(p.length);let w=_?c(m+4,a[m+3],o.set.types[a[m]],y,v-y,_-1):e.toTree();return p.push(w),b.push(y-d),DC(o,a[m+3],h,p,b,d),new Jt(f,p,b,g)}i.children[s]=c(0,a.length,en.none,0,o.length,r.length-1);for(let u of l){let h=t.tree.children[u],f=t.tree.positions[u];t.yield(new Tr(h,f+t.from,u,t._tree))}}class OC{constructor(e,r){this.offset=r,this.done=!1,this.cursor=e.cursor(Lt.IncludeAnonymous|Lt.IgnoreMounts)}moveTo(e){let{cursor:r}=this,n=e-this.offset;for(;!this.done&&r.from<n;)r.to>=e&&r.enter(n,1,Lt.IgnoreOverlays|Lt.ExcludeBuffers)||r.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let r=this.cursor.tree;;){if(r==e.tree)return!0;if(r.children.length&&r.positions[0]==0&&r.children[0]instanceof Jt)r=r.children[0];else break}return!1}}class RQ{constructor(e){var r;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let n=this.curFrag=e[0];this.curTo=(r=n.tree.prop(Z1))!==null&&r!==void 0?r:n.to,this.inner=new OC(n.tree,-n.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let r=this.curFrag=this.fragments[this.fragI];this.curTo=(e=r.tree.prop(Z1))!==null&&e!==void 0?e:r.to,this.inner=new OC(r.tree,-r.offset)}}findMounts(e,r){var n;let i=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let s=this.inner.cursor.node;s;s=s.parent){let o=(n=s.tree)===null||n===void 0?void 0:n.prop(rt.mounted);if(o&&o.parser==r)for(let a=this.fragI;a<this.fragments.length;a++){let l=this.fragments[a];if(l.from>=s.to)break;l.tree==this.curFrag.tree&&i.push({frag:l,pos:s.from-l.offset,mount:o})}}}return i}}function LC(t,e){let r=null,n=e;for(let i=1,s=0;i<t.length;i++){let o=t[i-1].to,a=t[i].from;for(;s<n.length;s++){let l=n[s];if(l.from>=a)break;l.to<=o||(r||(n=r=e.slice()),l.from<o?(r[s]=new Tn(l.from,o),l.to>a&&r.splice(s+1,0,new Tn(a,l.to))):l.to>a?r[s--]=new Tn(a,l.to):r.splice(s--,1))}}return n}function PQ(t,e,r,n){let i=0,s=0,o=!1,a=!1,l=-1e9,c=[];for(;;){let u=i==t.length?1e9:o?t[i].to:t[i].from,h=s==e.length?1e9:a?e[s].to:e[s].from;if(o!=a){let f=Math.max(l,r),d=Math.min(u,h,n);f<d&&c.push(new Tn(f,d))}if(l=Math.min(u,h),l==1e9)break;u==l&&(o?(o=!1,i++):o=!0),h==l&&(a?(a=!1,s++):a=!0)}return c}function NC(t,e){let r=[];for(let{pos:n,mount:i,frag:s}of t){let o=n+(i.overlay?i.overlay[0].from:0),a=o+i.tree.length,l=Math.max(s.from,o),c=Math.min(s.to,a);if(i.overlay){let u=i.overlay.map(f=>new Tn(f.from+n,f.to+n)),h=PQ(e,u,l,c);for(let f=0,d=l;;f++){let g=f==h.length,_=g?c:h[f].from;if(_>d&&r.push(new is(d,_,i.tree,-o,s.from>=d||s.openStart,s.to<=_||s.openEnd)),g)break;d=h[f].to}}else r.push(new is(l,c,i.tree,-o,s.from>=o||s.openStart,s.to<=a||s.openEnd))}return r}let IQ=0;class En{constructor(e,r,n,i){this.name=e,this.set=r,this.base=n,this.modified=i,this.id=IQ++}toString(){let{name:e}=this;for(let r of this.modified)r.name&&(e=`${r.name}(${e})`);return e}static define(e,r){let n=typeof e=="string"?e:"?";if(e instanceof En&&(r=e),r?.base)throw new Error("Can not derive from a modified tag");let i=new En(n,[],null,[]);if(i.set.push(i),r)for(let s of r.set)i.set.push(s);return i}static defineModifier(e){let r=new sm(e);return n=>n.modified.indexOf(r)>-1?n:sm.get(n.base||n,n.modified.concat(r).sort((i,s)=>i.id-s.id))}}let DQ=0;class sm{constructor(e){this.name=e,this.instances=[],this.id=DQ++}static get(e,r){if(!r.length)return e;let n=r[0].instances.find(a=>a.base==e&&OQ(r,a.modified));if(n)return n;let i=[],s=new En(e.name,i,e,r);for(let a of r)a.instances.push(s);let o=LQ(r);for(let a of e.set)if(!a.modified.length)for(let l of o)i.push(sm.get(a,l));return s}}function OQ(t,e){return t.length==e.length&&t.every((r,n)=>r==e[n])}function LQ(t){let e=[[]];for(let r=0;r<t.length;r++)for(let n=0,i=e.length;n<i;n++)e.push(e[n].concat(t[r]));return e.sort((r,n)=>n.length-r.length)}function NQ(t){let e=Object.create(null);for(let r in t){let n=t[r];Array.isArray(n)||(n=[n]);for(let i of r.split(" "))if(i){let s=[],o=2,a=i;for(let h=0;;){if(a=="..."&&h>0&&h+3==i.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!f)throw new RangeError("Invalid path: "+i);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),h+=f[0].length,h==i.length)break;let d=i[h++];if(h==i.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+i);a=i.slice(h)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+i);let u=new om(n,o,l>0?s.slice(0,l):null);e[c]=u.sort(e[c])}}return O3.add(e)}const O3=new rt;let om=class{constructor(e,r,n,i){this.tags=e,this.mode=r,this.context=n,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};om.empty=new om([],2,null);function L3(t,e){let r=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))r[s.tag.id]=s.class;else for(let o of s.tag)r[o.id]=s.class;let{scope:n,all:i=null}=e||{};return{style:s=>{let o=i;for(let a of s)for(let l of a.set){let c=r[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:n}}function MQ(t,e){let r=null;for(let n of t){let i=n.style(e);i&&(r=r?r+" "+i:i)}return r}function BQ(t,e,r,n=0,i=t.length){let s=new FQ(n,Array.isArray(e)?e:[e],r);s.highlightRange(t.cursor(),n,i,"",s.highlighters),s.flush(i)}class FQ{constructor(e,r,n){this.at=e,this.highlighters=r,this.span=n,this.class=""}startSpan(e,r){r!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=r)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,r,n,i,s){let{type:o,from:a,to:l}=e;if(a>=n||l<=r)return;o.isTop&&(s=this.highlighters.filter(d=>!d.scope||d.scope(o)));let c=i,u=HQ(e)||om.empty,h=MQ(s,u.tags);if(h&&(c&&(c+=" "),c+=h,u.mode==1&&(i+=(i?" ":"")+h)),this.startSpan(Math.max(r,a),c),u.opaque)return;let f=e.tree&&e.tree.prop(rt.mounted);if(f&&f.overlay){let d=e.node.enter(f.overlay[0].from+a,1),g=this.highlighters.filter(m=>!m.scope||m.scope(f.tree.type)),_=e.firstChild();for(let m=0,p=a;;m++){let b=m<f.overlay.length?f.overlay[m]:null,y=b?b.from+a:l,v=Math.max(r,p),w=Math.min(n,y);if(v<w&&_)for(;e.from<w&&(this.highlightRange(e,v,w,i,s),this.startSpan(Math.min(w,e.to),c),!(e.to>=y||!e.nextSibling())););if(!b||y>n)break;p=b.to+a,p>r&&(this.highlightRange(d.cursor(),Math.max(r,b.from+a),Math.min(n,p),"",g),this.startSpan(Math.min(n,p),c))}_&&e.parent()}else if(e.firstChild()){f&&(i="");do if(!(e.to<=r)){if(e.from>=n)break;this.highlightRange(e,r,n,i,s),this.startSpan(Math.min(n,e.to),c)}while(e.nextSibling());e.parent()}}}function HQ(t){let e=t.type.prop(O3);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const Me=En.define,vd=Me(),Ps=Me(),MC=Me(Ps),BC=Me(Ps),Is=Me(),wd=Me(Is),d_=Me(Is),ui=Me(),go=Me(ui),ni=Me(),ii=Me(),J1=Me(),Nc=Me(J1),Ed=Me(),ce={comment:vd,lineComment:Me(vd),blockComment:Me(vd),docComment:Me(vd),name:Ps,variableName:Me(Ps),typeName:MC,tagName:Me(MC),propertyName:BC,attributeName:Me(BC),className:Me(Ps),labelName:Me(Ps),namespace:Me(Ps),macroName:Me(Ps),literal:Is,string:wd,docString:Me(wd),character:Me(wd),attributeValue:Me(wd),number:d_,integer:Me(d_),float:Me(d_),bool:Me(Is),regexp:Me(Is),escape:Me(Is),color:Me(Is),url:Me(Is),keyword:ni,self:Me(ni),null:Me(ni),atom:Me(ni),unit:Me(ni),modifier:Me(ni),operatorKeyword:Me(ni),controlKeyword:Me(ni),definitionKeyword:Me(ni),moduleKeyword:Me(ni),operator:ii,derefOperator:Me(ii),arithmeticOperator:Me(ii),logicOperator:Me(ii),bitwiseOperator:Me(ii),compareOperator:Me(ii),updateOperator:Me(ii),definitionOperator:Me(ii),typeOperator:Me(ii),controlOperator:Me(ii),punctuation:J1,separator:Me(J1),bracket:Nc,angleBracket:Me(Nc),squareBracket:Me(Nc),paren:Me(Nc),brace:Me(Nc),content:ui,heading:go,heading1:Me(go),heading2:Me(go),heading3:Me(go),heading4:Me(go),heading5:Me(go),heading6:Me(go),contentSeparator:Me(ui),list:Me(ui),quote:Me(ui),emphasis:Me(ui),strong:Me(ui),link:Me(ui),monospace:Me(ui),strikethrough:Me(ui),inserted:Me(),deleted:Me(),changed:Me(),invalid:Me(),meta:Ed,documentMeta:Me(Ed),annotation:Me(Ed),processingInstruction:Me(Ed),definition:En.defineModifier("definition"),constant:En.defineModifier("constant"),function:En.defineModifier("function"),standard:En.defineModifier("standard"),local:En.defineModifier("local"),special:En.defineModifier("special")};for(let t in ce){let e=ce[t];e instanceof En&&(e.name=t)}L3([{tag:ce.link,class:"tok-link"},{tag:ce.heading,class:"tok-heading"},{tag:ce.emphasis,class:"tok-emphasis"},{tag:ce.strong,class:"tok-strong"},{tag:ce.keyword,class:"tok-keyword"},{tag:ce.atom,class:"tok-atom"},{tag:ce.bool,class:"tok-bool"},{tag:ce.url,class:"tok-url"},{tag:ce.labelName,class:"tok-labelName"},{tag:ce.inserted,class:"tok-inserted"},{tag:ce.deleted,class:"tok-deleted"},{tag:ce.literal,class:"tok-literal"},{tag:ce.string,class:"tok-string"},{tag:ce.number,class:"tok-number"},{tag:[ce.regexp,ce.escape,ce.special(ce.string)],class:"tok-string2"},{tag:ce.variableName,class:"tok-variableName"},{tag:ce.local(ce.variableName),class:"tok-variableName tok-local"},{tag:ce.definition(ce.variableName),class:"tok-variableName tok-definition"},{tag:ce.special(ce.variableName),class:"tok-variableName2"},{tag:ce.definition(ce.propertyName),class:"tok-propertyName tok-definition"},{tag:ce.typeName,class:"tok-typeName"},{tag:ce.namespace,class:"tok-namespace"},{tag:ce.className,class:"tok-className"},{tag:ce.macroName,class:"tok-macroName"},{tag:ce.propertyName,class:"tok-propertyName"},{tag:ce.operator,class:"tok-operator"},{tag:ce.comment,class:"tok-comment"},{tag:ce.meta,class:"tok-meta"},{tag:ce.invalid,class:"tok-invalid"},{tag:ce.punctuation,class:"tok-punctuation"}]);var p_;const nl=new rt;function UQ(t){return Ue.define({combine:t?e=>e.concat(t):void 0})}const jQ=new rt;class jn{constructor(e,r,n=[],i=""){this.data=e,this.name=i,ot.prototype.hasOwnProperty("tree")||Object.defineProperty(ot.prototype,"tree",{get(){return gr(this)}}),this.parser=r,this.extension=[io.of(this),ot.languageData.of((s,o,a)=>{let l=FC(s,o,a),c=l.type.prop(nl);if(!c)return[];let u=s.facet(c),h=l.type.prop(jQ);if(h){let f=l.resolve(o-l.from,a);for(let d of h)if(d.test(f,s)){let g=s.facet(d.facet);return d.type=="replace"?g:g.concat(u)}}return u})].concat(n)}isActiveAt(e,r,n=-1){return FC(e,r,n).type.prop(nl)==this.data}findRegions(e){let r=e.facet(io);if(r?.data==this.data)return[{from:0,to:e.doc.length}];if(!r||!r.allowsNesting)return[];let n=[],i=(s,o)=>{if(s.prop(nl)==this.data){n.push({from:o,to:o+s.length});return}let a=s.prop(rt.mounted);if(a){if(a.tree.prop(nl)==this.data){if(a.overlay)for(let l of a.overlay)n.push({from:l.from+o,to:l.to+o});else n.push({from:o,to:o+s.length});return}else if(a.overlay){let l=n.length;if(i(a.tree,a.overlay[0].from+o),n.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof Jt&&i(c,s.positions[l]+o)}};return i(gr(e),0),n}get allowsNesting(){return!0}}jn.setState=Je.define();function FC(t,e,r){let n=t.facet(io),i=gr(t).topNode;if(!n||n.allowsNesting)for(let s=i;s;s=s.enter(e,r,Lt.ExcludeBuffers))s.type.isTop&&(i=s);return i}class ey extends jn{constructor(e,r,n){super(e,r,[],n),this.parser=r}static define(e){let r=UQ(e.languageData);return new ey(r,e.parser.configure({props:[nl.add(n=>n.isTop?r:void 0)]}),e.name)}configure(e,r){return new ey(this.data,this.parser.configure(e),r||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function gr(t){let e=t.field(jn.state,!1);return e?e.tree:Jt.empty}class $Q{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,r){let n=this.cursorPos-this.string.length;return e<n||r>=this.cursorPos?this.doc.sliceString(e,r):this.string.slice(e-n,r-n)}}let Mc=null;class am{constructor(e,r,n=[],i,s,o,a,l){this.parser=e,this.state=r,this.fragments=n,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,r,n){return new am(e,r,[],Jt.empty,0,n,[],null)}startParse(){return this.parser.startParse(new $Q(this.state.doc),this.fragments)}work(e,r){return r!=null&&r>=this.state.doc.length&&(r=void 0),this.tree!=Jt.empty&&this.isDone(r??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),r!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>r)&&r<this.state.doc.length&&this.parse.stopAt(r);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(is.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(r??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,r;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(r=this.parse.advance()););}),this.treeLen=e,this.tree=r,this.fragments=this.withoutTempSkipped(is.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let r=Mc;Mc=this;try{return e()}finally{Mc=r}}withoutTempSkipped(e){for(let r;r=this.tempSkipped.pop();)e=HC(e,r.from,r.to);return e}changes(e,r){let{fragments:n,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,h,f)=>l.push({fromA:c,toA:u,fromB:h,toB:f})),n=is.applyChanges(n,l),i=Jt.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),h=e.mapPos(c.to,-1);u<h&&a.push({from:u,to:h})}}}return new am(this.parser,r,n,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let r=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:i,to:s}=this.skipped[n];i<e.to&&s>e.from&&(this.fragments=HC(this.fragments,i,s),this.skipped.splice(n--,1))}return this.skipped.length>=r?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,r){this.skipped.push({from:e,to:r})}static getSkippingParser(e){return new class extends SQ{createParse(r,n,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let l=Mc;if(l){for(let c of i)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new Jt(en.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let r=this.fragments;return this.treeLen>=e&&r.length&&r[0].from==0&&r[0].to>=e}static get(){return Mc}}function HC(t,e,r){return is.applyChanges(t,[{fromA:e,toA:r,fromB:e,toB:r}])}class Fl{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let r=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),r.viewport.to);return r.work(20,n)||r.takeTree(),new Fl(r)}static init(e){let r=Math.min(3e3,e.doc.length),n=am.create(e.facet(io).parser,e,{from:0,to:r});return n.work(20,r)||n.takeTree(),new Fl(n)}}jn.state=ar.define({create:Fl.init,update(t,e){for(let r of e.effects)if(r.is(jn.setState))return r.value;return e.startState.facet(io)!=e.state.facet(io)?Fl.init(e.state):t.apply(e)}});let N3=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(N3=t=>{let e=-1,r=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(r):cancelIdleCallback(e)});const m_=typeof navigator<"u"&&(!((p_=navigator.scheduling)===null||p_===void 0)&&p_.isInputPending)?()=>navigator.scheduling.isInputPending():null,zQ=mr.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let r=this.view.state.field(jn.state).context;(r.updateViewport(e.view.viewport)||this.view.viewport.to>r.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(r)}scheduleWork(){if(this.working)return;let{state:e}=this.view,r=e.field(jn.state);(r.tree!=r.context.tree||!r.context.isDone(e.doc.length))&&(this.working=N3(this.work))}work(e){this.working=null;let r=Date.now();if(this.chunkEnd<r&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=r+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:i}}=this.view,s=n.field(jn.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!m_?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&n.doc.length>i+1e3,l=s.context.work(()=>m_&&m_()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-r,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:jn.setState.of(new Fl(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(r=>cn(this.view.state,r)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),io=Ue.define({combine(t){return t.length?t[0]:null},enables:t=>[jn.state,zQ,He.contentAttributes.compute([t],e=>{let r=e.facet(t);return r&&r.name?{"data-language":r.name}:{}})]});class VSe{constructor(e,r=[]){this.language=e,this.support=r,this.extension=[e,r]}}class lr{constructor(e,r,n,i,s,o=void 0){this.name=e,this.alias=r,this.extensions=n,this.filename=i,this.loadFunc=s,this.support=o,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:r,support:n}=e;if(!r){if(!n)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");r=()=>Promise.resolve(n)}return new lr(e.name,(e.alias||[]).concat(e.name).map(i=>i.toLowerCase()),e.extensions||[],e.filename,r,n)}static matchFilename(e,r){for(let i of e)if(i.filename&&i.filename.test(r))return i;let n=/\.([^.]+)$/.exec(r);if(n){for(let i of e)if(i.extensions.indexOf(n[1])>-1)return i}return null}static matchLanguageName(e,r,n=!0){r=r.toLowerCase();for(let i of e)if(i.alias.some(s=>s==r))return i;if(n)for(let i of e)for(let s of i.alias){let o=r.indexOf(s);if(o>-1&&(s.length>2||!/\w/.test(r[o-1])&&!/\w/.test(r[o+s.length])))return i}return null}}const VQ=Ue.define(),sc=Ue.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(r=>r!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function lm(t){let e=t.facet(sc);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Zu(t,e){let r="",n=t.tabSize,i=t.facet(sc)[0];if(i=="	"){for(;e>=n;)r+="	",e-=n;i=" "}for(let s=0;s<e;s++)r+=i;return r}function $w(t,e){t instanceof ot&&(t=new Mg(t));for(let n of t.state.facet(VQ)){let i=n(t,e);if(i!==void 0)return i}let r=gr(t.state);return r.length>=e?GQ(t,r,e):null}class Mg{constructor(e,r={}){this.state=e,this.options=r,this.unit=lm(e)}lineAt(e,r=1){let n=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=n.from&&i<=n.to?s&&i==e?{text:"",from:e}:(r<0?i<e:i<=e)?{text:n.text.slice(i-n.from),from:i}:{text:n.text.slice(0,i-n.from),from:n.from}:n}textAfterPos(e,r=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:i}=this.lineAt(e,r);return n.slice(e-i,Math.min(n.length,e+100-i))}column(e,r=1){let{text:n,from:i}=this.lineAt(e,r),s=this.countColumn(n,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(n,n.search(/\S|$/))),s}countColumn(e,r=e.length){return Pg(e,this.state.tabSize,r)}lineIndent(e,r=1){let{text:n,from:i}=this.lineAt(e,r),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const WQ=new rt;function GQ(t,e,r){let n=e.resolveStack(r),i=n.node.enterUnfinishedNodesBefore(r);if(i!=n.node){let s=[];for(let o=i;o!=n.node;o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)n={node:s[o],next:n}}return M3(n,t,r)}function M3(t,e,r){for(let n=t;n;n=n.next){let i=KQ(n.node);if(i)return i(zw.create(e,r,n))}return 0}function qQ(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function KQ(t){let e=t.type.prop(WQ);if(e)return e;let r=t.firstChild,n;if(r&&(n=r.type.prop(rt.closedBy))){let i=t.lastChild,s=i&&n.indexOf(i.name)>-1;return o=>B3(o,!0,1,void 0,s&&!qQ(o)?i.from:void 0)}return t.parent==null?YQ:null}function YQ(){return 0}class zw extends Mg{constructor(e,r,n){super(e.state,e.options),this.base=e,this.pos=r,this.context=n}get node(){return this.context.node}static create(e,r,n){return new zw(e,r,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let r=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(r.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(XQ(n,e))break;r=this.state.doc.lineAt(n.from)}return this.lineIndent(r.from)}continue(){return M3(this.context.next,this.base,this.pos)}}function XQ(t,e){for(let r=e;r;r=r.parent)if(t==r)return!0;return!1}function QQ(t){let e=t.node,r=e.childAfter(e.from),n=e.lastChild;if(!r)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(r.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=r.to;;){let l=e.childAfter(a);if(!l||l==n)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let c=/^ */.exec(s.text.slice(r.to-s.from))[0].length;return{from:r.from,to:r.to+c}}a=l.to}}function WSe({closing:t,align:e=!0,units:r=1}){return n=>B3(n,e,r,t)}function B3(t,e,r,n,i){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=n&&s.slice(o,o+n.length)==n||i==t.pos+o,l=e?QQ(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*r)}const GSe=t=>t.baseIndent;function qSe({except:t,units:e=1}={}){return r=>{let n=t&&t.test(r.textAfter);return r.baseIndent+(n?0:e*r.unit)}}const ZQ=200;function JQ(){return ot.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let r=t.newDoc,{head:n}=t.newSelection.main,i=r.lineAt(n);if(n>i.from+ZQ)return t;let s=r.sliceString(i.from,n);if(!e.some(c=>c.test(s)))return t;let{state:o}=t,a=-1,l=[];for(let{head:c}of o.selection.ranges){let u=o.doc.lineAt(c);if(u.from==a)continue;a=u.from;let h=$w(o,u.from);if(h==null)continue;let f=/^\s*/.exec(u.text)[0],d=Zu(o,h);f!=d&&l.push({from:u.from,to:u.from+f.length,insert:d})}return l.length?[t,{changes:l,sequential:!0}]:t})}const eZ=Ue.define(),tZ=new rt;function KSe(t){let e=t.firstChild,r=t.lastChild;return e&&e.to<r.from?{from:e.to,to:r.type.isError?t.to:r.from}:null}function rZ(t,e,r){let n=gr(t);if(n.length<r)return null;let i=n.resolveStack(r,1),s=null;for(let o=i;o;o=o.next){let a=o.node;if(a.to<=r||a.from>r)continue;if(s&&a.from<e)break;let l=a.type.prop(tZ);if(l&&(a.to<n.length-50||n.length==t.doc.length||!nZ(a))){let c=l(a,t);c&&c.from<=r&&c.from>=e&&c.to>r&&(s=c)}}return s}function nZ(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function UC(t,e,r){for(let n of t.facet(eZ)){let i=n(t,e,r);if(i)return i}return rZ(t,e,r)}function F3(t,e){let r=e.mapPos(t.from,1),n=e.mapPos(t.to,-1);return r>=n?void 0:{from:r,to:n}}const H3=Je.define({map:F3}),Vw=Je.define({map:F3}),cm=ar.define({create(){return it.none},update(t,e){t=t.map(e.changes);for(let r of e.effects)if(r.is(H3)&&!iZ(t,r.value.from,r.value.to)){let{preparePlaceholder:n}=e.state.facet(U3),i=n?it.replace({widget:new aZ(n(e.state,r.value))}):jC;t=t.update({add:[i.range(r.value.from,r.value.to)]})}else r.is(Vw)&&(t=t.update({filter:(n,i)=>r.value.from!=n||r.value.to!=i,filterFrom:r.value.from,filterTo:r.value.to}));if(e.selection){let r=!1,{head:n}=e.selection.main;t.between(n,n,(i,s)=>{i<n&&s>n&&(r=!0)}),r&&(t=t.update({filterFrom:n,filterTo:n,filter:(i,s)=>s<=n||i>=n}))}return t},provide:t=>He.decorations.from(t),toJSON(t,e){let r=[];return t.between(0,e.doc.length,(n,i)=>{r.push(n,i)}),r},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let r=0;r<t.length;){let n=t[r++],i=t[r++];if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(jC.range(n,i))}return it.set(e,!0)}});function ty(t,e,r){var n;let i=null;return(n=t.field(cm,!1))===null||n===void 0||n.between(e,r,(s,o)=>{(!i||i.from>s)&&(i={from:s,to:o})}),i}function iZ(t,e,r){let n=!1;return t.between(e,e,(i,s)=>{i==e&&s==r&&(n=!0)}),n}const sZ={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},U3=Ue.define({combine(t){return wa(t,sZ)}});function oZ(t){return[cm,uZ]}function j3(t,e){let{state:r}=t,n=r.facet(U3),i=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=ty(t.state,a.from,a.to);l&&t.dispatch({effects:Vw.of(l)}),o.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(t,i,e);let s=document.createElement("span");return s.textContent=n.placeholderText,s.setAttribute("aria-label",r.phrase("folded code")),s.title=r.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const jC=it.replace({widget:new class extends ic{toDOM(t){return j3(t,null)}}});class aZ extends ic{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return j3(e,this.value)}}const lZ={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class g_ extends hs{constructor(e,r){super(),this.config=e,this.open=r}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let r=document.createElement("span");return r.textContent=this.open?this.config.openText:this.config.closedText,r.title=e.state.phrase(this.open?"Fold line":"Unfold line"),r}}function cZ(t={}){let e=Object.assign(Object.assign({},lZ),t),r=new g_(e,!0),n=new g_(e,!1),i=mr.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(io)!=o.state.facet(io)||o.startState.field(cm,!1)!=o.state.field(cm,!1)||gr(o.startState)!=gr(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new sa;for(let l of o.viewportLineBlocks){let c=ty(o.state,l.from,l.to)?n:UC(o.state,l.from,l.to)?r:null;c&&a.add(l.from,l.from,c)}return a.finish()}}),{domEventHandlers:s}=e;return[i,sQ({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(i))===null||a===void 0?void 0:a.markers)||ut.empty},initialSpacer(){return new g_(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(o,a,l)=>{if(s.click&&s.click(o,a,l))return!0;let c=ty(o.state,a.from,a.to);if(c)return o.dispatch({effects:Vw.of(c)}),!0;let u=UC(o.state,a.from,a.to);return u?(o.dispatch({effects:H3.of(u)}),!0):!1}})}),oZ()]}const uZ=He.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Qh{constructor(e,r){this.specs=e;let n;function i(a){let l=eo.newName();return(n||(n=Object.create(null)))["."+l]=a,l}const s=typeof r.all=="string"?r.all:r.all?i(r.all):void 0,o=r.scope;this.scope=o instanceof jn?a=>a.prop(nl)==o.data:o?a=>a==o:void 0,this.style=L3(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=n?new eo(n):null,this.themeType=r.themeType}static define(e,r){return new Qh(e,r||{})}}const ry=Ue.define(),hZ=Ue.define({combine(t){return t.length?[t[0]]:null}});function __(t){let e=t.facet(ry);return e.length?e:t.facet(hZ)}function fZ(t,e){let r=[pZ],n;return t instanceof Qh&&(t.module&&r.push(He.styleModule.of(t.module)),n=t.themeType),n?r.push(ry.computeN([He.darkTheme],i=>i.facet(He.darkTheme)==(n=="dark")?[t]:[])):r.push(ry.of(t)),r}class dZ{constructor(e){this.markCache=Object.create(null),this.tree=gr(e.state),this.decorations=this.buildDeco(e,__(e.state)),this.decoratedTo=e.viewport.to}update(e){let r=gr(e.state),n=__(e.state),i=n!=__(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);r.length<s.to&&!i&&r.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(r!=this.tree||e.viewportChanged||i)&&(this.tree=r,this.decorations=this.buildDeco(e.view,n),this.decoratedTo=s.to)}buildDeco(e,r){if(!r||!this.tree.length)return it.none;let n=new sa;for(let{from:i,to:s}of e.visibleRanges)BQ(this.tree,r,(o,a,l)=>{n.add(o,a,this.markCache[l]||(this.markCache[l]=it.mark({class:l})))},i,s);return n.finish()}}const pZ=uo.high(mr.fromClass(dZ,{decorations:t=>t.decorations}));ce.meta,ce.link,ce.heading,ce.emphasis,ce.strong,ce.strikethrough,ce.keyword,ce.atom,ce.bool,ce.url,ce.contentSeparator,ce.labelName,ce.literal,ce.inserted,ce.string,ce.deleted,ce.regexp,ce.escape,ce.string,ce.variableName,ce.variableName,ce.typeName,ce.namespace,ce.className,ce.variableName,ce.macroName,ce.propertyName,ce.comment,ce.invalid;const mZ=He.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),$3=1e4,z3="()[]{}",V3=Ue.define({combine(t){return wa(t,{afterCursor:!0,brackets:z3,maxScanDistance:$3,renderMatch:bZ})}}),gZ=it.mark({class:"cm-matchingBracket"}),_Z=it.mark({class:"cm-nonmatchingBracket"});function bZ(t){let e=[],r=t.matched?gZ:_Z;return e.push(r.range(t.start.from,t.start.to)),t.end&&e.push(r.range(t.end.from,t.end.to)),e}const yZ=ar.define({create(){return it.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let r=[],n=e.state.facet(V3);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=Ci(e.state,i.head,-1,n)||i.head>0&&Ci(e.state,i.head-1,1,n)||n.afterCursor&&(Ci(e.state,i.head,1,n)||i.head<e.state.doc.length&&Ci(e.state,i.head+1,-1,n));s&&(r=r.concat(n.renderMatch(s,e.state)))}return it.set(r,!0)},provide:t=>He.decorations.from(t)}),vZ=[yZ,mZ];function wZ(t={}){return[V3.of(t),vZ]}const EZ=new rt;function ny(t,e,r){let n=t.prop(e<0?rt.openedBy:rt.closedBy);if(n)return n;if(t.name.length==1){let i=r.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[r[i+e]]}return null}function iy(t){let e=t.type.prop(EZ);return e?e(t.node):t}function Ci(t,e,r,n={}){let i=n.maxScanDistance||$3,s=n.brackets||z3,o=gr(t),a=o.resolveInner(e,r);for(let l=a;l;l=l.parent){let c=ny(l.type,r,s);if(c&&l.from<l.to){let u=iy(l);if(u&&(r>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return SZ(t,e,r,l,u,c,s)}}return xZ(t,e,r,o,a.type,i,s)}function SZ(t,e,r,n,i,s,o){let a=n.parent,l={from:i.from,to:i.to},c=0,u=a?.cursor();if(u&&(r<0?u.childBefore(n.from):u.childAfter(n.to)))do if(r<0?u.to<=n.from:u.from>=n.to){if(c==0&&s.indexOf(u.type.name)>-1&&u.from<u.to){let h=iy(u);return{start:l,end:h?{from:h.from,to:h.to}:void 0,matched:!0}}else if(ny(u.type,r,o))c++;else if(ny(u.type,-r,o)){if(c==0){let h=iy(u);return{start:l,end:h&&h.from<h.to?{from:h.from,to:h.to}:void 0,matched:!1}}c--}}while(r<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function xZ(t,e,r,n,i,s,o){let a=r<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=r>0)return null;let c={from:r<0?e-1:e,to:r>0?e+1:e},u=t.doc.iterRange(e,r>0?t.doc.length:0),h=0;for(let f=0;!u.next().done&&f<=s;){let d=u.value;r<0&&(f+=d.length);let g=e+f*r;for(let _=r>0?0:d.length-1,m=r>0?d.length:-1;_!=m;_+=r){let p=o.indexOf(d[_]);if(!(p<0||n.resolveInner(g+_,1).type!=i))if(p%2==0==r>0)h++;else{if(h==1)return{start:c,end:{from:g+_,to:g+_+1},matched:p>>1==l>>1};h--}}r>0&&(f+=d.length)}return u.done?{start:c,matched:!1}:null}const TZ=Object.create(null),$C=[en.none],zC=[],VC=Object.create(null),CZ=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])CZ[t]=kZ(TZ,e);function b_(t,e){zC.indexOf(t)>-1||(zC.push(t),console.warn(e))}function kZ(t,e){let r=[];for(let a of e.split(" ")){let l=[];for(let c of a.split(".")){let u=t[c]||ce[c];u?typeof u=="function"?l.length?l=l.map(u):b_(c,`Modifier ${c} used at start of tag`):l.length?b_(c,`Tag ${c} used as modifier`):l=Array.isArray(u)?u:[u]:b_(c,`Unknown highlighting tag ${c}`)}for(let c of l)r.push(c)}if(!r.length)return 0;let n=e.replace(/ /g,"_"),i=n+" "+r.map(a=>a.id),s=VC[i];if(s)return s.id;let o=VC[i]=en.define({id:$C.length,name:n,props:[NQ({[n]:r})]});return $C.push(o),o.id}It.RTL,It.LTR;class W3{constructor(e,r,n,i){this.state=e,this.pos=r,this.explicit=n,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let r=gr(this.state).resolveInner(this.pos,-1);for(;r&&e.indexOf(r.name)<0;)r=r.parent;return r?{from:r.from,to:this.pos,text:this.state.sliceDoc(r.from,this.pos),type:r.type}:null}matchBefore(e){let r=this.state.doc.lineAt(this.pos),n=Math.max(r.from,this.pos-250),i=r.text.slice(n-r.from,this.pos-r.from),s=i.search(G3(e,!1));return s<0?null:{from:n+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,r,n){e=="abort"&&this.abortListeners&&(this.abortListeners.push(r),n&&n.onDocChange&&(this.abortOnDocChange=!0))}}function WC(t){let e=Object.keys(t).join(""),r=/\w/.test(e);return r&&(e=e.replace(/\w/g,"")),`[${r?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function AZ(t){let e=Object.create(null),r=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let s=1;s<i.length;s++)r[i[s]]=!0}let n=WC(e)+WC(r)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function RZ(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[r,n]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:AZ(e);return i=>{let s=i.matchBefore(n);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:r}:null}}function YSe(t,e){return r=>{for(let n=gr(r.state).resolveInner(r.pos,-1);n;n=n.parent){if(t.indexOf(n.name)>-1)return null;if(n.type.isTop)break}return e(r)}}class GC{constructor(e,r,n,i){this.completion=e,this.source=r,this.match=n,this.score=i}}function Ko(t){return t.selection.main.from}function G3(t,e){var r;let{source:n}=t,i=e&&n[0]!="^",s=n[n.length-1]!="$";return!i&&!s?t:new RegExp(`${i?"^":""}(?:${n})${s?"$":""}`,(r=t.flags)!==null&&r!==void 0?r:t.ignoreCase?"i":"")}const Ww=_s.define();function PZ(t,e,r,n){let{main:i}=t.selection,s=r-i.from,o=n-i.from;return Object.assign(Object.assign({},t.changeByRange(a=>{if(a!=i&&r!=n&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(r,n))return{range:a};let l=t.toText(e);return{changes:{from:a.from+s,to:n==i.from?a.to:a.from+o,insert:l},range:ke.cursor(a.from+s+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const qC=new WeakMap;function IZ(t){if(!Array.isArray(t))return t;let e=qC.get(t);return e||qC.set(t,e=RZ(t)),e}const um=Je.define(),Ju=Je.define();class DZ{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let r=0;r<e.length;){let n=Wr(e,r),i=Un(n);this.chars.push(n);let s=e.slice(r,r+i),o=s.toUpperCase();this.folded.push(Wr(o==s?s.toLowerCase():o,0)),r+=i}this.astral=e.length!=this.chars.length}ret(e,r){return this.score=e,this.matched=r,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:r,folded:n,any:i,precise:s,byWord:o}=this;if(r.length==1){let b=Wr(e,0),y=Un(b),v=y==e.length?0:-100;if(b!=r[0])if(b==n[0])v+=-200;else return null;return this.ret(v,[0,y])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=r.length,c=0;if(a<0){for(let b=0,y=Math.min(e.length,200);b<y&&c<l;){let v=Wr(e,b);(v==r[c]||v==n[c])&&(i[c++]=b),b+=Un(v)}if(c<l)return null}let u=0,h=0,f=!1,d=0,g=-1,_=-1,m=/[a-z]/.test(e),p=!0;for(let b=0,y=Math.min(e.length,200),v=0;b<y&&h<l;){let w=Wr(e,b);a<0&&(u<l&&w==r[u]&&(s[u++]=b),d<l&&(w==r[d]||w==n[d]?(d==0&&(g=b),_=b+1,d++):d=0));let S,x=w<255?w>=48&&w<=57||w>=97&&w<=122?2:w>=65&&w<=90?1:0:(S=Tw(w))!=S.toLowerCase()?1:S!=S.toUpperCase()?2:0;(!b||x==1&&m||v==0&&x!=0)&&(r[h]==w||n[h]==w&&(f=!0)?o[h++]=b:o.length&&(p=!1)),v=x,b+=Un(w)}return h==l&&o[0]==0&&p?this.result(-100+(f?-200:0),o,e):d==l&&g==0?this.ret(-200-e.length+(_==e.length?0:-100),[0,_]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):d==l?this.ret(-900-e.length,[g,_]):h==l?this.result(-100+(f?-200:0)+-700+(p?0:-1100),o,e):r.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,r,n){let i=[],s=0;for(let o of r){let a=o+(this.astral?Un(Wr(n,o)):1);s&&i[s-1]==o?i[s-1]=a:(i[s++]=o,i[s++]=a)}return this.ret(e-n.length,i)}}class OZ{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let r=e.slice(0,this.pattern.length),n=r==this.pattern?0:r.toLowerCase()==this.folded?-200:null;return n==null?null:(this.matched=[0,r.length],this.score=n+(e.length==this.pattern.length?0:-100),this)}}const ir=Ue.define({combine(t){return wa(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:LZ,filterStrict:!1,compareCompletions:(e,r)=>e.label.localeCompare(r.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,r)=>e&&r,closeOnBlur:(e,r)=>e&&r,icons:(e,r)=>e&&r,tooltipClass:(e,r)=>n=>KC(e(n),r(n)),optionClass:(e,r)=>n=>KC(e(n),r(n)),addToOptions:(e,r)=>e.concat(r),filterStrict:(e,r)=>e||r})}});function KC(t,e){return t?e?t+" "+e:t:e}function LZ(t,e,r,n,i,s){let o=t.textDirection==It.RTL,a=o,l=!1,c="top",u,h,f=e.left-i.left,d=i.right-e.right,g=n.right-n.left,_=n.bottom-n.top;if(a&&f<Math.min(g,d)?a=!1:!a&&d<Math.min(g,f)&&(a=!0),g<=(a?f:d))u=Math.max(i.top,Math.min(r.top,i.bottom-_))-e.top,h=Math.min(400,a?f:d);else{l=!0,h=Math.min(400,(o?e.right:i.right-e.left)-30);let b=i.bottom-e.bottom;b>=_||b>e.top?u=r.bottom-e.top:(c="bottom",u=e.bottom-r.top)}let m=(e.bottom-e.top)/s.offsetHeight,p=(e.right-e.left)/s.offsetWidth;return{style:`${c}: ${u/m}px; max-width: ${h/p}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function NZ(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(r){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),r.type&&n.classList.add(...r.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),n.setAttribute("aria-hidden","true"),n},position:20}),e.push({render(r,n,i,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=r.displayLabel||r.label,l=0;for(let c=0;c<s.length;){let u=s[c++],h=s[c++];u>l&&o.appendChild(document.createTextNode(a.slice(l,u)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(a.slice(u,h))),f.className="cm-completionMatchedText",l=h}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(r){if(!r.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=r.detail,n},position:80}),e.sort((r,n)=>r.position-n.position).map(r=>r.render)}function y_(t,e,r){if(t<=r)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/r);return{from:i*r,to:(i+1)*r}}let n=Math.floor((t-e)/r);return{from:t-(n+1)*r,to:t-n*r}}class MZ{constructor(e,r,n){this.view=e,this.stateField=r,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(r),{options:s,selected:o}=i.open,a=e.state.facet(ir);this.optionContent=NZ(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=y_(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=e.state.field(r).open;for(let u=l.target,h;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(h=/-(\d+)$/.exec(u.id))&&+h[1]<c.length){this.applyCompletion(e,c[+h[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(ir).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:Ju.of(null)})}),this.showOptions(s,i.id)}mount(){this.updateSel()}showOptions(e,r){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,r,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var r;let n=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),n!=i){let{options:s,selected:o,disabled:a}=n.open;(!i.open||i.open.options!=s)&&(this.range=y_(s.length,o,e.state.facet(ir).maxRenderedOptions),this.showOptions(s,n.id)),this.updateSel(),a!=((r=i.open)===null||r===void 0?void 0:r.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let r=this.tooltipClass(e);if(r!=this.currentClass){for(let n of this.currentClass.split(" "))n&&this.dom.classList.remove(n);for(let n of r.split(" "))n&&this.dom.classList.add(n);this.currentClass=r}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),r=e.open;if((r.selected>-1&&r.selected<this.range.from||r.selected>=this.range.to)&&(this.range=y_(r.options.length,r.selected,this.view.state.facet(ir).maxRenderedOptions),this.showOptions(r.options,e.id)),this.updateSelectedOption(r.selected)){this.destroyInfo();let{completion:n}=r.options[r.selected],{info:i}=n;if(!i)return;let s=typeof i=="string"?document.createTextNode(i):i(n);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,n)}).catch(o=>cn(this.view.state,o,"completion info")):this.addInfoPane(s,n)}}addInfoPane(e,r){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",e.nodeType!=null)n.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;n.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let r=null;for(let n=this.list.firstChild,i=this.range.from;n;n=n.nextSibling,i++)n.nodeName!="LI"||!n.id?i--:i==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),r=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return r&&FZ(this.list,r),r}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let r=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return i.top>Math.min(s.bottom,r.bottom)-10||i.bottom<Math.max(s.top,r.top)+10?null:this.view.state.facet(ir).positionInfo(this.view,r,i,n,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,r,n){const i=document.createElement("ul");i.id=r,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=n.from;o<n.to;o++){let{completion:a,match:l}=e[o],{section:c}=a;if(c){let f=typeof c=="string"?c:c.name;if(f!=s&&(o>n.from||n.from==0))if(s=f,typeof c!="string"&&c.header)i.appendChild(c.header(c));else{let d=i.appendChild(document.createElement("completion-section"));d.textContent=f}}const u=i.appendChild(document.createElement("li"));u.id=r+"-"+o,u.setAttribute("role","option");let h=this.optionClass(a);h&&(u.className=h);for(let f of this.optionContent){let d=f(a,this.view.state,this.view,l);d&&u.appendChild(d)}}return n.from&&i.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function BZ(t,e){return r=>new MZ(r,t,e)}function FZ(t,e){let r=t.getBoundingClientRect(),n=e.getBoundingClientRect(),i=r.height/t.offsetHeight;n.top<r.top?t.scrollTop-=(r.top-n.top)/i:n.bottom>r.bottom&&(t.scrollTop+=(n.bottom-r.bottom)/i)}function YC(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function HZ(t,e){let r=[],n=null,i=c=>{r.push(c);let{section:u}=c.completion;if(u){n||(n=[]);let h=typeof u=="string"?u:u.name;n.some(f=>f.name==h)||n.push(typeof u=="string"?{name:h}:u)}},s=e.facet(ir);for(let c of t)if(c.hasResult()){let u=c.result.getMatch;if(c.result.filter===!1)for(let h of c.result.options)i(new GC(h,c.source,u?u(h):[],1e9-r.length));else{let h=e.sliceDoc(c.from,c.to),f,d=s.filterStrict?new OZ(h):new DZ(h);for(let g of c.result.options)if(f=d.match(g.label)){let _=g.displayLabel?u?u(g,f.matched):[]:f.matched;i(new GC(g,c.source,_,f.score+(g.boost||0)))}}}if(n){let c=Object.create(null),u=0,h=(f,d)=>{var g,_;return((g=f.rank)!==null&&g!==void 0?g:1e9)-((_=d.rank)!==null&&_!==void 0?_:1e9)||(f.name<d.name?-1:1)};for(let f of n.sort(h))u-=1e5,c[f.name]=u;for(let f of r){let{section:d}=f.completion;d&&(f.score+=c[typeof d=="string"?d:d.name])}}let o=[],a=null,l=s.compareCompletions;for(let c of r.sort((u,h)=>h.score-u.score||l(u.completion,h.completion))){let u=c.completion;!a||a.label!=u.label||a.detail!=u.detail||a.type!=null&&u.type!=null&&a.type!=u.type||a.apply!=u.apply||a.boost!=u.boost?o.push(c):YC(c.completion)>YC(a)&&(o[o.length-1]=c),a=c.completion}return o}class il{constructor(e,r,n,i,s,o){this.options=e,this.attrs=r,this.tooltip=n,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,r){return e==this.selected||e>=this.options.length?this:new il(this.options,XC(r,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,r,n,i,s,o){if(i&&!o&&e.some(c=>c.isPending))return i.setDisabled();let a=HZ(e,r);if(!a.length)return i&&e.some(c=>c.isPending)?i.setDisabled():null;let l=r.facet(ir).selectOnOpen?0:-1;if(i&&i.selected!=l&&i.selected!=-1){let c=i.options[i.selected].completion;for(let u=0;u<a.length;u++)if(a[u].completion==c){l=u;break}}return new il(a,XC(n,l),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:WZ,above:s.aboveCursor},i?i.timestamp:Date.now(),l,!1)}map(e){return new il(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new il(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class hm{constructor(e,r,n){this.active=e,this.id=r,this.open=n}static start(){return new hm(zZ,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:r}=e,n=r.facet(ir),s=(n.override||r.languageDataAt("autocomplete",Ko(r)).map(IZ)).map(l=>(this.active.find(u=>u.source==l)||new Cn(l,this.active.some(u=>u.state!=0)?1:0)).update(e,n));s.length==this.active.length&&s.every((l,c)=>l==this.active[c])&&(s=this.active);let o=this.open,a=e.effects.some(l=>l.is(Gw));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!UZ(s,this.active)||a?o=il.build(s,r,this.id,o,n,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new Cn(l.source,0):l));for(let l of e.effects)l.is(K3)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new hm(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?jZ:$Z}}function UZ(t,e){if(t==e)return!0;for(let r=0,n=0;;){for(;r<t.length&&!t[r].hasResult();)r++;for(;n<e.length&&!e[n].hasResult();)n++;let i=r==t.length,s=n==e.length;if(i||s)return i==s;if(t[r++].result!=e[n++].result)return!1}}const jZ={"aria-autocomplete":"list"},$Z={};function XC(t,e){let r={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(r["aria-activedescendant"]=t+"-"+e),r}const zZ=[];function q3(t,e){if(t.isUserEvent("input.complete")){let n=t.annotation(Ww);if(n&&e.activateOnCompletion(n))return 12}let r=t.isUserEvent("input.type");return r&&e.activateOnTyping?5:r?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class Cn{constructor(e,r,n=!1){this.source=e,this.state=r,this.explicit=n}hasResult(){return!1}get isPending(){return this.state==1}update(e,r){let n=q3(e,r),i=this;(n&8||n&16&&this.touches(e))&&(i=new Cn(i.source,0)),n&4&&i.state==0&&(i=new Cn(this.source,1)),i=i.updateFor(e,n);for(let s of e.effects)if(s.is(um))i=new Cn(i.source,1,s.value);else if(s.is(Ju))i=new Cn(i.source,0);else if(s.is(Gw))for(let o of s.value)o.source==i.source&&(i=o);return i}updateFor(e,r){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Ko(e.state))}}class bl extends Cn{constructor(e,r,n,i,s,o){super(e,3,r),this.limit=n,this.result=i,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,r){var n;if(!(r&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=Ko(e.state);if(a>o||!i||r&2&&(Ko(e.startState)==this.from||a<this.limit))return new Cn(this.source,r&4?1:0);let l=e.changes.mapPos(this.limit);return VZ(i.validFor,e.state,s,o)?new bl(this.source,this.explicit,l,i,s,o):i.update&&(i=i.update(i,s,o,new W3(e.state,a,!1)))?new bl(this.source,this.explicit,l,i,i.from,(n=i.to)!==null&&n!==void 0?n:Ko(e.state)):new Cn(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new bl(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Cn(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function VZ(t,e,r,n){if(!t)return!1;let i=e.sliceDoc(r,n);return typeof t=="function"?t(i,r,n,e):G3(t,!0).test(i)}const Gw=Je.define({map(t,e){return t.map(r=>r.map(e))}}),K3=Je.define(),qr=ar.define({create(){return hm.start()},update(t,e){return t.update(e)},provide:t=>[Fw.from(t,e=>e.tooltip),He.contentAttributes.from(t,e=>e.attrs)]});function qw(t,e){const r=e.completion.apply||e.completion.label;let n=t.state.field(qr).active.find(i=>i.source==e.source);return n instanceof bl?(typeof r=="string"?t.dispatch(Object.assign(Object.assign({},PZ(t.state,r,n.from,n.to)),{annotations:Ww.of(e.completion)})):r(t,e.completion,n.from,n.to),!0):!1}const WZ=BZ(qr,qw);function Sd(t,e="option"){return r=>{let n=r.state.field(qr,!1);if(!n||!n.open||n.open.disabled||Date.now()-n.open.timestamp<r.state.facet(ir).interactionDelay)return!1;let i=1,s;e=="page"&&(s=T3(r,n.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=n.open.options,a=n.open.selected>-1?n.open.selected+i*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),r.dispatch({effects:K3.of(a)}),!0}}const Y3=t=>{let e=t.state.field(qr,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(ir).interactionDelay?!1:qw(t,e.open.options[e.open.selected])},QC=t=>t.state.field(qr,!1)?(t.dispatch({effects:um.of(!0)}),!0):!1,GZ=t=>{let e=t.state.field(qr,!1);return!e||!e.active.some(r=>r.state!=0)?!1:(t.dispatch({effects:Ju.of(null)}),!0)};class qZ{constructor(e,r){this.active=e,this.context=r,this.time=Date.now(),this.updates=[],this.done=void 0}}const KZ=50,YZ=1e3,XZ=mr.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(qr).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(qr),r=t.state.facet(ir);if(!t.selectionSet&&!t.docChanged&&t.startState.field(qr)==e)return;let n=t.transactions.some(s=>{let o=q3(s,r);return o&8||(s.selection||s.docChanged)&&!(o&3)});for(let s=0;s<this.running.length;s++){let o=this.running[s];if(n||o.context.abortOnDocChange&&t.docChanged||o.updates.length+t.transactions.length>KZ&&Date.now()-o.time>YZ){for(let a of o.context.abortListeners)try{a()}catch(l){cn(this.view.state,l)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(s=>s.effects.some(o=>o.is(um)))&&(this.pendingStart=!0);let i=this.pendingStart?50:r.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.isPending&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let s of t.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(qr);for(let r of e.active)r.isPending&&!this.running.some(n=>n.active.source==r.source)&&this.startQuery(r);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(ir).updateSyncTime))}startQuery(t){let{state:e}=this.view,r=Ko(e),n=new W3(e,r,t.explicit,this.view),i=new qZ(t,n);this.running.push(i),Promise.resolve(t.source(n)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:Ju.of(null)}),cn(this.view.state,s)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(ir).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],r=this.view.state.facet(ir),n=this.view.state.field(qr);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(s.done===void 0)continue;if(this.running.splice(i--,1),s.done){let a=Ko(s.updates.length?s.updates[0].startState:this.view.state),l=Math.min(a,s.done.from+(s.active.explicit?0:1)),c=new bl(s.active.source,s.active.explicit,l,s.done,s.done.from,(t=s.done.to)!==null&&t!==void 0?t:a);for(let u of s.updates)c=c.update(u,r);if(c.hasResult()){e.push(c);continue}}let o=n.active.find(a=>a.source==s.active.source);if(o&&o.isPending)if(s.done==null){let a=new Cn(s.active.source,0);for(let l of s.updates)a=a.update(l,r);a.isPending||e.push(a)}else this.startQuery(o)}(e.length||n.open&&n.open.disabled)&&this.view.dispatch({effects:Gw.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(qr,!1);if(e&&e.tooltip&&this.view.state.facet(ir).closeOnBlur){let r=e.open&&T3(this.view,e.open.tooltip);(!r||!r.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Ju.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:um.of(!1)}),20),this.composing=0}}}),QZ=typeof navigator=="object"&&/Win/.test(navigator.platform),ZZ=uo.highest(He.domEventHandlers({keydown(t,e){let r=e.state.field(qr,!1);if(!r||!r.open||r.open.disabled||r.open.selected<0||t.key.length>1||t.ctrlKey&&!(QZ&&t.altKey)||t.metaKey)return!1;let n=r.open.options[r.open.selected],i=r.active.find(o=>o.source==n.source),s=n.completion.commitCharacters||i.result.commitCharacters;return s&&s.indexOf(t.key)>-1&&qw(e,n),!1}})),X3=He.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class JZ{constructor(e,r,n,i){this.field=e,this.line=r,this.from=n,this.to=i}}class Kw{constructor(e,r,n){this.field=e,this.from=r,this.to=n}map(e){let r=e.mapPos(this.from,-1,wr.TrackDel),n=e.mapPos(this.to,1,wr.TrackDel);return r==null||n==null?null:new Kw(this.field,r,n)}}class Yw{constructor(e,r){this.lines=e,this.fieldPositions=r}instantiate(e,r){let n=[],i=[r],s=e.doc.lineAt(r),o=/^\s*/.exec(s.text)[0];for(let l of this.lines){if(n.length){let c=o,u=/^\t*/.exec(l)[0].length;for(let h=0;h<u;h++)c+=e.facet(sc);i.push(r+c.length-u),l=c+l.slice(u)}n.push(l),r+=l.length+1}let a=this.fieldPositions.map(l=>new Kw(l.field,i[l.line]+l.from,i[l.line]+l.to));return{text:n,ranges:a}}static parse(e){let r=[],n=[],i=[],s;for(let o of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(o);){let a=s[1]?+s[1]:null,l=s[2]||s[3]||"",c=-1,u=l.replace(/\\[{}]/g,h=>h[1]);for(let h=0;h<r.length;h++)(a!=null?r[h].seq==a:u&&r[h].name==u)&&(c=h);if(c<0){let h=0;for(;h<r.length&&(a==null||r[h].seq!=null&&r[h].seq<a);)h++;r.splice(h,0,{seq:a,name:u}),c=h;for(let f of i)f.field>=c&&f.field++}i.push(new JZ(c,n.length,s.index,s.index+u.length)),o=o.slice(0,s.index)+l+o.slice(s.index+s[0].length)}o=o.replace(/\\([{}])/g,(a,l,c)=>{for(let u of i)u.line==n.length&&u.from>c&&(u.from--,u.to--);return l}),n.push(o)}return new Yw(n,i)}}let eJ=it.widget({widget:new class extends ic{toDOM(){let t=document.createElement("span");return t.className="cm-snippetFieldPosition",t}ignoreEvent(){return!1}}}),tJ=it.mark({class:"cm-snippetField"});class oc{constructor(e,r){this.ranges=e,this.active=r,this.deco=it.set(e.map(n=>(n.from==n.to?eJ:tJ).range(n.from,n.to)))}map(e){let r=[];for(let n of this.ranges){let i=n.map(e);if(!i)return null;r.push(i)}return new oc(r,this.active)}selectionInsideField(e){return e.ranges.every(r=>this.ranges.some(n=>n.field==this.active&&n.from<=r.from&&n.to>=r.to))}}const Zh=Je.define({map(t,e){return t&&t.map(e)}}),rJ=Je.define(),eh=ar.define({create(){return null},update(t,e){for(let r of e.effects){if(r.is(Zh))return r.value;if(r.is(rJ)&&t)return new oc(t.ranges,r.value)}return t&&e.docChanged&&(t=t.map(e.changes)),t&&e.selection&&!t.selectionInsideField(e.selection)&&(t=null),t},provide:t=>He.decorations.from(t,e=>e?e.deco:it.none)});function Xw(t,e){return ke.create(t.filter(r=>r.field==e).map(r=>ke.range(r.from,r.to)))}function nJ(t){let e=Yw.parse(t);return(r,n,i,s)=>{let{text:o,ranges:a}=e.instantiate(r.state,i),l={changes:{from:i,to:s,insert:dt.of(o)},scrollIntoView:!0,annotations:n?[Ww.of(n),Kt.userEvent.of("input.complete")]:void 0};if(a.length&&(l.selection=Xw(a,0)),a.some(c=>c.field>0)){let c=new oc(a,0),u=l.effects=[Zh.of(c)];r.state.field(eh,!1)===void 0&&u.push(Je.appendConfig.of([eh,lJ,cJ,X3]))}r.dispatch(r.state.update(l))}}function Q3(t){return({state:e,dispatch:r})=>{let n=e.field(eh,!1);if(!n||t<0&&n.active==0)return!1;let i=n.active+t,s=t>0&&!n.ranges.some(o=>o.field==i+t);return r(e.update({selection:Xw(n.ranges,i),effects:Zh.of(s?null:new oc(n.ranges,i)),scrollIntoView:!0})),!0}}const iJ=({state:t,dispatch:e})=>t.field(eh,!1)?(e(t.update({effects:Zh.of(null)})),!0):!1,sJ=Q3(1),oJ=Q3(-1),aJ=[{key:"Tab",run:sJ,shift:oJ},{key:"Escape",run:iJ}],ZC=Ue.define({combine(t){return t.length?t[0]:aJ}}),lJ=uo.highest(Ng.compute([ZC],t=>t.facet(ZC)));function XSe(t,e){return Object.assign(Object.assign({},e),{apply:nJ(t)})}const cJ=He.domEventHandlers({mousedown(t,e){let r=e.state.field(eh,!1),n;if(!r||(n=e.posAtCoords({x:t.clientX,y:t.clientY}))==null)return!1;let i=r.ranges.find(s=>s.from<=n&&s.to>=n);return!i||i.field==r.active?!1:(e.dispatch({selection:Xw(r.ranges,i.field),effects:Zh.of(r.ranges.some(s=>s.field>i.field)?new oc(r.ranges,i.field):null),scrollIntoView:!0}),!0)}}),fm={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Mo=Je.define({map(t,e){let r=e.mapPos(t,-1,wr.TrackAfter);return r??void 0}}),Qw=new class extends ia{};Qw.startSide=1;Qw.endSide=-1;const Z3=ar.define({create(){return ut.empty},update(t,e){if(t=t.map(e.changes),e.selection){let r=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:n=>n>=r.from&&n<=r.to})}for(let r of e.effects)r.is(Mo)&&(t=t.update({add:[Qw.range(r.value,r.value+1)]}));return t}});function uJ(){return[pJ,Z3]}const v_="()[]{}<>";function hJ(t){for(let e=0;e<v_.length;e+=2)if(v_.charCodeAt(e)==t)return v_.charAt(e+1);return Tw(t<128?t:t+1)}function fJ(t,e){return t.languageDataAt("closeBrackets",e)[0]||fm}const dJ=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),pJ=He.inputHandler.of((t,e,r,n)=>{if((dJ?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let i=t.state.selection.main;if(n.length>2||n.length==2&&Un(Wr(n,0))==1||e!=i.from||r!=i.to)return!1;let s=mJ(t.state,n);return s?(t.dispatch(s),!0):!1});function mJ(t,e){let r=fJ(t,t.selection.main.head),n=r.brackets||fm.brackets;for(let i of n){let s=hJ(Wr(i,0));if(e==i)return s==i?bJ(t,i,n.indexOf(i+i+i)>-1,r):gJ(t,i,s,r.before||fm.before);if(e==s&&J3(t,t.selection.main.from))return _J(t,i,s)}return null}function J3(t,e){let r=!1;return t.field(Z3).between(0,t.doc.length,n=>{n==e&&(r=!0)}),r}function Zw(t,e){let r=t.sliceString(e,e+2);return r.slice(0,Un(Wr(r,0)))}function gJ(t,e,r,n){let i=null,s=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:r,from:o.to}],effects:Mo.of(o.to+e.length),range:ke.range(o.anchor+e.length,o.head+e.length)};let a=Zw(t.doc,o.head);return!a||/\s/.test(a)||n.indexOf(a)>-1?{changes:{insert:e+r,from:o.head},effects:Mo.of(o.head+e.length),range:ke.cursor(o.head+e.length)}:{range:i=o}});return i?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function _J(t,e,r){let n=null,i=t.changeByRange(s=>s.empty&&Zw(t.doc,s.head)==r?{changes:{from:s.head,to:s.head+r.length,insert:r},range:ke.cursor(s.head+r.length)}:n={range:s});return n?null:t.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function bJ(t,e,r,n){let i=n.stringPrefixes||fm.stringPrefixes,s=null,o=t.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:Mo.of(a.to+e.length),range:ke.range(a.anchor+e.length,a.head+e.length)};let l=a.head,c=Zw(t.doc,l),u;if(c==e){if(JC(t,l))return{changes:{insert:e+e,from:l},effects:Mo.of(l+e.length),range:ke.cursor(l+e.length)};if(J3(t,l)){let f=r&&t.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+f.length,insert:f},range:ke.cursor(l+f.length)}}}else{if(r&&t.sliceDoc(l-2*e.length,l)==e+e&&(u=ek(t,l-2*e.length,i))>-1&&JC(t,u))return{changes:{insert:e+e+e+e,from:l},effects:Mo.of(l+e.length),range:ke.cursor(l+e.length)};if(t.charCategorizer(l)(c)!=Yt.Word&&ek(t,l,i)>-1&&!yJ(t,l,e,i))return{changes:{insert:e+e,from:l},effects:Mo.of(l+e.length),range:ke.cursor(l+e.length)}}return{range:s=a}});return s?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function JC(t,e){let r=gr(t).resolveInner(e+1);return r.parent&&r.from==e}function yJ(t,e,r,n){let i=gr(t).resolveInner(e,-1),s=n.reduce((o,a)=>Math.max(o,a.length),0);for(let o=0;o<5;o++){let a=t.sliceDoc(i.from,Math.min(i.to,i.from+r.length+s)),l=a.indexOf(r);if(!l||l>-1&&n.indexOf(a.slice(0,l))>-1){let u=i.firstChild;for(;u&&u.from==i.from&&u.to-u.from>r.length+l;){if(t.sliceDoc(u.to-r.length,u.to)==r)return!1;u=u.firstChild}return!0}let c=i.to==e&&i.parent;if(!c)break;i=c}return!1}function ek(t,e,r){let n=t.charCategorizer(e);if(n(t.sliceDoc(e-1,e))!=Yt.Word)return e;for(let i of r){let s=e-i.length;if(t.sliceDoc(s,e)==i&&n(t.sliceDoc(s-1,s))!=Yt.Word)return s}return-1}function vJ(t={}){return[ZZ,qr,ir.of(t),XZ,EJ,X3]}const wJ=[{key:"Ctrl-Space",run:QC},{mac:"Alt-`",run:QC},{key:"Escape",run:GZ},{key:"ArrowDown",run:Sd(!0)},{key:"ArrowUp",run:Sd(!1)},{key:"PageDown",run:Sd(!0,"page")},{key:"PageUp",run:Sd(!1,"page")},{key:"Enter",run:Y3}],EJ=uo.highest(Ng.computeN([ir],t=>t.facet(ir).defaultKeymap?[wJ]:[])),SJ=t=>{let{state:e}=t,r=e.doc.lineAt(e.selection.main.from),n=eE(t.state,r.from);return n.line?xJ(t):n.block?CJ(t):!1};function Jw(t,e){return({state:r,dispatch:n})=>{if(r.readOnly)return!1;let i=t(e,r);return i?(n(r.update(i)),!0):!1}}const xJ=Jw(RJ,0),TJ=Jw(eN,0),CJ=Jw((t,e)=>eN(t,e,AJ(e)),0);function eE(t,e){let r=t.languageDataAt("commentTokens",e);return r.length?r[0]:{}}const Bc=50;function kJ(t,{open:e,close:r},n,i){let s=t.sliceDoc(n-Bc,n),o=t.sliceDoc(i,i+Bc),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,c=s.length-a;if(s.slice(c-e.length,c)==e&&o.slice(l,l+r.length)==r)return{open:{pos:n-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let u,h;i-n<=2*Bc?u=h=t.sliceDoc(n,i):(u=t.sliceDoc(n,n+Bc),h=t.sliceDoc(i-Bc,i));let f=/^\s*/.exec(u)[0].length,d=/\s*$/.exec(h)[0].length,g=h.length-d-r.length;return u.slice(f,f+e.length)==e&&h.slice(g,g+r.length)==r?{open:{pos:n+f+e.length,margin:/\s/.test(u.charAt(f+e.length))?1:0},close:{pos:i-d-r.length,margin:/\s/.test(h.charAt(g-1))?1:0}}:null}function AJ(t){let e=[];for(let r of t.selection.ranges){let n=t.doc.lineAt(r.from),i=r.to<=n.to?n:t.doc.lineAt(r.to);i.from>n.from&&i.from==r.to&&(i=r.to==n.to+1?n:t.doc.lineAt(r.to-1));let s=e.length-1;s>=0&&e[s].to>n.from?e[s].to=i.to:e.push({from:n.from+/^\s*/.exec(n.text)[0].length,to:i.to})}return e}function eN(t,e,r=e.selection.ranges){let n=r.map(s=>eE(e,s.from).block);if(!n.every(s=>s))return null;let i=r.map((s,o)=>kJ(e,n[o],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(r.map((s,o)=>i[o]?[]:[{from:s.from,insert:n[o].open+" "},{from:s.to,insert:" "+n[o].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let l=n[o],{open:c,close:u}=a;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:s}}return null}function RJ(t,e,r=e.selection.ranges){let n=[],i=-1;for(let{from:s,to:o}of r){let a=n.length,l=1e9,c=eE(e,s).line;if(c){for(let u=s;u<=o;){let h=e.doc.lineAt(u);if(h.from>i&&(s==o||o>h.from)){i=h.from;let f=/^\s*/.exec(h.text)[0].length,d=f==h.length,g=h.text.slice(f,f+c.length)==c?f:-1;f<h.text.length&&f<l&&(l=f),n.push({line:h,comment:g,token:c,indent:f,empty:d,single:!1})}u=h.to+1}if(l<1e9)for(let u=a;u<n.length;u++)n[u].indent<n[u].line.text.length&&(n[u].indent=l);n.length==a+1&&(n[a].single=!0)}}if(t!=2&&n.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:c,empty:u,single:h}of n)(h||!u)&&s.push({from:a.from+c,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&n.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of n)if(a>=0){let c=o.from+a,u=c+l.length;o.text[u-o.from]==" "&&u++,s.push({from:c,to:u})}return{changes:s}}return null}const sy=_s.define(),PJ=_s.define(),IJ=Ue.define(),tN=Ue.define({combine(t){return wa(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,r)=>r},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,r)=>(n,i)=>e(n,i)||r(n,i)})}}),rN=ar.define({create(){return ki.empty},update(t,e){let r=e.state.facet(tN),n=e.annotation(sy);if(n){let l=Yr.fromTransaction(e,n.selection),c=n.side,u=c==0?t.undone:t.done;return l?u=dm(u,u.length,r.minDepth,l):u=sN(u,e.startState.selection),new ki(c==0?n.rest:u,c==0?u:n.rest)}let i=e.annotation(PJ);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(Kt.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Yr.fromTransaction(e),o=e.annotation(Kt.time),a=e.annotation(Kt.userEvent);return s?t=t.addChanges(s,o,a,r,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,r.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new ki(t.done.map(Yr.fromJSON),t.undone.map(Yr.fromJSON))}});function DJ(t={}){return[rN,tN.of(t),He.domEventHandlers({beforeinput(e,r){let n=e.inputType=="historyUndo"?nN:e.inputType=="historyRedo"?oy:null;return n?(e.preventDefault(),n(r)):!1}})]}function Bg(t,e){return function({state:r,dispatch:n}){if(!e&&r.readOnly)return!1;let i=r.field(rN,!1);if(!i)return!1;let s=i.pop(t,r,e);return s?(n(s),!0):!1}}const nN=Bg(0,!1),oy=Bg(1,!1),OJ=Bg(0,!0),LJ=Bg(1,!0);class Yr{constructor(e,r,n,i,s){this.changes=e,this.effects=r,this.mapped=n,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new Yr(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,r,n;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(r=this.mapped)===null||r===void 0?void 0:r.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Yr(e.changes&&Qt.fromJSON(e.changes),[],e.mapped&&Li.fromJSON(e.mapped),e.startSelection&&ke.fromJSON(e.startSelection),e.selectionsAfter.map(ke.fromJSON))}static fromTransaction(e,r){let n=kn;for(let i of e.startState.facet(IJ)){let s=i(e);s.length&&(n=n.concat(s))}return!n.length&&e.changes.empty?null:new Yr(e.changes.invert(e.startState.doc),n,void 0,r||e.startState.selection,kn)}static selection(e){return new Yr(void 0,kn,void 0,void 0,e)}}function dm(t,e,r,n){let i=e+1>r+20?e-r-1:0,s=t.slice(i,e);return s.push(n),s}function NJ(t,e){let r=[],n=!1;return t.iterChangedRanges((i,s)=>r.push(i,s)),e.iterChangedRanges((i,s,o,a)=>{for(let l=0;l<r.length;){let c=r[l++],u=r[l++];a>=c&&o<=u&&(n=!0)}}),n}function MJ(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((r,n)=>r.empty!=e.ranges[n].empty).length===0}function iN(t,e){return t.length?e.length?t.concat(e):t:e}const kn=[],BJ=200;function sN(t,e){if(t.length){let r=t[t.length-1],n=r.selectionsAfter.slice(Math.max(0,r.selectionsAfter.length-BJ));return n.length&&n[n.length-1].eq(e)?t:(n.push(e),dm(t,t.length-1,1e9,r.setSelAfter(n)))}else return[Yr.selection([e])]}function FJ(t){let e=t[t.length-1],r=t.slice();return r[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),r}function w_(t,e){if(!t.length)return t;let r=t.length,n=kn;for(;r;){let i=HJ(t[r-1],e,n);if(i.changes&&!i.changes.empty||i.effects.length){let s=t.slice(0,r);return s[r-1]=i,s}else e=i.mapped,r--,n=i.selectionsAfter}return n.length?[Yr.selection(n)]:kn}function HJ(t,e,r){let n=iN(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):kn,r);if(!t.changes)return Yr.selection(n);let i=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new Yr(i,Je.mapEffects(t.effects,e),o,t.startSelection.map(s),n)}const UJ=/^(input\.type|delete)($|\.)/;class ki{constructor(e,r,n=0,i=void 0){this.done=e,this.undone=r,this.prevTime=n,this.prevUserEvent=i}isolate(){return this.prevTime?new ki(this.done,this.undone):this}addChanges(e,r,n,i,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!n||UJ.test(n))&&(!a.selectionsAfter.length&&r-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,NJ(a.changes,e.changes))||n=="input.type.compose")?o=dm(o,o.length-1,i.minDepth,new Yr(e.changes.compose(a.changes),iN(Je.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,kn)):o=dm(o,o.length,i.minDepth,e),new ki(o,kn,r,n)}addSelection(e,r,n,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:kn;return s.length>0&&r-this.prevTime<i&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&MJ(s[s.length-1],e)?this:new ki(sN(this.done,e),this.undone,r,n)}addMapping(e){return new ki(w_(this.done,e),w_(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,r,n){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1],o=s.selectionsAfter[0]||r.selection;if(n&&s.selectionsAfter.length)return r.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:sy.of({side:e,rest:FJ(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=i.length==1?kn:i.slice(0,i.length-1);return s.mapped&&(a=w_(a,s.mapped)),r.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:sy.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}ki.empty=new ki(kn,kn);const jJ=[{key:"Mod-z",run:nN,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:oy,preventDefault:!0},{linux:"Ctrl-Shift-z",run:oy,preventDefault:!0},{key:"Mod-u",run:OJ,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:LJ,preventDefault:!0}];function ac(t,e){return ke.create(t.ranges.map(e),t.mainIndex)}function Hi(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Qn({state:t,dispatch:e},r){let n=ac(t.selection,r);return n.eq(t.selection,!0)?!1:(e(Hi(t,n)),!0)}function Fg(t,e){return ke.cursor(e?t.to:t.from)}function oN(t,e){return Qn(t,r=>r.empty?t.moveByChar(r,e):Fg(r,e))}function kr(t){return t.textDirectionAt(t.state.selection.main.head)==It.LTR}const aN=t=>oN(t,!kr(t)),lN=t=>oN(t,kr(t));function cN(t,e){return Qn(t,r=>r.empty?t.moveByGroup(r,e):Fg(r,e))}const $J=t=>cN(t,!kr(t)),zJ=t=>cN(t,kr(t));function VJ(t,e,r){if(e.type.prop(r))return!0;let n=e.to-e.from;return n&&(n>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function Hg(t,e,r){let n=gr(t).resolveInner(e.head),i=r?rt.closedBy:rt.openedBy;for(let l=e.head;;){let c=r?n.childAfter(l):n.childBefore(l);if(!c)break;VJ(t,c,i)?n=c:l=r?c.to:c.from}let s=n.type.prop(i),o,a;return s&&(o=r?Ci(t,n.from,1):Ci(t,n.to,-1))&&o.matched?a=r?o.end.to:o.end.from:a=r?n.to:n.from,ke.cursor(a,r?-1:1)}const WJ=t=>Qn(t,e=>Hg(t.state,e,!kr(t))),GJ=t=>Qn(t,e=>Hg(t.state,e,kr(t)));function uN(t,e){return Qn(t,r=>{if(!r.empty)return Fg(r,e);let n=t.moveVertically(r,e);return n.head!=r.head?n:t.moveToLineBoundary(r,e)})}const hN=t=>uN(t,!1),fN=t=>uN(t,!0);function dN(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,r=0,n=0,i;if(e){for(let s of t.state.facet(He.scrollMargins)){let o=s(t);o?.top&&(r=Math.max(o?.top,r)),o?.bottom&&(n=Math.max(o?.bottom,n))}i=t.scrollDOM.clientHeight-r-n}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:r,marginBottom:n,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function pN(t,e){let r=dN(t),{state:n}=t,i=ac(n.selection,o=>o.empty?t.moveVertically(o,e,r.height):Fg(o,e));if(i.eq(n.selection))return!1;let s;if(r.selfScroll){let o=t.coordsAtPos(n.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+r.marginTop,c=a.bottom-r.marginBottom;o&&o.top>l&&o.bottom<c&&(s=He.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(Hi(n,i),{effects:s}),!0}const tk=t=>pN(t,!1),ay=t=>pN(t,!0);function ho(t,e,r){let n=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,r);if(i.head==e.head&&i.head!=(r?n.to:n.from)&&(i=t.moveToLineBoundary(e,r,!1)),!r&&i.head==n.from&&n.length){let s=/^\s*/.exec(t.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;s&&e.head!=n.from+s&&(i=ke.cursor(n.from+s))}return i}const qJ=t=>Qn(t,e=>ho(t,e,!0)),KJ=t=>Qn(t,e=>ho(t,e,!1)),YJ=t=>Qn(t,e=>ho(t,e,!kr(t))),XJ=t=>Qn(t,e=>ho(t,e,kr(t))),QJ=t=>Qn(t,e=>ke.cursor(t.lineBlockAt(e.head).from,1)),ZJ=t=>Qn(t,e=>ke.cursor(t.lineBlockAt(e.head).to,-1));function JJ(t,e,r){let n=!1,i=ac(t.selection,s=>{let o=Ci(t,s.head,-1)||Ci(t,s.head,1)||s.head>0&&Ci(t,s.head-1,1)||s.head<t.doc.length&&Ci(t,s.head+1,-1);if(!o||!o.end)return s;n=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return ke.cursor(a)});return n?(e(Hi(t,i)),!0):!1}const eee=({state:t,dispatch:e})=>JJ(t,e);function Mn(t,e){let r=ac(t.state.selection,n=>{let i=e(n);return ke.range(n.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return r.eq(t.state.selection)?!1:(t.dispatch(Hi(t.state,r)),!0)}function mN(t,e){return Mn(t,r=>t.moveByChar(r,e))}const gN=t=>mN(t,!kr(t)),_N=t=>mN(t,kr(t));function bN(t,e){return Mn(t,r=>t.moveByGroup(r,e))}const tee=t=>bN(t,!kr(t)),ree=t=>bN(t,kr(t)),nee=t=>Mn(t,e=>Hg(t.state,e,!kr(t))),iee=t=>Mn(t,e=>Hg(t.state,e,kr(t)));function yN(t,e){return Mn(t,r=>t.moveVertically(r,e))}const vN=t=>yN(t,!1),wN=t=>yN(t,!0);function EN(t,e){return Mn(t,r=>t.moveVertically(r,e,dN(t).height))}const rk=t=>EN(t,!1),nk=t=>EN(t,!0),see=t=>Mn(t,e=>ho(t,e,!0)),oee=t=>Mn(t,e=>ho(t,e,!1)),aee=t=>Mn(t,e=>ho(t,e,!kr(t))),lee=t=>Mn(t,e=>ho(t,e,kr(t))),cee=t=>Mn(t,e=>ke.cursor(t.lineBlockAt(e.head).from)),uee=t=>Mn(t,e=>ke.cursor(t.lineBlockAt(e.head).to)),ik=({state:t,dispatch:e})=>(e(Hi(t,{anchor:0})),!0),sk=({state:t,dispatch:e})=>(e(Hi(t,{anchor:t.doc.length})),!0),ok=({state:t,dispatch:e})=>(e(Hi(t,{anchor:t.selection.main.anchor,head:0})),!0),ak=({state:t,dispatch:e})=>(e(Hi(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),hee=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),fee=({state:t,dispatch:e})=>{let r=Ug(t).map(({from:n,to:i})=>ke.range(n,Math.min(i+1,t.doc.length)));return e(t.update({selection:ke.create(r),userEvent:"select"})),!0},dee=({state:t,dispatch:e})=>{let r=ac(t.selection,n=>{let i=gr(t),s=i.resolveStack(n.from,1);if(n.empty){let o=i.resolveStack(n.from,-1);o.node.from>=s.node.from&&o.node.to<=s.node.to&&(s=o)}for(let o=s;o;o=o.next){let{node:a}=o;if((a.from<n.from&&a.to>=n.to||a.to>n.to&&a.from<=n.from)&&o.next)return ke.range(a.to,a.from)}return n});return r.eq(t.selection)?!1:(e(Hi(t,r)),!0)},pee=({state:t,dispatch:e})=>{let r=t.selection,n=null;return r.ranges.length>1?n=ke.create([r.main]):r.main.empty||(n=ke.create([ke.cursor(r.main.head)])),n?(e(Hi(t,n)),!0):!1};function Jh(t,e){if(t.state.readOnly)return!1;let r="delete.selection",{state:n}=t,i=n.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(r="delete.backward",l=xd(t,l,!1)):l>o&&(r="delete.forward",l=xd(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=xd(t,o,!1),a=xd(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:ke.cursor(o,o<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(n.update(i,{scrollIntoView:!0,userEvent:r,effects:r=="delete.selection"?He.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function xd(t,e,r){if(t instanceof He)for(let n of t.state.facet(He.atomicRanges).map(i=>i(t)))n.between(e,e,(i,s)=>{i<e&&s>e&&(e=r?s:i)});return e}const SN=(t,e,r)=>Jh(t,n=>{let i=n.from,{state:s}=t,o=s.doc.lineAt(i),a,l;if(r&&!e&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,i-o.from))){if(a[a.length-1]=="	")return i-1;let c=Pg(a,s.tabSize),u=c%lm(s)||lm(s);for(let h=0;h<u&&a[a.length-1-h]==" ";h++)i--;l=i}else l=fr(o.text,i-o.from,e,e)+o.from,l==i&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,i-o.from))&&(l=fr(o.text,l-o.from,!1,!1)+o.from);return l}),ly=t=>SN(t,!1,!0),xN=t=>SN(t,!0,!1),TN=(t,e)=>Jh(t,r=>{let n=r.head,{state:i}=t,s=i.doc.lineAt(n),o=i.charCategorizer(n);for(let a=null;;){if(n==(e?s.to:s.from)){n==r.head&&s.number!=(e?i.doc.lines:1)&&(n+=e?1:-1);break}let l=fr(s.text,n-s.from,e)+s.from,c=s.text.slice(Math.min(n,l)-s.from,Math.max(n,l)-s.from),u=o(c);if(a!=null&&u!=a)break;(c!=" "||n!=r.head)&&(a=u),n=l}return n}),CN=t=>TN(t,!1),mee=t=>TN(t,!0),gee=t=>Jh(t,e=>{let r=t.lineBlockAt(e.head).to;return e.head<r?r:Math.min(t.state.doc.length,e.head+1)}),_ee=t=>Jh(t,e=>{let r=t.moveToLineBoundary(e,!1).head;return e.head>r?r:Math.max(0,e.head-1)}),bee=t=>Jh(t,e=>{let r=t.moveToLineBoundary(e,!0).head;return e.head<r?r:Math.min(t.state.doc.length,e.head+1)}),yee=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=t.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:dt.of(["",""])},range:ke.cursor(n.from)}));return e(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0},vee=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=t.changeByRange(n=>{if(!n.empty||n.from==0||n.from==t.doc.length)return{range:n};let i=n.from,s=t.doc.lineAt(i),o=i==s.from?i-1:fr(s.text,i-s.from,!1)+s.from,a=i==s.to?i+1:fr(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(i,a).append(t.doc.slice(o,i))},range:ke.cursor(a)}});return r.changes.empty?!1:(e(t.update(r,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Ug(t){let e=[],r=-1;for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),s=t.doc.lineAt(n.to);if(!n.empty&&n.to==s.from&&(s=t.doc.lineAt(n.to-1)),r>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(n)}else e.push({from:i.from,to:s.to,ranges:[n]});r=s.number+1}return e}function kN(t,e,r){if(t.readOnly)return!1;let n=[],i=[];for(let s of Ug(t)){if(r?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(r?s.to+1:s.from-1),a=o.length+1;if(r){n.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)i.push(ke.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{n.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)i.push(ke.range(l.anchor-a,l.head-a))}}return n.length?(e(t.update({changes:n,scrollIntoView:!0,selection:ke.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const wee=({state:t,dispatch:e})=>kN(t,e,!1),Eee=({state:t,dispatch:e})=>kN(t,e,!0);function AN(t,e,r){if(t.readOnly)return!1;let n=[];for(let i of Ug(t))r?n.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):n.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const See=({state:t,dispatch:e})=>AN(t,e,!1),xee=({state:t,dispatch:e})=>AN(t,e,!0),Tee=t=>{if(t.state.readOnly)return!1;let{state:e}=t,r=e.changes(Ug(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),n=ac(e.selection,i=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(i.head),a=t.coordsAtPos(i.head,i.assoc||1);a&&(s=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,s)}).map(r);return t.dispatch({changes:r,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Cee(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let r=gr(t).resolveInner(e),n=r.childBefore(e),i=r.childAfter(e),s;return n&&i&&n.to<=e&&i.from>=e&&(s=n.type.prop(rt.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(n.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(n.to,i.from))?{from:n.to,to:i.from}:null}const lk=RN(!1),kee=RN(!0);function RN(t){return({state:e,dispatch:r})=>{if(e.readOnly)return!1;let n=e.changeByRange(i=>{let{from:s,to:o}=i,a=e.doc.lineAt(s),l=!t&&s==o&&Cee(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new Mg(e,{simulateBreak:s,simulateDoubleBreak:!!l}),u=$w(c,s);for(u==null&&(u=Pg(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let h=["",Zu(e,u)];return l&&h.push(Zu(e,c.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:dt.of(h)},range:ke.cursor(s+1+h[1].length)}});return r(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function tE(t,e){let r=-1;return t.changeByRange(n=>{let i=[];for(let o=n.from;o<=n.to;){let a=t.doc.lineAt(o);a.number>r&&(n.empty||n.to>a.from)&&(e(a,i,n),r=a.number),o=a.to+1}let s=t.changes(i);return{changes:i,range:ke.range(s.mapPos(n.anchor,1),s.mapPos(n.head,1))}})}const Aee=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=Object.create(null),n=new Mg(t,{overrideIndentation:s=>{let o=r[s];return o??-1}}),i=tE(t,(s,o,a)=>{let l=$w(n,s.from);if(l==null)return;/\S/.test(s.text)||(l=0);let c=/^\s*/.exec(s.text)[0],u=Zu(t,l);(c!=u||a.from<s.from+c.length)&&(r[s.from]=l,o.push({from:s.from,to:s.from+c.length,insert:u}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},Ree=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(tE(t,(r,n)=>{n.push({from:r.from,insert:t.facet(sc)})}),{userEvent:"input.indent"})),!0),PN=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(tE(t,(r,n)=>{let i=/^\s*/.exec(r.text)[0];if(!i)return;let s=Pg(i,t.tabSize),o=0,a=Zu(t,Math.max(0,s-lm(t)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;n.push({from:r.from+o,to:r.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),Pee=t=>(t.setTabFocusMode(),!0),Iee=[{key:"Ctrl-b",run:aN,shift:gN,preventDefault:!0},{key:"Ctrl-f",run:lN,shift:_N},{key:"Ctrl-p",run:hN,shift:vN},{key:"Ctrl-n",run:fN,shift:wN},{key:"Ctrl-a",run:QJ,shift:cee},{key:"Ctrl-e",run:ZJ,shift:uee},{key:"Ctrl-d",run:xN},{key:"Ctrl-h",run:ly},{key:"Ctrl-k",run:gee},{key:"Ctrl-Alt-h",run:CN},{key:"Ctrl-o",run:yee},{key:"Ctrl-t",run:vee},{key:"Ctrl-v",run:ay}],Dee=[{key:"ArrowLeft",run:aN,shift:gN,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:$J,shift:tee,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:YJ,shift:aee,preventDefault:!0},{key:"ArrowRight",run:lN,shift:_N,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:zJ,shift:ree,preventDefault:!0},{mac:"Cmd-ArrowRight",run:XJ,shift:lee,preventDefault:!0},{key:"ArrowUp",run:hN,shift:vN,preventDefault:!0},{mac:"Cmd-ArrowUp",run:ik,shift:ok},{mac:"Ctrl-ArrowUp",run:tk,shift:rk},{key:"ArrowDown",run:fN,shift:wN,preventDefault:!0},{mac:"Cmd-ArrowDown",run:sk,shift:ak},{mac:"Ctrl-ArrowDown",run:ay,shift:nk},{key:"PageUp",run:tk,shift:rk},{key:"PageDown",run:ay,shift:nk},{key:"Home",run:KJ,shift:oee,preventDefault:!0},{key:"Mod-Home",run:ik,shift:ok},{key:"End",run:qJ,shift:see,preventDefault:!0},{key:"Mod-End",run:sk,shift:ak},{key:"Enter",run:lk,shift:lk},{key:"Mod-a",run:hee},{key:"Backspace",run:ly,shift:ly},{key:"Delete",run:xN},{key:"Mod-Backspace",mac:"Alt-Backspace",run:CN},{key:"Mod-Delete",mac:"Alt-Delete",run:mee},{mac:"Mod-Backspace",run:_ee},{mac:"Mod-Delete",run:bee}].concat(Iee.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),Oee=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:WJ,shift:nee},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:GJ,shift:iee},{key:"Alt-ArrowUp",run:wee},{key:"Shift-Alt-ArrowUp",run:See},{key:"Alt-ArrowDown",run:Eee},{key:"Shift-Alt-ArrowDown",run:xee},{key:"Escape",run:pee},{key:"Mod-Enter",run:kee},{key:"Alt-l",mac:"Ctrl-l",run:fee},{key:"Mod-i",run:dee,preventDefault:!0},{key:"Mod-[",run:PN},{key:"Mod-]",run:Ree},{key:"Mod-Alt-\\",run:Aee},{key:"Shift-Mod-k",run:Tee},{key:"Shift-Mod-\\",run:eee},{key:"Mod-/",run:SJ},{key:"Alt-A",run:TJ},{key:"Ctrl-m",mac:"Shift-Alt-m",run:Pee}].concat(Dee);function br(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,r=arguments[1];if(r&&typeof r=="object"&&r.nodeType==null&&!Array.isArray(r)){for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){var i=r[n];typeof i=="string"?t.setAttribute(n,i):i!=null&&(t[n]=i)}e++}for(;e<arguments.length;e++)IN(t,arguments[e]);return t}function IN(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var r=0;r<e.length;r++)IN(t,e[r]);else throw new RangeError("Unsupported child node: "+e)}const ck=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class th{constructor(e,r,n=0,i=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,i),this.bufferStart=n,this.normalize=s?a=>s(ck(a)):ck,this.query=this.normalize(r)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Wr(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let r=Tw(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=Un(e);let i=this.normalize(r);if(i.length)for(let s=0,o=n;;s++){let a=i.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==i.length-1){if(l)return this.value=l,this;break}o==n&&s<r.length&&r.charCodeAt(s)==a&&o++}}}match(e,r,n){let i=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[s+1],to:n}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:r,to:n}:this.matches.push(1,r)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(th.prototype[Symbol.iterator]=function(){return this});const DN={from:-1,to:-1,match:/.*/.exec("")},rE="gm"+(/x/.unicode==null?"":"u");class ON{constructor(e,r,n,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=DN,/\\[sWDnr]|\n|\r|\[\^/.test(r))return new LN(e,r,n,i,s);this.re=new RegExp(r,rE+(n?.ignoreCase?"i":"")),this.test=n?.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=pm(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let r=this.matchPos<=this.to&&this.re.exec(this.curLine);if(r){let n=this.curLineStart+r.index,i=n+r[0].length;if(this.matchPos=pm(this.text,i+(n==i?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<i||n>this.value.to)&&(!this.test||this.test(n,i,r)))return this.value={from:n,to:i,match:r},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const E_=new WeakMap;class yl{constructor(e,r){this.from=e,this.text=r}get to(){return this.from+this.text.length}static get(e,r,n){let i=E_.get(e);if(!i||i.from>=n||i.to<=r){let a=new yl(r,e.sliceString(r,n));return E_.set(e,a),a}if(i.from==r&&i.to==n)return i;let{text:s,from:o}=i;return o>r&&(s=e.sliceString(r,o)+s,o=r),i.to<n&&(s+=e.sliceString(i.to,n)),E_.set(e,new yl(o,s)),new yl(r,s.slice(r-o,n-o))}}class LN{constructor(e,r,n,i,s){this.text=e,this.to=s,this.done=!1,this.value=DN,this.matchPos=pm(e,i),this.re=new RegExp(r,rE+(n?.ignoreCase?"i":"")),this.test=n?.test,this.flat=yl.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,r=this.re.exec(this.flat.text);if(r&&!r[0]&&r.index==e&&(this.re.lastIndex=e+1,r=this.re.exec(this.flat.text)),r){let n=this.flat.from+r.index,i=n+r[0].length;if((this.flat.to>=this.to||r.index+r[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,i,r)))return this.value={from:n,to:i,match:r},this.matchPos=pm(this.text,i+(n==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=yl.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(ON.prototype[Symbol.iterator]=LN.prototype[Symbol.iterator]=function(){return this});function Lee(t){try{return new RegExp(t,rE),!0}catch{return!1}}function pm(t,e){if(e>=t.length)return e;let r=t.lineAt(e),n;for(;e<r.to&&(n=r.text.charCodeAt(e-r.from))>=56320&&n<57344;)e++;return e}function cy(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),r=br("input",{class:"cm-textfield",name:"line",value:e}),n=br("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:mm.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},br("label",t.state.phrase("Go to line"),": ",r)," ",br("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(r.value);if(!s)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,l,c,u,h]=s,f=u?+u.slice(1):0,d=c?+c:a.number;if(c&&h){let m=d/100;l&&(m=m*(l=="-"?-1:1)+a.number/o.doc.lines),d=Math.round(o.doc.lines*m)}else c&&l&&(d=d*(l=="-"?-1:1)+a.number);let g=o.doc.line(Math.max(1,Math.min(o.doc.lines,d))),_=ke.cursor(g.from+Math.max(0,Math.min(f,g.length)));t.dispatch({effects:[mm.of(!1),He.scrollIntoView(_.from,{y:"center"})],selection:_}),t.focus()}return{dom:n}}const mm=Je.define(),uk=ar.define({create(){return!0},update(t,e){for(let r of e.effects)r.is(mm)&&(t=r.value);return t},provide:t=>nm.from(t,e=>e?cy:null)}),Nee=t=>{let e=rm(t,cy);if(!e){let r=[mm.of(!0)];t.state.field(uk,!1)==null&&r.push(Je.appendConfig.of([uk,Mee])),t.dispatch({effects:r}),e=rm(t,cy)}return e&&e.dom.querySelector("input").select(),!0},Mee=He.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Bee=({state:t,dispatch:e})=>{let{selection:r}=t,n=ke.create(r.ranges.map(i=>t.wordAt(i.head)||ke.cursor(i.head)),r.mainIndex);return n.eq(r)?!1:(e(t.update({selection:n})),!0)};function Fee(t,e){let{main:r,ranges:n}=t.selection,i=t.wordAt(r.head),s=i&&i.from==r.from&&i.to==r.to;for(let o=!1,a=new th(t.doc,e,n[n.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new th(t.doc,e,0,Math.max(0,n[n.length-1].from-1)),o=!0}else{if(o&&n.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const Hee=({state:t,dispatch:e})=>{let{ranges:r}=t.selection;if(r.some(s=>s.from===s.to))return Bee({state:t,dispatch:e});let n=t.sliceDoc(r[0].from,r[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=n))return!1;let i=Fee(t,n);return i?(e(t.update({selection:t.selection.addRange(ke.range(i.from,i.to),!1),effects:He.scrollIntoView(i.to)})),!0):!1},lc=Ue.define({combine(t){return wa(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Qee(e),scrollToMatch:e=>He.scrollIntoView(e)})}});class NN{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Lee(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(r,n)=>n=="n"?`
`:n=="r"?"\r":n=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new zee(this):new jee(this)}getCursor(e,r=0,n){let i=e.doc?e:ot.create({doc:e});return n==null&&(n=i.doc.length),this.regexp?Ga(this,i,r,n):Wa(this,i,r,n)}}class MN{constructor(e){this.spec=e}}function Wa(t,e,r,n){return new th(e.doc,t.unquoted,r,n,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?Uee(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Uee(t,e){return(r,n,i,s)=>((s>r||s+i.length<n)&&(s=Math.max(0,r-2),i=t.sliceString(s,Math.min(t.length,n+2))),(e(gm(i,r-s))!=Yt.Word||e(_m(i,r-s))!=Yt.Word)&&(e(_m(i,n-s))!=Yt.Word||e(gm(i,n-s))!=Yt.Word))}class jee extends MN{constructor(e){super(e)}nextMatch(e,r,n){let i=Wa(this.spec,e,n,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,r+this.spec.unquoted.length);i=Wa(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==r&&i.value.to==n?null:i.value}prevMatchInRange(e,r,n){for(let i=n;;){let s=Math.max(r,i-1e4-this.spec.unquoted.length),o=Wa(this.spec,e,s,i),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==r)return null;i-=1e4}}prevMatch(e,r,n){let i=this.prevMatchInRange(e,0,r);return i||(i=this.prevMatchInRange(e,Math.max(0,n-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=r||i.to!=n)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,r){let n=Wa(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=r)return null;i.push(n.value)}return i}highlight(e,r,n,i){let s=Wa(this.spec,e,Math.max(0,r-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function Ga(t,e,r,n){return new ON(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?$ee(e.charCategorizer(e.selection.main.head)):void 0},r,n)}function gm(t,e){return t.slice(fr(t,e,!1),e)}function _m(t,e){return t.slice(e,fr(t,e))}function $ee(t){return(e,r,n)=>!n[0].length||(t(gm(n.input,n.index))!=Yt.Word||t(_m(n.input,n.index))!=Yt.Word)&&(t(_m(n.input,n.index+n[0].length))!=Yt.Word||t(gm(n.input,n.index+n[0].length))!=Yt.Word)}class zee extends MN{nextMatch(e,r,n){let i=Ga(this.spec,e,n,e.doc.length).next();return i.done&&(i=Ga(this.spec,e,0,r).next()),i.done?null:i.value}prevMatchInRange(e,r,n){for(let i=1;;i++){let s=Math.max(r,n-i*1e4),o=Ga(this.spec,e,s,n),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==r||a.from>s+10))return a;if(s==r)return null}}prevMatch(e,r,n){return this.prevMatchInRange(e,0,r)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(r,n)=>n=="$"?"$":n=="&"?e.match[0]:n!="0"&&+n<e.match.length?e.match[n]:r)}matchAll(e,r){let n=Ga(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=r)return null;i.push(n.value)}return i}highlight(e,r,n,i){let s=Ga(this.spec,e,Math.max(0,r-250),Math.min(n+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const rh=Je.define(),nE=Je.define(),qs=ar.define({create(t){return new S_(uy(t).create(),null)},update(t,e){for(let r of e.effects)r.is(rh)?t=new S_(r.value.create(),t.panel):r.is(nE)&&(t=new S_(t.query,r.value?iE:null));return t},provide:t=>nm.from(t,e=>e.panel)});class S_{constructor(e,r){this.query=e,this.panel=r}}const Vee=it.mark({class:"cm-searchMatch"}),Wee=it.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Gee=mr.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(qs))}update(t){let e=t.state.field(qs);(e!=t.startState.field(qs)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return it.none;let{view:r}=this,n=new sa;for(let i=0,s=r.visibleRanges,o=s.length;i<o;i++){let{from:a,to:l}=s[i];for(;i<o-1&&l>s[i+1].from-2*250;)l=s[++i].to;t.highlight(r.state,a,l,(c,u)=>{let h=r.state.selection.ranges.some(f=>f.from==c&&f.to==u);n.add(c,u,h?Wee:Vee)})}return n.finish()}},{decorations:t=>t.decorations});function ef(t){return e=>{let r=e.state.field(qs,!1);return r&&r.query.spec.valid?t(e,r):HN(e)}}const bm=ef((t,{query:e})=>{let{to:r}=t.state.selection.main,n=e.nextMatch(t.state,r,r);if(!n)return!1;let i=ke.single(n.from,n.to),s=t.state.facet(lc);return t.dispatch({selection:i,effects:[sE(t,n),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),FN(t),!0}),ym=ef((t,{query:e})=>{let{state:r}=t,{from:n}=r.selection.main,i=e.prevMatch(r,n,n);if(!i)return!1;let s=ke.single(i.from,i.to),o=t.state.facet(lc);return t.dispatch({selection:s,effects:[sE(t,i),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),FN(t),!0}),qee=ef((t,{query:e})=>{let r=e.matchAll(t.state,1e3);return!r||!r.length?!1:(t.dispatch({selection:ke.create(r.map(n=>ke.range(n.from,n.to))),userEvent:"select.search.matches"}),!0)}),Kee=({state:t,dispatch:e})=>{let r=t.selection;if(r.ranges.length>1||r.main.empty)return!1;let{from:n,to:i}=r.main,s=[],o=0;for(let a=new th(t.doc,t.sliceDoc(n,i));!a.next().done;){if(s.length>1e3)return!1;a.value.from==n&&(o=s.length),s.push(ke.range(a.value.from,a.value.to))}return e(t.update({selection:ke.create(s,o),userEvent:"select.search.matches"})),!0},hk=ef((t,{query:e})=>{let{state:r}=t,{from:n,to:i}=r.selection.main;if(r.readOnly)return!1;let s=e.nextMatch(r,n,n);if(!s)return!1;let o=s,a=[],l,c,u=[];if(o.from==n&&o.to==i&&(c=r.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(r,o.from,o.to),u.push(He.announce.of(r.phrase("replaced match on line $",r.doc.lineAt(n).number)+"."))),o){let h=a.length==0||a[0].from>=s.to?0:s.to-s.from-c.length;l=ke.single(o.from-h,o.to-h),u.push(sE(t,o)),u.push(r.facet(lc).scrollToMatch(l.main,t))}return t.dispatch({changes:a,selection:l,effects:u,userEvent:"input.replace"}),!0}),Yee=ef((t,{query:e})=>{if(t.state.readOnly)return!1;let r=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:e.getReplacement(i)}});if(!r.length)return!1;let n=t.state.phrase("replaced $ matches",r.length)+".";return t.dispatch({changes:r,effects:He.announce.of(n),userEvent:"input.replace.all"}),!0});function iE(t){return t.state.facet(lc).createPanel(t)}function uy(t,e){var r,n,i,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=t.facet(lc);return new NN({search:((r=e?.literal)!==null&&r!==void 0?r:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(n=e?.caseSensitive)!==null&&n!==void 0?n:c.caseSensitive,literal:(i=e?.literal)!==null&&i!==void 0?i:c.literal,regexp:(s=e?.regexp)!==null&&s!==void 0?s:c.regexp,wholeWord:(o=e?.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function BN(t){let e=rm(t,iE);return e&&e.dom.querySelector("[main-field]")}function FN(t){let e=BN(t);e&&e==t.root.activeElement&&e.select()}const HN=t=>{let e=t.state.field(qs,!1);if(e&&e.panel){let r=BN(t);if(r&&r!=t.root.activeElement){let n=uy(t.state,e.query.spec);n.valid&&t.dispatch({effects:rh.of(n)}),r.focus(),r.select()}}else t.dispatch({effects:[nE.of(!0),e?rh.of(uy(t.state,e.query.spec)):Je.appendConfig.of(Jee)]});return!0},UN=t=>{let e=t.state.field(qs,!1);if(!e||!e.panel)return!1;let r=rm(t,iE);return r&&r.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:nE.of(!1)}),!0},Xee=[{key:"Mod-f",run:HN,scope:"editor search-panel"},{key:"F3",run:bm,shift:ym,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:bm,shift:ym,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:UN,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Kee},{key:"Mod-Alt-g",run:Nee},{key:"Mod-d",run:Hee,preventDefault:!0}];class Qee{constructor(e){this.view=e;let r=this.query=e.state.field(qs).query.spec;this.commit=this.commit.bind(this),this.searchField=br("input",{value:r.search,placeholder:rn(e,"Find"),"aria-label":rn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=br("input",{value:r.replace,placeholder:rn(e,"Replace"),"aria-label":rn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=br("input",{type:"checkbox",name:"case",form:"",checked:r.caseSensitive,onchange:this.commit}),this.reField=br("input",{type:"checkbox",name:"re",form:"",checked:r.regexp,onchange:this.commit}),this.wordField=br("input",{type:"checkbox",name:"word",form:"",checked:r.wholeWord,onchange:this.commit});function n(i,s,o){return br("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=br("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,n("next",()=>bm(e),[rn(e,"next")]),n("prev",()=>ym(e),[rn(e,"previous")]),n("select",()=>qee(e),[rn(e,"all")]),br("label",null,[this.caseField,rn(e,"match case")]),br("label",null,[this.reField,rn(e,"regexp")]),br("label",null,[this.wordField,rn(e,"by word")]),...e.state.readOnly?[]:[br("br"),this.replaceField,n("replace",()=>hk(e),[rn(e,"replace")]),n("replaceAll",()=>Yee(e),[rn(e,"replace all")])],br("button",{name:"close",onclick:()=>UN(e),"aria-label":rn(e,"close"),type:"button"},[""])])}commit(){let e=new NN({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:rh.of(e)}))}keydown(e){MX(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?ym:bm)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),hk(this.view))}update(e){for(let r of e.transactions)for(let n of r.effects)n.is(rh)&&!n.value.eq(this.query)&&this.setQuery(n.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(lc).top}}function rn(t,e){return t.state.phrase(e)}const Td=30,Cd=/[\s\.,:;?!]/;function sE(t,{from:e,to:r}){let n=t.state.doc.lineAt(e),i=t.state.doc.lineAt(r).to,s=Math.max(n.from,e-Td),o=Math.min(i,r+Td),a=t.state.sliceDoc(s,o);if(s!=n.from){for(let l=0;l<Td;l++)if(!Cd.test(a[l+1])&&Cd.test(a[l])){a=a.slice(l);break}}if(o!=i){for(let l=a.length-1;l>a.length-Td;l--)if(!Cd.test(a[l-1])&&Cd.test(a[l])){a=a.slice(0,l);break}}return He.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${n.number}.`)}const Zee=He.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Jee=[qs,uo.low(Gee),Zee];function ete(){return R.jsx("div",{className:"flex items-center justify-center absolute inset-0 z-10 text-sm bg-tk-elements-app-backgroundColor text-tk-elements-app-textColor",children:"File format cannot be displayed."})}function vm(){return vm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vm.apply(null,arguments)}var jN=t=>{var{theme:e,settings:r={},styles:n=[]}=t,i={".cm-gutters":{}},s={};r.background&&(s.backgroundColor=r.background),r.backgroundImage&&(s.backgroundImage=r.backgroundImage),r.foreground&&(s.color=r.foreground),r.fontSize&&(s.fontSize=r.fontSize),(r.background||r.foreground)&&(i["&"]=s),r.fontFamily&&(i["&.cm-editor .cm-scroller"]={fontFamily:r.fontFamily}),r.gutterBackground&&(i[".cm-gutters"].backgroundColor=r.gutterBackground),r.gutterForeground&&(i[".cm-gutters"].color=r.gutterForeground),r.gutterBorder&&(i[".cm-gutters"].borderRightColor=r.gutterBorder),r.caret&&(i[".cm-content"]={caretColor:r.caret},i[".cm-cursor, .cm-dropCursor"]={borderLeftColor:r.caret});var o={};r.gutterActiveForeground&&(o.color=r.gutterActiveForeground),r.lineHighlight&&(i[".cm-activeLine"]={backgroundColor:r.lineHighlight},o.backgroundColor=r.lineHighlight),i[".cm-activeLineGutter"]=o,r.selection&&(i["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:r.selection+" !important"}),r.selectionMatch&&(i["& .cm-selectionMatch"]={backgroundColor:r.selectionMatch});var a=He.theme(i,{dark:e==="dark"}),l=Qh.define(n),c=[a,fZ(l)];return c},tte={background:"#ffffff",foreground:"#383a42",caret:"#000",selection:"#add6ff",selectionMatch:"#a8ac94",lineHighlight:"#99999926",gutterBackground:"#fff",gutterForeground:"#237893",gutterActiveForeground:"#0b216f",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},rte=[{tag:[ce.keyword,ce.operatorKeyword,ce.modifier,ce.color,ce.constant(ce.name),ce.standard(ce.name),ce.standard(ce.tagName),ce.special(ce.brace),ce.atom,ce.bool,ce.special(ce.variableName)],color:"#0000ff"},{tag:[ce.moduleKeyword,ce.controlKeyword],color:"#af00db"},{tag:[ce.name,ce.deleted,ce.character,ce.macroName,ce.propertyName,ce.variableName,ce.labelName,ce.definition(ce.name)],color:"#0070c1"},{tag:ce.heading,fontWeight:"bold",color:"#0070c1"},{tag:[ce.typeName,ce.className,ce.tagName,ce.number,ce.changed,ce.annotation,ce.self,ce.namespace],color:"#267f99"},{tag:[ce.function(ce.variableName),ce.function(ce.propertyName)],color:"#795e26"},{tag:[ce.number],color:"#098658"},{tag:[ce.operator,ce.punctuation,ce.separator,ce.url,ce.escape,ce.regexp],color:"#383a42"},{tag:[ce.regexp],color:"#af00db"},{tag:[ce.special(ce.string),ce.processingInstruction,ce.string,ce.inserted],color:"#a31515"},{tag:[ce.angleBracket],color:"#383a42"},{tag:ce.strong,fontWeight:"bold"},{tag:ce.emphasis,fontStyle:"italic"},{tag:ce.strikethrough,textDecoration:"line-through"},{tag:[ce.meta,ce.comment],color:"#008000"},{tag:ce.link,color:"#4078f2",textDecoration:"underline"},{tag:ce.invalid,color:"#e45649"}];function nte(t){var{theme:e="light",settings:r={},styles:n=[]}={};return jN({theme:e,settings:vm({},tte,r),styles:[...rte,...n]})}var ite=nte(),ste={background:"#1e1e1e",foreground:"#9cdcfe",caret:"#c6c6c6",selection:"#6199ff2f",selectionMatch:"#72a1ff59",lineHighlight:"#ffffff0f",gutterBackground:"#1e1e1e",gutterForeground:"#838383",gutterActiveForeground:"#fff",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},ote=[{tag:[ce.keyword,ce.operatorKeyword,ce.modifier,ce.color,ce.constant(ce.name),ce.standard(ce.name),ce.standard(ce.tagName),ce.special(ce.brace),ce.atom,ce.bool,ce.special(ce.variableName)],color:"#569cd6"},{tag:[ce.controlKeyword,ce.moduleKeyword],color:"#c586c0"},{tag:[ce.name,ce.deleted,ce.character,ce.macroName,ce.propertyName,ce.variableName,ce.labelName,ce.definition(ce.name)],color:"#9cdcfe"},{tag:ce.heading,fontWeight:"bold",color:"#9cdcfe"},{tag:[ce.typeName,ce.className,ce.tagName,ce.number,ce.changed,ce.annotation,ce.self,ce.namespace],color:"#4ec9b0"},{tag:[ce.function(ce.variableName),ce.function(ce.propertyName)],color:"#dcdcaa"},{tag:[ce.number],color:"#b5cea8"},{tag:[ce.operator,ce.punctuation,ce.separator,ce.url,ce.escape,ce.regexp],color:"#d4d4d4"},{tag:[ce.regexp],color:"#d16969"},{tag:[ce.special(ce.string),ce.processingInstruction,ce.string,ce.inserted],color:"#ce9178"},{tag:[ce.angleBracket],color:"#808080"},{tag:ce.strong,fontWeight:"bold"},{tag:ce.emphasis,fontStyle:"italic"},{tag:ce.strikethrough,textDecoration:"line-through"},{tag:[ce.meta,ce.comment],color:"#6a9955"},{tag:ce.link,color:"#6a9955",textDecoration:"underline"},{tag:ce.invalid,color:"#ff0000"}];function ate(t){var{theme:e="dark",settings:r={},styles:n=[]}={};return jN({theme:e,settings:vm({},ste,r),styles:[...ote,...n]})}var lte=ate();He.theme({},{dark:!0});const hy=new nc;function cte(t,e={}){return[ute(e),t==="dark"?hy.of([VN()]):hy.of([zN()])]}function $N(t){return hy.reconfigure(t==="dark"?VN():zN())}function ute(t){return He.theme({"&":{fontSize:t.fontSize??"12px"},"&.cm-editor":{height:"100%",background:"var(--cm-backgroundColor)",color:"var(--cm-textColor)"},".cm-cursor":{borderLeft:"var(--cm-cursor-width) solid var(--cm-cursor-backgroundColor)"},".cm-scroller":{lineHeight:"1.5","&:focus-visible":{outline:"none"}},".cm-line":{padding:"0 0 0 4px"},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{backgroundColor:"var(--cm-selection-backgroundColorFocused) !important",opacity:"var(--cm-selection-backgroundOpacityFocused, 0.3)"},"&:not(.cm-focused) > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{backgroundColor:"var(--cm-selection-backgroundColorBlured)",opacity:"var(--cm-selection-backgroundOpacityBlured, 0.3)"},"&.cm-focused > .cm-scroller .cm-matchingBracket":{backgroundColor:"var(--cm-matching-bracket)"},".cm-activeLine":{background:"var(--cm-activeLineBackgroundColor)"},".cm-gutters":{background:"var(--cm-gutter-backgroundColor)",borderRight:0,color:"var(--cm-gutter-textColor)"},".cm-gutter":{"&.cm-lineNumbers":{fontFamily:"Roboto Mono, monospace",fontSize:t.gutterFontSize??t.fontSize??"12px",minWidth:"40px"},"& .cm-activeLineGutter":{background:"transparent",color:"var(--cm-gutter-activeLineTextColor)"},"&.cm-foldGutter .cm-gutterElement > .fold-icon":{cursor:"pointer",color:"var(--cm-foldGutter-textColor)",transform:"translateY(2px)","&:hover":{color:"var(--cm-foldGutter-textColorHover)"}}},".cm-foldGutter .cm-gutterElement":{padding:"0 4px"},".cm-tooltip-autocomplete > ul > li":{minHeight:"18px"},".cm-panel.cm-search label":{marginLeft:"2px",fontSize:"12px"},".cm-panel.cm-search .cm-button":{fontSize:"12px"},".cm-panel.cm-search .cm-textfield":{fontSize:"12px"},".cm-panel.cm-search input[type=checkbox]":{position:"relative",transform:"translateY(2px)",marginRight:"4px"},".cm-panels":{borderColor:"var(--cm-panels-borderColor)"},".cm-panels-bottom":{borderTop:"1px solid var(--cm-panels-borderColor)",backgroundColor:"transparent"},".cm-panel.cm-search":{background:"var(--cm-search-backgroundColor)",color:"var(--cm-search-textColor)",padding:"8px"},".cm-search .cm-button":{background:"var(--cm-search-button-backgroundColor)",borderColor:"var(--cm-search-button-borderColor)",color:"var(--cm-search-button-textColor)",borderRadius:"4px","&:hover":{color:"var(--cm-search-button-textColorHover)"},"&:focus-visible":{outline:"none",borderColor:"var(--cm-search-button-borderColorFocused)"},"&:hover:not(:focus-visible)":{background:"var(--cm-search-button-backgroundColorHover)",borderColor:"var(--cm-search-button-borderColorHover)"},"&:hover:focus-visible":{background:"var(--cm-search-button-backgroundColorHover)",borderColor:"var(--cm-search-button-borderColorFocused)"}},".cm-panel.cm-search [name=close]":{top:"6px",right:"6px",padding:"0 6px",fontSize:"1rem",backgroundColor:"var(--cm-search-closeButton-backgroundColor)",color:"var(--cm-search-closeButton-textColor)","&:hover":{"border-radius":"6px",color:"var(--cm-search-closeButton-textColorHover)",backgroundColor:"var(--cm-search-closeButton-backgroundColorHover)"}},".cm-search input":{background:"var(--cm-search-input-backgroundColor)",borderColor:"var(--cm-search-input-borderColor)",color:"var(--cm-search-input-textColor)",outline:"none",borderRadius:"4px","&:focus-visible":{borderColor:"var(--cm-search-input-borderColorFocused)"}},".cm-tooltip":{background:"var(--cm-tooltip-backgroundColor)",border:"1px solid transparent",borderColor:"var(--cm-tooltip-borderColor)",color:"var(--cm-tooltip-textColor)"},".cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected]":{background:"var(--cm-tooltip-backgroundColorSelected)",color:"var(--cm-tooltip-textColorSelected)"},".cm-searchMatch":{backgroundColor:"var(--cm-searchMatch-backgroundColor)"},".cm-tooltip.cm-readonly-tooltip":{padding:"4px",whiteSpace:"nowrap",backgroundColor:"var(--bolt-elements-bg-depth-2)",borderColor:"var(--bolt-elements-borderColorActive)","& .cm-tooltip-arrow:before":{borderTopColor:"var(--bolt-elements-borderColorActive)"},"& .cm-tooltip-arrow:after":{borderTopColor:"transparent"}}})}function zN(){return ite}function VN(){return lte}const hte={key:"Tab",run:fte,shift:PN};function fte({state:t,dispatch:e}){return t.readOnly?!1:(e(t.update(dte(t,(r,n,i)=>{i.push({from:r,to:n,insert:t.facet(sc)})}),{userEvent:"input.indent"})),!0)}function dte(t,e){return t.changeByRange(r=>{const n=[],i=t.doc.lineAt(r.from);if(r.from===r.to)e(r.from,void 0,n,i);else if(r.from<r.to&&r.to<=i.to)e(r.from,r.to,n,i);else{let o=-1;for(let a=r.from;a<=r.to;){const l=t.doc.lineAt(a);l.number>o&&(r.empty||r.to>l.from)&&(e(l.from,void 0,n,l),o=l.number),a=l.to+1}}const s=t.changes(n);return{changes:n,range:ke.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const pte="modulepreload",mte=function(t){return"/"+t},fk={},Y=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");i=Promise.allSettled(r.map(l=>{if(l=mte(l),l in fk)return;fk[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":pte,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((f,d)=>{h.addEventListener("load",f),h.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},gte=[lr.of({name:"VUE",extensions:["vue"],async load(){return Y(()=>import("./index-D3PGQDI8.js"),__vite__mapDeps([0,1,2,3,4,5,6])).then(t=>t.vue())}}),lr.of({name:"TS",extensions:["ts"],async load(){return Y(()=>import("./index-BNJ1ZdAv.js"),__vite__mapDeps([6,2,4,5])).then(t=>t.javascript({typescript:!0}))}}),lr.of({name:"JS",extensions:["js","mjs","cjs"],async load(){return Y(()=>import("./index-BNJ1ZdAv.js"),__vite__mapDeps([6,2,4,5])).then(t=>t.javascript())}}),lr.of({name:"TSX",extensions:["tsx"],async load(){return Y(()=>import("./index-BNJ1ZdAv.js"),__vite__mapDeps([6,2,4,5])).then(t=>t.javascript({jsx:!0,typescript:!0}))}}),lr.of({name:"JSX",extensions:["jsx"],async load(){return Y(()=>import("./index-BNJ1ZdAv.js"),__vite__mapDeps([6,2,4,5])).then(t=>t.javascript({jsx:!0}))}}),lr.of({name:"HTML",extensions:["html"],async load(){return Y(()=>import("./index-SNFsn88H.js"),__vite__mapDeps([1,2,3,4,5,6])).then(t=>t.html())}}),lr.of({name:"CSS",extensions:["css"],async load(){return Y(()=>import("./index-CzbwSc2E.js"),__vite__mapDeps([3,2,4,5])).then(t=>t.css())}}),lr.of({name:"SASS",extensions:["sass"],async load(){return Y(()=>import("./index-BHWf2QoM.js"),__vite__mapDeps([7,2,3,4,5])).then(t=>t.sass({indented:!0}))}}),lr.of({name:"SCSS",extensions:["scss"],async load(){return Y(()=>import("./index-BHWf2QoM.js"),__vite__mapDeps([7,2,3,4,5])).then(t=>t.sass({indented:!1}))}}),lr.of({name:"JSON",extensions:["json"],async load(){return Y(()=>import("./index-Bp0rEeD9.js"),__vite__mapDeps([8,2,4,5])).then(t=>t.json())}}),lr.of({name:"Markdown",extensions:["md"],async load(){return Y(()=>import("./index-Dj6cA1R3.js"),__vite__mapDeps([9,1,2,3,4,5,6])).then(t=>t.markdown())}}),lr.of({name:"Wasm",extensions:["wat"],async load(){return Y(()=>import("./index-oa95Mr20.js"),__vite__mapDeps([10,2,4,5])).then(t=>t.wast())}}),lr.of({name:"Python",extensions:["py"],async load(){return Y(()=>import("./index-CNL49K8X.js"),__vite__mapDeps([11,2,4,5])).then(t=>t.python())}}),lr.of({name:"C++",extensions:["cpp"],async load(){return Y(()=>import("./index-B2iry4QC.js"),__vite__mapDeps([12,2,4,5])).then(t=>t.cpp())}})];async function _te(t){const e=lr.matchFilename(gte,t);if(e)return await e.load()}const bte=Fr("CodeMirrorEditor"),WN=Je.define(),yte=ar.define({create:()=>[],update(t,e){if(!e.state.readOnly)return[];for(const r of e.effects)if(r.is(WN)&&r.value)return Ete(e.state);return[]},provide:t=>Fw.computeN([t],e=>e.field(t))}),GN=Je.define(),dk=ar.define({create(){return!0},update(t,e){for(const r of e.effects)if(r.is(GN))return r.value;return t}}),qN=D.memo(({id:t,doc:e,debounceScroll:r=100,debounceChange:n=150,autoFocusOnDocumentChange:i=!1,editable:s=!0,onScroll:o,onChange:a,onSave:l,theme:c,settings:u,className:h=""})=>{Jl.trace("CodeMirrorEditor");const[f]=D.useState(new nc),d=D.useRef(null),g=D.useRef(),_=D.useRef(),m=D.useRef(),p=D.useRef(),b=D.useRef(o),y=D.useRef(a),v=D.useRef(l);return D.useEffect(()=>{b.current=o,y.current=a,v.current=l,m.current=e,_.current=c}),D.useEffect(()=>{const w=Rg(x=>{y.current?.(x)},n),S=new He({parent:d.current,dispatchTransactions(x){const E=S.state.selection;S.update(x);const T=S.state.selection,k=T!==E&&(T===void 0||E===void 0||!T.eq(E));m.current&&(x.some(B=>B.docChanged)||k)&&(w({selection:S.state.selection,content:S.state.doc.toString()}),p.current.set(m.current.filePath,S.state))}});return g.current=S,()=>{g.current?.destroy(),g.current=void 0}},[]),D.useEffect(()=>{g.current&&g.current.dispatch({effects:[$N(c)]})},[c]),D.useEffect(()=>{p.current=new Map},[t]),D.useEffect(()=>{const w=p.current,S=g.current,x=_.current;if(!e){const T=pk("",x,u,b,r,v,[f.of([])]);S.setState(T),vte(S);return}if(e.isBinary)return;e.filePath===""&&bte.warn("File path should not be empty");let E=w.get(e.filePath);E||(E=pk(e.value,x,u,b,r,v,[f.of([])]),w.set(e.filePath,E)),S.setState(E),wte(S,x,s,f,i,e)},[e?.value,s,e?.filePath,i]),R.jsxs("div",{className:je("relative h-full",h),children:[e?.isBinary&&R.jsx(ete,{}),R.jsx("div",{className:"h-full overflow-hidden",ref:d})]})});qN.displayName="CodeMirrorEditor";function pk(t,e,r,n,i,s,o){return ot.create({doc:t,extensions:[He.domEventHandlers({scroll:Rg((a,l)=>{a.target===l.scrollDOM&&n.current?.({left:l.scrollDOM.scrollLeft,top:l.scrollDOM.scrollTop})},i),keydown:(a,l)=>l.state.readOnly?(l.dispatch({effects:[WN.of(a.key!=="Escape")]}),!0):!1}),cte(e,r),DJ(),Ng.of([...Oee,...jJ,...Xee,{key:"Tab",run:Y3},{key:"Mod-s",preventDefault:!0,run:()=>(s.current?.(),!0)},hte]),sc.of("	"),vJ({closeOnBlur:!1}),JX({position:"absolute",parent:document.body,tooltipSpace:a=>{const l=a.dom.getBoundingClientRect();return{top:l.top-50,left:l.left,bottom:l.bottom,right:l.right+10}}}),uJ(),fQ(),KX(),qX(),$X(),wZ(),ot.tabSize.of(r?.tabSize??2),JQ(),yte,dk,ot.readOnly.from(dk,a=>!a),mQ(),YX(),cZ({markerDOM:a=>{const l=document.createElement("div");return l.className=`fold-icon ${a?"i-ph-caret-down-bold":"i-ph-caret-right-bold"}`,l}}),...o]})}function vte(t){t.dispatch({selection:{anchor:0},changes:{from:0,to:t.state.doc.length,insert:""}}),t.scrollDOM.scrollTo(0,0)}function wte(t,e,r,n,i,s){s.value!==t.state.doc.toString()&&t.dispatch({selection:{anchor:0},changes:{from:0,to:t.state.doc.length,insert:s.value}}),t.dispatch({effects:[GN.of(r&&!s.isBinary)]}),_te(s.filePath).then(o=>{o&&(t.dispatch({effects:[n.reconfigure([o]),$N(e)]}),requestAnimationFrame(()=>{const a=t.scrollDOM.scrollLeft,l=t.scrollDOM.scrollTop,c=s.scroll?.left??0,u=s.scroll?.top??0;i&&r&&(a!==c||l!==u?t.scrollDOM.addEventListener("scroll",()=>{t.focus()},{once:!0}):t.focus()),t.scrollDOM.scrollTo(c,u)}))})}function Ete(t){return t.readOnly?t.selection.ranges.filter(e=>e.empty).map(e=>({pos:e.head,above:!0,strictSide:!0,arrow:!0,create:()=>{const r=document.createElement("div");return r.className="cm-readonly-tooltip",r.textContent="Cannot edit file while AI response is being generated",{dom:r}}})):[]}const sl=D.memo(({className:t,disabledClassName:e,disabled:r=!1,children:n,onClick:i})=>R.jsx("button",{className:je("flex items-center shrink-0 gap-1.5 px-1.5 rounded-md py-0.5 text-bolt-elements-item-contentDefault bg-transparent enabled:hover:text-bolt-elements-item-contentActive enabled:hover:bg-bolt-elements-item-backgroundActive disabled:cursor-not-allowed",{[je("opacity-30",e)]:r},t),disabled:r,onClick:s=>{r||i?.(s)},children:n})),Ste=D.memo,xte=Ste(({selected:t,options:e,setSelected:r})=>{const n=t===e.left.value;return R.jsxs("div",{className:"flex items-center flex-wrap shrink-0 gap-1 bg-bolt-elements-background-depth-1 overflow-hidden rounded-full p-1",children:[R.jsx(mk,{selected:n,setSelected:()=>r?.(e.left.value),children:e.left.text}),R.jsx(mk,{selected:!n,setSelected:()=>r?.(e.right.value),children:e.right.text})]})}),mk=D.memo(({selected:t,children:e,setSelected:r})=>R.jsxs("button",{onClick:r,className:je("bg-transparent text-sm px-2.5 py-0.5 rounded-full relative",t?"text-bolt-elements-item-contentAccent":"text-bolt-elements-item-contentDefault hover:text-bolt-elements-item-contentActive"),children:[R.jsx("span",{className:"relative z-10",children:e}),t&&R.jsx(Jr.span,{layoutId:"pill-tab",transition:{duration:.2,ease:On},className:"absolute inset-0 z-0 bg-bolt-elements-item-backgroundAccent rounded-full"})]})),{createElement:Hl,createContext:Tte,createRef:QSe,forwardRef:KN,useCallback:$r,useContext:YN,useEffect:Yo,useImperativeHandle:XN,useLayoutEffect:Cte,useMemo:kte,useRef:Vr,useState:vl}=fv,gk=fv[`useId${Math.random()}`.slice(0,5)],Ate=Cte,jg=Tte(null);jg.displayName="PanelGroupContext";const Xo=Ate,Rte=typeof gk=="function"?gk:()=>null;let Pte=0;function oE(t=null){const e=Rte(),r=Vr(t||e||null);return r.current===null&&(r.current=""+Pte++),t??r.current}function QN({children:t,className:e="",collapsedSize:r,collapsible:n,defaultSize:i,forwardedRef:s,id:o,maxSize:a,minSize:l,onCollapse:c,onExpand:u,onResize:h,order:f,style:d,tagName:g="div",..._}){const m=YN(jg);if(m===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:p,expandPanel:b,getPanelSize:y,getPanelStyle:v,groupId:w,isPanelCollapsed:S,reevaluatePanelConstraints:x,registerPanel:E,resizePanel:T,unregisterPanel:k}=m,B=oE(o),P=Vr({callbacks:{onCollapse:c,onExpand:u,onResize:h},constraints:{collapsedSize:r,collapsible:n,defaultSize:i,maxSize:a,minSize:l},id:B,idIsFromProps:o!==void 0,order:f});Vr({didLogMissingDefaultSizeWarning:!1}),Xo(()=>{const{callbacks:A,constraints:$}=P.current,te={...$};P.current.id=B,P.current.idIsFromProps=o!==void 0,P.current.order=f,A.onCollapse=c,A.onExpand=u,A.onResize=h,$.collapsedSize=r,$.collapsible=n,$.defaultSize=i,$.maxSize=a,$.minSize=l,(te.collapsedSize!==$.collapsedSize||te.collapsible!==$.collapsible||te.maxSize!==$.maxSize||te.minSize!==$.minSize)&&x(P.current,te)}),Xo(()=>{const A=P.current;return E(A),()=>{k(A)}},[f,B,E,k]),XN(s,()=>({collapse:()=>{p(P.current)},expand:A=>{b(P.current,A)},getId(){return B},getSize(){return y(P.current)},isCollapsed(){return S(P.current)},isExpanded(){return!S(P.current)},resize:A=>{T(P.current,A)}}),[p,b,y,S,B,T]);const O=v(P.current,i);return Hl(g,{..._,children:t,className:e,id:o,style:{...O,...d},"data-panel":"","data-panel-collapsible":n||void 0,"data-panel-group-id":w,"data-panel-id":B,"data-panel-size":parseFloat(""+O.flexGrow).toFixed(1)})}const bu=KN((t,e)=>Hl(QN,{...t,forwardedRef:e}));QN.displayName="Panel";bu.displayName="forwardRef(Panel)";let fy=null,Bo=null;function Ite(t,e){if(e){const r=(e&rM)!==0,n=(e&nM)!==0,i=(e&iM)!==0,s=(e&sM)!==0;if(r)return i?"se-resize":s?"ne-resize":"e-resize";if(n)return i?"sw-resize":s?"nw-resize":"w-resize";if(i)return"s-resize";if(s)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function Dte(){Bo!==null&&(document.head.removeChild(Bo),fy=null,Bo=null)}function x_(t,e){const r=Ite(t,e);fy!==r&&(fy=r,Bo===null&&(Bo=document.createElement("style"),document.head.appendChild(Bo)),Bo.innerHTML=`*{cursor: ${r}!important;}`)}function ZN(t){return t.type==="keydown"}function JN(t){return t.type.startsWith("pointer")}function eM(t){return t.type.startsWith("mouse")}function $g(t){if(JN(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(eM(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function Ote(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function Lte(t,e,r){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function Nte(t,e){if(t===e)throw new Error("Cannot compare node with itself");const r={a:yk(t),b:yk(e)};let n;for(;r.a.at(-1)===r.b.at(-1);)t=r.a.pop(),e=r.b.pop(),n=t;Ze(n,"Stacking order can only be calculated for elements with a common ancestor");const i={a:bk(_k(r.a)),b:bk(_k(r.b))};if(i.a===i.b){const s=n.childNodes,o={a:r.a.at(-1),b:r.b.at(-1)};let a=s.length;for(;a--;){const l=s[a];if(l===o.a)return 1;if(l===o.b)return-1}}return Math.sign(i.a-i.b)}const Mte=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function Bte(t){var e;const r=getComputedStyle((e=tM(t))!==null&&e!==void 0?e:t).display;return r==="flex"||r==="inline-flex"}function Fte(t){const e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||Bte(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||Mte.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function _k(t){let e=t.length;for(;e--;){const r=t[e];if(Ze(r,"Missing node"),Fte(r))return r}return null}function bk(t){return t&&Number(getComputedStyle(t).zIndex)||0}function yk(t){const e=[];for(;t;)e.push(t),t=tM(t);return e}function tM(t){const{parentNode:e}=t;return e&&e instanceof ShadowRoot?e.host:e}const rM=1,nM=2,iM=4,sM=8,Hte=Ote()==="coarse";let $n=[],wl=!1,Ns=new Map,zg=new Map;const nh=new Set;function Ute(t,e,r,n,i){var s;const{ownerDocument:o}=e,a={direction:r,element:e,hitAreaMargins:n,setResizeHandlerState:i},l=(s=Ns.get(o))!==null&&s!==void 0?s:0;return Ns.set(o,l+1),nh.add(a),wm(),function(){var u;zg.delete(t),nh.delete(a);const h=(u=Ns.get(o))!==null&&u!==void 0?u:1;if(Ns.set(o,h-1),wm(),h===1&&Ns.delete(o),$n.includes(a)){const f=$n.indexOf(a);f>=0&&$n.splice(f,1),lE(),i("up",!0,null)}}}function vk(t){const{target:e}=t,{x:r,y:n}=$g(t);wl=!0,aE({target:e,x:r,y:n}),wm(),$n.length>0&&(Em("down",t),t.preventDefault(),t.stopPropagation())}function Fc(t){const{x:e,y:r}=$g(t);if(wl&&t.buttons===0&&(wl=!1,Em("up",t)),!wl){const{target:n}=t;aE({target:n,x:e,y:r})}Em("move",t),lE(),$n.length>0&&t.preventDefault()}function Ha(t){const{target:e}=t,{x:r,y:n}=$g(t);zg.clear(),wl=!1,$n.length>0&&t.preventDefault(),Em("up",t),aE({target:e,x:r,y:n}),lE(),wm()}function aE({target:t,x:e,y:r}){$n.splice(0);let n=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(n=t),nh.forEach(i=>{const{element:s,hitAreaMargins:o}=i,a=s.getBoundingClientRect(),{bottom:l,left:c,right:u,top:h}=a,f=Hte?o.coarse:o.fine;if(e>=c-f&&e<=u+f&&r>=h-f&&r<=l+f){if(n!==null&&document.contains(n)&&s!==n&&!s.contains(n)&&!n.contains(s)&&Nte(n,s)>0){let g=n,_=!1;for(;g&&!g.contains(s);){if(Lte(g.getBoundingClientRect(),a)){_=!0;break}g=g.parentElement}if(_)return}$n.push(i)}})}function T_(t,e){zg.set(t,e)}function lE(){let t=!1,e=!1;$n.forEach(n=>{const{direction:i}=n;i==="horizontal"?t=!0:e=!0});let r=0;zg.forEach(n=>{r|=n}),t&&e?x_("intersection",r):t?x_("horizontal",r):e?x_("vertical",r):Dte()}function wm(){Ns.forEach((t,e)=>{const{body:r}=e;r.removeEventListener("contextmenu",Ha),r.removeEventListener("pointerdown",vk),r.removeEventListener("pointerleave",Fc),r.removeEventListener("pointermove",Fc)}),window.removeEventListener("pointerup",Ha),window.removeEventListener("pointercancel",Ha),nh.size>0&&(wl?($n.length>0&&Ns.forEach((t,e)=>{const{body:r}=e;t>0&&(r.addEventListener("contextmenu",Ha),r.addEventListener("pointerleave",Fc),r.addEventListener("pointermove",Fc))}),window.addEventListener("pointerup",Ha),window.addEventListener("pointercancel",Ha)):Ns.forEach((t,e)=>{const{body:r}=e;t>0&&(r.addEventListener("pointerdown",vk,{capture:!0}),r.addEventListener("pointermove",Fc))}))}function Em(t,e){nh.forEach(r=>{const{setResizeHandlerState:n}=r,i=$n.includes(r);n(t,i,e)})}function jte(){const[t,e]=vl(0);return $r(()=>e(r=>r+1),[])}function Ze(t,e){if(!t)throw console.error(e),Error(e)}const cE=10;function ca(t,e,r=cE){return t.toFixed(r)===e.toFixed(r)?0:t>e?1:-1}function qi(t,e,r=cE){return ca(t,e,r)===0}function on(t,e,r){return ca(t,e,r)===0}function $te(t,e,r){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++){const i=t[n],s=e[n];if(!on(i,s,r))return!1}return!0}function ol({panelConstraints:t,panelIndex:e,size:r}){const n=t[e];Ze(n!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:i=0,collapsible:s,maxSize:o=100,minSize:a=0}=n;if(ca(r,a)<0)if(s){const l=(i+a)/2;ca(r,l)<0?r=i:r=a}else r=a;return r=Math.min(o,r),r=parseFloat(r.toFixed(cE)),r}function ru({delta:t,initialLayout:e,panelConstraints:r,pivotIndices:n,prevLayout:i,trigger:s}){if(on(t,0))return e;const o=[...e],[a,l]=n;Ze(a!=null,"Invalid first pivot index"),Ze(l!=null,"Invalid second pivot index");let c=0;if(s==="keyboard"){{const h=t<0?l:a,f=r[h];Ze(f,`Panel constraints not found for index ${h}`);const{collapsedSize:d=0,collapsible:g,minSize:_=0}=f;if(g){const m=e[h];if(Ze(m!=null,`Previous layout not found for panel index ${h}`),on(m,d)){const p=_-m;ca(p,Math.abs(t))>0&&(t=t<0?0-p:p)}}}{const h=t<0?a:l,f=r[h];Ze(f,`No panel constraints found for index ${h}`);const{collapsedSize:d=0,collapsible:g,minSize:_=0}=f;if(g){const m=e[h];if(Ze(m!=null,`Previous layout not found for panel index ${h}`),on(m,_)){const p=m-d;ca(p,Math.abs(t))>0&&(t=t<0?0-p:p)}}}}{const h=t<0?1:-1;let f=t<0?l:a,d=0;for(;;){const _=e[f];Ze(_!=null,`Previous layout not found for panel index ${f}`);const p=ol({panelConstraints:r,panelIndex:f,size:100})-_;if(d+=p,f+=h,f<0||f>=r.length)break}const g=Math.min(Math.abs(t),Math.abs(d));t=t<0?0-g:g}{let f=t<0?a:l;for(;f>=0&&f<r.length;){const d=Math.abs(t)-Math.abs(c),g=e[f];Ze(g!=null,`Previous layout not found for panel index ${f}`);const _=g-d,m=ol({panelConstraints:r,panelIndex:f,size:_});if(!on(g,m)&&(c+=g-m,o[f]=m,c.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?f--:f++}}if($te(i,o))return i;{const h=t<0?l:a,f=e[h];Ze(f!=null,`Previous layout not found for panel index ${h}`);const d=f+c,g=ol({panelConstraints:r,panelIndex:h,size:d});if(o[h]=g,!on(g,d)){let _=d-g,p=t<0?l:a;for(;p>=0&&p<r.length;){const b=o[p];Ze(b!=null,`Previous layout not found for panel index ${p}`);const y=b+_,v=ol({panelConstraints:r,panelIndex:p,size:y});if(on(b,v)||(_-=v-b,o[p]=v),on(_,0))break;t>0?p--:p++}}}const u=o.reduce((h,f)=>f+h,0);return on(u,100)?o:i}function zte({layout:t,panelsArray:e,pivotIndices:r}){let n=0,i=100,s=0,o=0;const a=r[0];Ze(a!=null,"No pivot index found"),e.forEach((h,f)=>{const{constraints:d}=h,{maxSize:g=100,minSize:_=0}=d;f===a?(n=_,i=g):(s+=_,o+=g)});const l=Math.min(i,100-s),c=Math.max(n,100-o),u=t[a];return{valueMax:l,valueMin:c,valueNow:u}}function ih(t,e=document){return Array.from(e.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function oM(t,e,r=document){const i=ih(t,r).findIndex(s=>s.getAttribute("data-panel-resize-handle-id")===e);return i??null}function aM(t,e,r){const n=oM(t,e,r);return n!=null?[n,n+1]:[-1,-1]}function lM(t,e=document){var r;if(e instanceof HTMLElement&&(e==null||(r=e.dataset)===null||r===void 0?void 0:r.panelGroupId)==t)return e;const n=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return n||null}function Vg(t,e=document){const r=e.querySelector(`[data-panel-resize-handle-id="${t}"]`);return r||null}function Vte(t,e,r,n=document){var i,s,o,a;const l=Vg(e,n),c=ih(t,n),u=l?c.indexOf(l):-1,h=(i=(s=r[u])===null||s===void 0?void 0:s.id)!==null&&i!==void 0?i:null,f=(o=(a=r[u+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[h,f]}function Wte({committedValuesRef:t,eagerValuesRef:e,groupId:r,layout:n,panelDataArray:i,panelGroupElement:s,setLayout:o}){Vr({didWarnAboutMissingResizeHandle:!1}),Xo(()=>{if(!s)return;const a=ih(r,s);for(let l=0;l<i.length-1;l++){const{valueMax:c,valueMin:u,valueNow:h}=zte({layout:n,panelsArray:i,pivotIndices:[l,l+1]}),f=a[l];if(f!=null){const d=i[l];Ze(d,`No panel data found for index "${l}"`),f.setAttribute("aria-controls",d.id),f.setAttribute("aria-valuemax",""+Math.round(c)),f.setAttribute("aria-valuemin",""+Math.round(u)),f.setAttribute("aria-valuenow",h!=null?""+Math.round(h):"")}}return()=>{a.forEach((l,c)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[r,n,i,s]),Yo(()=>{if(!s)return;const a=e.current;Ze(a,"Eager values not found");const{panelDataArray:l}=a,c=lM(r,s);Ze(c!=null,`No group found for id "${r}"`);const u=ih(r,s);Ze(u,`No resize handles found for group id "${r}"`);const h=u.map(f=>{const d=f.getAttribute("data-panel-resize-handle-id");Ze(d,"Resize handle element has no handle id attribute");const[g,_]=Vte(r,d,l,s);if(g==null||_==null)return()=>{};const m=p=>{if(!p.defaultPrevented)switch(p.key){case"Enter":{p.preventDefault();const b=l.findIndex(y=>y.id===g);if(b>=0){const y=l[b];Ze(y,`No panel data found for index ${b}`);const v=n[b],{collapsedSize:w=0,collapsible:S,minSize:x=0}=y.constraints;if(v!=null&&S){const E=ru({delta:on(v,w)?x-w:w-v,initialLayout:n,panelConstraints:l.map(T=>T.constraints),pivotIndices:aM(r,d,s),prevLayout:n,trigger:"keyboard"});n!==E&&o(E)}}break}}};return f.addEventListener("keydown",m),()=>{f.removeEventListener("keydown",m)}});return()=>{h.forEach(f=>f())}},[s,t,e,r,n,i,o])}function wk(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function cM(t,e){const r=t==="horizontal",{x:n,y:i}=$g(e);return r?n:i}function Gte(t,e,r,n,i){const s=r==="horizontal",o=Vg(e,i);Ze(o,`No resize handle element found for id "${e}"`);const a=o.getAttribute("data-panel-group-id");Ze(a,"Resize handle element has no group id attribute");let{initialCursorPosition:l}=n;const c=cM(r,t),u=lM(a,i);Ze(u,`No group element found for id "${a}"`);const h=u.getBoundingClientRect(),f=s?h.width:h.height;return(c-l)/f*100}function qte(t,e,r,n,i,s){if(ZN(t)){const o=r==="horizontal";let a=0;t.shiftKey?a=100:i!=null?a=i:a=10;let l=0;switch(t.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return n==null?0:Gte(t,e,r,n,s)}function Kte({panelDataArray:t}){const e=Array(t.length),r=t.map(s=>s.constraints);let n=0,i=100;for(let s=0;s<t.length;s++){const o=r[s];Ze(o,`Panel constraints not found for index ${s}`);const{defaultSize:a}=o;a!=null&&(n++,e[s]=a,i-=a)}for(let s=0;s<t.length;s++){const o=r[s];Ze(o,`Panel constraints not found for index ${s}`);const{defaultSize:a}=o;if(a!=null)continue;const l=t.length-n,c=i/l;n++,e[s]=c,i-=c}return e}function Ua(t,e,r){e.forEach((n,i)=>{const s=t[i];Ze(s,`Panel data not found for index ${i}`);const{callbacks:o,constraints:a,id:l}=s,{collapsedSize:c=0,collapsible:u}=a,h=r[l];if(h==null||n!==h){r[l]=n;const{onCollapse:f,onExpand:d,onResize:g}=o;g&&g(n,h),u&&(f||d)&&(d&&(h==null||qi(h,c))&&!qi(n,c)&&d(),f&&(h==null||!qi(h,c))&&qi(n,c)&&f())}})}function kd(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!=e[r])return!1;return!0}function Yte({defaultSize:t,dragState:e,layout:r,panelData:n,panelIndex:i,precision:s=3}){const o=r[i];let a;return o==null?a=t!=null?t.toPrecision(s):"1":n.length===1?a="1":a=o.toPrecision(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function Xte(t,e=10){let r=null;return(...i)=>{r!==null&&clearTimeout(r),r=setTimeout(()=>{t(...i)},e)}}function Ek(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,r)=>{localStorage.setItem(e,r)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function uM(t){return`react-resizable-panels:${t}`}function hM(t){return t.map(e=>{const{constraints:r,id:n,idIsFromProps:i,order:s}=e;return i?n:s?`${s}:${JSON.stringify(r)}`:JSON.stringify(r)}).sort((e,r)=>e.localeCompare(r)).join(",")}function fM(t,e){try{const r=uM(t),n=e.getItem(r);if(n){const i=JSON.parse(n);if(typeof i=="object"&&i!=null)return i}}catch{}return null}function Qte(t,e,r){var n,i;const s=(n=fM(t,r))!==null&&n!==void 0?n:{},o=hM(e);return(i=s[o])!==null&&i!==void 0?i:null}function Zte(t,e,r,n,i){var s;const o=uM(t),a=hM(e),l=(s=fM(t,i))!==null&&s!==void 0?s:{};l[a]={expandToSizes:Object.fromEntries(r.entries()),layout:n};try{i.setItem(o,JSON.stringify(l))}catch(c){console.error(c)}}function Sk({layout:t,panelConstraints:e}){const r=[...t],n=r.reduce((s,o)=>s+o,0);if(r.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${r.map(s=>`${s}%`).join(", ")}`);if(!on(n,100)&&r.length>0)for(let s=0;s<e.length;s++){const o=r[s];Ze(o!=null,`No layout data found for index ${s}`);const a=100/n*o;r[s]=a}let i=0;for(let s=0;s<e.length;s++){const o=r[s];Ze(o!=null,`No layout data found for index ${s}`);const a=ol({panelConstraints:e,panelIndex:s,size:o});o!=a&&(i+=o-a,r[s]=a)}if(!on(i,0))for(let s=0;s<e.length;s++){const o=r[s];Ze(o!=null,`No layout data found for index ${s}`);const a=o+i,l=ol({panelConstraints:e,panelIndex:s,size:a});if(o!==l&&(i-=l-o,r[s]=l,on(i,0)))break}return r}const Jte=100,nu={getItem:t=>(Ek(nu),nu.getItem(t)),setItem:(t,e)=>{Ek(nu),nu.setItem(t,e)}},xk={};function dM({autoSaveId:t=null,children:e,className:r="",direction:n,forwardedRef:i,id:s=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=nu,style:c,tagName:u="div",...h}){const f=oE(s),d=Vr(null),[g,_]=vl(null),[m,p]=vl([]),b=jte(),y=Vr({}),v=Vr(new Map),w=Vr(0),S=Vr({autoSaveId:t,direction:n,dragState:g,id:f,keyboardResizeBy:a,onLayout:o,storage:l}),x=Vr({layout:m,panelDataArray:[],panelDataArrayChanged:!1});Vr({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),XN(i,()=>({getId:()=>S.current.id,getLayout:()=>{const{layout:H}=x.current;return H},setLayout:H=>{const{onLayout:Z}=S.current,{layout:re,panelDataArray:ge}=x.current,X=Sk({layout:H,panelConstraints:ge.map(V=>V.constraints)});wk(re,X)||(p(X),x.current.layout=X,Z&&Z(X),Ua(ge,X,y.current))}}),[]),Xo(()=>{S.current.autoSaveId=t,S.current.direction=n,S.current.dragState=g,S.current.id=f,S.current.onLayout=o,S.current.storage=l}),Wte({committedValuesRef:S,eagerValuesRef:x,groupId:f,layout:m,panelDataArray:x.current.panelDataArray,setLayout:p,panelGroupElement:d.current}),Yo(()=>{const{panelDataArray:H}=x.current;if(t){if(m.length===0||m.length!==H.length)return;let Z=xk[t];Z==null&&(Z=Xte(Zte,Jte),xk[t]=Z);const re=[...H],ge=new Map(v.current);Z(t,re,ge,m,l)}},[t,m,l]),Yo(()=>{});const E=$r(H=>{const{onLayout:Z}=S.current,{layout:re,panelDataArray:ge}=x.current;if(H.constraints.collapsible){const X=ge.map(me=>me.constraints),{collapsedSize:V=0,panelSize:ie,pivotIndices:se}=_o(ge,H,re);if(Ze(ie!=null,`Panel size not found for panel "${H.id}"`),!qi(ie,V)){v.current.set(H.id,ie);const de=qa(ge,H)===ge.length-1?ie-V:V-ie,ve=ru({delta:de,initialLayout:re,panelConstraints:X,pivotIndices:se,prevLayout:re,trigger:"imperative-api"});kd(re,ve)||(p(ve),x.current.layout=ve,Z&&Z(ve),Ua(ge,ve,y.current))}}},[]),T=$r((H,Z)=>{const{onLayout:re}=S.current,{layout:ge,panelDataArray:X}=x.current;if(H.constraints.collapsible){const V=X.map(F=>F.constraints),{collapsedSize:ie=0,panelSize:se=0,minSize:me=0,pivotIndices:de}=_o(X,H,ge),ve=Z??me;if(qi(se,ie)){const F=v.current.get(H.id),he=F!=null&&F>=ve?F:ve,W=qa(X,H)===X.length-1?se-he:he-se,G=ru({delta:W,initialLayout:ge,panelConstraints:V,pivotIndices:de,prevLayout:ge,trigger:"imperative-api"});kd(ge,G)||(p(G),x.current.layout=G,re&&re(G),Ua(X,G,y.current))}}},[]),k=$r(H=>{const{layout:Z,panelDataArray:re}=x.current,{panelSize:ge}=_o(re,H,Z);return Ze(ge!=null,`Panel size not found for panel "${H.id}"`),ge},[]),B=$r((H,Z)=>{const{panelDataArray:re}=x.current,ge=qa(re,H);return Yte({defaultSize:Z,dragState:g,layout:m,panelData:re,panelIndex:ge})},[g,m]),P=$r(H=>{const{layout:Z,panelDataArray:re}=x.current,{collapsedSize:ge=0,collapsible:X,panelSize:V}=_o(re,H,Z);return Ze(V!=null,`Panel size not found for panel "${H.id}"`),X===!0&&qi(V,ge)},[]),O=$r(H=>{const{layout:Z,panelDataArray:re}=x.current,{collapsedSize:ge=0,collapsible:X,panelSize:V}=_o(re,H,Z);return Ze(V!=null,`Panel size not found for panel "${H.id}"`),!X||ca(V,ge)>0},[]),A=$r(H=>{const{panelDataArray:Z}=x.current;Z.push(H),Z.sort((re,ge)=>{const X=re.order,V=ge.order;return X==null&&V==null?0:X==null?-1:V==null?1:X-V}),x.current.panelDataArrayChanged=!0,b()},[b]);Xo(()=>{if(x.current.panelDataArrayChanged){x.current.panelDataArrayChanged=!1;const{autoSaveId:H,onLayout:Z,storage:re}=S.current,{layout:ge,panelDataArray:X}=x.current;let V=null;if(H){const se=Qte(H,X,re);se&&(v.current=new Map(Object.entries(se.expandToSizes)),V=se.layout)}V==null&&(V=Kte({panelDataArray:X}));const ie=Sk({layout:V,panelConstraints:X.map(se=>se.constraints)});wk(ge,ie)||(p(ie),x.current.layout=ie,Z&&Z(ie),Ua(X,ie,y.current))}}),Xo(()=>{const H=x.current;return()=>{H.layout=[]}},[]);const $=$r(H=>{let Z=!1;const re=d.current;return re&&window.getComputedStyle(re,null).getPropertyValue("direction")==="rtl"&&(Z=!0),function(X){X.preventDefault();const V=d.current;if(!V)return()=>null;const{direction:ie,dragState:se,id:me,keyboardResizeBy:de,onLayout:ve}=S.current,{layout:F,panelDataArray:he}=x.current,{initialLayout:ae}=se??{},W=aM(me,H,V);let G=qte(X,H,ie,se,de,V);const oe=ie==="horizontal";oe&&Z&&(G=-G);const ye=he.map(Te=>Te.constraints),Se=ru({delta:G,initialLayout:ae??F,panelConstraints:ye,pivotIndices:W,prevLayout:F,trigger:ZN(X)?"keyboard":"mouse-or-touch"}),pe=!kd(F,Se);(JN(X)||eM(X))&&w.current!=G&&(w.current=G,!pe&&G!==0?oe?T_(H,G<0?rM:nM):T_(H,G<0?iM:sM):T_(H,0)),pe&&(p(Se),x.current.layout=Se,ve&&ve(Se),Ua(he,Se,y.current))}},[]),te=$r((H,Z)=>{const{onLayout:re}=S.current,{layout:ge,panelDataArray:X}=x.current,V=X.map(F=>F.constraints),{panelSize:ie,pivotIndices:se}=_o(X,H,ge);Ze(ie!=null,`Panel size not found for panel "${H.id}"`);const de=qa(X,H)===X.length-1?ie-Z:Z-ie,ve=ru({delta:de,initialLayout:ge,panelConstraints:V,pivotIndices:se,prevLayout:ge,trigger:"imperative-api"});kd(ge,ve)||(p(ve),x.current.layout=ve,re&&re(ve),Ua(X,ve,y.current))},[]),Q=$r((H,Z)=>{const{layout:re,panelDataArray:ge}=x.current,{collapsedSize:X=0,collapsible:V}=Z,{collapsedSize:ie=0,collapsible:se,maxSize:me=100,minSize:de=0}=H.constraints,{panelSize:ve}=_o(ge,H,re);ve!=null&&(V&&se&&qi(ve,X)?qi(X,ie)||te(H,ie):ve<de?te(H,de):ve>me&&te(H,me))},[te]),ee=$r((H,Z)=>{const{direction:re}=S.current,{layout:ge}=x.current;if(!d.current)return;const X=Vg(H,d.current);Ze(X,`Drag handle element not found for id "${H}"`);const V=cM(re,Z);_({dragHandleId:H,dragHandleRect:X.getBoundingClientRect(),initialCursorPosition:V,initialLayout:ge})},[]),L=$r(()=>{_(null)},[]),M=$r(H=>{const{panelDataArray:Z}=x.current,re=qa(Z,H);re>=0&&(Z.splice(re,1),delete y.current[H.id],x.current.panelDataArrayChanged=!0,b())},[b]),U=kte(()=>({collapsePanel:E,direction:n,dragState:g,expandPanel:T,getPanelSize:k,getPanelStyle:B,groupId:f,isPanelCollapsed:P,isPanelExpanded:O,reevaluatePanelConstraints:Q,registerPanel:A,registerResizeHandle:$,resizePanel:te,startDragging:ee,stopDragging:L,unregisterPanel:M,panelGroupElement:d.current}),[E,g,n,T,k,B,f,P,O,Q,A,$,te,ee,L,M]),j={display:"flex",flexDirection:n==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return Hl(jg.Provider,{value:U},Hl(u,{...h,children:e,className:r,id:s,ref:d,style:{...j,...c},"data-panel-group":"","data-panel-group-direction":n,"data-panel-group-id":f}))}const dy=KN((t,e)=>Hl(dM,{...t,forwardedRef:e}));dM.displayName="PanelGroup";dy.displayName="forwardRef(PanelGroup)";function qa(t,e){return t.findIndex(r=>r===e||r.id===e.id)}function _o(t,e,r){const n=qa(t,e),s=n===t.length-1?[n-1,n]:[n,n+1],o=r[n];return{...e.constraints,panelSize:o,pivotIndices:s}}function ere({disabled:t,handleId:e,resizeHandler:r,panelGroupElement:n}){Yo(()=>{if(t||r==null||n==null)return;const i=Vg(e,n);if(i==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),r(o);break}case"F6":{o.preventDefault();const a=i.getAttribute("data-panel-group-id");Ze(a,`No group element found for id "${a}"`);const l=ih(a,n),c=oM(a,e,n);Ze(c!==null,`No resize element found for id "${e}"`);const u=o.shiftKey?c>0?c-1:l.length-1:c+1<l.length?c+1:0;l[u].focus();break}}};return i.addEventListener("keydown",s),()=>{i.removeEventListener("keydown",s)}},[n,t,e,r])}function py({children:t=null,className:e="",disabled:r=!1,hitAreaMargins:n,id:i,onBlur:s,onDragging:o,onFocus:a,style:l={},tabIndex:c=0,tagName:u="div",...h}){var f,d;const g=Vr(null),_=Vr({onDragging:o});Yo(()=>{_.current.onDragging=o});const m=YN(jg);if(m===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:p,groupId:b,registerResizeHandle:y,startDragging:v,stopDragging:w,panelGroupElement:S}=m,x=oE(i),[E,T]=vl("inactive"),[k,B]=vl(!1),[P,O]=vl(null),A=Vr({state:E});Xo(()=>{A.current.state=E}),Yo(()=>{if(r)O(null);else{const ee=y(x);O(()=>ee)}},[r,x,y]);const $=(f=n?.coarse)!==null&&f!==void 0?f:15,te=(d=n?.fine)!==null&&d!==void 0?d:5;return Yo(()=>{if(r||P==null)return;const ee=g.current;return Ze(ee,"Element ref not attached"),Ute(x,ee,p,{coarse:$,fine:te},(M,U,j)=>{if(U)switch(M){case"down":{T("drag"),Ze(j,'Expected event to be defined for "down" action'),v(x,j);const{onDragging:H}=_.current;H&&H(!0);break}case"move":{const{state:H}=A.current;H!=="drag"&&T("hover"),Ze(j,'Expected event to be defined for "move" action'),P(j);break}case"up":{T("hover"),w();const{onDragging:H}=_.current;H&&H(!1);break}}else T("inactive")})},[$,p,r,te,y,x,P,v,w]),ere({disabled:r,handleId:x,resizeHandler:P,panelGroupElement:S}),Hl(u,{...h,children:t,className:e,id:i,onBlur:()=>{B(!1),s?.()},onFocus:()=>{B(!0),a?.()},ref:g,role:"separator",style:{...{touchAction:"none",userSelect:"none"},...l},tabIndex:c,"data-panel-group-direction":p,"data-panel-group-id":b,"data-resize-handle":"","data-resize-handle-active":E==="drag"?"pointer":k?"keyboard":void 0,"data-resize-handle-state":E,"data-panel-resize-handle-enabled":!r,"data-panel-resize-handle-id":x})}py.displayName="PanelResizeHandle";const Tk=D.memo(({className:t,children:e})=>R.jsx("div",{className:je("flex items-center gap-2 bg-bolt-elements-background-depth-2 text-bolt-elements-textSecondary border-b border-bolt-elements-borderColor px-4 py-1 min-h-[34px] text-sm",t),children:e}));function tre(){return globalThis.innerWidth<640}function pM(t){const e=t+"CollectionProvider",[r,n]=vw(e),[i,s]=r(e,{collectionRef:{current:null},itemMap:new Map}),o=d=>{const{scope:g,children:_}=d,m=Qe.useRef(null),p=Qe.useRef(new Map).current;return R.jsx(i,{scope:g,itemMap:p,collectionRef:m,children:_})};o.displayName=e;const a=t+"CollectionSlot",l=Qe.forwardRef((d,g)=>{const{scope:_,children:m}=d,p=s(a,_),b=Xt(g,p.collectionRef);return R.jsx(Pl,{ref:b,children:m})});l.displayName=a;const c=t+"CollectionItemSlot",u="data-radix-collection-item",h=Qe.forwardRef((d,g)=>{const{scope:_,children:m,...p}=d,b=Qe.useRef(null),y=Xt(g,b),v=s(c,_);return Qe.useEffect(()=>(v.itemMap.set(b,{ref:b,...p}),()=>void v.itemMap.delete(b))),R.jsx(Pl,{[u]:"",ref:y,children:m})});h.displayName=c;function f(d){const g=s(t+"CollectionConsumer",d);return Qe.useCallback(()=>{const m=g.collectionRef.current;if(!m)return[];const p=Array.from(m.querySelectorAll(`[${u}]`));return Array.from(g.itemMap.values()).sort((v,w)=>p.indexOf(v.ref.current)-p.indexOf(w.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:l,ItemSlot:h},f,n]}var rre=D.createContext(void 0);function mM(t){const e=D.useContext(rre);return t||e||"ltr"}var C_="rovingFocusGroup.onEntryFocus",nre={bubbles:!1,cancelable:!0},Wg="RovingFocusGroup",[my,gM,ire]=pM(Wg),[sre,_M]=vw(Wg,[ire]),[ore,are]=sre(Wg),bM=D.forwardRef((t,e)=>R.jsx(my.Provider,{scope:t.__scopeRovingFocusGroup,children:R.jsx(my.Slot,{scope:t.__scopeRovingFocusGroup,children:R.jsx(lre,{...t,ref:e})})}));bM.displayName=Wg;var lre=D.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...h}=t,f=D.useRef(null),d=Xt(e,f),g=mM(s),[_=null,m]=zh({prop:o,defaultProp:a,onChange:l}),[p,b]=D.useState(!1),y=Wn(c),v=gM(r),w=D.useRef(!1),[S,x]=D.useState(0);return D.useEffect(()=>{const E=f.current;if(E)return E.addEventListener(C_,y),()=>E.removeEventListener(C_,y)},[y]),R.jsx(ore,{scope:r,orientation:n,dir:g,loop:i,currentTabStopId:_,onItemFocus:D.useCallback(E=>m(E),[m]),onItemShiftTab:D.useCallback(()=>b(!0),[]),onFocusableItemAdd:D.useCallback(()=>x(E=>E+1),[]),onFocusableItemRemove:D.useCallback(()=>x(E=>E-1),[]),children:R.jsx(Dt.div,{tabIndex:p||S===0?-1:0,"data-orientation":n,...h,ref:d,style:{outline:"none",...t.style},onMouseDown:Ke(t.onMouseDown,()=>{w.current=!0}),onFocus:Ke(t.onFocus,E=>{const T=!w.current;if(E.target===E.currentTarget&&T&&!p){const k=new CustomEvent(C_,nre);if(E.currentTarget.dispatchEvent(k),!k.defaultPrevented){const B=v().filter(te=>te.focusable),P=B.find(te=>te.active),O=B.find(te=>te.id===_),$=[P,O,...B].filter(Boolean).map(te=>te.ref.current);wM($,u)}}w.current=!1}),onBlur:Ke(t.onBlur,()=>b(!1))})})}),yM="RovingFocusGroupItem",vM=D.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:s,...o}=t,a=Go(),l=s||a,c=are(yM,r),u=c.currentTabStopId===l,h=gM(r),{onFocusableItemAdd:f,onFocusableItemRemove:d}=c;return D.useEffect(()=>{if(n)return f(),()=>d()},[n,f,d]),R.jsx(my.ItemSlot,{scope:r,id:l,focusable:n,active:i,children:R.jsx(Dt.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...o,ref:e,onMouseDown:Ke(t.onMouseDown,g=>{n?c.onItemFocus(l):g.preventDefault()}),onFocus:Ke(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:Ke(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){c.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const _=hre(g,c.orientation,c.dir);if(_!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let p=h().filter(b=>b.focusable).map(b=>b.ref.current);if(_==="last")p.reverse();else if(_==="prev"||_==="next"){_==="prev"&&p.reverse();const b=p.indexOf(g.currentTarget);p=c.loop?fre(p,b+1):p.slice(b+1)}setTimeout(()=>wM(p))}})})})});vM.displayName=yM;var cre={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ure(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function hre(t,e,r){const n=ure(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return cre[n]}function wM(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function fre(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var dre=bM,pre=vM,gy=["Enter"," "],mre=["ArrowDown","PageUp","Home"],EM=["ArrowUp","PageDown","End"],gre=[...mre,...EM],_re={ltr:[...gy,"ArrowRight"],rtl:[...gy,"ArrowLeft"]},bre={ltr:["ArrowLeft"],rtl:["ArrowRight"]},tf="Menu",[sh,yre,vre]=pM(tf),[Ea,SM]=$h(tf,[vre,Sg,_M]),Gg=Sg(),xM=_M(),[wre,Sa]=Ea(tf),[Ere,rf]=Ea(tf),TM=t=>{const{__scopeMenu:e,open:r=!1,children:n,dir:i,onOpenChange:s,modal:o=!0}=t,a=Gg(e),[l,c]=D.useState(null),u=D.useRef(!1),h=Wn(s),f=mM(i);return D.useEffect(()=>{const d=()=>{u.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>u.current=!1;return document.addEventListener("keydown",d,{capture:!0}),()=>{document.removeEventListener("keydown",d,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),R.jsx(NO,{...a,children:R.jsx(wre,{scope:e,open:r,onOpenChange:h,content:l,onContentChange:c,children:R.jsx(Ere,{scope:e,onClose:D.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:u,dir:f,modal:o,children:n})})})};TM.displayName=tf;var Sre="MenuAnchor",uE=D.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,i=Gg(r);return R.jsx(MO,{...i,...n,ref:e})});uE.displayName=Sre;var hE="MenuPortal",[xre,CM]=Ea(hE,{forceMount:void 0}),kM=t=>{const{__scopeMenu:e,forceMount:r,children:n,container:i}=t,s=Sa(hE,e);return R.jsx(xre,{scope:e,forceMount:r,children:R.jsx(Bi,{present:r||s.open,children:R.jsx(gg,{asChild:!0,container:i,children:n})})})};kM.displayName=hE;var Pn="MenuContent",[Tre,fE]=Ea(Pn),AM=D.forwardRef((t,e)=>{const r=CM(Pn,t.__scopeMenu),{forceMount:n=r.forceMount,...i}=t,s=Sa(Pn,t.__scopeMenu),o=rf(Pn,t.__scopeMenu);return R.jsx(sh.Provider,{scope:t.__scopeMenu,children:R.jsx(Bi,{present:n||s.open,children:R.jsx(sh.Slot,{scope:t.__scopeMenu,children:o.modal?R.jsx(Cre,{...i,ref:e}):R.jsx(kre,{...i,ref:e})})})})}),Cre=D.forwardRef((t,e)=>{const r=Sa(Pn,t.__scopeMenu),n=D.useRef(null),i=Xt(e,n);return D.useEffect(()=>{const s=n.current;if(s)return XI(s)},[]),R.jsx(dE,{...t,ref:i,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:Ke(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),kre=D.forwardRef((t,e)=>{const r=Sa(Pn,t.__scopeMenu);return R.jsx(dE,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),dE=D.forwardRef((t,e)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:f,onDismiss:d,disableOutsideScroll:g,..._}=t,m=Sa(Pn,r),p=rf(Pn,r),b=Gg(r),y=xM(r),v=yre(r),[w,S]=D.useState(null),x=D.useRef(null),E=Xt(e,x,m.onContentChange),T=D.useRef(0),k=D.useRef(""),B=D.useRef(0),P=D.useRef(null),O=D.useRef("right"),A=D.useRef(0),$=g?Yv:D.Fragment,te=g?{as:Pl,allowPinchZoom:!0}:void 0,Q=L=>{const M=k.current+L,U=v().filter(X=>!X.disabled),j=document.activeElement,H=U.find(X=>X.ref.current===j)?.textValue,Z=U.map(X=>X.textValue),re=Hre(Z,M,H),ge=U.find(X=>X.textValue===re)?.ref.current;(function X(V){k.current=V,window.clearTimeout(T.current),V!==""&&(T.current=window.setTimeout(()=>X(""),1e3))})(M),ge&&setTimeout(()=>ge.focus())};D.useEffect(()=>()=>window.clearTimeout(T.current),[]),jI();const ee=D.useCallback(L=>O.current===P.current?.side&&jre(L,P.current?.area),[]);return R.jsx(Tre,{scope:r,searchRef:k,onItemEnter:D.useCallback(L=>{ee(L)&&L.preventDefault()},[ee]),onItemLeave:D.useCallback(L=>{ee(L)||(x.current?.focus(),S(null))},[ee]),onTriggerLeave:D.useCallback(L=>{ee(L)&&L.preventDefault()},[ee]),pointerGraceTimerRef:B,onPointerGraceIntentChange:D.useCallback(L=>{P.current=L},[]),children:R.jsx($,{...te,children:R.jsx(Kv,{asChild:!0,trapped:i,onMountAutoFocus:Ke(s,L=>{L.preventDefault(),x.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:R.jsx(mg,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:f,onDismiss:d,children:R.jsx(dre,{asChild:!0,...y,dir:p.dir,orientation:"vertical",loop:n,currentTabStopId:w,onCurrentTabStopIdChange:S,onEntryFocus:Ke(l,L=>{p.isUsingKeyboardRef.current||L.preventDefault()}),preventScrollOnEntryFocus:!0,children:R.jsx(BO,{role:"menu","aria-orientation":"vertical","data-state":VM(m.open),"data-radix-menu-content":"",dir:p.dir,...b,..._,ref:E,style:{outline:"none",..._.style},onKeyDown:Ke(_.onKeyDown,L=>{const U=L.target.closest("[data-radix-menu-content]")===L.currentTarget,j=L.ctrlKey||L.altKey||L.metaKey,H=L.key.length===1;U&&(L.key==="Tab"&&L.preventDefault(),!j&&H&&Q(L.key));const Z=x.current;if(L.target!==Z||!gre.includes(L.key))return;L.preventDefault();const ge=v().filter(X=>!X.disabled).map(X=>X.ref.current);EM.includes(L.key)&&ge.reverse(),Bre(ge)}),onBlur:Ke(t.onBlur,L=>{L.currentTarget.contains(L.target)||(window.clearTimeout(T.current),k.current="")}),onPointerMove:Ke(t.onPointerMove,oh(L=>{const M=L.target,U=A.current!==L.clientX;if(L.currentTarget.contains(M)&&U){const j=L.clientX>A.current?"right":"left";O.current=j,A.current=L.clientX}}))})})})})})})});AM.displayName=Pn;var Are="MenuGroup",pE=D.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return R.jsx(Dt.div,{role:"group",...n,ref:e})});pE.displayName=Are;var Rre="MenuLabel",RM=D.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return R.jsx(Dt.div,{...n,ref:e})});RM.displayName=Rre;var Sm="MenuItem",Ck="menu.itemSelect",qg=D.forwardRef((t,e)=>{const{disabled:r=!1,onSelect:n,...i}=t,s=D.useRef(null),o=rf(Sm,t.__scopeMenu),a=fE(Sm,t.__scopeMenu),l=Xt(e,s),c=D.useRef(!1),u=()=>{const h=s.current;if(!r&&h){const f=new CustomEvent(Ck,{bubbles:!0,cancelable:!0});h.addEventListener(Ck,d=>n?.(d),{once:!0}),BI(h,f),f.defaultPrevented?c.current=!1:o.onClose()}};return R.jsx(PM,{...i,ref:l,disabled:r,onClick:Ke(t.onClick,u),onPointerDown:h=>{t.onPointerDown?.(h),c.current=!0},onPointerUp:Ke(t.onPointerUp,h=>{c.current||h.currentTarget?.click()}),onKeyDown:Ke(t.onKeyDown,h=>{const f=a.searchRef.current!=="";r||f&&h.key===" "||gy.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});qg.displayName=Sm;var PM=D.forwardRef((t,e)=>{const{__scopeMenu:r,disabled:n=!1,textValue:i,...s}=t,o=fE(Sm,r),a=xM(r),l=D.useRef(null),c=Xt(e,l),[u,h]=D.useState(!1),[f,d]=D.useState("");return D.useEffect(()=>{const g=l.current;g&&d((g.textContent??"").trim())},[s.children]),R.jsx(sh.ItemSlot,{scope:r,disabled:n,textValue:i??f,children:R.jsx(pre,{asChild:!0,...a,focusable:!n,children:R.jsx(Dt.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...s,ref:c,onPointerMove:Ke(t.onPointerMove,oh(g=>{n?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ke(t.onPointerLeave,oh(g=>o.onItemLeave(g))),onFocus:Ke(t.onFocus,()=>h(!0)),onBlur:Ke(t.onBlur,()=>h(!1))})})})}),Pre="MenuCheckboxItem",IM=D.forwardRef((t,e)=>{const{checked:r=!1,onCheckedChange:n,...i}=t;return R.jsx(MM,{scope:t.__scopeMenu,checked:r,children:R.jsx(qg,{role:"menuitemcheckbox","aria-checked":xm(r)?"mixed":r,...i,ref:e,"data-state":gE(r),onSelect:Ke(i.onSelect,()=>n?.(xm(r)?!0:!r),{checkForDefaultPrevented:!1})})})});IM.displayName=Pre;var DM="MenuRadioGroup",[Ire,Dre]=Ea(DM,{value:void 0,onValueChange:()=>{}}),OM=D.forwardRef((t,e)=>{const{value:r,onValueChange:n,...i}=t,s=Wn(n);return R.jsx(Ire,{scope:t.__scopeMenu,value:r,onValueChange:s,children:R.jsx(pE,{...i,ref:e})})});OM.displayName=DM;var LM="MenuRadioItem",NM=D.forwardRef((t,e)=>{const{value:r,...n}=t,i=Dre(LM,t.__scopeMenu),s=r===i.value;return R.jsx(MM,{scope:t.__scopeMenu,checked:s,children:R.jsx(qg,{role:"menuitemradio","aria-checked":s,...n,ref:e,"data-state":gE(s),onSelect:Ke(n.onSelect,()=>i.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});NM.displayName=LM;var mE="MenuItemIndicator",[MM,Ore]=Ea(mE,{checked:!1}),BM=D.forwardRef((t,e)=>{const{__scopeMenu:r,forceMount:n,...i}=t,s=Ore(mE,r);return R.jsx(Bi,{present:n||xm(s.checked)||s.checked===!0,children:R.jsx(Dt.span,{...i,ref:e,"data-state":gE(s.checked)})})});BM.displayName=mE;var Lre="MenuSeparator",FM=D.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return R.jsx(Dt.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});FM.displayName=Lre;var Nre="MenuArrow",HM=D.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,i=Gg(r);return R.jsx(FO,{...i,...n,ref:e})});HM.displayName=Nre;var Mre="MenuSub",[ZSe,UM]=Ea(Mre),iu="MenuSubTrigger",jM=D.forwardRef((t,e)=>{const r=Sa(iu,t.__scopeMenu),n=rf(iu,t.__scopeMenu),i=UM(iu,t.__scopeMenu),s=fE(iu,t.__scopeMenu),o=D.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},u=D.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return D.useEffect(()=>u,[u]),D.useEffect(()=>{const h=a.current;return()=>{window.clearTimeout(h),l(null)}},[a,l]),R.jsx(uE,{asChild:!0,...c,children:R.jsx(PM,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":i.contentId,"data-state":VM(r.open),...t,ref:pg(e,i.onTriggerChange),onClick:h=>{t.onClick?.(h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:Ke(t.onPointerMove,oh(h=>{s.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!r.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),u()},100))})),onPointerLeave:Ke(t.onPointerLeave,oh(h=>{u();const f=r.content?.getBoundingClientRect();if(f){const d=r.content?.dataset.side,g=d==="right",_=g?-5:5,m=f[g?"left":"right"],p=f[g?"right":"left"];s.onPointerGraceIntentChange({area:[{x:h.clientX+_,y:h.clientY},{x:m,y:f.top},{x:p,y:f.top},{x:p,y:f.bottom},{x:m,y:f.bottom}],side:d}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(h),h.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:Ke(t.onKeyDown,h=>{const f=s.searchRef.current!=="";t.disabled||f&&h.key===" "||_re[n.dir].includes(h.key)&&(r.onOpenChange(!0),r.content?.focus(),h.preventDefault())})})})});jM.displayName=iu;var $M="MenuSubContent",zM=D.forwardRef((t,e)=>{const r=CM(Pn,t.__scopeMenu),{forceMount:n=r.forceMount,...i}=t,s=Sa(Pn,t.__scopeMenu),o=rf(Pn,t.__scopeMenu),a=UM($M,t.__scopeMenu),l=D.useRef(null),c=Xt(e,l);return R.jsx(sh.Provider,{scope:t.__scopeMenu,children:R.jsx(Bi,{present:n||s.open,children:R.jsx(sh.Slot,{scope:t.__scopeMenu,children:R.jsx(dE,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{o.isUsingKeyboardRef.current&&l.current?.focus(),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Ke(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:Ke(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:Ke(t.onKeyDown,u=>{const h=u.currentTarget.contains(u.target),f=bre[o.dir].includes(u.key);h&&f&&(s.onOpenChange(!1),a.trigger?.focus(),u.preventDefault())})})})})})});zM.displayName=$M;function VM(t){return t?"open":"closed"}function xm(t){return t==="indeterminate"}function gE(t){return xm(t)?"indeterminate":t?"checked":"unchecked"}function Bre(t){const e=document.activeElement;for(const r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function Fre(t,e){return t.map((r,n)=>t[(e+n)%t.length])}function Hre(t,e,r){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=r?t.indexOf(r):-1;let o=Fre(t,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==r));const l=o.find(c=>c.toLowerCase().startsWith(i.toLowerCase()));return l!==r?l:void 0}function Ure(t,e){const{x:r,y:n}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,u=e[o].y;l>n!=u>n&&r<(c-a)*(n-l)/(u-l)+a&&(i=!i)}return i}function jre(t,e){if(!e)return!1;const r={x:t.clientX,y:t.clientY};return Ure(r,e)}function oh(t){return e=>e.pointerType==="mouse"?t(e):void 0}var $re=TM,zre=uE,Vre=kM,Wre=AM,Gre=pE,qre=RM,Kre=qg,Yre=IM,Xre=OM,Qre=NM,Zre=BM,Jre=FM,ene=HM,tne=jM,rne=zM,_E="DropdownMenu",[nne,JSe]=$h(_E,[SM]),Hr=SM(),[ine,WM]=nne(_E),GM=t=>{const{__scopeDropdownMenu:e,children:r,dir:n,open:i,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,l=Hr(e),c=D.useRef(null),[u=!1,h]=zh({prop:i,defaultProp:s,onChange:o});return R.jsx(ine,{scope:e,triggerId:Go(),triggerRef:c,contentId:Go(),open:u,onOpenChange:h,onOpenToggle:D.useCallback(()=>h(f=>!f),[h]),modal:a,children:R.jsx($re,{...l,open:u,onOpenChange:h,dir:n,modal:a,children:r})})};GM.displayName=_E;var qM="DropdownMenuTrigger",KM=D.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...i}=t,s=WM(qM,r),o=Hr(r);return R.jsx(zre,{asChild:!0,...o,children:R.jsx(Dt.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...i,ref:pg(e,s.triggerRef),onPointerDown:Ke(t.onPointerDown,a=>{!n&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:Ke(t.onKeyDown,a=>{n||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});KM.displayName=qM;var sne="DropdownMenuPortal",YM=t=>{const{__scopeDropdownMenu:e,...r}=t,n=Hr(e);return R.jsx(Vre,{...n,...r})};YM.displayName=sne;var XM="DropdownMenuContent",QM=D.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=WM(XM,r),s=Hr(r),o=D.useRef(!1);return R.jsx(Wre,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...n,ref:e,onCloseAutoFocus:Ke(t.onCloseAutoFocus,a=>{o.current||i.triggerRef.current?.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:Ke(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!i.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});QM.displayName=XM;var one="DropdownMenuGroup",ane=D.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Hr(r);return R.jsx(Gre,{...i,...n,ref:e})});ane.displayName=one;var lne="DropdownMenuLabel",cne=D.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Hr(r);return R.jsx(qre,{...i,...n,ref:e})});cne.displayName=lne;var une="DropdownMenuItem",hne=D.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Hr(r);return R.jsx(Kre,{...i,...n,ref:e})});hne.displayName=une;var fne="DropdownMenuCheckboxItem",dne=D.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Hr(r);return R.jsx(Yre,{...i,...n,ref:e})});dne.displayName=fne;var pne="DropdownMenuRadioGroup",mne=D.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Hr(r);return R.jsx(Xre,{...i,...n,ref:e})});mne.displayName=pne;var gne="DropdownMenuRadioItem",_ne=D.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Hr(r);return R.jsx(Qre,{...i,...n,ref:e})});_ne.displayName=gne;var bne="DropdownMenuItemIndicator",yne=D.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Hr(r);return R.jsx(Zre,{...i,...n,ref:e})});yne.displayName=bne;var vne="DropdownMenuSeparator",wne=D.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Hr(r);return R.jsx(Jre,{...i,...n,ref:e})});wne.displayName=vne;var Ene="DropdownMenuArrow",ZM=D.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Hr(r);return R.jsx(ene,{...i,...n,ref:e})});ZM.displayName=Ene;var Sne="DropdownMenuSubTrigger",xne=D.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Hr(r);return R.jsx(tne,{...i,...n,ref:e})});xne.displayName=Sne;var Tne="DropdownMenuSubContent",Cne=D.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Hr(r);return R.jsx(rne,{...i,...n,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Cne.displayName=Tne;var kne=GM,Ane=KM,Rne=YM,Pne=QM,Ine=ZM;const Dne=Fr("FileTree"),One=8,Lne=[/\/node_modules\//,/\/\.next/,/\/\.astro/],JM=D.memo(({files:t={},onFileSelect:e,selectedFile:r,rootFolder:n,hideRoot:i=!1,collapsed:s=!1,allowFolderSelection:o=!1,hiddenFiles:a,className:l,unsavedFiles:c})=>{Jl.trace("FileTree");const u=D.useMemo(()=>[...Lne,...a??[]],[a]),h=D.useMemo(()=>Bne(t,n,i,u),[t,n,i,u]),[f,d]=D.useState(()=>s?new Set(h.filter(m=>m.kind==="folder").map(m=>m.fullPath)):new Set);D.useEffect(()=>{if(s){d(new Set(h.filter(m=>m.kind==="folder").map(m=>m.fullPath)));return}d(m=>{const p=new Set;for(const b of h)b.kind==="folder"&&m.has(b.fullPath)&&p.add(b.fullPath);return p})},[h,s]);const g=D.useMemo(()=>{const m=[];let p=Number.MAX_SAFE_INTEGER;for(const b of h){const y=b.depth;p===y&&(p=Number.MAX_SAFE_INTEGER),f.has(b.fullPath)&&(p=Math.min(p,y)),!(p<y)&&m.push(b)}return m},[h,f]),_=m=>{d(p=>{const b=new Set(p);return b.has(m)?b.delete(m):b.add(m),b})};return R.jsx("div",{className:je("text-sm",l,"overflow-y-auto"),children:g.map(m=>{switch(m.kind){case"file":return R.jsx(Mne,{selected:r===m.fullPath,file:m,unsavedChanges:c?.has(m.fullPath),onClick:()=>{e?.(m.fullPath)}},m.id);case"folder":return R.jsx(Nne,{folder:m,selected:o&&r===m.fullPath,collapsed:f.has(m.fullPath),onClick:()=>{_(m.fullPath)}},m.id);default:return}})})});function Nne({folder:{depth:t,name:e},collapsed:r,selected:n=!1,onClick:i}){return R.jsx(e6,{className:je("group",{"bg-transparent text-bolt-elements-item-contentDefault hover:text-bolt-elements-item-contentActive hover:bg-bolt-elements-item-backgroundActive":!n,"bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent":n}),depth:t,iconClasses:je({"i-ph:caret-right scale-98":r,"i-ph:caret-down scale-98":!r}),onClick:i,children:e})}function Mne({file:{depth:t,name:e},onClick:r,selected:n,unsavedChanges:i=!1}){return R.jsx(e6,{className:je("group",{"bg-transparent hover:bg-bolt-elements-item-backgroundActive text-bolt-elements-item-contentDefault":!n,"bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent":n}),depth:t,iconClasses:je("i-ph:file-duotone scale-98",{"group-hover:text-bolt-elements-item-contentActive":!n}),onClick:r,children:R.jsxs("div",{className:je("flex items-center",{"group-hover:text-bolt-elements-item-contentActive":!n}),children:[R.jsx("div",{className:"flex-1 truncate pr-2",children:e}),i&&R.jsx("span",{className:"i-ph:circle-fill scale-68 shrink-0 text-orange-500"})]})})}function e6({depth:t,iconClasses:e,onClick:r,className:n,children:i}){return R.jsxs("button",{className:je("flex items-center gap-1.5 w-full pr-2 border-2 border-transparent text-faded py-0.5",n),style:{paddingLeft:`${6+t*One}px`},onClick:()=>r?.(),children:[R.jsx("div",{className:je("scale-120 shrink-0",e)}),R.jsx("div",{className:"truncate w-full text-left",children:i})]})}function Bne(t,e="/",r,n){const i=new Set,s=[];let o=0;e==="/"&&!r&&(o=1,s.push({kind:"folder",name:"/",depth:0,id:0,fullPath:"/"}));for(const[a,l]of Object.entries(t)){const c=a.split("/").filter(g=>g),u=c.at(-1);if(!u||Fne(a,u,n))continue;let h="",f=0,d=0;for(;f<c.length;){const g=c[f],_=h+=`/${g}`;if(!_.startsWith(e)||r&&_===e){f++;continue}f===c.length-1&&l?.type==="file"?s.push({kind:"file",id:s.length,name:g,fullPath:_,depth:d+o}):i.has(_)||(i.add(_),s.push({kind:"folder",id:s.length,name:g,fullPath:_,depth:d+o})),f++,d++}}return Hne(e,s,r)}function Fne(t,e,r){return r.some(n=>typeof n=="string"?e===n:n.test(t))}function Hne(t,e,r){Dne.trace("sortFileList");const n=new Map,i=new Map;e.sort((a,l)=>Une(a,l));for(const a of e){n.set(a.fullPath,a);const l=a.fullPath.slice(0,a.fullPath.lastIndexOf("/"));l!==t.slice(0,t.lastIndexOf("/"))&&(i.has(l)||i.set(l,[]),i.get(l)?.push(a))}const s=[],o=a=>{const l=n.get(a);l&&s.push(l);const c=i.get(a);if(c)for(const u of c)u.kind==="folder"?o(u.fullPath):s.push(u)};if(r){const a=i.get(t)||[];for(const l of a)o(l.fullPath)}else o(t);return s}function Une(t,e){return t.kind!==e.kind?t.kind==="folder"?-1:1:t.name.localeCompare(e.name,void 0,{numeric:!0,sensitivity:"base"})}const jne=new RegExp(`^${Vh.split("/").slice(0,-1).join("/").replaceAll("/","\\/")}/`),$ne={open:{y:0,opacity:1,transition:{duration:.15,ease:On}},close:{y:6,opacity:0,transition:{duration:.15,ease:On}}},zne=D.memo(({files:t,pathSegments:e=[],onFileSelect:r})=>{Jl.trace("FileBreadcrumb");const[n,i]=D.useState(null),s=D.useRef(null),o=D.useRef([]),a=l=>{i(c=>c===l?null:l)};return D.useEffect(()=>{const l=c=>{n!==null&&!s.current?.contains(c.target)&&!o.current.some(u=>u?.contains(c.target))&&i(null)};return document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[n]),t===void 0||e.length===0?null:R.jsx("div",{className:"flex",children:e.map((l,c)=>{const u=c===e.length-1,h=e.slice(0,c).join("/");if(!jne.test(h))return null;const f=n===c;return R.jsx("div",{className:"relative flex items-center",children:R.jsxs(kne,{open:f,modal:!1,children:[R.jsx(Ane,{asChild:!0,children:R.jsxs("span",{ref:d=>o.current[c]=d,className:je("flex items-center gap-1.5 cursor-pointer shrink-0",{"text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary":!f,"text-bolt-elements-textPrimary underline":f,"pr-4":u}),onClick:()=>a(c),children:[u&&R.jsx("div",{className:"i-ph:file-duotone"}),l]})}),c>0&&!u&&R.jsx("span",{className:"i-ph:caret-right inline-block mx-1"}),R.jsx(Bp,{children:f&&R.jsx(Rne,{children:R.jsx(Pne,{className:"z-file-tree-breadcrumb",asChild:!0,align:"start",side:"bottom",avoidCollisions:!1,children:R.jsxs(Jr.div,{ref:s,initial:"close",animate:"open",exit:"close",variants:$ne,children:[R.jsx("div",{className:"rounded-lg overflow-hidden",children:R.jsx("div",{className:"max-h-[50vh] min-w-[300px] overflow-scroll bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor shadow-sm rounded-lg",children:R.jsx(JM,{files:t,hideRoot:!0,rootFolder:h,collapsed:!0,allowFolderSelection:!0,selectedFile:`${h}/${l}`,onFileSelect:d=>{i(null),r?.(d)}})})}),R.jsx(Ine,{className:"fill-bolt-elements-borderColor"})]})})})})]})},c)})})});var t6={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(self,()=>(()=>{var r={};return(()=>{var n=r;Object.defineProperty(n,"__esModule",{value:!0}),n.FitAddon=void 0,n.FitAddon=class{activate(i){this._terminal=i}dispose(){}fit(){const i=this.proposeDimensions();if(!i||!this._terminal||isNaN(i.cols)||isNaN(i.rows))return;const s=this._terminal._core;this._terminal.rows===i.rows&&this._terminal.cols===i.cols||(s._renderService.clear(),this._terminal.resize(i.cols,i.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const i=this._terminal._core,s=i._renderService.dimensions;if(s.css.cell.width===0||s.css.cell.height===0)return;const o=this._terminal.options.scrollback===0?0:i.viewport.scrollBarWidth,a=window.getComputedStyle(this._terminal.element.parentElement),l=parseInt(a.getPropertyValue("height")),c=Math.max(0,parseInt(a.getPropertyValue("width"))),u=window.getComputedStyle(this._terminal.element),h=l-(parseInt(u.getPropertyValue("padding-top"))+parseInt(u.getPropertyValue("padding-bottom"))),f=c-(parseInt(u.getPropertyValue("padding-right"))+parseInt(u.getPropertyValue("padding-left")))-o;return{cols:Math.max(2,Math.floor(f/s.css.cell.width)),rows:Math.max(1,Math.floor(h/s.css.cell.height))}}}})(),r})())})(t6);var Vne=t6.exports,r6={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(self,()=>(()=>{var r={6:(o,a)=>{function l(u){try{const h=new URL(u),f=h.password&&h.username?`${h.protocol}//${h.username}:${h.password}@${h.host}`:h.username?`${h.protocol}//${h.username}@${h.host}`:`${h.protocol}//${h.host}`;return u.toLocaleLowerCase().startsWith(f.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(a,"__esModule",{value:!0}),a.LinkComputer=a.WebLinkProvider=void 0,a.WebLinkProvider=class{constructor(u,h,f,d={}){this._terminal=u,this._regex=h,this._handler=f,this._options=d}provideLinks(u,h){const f=c.computeLink(u,this._regex,this._terminal,this._handler);h(this._addCallbacks(f))}_addCallbacks(u){return u.map(h=>(h.leave=this._options.leave,h.hover=(f,d)=>{if(this._options.hover){const{range:g}=h;this._options.hover(f,d,g)}},h))}};class c{static computeLink(h,f,d,g){const _=new RegExp(f.source,(f.flags||"")+"g"),[m,p]=c._getWindowedLineStrings(h-1,d),b=m.join("");let y;const v=[];for(;y=_.exec(b);){const w=y[0];if(!l(w))continue;const[S,x]=c._mapStrIdx(d,p,0,y.index),[E,T]=c._mapStrIdx(d,S,x,w.length);if(S===-1||x===-1||E===-1||T===-1)continue;const k={start:{x:x+1,y:S+1},end:{x:T,y:E+1}};v.push({range:k,text:w,activate:g})}return v}static _getWindowedLineStrings(h,f){let d,g=h,_=h,m=0,p="";const b=[];if(d=f.buffer.active.getLine(h)){const y=d.translateToString(!0);if(d.isWrapped&&y[0]!==" "){for(m=0;(d=f.buffer.active.getLine(--g))&&m<2048&&(p=d.translateToString(!0),m+=p.length,b.push(p),d.isWrapped&&p.indexOf(" ")===-1););b.reverse()}for(b.push(y),m=0;(d=f.buffer.active.getLine(++_))&&d.isWrapped&&m<2048&&(p=d.translateToString(!0),m+=p.length,b.push(p),p.indexOf(" ")===-1););}return[b,g]}static _mapStrIdx(h,f,d,g){const _=h.buffer.active,m=_.getNullCell();let p=d;for(;g;){const b=_.getLine(f);if(!b)return[-1,-1];for(let y=p;y<b.length;++y){b.getCell(y,m);const v=m.getChars();if(m.getWidth()&&(g-=v.length||1,y===b.length-1&&v==="")){const w=_.getLine(f+1);w&&w.isWrapped&&(w.getCell(0,m),m.getWidth()===2&&(g+=1))}if(g<0)return[f,y]}f++,p=0}return[f,p]}}a.LinkComputer=c}},n={};function i(o){var a=n[o];if(a!==void 0)return a.exports;var l=n[o]={exports:{}};return r[o](l,l.exports,i),l.exports}var s={};return(()=>{var o=s;Object.defineProperty(o,"__esModule",{value:!0}),o.WebLinksAddon=void 0;const a=i(6),l=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function c(u,h){const f=window.open();if(f){try{f.opener=null}catch{}f.location.href=h}else console.warn("Opening link blocked as opener could not be cleared")}o.WebLinksAddon=class{constructor(u=c,h={}){this._handler=u,this._options=h}activate(u){this._terminal=u;const h=this._options,f=h.urlRegex||l;this._linkProvider=this._terminal.registerLinkProvider(new a.WebLinkProvider(this._terminal,f,this._handler,h))}dispose(){this._linkProvider?.dispose()}}})(),s})())})(r6);var Wne=r6.exports,n6={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(globalThis,()=>(()=>{var r={4567:function(o,a,l){var c=this&&this.__decorate||function(b,y,v,w){var S,x=arguments.length,E=x<3?y:w===null?w=Object.getOwnPropertyDescriptor(y,v):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(b,y,v,w);else for(var T=b.length-1;T>=0;T--)(S=b[T])&&(E=(x<3?S(E):x>3?S(y,v,E):S(y,v))||E);return x>3&&E&&Object.defineProperty(y,v,E),E},u=this&&this.__param||function(b,y){return function(v,w){y(v,w,b)}};Object.defineProperty(a,"__esModule",{value:!0}),a.AccessibilityManager=void 0;const h=l(9042),f=l(9924),d=l(844),g=l(4725),_=l(2585),m=l(3656);let p=a.AccessibilityManager=class extends d.Disposable{constructor(b,y,v,w){super(),this._terminal=b,this._coreBrowserService=v,this._renderService=w,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let S=0;S<this._terminal.rows;S++)this._rowElements[S]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[S]);if(this._topBoundaryFocusListener=S=>this._handleBoundaryFocus(S,0),this._bottomBoundaryFocusListener=S=>this._handleBoundaryFocus(S,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new f.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(S=>this._handleResize(S.rows))),this.register(this._terminal.onRender(S=>this._refreshRows(S.start,S.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(S=>this._handleChar(S))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(S=>this._handleTab(S))),this.register(this._terminal.onKey(S=>this._handleKey(S.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,m.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,d.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(b){for(let y=0;y<b;y++)this._handleChar(" ")}_handleChar(b){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==b&&(this._charsToAnnounce+=b):this._charsToAnnounce+=b,b===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=h.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(b){this._clearLiveRegion(),/\p{Control}/u.test(b)||this._charsToConsume.push(b)}_refreshRows(b,y){this._liveRegionDebouncer.refresh(b,y,this._terminal.rows)}_renderRows(b,y){const v=this._terminal.buffer,w=v.lines.length.toString();for(let S=b;S<=y;S++){const x=v.lines.get(v.ydisp+S),E=[],T=x?.translateToString(!0,void 0,void 0,E)||"",k=(v.ydisp+S+1).toString(),B=this._rowElements[S];B&&(T.length===0?(B.innerText="",this._rowColumns.set(B,[0,1])):(B.textContent=T,this._rowColumns.set(B,E)),B.setAttribute("aria-posinset",k),B.setAttribute("aria-setsize",w))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(b,y){const v=b.target,w=this._rowElements[y===0?1:this._rowElements.length-2];if(v.getAttribute("aria-posinset")===(y===0?"1":`${this._terminal.buffer.lines.length}`)||b.relatedTarget!==w)return;let S,x;if(y===0?(S=v,x=this._rowElements.pop(),this._rowContainer.removeChild(x)):(S=this._rowElements.shift(),x=v,this._rowContainer.removeChild(S)),S.removeEventListener("focus",this._topBoundaryFocusListener),x.removeEventListener("focus",this._bottomBoundaryFocusListener),y===0){const E=this._createAccessibilityTreeNode();this._rowElements.unshift(E),this._rowContainer.insertAdjacentElement("afterbegin",E)}else{const E=this._createAccessibilityTreeNode();this._rowElements.push(E),this._rowContainer.appendChild(E)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(y===0?-1:1),this._rowElements[y===0?1:this._rowElements.length-2].focus(),b.preventDefault(),b.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;const b=document.getSelection();if(!b)return;if(b.isCollapsed)return void(this._rowContainer.contains(b.anchorNode)&&this._terminal.clearSelection());if(!b.anchorNode||!b.focusNode)return void console.error("anchorNode and/or focusNode are null");let y={node:b.anchorNode,offset:b.anchorOffset},v={node:b.focusNode,offset:b.focusOffset};if((y.node.compareDocumentPosition(v.node)&Node.DOCUMENT_POSITION_PRECEDING||y.node===v.node&&y.offset>v.offset)&&([y,v]=[v,y]),y.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(y={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(y.node))return;const w=this._rowElements.slice(-1)[0];if(v.node.compareDocumentPosition(w)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(v={node:w,offset:w.textContent?.length??0}),!this._rowContainer.contains(v.node))return;const S=({node:T,offset:k})=>{const B=T instanceof Text?T.parentNode:T;let P=parseInt(B?.getAttribute("aria-posinset"),10)-1;if(isNaN(P))return console.warn("row is invalid. Race condition?"),null;const O=this._rowColumns.get(B);if(!O)return console.warn("columns is null. Race condition?"),null;let A=k<O.length?O[k]:O.slice(-1)[0]+1;return A>=this._terminal.cols&&(++P,A=0),{row:P,column:A}},x=S(y),E=S(v);if(x&&E){if(x.row>E.row||x.row===E.row&&x.column>=E.column)throw new Error("invalid range");this._terminal.select(x.column,x.row,(E.row-x.row)*this._terminal.cols-x.column+E.column)}}_handleResize(b){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let y=this._rowContainer.children.length;y<this._terminal.rows;y++)this._rowElements[y]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[y]);for(;this._rowElements.length>b;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const b=this._coreBrowserService.mainDocument.createElement("div");return b.setAttribute("role","listitem"),b.tabIndex=-1,this._refreshRowDimensions(b),b}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let b=0;b<this._terminal.rows;b++)this._refreshRowDimensions(this._rowElements[b])}}_refreshRowDimensions(b){b.style.height=`${this._renderService.dimensions.css.cell.height}px`}};a.AccessibilityManager=p=c([u(1,_.IInstantiationService),u(2,g.ICoreBrowserService),u(3,g.IRenderService)],p)},3614:(o,a)=>{function l(f){return f.replace(/\r?\n/g,"\r")}function c(f,d){return d?"\x1B[200~"+f+"\x1B[201~":f}function u(f,d,g,_){f=c(f=l(f),g.decPrivateModes.bracketedPasteMode&&_.rawOptions.ignoreBracketedPasteMode!==!0),g.triggerDataEvent(f,!0),d.value=""}function h(f,d,g){const _=g.getBoundingClientRect(),m=f.clientX-_.left-10,p=f.clientY-_.top-10;d.style.width="20px",d.style.height="20px",d.style.left=`${m}px`,d.style.top=`${p}px`,d.style.zIndex="1000",d.focus()}Object.defineProperty(a,"__esModule",{value:!0}),a.rightClickHandler=a.moveTextAreaUnderMouseCursor=a.paste=a.handlePasteEvent=a.copyHandler=a.bracketTextForPaste=a.prepareTextForTerminal=void 0,a.prepareTextForTerminal=l,a.bracketTextForPaste=c,a.copyHandler=function(f,d){f.clipboardData&&f.clipboardData.setData("text/plain",d.selectionText),f.preventDefault()},a.handlePasteEvent=function(f,d,g,_){f.stopPropagation(),f.clipboardData&&u(f.clipboardData.getData("text/plain"),d,g,_)},a.paste=u,a.moveTextAreaUnderMouseCursor=h,a.rightClickHandler=function(f,d,g,_,m){h(f,d,g),m&&_.rightClickSelect(f),d.value=_.selectionText,d.select()}},7239:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorContrastCache=void 0;const c=l(1505);a.ColorContrastCache=class{constructor(){this._color=new c.TwoKeyMap,this._css=new c.TwoKeyMap}setCss(u,h,f){this._css.set(u,h,f)}getCss(u,h){return this._css.get(u,h)}setColor(u,h,f){this._color.set(u,h,f)}getColor(u,h){return this._color.get(u,h)}clear(){this._color.clear(),this._css.clear()}}},3656:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.addDisposableDomListener=void 0,a.addDisposableDomListener=function(l,c,u,h){l.addEventListener(c,u,h);let f=!1;return{dispose:()=>{f||(f=!0,l.removeEventListener(c,u,h))}}}},3551:function(o,a,l){var c=this&&this.__decorate||function(p,b,y,v){var w,S=arguments.length,x=S<3?b:v===null?v=Object.getOwnPropertyDescriptor(b,y):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(p,b,y,v);else for(var E=p.length-1;E>=0;E--)(w=p[E])&&(x=(S<3?w(x):S>3?w(b,y,x):w(b,y))||x);return S>3&&x&&Object.defineProperty(b,y,x),x},u=this&&this.__param||function(p,b){return function(y,v){b(y,v,p)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Linkifier=void 0;const h=l(3656),f=l(8460),d=l(844),g=l(2585),_=l(4725);let m=a.Linkifier=class extends d.Disposable{get currentLink(){return this._currentLink}constructor(p,b,y,v,w){super(),this._element=p,this._mouseService=b,this._renderService=y,this._bufferService=v,this._linkProviderService=w,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new f.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new f.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,d.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,d.toDisposable)(()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,h.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,h.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(p){this._lastMouseEvent=p;const b=this._positionFromMouseEvent(p,this._element,this._mouseService);if(!b)return;this._isMouseOut=!1;const y=p.composedPath();for(let v=0;v<y.length;v++){const w=y[v];if(w.classList.contains("xterm"))break;if(w.classList.contains("xterm-hover"))return}this._lastBufferCell&&b.x===this._lastBufferCell.x&&b.y===this._lastBufferCell.y||(this._handleHover(b),this._lastBufferCell=b)}_handleHover(p){if(this._activeLine!==p.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(p,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,p)||(this._clearCurrentLink(),this._askForLink(p,!0))}_askForLink(p,b){this._activeProviderReplies&&b||(this._activeProviderReplies?.forEach(v=>{v?.forEach(w=>{w.link.dispose&&w.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=p.y);let y=!1;for(const[v,w]of this._linkProviderService.linkProviders.entries())b?this._activeProviderReplies?.get(v)&&(y=this._checkLinkProviderResult(v,p,y)):w.provideLinks(p.y,S=>{if(this._isMouseOut)return;const x=S?.map(E=>({link:E}));this._activeProviderReplies?.set(v,x),y=this._checkLinkProviderResult(v,p,y),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(p.y,this._activeProviderReplies)})}_removeIntersectingLinks(p,b){const y=new Set;for(let v=0;v<b.size;v++){const w=b.get(v);if(w)for(let S=0;S<w.length;S++){const x=w[S],E=x.link.range.start.y<p?0:x.link.range.start.x,T=x.link.range.end.y>p?this._bufferService.cols:x.link.range.end.x;for(let k=E;k<=T;k++){if(y.has(k)){w.splice(S--,1);break}y.add(k)}}}}_checkLinkProviderResult(p,b,y){if(!this._activeProviderReplies)return y;const v=this._activeProviderReplies.get(p);let w=!1;for(let S=0;S<p;S++)this._activeProviderReplies.has(S)&&!this._activeProviderReplies.get(S)||(w=!0);if(!w&&v){const S=v.find(x=>this._linkAtPosition(x.link,b));S&&(y=!0,this._handleNewLink(S))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!y)for(let S=0;S<this._activeProviderReplies.size;S++){const x=this._activeProviderReplies.get(S)?.find(E=>this._linkAtPosition(E.link,b));if(x){y=!0,this._handleNewLink(x);break}}return y}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(p){if(!this._currentLink)return;const b=this._positionFromMouseEvent(p,this._element,this._mouseService);b&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,b)&&this._currentLink.link.activate(p,this._currentLink.link.text)}_clearCurrentLink(p,b){this._currentLink&&this._lastMouseEvent&&(!p||!b||this._currentLink.link.range.start.y>=p&&this._currentLink.link.range.end.y<=b)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,d.disposeArray)(this._linkCacheDisposables))}_handleNewLink(p){if(!this._lastMouseEvent)return;const b=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);b&&this._linkAtPosition(p.link,b)&&(this._currentLink=p,this._currentLink.state={decorations:{underline:p.link.decorations===void 0||p.link.decorations.underline,pointerCursor:p.link.decorations===void 0||p.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,p.link,this._lastMouseEvent),p.link.decorations={},Object.defineProperties(p.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:y=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==y&&(this._currentLink.state.decorations.pointerCursor=y,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",y))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:y=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==y&&(this._currentLink.state.decorations.underline=y,this._currentLink.state.isHovered&&this._fireUnderlineEvent(p.link,y))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(y=>{if(!this._currentLink)return;const v=y.start===0?0:y.start+1+this._bufferService.buffer.ydisp,w=this._bufferService.buffer.ydisp+1+y.end;if(this._currentLink.link.range.start.y>=v&&this._currentLink.link.range.end.y<=w&&(this._clearCurrentLink(v,w),this._lastMouseEvent)){const S=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);S&&this._askForLink(S,!1)}})))}_linkHover(p,b,y){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(b,!0),this._currentLink.state.decorations.pointerCursor&&p.classList.add("xterm-cursor-pointer")),b.hover&&b.hover(y,b.text)}_fireUnderlineEvent(p,b){const y=p.range,v=this._bufferService.buffer.ydisp,w=this._createLinkUnderlineEvent(y.start.x-1,y.start.y-v-1,y.end.x,y.end.y-v-1,void 0);(b?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(w)}_linkLeave(p,b,y){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(b,!1),this._currentLink.state.decorations.pointerCursor&&p.classList.remove("xterm-cursor-pointer")),b.leave&&b.leave(y,b.text)}_linkAtPosition(p,b){const y=p.range.start.y*this._bufferService.cols+p.range.start.x,v=p.range.end.y*this._bufferService.cols+p.range.end.x,w=b.y*this._bufferService.cols+b.x;return y<=w&&w<=v}_positionFromMouseEvent(p,b,y){const v=y.getCoords(p,b,this._bufferService.cols,this._bufferService.rows);if(v)return{x:v[0],y:v[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(p,b,y,v,w){return{x1:p,y1:b,x2:y,y2:v,cols:this._bufferService.cols,fg:w}}};a.Linkifier=m=c([u(1,_.IMouseService),u(2,_.IRenderService),u(3,g.IBufferService),u(4,_.ILinkProviderService)],m)},9042:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.tooMuchOutput=a.promptLabel=void 0,a.promptLabel="Terminal input",a.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(o,a,l){var c=this&&this.__decorate||function(_,m,p,b){var y,v=arguments.length,w=v<3?m:b===null?b=Object.getOwnPropertyDescriptor(m,p):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(_,m,p,b);else for(var S=_.length-1;S>=0;S--)(y=_[S])&&(w=(v<3?y(w):v>3?y(m,p,w):y(m,p))||w);return v>3&&w&&Object.defineProperty(m,p,w),w},u=this&&this.__param||function(_,m){return function(p,b){m(p,b,_)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OscLinkProvider=void 0;const h=l(511),f=l(2585);let d=a.OscLinkProvider=class{constructor(_,m,p){this._bufferService=_,this._optionsService=m,this._oscLinkService=p}provideLinks(_,m){const p=this._bufferService.buffer.lines.get(_-1);if(!p)return void m(void 0);const b=[],y=this._optionsService.rawOptions.linkHandler,v=new h.CellData,w=p.getTrimmedLength();let S=-1,x=-1,E=!1;for(let T=0;T<w;T++)if(x!==-1||p.hasContent(T)){if(p.loadCell(T,v),v.hasExtendedAttrs()&&v.extended.urlId){if(x===-1){x=T,S=v.extended.urlId;continue}E=v.extended.urlId!==S}else x!==-1&&(E=!0);if(E||x!==-1&&T===w-1){const k=this._oscLinkService.getLinkData(S)?.uri;if(k){const B={start:{x:x+1,y:_},end:{x:T+(E||T!==w-1?0:1),y:_}};let P=!1;if(!y?.allowNonHttpProtocols)try{const O=new URL(k);["http:","https:"].includes(O.protocol)||(P=!0)}catch{P=!0}P||b.push({text:k,range:B,activate:(O,A)=>y?y.activate(O,A,B):g(0,A),hover:(O,A)=>y?.hover?.(O,A,B),leave:(O,A)=>y?.leave?.(O,A,B)})}E=!1,v.hasExtendedAttrs()&&v.extended.urlId?(x=T,S=v.extended.urlId):(x=-1,S=-1)}}m(b)}};function g(_,m){if(confirm(`Do you want to navigate to ${m}?

WARNING: This link could potentially be dangerous`)){const p=window.open();if(p){try{p.opener=null}catch{}p.location.href=m}else console.warn("Opening link blocked as opener could not be cleared")}}a.OscLinkProvider=d=c([u(0,f.IBufferService),u(1,f.IOptionsService),u(2,f.IOscLinkService)],d)},6193:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.RenderDebouncer=void 0,a.RenderDebouncer=class{constructor(l,c){this._renderCallback=l,this._coreBrowserService=c,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(l){return this._refreshCallbacks.push(l),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(l,c,u){this._rowCount=u,l=l!==void 0?l:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,l):l,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const l=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(l,c),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const l of this._refreshCallbacks)l(0);this._refreshCallbacks=[]}}},3236:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Terminal=void 0;const c=l(3614),u=l(3656),h=l(3551),f=l(9042),d=l(3730),g=l(1680),_=l(3107),m=l(5744),p=l(2950),b=l(1296),y=l(428),v=l(4269),w=l(5114),S=l(8934),x=l(3230),E=l(9312),T=l(4725),k=l(6731),B=l(8055),P=l(8969),O=l(8460),A=l(844),$=l(6114),te=l(8437),Q=l(2584),ee=l(7399),L=l(5941),M=l(9074),U=l(2585),j=l(5435),H=l(4567),Z=l(779);class re extends P.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(X={}){super(X),this.browser=$,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new A.MutableDisposable),this._onCursorMove=this.register(new O.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new O.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new O.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new O.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new O.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new O.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new O.EventEmitter),this._onBlur=this.register(new O.EventEmitter),this._onA11yCharEmitter=this.register(new O.EventEmitter),this._onA11yTabEmitter=this.register(new O.EventEmitter),this._onWillOpen=this.register(new O.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(M.DecorationService),this._instantiationService.setService(U.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(Z.LinkProviderService),this._instantiationService.setService(T.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(d.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((V,ie)=>this.refresh(V,ie))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(V=>this._reportWindowsOptions(V))),this.register(this._inputHandler.onColor(V=>this._handleColorEvent(V))),this.register((0,O.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,O.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,O.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,O.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(V=>this._afterResize(V.cols,V.rows))),this.register((0,A.toDisposable)(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}_handleColorEvent(X){if(this._themeService)for(const V of X){let ie,se="";switch(V.index){case 256:ie="foreground",se="10";break;case 257:ie="background",se="11";break;case 258:ie="cursor",se="12";break;default:ie="ansi",se="4;"+V.index}switch(V.type){case 0:const me=B.color.toColorRGB(ie==="ansi"?this._themeService.colors.ansi[V.index]:this._themeService.colors[ie]);this.coreService.triggerDataEvent(`${Q.C0.ESC}]${se};${(0,L.toRgbString)(me)}${Q.C1_ESCAPED.ST}`);break;case 1:if(ie==="ansi")this._themeService.modifyColors(de=>de.ansi[V.index]=B.channels.toColor(...V.color));else{const de=ie;this._themeService.modifyColors(ve=>ve[de]=B.channels.toColor(...V.color))}break;case 2:this._themeService.restoreColor(V.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(X){X?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(H.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(X){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Q.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Q.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const X=this.buffer.ybase+this.buffer.y,V=this.buffer.lines.get(X);if(!V)return;const ie=Math.min(this.buffer.x,this.cols-1),se=this._renderService.dimensions.css.cell.height,me=V.getWidth(ie),de=this._renderService.dimensions.css.cell.width*me,ve=this.buffer.y*this._renderService.dimensions.css.cell.height,F=ie*this._renderService.dimensions.css.cell.width;this.textarea.style.left=F+"px",this.textarea.style.top=ve+"px",this.textarea.style.width=de+"px",this.textarea.style.height=se+"px",this.textarea.style.lineHeight=se+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,u.addDisposableDomListener)(this.element,"copy",V=>{this.hasSelection()&&(0,c.copyHandler)(V,this._selectionService)}));const X=V=>(0,c.handlePasteEvent)(V,this.textarea,this.coreService,this.optionsService);this.register((0,u.addDisposableDomListener)(this.textarea,"paste",X)),this.register((0,u.addDisposableDomListener)(this.element,"paste",X)),$.isFirefox?this.register((0,u.addDisposableDomListener)(this.element,"mousedown",V=>{V.button===2&&(0,c.rightClickHandler)(V,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,u.addDisposableDomListener)(this.element,"contextmenu",V=>{(0,c.rightClickHandler)(V,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),$.isLinux&&this.register((0,u.addDisposableDomListener)(this.element,"auxclick",V=>{V.button===1&&(0,c.moveTextAreaUnderMouseCursor)(V,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,u.addDisposableDomListener)(this.textarea,"keyup",X=>this._keyUp(X),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keydown",X=>this._keyDown(X),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keypress",X=>this._keyPress(X),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionupdate",X=>this._compositionHelper.compositionupdate(X))),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,u.addDisposableDomListener)(this.textarea,"input",X=>this._inputEvent(X),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(X){if(!X)throw new Error("Terminal requires a parent element.");if(X.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=X.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),X.appendChild(this.element);const V=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),V.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,u.addDisposableDomListener)(this.screenElement,"mousemove",ie=>this.updateCursorStyle(ie))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),V.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",f.promptLabel),$.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(w.CoreBrowserService,this.textarea,X.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(T.ICoreBrowserService,this._coreBrowserService),this.register((0,u.addDisposableDomListener)(this.textarea,"focus",ie=>this._handleTextAreaFocus(ie))),this.register((0,u.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(y.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(T.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(k.ThemeService),this._instantiationService.setService(T.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(v.CharacterJoinerService),this._instantiationService.setService(T.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(x.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(T.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(ie=>this._onRender.fire(ie))),this.onResize(ie=>this._renderService.resize(ie.cols,ie.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(p.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(S.MouseService),this._instantiationService.setService(T.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(h.Linkifier,this.screenElement)),this.element.appendChild(V);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(g.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(ie=>this.scrollLines(ie.amount,ie.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(E.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(T.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(ie=>this.scrollLines(ie.amount,ie.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(ie=>this._renderService.handleSelectionChanged(ie.start,ie.end,ie.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(ie=>{this.textarea.value=ie,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(ie=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(_.BufferDecorationRenderer,this.screenElement)),this.register((0,u.addDisposableDomListener)(this.element,"mousedown",ie=>this._selectionService.handleMouseDown(ie))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(H.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",ie=>this._handleScreenReaderModeOptionChange(ie))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(m.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",ie=>{!this._overviewRulerRenderer&&ie&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(m.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(b.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const X=this,V=this.element;function ie(de){const ve=X._mouseService.getMouseReportCoords(de,X.screenElement);if(!ve)return!1;let F,he;switch(de.overrideType||de.type){case"mousemove":he=32,de.buttons===void 0?(F=3,de.button!==void 0&&(F=de.button<3?de.button:3)):F=1&de.buttons?0:4&de.buttons?1:2&de.buttons?2:3;break;case"mouseup":he=0,F=de.button<3?de.button:3;break;case"mousedown":he=1,F=de.button<3?de.button:3;break;case"wheel":if(X._customWheelEventHandler&&X._customWheelEventHandler(de)===!1||X.viewport.getLinesScrolled(de)===0)return!1;he=de.deltaY<0?0:1,F=4;break;default:return!1}return!(he===void 0||F===void 0||F>4)&&X.coreMouseService.triggerMouseEvent({col:ve.col,row:ve.row,x:ve.x,y:ve.y,button:F,action:he,ctrl:de.ctrlKey,alt:de.altKey,shift:de.shiftKey})}const se={mouseup:null,wheel:null,mousedrag:null,mousemove:null},me={mouseup:de=>(ie(de),de.buttons||(this._document.removeEventListener("mouseup",se.mouseup),se.mousedrag&&this._document.removeEventListener("mousemove",se.mousedrag)),this.cancel(de)),wheel:de=>(ie(de),this.cancel(de,!0)),mousedrag:de=>{de.buttons&&ie(de)},mousemove:de=>{de.buttons||ie(de)}};this.register(this.coreMouseService.onProtocolChange(de=>{de?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(de)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&de?se.mousemove||(V.addEventListener("mousemove",me.mousemove),se.mousemove=me.mousemove):(V.removeEventListener("mousemove",se.mousemove),se.mousemove=null),16&de?se.wheel||(V.addEventListener("wheel",me.wheel,{passive:!1}),se.wheel=me.wheel):(V.removeEventListener("wheel",se.wheel),se.wheel=null),2&de?se.mouseup||(se.mouseup=me.mouseup):(this._document.removeEventListener("mouseup",se.mouseup),se.mouseup=null),4&de?se.mousedrag||(se.mousedrag=me.mousedrag):(this._document.removeEventListener("mousemove",se.mousedrag),se.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,u.addDisposableDomListener)(V,"mousedown",de=>{if(de.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(de))return ie(de),se.mouseup&&this._document.addEventListener("mouseup",se.mouseup),se.mousedrag&&this._document.addEventListener("mousemove",se.mousedrag),this.cancel(de)})),this.register((0,u.addDisposableDomListener)(V,"wheel",de=>{if(!se.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(de)===!1)return!1;if(!this.buffer.hasScrollback){const ve=this.viewport.getLinesScrolled(de);if(ve===0)return;const F=Q.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(de.deltaY<0?"A":"B");let he="";for(let ae=0;ae<Math.abs(ve);ae++)he+=F;return this.coreService.triggerDataEvent(he,!0),this.cancel(de,!0)}return this.viewport.handleWheel(de)?this.cancel(de):void 0}},{passive:!1})),this.register((0,u.addDisposableDomListener)(V,"touchstart",de=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(de),this.cancel(de)},{passive:!0})),this.register((0,u.addDisposableDomListener)(V,"touchmove",de=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(de)?void 0:this.cancel(de)},{passive:!1}))}refresh(X,V){this._renderService?.refreshRows(X,V)}updateCursorStyle(X){this._selectionService?.shouldColumnSelect(X)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(X,V,ie=0){ie===1?(super.scrollLines(X,V,ie),this.refresh(0,this.rows-1)):this.viewport?.scrollLines(X)}paste(X){(0,c.paste)(X,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(X){this._customKeyEventHandler=X}attachCustomWheelEventHandler(X){this._customWheelEventHandler=X}registerLinkProvider(X){return this._linkProviderService.registerLinkProvider(X)}registerCharacterJoiner(X){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const V=this._characterJoinerService.register(X);return this.refresh(0,this.rows-1),V}deregisterCharacterJoiner(X){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(X)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(X){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+X)}registerDecoration(X){return this._decorationService.registerDecoration(X)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(X,V,ie){this._selectionService.setSelection(X,V,ie)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(X,V){this._selectionService?.selectLines(X,V)}_keyDown(X){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(X)===!1)return!1;const V=this.browser.isMac&&this.options.macOptionIsMeta&&X.altKey;if(!V&&!this._compositionHelper.keydown(X))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;V||X.key!=="Dead"&&X.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const ie=(0,ee.evaluateKeyboardEvent)(X,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(X),ie.type===3||ie.type===2){const se=this.rows-1;return this.scrollLines(ie.type===2?-se:se),this.cancel(X,!0)}return ie.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,X)||(ie.cancel&&this.cancel(X,!0),!ie.key||!!(X.key&&!X.ctrlKey&&!X.altKey&&!X.metaKey&&X.key.length===1&&X.key.charCodeAt(0)>=65&&X.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(ie.key!==Q.C0.ETX&&ie.key!==Q.C0.CR||(this.textarea.value=""),this._onKey.fire({key:ie.key,domEvent:X}),this._showCursor(),this.coreService.triggerDataEvent(ie.key,!0),!this.optionsService.rawOptions.screenReaderMode||X.altKey||X.ctrlKey?this.cancel(X,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(X,V){const ie=X.isMac&&!this.options.macOptionIsMeta&&V.altKey&&!V.ctrlKey&&!V.metaKey||X.isWindows&&V.altKey&&V.ctrlKey&&!V.metaKey||X.isWindows&&V.getModifierState("AltGraph");return V.type==="keypress"?ie:ie&&(!V.keyCode||V.keyCode>47)}_keyUp(X){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(X)===!1||(function(V){return V.keyCode===16||V.keyCode===17||V.keyCode===18}(X)||this.focus(),this.updateCursorStyle(X),this._keyPressHandled=!1)}_keyPress(X){let V;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(X)===!1)return!1;if(this.cancel(X),X.charCode)V=X.charCode;else if(X.which===null||X.which===void 0)V=X.keyCode;else{if(X.which===0||X.charCode===0)return!1;V=X.which}return!(!V||(X.altKey||X.ctrlKey||X.metaKey)&&!this._isThirdLevelShift(this.browser,X)||(V=String.fromCharCode(V),this._onKey.fire({key:V,domEvent:X}),this._showCursor(),this.coreService.triggerDataEvent(V,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(X){if(X.data&&X.inputType==="insertText"&&(!X.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const V=X.data;return this.coreService.triggerDataEvent(V,!0),this.cancel(X),!0}return!1}resize(X,V){X!==this.cols||V!==this.rows?super.resize(X,V):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(X,V){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let X=1;X<this.rows;X++)this.buffer.lines.push(this.buffer.getBlankLine(te.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;const X=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=X,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(Q.C0.ESC+"[I"):this.coreService.triggerDataEvent(Q.C0.ESC+"[O")}_reportWindowsOptions(X){if(this._renderService)switch(X){case j.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const V=this._renderService.dimensions.css.canvas.width.toFixed(0),ie=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${Q.C0.ESC}[4;${ie};${V}t`);break;case j.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const se=this._renderService.dimensions.css.cell.width.toFixed(0),me=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${Q.C0.ESC}[6;${me};${se}t`)}}cancel(X,V){if(this.options.cancelEvents||V)return X.preventDefault(),X.stopPropagation(),!1}}a.Terminal=re},9924:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TimeBasedDebouncer=void 0,a.TimeBasedDebouncer=class{constructor(l,c=1e3){this._renderCallback=l,this._debounceThresholdMS=c,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(l,c,u){this._rowCount=u,l=l!==void 0?l:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,l):l,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c;const h=Date.now();if(h-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=h,this._innerRefresh();else if(!this._additionalRefreshRequested){const f=h-this._lastRefreshMs,d=this._debounceThresholdMS-f;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},d)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const l=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(l,c)}}},1680:function(o,a,l){var c=this&&this.__decorate||function(p,b,y,v){var w,S=arguments.length,x=S<3?b:v===null?v=Object.getOwnPropertyDescriptor(b,y):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(p,b,y,v);else for(var E=p.length-1;E>=0;E--)(w=p[E])&&(x=(S<3?w(x):S>3?w(b,y,x):w(b,y))||x);return S>3&&x&&Object.defineProperty(b,y,x),x},u=this&&this.__param||function(p,b){return function(y,v){b(y,v,p)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Viewport=void 0;const h=l(3656),f=l(4725),d=l(8460),g=l(844),_=l(2585);let m=a.Viewport=class extends g.Disposable{constructor(p,b,y,v,w,S,x,E){super(),this._viewportElement=p,this._scrollArea=b,this._bufferService=y,this._optionsService=v,this._charSizeService=w,this._renderService=S,this._coreBrowserService=x,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new d.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,h.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(T=>this._activeBuffer=T.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(T=>this._renderDimensions=T)),this._handleThemeChange(E.colors),this.register(E.onChangeColors(T=>this._handleThemeChange(T))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(p){this._viewportElement.style.backgroundColor=p.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(p){if(p)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const b=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==b&&(this._lastRecordedBufferHeight=b,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const p=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==p&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=p),this._refreshAnimationFrame=null}syncScrollArea(p=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(p);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(p)}_handleScroll(p){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const b=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:b,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const p=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(p*(this._smoothScrollState.target-this._smoothScrollState.origin)),p<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(p,b){const y=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(b<0&&this._viewportElement.scrollTop!==0||b>0&&y<this._lastRecordedBufferHeight)||(p.cancelable&&p.preventDefault(),!1)}handleWheel(p){const b=this._getPixelsScrolled(p);return b!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+b:this._smoothScrollState.target+=b,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=b,this._bubbleScroll(p,b))}scrollLines(p){if(p!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const b=p*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+b,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:p,suppressScrollEvent:!1})}_getPixelsScrolled(p){if(p.deltaY===0||p.shiftKey)return 0;let b=this._applyScrollModifier(p.deltaY,p);return p.deltaMode===WheelEvent.DOM_DELTA_LINE?b*=this._currentRowHeight:p.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(b*=this._currentRowHeight*this._bufferService.rows),b}getBufferElements(p,b){let y,v="";const w=[],S=b??this._bufferService.buffer.lines.length,x=this._bufferService.buffer.lines;for(let E=p;E<S;E++){const T=x.get(E);if(!T)continue;const k=x.get(E+1)?.isWrapped;if(v+=T.translateToString(!k),!k||E===x.length-1){const B=document.createElement("div");B.textContent=v,w.push(B),v.length>0&&(y=B),v=""}}return{bufferElements:w,cursorElement:y}}getLinesScrolled(p){if(p.deltaY===0||p.shiftKey)return 0;let b=this._applyScrollModifier(p.deltaY,p);return p.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(b/=this._currentRowHeight+0,this._wheelPartialScroll+=b,b=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):p.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(b*=this._bufferService.rows),b}_applyScrollModifier(p,b){const y=this._optionsService.rawOptions.fastScrollModifier;return y==="alt"&&b.altKey||y==="ctrl"&&b.ctrlKey||y==="shift"&&b.shiftKey?p*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:p*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(p){this._lastTouchY=p.touches[0].pageY}handleTouchMove(p){const b=this._lastTouchY-p.touches[0].pageY;return this._lastTouchY=p.touches[0].pageY,b!==0&&(this._viewportElement.scrollTop+=b,this._bubbleScroll(p,b))}};a.Viewport=m=c([u(2,_.IBufferService),u(3,_.IOptionsService),u(4,f.ICharSizeService),u(5,f.IRenderService),u(6,f.ICoreBrowserService),u(7,f.IThemeService)],m)},3107:function(o,a,l){var c=this&&this.__decorate||function(_,m,p,b){var y,v=arguments.length,w=v<3?m:b===null?b=Object.getOwnPropertyDescriptor(m,p):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(_,m,p,b);else for(var S=_.length-1;S>=0;S--)(y=_[S])&&(w=(v<3?y(w):v>3?y(m,p,w):y(m,p))||w);return v>3&&w&&Object.defineProperty(m,p,w),w},u=this&&this.__param||function(_,m){return function(p,b){m(p,b,_)}};Object.defineProperty(a,"__esModule",{value:!0}),a.BufferDecorationRenderer=void 0;const h=l(4725),f=l(844),d=l(2585);let g=a.BufferDecorationRenderer=class extends f.Disposable{constructor(_,m,p,b,y){super(),this._screenElement=_,this._bufferService=m,this._coreBrowserService=p,this._decorationService=b,this._renderService=y,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(v=>this._removeDecoration(v))),this.register((0,f.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const _ of this._decorationService.decorations)this._renderDecoration(_);this._dimensionsChanged=!1}_renderDecoration(_){this._refreshStyle(_),this._dimensionsChanged&&this._refreshXPosition(_)}_createElement(_){const m=this._coreBrowserService.mainDocument.createElement("div");m.classList.add("xterm-decoration"),m.classList.toggle("xterm-decoration-top-layer",_?.options?.layer==="top"),m.style.width=`${Math.round((_.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,m.style.height=(_.options.height||1)*this._renderService.dimensions.css.cell.height+"px",m.style.top=(_.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",m.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const p=_.options.x??0;return p&&p>this._bufferService.cols&&(m.style.display="none"),this._refreshXPosition(_,m),m}_refreshStyle(_){const m=_.marker.line-this._bufferService.buffers.active.ydisp;if(m<0||m>=this._bufferService.rows)_.element&&(_.element.style.display="none",_.onRenderEmitter.fire(_.element));else{let p=this._decorationElements.get(_);p||(p=this._createElement(_),_.element=p,this._decorationElements.set(_,p),this._container.appendChild(p),_.onDispose(()=>{this._decorationElements.delete(_),p.remove()})),p.style.top=m*this._renderService.dimensions.css.cell.height+"px",p.style.display=this._altBufferIsActive?"none":"block",_.onRenderEmitter.fire(p)}}_refreshXPosition(_,m=_.element){if(!m)return;const p=_.options.x??0;(_.options.anchor||"left")==="right"?m.style.right=p?p*this._renderService.dimensions.css.cell.width+"px":"":m.style.left=p?p*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(_){this._decorationElements.get(_)?.remove(),this._decorationElements.delete(_),_.dispose()}};a.BufferDecorationRenderer=g=c([u(1,d.IBufferService),u(2,h.ICoreBrowserService),u(3,d.IDecorationService),u(4,h.IRenderService)],g)},5871:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorZoneStore=void 0,a.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(l){if(l.options.overviewRulerOptions){for(const c of this._zones)if(c.color===l.options.overviewRulerOptions.color&&c.position===l.options.overviewRulerOptions.position){if(this._lineIntersectsZone(c,l.marker.line))return;if(this._lineAdjacentToZone(c,l.marker.line,l.options.overviewRulerOptions.position))return void this._addLineToZone(c,l.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=l.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=l.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=l.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=l.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:l.options.overviewRulerOptions.color,position:l.options.overviewRulerOptions.position,startBufferLine:l.marker.line,endBufferLine:l.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(l){this._linePadding=l}_lineIntersectsZone(l,c){return c>=l.startBufferLine&&c<=l.endBufferLine}_lineAdjacentToZone(l,c,u){return c>=l.startBufferLine-this._linePadding[u||"full"]&&c<=l.endBufferLine+this._linePadding[u||"full"]}_addLineToZone(l,c){l.startBufferLine=Math.min(l.startBufferLine,c),l.endBufferLine=Math.max(l.endBufferLine,c)}}},5744:function(o,a,l){var c=this&&this.__decorate||function(y,v,w,S){var x,E=arguments.length,T=E<3?v:S===null?S=Object.getOwnPropertyDescriptor(v,w):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(y,v,w,S);else for(var k=y.length-1;k>=0;k--)(x=y[k])&&(T=(E<3?x(T):E>3?x(v,w,T):x(v,w))||T);return E>3&&T&&Object.defineProperty(v,w,T),T},u=this&&this.__param||function(y,v){return function(w,S){v(w,S,y)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OverviewRulerRenderer=void 0;const h=l(5871),f=l(4725),d=l(844),g=l(2585),_={full:0,left:0,center:0,right:0},m={full:0,left:0,center:0,right:0},p={full:0,left:0,center:0,right:0};let b=a.OverviewRulerRenderer=class extends d.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(y,v,w,S,x,E,T){super(),this._viewportElement=y,this._screenElement=v,this._bufferService=w,this._decorationService=S,this._renderService=x,this._optionsService=E,this._coreBrowserService=T,this._colorZoneStore=new h.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);const k=this._canvas.getContext("2d");if(!k)throw new Error("Ctx cannot be null");this._ctx=k,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,d.toDisposable)(()=>{this._canvas?.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const y=Math.floor(this._canvas.width/3),v=Math.ceil(this._canvas.width/3);m.full=this._canvas.width,m.left=y,m.center=v,m.right=y,this._refreshDrawHeightConstants(),p.full=0,p.left=0,p.center=m.left,p.right=m.left+m.center}_refreshDrawHeightConstants(){_.full=Math.round(2*this._coreBrowserService.dpr);const y=this._canvas.height/this._bufferService.buffer.lines.length,v=Math.round(Math.max(Math.min(y,12),6)*this._coreBrowserService.dpr);_.left=v,_.center=v,_.right=v}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*_.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*_.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*_.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*_.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const v of this._decorationService.decorations)this._colorZoneStore.addDecoration(v);this._ctx.lineWidth=1;const y=this._colorZoneStore.zones;for(const v of y)v.position!=="full"&&this._renderColorZone(v);for(const v of y)v.position==="full"&&this._renderColorZone(v);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(y){this._ctx.fillStyle=y.color,this._ctx.fillRect(p[y.position||"full"],Math.round((this._canvas.height-1)*(y.startBufferLine/this._bufferService.buffers.active.lines.length)-_[y.position||"full"]/2),m[y.position||"full"],Math.round((this._canvas.height-1)*((y.endBufferLine-y.startBufferLine)/this._bufferService.buffers.active.lines.length)+_[y.position||"full"]))}_queueRefresh(y,v){this._shouldUpdateDimensions=y||this._shouldUpdateDimensions,this._shouldUpdateAnchor=v||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};a.OverviewRulerRenderer=b=c([u(2,g.IBufferService),u(3,g.IDecorationService),u(4,f.IRenderService),u(5,g.IOptionsService),u(6,f.ICoreBrowserService)],b)},2950:function(o,a,l){var c=this&&this.__decorate||function(_,m,p,b){var y,v=arguments.length,w=v<3?m:b===null?b=Object.getOwnPropertyDescriptor(m,p):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(_,m,p,b);else for(var S=_.length-1;S>=0;S--)(y=_[S])&&(w=(v<3?y(w):v>3?y(m,p,w):y(m,p))||w);return v>3&&w&&Object.defineProperty(m,p,w),w},u=this&&this.__param||function(_,m){return function(p,b){m(p,b,_)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CompositionHelper=void 0;const h=l(4725),f=l(2585),d=l(2584);let g=a.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(_,m,p,b,y,v){this._textarea=_,this._compositionView=m,this._bufferService=p,this._optionsService=b,this._coreService=y,this._renderService=v,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(_){this._compositionView.textContent=_.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(_){if(this._isComposing||this._isSendingComposition){if(_.keyCode===229||_.keyCode===16||_.keyCode===17||_.keyCode===18)return!1;this._finalizeComposition(!1)}return _.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(_){if(this._compositionView.classList.remove("active"),this._isComposing=!1,_){const m={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let p;this._isSendingComposition=!1,m.start+=this._dataAlreadySent.length,p=this._isComposing?this._textarea.value.substring(m.start,m.end):this._textarea.value.substring(m.start),p.length>0&&this._coreService.triggerDataEvent(p,!0)}},0)}else{this._isSendingComposition=!1;const m=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(m,!0)}}_handleAnyTextareaChanges(){const _=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const m=this._textarea.value,p=m.replace(_,"");this._dataAlreadySent=p,m.length>_.length?this._coreService.triggerDataEvent(p,!0):m.length<_.length?this._coreService.triggerDataEvent(`${d.C0.DEL}`,!0):m.length===_.length&&m!==_&&this._coreService.triggerDataEvent(m,!0)}},0)}updateCompositionElements(_){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const m=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),p=this._renderService.dimensions.css.cell.height,b=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,y=m*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=y+"px",this._compositionView.style.top=b+"px",this._compositionView.style.height=p+"px",this._compositionView.style.lineHeight=p+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const v=this._compositionView.getBoundingClientRect();this._textarea.style.left=y+"px",this._textarea.style.top=b+"px",this._textarea.style.width=Math.max(v.width,1)+"px",this._textarea.style.height=Math.max(v.height,1)+"px",this._textarea.style.lineHeight=v.height+"px"}_||setTimeout(()=>this.updateCompositionElements(!0),0)}}};a.CompositionHelper=g=c([u(2,f.IBufferService),u(3,f.IOptionsService),u(4,f.ICoreService),u(5,h.IRenderService)],g)},9806:(o,a)=>{function l(c,u,h){const f=h.getBoundingClientRect(),d=c.getComputedStyle(h),g=parseInt(d.getPropertyValue("padding-left")),_=parseInt(d.getPropertyValue("padding-top"));return[u.clientX-f.left-g,u.clientY-f.top-_]}Object.defineProperty(a,"__esModule",{value:!0}),a.getCoords=a.getCoordsRelativeToElement=void 0,a.getCoordsRelativeToElement=l,a.getCoords=function(c,u,h,f,d,g,_,m,p){if(!g)return;const b=l(c,u,h);return b?(b[0]=Math.ceil((b[0]+(p?_/2:0))/_),b[1]=Math.ceil(b[1]/m),b[0]=Math.min(Math.max(b[0],1),f+(p?1:0)),b[1]=Math.min(Math.max(b[1],1),d),b):void 0}},9504:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.moveToCellSequence=void 0;const c=l(2584);function u(m,p,b,y){const v=m-h(m,b),w=p-h(p,b),S=Math.abs(v-w)-function(x,E,T){let k=0;const B=x-h(x,T),P=E-h(E,T);for(let O=0;O<Math.abs(B-P);O++){const A=f(x,E)==="A"?-1:1;T.buffer.lines.get(B+A*O)?.isWrapped&&k++}return k}(m,p,b);return _(S,g(f(m,p),y))}function h(m,p){let b=0,y=p.buffer.lines.get(m),v=y?.isWrapped;for(;v&&m>=0&&m<p.rows;)b++,y=p.buffer.lines.get(--m),v=y?.isWrapped;return b}function f(m,p){return m>p?"A":"B"}function d(m,p,b,y,v,w){let S=m,x=p,E="";for(;S!==b||x!==y;)S+=v?1:-1,v&&S>w.cols-1?(E+=w.buffer.translateBufferLineToString(x,!1,m,S),S=0,m=0,x++):!v&&S<0&&(E+=w.buffer.translateBufferLineToString(x,!1,0,m+1),S=w.cols-1,m=S,x--);return E+w.buffer.translateBufferLineToString(x,!1,m,S)}function g(m,p){const b=p?"O":"[";return c.C0.ESC+b+m}function _(m,p){m=Math.floor(m);let b="";for(let y=0;y<m;y++)b+=p;return b}a.moveToCellSequence=function(m,p,b,y){const v=b.buffer.x,w=b.buffer.y;if(!b.buffer.hasScrollback)return function(E,T,k,B,P,O){return u(T,B,P,O).length===0?"":_(d(E,T,E,T-h(T,P),!1,P).length,g("D",O))}(v,w,0,p,b,y)+u(w,p,b,y)+function(E,T,k,B,P,O){let A;A=u(T,B,P,O).length>0?B-h(B,P):T;const $=B,te=function(Q,ee,L,M,U,j){let H;return H=u(L,M,U,j).length>0?M-h(M,U):ee,Q<L&&H<=M||Q>=L&&H<M?"C":"D"}(E,T,k,B,P,O);return _(d(E,A,k,$,te==="C",P).length,g(te,O))}(v,w,m,p,b,y);let S;if(w===p)return S=v>m?"D":"C",_(Math.abs(v-m),g(S,y));S=w>p?"D":"C";const x=Math.abs(w-p);return _(function(E,T){return T.cols-E}(w>p?m:v,b)+(x-1)*b.cols+1+((w>p?v:m)-1),g(S,y))}},1296:function(o,a,l){var c=this&&this.__decorate||function(O,A,$,te){var Q,ee=arguments.length,L=ee<3?A:te===null?te=Object.getOwnPropertyDescriptor(A,$):te;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(O,A,$,te);else for(var M=O.length-1;M>=0;M--)(Q=O[M])&&(L=(ee<3?Q(L):ee>3?Q(A,$,L):Q(A,$))||L);return ee>3&&L&&Object.defineProperty(A,$,L),L},u=this&&this.__param||function(O,A){return function($,te){A($,te,O)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRenderer=void 0;const h=l(3787),f=l(2550),d=l(2223),g=l(6171),_=l(6052),m=l(4725),p=l(8055),b=l(8460),y=l(844),v=l(2585),w="xterm-dom-renderer-owner-",S="xterm-rows",x="xterm-fg-",E="xterm-bg-",T="xterm-focus",k="xterm-selection";let B=1,P=a.DomRenderer=class extends y.Disposable{constructor(O,A,$,te,Q,ee,L,M,U,j,H,Z,re){super(),this._terminal=O,this._document=A,this._element=$,this._screenElement=te,this._viewportElement=Q,this._helperContainer=ee,this._linkifier2=L,this._charSizeService=U,this._optionsService=j,this._bufferService=H,this._coreBrowserService=Z,this._themeService=re,this._terminalClass=B++,this._rowElements=[],this._selectionRenderModel=(0,_.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new b.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(S),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(k),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,g.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(ge=>this._injectCss(ge))),this._injectCss(this._themeService.colors),this._rowFactory=M.createInstance(h.DomRendererRowFactory,document),this._element.classList.add(w+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(ge=>this._handleLinkHover(ge))),this.register(this._linkifier2.onHideLinkUnderline(ge=>this._handleLinkLeave(ge))),this.register((0,y.toDisposable)(()=>{this._element.classList.remove(w+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new f.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const O=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*O,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*O),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/O),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/O),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const $ of this._rowElements)$.style.width=`${this.dimensions.css.canvas.width}px`,$.style.height=`${this.dimensions.css.cell.height}px`,$.style.lineHeight=`${this.dimensions.css.cell.height}px`,$.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const A=`${this._terminalSelector} .${S} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=A,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(O){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let A=`${this._terminalSelector} .${S} { color: ${O.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;A+=`${this._terminalSelector} .${S} .xterm-dim { color: ${p.color.multiplyOpacity(O.foreground,.5).css};}`,A+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const $=`blink_underline_${this._terminalClass}`,te=`blink_bar_${this._terminalClass}`,Q=`blink_block_${this._terminalClass}`;A+=`@keyframes ${$} { 50% {  border-bottom-style: hidden; }}`,A+=`@keyframes ${te} { 50% {  box-shadow: none; }}`,A+=`@keyframes ${Q} { 0% {  background-color: ${O.cursor.css};  color: ${O.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${O.cursor.css}; }}`,A+=`${this._terminalSelector} .${S}.${T} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${$} 1s step-end infinite;}${this._terminalSelector} .${S}.${T} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${te} 1s step-end infinite;}${this._terminalSelector} .${S}.${T} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${Q} 1s step-end infinite;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-block { background-color: ${O.cursor.css}; color: ${O.cursorAccent.css};}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${O.cursor.css} !important; color: ${O.cursorAccent.css} !important;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${O.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${O.cursor.css} inset;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${O.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,A+=`${this._terminalSelector} .${k} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${k} div { position: absolute; background-color: ${O.selectionBackgroundOpaque.css};}${this._terminalSelector} .${k} div { position: absolute; background-color: ${O.selectionInactiveBackgroundOpaque.css};}`;for(const[ee,L]of O.ansi.entries())A+=`${this._terminalSelector} .${x}${ee} { color: ${L.css}; }${this._terminalSelector} .${x}${ee}.xterm-dim { color: ${p.color.multiplyOpacity(L,.5).css}; }${this._terminalSelector} .${E}${ee} { background-color: ${L.css}; }`;A+=`${this._terminalSelector} .${x}${d.INVERTED_DEFAULT_COLOR} { color: ${p.color.opaque(O.background).css}; }${this._terminalSelector} .${x}${d.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${p.color.multiplyOpacity(p.color.opaque(O.background),.5).css}; }${this._terminalSelector} .${E}${d.INVERTED_DEFAULT_COLOR} { background-color: ${O.foreground.css}; }`,this._themeStyleElement.textContent=A}_setDefaultSpacing(){const O=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${O}px`,this._rowFactory.defaultSpacing=O}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(O,A){for(let $=this._rowElements.length;$<=A;$++){const te=this._document.createElement("div");this._rowContainer.appendChild(te),this._rowElements.push(te)}for(;this._rowElements.length>A;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(O,A){this._refreshRowElements(O,A),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(T),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(T),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(O,A,$){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(O,A,$),this.renderRows(0,this._bufferService.rows-1),!O||!A)return;this._selectionRenderModel.update(this._terminal,O,A,$);const te=this._selectionRenderModel.viewportStartRow,Q=this._selectionRenderModel.viewportEndRow,ee=this._selectionRenderModel.viewportCappedStartRow,L=this._selectionRenderModel.viewportCappedEndRow;if(ee>=this._bufferService.rows||L<0)return;const M=this._document.createDocumentFragment();if($){const U=O[0]>A[0];M.appendChild(this._createSelectionElement(ee,U?A[0]:O[0],U?O[0]:A[0],L-ee+1))}else{const U=te===ee?O[0]:0,j=ee===Q?A[0]:this._bufferService.cols;M.appendChild(this._createSelectionElement(ee,U,j));const H=L-ee-1;if(M.appendChild(this._createSelectionElement(ee+1,0,this._bufferService.cols,H)),ee!==L){const Z=Q===L?A[0]:this._bufferService.cols;M.appendChild(this._createSelectionElement(L,0,Z))}}this._selectionContainer.appendChild(M)}_createSelectionElement(O,A,$,te=1){const Q=this._document.createElement("div"),ee=A*this.dimensions.css.cell.width;let L=this.dimensions.css.cell.width*($-A);return ee+L>this.dimensions.css.canvas.width&&(L=this.dimensions.css.canvas.width-ee),Q.style.height=te*this.dimensions.css.cell.height+"px",Q.style.top=O*this.dimensions.css.cell.height+"px",Q.style.left=`${ee}px`,Q.style.width=`${L}px`,Q}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const O of this._rowElements)O.replaceChildren()}renderRows(O,A){const $=this._bufferService.buffer,te=$.ybase+$.y,Q=Math.min($.x,this._bufferService.cols-1),ee=this._optionsService.rawOptions.cursorBlink,L=this._optionsService.rawOptions.cursorStyle,M=this._optionsService.rawOptions.cursorInactiveStyle;for(let U=O;U<=A;U++){const j=U+$.ydisp,H=this._rowElements[U],Z=$.lines.get(j);if(!H||!Z)break;H.replaceChildren(...this._rowFactory.createRow(Z,j,j===te,L,M,Q,ee,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${w}${this._terminalClass}`}_handleLinkHover(O){this._setCellUnderline(O.x1,O.x2,O.y1,O.y2,O.cols,!0)}_handleLinkLeave(O){this._setCellUnderline(O.x1,O.x2,O.y1,O.y2,O.cols,!1)}_setCellUnderline(O,A,$,te,Q,ee){$<0&&(O=0),te<0&&(A=0);const L=this._bufferService.rows-1;$=Math.max(Math.min($,L),0),te=Math.max(Math.min(te,L),0),Q=Math.min(Q,this._bufferService.cols);const M=this._bufferService.buffer,U=M.ybase+M.y,j=Math.min(M.x,Q-1),H=this._optionsService.rawOptions.cursorBlink,Z=this._optionsService.rawOptions.cursorStyle,re=this._optionsService.rawOptions.cursorInactiveStyle;for(let ge=$;ge<=te;++ge){const X=ge+M.ydisp,V=this._rowElements[ge],ie=M.lines.get(X);if(!V||!ie)break;V.replaceChildren(...this._rowFactory.createRow(ie,X,X===U,Z,re,j,H,this.dimensions.css.cell.width,this._widthCache,ee?ge===$?O:0:-1,ee?(ge===te?A:Q)-1:-1))}}};a.DomRenderer=P=c([u(7,v.IInstantiationService),u(8,m.ICharSizeService),u(9,v.IOptionsService),u(10,v.IBufferService),u(11,m.ICoreBrowserService),u(12,m.IThemeService)],P)},3787:function(o,a,l){var c=this&&this.__decorate||function(S,x,E,T){var k,B=arguments.length,P=B<3?x:T===null?T=Object.getOwnPropertyDescriptor(x,E):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(S,x,E,T);else for(var O=S.length-1;O>=0;O--)(k=S[O])&&(P=(B<3?k(P):B>3?k(x,E,P):k(x,E))||P);return B>3&&P&&Object.defineProperty(x,E,P),P},u=this&&this.__param||function(S,x){return function(E,T){x(E,T,S)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRendererRowFactory=void 0;const h=l(2223),f=l(643),d=l(511),g=l(2585),_=l(8055),m=l(4725),p=l(4269),b=l(6171),y=l(3734);let v=a.DomRendererRowFactory=class{constructor(S,x,E,T,k,B,P){this._document=S,this._characterJoinerService=x,this._optionsService=E,this._coreBrowserService=T,this._coreService=k,this._decorationService=B,this._themeService=P,this._workCell=new d.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(S,x,E){this._selectionStart=S,this._selectionEnd=x,this._columnSelectMode=E}createRow(S,x,E,T,k,B,P,O,A,$,te){const Q=[],ee=this._characterJoinerService.getJoinedCharacters(x),L=this._themeService.colors;let M,U=S.getNoBgTrimmedLength();E&&U<B+1&&(U=B+1);let j=0,H="",Z=0,re=0,ge=0,X=!1,V=0,ie=!1,se=0;const me=[],de=$!==-1&&te!==-1;for(let ve=0;ve<U;ve++){S.loadCell(ve,this._workCell);let F=this._workCell.getWidth();if(F===0)continue;let he=!1,ae=ve,W=this._workCell;if(ee.length>0&&ve===ee[0][0]){he=!0;const N=ee.shift();W=new p.JoinedCellData(this._workCell,S.translateToString(!0,N[0],N[1]),N[1]-N[0]),ae=N[1]-1,F=W.getWidth()}const G=this._isCellInSelection(ve,x),oe=E&&ve===B,ye=de&&ve>=$&&ve<=te;let Se=!1;this._decorationService.forEachDecorationAtCell(ve,x,void 0,N=>{Se=!0});let pe=W.getChars()||f.WHITESPACE_CELL_CHAR;if(pe===" "&&(W.isUnderline()||W.isOverline())&&(pe=""),se=F*O-A.get(pe,W.isBold(),W.isItalic()),M){if(j&&(G&&ie||!G&&!ie&&W.bg===Z)&&(G&&ie&&L.selectionForeground||W.fg===re)&&W.extended.ext===ge&&ye===X&&se===V&&!oe&&!he&&!Se){W.isInvisible()?H+=f.WHITESPACE_CELL_CHAR:H+=pe,j++;continue}j&&(M.textContent=H),M=this._document.createElement("span"),j=0,H=""}else M=this._document.createElement("span");if(Z=W.bg,re=W.fg,ge=W.extended.ext,X=ye,V=se,ie=G,he&&B>=ve&&B<=ae&&(B=ve),!this._coreService.isCursorHidden&&oe&&this._coreService.isCursorInitialized){if(me.push("xterm-cursor"),this._coreBrowserService.isFocused)P&&me.push("xterm-cursor-blink"),me.push(T==="bar"?"xterm-cursor-bar":T==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(k)switch(k){case"outline":me.push("xterm-cursor-outline");break;case"block":me.push("xterm-cursor-block");break;case"bar":me.push("xterm-cursor-bar");break;case"underline":me.push("xterm-cursor-underline")}}if(W.isBold()&&me.push("xterm-bold"),W.isItalic()&&me.push("xterm-italic"),W.isDim()&&me.push("xterm-dim"),H=W.isInvisible()?f.WHITESPACE_CELL_CHAR:W.getChars()||f.WHITESPACE_CELL_CHAR,W.isUnderline()&&(me.push(`xterm-underline-${W.extended.underlineStyle}`),H===" "&&(H=""),!W.isUnderlineColorDefault()))if(W.isUnderlineColorRGB())M.style.textDecorationColor=`rgb(${y.AttributeData.toColorRGB(W.getUnderlineColor()).join(",")})`;else{let N=W.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&W.isBold()&&N<8&&(N+=8),M.style.textDecorationColor=L.ansi[N].css}W.isOverline()&&(me.push("xterm-overline"),H===" "&&(H="")),W.isStrikethrough()&&me.push("xterm-strikethrough"),ye&&(M.style.textDecoration="underline");let Te=W.getFgColor(),Ae=W.getFgColorMode(),xe=W.getBgColor(),ue=W.getBgColorMode();const Ce=!!W.isInverse();if(Ce){const N=Te;Te=xe,xe=N;const q=Ae;Ae=ue,ue=q}let Pe,ze,z,I=!1;switch(this._decorationService.forEachDecorationAtCell(ve,x,void 0,N=>{N.options.layer!=="top"&&I||(N.backgroundColorRGB&&(ue=50331648,xe=N.backgroundColorRGB.rgba>>8&16777215,Pe=N.backgroundColorRGB),N.foregroundColorRGB&&(Ae=50331648,Te=N.foregroundColorRGB.rgba>>8&16777215,ze=N.foregroundColorRGB),I=N.options.layer==="top")}),!I&&G&&(Pe=this._coreBrowserService.isFocused?L.selectionBackgroundOpaque:L.selectionInactiveBackgroundOpaque,xe=Pe.rgba>>8&16777215,ue=50331648,I=!0,L.selectionForeground&&(Ae=50331648,Te=L.selectionForeground.rgba>>8&16777215,ze=L.selectionForeground)),I&&me.push("xterm-decoration-top"),ue){case 16777216:case 33554432:z=L.ansi[xe],me.push(`xterm-bg-${xe}`);break;case 50331648:z=_.channels.toColor(xe>>16,xe>>8&255,255&xe),this._addStyle(M,`background-color:#${w((xe>>>0).toString(16),"0",6)}`);break;default:Ce?(z=L.foreground,me.push(`xterm-bg-${h.INVERTED_DEFAULT_COLOR}`)):z=L.background}switch(Pe||W.isDim()&&(Pe=_.color.multiplyOpacity(z,.5)),Ae){case 16777216:case 33554432:W.isBold()&&Te<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Te+=8),this._applyMinimumContrast(M,z,L.ansi[Te],W,Pe,void 0)||me.push(`xterm-fg-${Te}`);break;case 50331648:const N=_.channels.toColor(Te>>16&255,Te>>8&255,255&Te);this._applyMinimumContrast(M,z,N,W,Pe,ze)||this._addStyle(M,`color:#${w(Te.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(M,z,L.foreground,W,Pe,ze)||Ce&&me.push(`xterm-fg-${h.INVERTED_DEFAULT_COLOR}`)}me.length&&(M.className=me.join(" "),me.length=0),oe||he||Se?M.textContent=H:j++,se!==this.defaultSpacing&&(M.style.letterSpacing=`${se}px`),Q.push(M),ve=ae}return M&&j&&(M.textContent=H),Q}_applyMinimumContrast(S,x,E,T,k,B){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,b.treatGlyphAsBackgroundColor)(T.getCode()))return!1;const P=this._getContrastCache(T);let O;if(k||B||(O=P.getColor(x.rgba,E.rgba)),O===void 0){const A=this._optionsService.rawOptions.minimumContrastRatio/(T.isDim()?2:1);O=_.color.ensureContrastRatio(k||x,B||E,A),P.setColor((k||x).rgba,(B||E).rgba,O??null)}return!!O&&(this._addStyle(S,`color:${O.css}`),!0)}_getContrastCache(S){return S.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(S,x){S.setAttribute("style",`${S.getAttribute("style")||""}${x};`)}_isCellInSelection(S,x){const E=this._selectionStart,T=this._selectionEnd;return!(!E||!T)&&(this._columnSelectMode?E[0]<=T[0]?S>=E[0]&&x>=E[1]&&S<T[0]&&x<=T[1]:S<E[0]&&x>=E[1]&&S>=T[0]&&x<=T[1]:x>E[1]&&x<T[1]||E[1]===T[1]&&x===E[1]&&S>=E[0]&&S<T[0]||E[1]<T[1]&&x===T[1]&&S<T[0]||E[1]<T[1]&&x===E[1]&&S>=E[0])}};function w(S,x,E){for(;S.length<E;)S=x+S;return S}a.DomRendererRowFactory=v=c([u(1,m.ICharacterJoinerService),u(2,g.IOptionsService),u(3,m.ICoreBrowserService),u(4,g.ICoreService),u(5,g.IDecorationService),u(6,m.IThemeService)],v)},2550:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WidthCache=void 0,a.WidthCache=class{constructor(l,c){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=l.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const u=l.createElement("span");u.classList.add("xterm-char-measure-element");const h=l.createElement("span");h.classList.add("xterm-char-measure-element"),h.style.fontWeight="bold";const f=l.createElement("span");f.classList.add("xterm-char-measure-element"),f.style.fontStyle="italic";const d=l.createElement("span");d.classList.add("xterm-char-measure-element"),d.style.fontWeight="bold",d.style.fontStyle="italic",this._measureElements=[u,h,f,d],this._container.appendChild(u),this._container.appendChild(h),this._container.appendChild(f),this._container.appendChild(d),c.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(l,c,u,h){l===this._font&&c===this._fontSize&&u===this._weight&&h===this._weightBold||(this._font=l,this._fontSize=c,this._weight=u,this._weightBold=h,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${u}`,this._measureElements[1].style.fontWeight=`${h}`,this._measureElements[2].style.fontWeight=`${u}`,this._measureElements[3].style.fontWeight=`${h}`,this.clear())}get(l,c,u){let h=0;if(!c&&!u&&l.length===1&&(h=l.charCodeAt(0))<256){if(this._flat[h]!==-9999)return this._flat[h];const g=this._measure(l,0);return g>0&&(this._flat[h]=g),g}let f=l;c&&(f+="B"),u&&(f+="I");let d=this._holey.get(f);if(d===void 0){let g=0;c&&(g|=1),u&&(g|=2),d=this._measure(l,g),d>0&&this._holey.set(f,d)}return d}_measure(l,c){const u=this._measureElements[c];return u.textContent=l.repeat(32),u.offsetWidth/32}}},2223:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TEXT_BASELINE=a.DIM_OPACITY=a.INVERTED_DEFAULT_COLOR=void 0;const c=l(6114);a.INVERTED_DEFAULT_COLOR=257,a.DIM_OPACITY=.5,a.TEXT_BASELINE=c.isFirefox||c.isLegacyEdge?"bottom":"ideographic"},6171:(o,a)=>{function l(u){return 57508<=u&&u<=57558}function c(u){return u>=128512&&u<=128591||u>=127744&&u<=128511||u>=128640&&u<=128767||u>=9728&&u<=9983||u>=9984&&u<=10175||u>=65024&&u<=65039||u>=129280&&u<=129535||u>=127462&&u<=127487}Object.defineProperty(a,"__esModule",{value:!0}),a.computeNextVariantOffset=a.createRenderDimensions=a.treatGlyphAsBackgroundColor=a.allowRescaling=a.isEmoji=a.isRestrictedPowerlineGlyph=a.isPowerlineGlyph=a.throwIfFalsy=void 0,a.throwIfFalsy=function(u){if(!u)throw new Error("value must not be falsy");return u},a.isPowerlineGlyph=l,a.isRestrictedPowerlineGlyph=function(u){return 57520<=u&&u<=57527},a.isEmoji=c,a.allowRescaling=function(u,h,f,d){return h===1&&f>Math.ceil(1.5*d)&&u!==void 0&&u>255&&!c(u)&&!l(u)&&!function(g){return 57344<=g&&g<=63743}(u)},a.treatGlyphAsBackgroundColor=function(u){return l(u)||function(h){return 9472<=h&&h<=9631}(u)},a.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},a.computeNextVariantOffset=function(u,h,f=0){return(u-(2*Math.round(h)-f))%(2*Math.round(h))}},6052:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createSelectionRenderModel=void 0;class l{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(u,h,f,d=!1){if(this.selectionStart=h,this.selectionEnd=f,!h||!f||h[0]===f[0]&&h[1]===f[1])return void this.clear();const g=u.buffers.active.ydisp,_=h[1]-g,m=f[1]-g,p=Math.max(_,0),b=Math.min(m,u.rows-1);p>=u.rows||b<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=d,this.viewportStartRow=_,this.viewportEndRow=m,this.viewportCappedStartRow=p,this.viewportCappedEndRow=b,this.startCol=h[0],this.endCol=f[0])}isCellSelected(u,h,f){return!!this.hasSelection&&(f-=u.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?h>=this.startCol&&f>=this.viewportCappedStartRow&&h<this.endCol&&f<=this.viewportCappedEndRow:h<this.startCol&&f>=this.viewportCappedStartRow&&h>=this.endCol&&f<=this.viewportCappedEndRow:f>this.viewportStartRow&&f<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&f===this.viewportStartRow&&h>=this.startCol&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&f===this.viewportEndRow&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&f===this.viewportStartRow&&h>=this.startCol)}}a.createSelectionRenderModel=function(){return new l}},456:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionModel=void 0,a.SelectionModel=class{constructor(l){this._bufferService=l,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const l=this.selectionStart[0]+this.selectionStartLength;return l>this._bufferService.cols?l%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)-1]:[l%this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)]:[l,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const l=this.selectionStart[0]+this.selectionStartLength;return l>this._bufferService.cols?[l%this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)]:[Math.max(l,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const l=this.selectionStart,c=this.selectionEnd;return!(!l||!c)&&(l[1]>c[1]||l[1]===c[1]&&l[0]>c[0])}handleTrim(l){return this.selectionStart&&(this.selectionStart[1]-=l),this.selectionEnd&&(this.selectionEnd[1]-=l),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(o,a,l){var c=this&&this.__decorate||function(b,y,v,w){var S,x=arguments.length,E=x<3?y:w===null?w=Object.getOwnPropertyDescriptor(y,v):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(b,y,v,w);else for(var T=b.length-1;T>=0;T--)(S=b[T])&&(E=(x<3?S(E):x>3?S(y,v,E):S(y,v))||E);return x>3&&E&&Object.defineProperty(y,v,E),E},u=this&&this.__param||function(b,y){return function(v,w){y(v,w,b)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharSizeService=void 0;const h=l(2585),f=l(8460),d=l(844);let g=a.CharSizeService=class extends d.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(b,y,v){super(),this._optionsService=v,this.width=0,this.height=0,this._onCharSizeChange=this.register(new f.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new p(this._optionsService))}catch{this._measureStrategy=this.register(new m(b,y,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const b=this._measureStrategy.measure();b.width===this.width&&b.height===this.height||(this.width=b.width,this.height=b.height,this._onCharSizeChange.fire())}};a.CharSizeService=g=c([u(2,h.IOptionsService)],g);class _ extends d.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(y,v){y!==void 0&&y>0&&v!==void 0&&v>0&&(this._result.width=y,this._result.height=v)}}class m extends _{constructor(y,v,w){super(),this._document=y,this._parentElement=v,this._optionsService=w,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class p extends _{constructor(y){super(),this._optionsService=y,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const v=this._ctx.measureText("W");if(!("width"in v&&"fontBoundingBoxAscent"in v&&"fontBoundingBoxDescent"in v))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const y=this._ctx.measureText("W");return this._validateAndSet(y.width,y.fontBoundingBoxAscent+y.fontBoundingBoxDescent),this._result}}},4269:function(o,a,l){var c=this&&this.__decorate||function(p,b,y,v){var w,S=arguments.length,x=S<3?b:v===null?v=Object.getOwnPropertyDescriptor(b,y):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(p,b,y,v);else for(var E=p.length-1;E>=0;E--)(w=p[E])&&(x=(S<3?w(x):S>3?w(b,y,x):w(b,y))||x);return S>3&&x&&Object.defineProperty(b,y,x),x},u=this&&this.__param||function(p,b){return function(y,v){b(y,v,p)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharacterJoinerService=a.JoinedCellData=void 0;const h=l(3734),f=l(643),d=l(511),g=l(2585);class _ extends h.AttributeData{constructor(b,y,v){super(),this.content=0,this.combinedData="",this.fg=b.fg,this.bg=b.bg,this.combinedData=y,this._width=v}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(b){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}a.JoinedCellData=_;let m=a.CharacterJoinerService=class i6{constructor(b){this._bufferService=b,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new d.CellData}register(b){const y={id:this._nextCharacterJoinerId++,handler:b};return this._characterJoiners.push(y),y.id}deregister(b){for(let y=0;y<this._characterJoiners.length;y++)if(this._characterJoiners[y].id===b)return this._characterJoiners.splice(y,1),!0;return!1}getJoinedCharacters(b){if(this._characterJoiners.length===0)return[];const y=this._bufferService.buffer.lines.get(b);if(!y||y.length===0)return[];const v=[],w=y.translateToString(!0);let S=0,x=0,E=0,T=y.getFg(0),k=y.getBg(0);for(let B=0;B<y.getTrimmedLength();B++)if(y.loadCell(B,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==T||this._workCell.bg!==k){if(B-S>1){const P=this._getJoinedRanges(w,E,x,y,S);for(let O=0;O<P.length;O++)v.push(P[O])}S=B,E=x,T=this._workCell.fg,k=this._workCell.bg}x+=this._workCell.getChars().length||f.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-S>1){const B=this._getJoinedRanges(w,E,x,y,S);for(let P=0;P<B.length;P++)v.push(B[P])}return v}_getJoinedRanges(b,y,v,w,S){const x=b.substring(y,v);let E=[];try{E=this._characterJoiners[0].handler(x)}catch(T){console.error(T)}for(let T=1;T<this._characterJoiners.length;T++)try{const k=this._characterJoiners[T].handler(x);for(let B=0;B<k.length;B++)i6._mergeRanges(E,k[B])}catch(k){console.error(k)}return this._stringRangesToCellRanges(E,w,S),E}_stringRangesToCellRanges(b,y,v){let w=0,S=!1,x=0,E=b[w];if(E){for(let T=v;T<this._bufferService.cols;T++){const k=y.getWidth(T),B=y.getString(T).length||f.WHITESPACE_CELL_CHAR.length;if(k!==0){if(!S&&E[0]<=x&&(E[0]=T,S=!0),E[1]<=x){if(E[1]=T,E=b[++w],!E)break;E[0]<=x?(E[0]=T,S=!0):S=!1}x+=B}}E&&(E[1]=this._bufferService.cols)}}static _mergeRanges(b,y){let v=!1;for(let w=0;w<b.length;w++){const S=b[w];if(v){if(y[1]<=S[0])return b[w-1][1]=y[1],b;if(y[1]<=S[1])return b[w-1][1]=Math.max(y[1],S[1]),b.splice(w,1),b;b.splice(w,1),w--}else{if(y[1]<=S[0])return b.splice(w,0,y),b;if(y[1]<=S[1])return S[0]=Math.min(y[0],S[0]),b;y[0]<S[1]&&(S[0]=Math.min(y[0],S[0]),v=!0)}}return v?b[b.length-1][1]=y[1]:b.push(y),b}};a.CharacterJoinerService=m=c([u(0,g.IBufferService)],m)},5114:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CoreBrowserService=void 0;const c=l(844),u=l(8460),h=l(3656);class f extends c.Disposable{constructor(_,m,p){super(),this._textarea=_,this._window=m,this.mainDocument=p,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new d(this._window),this._onDprChange=this.register(new u.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new u.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(b=>this._screenDprMonitor.setWindow(b))),this.register((0,u.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(_){this._window!==_&&(this._window=_,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}a.CoreBrowserService=f;class d extends c.Disposable{constructor(_){super(),this._parentWindow=_,this._windowResizeListener=this.register(new c.MutableDisposable),this._onDprChange=this.register(new u.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,c.toDisposable)(()=>this.clearListener()))}setWindow(_){this._parentWindow=_,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,h.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.LinkProviderService=void 0;const c=l(844);class u extends c.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,c.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(f){return this.linkProviders.push(f),{dispose:()=>{const d=this.linkProviders.indexOf(f);d!==-1&&this.linkProviders.splice(d,1)}}}}a.LinkProviderService=u},8934:function(o,a,l){var c=this&&this.__decorate||function(g,_,m,p){var b,y=arguments.length,v=y<3?_:p===null?p=Object.getOwnPropertyDescriptor(_,m):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(g,_,m,p);else for(var w=g.length-1;w>=0;w--)(b=g[w])&&(v=(y<3?b(v):y>3?b(_,m,v):b(_,m))||v);return y>3&&v&&Object.defineProperty(_,m,v),v},u=this&&this.__param||function(g,_){return function(m,p){_(m,p,g)}};Object.defineProperty(a,"__esModule",{value:!0}),a.MouseService=void 0;const h=l(4725),f=l(9806);let d=a.MouseService=class{constructor(g,_){this._renderService=g,this._charSizeService=_}getCoords(g,_,m,p,b){return(0,f.getCoords)(window,g,_,m,p,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,b)}getMouseReportCoords(g,_){const m=(0,f.getCoordsRelativeToElement)(window,g,_);if(this._charSizeService.hasValidSize)return m[0]=Math.min(Math.max(m[0],0),this._renderService.dimensions.css.canvas.width-1),m[1]=Math.min(Math.max(m[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(m[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(m[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(m[0]),y:Math.floor(m[1])}}};a.MouseService=d=c([u(0,h.IRenderService),u(1,h.ICharSizeService)],d)},3230:function(o,a,l){var c=this&&this.__decorate||function(b,y,v,w){var S,x=arguments.length,E=x<3?y:w===null?w=Object.getOwnPropertyDescriptor(y,v):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(b,y,v,w);else for(var T=b.length-1;T>=0;T--)(S=b[T])&&(E=(x<3?S(E):x>3?S(y,v,E):S(y,v))||E);return x>3&&E&&Object.defineProperty(y,v,E),E},u=this&&this.__param||function(b,y){return function(v,w){y(v,w,b)}};Object.defineProperty(a,"__esModule",{value:!0}),a.RenderService=void 0;const h=l(6193),f=l(4725),d=l(8460),g=l(844),_=l(7226),m=l(2585);let p=a.RenderService=class extends g.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(b,y,v,w,S,x,E,T){super(),this._rowCount=b,this._charSizeService=w,this._renderer=this.register(new g.MutableDisposable),this._pausedResizeTask=new _.DebouncedIdleTask,this._observerDisposable=this.register(new g.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new d.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new d.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new d.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new d.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new h.RenderDebouncer((k,B)=>this._renderRows(k,B),E),this.register(this._renderDebouncer),this.register(E.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(x.onResize(()=>this._fullRefresh())),this.register(x.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this.register(v.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(S.onDecorationRegistered(()=>this._fullRefresh())),this.register(S.onDecorationRemoved(()=>this._fullRefresh())),this.register(v.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(x.cols,x.rows),this._fullRefresh()})),this.register(v.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(x.buffer.y,x.buffer.y,!0))),this.register(T.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(E.window,y),this.register(E.onWindowChange(k=>this._registerIntersectionObserver(k,y)))}_registerIntersectionObserver(b,y){if("IntersectionObserver"in b){const v=new b.IntersectionObserver(w=>this._handleIntersectionChange(w[w.length-1]),{threshold:0});v.observe(y),this._observerDisposable.value=(0,g.toDisposable)(()=>v.disconnect())}}_handleIntersectionChange(b){this._isPaused=b.isIntersecting===void 0?b.intersectionRatio===0:!b.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(b,y,v=!1){this._isPaused?this._needsFullRefresh=!0:(v||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(b,y,this._rowCount))}_renderRows(b,y){this._renderer.value&&(b=Math.min(b,this._rowCount-1),y=Math.min(y,this._rowCount-1),this._renderer.value.renderRows(b,y),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:b,end:y}),this._onRender.fire({start:b,end:y}),this._isNextRenderRedrawOnly=!0)}resize(b,y){this._rowCount=y,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(b){this._renderer.value=b,this._renderer.value&&(this._renderer.value.onRequestRedraw(y=>this.refreshRows(y.start,y.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(b){return this._renderDebouncer.addRefreshCallback(b)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(b,y){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(b,y)):this._renderer.value.handleResize(b,y),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(b,y,v){this._selectionState.start=b,this._selectionState.end=y,this._selectionState.columnSelectMode=v,this._renderer.value?.handleSelectionChanged(b,y,v)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};a.RenderService=p=c([u(2,m.IOptionsService),u(3,f.ICharSizeService),u(4,m.IDecorationService),u(5,m.IBufferService),u(6,f.ICoreBrowserService),u(7,f.IThemeService)],p)},9312:function(o,a,l){var c=this&&this.__decorate||function(E,T,k,B){var P,O=arguments.length,A=O<3?T:B===null?B=Object.getOwnPropertyDescriptor(T,k):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(E,T,k,B);else for(var $=E.length-1;$>=0;$--)(P=E[$])&&(A=(O<3?P(A):O>3?P(T,k,A):P(T,k))||A);return O>3&&A&&Object.defineProperty(T,k,A),A},u=this&&this.__param||function(E,T){return function(k,B){T(k,B,E)}};Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionService=void 0;const h=l(9806),f=l(9504),d=l(456),g=l(4725),_=l(8460),m=l(844),p=l(6114),b=l(4841),y=l(511),v=l(2585),w="",S=new RegExp(w,"g");let x=a.SelectionService=class extends m.Disposable{constructor(E,T,k,B,P,O,A,$,te){super(),this._element=E,this._screenElement=T,this._linkifier=k,this._bufferService=B,this._coreService=P,this._mouseService=O,this._optionsService=A,this._renderService=$,this._coreBrowserService=te,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new y.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new _.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new _.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new _.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new _.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=Q=>this._handleMouseMove(Q),this._mouseUpListener=Q=>this._handleMouseUp(Q),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(Q=>this._handleTrim(Q)),this.register(this._bufferService.buffers.onBufferActivate(Q=>this._handleBufferActivate(Q))),this.enable(),this._model=new d.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,m.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const E=this._model.finalSelectionStart,T=this._model.finalSelectionEnd;return!(!E||!T||E[0]===T[0]&&E[1]===T[1])}get selectionText(){const E=this._model.finalSelectionStart,T=this._model.finalSelectionEnd;if(!E||!T)return"";const k=this._bufferService.buffer,B=[];if(this._activeSelectionMode===3){if(E[0]===T[0])return"";const P=E[0]<T[0]?E[0]:T[0],O=E[0]<T[0]?T[0]:E[0];for(let A=E[1];A<=T[1];A++){const $=k.translateBufferLineToString(A,!0,P,O);B.push($)}}else{const P=E[1]===T[1]?T[0]:void 0;B.push(k.translateBufferLineToString(E[1],!0,E[0],P));for(let O=E[1]+1;O<=T[1]-1;O++){const A=k.lines.get(O),$=k.translateBufferLineToString(O,!0);A?.isWrapped?B[B.length-1]+=$:B.push($)}if(E[1]!==T[1]){const O=k.lines.get(T[1]),A=k.translateBufferLineToString(T[1],!0,0,T[0]);O&&O.isWrapped?B[B.length-1]+=A:B.push(A)}}return B.map(P=>P.replace(S," ")).join(p.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(E){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),p.isLinux&&E&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(E){const T=this._getMouseBufferCoords(E),k=this._model.finalSelectionStart,B=this._model.finalSelectionEnd;return!!(k&&B&&T)&&this._areCoordsInSelection(T,k,B)}isCellInSelection(E,T){const k=this._model.finalSelectionStart,B=this._model.finalSelectionEnd;return!(!k||!B)&&this._areCoordsInSelection([E,T],k,B)}_areCoordsInSelection(E,T,k){return E[1]>T[1]&&E[1]<k[1]||T[1]===k[1]&&E[1]===T[1]&&E[0]>=T[0]&&E[0]<k[0]||T[1]<k[1]&&E[1]===k[1]&&E[0]<k[0]||T[1]<k[1]&&E[1]===T[1]&&E[0]>=T[0]}_selectWordAtCursor(E,T){const k=this._linkifier.currentLink?.link?.range;if(k)return this._model.selectionStart=[k.start.x-1,k.start.y-1],this._model.selectionStartLength=(0,b.getRangeLength)(k,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const B=this._getMouseBufferCoords(E);return!!B&&(this._selectWordAt(B,T),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(E,T){this._model.clearSelection(),E=Math.max(E,0),T=Math.min(T,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,E],this._model.selectionEnd=[this._bufferService.cols,T],this.refresh(),this._onSelectionChange.fire()}_handleTrim(E){this._model.handleTrim(E)&&this.refresh()}_getMouseBufferCoords(E){const T=this._mouseService.getCoords(E,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(T)return T[0]--,T[1]--,T[1]+=this._bufferService.buffer.ydisp,T}_getMouseEventScrollAmount(E){let T=(0,h.getCoordsRelativeToElement)(this._coreBrowserService.window,E,this._screenElement)[1];const k=this._renderService.dimensions.css.canvas.height;return T>=0&&T<=k?0:(T>k&&(T-=k),T=Math.min(Math.max(T,-50),50),T/=50,T/Math.abs(T)+Math.round(14*T))}shouldForceSelection(E){return p.isMac?E.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:E.shiftKey}handleMouseDown(E){if(this._mouseDownTimeStamp=E.timeStamp,(E.button!==2||!this.hasSelection)&&E.button===0){if(!this._enabled){if(!this.shouldForceSelection(E))return;E.stopPropagation()}E.preventDefault(),this._dragScrollAmount=0,this._enabled&&E.shiftKey?this._handleIncrementalClick(E):E.detail===1?this._handleSingleClick(E):E.detail===2?this._handleDoubleClick(E):E.detail===3&&this._handleTripleClick(E),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(E){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(E))}_handleSingleClick(E){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(E)?3:0,this._model.selectionStart=this._getMouseBufferCoords(E),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const T=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);T&&T.length!==this._model.selectionStart[0]&&T.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(E){this._selectWordAtCursor(E,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(E){const T=this._getMouseBufferCoords(E);T&&(this._activeSelectionMode=2,this._selectLineAt(T[1]))}shouldColumnSelect(E){return E.altKey&&!(p.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(E){if(E.stopImmediatePropagation(),!this._model.selectionStart)return;const T=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(E),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(E),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const k=this._bufferService.buffer;if(this._model.selectionEnd[1]<k.lines.length){const B=k.lines.get(this._model.selectionEnd[1]);B&&B.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}T&&T[0]===this._model.selectionEnd[0]&&T[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const E=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(E.ydisp+this._bufferService.rows,E.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=E.ydisp),this.refresh()}}_handleMouseUp(E){const T=E.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&T<500&&E.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const k=this._mouseService.getCoords(E,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(k&&k[0]!==void 0&&k[1]!==void 0){const B=(0,f.moveToCellSequence)(k[0]-1,k[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(B,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const E=this._model.finalSelectionStart,T=this._model.finalSelectionEnd,k=!(!E||!T||E[0]===T[0]&&E[1]===T[1]);k?E&&T&&(this._oldSelectionStart&&this._oldSelectionEnd&&E[0]===this._oldSelectionStart[0]&&E[1]===this._oldSelectionStart[1]&&T[0]===this._oldSelectionEnd[0]&&T[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(E,T,k)):this._oldHasSelection&&this._fireOnSelectionChange(E,T,k)}_fireOnSelectionChange(E,T,k){this._oldSelectionStart=E,this._oldSelectionEnd=T,this._oldHasSelection=k,this._onSelectionChange.fire()}_handleBufferActivate(E){this.clearSelection(),this._trimListener.dispose(),this._trimListener=E.activeBuffer.lines.onTrim(T=>this._handleTrim(T))}_convertViewportColToCharacterIndex(E,T){let k=T;for(let B=0;T>=B;B++){const P=E.loadCell(B,this._workCell).getChars().length;this._workCell.getWidth()===0?k--:P>1&&T!==B&&(k+=P-1)}return k}setSelection(E,T,k){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[E,T],this._model.selectionStartLength=k,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(E){this._isClickInSelection(E)||(this._selectWordAtCursor(E,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(E,T,k=!0,B=!0){if(E[0]>=this._bufferService.cols)return;const P=this._bufferService.buffer,O=P.lines.get(E[1]);if(!O)return;const A=P.translateBufferLineToString(E[1],!1);let $=this._convertViewportColToCharacterIndex(O,E[0]),te=$;const Q=E[0]-$;let ee=0,L=0,M=0,U=0;if(A.charAt($)===" "){for(;$>0&&A.charAt($-1)===" ";)$--;for(;te<A.length&&A.charAt(te+1)===" ";)te++}else{let Z=E[0],re=E[0];O.getWidth(Z)===0&&(ee++,Z--),O.getWidth(re)===2&&(L++,re++);const ge=O.getString(re).length;for(ge>1&&(U+=ge-1,te+=ge-1);Z>0&&$>0&&!this._isCharWordSeparator(O.loadCell(Z-1,this._workCell));){O.loadCell(Z-1,this._workCell);const X=this._workCell.getChars().length;this._workCell.getWidth()===0?(ee++,Z--):X>1&&(M+=X-1,$-=X-1),$--,Z--}for(;re<O.length&&te+1<A.length&&!this._isCharWordSeparator(O.loadCell(re+1,this._workCell));){O.loadCell(re+1,this._workCell);const X=this._workCell.getChars().length;this._workCell.getWidth()===2?(L++,re++):X>1&&(U+=X-1,te+=X-1),te++,re++}}te++;let j=$+Q-ee+M,H=Math.min(this._bufferService.cols,te-$+ee+L-M-U);if(T||A.slice($,te).trim()!==""){if(k&&j===0&&O.getCodePoint(0)!==32){const Z=P.lines.get(E[1]-1);if(Z&&O.isWrapped&&Z.getCodePoint(this._bufferService.cols-1)!==32){const re=this._getWordAt([this._bufferService.cols-1,E[1]-1],!1,!0,!1);if(re){const ge=this._bufferService.cols-re.start;j-=ge,H+=ge}}}if(B&&j+H===this._bufferService.cols&&O.getCodePoint(this._bufferService.cols-1)!==32){const Z=P.lines.get(E[1]+1);if(Z?.isWrapped&&Z.getCodePoint(0)!==32){const re=this._getWordAt([0,E[1]+1],!1,!1,!0);re&&(H+=re.length)}}return{start:j,length:H}}}_selectWordAt(E,T){const k=this._getWordAt(E,T);if(k){for(;k.start<0;)k.start+=this._bufferService.cols,E[1]--;this._model.selectionStart=[k.start,E[1]],this._model.selectionStartLength=k.length}}_selectToWordAt(E){const T=this._getWordAt(E,!0);if(T){let k=E[1];for(;T.start<0;)T.start+=this._bufferService.cols,k--;if(!this._model.areSelectionValuesReversed())for(;T.start+T.length>this._bufferService.cols;)T.length-=this._bufferService.cols,k++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?T.start:T.start+T.length,k]}}_isCharWordSeparator(E){return E.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(E.getChars())>=0}_selectLineAt(E){const T=this._bufferService.buffer.getWrappedRangeForLine(E),k={start:{x:0,y:T.first},end:{x:this._bufferService.cols-1,y:T.last}};this._model.selectionStart=[0,T.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,b.getRangeLength)(k,this._bufferService.cols)}};a.SelectionService=x=c([u(3,v.IBufferService),u(4,v.ICoreService),u(5,g.IMouseService),u(6,v.IOptionsService),u(7,g.IRenderService),u(8,g.ICoreBrowserService)],x)},4725:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ILinkProviderService=a.IThemeService=a.ICharacterJoinerService=a.ISelectionService=a.IRenderService=a.IMouseService=a.ICoreBrowserService=a.ICharSizeService=void 0;const c=l(8343);a.ICharSizeService=(0,c.createDecorator)("CharSizeService"),a.ICoreBrowserService=(0,c.createDecorator)("CoreBrowserService"),a.IMouseService=(0,c.createDecorator)("MouseService"),a.IRenderService=(0,c.createDecorator)("RenderService"),a.ISelectionService=(0,c.createDecorator)("SelectionService"),a.ICharacterJoinerService=(0,c.createDecorator)("CharacterJoinerService"),a.IThemeService=(0,c.createDecorator)("ThemeService"),a.ILinkProviderService=(0,c.createDecorator)("LinkProviderService")},6731:function(o,a,l){var c=this&&this.__decorate||function(x,E,T,k){var B,P=arguments.length,O=P<3?E:k===null?k=Object.getOwnPropertyDescriptor(E,T):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(x,E,T,k);else for(var A=x.length-1;A>=0;A--)(B=x[A])&&(O=(P<3?B(O):P>3?B(E,T,O):B(E,T))||O);return P>3&&O&&Object.defineProperty(E,T,O),O},u=this&&this.__param||function(x,E){return function(T,k){E(T,k,x)}};Object.defineProperty(a,"__esModule",{value:!0}),a.ThemeService=a.DEFAULT_ANSI_COLORS=void 0;const h=l(7239),f=l(8055),d=l(8460),g=l(844),_=l(2585),m=f.css.toColor("#ffffff"),p=f.css.toColor("#000000"),b=f.css.toColor("#ffffff"),y=f.css.toColor("#000000"),v={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};a.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const x=[f.css.toColor("#2e3436"),f.css.toColor("#cc0000"),f.css.toColor("#4e9a06"),f.css.toColor("#c4a000"),f.css.toColor("#3465a4"),f.css.toColor("#75507b"),f.css.toColor("#06989a"),f.css.toColor("#d3d7cf"),f.css.toColor("#555753"),f.css.toColor("#ef2929"),f.css.toColor("#8ae234"),f.css.toColor("#fce94f"),f.css.toColor("#729fcf"),f.css.toColor("#ad7fa8"),f.css.toColor("#34e2e2"),f.css.toColor("#eeeeec")],E=[0,95,135,175,215,255];for(let T=0;T<216;T++){const k=E[T/36%6|0],B=E[T/6%6|0],P=E[T%6];x.push({css:f.channels.toCss(k,B,P),rgba:f.channels.toRgba(k,B,P)})}for(let T=0;T<24;T++){const k=8+10*T;x.push({css:f.channels.toCss(k,k,k),rgba:f.channels.toRgba(k,k,k)})}return x})());let w=a.ThemeService=class extends g.Disposable{get colors(){return this._colors}constructor(x){super(),this._optionsService=x,this._contrastCache=new h.ColorContrastCache,this._halfContrastCache=new h.ColorContrastCache,this._onChangeColors=this.register(new d.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:m,background:p,cursor:b,cursorAccent:y,selectionForeground:void 0,selectionBackgroundTransparent:v,selectionBackgroundOpaque:f.color.blend(p,v),selectionInactiveBackgroundTransparent:v,selectionInactiveBackgroundOpaque:f.color.blend(p,v),ansi:a.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(x={}){const E=this._colors;if(E.foreground=S(x.foreground,m),E.background=S(x.background,p),E.cursor=S(x.cursor,b),E.cursorAccent=S(x.cursorAccent,y),E.selectionBackgroundTransparent=S(x.selectionBackground,v),E.selectionBackgroundOpaque=f.color.blend(E.background,E.selectionBackgroundTransparent),E.selectionInactiveBackgroundTransparent=S(x.selectionInactiveBackground,E.selectionBackgroundTransparent),E.selectionInactiveBackgroundOpaque=f.color.blend(E.background,E.selectionInactiveBackgroundTransparent),E.selectionForeground=x.selectionForeground?S(x.selectionForeground,f.NULL_COLOR):void 0,E.selectionForeground===f.NULL_COLOR&&(E.selectionForeground=void 0),f.color.isOpaque(E.selectionBackgroundTransparent)&&(E.selectionBackgroundTransparent=f.color.opacity(E.selectionBackgroundTransparent,.3)),f.color.isOpaque(E.selectionInactiveBackgroundTransparent)&&(E.selectionInactiveBackgroundTransparent=f.color.opacity(E.selectionInactiveBackgroundTransparent,.3)),E.ansi=a.DEFAULT_ANSI_COLORS.slice(),E.ansi[0]=S(x.black,a.DEFAULT_ANSI_COLORS[0]),E.ansi[1]=S(x.red,a.DEFAULT_ANSI_COLORS[1]),E.ansi[2]=S(x.green,a.DEFAULT_ANSI_COLORS[2]),E.ansi[3]=S(x.yellow,a.DEFAULT_ANSI_COLORS[3]),E.ansi[4]=S(x.blue,a.DEFAULT_ANSI_COLORS[4]),E.ansi[5]=S(x.magenta,a.DEFAULT_ANSI_COLORS[5]),E.ansi[6]=S(x.cyan,a.DEFAULT_ANSI_COLORS[6]),E.ansi[7]=S(x.white,a.DEFAULT_ANSI_COLORS[7]),E.ansi[8]=S(x.brightBlack,a.DEFAULT_ANSI_COLORS[8]),E.ansi[9]=S(x.brightRed,a.DEFAULT_ANSI_COLORS[9]),E.ansi[10]=S(x.brightGreen,a.DEFAULT_ANSI_COLORS[10]),E.ansi[11]=S(x.brightYellow,a.DEFAULT_ANSI_COLORS[11]),E.ansi[12]=S(x.brightBlue,a.DEFAULT_ANSI_COLORS[12]),E.ansi[13]=S(x.brightMagenta,a.DEFAULT_ANSI_COLORS[13]),E.ansi[14]=S(x.brightCyan,a.DEFAULT_ANSI_COLORS[14]),E.ansi[15]=S(x.brightWhite,a.DEFAULT_ANSI_COLORS[15]),x.extendedAnsi){const T=Math.min(E.ansi.length-16,x.extendedAnsi.length);for(let k=0;k<T;k++)E.ansi[k+16]=S(x.extendedAnsi[k],a.DEFAULT_ANSI_COLORS[k+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(x){this._restoreColor(x),this._onChangeColors.fire(this.colors)}_restoreColor(x){if(x!==void 0)switch(x){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[x]=this._restoreColors.ansi[x]}else for(let E=0;E<this._restoreColors.ansi.length;++E)this._colors.ansi[E]=this._restoreColors.ansi[E]}modifyColors(x){x(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function S(x,E){if(x!==void 0)try{return f.css.toColor(x)}catch{}return E}a.ThemeService=w=c([u(0,_.IOptionsService)],w)},6349:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CircularList=void 0;const c=l(8460),u=l(844);class h extends u.Disposable{constructor(d){super(),this._maxLength=d,this.onDeleteEmitter=this.register(new c.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new c.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new c.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(d){if(this._maxLength===d)return;const g=new Array(d);for(let _=0;_<Math.min(d,this.length);_++)g[_]=this._array[this._getCyclicIndex(_)];this._array=g,this._maxLength=d,this._startIndex=0}get length(){return this._length}set length(d){if(d>this._length)for(let g=this._length;g<d;g++)this._array[g]=void 0;this._length=d}get(d){return this._array[this._getCyclicIndex(d)]}set(d,g){this._array[this._getCyclicIndex(d)]=g}push(d){this._array[this._getCyclicIndex(this._length)]=d,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(d,g,..._){if(g){for(let m=d;m<this._length-g;m++)this._array[this._getCyclicIndex(m)]=this._array[this._getCyclicIndex(m+g)];this._length-=g,this.onDeleteEmitter.fire({index:d,amount:g})}for(let m=this._length-1;m>=d;m--)this._array[this._getCyclicIndex(m+_.length)]=this._array[this._getCyclicIndex(m)];for(let m=0;m<_.length;m++)this._array[this._getCyclicIndex(d+m)]=_[m];if(_.length&&this.onInsertEmitter.fire({index:d,amount:_.length}),this._length+_.length>this._maxLength){const m=this._length+_.length-this._maxLength;this._startIndex+=m,this._length=this._maxLength,this.onTrimEmitter.fire(m)}else this._length+=_.length}trimStart(d){d>this._length&&(d=this._length),this._startIndex+=d,this._length-=d,this.onTrimEmitter.fire(d)}shiftElements(d,g,_){if(!(g<=0)){if(d<0||d>=this._length)throw new Error("start argument out of range");if(d+_<0)throw new Error("Cannot shift elements in list beyond index 0");if(_>0){for(let p=g-1;p>=0;p--)this.set(d+p+_,this.get(d+p));const m=d+g+_-this._length;if(m>0)for(this._length+=m;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let m=0;m<g;m++)this.set(d+m+_,this.get(d+m))}}_getCyclicIndex(d){return(this._startIndex+d)%this._maxLength}}a.CircularList=h},1439:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.clone=void 0,a.clone=function l(c,u=5){if(typeof c!="object")return c;const h=Array.isArray(c)?[]:{};for(const f in c)h[f]=u<=1?c[f]:c[f]&&l(c[f],u-1);return h}},8055:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.contrastRatio=a.toPaddedHex=a.rgba=a.rgb=a.css=a.color=a.channels=a.NULL_COLOR=void 0;let l=0,c=0,u=0,h=0;var f,d,g,_,m;function p(y){const v=y.toString(16);return v.length<2?"0"+v:v}function b(y,v){return y<v?(v+.05)/(y+.05):(y+.05)/(v+.05)}a.NULL_COLOR={css:"#00000000",rgba:0},function(y){y.toCss=function(v,w,S,x){return x!==void 0?`#${p(v)}${p(w)}${p(S)}${p(x)}`:`#${p(v)}${p(w)}${p(S)}`},y.toRgba=function(v,w,S,x=255){return(v<<24|w<<16|S<<8|x)>>>0},y.toColor=function(v,w,S,x){return{css:y.toCss(v,w,S,x),rgba:y.toRgba(v,w,S,x)}}}(f||(a.channels=f={})),function(y){function v(w,S){return h=Math.round(255*S),[l,c,u]=m.toChannels(w.rgba),{css:f.toCss(l,c,u,h),rgba:f.toRgba(l,c,u,h)}}y.blend=function(w,S){if(h=(255&S.rgba)/255,h===1)return{css:S.css,rgba:S.rgba};const x=S.rgba>>24&255,E=S.rgba>>16&255,T=S.rgba>>8&255,k=w.rgba>>24&255,B=w.rgba>>16&255,P=w.rgba>>8&255;return l=k+Math.round((x-k)*h),c=B+Math.round((E-B)*h),u=P+Math.round((T-P)*h),{css:f.toCss(l,c,u),rgba:f.toRgba(l,c,u)}},y.isOpaque=function(w){return(255&w.rgba)==255},y.ensureContrastRatio=function(w,S,x){const E=m.ensureContrastRatio(w.rgba,S.rgba,x);if(E)return f.toColor(E>>24&255,E>>16&255,E>>8&255)},y.opaque=function(w){const S=(255|w.rgba)>>>0;return[l,c,u]=m.toChannels(S),{css:f.toCss(l,c,u),rgba:S}},y.opacity=v,y.multiplyOpacity=function(w,S){return h=255&w.rgba,v(w,h*S/255)},y.toColorRGB=function(w){return[w.rgba>>24&255,w.rgba>>16&255,w.rgba>>8&255]}}(d||(a.color=d={})),function(y){let v,w;try{const S=document.createElement("canvas");S.width=1,S.height=1;const x=S.getContext("2d",{willReadFrequently:!0});x&&(v=x,v.globalCompositeOperation="copy",w=v.createLinearGradient(0,0,1,1))}catch{}y.toColor=function(S){if(S.match(/#[\da-f]{3,8}/i))switch(S.length){case 4:return l=parseInt(S.slice(1,2).repeat(2),16),c=parseInt(S.slice(2,3).repeat(2),16),u=parseInt(S.slice(3,4).repeat(2),16),f.toColor(l,c,u);case 5:return l=parseInt(S.slice(1,2).repeat(2),16),c=parseInt(S.slice(2,3).repeat(2),16),u=parseInt(S.slice(3,4).repeat(2),16),h=parseInt(S.slice(4,5).repeat(2),16),f.toColor(l,c,u,h);case 7:return{css:S,rgba:(parseInt(S.slice(1),16)<<8|255)>>>0};case 9:return{css:S,rgba:parseInt(S.slice(1),16)>>>0}}const x=S.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(x)return l=parseInt(x[1]),c=parseInt(x[2]),u=parseInt(x[3]),h=Math.round(255*(x[5]===void 0?1:parseFloat(x[5]))),f.toColor(l,c,u,h);if(!v||!w)throw new Error("css.toColor: Unsupported css format");if(v.fillStyle=w,v.fillStyle=S,typeof v.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(v.fillRect(0,0,1,1),[l,c,u,h]=v.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:f.toRgba(l,c,u,h),css:S}}}(g||(a.css=g={})),function(y){function v(w,S,x){const E=w/255,T=S/255,k=x/255;return .2126*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.7152*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))+.0722*(k<=.03928?k/12.92:Math.pow((k+.055)/1.055,2.4))}y.relativeLuminance=function(w){return v(w>>16&255,w>>8&255,255&w)},y.relativeLuminance2=v}(_||(a.rgb=_={})),function(y){function v(S,x,E){const T=S>>24&255,k=S>>16&255,B=S>>8&255;let P=x>>24&255,O=x>>16&255,A=x>>8&255,$=b(_.relativeLuminance2(P,O,A),_.relativeLuminance2(T,k,B));for(;$<E&&(P>0||O>0||A>0);)P-=Math.max(0,Math.ceil(.1*P)),O-=Math.max(0,Math.ceil(.1*O)),A-=Math.max(0,Math.ceil(.1*A)),$=b(_.relativeLuminance2(P,O,A),_.relativeLuminance2(T,k,B));return(P<<24|O<<16|A<<8|255)>>>0}function w(S,x,E){const T=S>>24&255,k=S>>16&255,B=S>>8&255;let P=x>>24&255,O=x>>16&255,A=x>>8&255,$=b(_.relativeLuminance2(P,O,A),_.relativeLuminance2(T,k,B));for(;$<E&&(P<255||O<255||A<255);)P=Math.min(255,P+Math.ceil(.1*(255-P))),O=Math.min(255,O+Math.ceil(.1*(255-O))),A=Math.min(255,A+Math.ceil(.1*(255-A))),$=b(_.relativeLuminance2(P,O,A),_.relativeLuminance2(T,k,B));return(P<<24|O<<16|A<<8|255)>>>0}y.blend=function(S,x){if(h=(255&x)/255,h===1)return x;const E=x>>24&255,T=x>>16&255,k=x>>8&255,B=S>>24&255,P=S>>16&255,O=S>>8&255;return l=B+Math.round((E-B)*h),c=P+Math.round((T-P)*h),u=O+Math.round((k-O)*h),f.toRgba(l,c,u)},y.ensureContrastRatio=function(S,x,E){const T=_.relativeLuminance(S>>8),k=_.relativeLuminance(x>>8);if(b(T,k)<E){if(k<T){const O=v(S,x,E),A=b(T,_.relativeLuminance(O>>8));if(A<E){const $=w(S,x,E);return A>b(T,_.relativeLuminance($>>8))?O:$}return O}const B=w(S,x,E),P=b(T,_.relativeLuminance(B>>8));if(P<E){const O=v(S,x,E);return P>b(T,_.relativeLuminance(O>>8))?B:O}return B}},y.reduceLuminance=v,y.increaseLuminance=w,y.toChannels=function(S){return[S>>24&255,S>>16&255,S>>8&255,255&S]}}(m||(a.rgba=m={})),a.toPaddedHex=p,a.contrastRatio=b},8969:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CoreTerminal=void 0;const c=l(844),u=l(2585),h=l(4348),f=l(7866),d=l(744),g=l(7302),_=l(6975),m=l(8460),p=l(1753),b=l(1480),y=l(7994),v=l(9282),w=l(5435),S=l(5981),x=l(2660);let E=!1;class T extends c.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new m.EventEmitter),this._onScroll.event(B=>{this._onScrollApi?.fire(B.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(B){for(const P in B)this.optionsService.options[P]=B[P]}constructor(B){super(),this._windowsWrappingHeuristics=this.register(new c.MutableDisposable),this._onBinary=this.register(new m.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new m.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new m.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new m.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new m.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new m.EventEmitter),this._instantiationService=new h.InstantiationService,this.optionsService=this.register(new g.OptionsService(B)),this._instantiationService.setService(u.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(d.BufferService)),this._instantiationService.setService(u.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(f.LogService)),this._instantiationService.setService(u.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(_.CoreService)),this._instantiationService.setService(u.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(p.CoreMouseService)),this._instantiationService.setService(u.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(b.UnicodeService)),this._instantiationService.setService(u.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(y.CharsetService),this._instantiationService.setService(u.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(x.OscLinkService),this._instantiationService.setService(u.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new w.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,m.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,m.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,m.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,m.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(P=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(P=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new S.WriteBuffer((P,O)=>this._inputHandler.parse(P,O))),this.register((0,m.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(B,P){this._writeBuffer.write(B,P)}writeSync(B,P){this._logService.logLevel<=u.LogLevelEnum.WARN&&!E&&(this._logService.warn("writeSync is unreliable and will be removed soon."),E=!0),this._writeBuffer.writeSync(B,P)}input(B,P=!0){this.coreService.triggerDataEvent(B,P)}resize(B,P){isNaN(B)||isNaN(P)||(B=Math.max(B,d.MINIMUM_COLS),P=Math.max(P,d.MINIMUM_ROWS),this._bufferService.resize(B,P))}scroll(B,P=!1){this._bufferService.scroll(B,P)}scrollLines(B,P,O){this._bufferService.scrollLines(B,P,O)}scrollPages(B){this.scrollLines(B*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(B){const P=B-this._bufferService.buffer.ydisp;P!==0&&this.scrollLines(P)}registerEscHandler(B,P){return this._inputHandler.registerEscHandler(B,P)}registerDcsHandler(B,P){return this._inputHandler.registerDcsHandler(B,P)}registerCsiHandler(B,P){return this._inputHandler.registerCsiHandler(B,P)}registerOscHandler(B,P){return this._inputHandler.registerOscHandler(B,P)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let B=!1;const P=this.optionsService.rawOptions.windowsPty;P&&P.buildNumber!==void 0&&P.buildNumber!==void 0?B=P.backend==="conpty"&&P.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(B=!0),B?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const B=[];B.push(this.onLineFeed(v.updateWindowsModeWrappedState.bind(null,this._bufferService))),B.push(this.registerCsiHandler({final:"H"},()=>((0,v.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,c.toDisposable)(()=>{for(const P of B)P.dispose()})}}}a.CoreTerminal=T},8460:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.runAndSubscribe=a.forwardEvent=a.EventEmitter=void 0,a.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=l=>(this._listeners.push(l),{dispose:()=>{if(!this._disposed){for(let c=0;c<this._listeners.length;c++)if(this._listeners[c]===l)return void this._listeners.splice(c,1)}}})),this._event}fire(l,c){const u=[];for(let h=0;h<this._listeners.length;h++)u.push(this._listeners[h]);for(let h=0;h<u.length;h++)u[h].call(void 0,l,c)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},a.forwardEvent=function(l,c){return l(u=>c.fire(u))},a.runAndSubscribe=function(l,c){return c(void 0),l(u=>c(u))}},5435:function(o,a,l){var c=this&&this.__decorate||function(ee,L,M,U){var j,H=arguments.length,Z=H<3?L:U===null?U=Object.getOwnPropertyDescriptor(L,M):U;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Z=Reflect.decorate(ee,L,M,U);else for(var re=ee.length-1;re>=0;re--)(j=ee[re])&&(Z=(H<3?j(Z):H>3?j(L,M,Z):j(L,M))||Z);return H>3&&Z&&Object.defineProperty(L,M,Z),Z},u=this&&this.__param||function(ee,L){return function(M,U){L(M,U,ee)}};Object.defineProperty(a,"__esModule",{value:!0}),a.InputHandler=a.WindowsOptionsReportType=void 0;const h=l(2584),f=l(7116),d=l(2015),g=l(844),_=l(482),m=l(8437),p=l(8460),b=l(643),y=l(511),v=l(3734),w=l(2585),S=l(1480),x=l(6242),E=l(6351),T=l(5941),k={"(":0,")":1,"*":2,"+":3,"-":1,".":2},B=131072;function P(ee,L){if(ee>24)return L.setWinLines||!1;switch(ee){case 1:return!!L.restoreWin;case 2:return!!L.minimizeWin;case 3:return!!L.setWinPosition;case 4:return!!L.setWinSizePixels;case 5:return!!L.raiseWin;case 6:return!!L.lowerWin;case 7:return!!L.refreshWin;case 8:return!!L.setWinSizeChars;case 9:return!!L.maximizeWin;case 10:return!!L.fullscreenWin;case 11:return!!L.getWinState;case 13:return!!L.getWinPosition;case 14:return!!L.getWinSizePixels;case 15:return!!L.getScreenSizePixels;case 16:return!!L.getCellSizePixels;case 18:return!!L.getWinSizeChars;case 19:return!!L.getScreenSizeChars;case 20:return!!L.getIconTitle;case 21:return!!L.getWinTitle;case 22:return!!L.pushTitle;case 23:return!!L.popTitle;case 24:return!!L.setWinLines}return!1}var O;(function(ee){ee[ee.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",ee[ee.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(O||(a.WindowsOptionsReportType=O={}));let A=0;class $ extends g.Disposable{getAttrData(){return this._curAttrData}constructor(L,M,U,j,H,Z,re,ge,X=new d.EscapeSequenceParser){super(),this._bufferService=L,this._charsetService=M,this._coreService=U,this._logService=j,this._optionsService=H,this._oscLinkService=Z,this._coreMouseService=re,this._unicodeService=ge,this._parser=X,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new _.StringToUtf32,this._utf8Decoder=new _.Utf8ToUtf32,this._workCell=new y.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=m.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=m.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new p.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new p.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new p.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new p.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new p.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new p.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new p.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new p.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new p.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new p.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new p.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new p.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new p.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new te(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(V=>this._activeBuffer=V.activeBuffer)),this._parser.setCsiHandlerFallback((V,ie)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(V),params:ie.toArray()})}),this._parser.setEscHandlerFallback(V=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(V)})}),this._parser.setExecuteHandlerFallback(V=>{this._logService.debug("Unknown EXECUTE code: ",{code:V})}),this._parser.setOscHandlerFallback((V,ie,se)=>{this._logService.debug("Unknown OSC code: ",{identifier:V,action:ie,data:se})}),this._parser.setDcsHandlerFallback((V,ie,se)=>{ie==="HOOK"&&(se=se.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(V),action:ie,payload:se})}),this._parser.setPrintHandler((V,ie,se)=>this.print(V,ie,se)),this._parser.registerCsiHandler({final:"@"},V=>this.insertChars(V)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},V=>this.scrollLeft(V)),this._parser.registerCsiHandler({final:"A"},V=>this.cursorUp(V)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},V=>this.scrollRight(V)),this._parser.registerCsiHandler({final:"B"},V=>this.cursorDown(V)),this._parser.registerCsiHandler({final:"C"},V=>this.cursorForward(V)),this._parser.registerCsiHandler({final:"D"},V=>this.cursorBackward(V)),this._parser.registerCsiHandler({final:"E"},V=>this.cursorNextLine(V)),this._parser.registerCsiHandler({final:"F"},V=>this.cursorPrecedingLine(V)),this._parser.registerCsiHandler({final:"G"},V=>this.cursorCharAbsolute(V)),this._parser.registerCsiHandler({final:"H"},V=>this.cursorPosition(V)),this._parser.registerCsiHandler({final:"I"},V=>this.cursorForwardTab(V)),this._parser.registerCsiHandler({final:"J"},V=>this.eraseInDisplay(V,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},V=>this.eraseInDisplay(V,!0)),this._parser.registerCsiHandler({final:"K"},V=>this.eraseInLine(V,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},V=>this.eraseInLine(V,!0)),this._parser.registerCsiHandler({final:"L"},V=>this.insertLines(V)),this._parser.registerCsiHandler({final:"M"},V=>this.deleteLines(V)),this._parser.registerCsiHandler({final:"P"},V=>this.deleteChars(V)),this._parser.registerCsiHandler({final:"S"},V=>this.scrollUp(V)),this._parser.registerCsiHandler({final:"T"},V=>this.scrollDown(V)),this._parser.registerCsiHandler({final:"X"},V=>this.eraseChars(V)),this._parser.registerCsiHandler({final:"Z"},V=>this.cursorBackwardTab(V)),this._parser.registerCsiHandler({final:"`"},V=>this.charPosAbsolute(V)),this._parser.registerCsiHandler({final:"a"},V=>this.hPositionRelative(V)),this._parser.registerCsiHandler({final:"b"},V=>this.repeatPrecedingCharacter(V)),this._parser.registerCsiHandler({final:"c"},V=>this.sendDeviceAttributesPrimary(V)),this._parser.registerCsiHandler({prefix:">",final:"c"},V=>this.sendDeviceAttributesSecondary(V)),this._parser.registerCsiHandler({final:"d"},V=>this.linePosAbsolute(V)),this._parser.registerCsiHandler({final:"e"},V=>this.vPositionRelative(V)),this._parser.registerCsiHandler({final:"f"},V=>this.hVPosition(V)),this._parser.registerCsiHandler({final:"g"},V=>this.tabClear(V)),this._parser.registerCsiHandler({final:"h"},V=>this.setMode(V)),this._parser.registerCsiHandler({prefix:"?",final:"h"},V=>this.setModePrivate(V)),this._parser.registerCsiHandler({final:"l"},V=>this.resetMode(V)),this._parser.registerCsiHandler({prefix:"?",final:"l"},V=>this.resetModePrivate(V)),this._parser.registerCsiHandler({final:"m"},V=>this.charAttributes(V)),this._parser.registerCsiHandler({final:"n"},V=>this.deviceStatus(V)),this._parser.registerCsiHandler({prefix:"?",final:"n"},V=>this.deviceStatusPrivate(V)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},V=>this.softReset(V)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},V=>this.setCursorStyle(V)),this._parser.registerCsiHandler({final:"r"},V=>this.setScrollRegion(V)),this._parser.registerCsiHandler({final:"s"},V=>this.saveCursor(V)),this._parser.registerCsiHandler({final:"t"},V=>this.windowOptions(V)),this._parser.registerCsiHandler({final:"u"},V=>this.restoreCursor(V)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},V=>this.insertColumns(V)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},V=>this.deleteColumns(V)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},V=>this.selectProtected(V)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},V=>this.requestMode(V,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},V=>this.requestMode(V,!1)),this._parser.setExecuteHandler(h.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(h.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(h.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(h.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(h.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(h.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(h.C1.IND,()=>this.index()),this._parser.setExecuteHandler(h.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(h.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new x.OscHandler(V=>(this.setTitle(V),this.setIconName(V),!0))),this._parser.registerOscHandler(1,new x.OscHandler(V=>this.setIconName(V))),this._parser.registerOscHandler(2,new x.OscHandler(V=>this.setTitle(V))),this._parser.registerOscHandler(4,new x.OscHandler(V=>this.setOrReportIndexedColor(V))),this._parser.registerOscHandler(8,new x.OscHandler(V=>this.setHyperlink(V))),this._parser.registerOscHandler(10,new x.OscHandler(V=>this.setOrReportFgColor(V))),this._parser.registerOscHandler(11,new x.OscHandler(V=>this.setOrReportBgColor(V))),this._parser.registerOscHandler(12,new x.OscHandler(V=>this.setOrReportCursorColor(V))),this._parser.registerOscHandler(104,new x.OscHandler(V=>this.restoreIndexedColor(V))),this._parser.registerOscHandler(110,new x.OscHandler(V=>this.restoreFgColor(V))),this._parser.registerOscHandler(111,new x.OscHandler(V=>this.restoreBgColor(V))),this._parser.registerOscHandler(112,new x.OscHandler(V=>this.restoreCursorColor(V))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const V in f.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:V},()=>this.selectCharset("("+V)),this._parser.registerEscHandler({intermediates:")",final:V},()=>this.selectCharset(")"+V)),this._parser.registerEscHandler({intermediates:"*",final:V},()=>this.selectCharset("*"+V)),this._parser.registerEscHandler({intermediates:"+",final:V},()=>this.selectCharset("+"+V)),this._parser.registerEscHandler({intermediates:"-",final:V},()=>this.selectCharset("-"+V)),this._parser.registerEscHandler({intermediates:".",final:V},()=>this.selectCharset("."+V)),this._parser.registerEscHandler({intermediates:"/",final:V},()=>this.selectCharset("/"+V));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(V=>(this._logService.error("Parsing error: ",V),V)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new E.DcsHandler((V,ie)=>this.requestStatusString(V,ie)))}_preserveStack(L,M,U,j){this._parseStack.paused=!0,this._parseStack.cursorStartX=L,this._parseStack.cursorStartY=M,this._parseStack.decodedLength=U,this._parseStack.position=j}_logSlowResolvingAsync(L){this._logService.logLevel<=w.LogLevelEnum.WARN&&Promise.race([L,new Promise((M,U)=>setTimeout(()=>U("#SLOW_TIMEOUT"),5e3))]).catch(M=>{if(M!=="#SLOW_TIMEOUT")throw M;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(L,M){let U,j=this._activeBuffer.x,H=this._activeBuffer.y,Z=0;const re=this._parseStack.paused;if(re){if(U=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,M))return this._logSlowResolvingAsync(U),U;j=this._parseStack.cursorStartX,H=this._parseStack.cursorStartY,this._parseStack.paused=!1,L.length>B&&(Z=this._parseStack.position+B)}if(this._logService.logLevel<=w.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof L=="string"?` "${L}"`:` "${Array.prototype.map.call(L,V=>String.fromCharCode(V)).join("")}"`),typeof L=="string"?L.split("").map(V=>V.charCodeAt(0)):L),this._parseBuffer.length<L.length&&this._parseBuffer.length<B&&(this._parseBuffer=new Uint32Array(Math.min(L.length,B))),re||this._dirtyRowTracker.clearRange(),L.length>B)for(let V=Z;V<L.length;V+=B){const ie=V+B<L.length?V+B:L.length,se=typeof L=="string"?this._stringDecoder.decode(L.substring(V,ie),this._parseBuffer):this._utf8Decoder.decode(L.subarray(V,ie),this._parseBuffer);if(U=this._parser.parse(this._parseBuffer,se))return this._preserveStack(j,H,se,V),this._logSlowResolvingAsync(U),U}else if(!re){const V=typeof L=="string"?this._stringDecoder.decode(L,this._parseBuffer):this._utf8Decoder.decode(L,this._parseBuffer);if(U=this._parser.parse(this._parseBuffer,V))return this._preserveStack(j,H,V,0),this._logSlowResolvingAsync(U),U}this._activeBuffer.x===j&&this._activeBuffer.y===H||this._onCursorMove.fire();const ge=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),X=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);X<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(X,this._bufferService.rows-1),Math.min(ge,this._bufferService.rows-1))}print(L,M,U){let j,H;const Z=this._charsetService.charset,re=this._optionsService.rawOptions.screenReaderMode,ge=this._bufferService.cols,X=this._coreService.decPrivateModes.wraparound,V=this._coreService.modes.insertMode,ie=this._curAttrData;let se=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&U-M>0&&se.getWidth(this._activeBuffer.x-1)===2&&se.setCellFromCodepoint(this._activeBuffer.x-1,0,1,ie);let me=this._parser.precedingJoinState;for(let de=M;de<U;++de){if(j=L[de],j<127&&Z){const ae=Z[String.fromCharCode(j)];ae&&(j=ae.charCodeAt(0))}const ve=this._unicodeService.charProperties(j,me);H=S.UnicodeService.extractWidth(ve);const F=S.UnicodeService.extractShouldJoin(ve),he=F?S.UnicodeService.extractWidth(me):0;if(me=ve,re&&this._onA11yChar.fire((0,_.stringFromCodePoint)(j)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+H-he>ge){if(X){const ae=se;let W=this._activeBuffer.x-he;for(this._activeBuffer.x=he,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),se=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),he>0&&se instanceof m.BufferLine&&se.copyCellsFrom(ae,W,0,he,!1);W<ge;)ae.setCellFromCodepoint(W++,0,1,ie)}else if(this._activeBuffer.x=ge-1,H===2)continue}if(F&&this._activeBuffer.x){const ae=se.getWidth(this._activeBuffer.x-1)?1:2;se.addCodepointToCell(this._activeBuffer.x-ae,j,H);for(let W=H-he;--W>=0;)se.setCellFromCodepoint(this._activeBuffer.x++,0,0,ie)}else if(V&&(se.insertCells(this._activeBuffer.x,H-he,this._activeBuffer.getNullCell(ie)),se.getWidth(ge-1)===2&&se.setCellFromCodepoint(ge-1,b.NULL_CELL_CODE,b.NULL_CELL_WIDTH,ie)),se.setCellFromCodepoint(this._activeBuffer.x++,j,H,ie),H>0)for(;--H;)se.setCellFromCodepoint(this._activeBuffer.x++,0,0,ie)}this._parser.precedingJoinState=me,this._activeBuffer.x<ge&&U-M>0&&se.getWidth(this._activeBuffer.x)===0&&!se.hasContent(this._activeBuffer.x)&&se.setCellFromCodepoint(this._activeBuffer.x,0,1,ie),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(L,M){return L.final!=="t"||L.prefix||L.intermediates?this._parser.registerCsiHandler(L,M):this._parser.registerCsiHandler(L,U=>!P(U.params[0],this._optionsService.rawOptions.windowOptions)||M(U))}registerDcsHandler(L,M){return this._parser.registerDcsHandler(L,new E.DcsHandler(M))}registerEscHandler(L,M){return this._parser.registerEscHandler(L,M)}registerOscHandler(L,M){return this._parser.registerOscHandler(L,new x.OscHandler(M))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);L.hasWidth(this._activeBuffer.x)&&!L.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const L=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-L),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(L=this._bufferService.cols-1){this._activeBuffer.x=Math.min(L,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(L,M){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=L,this._activeBuffer.y=this._activeBuffer.scrollTop+M):(this._activeBuffer.x=L,this._activeBuffer.y=M),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(L,M){this._restrictCursor(),this._setCursor(this._activeBuffer.x+L,this._activeBuffer.y+M)}cursorUp(L){const M=this._activeBuffer.y-this._activeBuffer.scrollTop;return M>=0?this._moveCursor(0,-Math.min(M,L.params[0]||1)):this._moveCursor(0,-(L.params[0]||1)),!0}cursorDown(L){const M=this._activeBuffer.scrollBottom-this._activeBuffer.y;return M>=0?this._moveCursor(0,Math.min(M,L.params[0]||1)):this._moveCursor(0,L.params[0]||1),!0}cursorForward(L){return this._moveCursor(L.params[0]||1,0),!0}cursorBackward(L){return this._moveCursor(-(L.params[0]||1),0),!0}cursorNextLine(L){return this.cursorDown(L),this._activeBuffer.x=0,!0}cursorPrecedingLine(L){return this.cursorUp(L),this._activeBuffer.x=0,!0}cursorCharAbsolute(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(L){return this._setCursor(L.length>=2?(L.params[1]||1)-1:0,(L.params[0]||1)-1),!0}charPosAbsolute(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(L){return this._moveCursor(L.params[0]||1,0),!0}linePosAbsolute(L){return this._setCursor(this._activeBuffer.x,(L.params[0]||1)-1),!0}vPositionRelative(L){return this._moveCursor(0,L.params[0]||1),!0}hVPosition(L){return this.cursorPosition(L),!0}tabClear(L){const M=L.params[0];return M===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:M===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let M=L.params[0]||1;for(;M--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let M=L.params[0]||1;for(;M--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(L){const M=L.params[0];return M===1&&(this._curAttrData.bg|=536870912),M!==2&&M!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(L,M,U,j=!1,H=!1){const Z=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);Z.replaceCells(M,U,this._activeBuffer.getNullCell(this._eraseAttrData()),H),j&&(Z.isWrapped=!1)}_resetBufferLine(L,M=!1){const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);U&&(U.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),M),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+L),U.isWrapped=!1)}eraseInDisplay(L,M=!1){let U;switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:for(U=this._activeBuffer.y,this._dirtyRowTracker.markDirty(U),this._eraseInBufferLine(U++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,M);U<this._bufferService.rows;U++)this._resetBufferLine(U,M);this._dirtyRowTracker.markDirty(U);break;case 1:for(U=this._activeBuffer.y,this._dirtyRowTracker.markDirty(U),this._eraseInBufferLine(U,0,this._activeBuffer.x+1,!0,M),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(U+1).isWrapped=!1);U--;)this._resetBufferLine(U,M);this._dirtyRowTracker.markDirty(0);break;case 2:for(U=this._bufferService.rows,this._dirtyRowTracker.markDirty(U-1);U--;)this._resetBufferLine(U,M);this._dirtyRowTracker.markDirty(0);break;case 3:const j=this._activeBuffer.lines.length-this._bufferService.rows;j>0&&(this._activeBuffer.lines.trimStart(j),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-j,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-j,0),this._onScroll.fire(0))}return!0}eraseInLine(L,M=!1){switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,M);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,M);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,M)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(L){this._restrictCursor();let M=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const U=this._activeBuffer.ybase+this._activeBuffer.y,j=this._bufferService.rows-1-this._activeBuffer.scrollBottom,H=this._bufferService.rows-1+this._activeBuffer.ybase-j+1;for(;M--;)this._activeBuffer.lines.splice(H-1,1),this._activeBuffer.lines.splice(U,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(L){this._restrictCursor();let M=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const U=this._activeBuffer.ybase+this._activeBuffer.y;let j;for(j=this._bufferService.rows-1-this._activeBuffer.scrollBottom,j=this._bufferService.rows-1+this._activeBuffer.ybase-j;M--;)this._activeBuffer.lines.splice(U,1),this._activeBuffer.lines.splice(j,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(L){this._restrictCursor();const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.insertCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(L){this._restrictCursor();const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.deleteCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(L){let M=L.params[0]||1;for(;M--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(L){let M=L.params[0]||1;for(;M--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(m.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=L.params[0]||1;for(let U=this._activeBuffer.scrollTop;U<=this._activeBuffer.scrollBottom;++U){const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+U);j.deleteCells(0,M,this._activeBuffer.getNullCell(this._eraseAttrData())),j.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=L.params[0]||1;for(let U=this._activeBuffer.scrollTop;U<=this._activeBuffer.scrollBottom;++U){const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+U);j.insertCells(0,M,this._activeBuffer.getNullCell(this._eraseAttrData())),j.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=L.params[0]||1;for(let U=this._activeBuffer.scrollTop;U<=this._activeBuffer.scrollBottom;++U){const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+U);j.insertCells(this._activeBuffer.x,M,this._activeBuffer.getNullCell(this._eraseAttrData())),j.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=L.params[0]||1;for(let U=this._activeBuffer.scrollTop;U<=this._activeBuffer.scrollBottom;++U){const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+U);j.deleteCells(this._activeBuffer.x,M,this._activeBuffer.getNullCell(this._eraseAttrData())),j.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(L){this._restrictCursor();const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(L.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(L){const M=this._parser.precedingJoinState;if(!M)return!0;const U=L.params[0]||1,j=S.UnicodeService.extractWidth(M),H=this._activeBuffer.x-j,Z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(H),re=new Uint32Array(Z.length*U);let ge=0;for(let V=0;V<Z.length;){const ie=Z.codePointAt(V)||0;re[ge++]=ie,V+=ie>65535?2:1}let X=ge;for(let V=1;V<U;++V)re.copyWithin(X,0,ge),X+=ge;return this.print(re,0,X),!0}sendDeviceAttributesPrimary(L){return L.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(h.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(h.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(L){return L.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(h.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(h.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(L.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(h.C0.ESC+"[>83;40003;0c")),!0}_is(L){return(this._optionsService.rawOptions.termName+"").indexOf(L)===0}setMode(L){for(let M=0;M<L.length;M++)switch(L.params[M]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(L){for(let M=0;M<L.length;M++)switch(L.params[M]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,f.DEFAULT_CHARSET),this._charsetService.setgCharset(1,f.DEFAULT_CHARSET),this._charsetService.setgCharset(2,f.DEFAULT_CHARSET),this._charsetService.setgCharset(3,f.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(L){for(let M=0;M<L.length;M++)switch(L.params[M]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(L){for(let M=0;M<L.length;M++)switch(L.params[M]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),L.params[M]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(L,M){const U=this._coreService.decPrivateModes,{activeProtocol:j,activeEncoding:H}=this._coreMouseService,Z=this._coreService,{buffers:re,cols:ge}=this._bufferService,{active:X,alt:V}=re,ie=this._optionsService.rawOptions,se=F=>F?1:2,me=L.params[0];return de=me,ve=M?me===2?4:me===4?se(Z.modes.insertMode):me===12?3:me===20?se(ie.convertEol):0:me===1?se(U.applicationCursorKeys):me===3?ie.windowOptions.setWinLines?ge===80?2:ge===132?1:0:0:me===6?se(U.origin):me===7?se(U.wraparound):me===8?3:me===9?se(j==="X10"):me===12?se(ie.cursorBlink):me===25?se(!Z.isCursorHidden):me===45?se(U.reverseWraparound):me===66?se(U.applicationKeypad):me===67?4:me===1e3?se(j==="VT200"):me===1002?se(j==="DRAG"):me===1003?se(j==="ANY"):me===1004?se(U.sendFocus):me===1005?4:me===1006?se(H==="SGR"):me===1015?4:me===1016?se(H==="SGR_PIXELS"):me===1048?1:me===47||me===1047||me===1049?se(X===V):me===2004?se(U.bracketedPasteMode):0,Z.triggerDataEvent(`${h.C0.ESC}[${M?"":"?"}${de};${ve}$y`),!0;var de,ve}_updateAttrColor(L,M,U,j,H){return M===2?(L|=50331648,L&=-16777216,L|=v.AttributeData.fromColorRGB([U,j,H])):M===5&&(L&=-50331904,L|=33554432|255&U),L}_extractColor(L,M,U){const j=[0,0,-1,0,0,0];let H=0,Z=0;do{if(j[Z+H]=L.params[M+Z],L.hasSubParams(M+Z)){const re=L.getSubParams(M+Z);let ge=0;do j[1]===5&&(H=1),j[Z+ge+1+H]=re[ge];while(++ge<re.length&&ge+Z+1+H<j.length);break}if(j[1]===5&&Z+H>=2||j[1]===2&&Z+H>=5)break;j[1]&&(H=1)}while(++Z+M<L.length&&Z+H<j.length);for(let re=2;re<j.length;++re)j[re]===-1&&(j[re]=0);switch(j[0]){case 38:U.fg=this._updateAttrColor(U.fg,j[1],j[3],j[4],j[5]);break;case 48:U.bg=this._updateAttrColor(U.bg,j[1],j[3],j[4],j[5]);break;case 58:U.extended=U.extended.clone(),U.extended.underlineColor=this._updateAttrColor(U.extended.underlineColor,j[1],j[3],j[4],j[5])}return Z}_processUnderline(L,M){M.extended=M.extended.clone(),(!~L||L>5)&&(L=1),M.extended.underlineStyle=L,M.fg|=268435456,L===0&&(M.fg&=-268435457),M.updateExtended()}_processSGR0(L){L.fg=m.DEFAULT_ATTR_DATA.fg,L.bg=m.DEFAULT_ATTR_DATA.bg,L.extended=L.extended.clone(),L.extended.underlineStyle=0,L.extended.underlineColor&=-67108864,L.updateExtended()}charAttributes(L){if(L.length===1&&L.params[0]===0)return this._processSGR0(this._curAttrData),!0;const M=L.length;let U;const j=this._curAttrData;for(let H=0;H<M;H++)U=L.params[H],U>=30&&U<=37?(j.fg&=-50331904,j.fg|=16777216|U-30):U>=40&&U<=47?(j.bg&=-50331904,j.bg|=16777216|U-40):U>=90&&U<=97?(j.fg&=-50331904,j.fg|=16777224|U-90):U>=100&&U<=107?(j.bg&=-50331904,j.bg|=16777224|U-100):U===0?this._processSGR0(j):U===1?j.fg|=134217728:U===3?j.bg|=67108864:U===4?(j.fg|=268435456,this._processUnderline(L.hasSubParams(H)?L.getSubParams(H)[0]:1,j)):U===5?j.fg|=536870912:U===7?j.fg|=67108864:U===8?j.fg|=1073741824:U===9?j.fg|=2147483648:U===2?j.bg|=134217728:U===21?this._processUnderline(2,j):U===22?(j.fg&=-134217729,j.bg&=-134217729):U===23?j.bg&=-67108865:U===24?(j.fg&=-268435457,this._processUnderline(0,j)):U===25?j.fg&=-536870913:U===27?j.fg&=-67108865:U===28?j.fg&=-1073741825:U===29?j.fg&=2147483647:U===39?(j.fg&=-67108864,j.fg|=16777215&m.DEFAULT_ATTR_DATA.fg):U===49?(j.bg&=-67108864,j.bg|=16777215&m.DEFAULT_ATTR_DATA.bg):U===38||U===48||U===58?H+=this._extractColor(L,H,j):U===53?j.bg|=1073741824:U===55?j.bg&=-1073741825:U===59?(j.extended=j.extended.clone(),j.extended.underlineColor=-1,j.updateExtended()):U===100?(j.fg&=-67108864,j.fg|=16777215&m.DEFAULT_ATTR_DATA.fg,j.bg&=-67108864,j.bg|=16777215&m.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",U);return!0}deviceStatus(L){switch(L.params[0]){case 5:this._coreService.triggerDataEvent(`${h.C0.ESC}[0n`);break;case 6:const M=this._activeBuffer.y+1,U=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[${M};${U}R`)}return!0}deviceStatusPrivate(L){if(L.params[0]===6){const M=this._activeBuffer.y+1,U=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[?${M};${U}R`)}return!0}softReset(L){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=m.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(L){const M=L.params[0]||1;switch(M){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const U=M%2==1;return this._optionsService.options.cursorBlink=U,!0}setScrollRegion(L){const M=L.params[0]||1;let U;return(L.length<2||(U=L.params[1])>this._bufferService.rows||U===0)&&(U=this._bufferService.rows),U>M&&(this._activeBuffer.scrollTop=M-1,this._activeBuffer.scrollBottom=U-1,this._setCursor(0,0)),!0}windowOptions(L){if(!P(L.params[0],this._optionsService.rawOptions.windowOptions))return!0;const M=L.length>1?L.params[1]:0;switch(L.params[0]){case 14:M!==2&&this._onRequestWindowsOptionsReport.fire(O.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(O.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${h.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:M!==0&&M!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),M!==0&&M!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:M!==0&&M!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),M!==0&&M!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(L){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(L){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(L){return this._windowTitle=L,this._onTitleChange.fire(L),!0}setIconName(L){return this._iconName=L,!0}setOrReportIndexedColor(L){const M=[],U=L.split(";");for(;U.length>1;){const j=U.shift(),H=U.shift();if(/^\d+$/.exec(j)){const Z=parseInt(j);if(Q(Z))if(H==="?")M.push({type:0,index:Z});else{const re=(0,T.parseColor)(H);re&&M.push({type:1,index:Z,color:re})}}}return M.length&&this._onColor.fire(M),!0}setHyperlink(L){const M=L.split(";");return!(M.length<2)&&(M[1]?this._createHyperlink(M[0],M[1]):!M[0]&&this._finishHyperlink())}_createHyperlink(L,M){this._getCurrentLinkId()&&this._finishHyperlink();const U=L.split(":");let j;const H=U.findIndex(Z=>Z.startsWith("id="));return H!==-1&&(j=U[H].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:j,uri:M}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(L,M){const U=L.split(";");for(let j=0;j<U.length&&!(M>=this._specialColors.length);++j,++M)if(U[j]==="?")this._onColor.fire([{type:0,index:this._specialColors[M]}]);else{const H=(0,T.parseColor)(U[j]);H&&this._onColor.fire([{type:1,index:this._specialColors[M],color:H}])}return!0}setOrReportFgColor(L){return this._setOrReportSpecialColor(L,0)}setOrReportBgColor(L){return this._setOrReportSpecialColor(L,1)}setOrReportCursorColor(L){return this._setOrReportSpecialColor(L,2)}restoreIndexedColor(L){if(!L)return this._onColor.fire([{type:2}]),!0;const M=[],U=L.split(";");for(let j=0;j<U.length;++j)if(/^\d+$/.exec(U[j])){const H=parseInt(U[j]);Q(H)&&M.push({type:2,index:H})}return M.length&&this._onColor.fire(M),!0}restoreFgColor(L){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(L){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(L){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,f.DEFAULT_CHARSET),!0}selectCharset(L){return L.length!==2?(this.selectDefaultCharset(),!0):(L[0]==="/"||this._charsetService.setgCharset(k[L[0]],f.CHARSETS[L[1]]||f.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const L=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,L,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=m.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=m.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(L){return this._charsetService.setgLevel(L),!0}screenAlignmentPattern(){const L=new y.CellData;L.content=4194373,L.fg=this._curAttrData.fg,L.bg=this._curAttrData.bg,this._setCursor(0,0);for(let M=0;M<this._bufferService.rows;++M){const U=this._activeBuffer.ybase+this._activeBuffer.y+M,j=this._activeBuffer.lines.get(U);j&&(j.fill(L),j.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(L,M){const U=this._bufferService.buffer,j=this._optionsService.rawOptions;return(H=>(this._coreService.triggerDataEvent(`${h.C0.ESC}${H}${h.C0.ESC}\\`),!0))(L==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:L==='"p'?'P1$r61;1"p':L==="r"?`P1$r${U.scrollTop+1};${U.scrollBottom+1}r`:L==="m"?"P1$r0m":L===" q"?`P1$r${{block:2,underline:4,bar:6}[j.cursorStyle]-(j.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(L,M){this._dirtyRowTracker.markRangeDirty(L,M)}}a.InputHandler=$;let te=class{constructor(ee){this._bufferService=ee,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(ee){ee<this.start?this.start=ee:ee>this.end&&(this.end=ee)}markRangeDirty(ee,L){ee>L&&(A=ee,ee=L,L=A),ee<this.start&&(this.start=ee),L>this.end&&(this.end=L)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function Q(ee){return 0<=ee&&ee<256}te=c([u(0,w.IBufferService)],te)},844:(o,a)=>{function l(c){for(const u of c)u.dispose();c.length=0}Object.defineProperty(a,"__esModule",{value:!0}),a.getDisposeArrayDisposable=a.disposeArray=a.toDisposable=a.MutableDisposable=a.Disposable=void 0,a.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const c of this._disposables)c.dispose();this._disposables.length=0}register(c){return this._disposables.push(c),c}unregister(c){const u=this._disposables.indexOf(c);u!==-1&&this._disposables.splice(u,1)}},a.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(c){this._isDisposed||c===this._value||(this._value?.dispose(),this._value=c)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},a.toDisposable=function(c){return{dispose:c}},a.disposeArray=l,a.getDisposeArrayDisposable=function(c){return{dispose:()=>l(c)}}},1505:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.FourKeyMap=a.TwoKeyMap=void 0;class l{constructor(){this._data={}}set(u,h,f){this._data[u]||(this._data[u]={}),this._data[u][h]=f}get(u,h){return this._data[u]?this._data[u][h]:void 0}clear(){this._data={}}}a.TwoKeyMap=l,a.FourKeyMap=class{constructor(){this._data=new l}set(c,u,h,f,d){this._data.get(c,u)||this._data.set(c,u,new l),this._data.get(c,u).set(h,f,d)}get(c,u,h,f){return this._data.get(c,u)?.get(h,f)}clear(){this._data.clear()}}},6114:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.isChromeOS=a.isLinux=a.isWindows=a.isIphone=a.isIpad=a.isMac=a.getSafariVersion=a.isSafari=a.isLegacyEdge=a.isFirefox=a.isNode=void 0,a.isNode=typeof Ft<"u"&&"title"in Ft;const l=a.isNode?"node":navigator.userAgent,c=a.isNode?"node":navigator.platform;a.isFirefox=l.includes("Firefox"),a.isLegacyEdge=l.includes("Edge"),a.isSafari=/^((?!chrome|android).)*safari/i.test(l),a.getSafariVersion=function(){if(!a.isSafari)return 0;const u=l.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},a.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(c),a.isIpad=c==="iPad",a.isIphone=c==="iPhone",a.isWindows=["Windows","Win16","Win32","WinCE"].includes(c),a.isLinux=c.indexOf("Linux")>=0,a.isChromeOS=/\bCrOS\b/.test(l)},6106:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SortedList=void 0;let l=0;a.SortedList=class{constructor(c){this._getKey=c,this._array=[]}clear(){this._array.length=0}insert(c){this._array.length!==0?(l=this._search(this._getKey(c)),this._array.splice(l,0,c)):this._array.push(c)}delete(c){if(this._array.length===0)return!1;const u=this._getKey(c);if(u===void 0||(l=this._search(u),l===-1)||this._getKey(this._array[l])!==u)return!1;do if(this._array[l]===c)return this._array.splice(l,1),!0;while(++l<this._array.length&&this._getKey(this._array[l])===u);return!1}*getKeyIterator(c){if(this._array.length!==0&&(l=this._search(c),!(l<0||l>=this._array.length)&&this._getKey(this._array[l])===c))do yield this._array[l];while(++l<this._array.length&&this._getKey(this._array[l])===c)}forEachByKey(c,u){if(this._array.length!==0&&(l=this._search(c),!(l<0||l>=this._array.length)&&this._getKey(this._array[l])===c))do u(this._array[l]);while(++l<this._array.length&&this._getKey(this._array[l])===c)}values(){return[...this._array].values()}_search(c){let u=0,h=this._array.length-1;for(;h>=u;){let f=u+h>>1;const d=this._getKey(this._array[f]);if(d>c)h=f-1;else{if(!(d<c)){for(;f>0&&this._getKey(this._array[f-1])===c;)f--;return f}u=f+1}}return u}}},7226:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DebouncedIdleTask=a.IdleTaskQueue=a.PriorityTaskQueue=void 0;const c=l(6114);class u{constructor(){this._tasks=[],this._i=0}enqueue(d){this._tasks.push(d),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(d){this._idleCallback=void 0;let g=0,_=0,m=d.timeRemaining(),p=0;for(;this._i<this._tasks.length;){if(g=Date.now(),this._tasks[this._i]()||this._i++,g=Math.max(1,Date.now()-g),_=Math.max(g,_),p=d.timeRemaining(),1.5*_>p)return m-g<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(m-g))}ms`),void this._start();m=p}this.clear()}}class h extends u{_requestCallback(d){return setTimeout(()=>d(this._createDeadline(16)))}_cancelCallback(d){clearTimeout(d)}_createDeadline(d){const g=Date.now()+d;return{timeRemaining:()=>Math.max(0,g-Date.now())}}}a.PriorityTaskQueue=h,a.IdleTaskQueue=!c.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(f){return requestIdleCallback(f)}_cancelCallback(f){cancelIdleCallback(f)}}:h,a.DebouncedIdleTask=class{constructor(){this._queue=new a.IdleTaskQueue}set(f){this._queue.clear(),this._queue.enqueue(f)}flush(){this._queue.flush()}}},9282:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.updateWindowsModeWrappedState=void 0;const c=l(643);a.updateWindowsModeWrappedState=function(u){const h=u.buffer.lines.get(u.buffer.ybase+u.buffer.y-1),f=h?.get(u.cols-1),d=u.buffer.lines.get(u.buffer.ybase+u.buffer.y);d&&f&&(d.isWrapped=f[c.CHAR_DATA_CODE_INDEX]!==c.NULL_CELL_CODE&&f[c.CHAR_DATA_CODE_INDEX]!==c.WHITESPACE_CELL_CODE)}},3734:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ExtendedAttrs=a.AttributeData=void 0;class l{constructor(){this.fg=0,this.bg=0,this.extended=new c}static toColorRGB(h){return[h>>>16&255,h>>>8&255,255&h]}static fromColorRGB(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]}clone(){const h=new l;return h.fg=this.fg,h.bg=this.bg,h.extended=this.extended.clone(),h}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}a.AttributeData=l;class c{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(h){this._ext=h}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(h){this._ext&=-469762049,this._ext|=h<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(h){this._ext&=-67108864,this._ext|=67108863&h}get urlId(){return this._urlId}set urlId(h){this._urlId=h}get underlineVariantOffset(){const h=(3758096384&this._ext)>>29;return h<0?4294967288^h:h}set underlineVariantOffset(h){this._ext&=536870911,this._ext|=h<<29&3758096384}constructor(h=0,f=0){this._ext=0,this._urlId=0,this._ext=h,this._urlId=f}clone(){return new c(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}a.ExtendedAttrs=c},9092:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Buffer=a.MAX_BUFFER_SIZE=void 0;const c=l(6349),u=l(7226),h=l(3734),f=l(8437),d=l(4634),g=l(511),_=l(643),m=l(4863),p=l(7116);a.MAX_BUFFER_SIZE=4294967295,a.Buffer=class{constructor(b,y,v){this._hasScrollback=b,this._optionsService=y,this._bufferService=v,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=f.DEFAULT_ATTR_DATA.clone(),this.savedCharset=p.DEFAULT_CHARSET,this.markers=[],this._nullCell=g.CellData.fromCharData([0,_.NULL_CELL_CHAR,_.NULL_CELL_WIDTH,_.NULL_CELL_CODE]),this._whitespaceCell=g.CellData.fromCharData([0,_.WHITESPACE_CELL_CHAR,_.WHITESPACE_CELL_WIDTH,_.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new u.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(b){return b?(this._nullCell.fg=b.fg,this._nullCell.bg=b.bg,this._nullCell.extended=b.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new h.ExtendedAttrs),this._nullCell}getWhitespaceCell(b){return b?(this._whitespaceCell.fg=b.fg,this._whitespaceCell.bg=b.bg,this._whitespaceCell.extended=b.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new h.ExtendedAttrs),this._whitespaceCell}getBlankLine(b,y){return new f.BufferLine(this._bufferService.cols,this.getNullCell(b),y)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const b=this.ybase+this.y-this.ydisp;return b>=0&&b<this._rows}_getCorrectBufferLength(b){if(!this._hasScrollback)return b;const y=b+this._optionsService.rawOptions.scrollback;return y>a.MAX_BUFFER_SIZE?a.MAX_BUFFER_SIZE:y}fillViewportRows(b){if(this.lines.length===0){b===void 0&&(b=f.DEFAULT_ATTR_DATA);let y=this._rows;for(;y--;)this.lines.push(this.getBlankLine(b))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(b,y){const v=this.getNullCell(f.DEFAULT_ATTR_DATA);let w=0;const S=this._getCorrectBufferLength(y);if(S>this.lines.maxLength&&(this.lines.maxLength=S),this.lines.length>0){if(this._cols<b)for(let E=0;E<this.lines.length;E++)w+=+this.lines.get(E).resize(b,v);let x=0;if(this._rows<y)for(let E=this._rows;E<y;E++)this.lines.length<y+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new f.BufferLine(b,v)):this.ybase>0&&this.lines.length<=this.ybase+this.y+x+1?(this.ybase--,x++,this.ydisp>0&&this.ydisp--):this.lines.push(new f.BufferLine(b,v)));else for(let E=this._rows;E>y;E--)this.lines.length>y+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(S<this.lines.maxLength){const E=this.lines.length-S;E>0&&(this.lines.trimStart(E),this.ybase=Math.max(this.ybase-E,0),this.ydisp=Math.max(this.ydisp-E,0),this.savedY=Math.max(this.savedY-E,0)),this.lines.maxLength=S}this.x=Math.min(this.x,b-1),this.y=Math.min(this.y,y-1),x&&(this.y+=x),this.savedX=Math.min(this.savedX,b-1),this.scrollTop=0}if(this.scrollBottom=y-1,this._isReflowEnabled&&(this._reflow(b,y),this._cols>b))for(let x=0;x<this.lines.length;x++)w+=+this.lines.get(x).resize(b,v);this._cols=b,this._rows=y,this._memoryCleanupQueue.clear(),w>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let b=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,b=!1);let y=0;for(;this._memoryCleanupPosition<this.lines.length;)if(y+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),y>100)return!0;return b}get _isReflowEnabled(){const b=this._optionsService.rawOptions.windowsPty;return b&&b.buildNumber?this._hasScrollback&&b.backend==="conpty"&&b.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(b,y){this._cols!==b&&(b>this._cols?this._reflowLarger(b,y):this._reflowSmaller(b,y))}_reflowLarger(b,y){const v=(0,d.reflowLargerGetLinesToRemove)(this.lines,this._cols,b,this.ybase+this.y,this.getNullCell(f.DEFAULT_ATTR_DATA));if(v.length>0){const w=(0,d.reflowLargerCreateNewLayout)(this.lines,v);(0,d.reflowLargerApplyNewLayout)(this.lines,w.layout),this._reflowLargerAdjustViewport(b,y,w.countRemoved)}}_reflowLargerAdjustViewport(b,y,v){const w=this.getNullCell(f.DEFAULT_ATTR_DATA);let S=v;for(;S-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<y&&this.lines.push(new f.BufferLine(b,w))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-v,0)}_reflowSmaller(b,y){const v=this.getNullCell(f.DEFAULT_ATTR_DATA),w=[];let S=0;for(let x=this.lines.length-1;x>=0;x--){let E=this.lines.get(x);if(!E||!E.isWrapped&&E.getTrimmedLength()<=b)continue;const T=[E];for(;E.isWrapped&&x>0;)E=this.lines.get(--x),T.unshift(E);const k=this.ybase+this.y;if(k>=x&&k<x+T.length)continue;const B=T[T.length-1].getTrimmedLength(),P=(0,d.reflowSmallerGetNewLineLengths)(T,this._cols,b),O=P.length-T.length;let A;A=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+O):Math.max(0,this.lines.length-this.lines.maxLength+O);const $=[];for(let U=0;U<O;U++){const j=this.getBlankLine(f.DEFAULT_ATTR_DATA,!0);$.push(j)}$.length>0&&(w.push({start:x+T.length+S,newLines:$}),S+=$.length),T.push(...$);let te=P.length-1,Q=P[te];Q===0&&(te--,Q=P[te]);let ee=T.length-O-1,L=B;for(;ee>=0;){const U=Math.min(L,Q);if(T[te]===void 0)break;if(T[te].copyCellsFrom(T[ee],L-U,Q-U,U,!0),Q-=U,Q===0&&(te--,Q=P[te]),L-=U,L===0){ee--;const j=Math.max(ee,0);L=(0,d.getWrappedLineTrimmedLength)(T,j,this._cols)}}for(let U=0;U<T.length;U++)P[U]<b&&T[U].setCell(P[U],v);let M=O-A;for(;M-- >0;)this.ybase===0?this.y<y-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+S)-y&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+O,this.ybase+y-1)}if(w.length>0){const x=[],E=[];for(let te=0;te<this.lines.length;te++)E.push(this.lines.get(te));const T=this.lines.length;let k=T-1,B=0,P=w[B];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+S);let O=0;for(let te=Math.min(this.lines.maxLength-1,T+S-1);te>=0;te--)if(P&&P.start>k+O){for(let Q=P.newLines.length-1;Q>=0;Q--)this.lines.set(te--,P.newLines[Q]);te++,x.push({index:k+1,amount:P.newLines.length}),O+=P.newLines.length,P=w[++B]}else this.lines.set(te,E[k--]);let A=0;for(let te=x.length-1;te>=0;te--)x[te].index+=A,this.lines.onInsertEmitter.fire(x[te]),A+=x[te].amount;const $=Math.max(0,T+S-this.lines.maxLength);$>0&&this.lines.onTrimEmitter.fire($)}}translateBufferLineToString(b,y,v=0,w){const S=this.lines.get(b);return S?S.translateToString(y,v,w):""}getWrappedRangeForLine(b){let y=b,v=b;for(;y>0&&this.lines.get(y).isWrapped;)y--;for(;v+1<this.lines.length&&this.lines.get(v+1).isWrapped;)v++;return{first:y,last:v}}setupTabStops(b){for(b!=null?this.tabs[b]||(b=this.prevStop(b)):(this.tabs={},b=0);b<this._cols;b+=this._optionsService.rawOptions.tabStopWidth)this.tabs[b]=!0}prevStop(b){for(b==null&&(b=this.x);!this.tabs[--b]&&b>0;);return b>=this._cols?this._cols-1:b<0?0:b}nextStop(b){for(b==null&&(b=this.x);!this.tabs[++b]&&b<this._cols;);return b>=this._cols?this._cols-1:b<0?0:b}clearMarkers(b){this._isClearing=!0;for(let y=0;y<this.markers.length;y++)this.markers[y].line===b&&(this.markers[y].dispose(),this.markers.splice(y--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let b=0;b<this.markers.length;b++)this.markers[b].dispose(),this.markers.splice(b--,1);this._isClearing=!1}addMarker(b){const y=new m.Marker(b);return this.markers.push(y),y.register(this.lines.onTrim(v=>{y.line-=v,y.line<0&&y.dispose()})),y.register(this.lines.onInsert(v=>{y.line>=v.index&&(y.line+=v.amount)})),y.register(this.lines.onDelete(v=>{y.line>=v.index&&y.line<v.index+v.amount&&y.dispose(),y.line>v.index&&(y.line-=v.amount)})),y.register(y.onDispose(()=>this._removeMarker(y))),y}_removeMarker(b){this._isClearing||this.markers.splice(this.markers.indexOf(b),1)}}},8437:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLine=a.DEFAULT_ATTR_DATA=void 0;const c=l(3734),u=l(511),h=l(643),f=l(482);a.DEFAULT_ATTR_DATA=Object.freeze(new c.AttributeData);let d=0;class g{constructor(m,p,b=!1){this.isWrapped=b,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*m);const y=p||u.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]);for(let v=0;v<m;++v)this.setCell(v,y);this.length=m}get(m){const p=this._data[3*m+0],b=2097151&p;return[this._data[3*m+1],2097152&p?this._combined[m]:b?(0,f.stringFromCodePoint)(b):"",p>>22,2097152&p?this._combined[m].charCodeAt(this._combined[m].length-1):b]}set(m,p){this._data[3*m+1]=p[h.CHAR_DATA_ATTR_INDEX],p[h.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[m]=p[1],this._data[3*m+0]=2097152|m|p[h.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*m+0]=p[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|p[h.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(m){return this._data[3*m+0]>>22}hasWidth(m){return 12582912&this._data[3*m+0]}getFg(m){return this._data[3*m+1]}getBg(m){return this._data[3*m+2]}hasContent(m){return 4194303&this._data[3*m+0]}getCodePoint(m){const p=this._data[3*m+0];return 2097152&p?this._combined[m].charCodeAt(this._combined[m].length-1):2097151&p}isCombined(m){return 2097152&this._data[3*m+0]}getString(m){const p=this._data[3*m+0];return 2097152&p?this._combined[m]:2097151&p?(0,f.stringFromCodePoint)(2097151&p):""}isProtected(m){return 536870912&this._data[3*m+2]}loadCell(m,p){return d=3*m,p.content=this._data[d+0],p.fg=this._data[d+1],p.bg=this._data[d+2],2097152&p.content&&(p.combinedData=this._combined[m]),268435456&p.bg&&(p.extended=this._extendedAttrs[m]),p}setCell(m,p){2097152&p.content&&(this._combined[m]=p.combinedData),268435456&p.bg&&(this._extendedAttrs[m]=p.extended),this._data[3*m+0]=p.content,this._data[3*m+1]=p.fg,this._data[3*m+2]=p.bg}setCellFromCodepoint(m,p,b,y){268435456&y.bg&&(this._extendedAttrs[m]=y.extended),this._data[3*m+0]=p|b<<22,this._data[3*m+1]=y.fg,this._data[3*m+2]=y.bg}addCodepointToCell(m,p,b){let y=this._data[3*m+0];2097152&y?this._combined[m]+=(0,f.stringFromCodePoint)(p):2097151&y?(this._combined[m]=(0,f.stringFromCodePoint)(2097151&y)+(0,f.stringFromCodePoint)(p),y&=-2097152,y|=2097152):y=p|4194304,b&&(y&=-12582913,y|=b<<22),this._data[3*m+0]=y}insertCells(m,p,b){if((m%=this.length)&&this.getWidth(m-1)===2&&this.setCellFromCodepoint(m-1,0,1,b),p<this.length-m){const y=new u.CellData;for(let v=this.length-m-p-1;v>=0;--v)this.setCell(m+p+v,this.loadCell(m+v,y));for(let v=0;v<p;++v)this.setCell(m+v,b)}else for(let y=m;y<this.length;++y)this.setCell(y,b);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,b)}deleteCells(m,p,b){if(m%=this.length,p<this.length-m){const y=new u.CellData;for(let v=0;v<this.length-m-p;++v)this.setCell(m+v,this.loadCell(m+p+v,y));for(let v=this.length-p;v<this.length;++v)this.setCell(v,b)}else for(let y=m;y<this.length;++y)this.setCell(y,b);m&&this.getWidth(m-1)===2&&this.setCellFromCodepoint(m-1,0,1,b),this.getWidth(m)!==0||this.hasContent(m)||this.setCellFromCodepoint(m,0,1,b)}replaceCells(m,p,b,y=!1){if(y)for(m&&this.getWidth(m-1)===2&&!this.isProtected(m-1)&&this.setCellFromCodepoint(m-1,0,1,b),p<this.length&&this.getWidth(p-1)===2&&!this.isProtected(p)&&this.setCellFromCodepoint(p,0,1,b);m<p&&m<this.length;)this.isProtected(m)||this.setCell(m,b),m++;else for(m&&this.getWidth(m-1)===2&&this.setCellFromCodepoint(m-1,0,1,b),p<this.length&&this.getWidth(p-1)===2&&this.setCellFromCodepoint(p,0,1,b);m<p&&m<this.length;)this.setCell(m++,b)}resize(m,p){if(m===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const b=3*m;if(m>this.length){if(this._data.buffer.byteLength>=4*b)this._data=new Uint32Array(this._data.buffer,0,b);else{const y=new Uint32Array(b);y.set(this._data),this._data=y}for(let y=this.length;y<m;++y)this.setCell(y,p)}else{this._data=this._data.subarray(0,b);const y=Object.keys(this._combined);for(let w=0;w<y.length;w++){const S=parseInt(y[w],10);S>=m&&delete this._combined[S]}const v=Object.keys(this._extendedAttrs);for(let w=0;w<v.length;w++){const S=parseInt(v[w],10);S>=m&&delete this._extendedAttrs[S]}}return this.length=m,4*b*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const m=new Uint32Array(this._data.length);return m.set(this._data),this._data=m,1}return 0}fill(m,p=!1){if(p)for(let b=0;b<this.length;++b)this.isProtected(b)||this.setCell(b,m);else{this._combined={},this._extendedAttrs={};for(let b=0;b<this.length;++b)this.setCell(b,m)}}copyFrom(m){this.length!==m.length?this._data=new Uint32Array(m._data):this._data.set(m._data),this.length=m.length,this._combined={};for(const p in m._combined)this._combined[p]=m._combined[p];this._extendedAttrs={};for(const p in m._extendedAttrs)this._extendedAttrs[p]=m._extendedAttrs[p];this.isWrapped=m.isWrapped}clone(){const m=new g(0);m._data=new Uint32Array(this._data),m.length=this.length;for(const p in this._combined)m._combined[p]=this._combined[p];for(const p in this._extendedAttrs)m._extendedAttrs[p]=this._extendedAttrs[p];return m.isWrapped=this.isWrapped,m}getTrimmedLength(){for(let m=this.length-1;m>=0;--m)if(4194303&this._data[3*m+0])return m+(this._data[3*m+0]>>22);return 0}getNoBgTrimmedLength(){for(let m=this.length-1;m>=0;--m)if(4194303&this._data[3*m+0]||50331648&this._data[3*m+2])return m+(this._data[3*m+0]>>22);return 0}copyCellsFrom(m,p,b,y,v){const w=m._data;if(v)for(let x=y-1;x>=0;x--){for(let E=0;E<3;E++)this._data[3*(b+x)+E]=w[3*(p+x)+E];268435456&w[3*(p+x)+2]&&(this._extendedAttrs[b+x]=m._extendedAttrs[p+x])}else for(let x=0;x<y;x++){for(let E=0;E<3;E++)this._data[3*(b+x)+E]=w[3*(p+x)+E];268435456&w[3*(p+x)+2]&&(this._extendedAttrs[b+x]=m._extendedAttrs[p+x])}const S=Object.keys(m._combined);for(let x=0;x<S.length;x++){const E=parseInt(S[x],10);E>=p&&(this._combined[E-p+b]=m._combined[E])}}translateToString(m,p,b,y){p=p??0,b=b??this.length,m&&(b=Math.min(b,this.getTrimmedLength())),y&&(y.length=0);let v="";for(;p<b;){const w=this._data[3*p+0],S=2097151&w,x=2097152&w?this._combined[p]:S?(0,f.stringFromCodePoint)(S):h.WHITESPACE_CELL_CHAR;if(v+=x,y)for(let E=0;E<x.length;++E)y.push(p);p+=w>>22||1}return y&&y.push(p),v}}a.BufferLine=g},4841:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getRangeLength=void 0,a.getRangeLength=function(l,c){if(l.start.y>l.end.y)throw new Error(`Buffer range end (${l.end.x}, ${l.end.y}) cannot be before start (${l.start.x}, ${l.start.y})`);return c*(l.end.y-l.start.y)+(l.end.x-l.start.x+1)}},4634:(o,a)=>{function l(c,u,h){if(u===c.length-1)return c[u].getTrimmedLength();const f=!c[u].hasContent(h-1)&&c[u].getWidth(h-1)===1,d=c[u+1].getWidth(0)===2;return f&&d?h-1:h}Object.defineProperty(a,"__esModule",{value:!0}),a.getWrappedLineTrimmedLength=a.reflowSmallerGetNewLineLengths=a.reflowLargerApplyNewLayout=a.reflowLargerCreateNewLayout=a.reflowLargerGetLinesToRemove=void 0,a.reflowLargerGetLinesToRemove=function(c,u,h,f,d){const g=[];for(let _=0;_<c.length-1;_++){let m=_,p=c.get(++m);if(!p.isWrapped)continue;const b=[c.get(_)];for(;m<c.length&&p.isWrapped;)b.push(p),p=c.get(++m);if(f>=_&&f<m){_+=b.length-1;continue}let y=0,v=l(b,y,u),w=1,S=0;for(;w<b.length;){const E=l(b,w,u),T=E-S,k=h-v,B=Math.min(T,k);b[y].copyCellsFrom(b[w],S,v,B,!1),v+=B,v===h&&(y++,v=0),S+=B,S===E&&(w++,S=0),v===0&&y!==0&&b[y-1].getWidth(h-1)===2&&(b[y].copyCellsFrom(b[y-1],h-1,v++,1,!1),b[y-1].setCell(h-1,d))}b[y].replaceCells(v,h,d);let x=0;for(let E=b.length-1;E>0&&(E>y||b[E].getTrimmedLength()===0);E--)x++;x>0&&(g.push(_+b.length-x),g.push(x)),_+=b.length-1}return g},a.reflowLargerCreateNewLayout=function(c,u){const h=[];let f=0,d=u[f],g=0;for(let _=0;_<c.length;_++)if(d===_){const m=u[++f];c.onDeleteEmitter.fire({index:_-g,amount:m}),_+=m-1,g+=m,d=u[++f]}else h.push(_);return{layout:h,countRemoved:g}},a.reflowLargerApplyNewLayout=function(c,u){const h=[];for(let f=0;f<u.length;f++)h.push(c.get(u[f]));for(let f=0;f<h.length;f++)c.set(f,h[f]);c.length=u.length},a.reflowSmallerGetNewLineLengths=function(c,u,h){const f=[],d=c.map((p,b)=>l(c,b,u)).reduce((p,b)=>p+b);let g=0,_=0,m=0;for(;m<d;){if(d-m<h){f.push(d-m);break}g+=h;const p=l(c,_,u);g>p&&(g-=p,_++);const b=c[_].getWidth(g-1)===2;b&&g--;const y=b?h-1:h;f.push(y),m+=y}return f},a.getWrappedLineTrimmedLength=l},5295:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferSet=void 0;const c=l(8460),u=l(844),h=l(9092);class f extends u.Disposable{constructor(g,_){super(),this._optionsService=g,this._bufferService=_,this._onBufferActivate=this.register(new c.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new h.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new h.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(g){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(g),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(g,_){this._normal.resize(g,_),this._alt.resize(g,_),this.setupTabStops(g)}setupTabStops(g){this._normal.setupTabStops(g),this._alt.setupTabStops(g)}}a.BufferSet=f},511:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CellData=void 0;const c=l(482),u=l(643),h=l(3734);class f extends h.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new h.ExtendedAttrs,this.combinedData=""}static fromCharData(g){const _=new f;return _.setFromCharData(g),_}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,c.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(g){this.fg=g[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let _=!1;if(g[u.CHAR_DATA_CHAR_INDEX].length>2)_=!0;else if(g[u.CHAR_DATA_CHAR_INDEX].length===2){const m=g[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=m&&m<=56319){const p=g[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=p&&p<=57343?this.content=1024*(m-55296)+p-56320+65536|g[u.CHAR_DATA_WIDTH_INDEX]<<22:_=!0}else _=!0}else this.content=g[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|g[u.CHAR_DATA_WIDTH_INDEX]<<22;_&&(this.combinedData=g[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|g[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}a.CellData=f},643:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WHITESPACE_CELL_CODE=a.WHITESPACE_CELL_WIDTH=a.WHITESPACE_CELL_CHAR=a.NULL_CELL_CODE=a.NULL_CELL_WIDTH=a.NULL_CELL_CHAR=a.CHAR_DATA_CODE_INDEX=a.CHAR_DATA_WIDTH_INDEX=a.CHAR_DATA_CHAR_INDEX=a.CHAR_DATA_ATTR_INDEX=a.DEFAULT_EXT=a.DEFAULT_ATTR=a.DEFAULT_COLOR=void 0,a.DEFAULT_COLOR=0,a.DEFAULT_ATTR=256|a.DEFAULT_COLOR<<9,a.DEFAULT_EXT=0,a.CHAR_DATA_ATTR_INDEX=0,a.CHAR_DATA_CHAR_INDEX=1,a.CHAR_DATA_WIDTH_INDEX=2,a.CHAR_DATA_CODE_INDEX=3,a.NULL_CELL_CHAR="",a.NULL_CELL_WIDTH=1,a.NULL_CELL_CODE=0,a.WHITESPACE_CELL_CHAR=" ",a.WHITESPACE_CELL_WIDTH=1,a.WHITESPACE_CELL_CODE=32},4863:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Marker=void 0;const c=l(8460),u=l(844);class h{get id(){return this._id}constructor(d){this.line=d,this.isDisposed=!1,this._disposables=[],this._id=h._nextId++,this._onDispose=this.register(new c.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,u.disposeArray)(this._disposables),this._disposables.length=0)}register(d){return this._disposables.push(d),d}}a.Marker=h,h._nextId=1},7116:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DEFAULT_CHARSET=a.CHARSETS=void 0,a.CHARSETS={},a.DEFAULT_CHARSET=a.CHARSETS.B,a.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},a.CHARSETS.A={"#":""},a.CHARSETS.B=void 0,a.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},a.CHARSETS.C=a.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},a.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},a.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.E=a.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},a.CHARSETS.H=a.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(o,a)=>{var l,c,u;Object.defineProperty(a,"__esModule",{value:!0}),a.C1_ESCAPED=a.C1=a.C0=void 0,function(h){h.NUL="\0",h.SOH="",h.STX="",h.ETX="",h.EOT="",h.ENQ="",h.ACK="",h.BEL="\x07",h.BS="\b",h.HT="	",h.LF=`
`,h.VT="\v",h.FF="\f",h.CR="\r",h.SO="",h.SI="",h.DLE="",h.DC1="",h.DC2="",h.DC3="",h.DC4="",h.NAK="",h.SYN="",h.ETB="",h.CAN="",h.EM="",h.SUB="",h.ESC="\x1B",h.FS="",h.GS="",h.RS="",h.US="",h.SP=" ",h.DEL=""}(l||(a.C0=l={})),function(h){h.PAD="",h.HOP="",h.BPH="",h.NBH="",h.IND="",h.NEL="",h.SSA="",h.ESA="",h.HTS="",h.HTJ="",h.VTS="",h.PLD="",h.PLU="",h.RI="",h.SS2="",h.SS3="",h.DCS="",h.PU1="",h.PU2="",h.STS="",h.CCH="",h.MW="",h.SPA="",h.EPA="",h.SOS="",h.SGCI="",h.SCI="",h.CSI="",h.ST="",h.OSC="",h.PM="",h.APC=""}(c||(a.C1=c={})),function(h){h.ST=`${l.ESC}\\`}(u||(a.C1_ESCAPED=u={}))},7399:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.evaluateKeyboardEvent=void 0;const c=l(2584),u={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};a.evaluateKeyboardEvent=function(h,f,d,g){const _={type:0,cancel:!1,key:void 0},m=(h.shiftKey?1:0)|(h.altKey?2:0)|(h.ctrlKey?4:0)|(h.metaKey?8:0);switch(h.keyCode){case 0:h.key==="UIKeyInputUpArrow"?_.key=f?c.C0.ESC+"OA":c.C0.ESC+"[A":h.key==="UIKeyInputLeftArrow"?_.key=f?c.C0.ESC+"OD":c.C0.ESC+"[D":h.key==="UIKeyInputRightArrow"?_.key=f?c.C0.ESC+"OC":c.C0.ESC+"[C":h.key==="UIKeyInputDownArrow"&&(_.key=f?c.C0.ESC+"OB":c.C0.ESC+"[B");break;case 8:_.key=h.ctrlKey?"\b":c.C0.DEL,h.altKey&&(_.key=c.C0.ESC+_.key);break;case 9:if(h.shiftKey){_.key=c.C0.ESC+"[Z";break}_.key=c.C0.HT,_.cancel=!0;break;case 13:_.key=h.altKey?c.C0.ESC+c.C0.CR:c.C0.CR,_.cancel=!0;break;case 27:_.key=c.C0.ESC,h.altKey&&(_.key=c.C0.ESC+c.C0.ESC),_.cancel=!0;break;case 37:if(h.metaKey)break;m?(_.key=c.C0.ESC+"[1;"+(m+1)+"D",_.key===c.C0.ESC+"[1;3D"&&(_.key=c.C0.ESC+(d?"b":"[1;5D"))):_.key=f?c.C0.ESC+"OD":c.C0.ESC+"[D";break;case 39:if(h.metaKey)break;m?(_.key=c.C0.ESC+"[1;"+(m+1)+"C",_.key===c.C0.ESC+"[1;3C"&&(_.key=c.C0.ESC+(d?"f":"[1;5C"))):_.key=f?c.C0.ESC+"OC":c.C0.ESC+"[C";break;case 38:if(h.metaKey)break;m?(_.key=c.C0.ESC+"[1;"+(m+1)+"A",d||_.key!==c.C0.ESC+"[1;3A"||(_.key=c.C0.ESC+"[1;5A")):_.key=f?c.C0.ESC+"OA":c.C0.ESC+"[A";break;case 40:if(h.metaKey)break;m?(_.key=c.C0.ESC+"[1;"+(m+1)+"B",d||_.key!==c.C0.ESC+"[1;3B"||(_.key=c.C0.ESC+"[1;5B")):_.key=f?c.C0.ESC+"OB":c.C0.ESC+"[B";break;case 45:h.shiftKey||h.ctrlKey||(_.key=c.C0.ESC+"[2~");break;case 46:_.key=m?c.C0.ESC+"[3;"+(m+1)+"~":c.C0.ESC+"[3~";break;case 36:_.key=m?c.C0.ESC+"[1;"+(m+1)+"H":f?c.C0.ESC+"OH":c.C0.ESC+"[H";break;case 35:_.key=m?c.C0.ESC+"[1;"+(m+1)+"F":f?c.C0.ESC+"OF":c.C0.ESC+"[F";break;case 33:h.shiftKey?_.type=2:h.ctrlKey?_.key=c.C0.ESC+"[5;"+(m+1)+"~":_.key=c.C0.ESC+"[5~";break;case 34:h.shiftKey?_.type=3:h.ctrlKey?_.key=c.C0.ESC+"[6;"+(m+1)+"~":_.key=c.C0.ESC+"[6~";break;case 112:_.key=m?c.C0.ESC+"[1;"+(m+1)+"P":c.C0.ESC+"OP";break;case 113:_.key=m?c.C0.ESC+"[1;"+(m+1)+"Q":c.C0.ESC+"OQ";break;case 114:_.key=m?c.C0.ESC+"[1;"+(m+1)+"R":c.C0.ESC+"OR";break;case 115:_.key=m?c.C0.ESC+"[1;"+(m+1)+"S":c.C0.ESC+"OS";break;case 116:_.key=m?c.C0.ESC+"[15;"+(m+1)+"~":c.C0.ESC+"[15~";break;case 117:_.key=m?c.C0.ESC+"[17;"+(m+1)+"~":c.C0.ESC+"[17~";break;case 118:_.key=m?c.C0.ESC+"[18;"+(m+1)+"~":c.C0.ESC+"[18~";break;case 119:_.key=m?c.C0.ESC+"[19;"+(m+1)+"~":c.C0.ESC+"[19~";break;case 120:_.key=m?c.C0.ESC+"[20;"+(m+1)+"~":c.C0.ESC+"[20~";break;case 121:_.key=m?c.C0.ESC+"[21;"+(m+1)+"~":c.C0.ESC+"[21~";break;case 122:_.key=m?c.C0.ESC+"[23;"+(m+1)+"~":c.C0.ESC+"[23~";break;case 123:_.key=m?c.C0.ESC+"[24;"+(m+1)+"~":c.C0.ESC+"[24~";break;default:if(!h.ctrlKey||h.shiftKey||h.altKey||h.metaKey)if(d&&!g||!h.altKey||h.metaKey)!d||h.altKey||h.ctrlKey||h.shiftKey||!h.metaKey?h.key&&!h.ctrlKey&&!h.altKey&&!h.metaKey&&h.keyCode>=48&&h.key.length===1?_.key=h.key:h.key&&h.ctrlKey&&(h.key==="_"&&(_.key=c.C0.US),h.key==="@"&&(_.key=c.C0.NUL)):h.keyCode===65&&(_.type=1);else{const p=u[h.keyCode],b=p?.[h.shiftKey?1:0];if(b)_.key=c.C0.ESC+b;else if(h.keyCode>=65&&h.keyCode<=90){const y=h.ctrlKey?h.keyCode-64:h.keyCode+32;let v=String.fromCharCode(y);h.shiftKey&&(v=v.toUpperCase()),_.key=c.C0.ESC+v}else if(h.keyCode===32)_.key=c.C0.ESC+(h.ctrlKey?c.C0.NUL:" ");else if(h.key==="Dead"&&h.code.startsWith("Key")){let y=h.code.slice(3,4);h.shiftKey||(y=y.toLowerCase()),_.key=c.C0.ESC+y,_.cancel=!0}}else h.keyCode>=65&&h.keyCode<=90?_.key=String.fromCharCode(h.keyCode-64):h.keyCode===32?_.key=c.C0.NUL:h.keyCode>=51&&h.keyCode<=55?_.key=String.fromCharCode(h.keyCode-51+27):h.keyCode===56?_.key=c.C0.DEL:h.keyCode===219?_.key=c.C0.ESC:h.keyCode===220?_.key=c.C0.FS:h.keyCode===221&&(_.key=c.C0.GS)}return _}},482:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Utf8ToUtf32=a.StringToUtf32=a.utf32ToString=a.stringFromCodePoint=void 0,a.stringFromCodePoint=function(l){return l>65535?(l-=65536,String.fromCharCode(55296+(l>>10))+String.fromCharCode(l%1024+56320)):String.fromCharCode(l)},a.utf32ToString=function(l,c=0,u=l.length){let h="";for(let f=c;f<u;++f){let d=l[f];d>65535?(d-=65536,h+=String.fromCharCode(55296+(d>>10))+String.fromCharCode(d%1024+56320)):h+=String.fromCharCode(d)}return h},a.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(l,c){const u=l.length;if(!u)return 0;let h=0,f=0;if(this._interim){const d=l.charCodeAt(f++);56320<=d&&d<=57343?c[h++]=1024*(this._interim-55296)+d-56320+65536:(c[h++]=this._interim,c[h++]=d),this._interim=0}for(let d=f;d<u;++d){const g=l.charCodeAt(d);if(55296<=g&&g<=56319){if(++d>=u)return this._interim=g,h;const _=l.charCodeAt(d);56320<=_&&_<=57343?c[h++]=1024*(g-55296)+_-56320+65536:(c[h++]=g,c[h++]=_)}else g!==65279&&(c[h++]=g)}return h}},a.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(l,c){const u=l.length;if(!u)return 0;let h,f,d,g,_=0,m=0,p=0;if(this.interim[0]){let v=!1,w=this.interim[0];w&=(224&w)==192?31:(240&w)==224?15:7;let S,x=0;for(;(S=63&this.interim[++x])&&x<4;)w<<=6,w|=S;const E=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,T=E-x;for(;p<T;){if(p>=u)return 0;if(S=l[p++],(192&S)!=128){p--,v=!0;break}this.interim[x++]=S,w<<=6,w|=63&S}v||(E===2?w<128?p--:c[_++]=w:E===3?w<2048||w>=55296&&w<=57343||w===65279||(c[_++]=w):w<65536||w>1114111||(c[_++]=w)),this.interim.fill(0)}const b=u-4;let y=p;for(;y<u;){for(;!(!(y<b)||128&(h=l[y])||128&(f=l[y+1])||128&(d=l[y+2])||128&(g=l[y+3]));)c[_++]=h,c[_++]=f,c[_++]=d,c[_++]=g,y+=4;if(h=l[y++],h<128)c[_++]=h;else if((224&h)==192){if(y>=u)return this.interim[0]=h,_;if(f=l[y++],(192&f)!=128){y--;continue}if(m=(31&h)<<6|63&f,m<128){y--;continue}c[_++]=m}else if((240&h)==224){if(y>=u)return this.interim[0]=h,_;if(f=l[y++],(192&f)!=128){y--;continue}if(y>=u)return this.interim[0]=h,this.interim[1]=f,_;if(d=l[y++],(192&d)!=128){y--;continue}if(m=(15&h)<<12|(63&f)<<6|63&d,m<2048||m>=55296&&m<=57343||m===65279)continue;c[_++]=m}else if((248&h)==240){if(y>=u)return this.interim[0]=h,_;if(f=l[y++],(192&f)!=128){y--;continue}if(y>=u)return this.interim[0]=h,this.interim[1]=f,_;if(d=l[y++],(192&d)!=128){y--;continue}if(y>=u)return this.interim[0]=h,this.interim[1]=f,this.interim[2]=d,_;if(g=l[y++],(192&g)!=128){y--;continue}if(m=(7&h)<<18|(63&f)<<12|(63&d)<<6|63&g,m<65536||m>1114111)continue;c[_++]=m}}return _}}},225:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeV6=void 0;const c=l(1480),u=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let f;a.UnicodeV6=class{constructor(){if(this.version="6",!f){f=new Uint8Array(65536),f.fill(1),f[0]=0,f.fill(0,1,32),f.fill(0,127,160),f.fill(2,4352,4448),f[9001]=2,f[9002]=2,f.fill(2,11904,42192),f[12351]=1,f.fill(2,44032,55204),f.fill(2,63744,64256),f.fill(2,65040,65050),f.fill(2,65072,65136),f.fill(2,65280,65377),f.fill(2,65504,65511);for(let d=0;d<u.length;++d)f.fill(0,u[d][0],u[d][1]+1)}}wcwidth(d){return d<32?0:d<127?1:d<65536?f[d]:function(g,_){let m,p=0,b=_.length-1;if(g<_[0][0]||g>_[b][1])return!1;for(;b>=p;)if(m=p+b>>1,g>_[m][1])p=m+1;else{if(!(g<_[m][0]))return!0;b=m-1}return!1}(d,h)?0:d>=131072&&d<=196605||d>=196608&&d<=262141?2:1}charProperties(d,g){let _=this.wcwidth(d),m=_===0&&g!==0;if(m){const p=c.UnicodeService.extractWidth(g);p===0?m=!1:p>_&&(_=p)}return c.UnicodeService.createPropertyValue(0,_,m)}}},5981:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WriteBuffer=void 0;const c=l(8460),u=l(844);class h extends u.Disposable{constructor(d){super(),this._action=d,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(d,g){if(g!==void 0&&this._syncCalls>g)return void(this._syncCalls=0);if(this._pendingData+=d.length,this._writeBuffer.push(d),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let _;for(this._isSyncWriting=!0;_=this._writeBuffer.shift();){this._action(_);const m=this._callbacks.shift();m&&m()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(d,g){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=d.length,this._writeBuffer.push(d),this._callbacks.push(g),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=d.length,this._writeBuffer.push(d),this._callbacks.push(g)}_innerWrite(d=0,g=!0){const _=d||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const m=this._writeBuffer[this._bufferOffset],p=this._action(m,g);if(p){const y=v=>Date.now()-_>=12?setTimeout(()=>this._innerWrite(0,v)):this._innerWrite(_,v);return void p.catch(v=>(queueMicrotask(()=>{throw v}),Promise.resolve(!1))).then(y)}const b=this._callbacks[this._bufferOffset];if(b&&b(),this._bufferOffset++,this._pendingData-=m.length,Date.now()-_>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}a.WriteBuffer=h},5941:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.toRgbString=a.parseColor=void 0;const l=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,c=/^[\da-f]+$/;function u(h,f){const d=h.toString(16),g=d.length<2?"0"+d:d;switch(f){case 4:return d[0];case 8:return g;case 12:return(g+g).slice(0,3);default:return g+g}}a.parseColor=function(h){if(!h)return;let f=h.toLowerCase();if(f.indexOf("rgb:")===0){f=f.slice(4);const d=l.exec(f);if(d){const g=d[1]?15:d[4]?255:d[7]?4095:65535;return[Math.round(parseInt(d[1]||d[4]||d[7]||d[10],16)/g*255),Math.round(parseInt(d[2]||d[5]||d[8]||d[11],16)/g*255),Math.round(parseInt(d[3]||d[6]||d[9]||d[12],16)/g*255)]}}else if(f.indexOf("#")===0&&(f=f.slice(1),c.exec(f)&&[3,6,9,12].includes(f.length))){const d=f.length/3,g=[0,0,0];for(let _=0;_<3;++_){const m=parseInt(f.slice(d*_,d*_+d),16);g[_]=d===1?m<<4:d===2?m:d===3?m>>4:m>>8}return g}},a.toRgbString=function(h,f=16){const[d,g,_]=h;return`rgb:${u(d,f)}/${u(g,f)}/${u(_,f)}`}},5770:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PAYLOAD_LIMIT=void 0,a.PAYLOAD_LIMIT=1e7},6351:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DcsHandler=a.DcsParser=void 0;const c=l(482),u=l(8742),h=l(5770),f=[];a.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=f,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=f}registerHandler(g,_){this._handlers[g]===void 0&&(this._handlers[g]=[]);const m=this._handlers[g];return m.push(_),{dispose:()=>{const p=m.indexOf(_);p!==-1&&m.splice(p,1)}}}clearHandler(g){this._handlers[g]&&delete this._handlers[g]}setHandlerFallback(g){this._handlerFb=g}reset(){if(this._active.length)for(let g=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;g>=0;--g)this._active[g].unhook(!1);this._stack.paused=!1,this._active=f,this._ident=0}hook(g,_){if(this.reset(),this._ident=g,this._active=this._handlers[g]||f,this._active.length)for(let m=this._active.length-1;m>=0;m--)this._active[m].hook(_);else this._handlerFb(this._ident,"HOOK",_)}put(g,_,m){if(this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].put(g,_,m);else this._handlerFb(this._ident,"PUT",(0,c.utf32ToString)(g,_,m))}unhook(g,_=!0){if(this._active.length){let m=!1,p=this._active.length-1,b=!1;if(this._stack.paused&&(p=this._stack.loopPosition-1,m=_,b=this._stack.fallThrough,this._stack.paused=!1),!b&&m===!1){for(;p>=0&&(m=this._active[p].unhook(g),m!==!0);p--)if(m instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=p,this._stack.fallThrough=!1,m;p--}for(;p>=0;p--)if(m=this._active[p].unhook(!1),m instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=p,this._stack.fallThrough=!0,m}else this._handlerFb(this._ident,"UNHOOK",g);this._active=f,this._ident=0}};const d=new u.Params;d.addParam(0),a.DcsHandler=class{constructor(g){this._handler=g,this._data="",this._params=d,this._hitLimit=!1}hook(g){this._params=g.length>1||g.params[0]?g.clone():d,this._data="",this._hitLimit=!1}put(g,_,m){this._hitLimit||(this._data+=(0,c.utf32ToString)(g,_,m),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(g){let _=!1;if(this._hitLimit)_=!1;else if(g&&(_=this._handler(this._data,this._params),_ instanceof Promise))return _.then(m=>(this._params=d,this._data="",this._hitLimit=!1,m));return this._params=d,this._data="",this._hitLimit=!1,_}}},2015:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.EscapeSequenceParser=a.VT500_TRANSITION_TABLE=a.TransitionTable=void 0;const c=l(844),u=l(8742),h=l(6242),f=l(6351);class d{constructor(p){this.table=new Uint8Array(p)}setDefault(p,b){this.table.fill(p<<4|b)}add(p,b,y,v){this.table[b<<8|p]=y<<4|v}addMany(p,b,y,v){for(let w=0;w<p.length;w++)this.table[b<<8|p[w]]=y<<4|v}}a.TransitionTable=d;const g=160;a.VT500_TRANSITION_TABLE=function(){const m=new d(4095),p=Array.apply(null,Array(256)).map((x,E)=>E),b=(x,E)=>p.slice(x,E),y=b(32,127),v=b(0,24);v.push(25),v.push.apply(v,b(28,32));const w=b(0,14);let S;for(S in m.setDefault(1,0),m.addMany(y,0,2,0),w)m.addMany([24,26,153,154],S,3,0),m.addMany(b(128,144),S,3,0),m.addMany(b(144,152),S,3,0),m.add(156,S,0,0),m.add(27,S,11,1),m.add(157,S,4,8),m.addMany([152,158,159],S,0,7),m.add(155,S,11,3),m.add(144,S,11,9);return m.addMany(v,0,3,0),m.addMany(v,1,3,1),m.add(127,1,0,1),m.addMany(v,8,0,8),m.addMany(v,3,3,3),m.add(127,3,0,3),m.addMany(v,4,3,4),m.add(127,4,0,4),m.addMany(v,6,3,6),m.addMany(v,5,3,5),m.add(127,5,0,5),m.addMany(v,2,3,2),m.add(127,2,0,2),m.add(93,1,4,8),m.addMany(y,8,5,8),m.add(127,8,5,8),m.addMany([156,27,24,26,7],8,6,0),m.addMany(b(28,32),8,0,8),m.addMany([88,94,95],1,0,7),m.addMany(y,7,0,7),m.addMany(v,7,0,7),m.add(156,7,0,0),m.add(127,7,0,7),m.add(91,1,11,3),m.addMany(b(64,127),3,7,0),m.addMany(b(48,60),3,8,4),m.addMany([60,61,62,63],3,9,4),m.addMany(b(48,60),4,8,4),m.addMany(b(64,127),4,7,0),m.addMany([60,61,62,63],4,0,6),m.addMany(b(32,64),6,0,6),m.add(127,6,0,6),m.addMany(b(64,127),6,0,0),m.addMany(b(32,48),3,9,5),m.addMany(b(32,48),5,9,5),m.addMany(b(48,64),5,0,6),m.addMany(b(64,127),5,7,0),m.addMany(b(32,48),4,9,5),m.addMany(b(32,48),1,9,2),m.addMany(b(32,48),2,9,2),m.addMany(b(48,127),2,10,0),m.addMany(b(48,80),1,10,0),m.addMany(b(81,88),1,10,0),m.addMany([89,90,92],1,10,0),m.addMany(b(96,127),1,10,0),m.add(80,1,11,9),m.addMany(v,9,0,9),m.add(127,9,0,9),m.addMany(b(28,32),9,0,9),m.addMany(b(32,48),9,9,12),m.addMany(b(48,60),9,8,10),m.addMany([60,61,62,63],9,9,10),m.addMany(v,11,0,11),m.addMany(b(32,128),11,0,11),m.addMany(b(28,32),11,0,11),m.addMany(v,10,0,10),m.add(127,10,0,10),m.addMany(b(28,32),10,0,10),m.addMany(b(48,60),10,8,10),m.addMany([60,61,62,63],10,0,11),m.addMany(b(32,48),10,9,12),m.addMany(v,12,0,12),m.add(127,12,0,12),m.addMany(b(28,32),12,0,12),m.addMany(b(32,48),12,9,12),m.addMany(b(48,64),12,0,11),m.addMany(b(64,127),12,12,13),m.addMany(b(64,127),10,12,13),m.addMany(b(64,127),9,12,13),m.addMany(v,13,13,13),m.addMany(y,13,13,13),m.add(127,13,0,13),m.addMany([27,156,24,26],13,14,0),m.add(g,0,2,0),m.add(g,8,5,8),m.add(g,6,0,6),m.add(g,11,0,11),m.add(g,13,13,13),m}();class _ extends c.Disposable{constructor(p=a.VT500_TRANSITION_TABLE){super(),this._transitions=p,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new u.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(b,y,v)=>{},this._executeHandlerFb=b=>{},this._csiHandlerFb=(b,y)=>{},this._escHandlerFb=b=>{},this._errorHandlerFb=b=>b,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,c.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new h.OscParser),this._dcsParser=this.register(new f.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(p,b=[64,126]){let y=0;if(p.prefix){if(p.prefix.length>1)throw new Error("only one byte as prefix supported");if(y=p.prefix.charCodeAt(0),y&&60>y||y>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(p.intermediates){if(p.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let w=0;w<p.intermediates.length;++w){const S=p.intermediates.charCodeAt(w);if(32>S||S>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");y<<=8,y|=S}}if(p.final.length!==1)throw new Error("final must be a single byte");const v=p.final.charCodeAt(0);if(b[0]>v||v>b[1])throw new Error(`final must be in range ${b[0]} .. ${b[1]}`);return y<<=8,y|=v,y}identToString(p){const b=[];for(;p;)b.push(String.fromCharCode(255&p)),p>>=8;return b.reverse().join("")}setPrintHandler(p){this._printHandler=p}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(p,b){const y=this._identifier(p,[48,126]);this._escHandlers[y]===void 0&&(this._escHandlers[y]=[]);const v=this._escHandlers[y];return v.push(b),{dispose:()=>{const w=v.indexOf(b);w!==-1&&v.splice(w,1)}}}clearEscHandler(p){this._escHandlers[this._identifier(p,[48,126])]&&delete this._escHandlers[this._identifier(p,[48,126])]}setEscHandlerFallback(p){this._escHandlerFb=p}setExecuteHandler(p,b){this._executeHandlers[p.charCodeAt(0)]=b}clearExecuteHandler(p){this._executeHandlers[p.charCodeAt(0)]&&delete this._executeHandlers[p.charCodeAt(0)]}setExecuteHandlerFallback(p){this._executeHandlerFb=p}registerCsiHandler(p,b){const y=this._identifier(p);this._csiHandlers[y]===void 0&&(this._csiHandlers[y]=[]);const v=this._csiHandlers[y];return v.push(b),{dispose:()=>{const w=v.indexOf(b);w!==-1&&v.splice(w,1)}}}clearCsiHandler(p){this._csiHandlers[this._identifier(p)]&&delete this._csiHandlers[this._identifier(p)]}setCsiHandlerFallback(p){this._csiHandlerFb=p}registerDcsHandler(p,b){return this._dcsParser.registerHandler(this._identifier(p),b)}clearDcsHandler(p){this._dcsParser.clearHandler(this._identifier(p))}setDcsHandlerFallback(p){this._dcsParser.setHandlerFallback(p)}registerOscHandler(p,b){return this._oscParser.registerHandler(p,b)}clearOscHandler(p){this._oscParser.clearHandler(p)}setOscHandlerFallback(p){this._oscParser.setHandlerFallback(p)}setErrorHandler(p){this._errorHandler=p}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(p,b,y,v,w){this._parseStack.state=p,this._parseStack.handlers=b,this._parseStack.handlerPos=y,this._parseStack.transition=v,this._parseStack.chunkPos=w}parse(p,b,y){let v,w=0,S=0,x=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,x=this._parseStack.chunkPos+1;else{if(y===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const E=this._parseStack.handlers;let T=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(y===!1&&T>-1){for(;T>=0&&(v=E[T](this._params),v!==!0);T--)if(v instanceof Promise)return this._parseStack.handlerPos=T,v}this._parseStack.handlers=[];break;case 4:if(y===!1&&T>-1){for(;T>=0&&(v=E[T](),v!==!0);T--)if(v instanceof Promise)return this._parseStack.handlerPos=T,v}this._parseStack.handlers=[];break;case 6:if(w=p[this._parseStack.chunkPos],v=this._dcsParser.unhook(w!==24&&w!==26,y),v)return v;w===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(w=p[this._parseStack.chunkPos],v=this._oscParser.end(w!==24&&w!==26,y),v)return v;w===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,x=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let E=x;E<b;++E){switch(w=p[E],S=this._transitions.table[this.currentState<<8|(w<160?w:g)],S>>4){case 2:for(let O=E+1;;++O){if(O>=b||(w=p[O])<32||w>126&&w<g){this._printHandler(p,E,O),E=O-1;break}if(++O>=b||(w=p[O])<32||w>126&&w<g){this._printHandler(p,E,O),E=O-1;break}if(++O>=b||(w=p[O])<32||w>126&&w<g){this._printHandler(p,E,O),E=O-1;break}if(++O>=b||(w=p[O])<32||w>126&&w<g){this._printHandler(p,E,O),E=O-1;break}}break;case 3:this._executeHandlers[w]?this._executeHandlers[w]():this._executeHandlerFb(w),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:E,code:w,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const T=this._csiHandlers[this._collect<<8|w];let k=T?T.length-1:-1;for(;k>=0&&(v=T[k](this._params),v!==!0);k--)if(v instanceof Promise)return this._preserveStack(3,T,k,S,E),v;k<0&&this._csiHandlerFb(this._collect<<8|w,this._params),this.precedingJoinState=0;break;case 8:do switch(w){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(w-48)}while(++E<b&&(w=p[E])>47&&w<60);E--;break;case 9:this._collect<<=8,this._collect|=w;break;case 10:const B=this._escHandlers[this._collect<<8|w];let P=B?B.length-1:-1;for(;P>=0&&(v=B[P](),v!==!0);P--)if(v instanceof Promise)return this._preserveStack(4,B,P,S,E),v;P<0&&this._escHandlerFb(this._collect<<8|w),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|w,this._params);break;case 13:for(let O=E+1;;++O)if(O>=b||(w=p[O])===24||w===26||w===27||w>127&&w<g){this._dcsParser.put(p,E,O),E=O-1;break}break;case 14:if(v=this._dcsParser.unhook(w!==24&&w!==26),v)return this._preserveStack(6,[],0,S,E),v;w===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let O=E+1;;O++)if(O>=b||(w=p[O])<32||w>127&&w<g){this._oscParser.put(p,E,O),E=O-1;break}break;case 6:if(v=this._oscParser.end(w!==24&&w!==26),v)return this._preserveStack(5,[],0,S,E),v;w===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&S}}}a.EscapeSequenceParser=_},6242:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OscHandler=a.OscParser=void 0;const c=l(5770),u=l(482),h=[];a.OscParser=class{constructor(){this._state=0,this._active=h,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(f,d){this._handlers[f]===void 0&&(this._handlers[f]=[]);const g=this._handlers[f];return g.push(d),{dispose:()=>{const _=g.indexOf(d);_!==-1&&g.splice(_,1)}}}clearHandler(f){this._handlers[f]&&delete this._handlers[f]}setHandlerFallback(f){this._handlerFb=f}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=h}reset(){if(this._state===2)for(let f=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;f>=0;--f)this._active[f].end(!1);this._stack.paused=!1,this._active=h,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||h,this._active.length)for(let f=this._active.length-1;f>=0;f--)this._active[f].start();else this._handlerFb(this._id,"START")}_put(f,d,g){if(this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].put(f,d,g);else this._handlerFb(this._id,"PUT",(0,u.utf32ToString)(f,d,g))}start(){this.reset(),this._state=1}put(f,d,g){if(this._state!==3){if(this._state===1)for(;d<g;){const _=f[d++];if(_===59){this._state=2,this._start();break}if(_<48||57<_)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+_-48}this._state===2&&g-d>0&&this._put(f,d,g)}}end(f,d=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let g=!1,_=this._active.length-1,m=!1;if(this._stack.paused&&(_=this._stack.loopPosition-1,g=d,m=this._stack.fallThrough,this._stack.paused=!1),!m&&g===!1){for(;_>=0&&(g=this._active[_].end(f),g!==!0);_--)if(g instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!1,g;_--}for(;_>=0;_--)if(g=this._active[_].end(!1),g instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!0,g}else this._handlerFb(this._id,"END",f);this._active=h,this._id=-1,this._state=0}}},a.OscHandler=class{constructor(f){this._handler=f,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(f,d,g){this._hitLimit||(this._data+=(0,u.utf32ToString)(f,d,g),this._data.length>c.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(f){let d=!1;if(this._hitLimit)d=!1;else if(f&&(d=this._handler(this._data),d instanceof Promise))return d.then(g=>(this._data="",this._hitLimit=!1,g));return this._data="",this._hitLimit=!1,d}}},8742:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Params=void 0;const l=2147483647;class c{static fromArray(h){const f=new c;if(!h.length)return f;for(let d=Array.isArray(h[0])?1:0;d<h.length;++d){const g=h[d];if(Array.isArray(g))for(let _=0;_<g.length;++_)f.addSubParam(g[_]);else f.addParam(g)}return f}constructor(h=32,f=32){if(this.maxLength=h,this.maxSubParamsLength=f,f>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(h),this.length=0,this._subParams=new Int32Array(f),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(h),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const h=new c(this.maxLength,this.maxSubParamsLength);return h.params.set(this.params),h.length=this.length,h._subParams.set(this._subParams),h._subParamsLength=this._subParamsLength,h._subParamsIdx.set(this._subParamsIdx),h._rejectDigits=this._rejectDigits,h._rejectSubDigits=this._rejectSubDigits,h._digitIsSub=this._digitIsSub,h}toArray(){const h=[];for(let f=0;f<this.length;++f){h.push(this.params[f]);const d=this._subParamsIdx[f]>>8,g=255&this._subParamsIdx[f];g-d>0&&h.push(Array.prototype.slice.call(this._subParams,d,g))}return h}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(h){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=h>l?l:h}}addSubParam(h){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=h>l?l:h,this._subParamsIdx[this.length-1]++}}hasSubParams(h){return(255&this._subParamsIdx[h])-(this._subParamsIdx[h]>>8)>0}getSubParams(h){const f=this._subParamsIdx[h]>>8,d=255&this._subParamsIdx[h];return d-f>0?this._subParams.subarray(f,d):null}getSubParamsAll(){const h={};for(let f=0;f<this.length;++f){const d=this._subParamsIdx[f]>>8,g=255&this._subParamsIdx[f];g-d>0&&(h[f]=this._subParams.slice(d,g))}return h}addDigit(h){let f;if(this._rejectDigits||!(f=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const d=this._digitIsSub?this._subParams:this.params,g=d[f-1];d[f-1]=~g?Math.min(10*g+h,l):h}}a.Params=c},5741:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AddonManager=void 0,a.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let l=this._addons.length-1;l>=0;l--)this._addons[l].instance.dispose()}loadAddon(l,c){const u={instance:c,dispose:c.dispose,isDisposed:!1};this._addons.push(u),c.dispose=()=>this._wrappedAddonDispose(u),c.activate(l)}_wrappedAddonDispose(l){if(l.isDisposed)return;let c=-1;for(let u=0;u<this._addons.length;u++)if(this._addons[u]===l){c=u;break}if(c===-1)throw new Error("Could not dispose an addon that has not been loaded");l.isDisposed=!0,l.dispose.apply(l.instance),this._addons.splice(c,1)}}},8771:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferApiView=void 0;const c=l(3785),u=l(511);a.BufferApiView=class{constructor(h,f){this._buffer=h,this.type=f}init(h){return this._buffer=h,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(h){const f=this._buffer.lines.get(h);if(f)return new c.BufferLineApiView(f)}getNullCell(){return new u.CellData}}},3785:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLineApiView=void 0;const c=l(511);a.BufferLineApiView=class{constructor(u){this._line=u}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(u,h){if(!(u<0||u>=this._line.length))return h?(this._line.loadCell(u,h),h):this._line.loadCell(u,new c.CellData)}translateToString(u,h,f){return this._line.translateToString(u,h,f)}}},8285:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferNamespaceApi=void 0;const c=l(8771),u=l(8460),h=l(844);class f extends h.Disposable{constructor(g){super(),this._core=g,this._onBufferChange=this.register(new u.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new c.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new c.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}a.BufferNamespaceApi=f},7975:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ParserApi=void 0,a.ParserApi=class{constructor(l){this._core=l}registerCsiHandler(l,c){return this._core.registerCsiHandler(l,u=>c(u.toArray()))}addCsiHandler(l,c){return this.registerCsiHandler(l,c)}registerDcsHandler(l,c){return this._core.registerDcsHandler(l,(u,h)=>c(u,h.toArray()))}addDcsHandler(l,c){return this.registerDcsHandler(l,c)}registerEscHandler(l,c){return this._core.registerEscHandler(l,c)}addEscHandler(l,c){return this.registerEscHandler(l,c)}registerOscHandler(l,c){return this._core.registerOscHandler(l,c)}addOscHandler(l,c){return this.registerOscHandler(l,c)}}},7090:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeApi=void 0,a.UnicodeApi=class{constructor(l){this._core=l}register(l){this._core.unicodeService.register(l)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(l){this._core.unicodeService.activeVersion=l}}},744:function(o,a,l){var c=this&&this.__decorate||function(m,p,b,y){var v,w=arguments.length,S=w<3?p:y===null?y=Object.getOwnPropertyDescriptor(p,b):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(m,p,b,y);else for(var x=m.length-1;x>=0;x--)(v=m[x])&&(S=(w<3?v(S):w>3?v(p,b,S):v(p,b))||S);return w>3&&S&&Object.defineProperty(p,b,S),S},u=this&&this.__param||function(m,p){return function(b,y){p(b,y,m)}};Object.defineProperty(a,"__esModule",{value:!0}),a.BufferService=a.MINIMUM_ROWS=a.MINIMUM_COLS=void 0;const h=l(8460),f=l(844),d=l(5295),g=l(2585);a.MINIMUM_COLS=2,a.MINIMUM_ROWS=1;let _=a.BufferService=class extends f.Disposable{get buffer(){return this.buffers.active}constructor(m){super(),this.isUserScrolling=!1,this._onResize=this.register(new h.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(m.rawOptions.cols||0,a.MINIMUM_COLS),this.rows=Math.max(m.rawOptions.rows||0,a.MINIMUM_ROWS),this.buffers=this.register(new d.BufferSet(m,this))}resize(m,p){this.cols=m,this.rows=p,this.buffers.resize(m,p),this._onResize.fire({cols:m,rows:p})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(m,p=!1){const b=this.buffer;let y;y=this._cachedBlankLine,y&&y.length===this.cols&&y.getFg(0)===m.fg&&y.getBg(0)===m.bg||(y=b.getBlankLine(m,p),this._cachedBlankLine=y),y.isWrapped=p;const v=b.ybase+b.scrollTop,w=b.ybase+b.scrollBottom;if(b.scrollTop===0){const S=b.lines.isFull;w===b.lines.length-1?S?b.lines.recycle().copyFrom(y):b.lines.push(y.clone()):b.lines.splice(w+1,0,y.clone()),S?this.isUserScrolling&&(b.ydisp=Math.max(b.ydisp-1,0)):(b.ybase++,this.isUserScrolling||b.ydisp++)}else{const S=w-v+1;b.lines.shiftElements(v+1,S-1,-1),b.lines.set(w,y.clone())}this.isUserScrolling||(b.ydisp=b.ybase),this._onScroll.fire(b.ydisp)}scrollLines(m,p,b){const y=this.buffer;if(m<0){if(y.ydisp===0)return;this.isUserScrolling=!0}else m+y.ydisp>=y.ybase&&(this.isUserScrolling=!1);const v=y.ydisp;y.ydisp=Math.max(Math.min(y.ydisp+m,y.ybase),0),v!==y.ydisp&&(p||this._onScroll.fire(y.ydisp))}};a.BufferService=_=c([u(0,g.IOptionsService)],_)},7994:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CharsetService=void 0,a.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(l){this.glevel=l,this.charset=this._charsets[l]}setgCharset(l,c){this._charsets[l]=c,this.glevel===l&&(this.charset=c)}}},1753:function(o,a,l){var c=this&&this.__decorate||function(y,v,w,S){var x,E=arguments.length,T=E<3?v:S===null?S=Object.getOwnPropertyDescriptor(v,w):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(y,v,w,S);else for(var k=y.length-1;k>=0;k--)(x=y[k])&&(T=(E<3?x(T):E>3?x(v,w,T):x(v,w))||T);return E>3&&T&&Object.defineProperty(v,w,T),T},u=this&&this.__param||function(y,v){return function(w,S){v(w,S,y)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreMouseService=void 0;const h=l(2585),f=l(8460),d=l(844),g={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:y=>y.button!==4&&y.action===1&&(y.ctrl=!1,y.alt=!1,y.shift=!1,!0)},VT200:{events:19,restrict:y=>y.action!==32},DRAG:{events:23,restrict:y=>y.action!==32||y.button!==3},ANY:{events:31,restrict:y=>!0}};function _(y,v){let w=(y.ctrl?16:0)|(y.shift?4:0)|(y.alt?8:0);return y.button===4?(w|=64,w|=y.action):(w|=3&y.button,4&y.button&&(w|=64),8&y.button&&(w|=128),y.action===32?w|=32:y.action!==0||v||(w|=3)),w}const m=String.fromCharCode,p={DEFAULT:y=>{const v=[_(y,!1)+32,y.col+32,y.row+32];return v[0]>255||v[1]>255||v[2]>255?"":`\x1B[M${m(v[0])}${m(v[1])}${m(v[2])}`},SGR:y=>{const v=y.action===0&&y.button!==4?"m":"M";return`\x1B[<${_(y,!0)};${y.col};${y.row}${v}`},SGR_PIXELS:y=>{const v=y.action===0&&y.button!==4?"m":"M";return`\x1B[<${_(y,!0)};${y.x};${y.y}${v}`}};let b=a.CoreMouseService=class extends d.Disposable{constructor(y,v){super(),this._bufferService=y,this._coreService=v,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new f.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const w of Object.keys(g))this.addProtocol(w,g[w]);for(const w of Object.keys(p))this.addEncoding(w,p[w]);this.reset()}addProtocol(y,v){this._protocols[y]=v}addEncoding(y,v){this._encodings[y]=v}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(y){if(!this._protocols[y])throw new Error(`unknown protocol "${y}"`);this._activeProtocol=y,this._onProtocolChange.fire(this._protocols[y].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(y){if(!this._encodings[y])throw new Error(`unknown encoding "${y}"`);this._activeEncoding=y}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(y){if(y.col<0||y.col>=this._bufferService.cols||y.row<0||y.row>=this._bufferService.rows||y.button===4&&y.action===32||y.button===3&&y.action!==32||y.button!==4&&(y.action===2||y.action===3)||(y.col++,y.row++,y.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,y,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(y))return!1;const v=this._encodings[this._activeEncoding](y);return v&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(v):this._coreService.triggerDataEvent(v,!0)),this._lastEvent=y,!0}explainEvents(y){return{down:!!(1&y),up:!!(2&y),drag:!!(4&y),move:!!(8&y),wheel:!!(16&y)}}_equalEvents(y,v,w){if(w){if(y.x!==v.x||y.y!==v.y)return!1}else if(y.col!==v.col||y.row!==v.row)return!1;return y.button===v.button&&y.action===v.action&&y.ctrl===v.ctrl&&y.alt===v.alt&&y.shift===v.shift}};a.CoreMouseService=b=c([u(0,h.IBufferService),u(1,h.ICoreService)],b)},6975:function(o,a,l){var c=this&&this.__decorate||function(b,y,v,w){var S,x=arguments.length,E=x<3?y:w===null?w=Object.getOwnPropertyDescriptor(y,v):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(b,y,v,w);else for(var T=b.length-1;T>=0;T--)(S=b[T])&&(E=(x<3?S(E):x>3?S(y,v,E):S(y,v))||E);return x>3&&E&&Object.defineProperty(y,v,E),E},u=this&&this.__param||function(b,y){return function(v,w){y(v,w,b)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreService=void 0;const h=l(1439),f=l(8460),d=l(844),g=l(2585),_=Object.freeze({insertMode:!1}),m=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let p=a.CoreService=class extends d.Disposable{constructor(b,y,v){super(),this._bufferService=b,this._logService=y,this._optionsService=v,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new f.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new f.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new f.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new f.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,h.clone)(_),this.decPrivateModes=(0,h.clone)(m)}reset(){this.modes=(0,h.clone)(_),this.decPrivateModes=(0,h.clone)(m)}triggerDataEvent(b,y=!1){if(this._optionsService.rawOptions.disableStdin)return;const v=this._bufferService.buffer;y&&this._optionsService.rawOptions.scrollOnUserInput&&v.ybase!==v.ydisp&&this._onRequestScrollToBottom.fire(),y&&this._onUserInput.fire(),this._logService.debug(`sending data "${b}"`,()=>b.split("").map(w=>w.charCodeAt(0))),this._onData.fire(b)}triggerBinaryEvent(b){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${b}"`,()=>b.split("").map(y=>y.charCodeAt(0))),this._onBinary.fire(b))}};a.CoreService=p=c([u(0,g.IBufferService),u(1,g.ILogService),u(2,g.IOptionsService)],p)},9074:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DecorationService=void 0;const c=l(8055),u=l(8460),h=l(844),f=l(6106);let d=0,g=0;class _ extends h.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new f.SortedList(b=>b?.marker.line),this._onDecorationRegistered=this.register(new u.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new u.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,h.toDisposable)(()=>this.reset()))}registerDecoration(b){if(b.marker.isDisposed)return;const y=new m(b);if(y){const v=y.marker.onDispose(()=>y.dispose());y.onDispose(()=>{y&&(this._decorations.delete(y)&&this._onDecorationRemoved.fire(y),v.dispose())}),this._decorations.insert(y),this._onDecorationRegistered.fire(y)}return y}reset(){for(const b of this._decorations.values())b.dispose();this._decorations.clear()}*getDecorationsAtCell(b,y,v){let w=0,S=0;for(const x of this._decorations.getKeyIterator(y))w=x.options.x??0,S=w+(x.options.width??1),b>=w&&b<S&&(!v||(x.options.layer??"bottom")===v)&&(yield x)}forEachDecorationAtCell(b,y,v,w){this._decorations.forEachByKey(y,S=>{d=S.options.x??0,g=d+(S.options.width??1),b>=d&&b<g&&(!v||(S.options.layer??"bottom")===v)&&w(S)})}}a.DecorationService=_;class m extends h.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=c.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=c.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(b){super(),this.options=b,this.onRenderEmitter=this.register(new u.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=b.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.InstantiationService=a.ServiceCollection=void 0;const c=l(2585),u=l(8343);class h{constructor(...d){this._entries=new Map;for(const[g,_]of d)this.set(g,_)}set(d,g){const _=this._entries.get(d);return this._entries.set(d,g),_}forEach(d){for(const[g,_]of this._entries.entries())d(g,_)}has(d){return this._entries.has(d)}get(d){return this._entries.get(d)}}a.ServiceCollection=h,a.InstantiationService=class{constructor(){this._services=new h,this._services.set(c.IInstantiationService,this)}setService(f,d){this._services.set(f,d)}getService(f){return this._services.get(f)}createInstance(f,...d){const g=(0,u.getServiceDependencies)(f).sort((p,b)=>p.index-b.index),_=[];for(const p of g){const b=this._services.get(p.id);if(!b)throw new Error(`[createInstance] ${f.name} depends on UNKNOWN service ${p.id}.`);_.push(b)}const m=g.length>0?g[0].index:d.length;if(d.length!==m)throw new Error(`[createInstance] First service dependency of ${f.name} at position ${m+1} conflicts with ${d.length} static arguments`);return new f(...d,..._)}}},7866:function(o,a,l){var c=this&&this.__decorate||function(m,p,b,y){var v,w=arguments.length,S=w<3?p:y===null?y=Object.getOwnPropertyDescriptor(p,b):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(m,p,b,y);else for(var x=m.length-1;x>=0;x--)(v=m[x])&&(S=(w<3?v(S):w>3?v(p,b,S):v(p,b))||S);return w>3&&S&&Object.defineProperty(p,b,S),S},u=this&&this.__param||function(m,p){return function(b,y){p(b,y,m)}};Object.defineProperty(a,"__esModule",{value:!0}),a.traceCall=a.setTraceLogger=a.LogService=void 0;const h=l(844),f=l(2585),d={trace:f.LogLevelEnum.TRACE,debug:f.LogLevelEnum.DEBUG,info:f.LogLevelEnum.INFO,warn:f.LogLevelEnum.WARN,error:f.LogLevelEnum.ERROR,off:f.LogLevelEnum.OFF};let g,_=a.LogService=class extends h.Disposable{get logLevel(){return this._logLevel}constructor(m){super(),this._optionsService=m,this._logLevel=f.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),g=this}_updateLogLevel(){this._logLevel=d[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(m){for(let p=0;p<m.length;p++)typeof m[p]=="function"&&(m[p]=m[p]())}_log(m,p,b){this._evalLazyOptionalParams(b),m.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+p,...b)}trace(m,...p){this._logLevel<=f.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,m,p)}debug(m,...p){this._logLevel<=f.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,m,p)}info(m,...p){this._logLevel<=f.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,m,p)}warn(m,...p){this._logLevel<=f.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,m,p)}error(m,...p){this._logLevel<=f.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,m,p)}};a.LogService=_=c([u(0,f.IOptionsService)],_),a.setTraceLogger=function(m){g=m},a.traceCall=function(m,p,b){if(typeof b.value!="function")throw new Error("not supported");const y=b.value;b.value=function(...v){if(g.logLevel!==f.LogLevelEnum.TRACE)return y.apply(this,v);g.trace(`GlyphRenderer#${y.name}(${v.map(S=>JSON.stringify(S)).join(", ")})`);const w=y.apply(this,v);return g.trace(`GlyphRenderer#${y.name} return`,w),w}}},7302:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OptionsService=a.DEFAULT_OPTIONS=void 0;const c=l(8460),u=l(844),h=l(6114);a.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:h.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const f=["normal","bold","100","200","300","400","500","600","700","800","900"];class d extends u.Disposable{constructor(_){super(),this._onOptionChange=this.register(new c.EventEmitter),this.onOptionChange=this._onOptionChange.event;const m={...a.DEFAULT_OPTIONS};for(const p in _)if(p in m)try{const b=_[p];m[p]=this._sanitizeAndValidateOption(p,b)}catch(b){console.error(b)}this.rawOptions=m,this.options={...m},this._setupOptions(),this.register((0,u.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(_,m){return this.onOptionChange(p=>{p===_&&m(this.rawOptions[_])})}onMultipleOptionChange(_,m){return this.onOptionChange(p=>{_.indexOf(p)!==-1&&m()})}_setupOptions(){const _=p=>{if(!(p in a.DEFAULT_OPTIONS))throw new Error(`No option with key "${p}"`);return this.rawOptions[p]},m=(p,b)=>{if(!(p in a.DEFAULT_OPTIONS))throw new Error(`No option with key "${p}"`);b=this._sanitizeAndValidateOption(p,b),this.rawOptions[p]!==b&&(this.rawOptions[p]=b,this._onOptionChange.fire(p))};for(const p in this.rawOptions){const b={get:_.bind(this,p),set:m.bind(this,p)};Object.defineProperty(this.options,p,b)}}_sanitizeAndValidateOption(_,m){switch(_){case"cursorStyle":if(m||(m=a.DEFAULT_OPTIONS[_]),!function(p){return p==="block"||p==="underline"||p==="bar"}(m))throw new Error(`"${m}" is not a valid value for ${_}`);break;case"wordSeparator":m||(m=a.DEFAULT_OPTIONS[_]);break;case"fontWeight":case"fontWeightBold":if(typeof m=="number"&&1<=m&&m<=1e3)break;m=f.includes(m)?m:a.DEFAULT_OPTIONS[_];break;case"cursorWidth":m=Math.floor(m);case"lineHeight":case"tabStopWidth":if(m<1)throw new Error(`${_} cannot be less than 1, value: ${m}`);break;case"minimumContrastRatio":m=Math.max(1,Math.min(21,Math.round(10*m)/10));break;case"scrollback":if((m=Math.min(m,4294967295))<0)throw new Error(`${_} cannot be less than 0, value: ${m}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(m<=0)throw new Error(`${_} cannot be less than or equal to 0, value: ${m}`);break;case"rows":case"cols":if(!m&&m!==0)throw new Error(`${_} must be numeric, value: ${m}`);break;case"windowsPty":m=m??{}}return m}}a.OptionsService=d},2660:function(o,a,l){var c=this&&this.__decorate||function(d,g,_,m){var p,b=arguments.length,y=b<3?g:m===null?m=Object.getOwnPropertyDescriptor(g,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(d,g,_,m);else for(var v=d.length-1;v>=0;v--)(p=d[v])&&(y=(b<3?p(y):b>3?p(g,_,y):p(g,_))||y);return b>3&&y&&Object.defineProperty(g,_,y),y},u=this&&this.__param||function(d,g){return function(_,m){g(_,m,d)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OscLinkService=void 0;const h=l(2585);let f=a.OscLinkService=class{constructor(d){this._bufferService=d,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(d){const g=this._bufferService.buffer;if(d.id===void 0){const v=g.addMarker(g.ybase+g.y),w={data:d,id:this._nextId++,lines:[v]};return v.onDispose(()=>this._removeMarkerFromLink(w,v)),this._dataByLinkId.set(w.id,w),w.id}const _=d,m=this._getEntryIdKey(_),p=this._entriesWithId.get(m);if(p)return this.addLineToLink(p.id,g.ybase+g.y),p.id;const b=g.addMarker(g.ybase+g.y),y={id:this._nextId++,key:this._getEntryIdKey(_),data:_,lines:[b]};return b.onDispose(()=>this._removeMarkerFromLink(y,b)),this._entriesWithId.set(y.key,y),this._dataByLinkId.set(y.id,y),y.id}addLineToLink(d,g){const _=this._dataByLinkId.get(d);if(_&&_.lines.every(m=>m.line!==g)){const m=this._bufferService.buffer.addMarker(g);_.lines.push(m),m.onDispose(()=>this._removeMarkerFromLink(_,m))}}getLinkData(d){return this._dataByLinkId.get(d)?.data}_getEntryIdKey(d){return`${d.id};;${d.uri}`}_removeMarkerFromLink(d,g){const _=d.lines.indexOf(g);_!==-1&&(d.lines.splice(_,1),d.lines.length===0&&(d.data.id!==void 0&&this._entriesWithId.delete(d.key),this._dataByLinkId.delete(d.id)))}};a.OscLinkService=f=c([u(0,h.IBufferService)],f)},8343:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createDecorator=a.getServiceDependencies=a.serviceRegistry=void 0;const l="di$target",c="di$dependencies";a.serviceRegistry=new Map,a.getServiceDependencies=function(u){return u[c]||[]},a.createDecorator=function(u){if(a.serviceRegistry.has(u))return a.serviceRegistry.get(u);const h=function(f,d,g){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(_,m,p){m[l]===m?m[c].push({id:_,index:p}):(m[c]=[{id:_,index:p}],m[l]=m)})(h,f,g)};return h.toString=()=>u,a.serviceRegistry.set(u,h),h}},2585:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.IDecorationService=a.IUnicodeService=a.IOscLinkService=a.IOptionsService=a.ILogService=a.LogLevelEnum=a.IInstantiationService=a.ICharsetService=a.ICoreService=a.ICoreMouseService=a.IBufferService=void 0;const c=l(8343);var u;a.IBufferService=(0,c.createDecorator)("BufferService"),a.ICoreMouseService=(0,c.createDecorator)("CoreMouseService"),a.ICoreService=(0,c.createDecorator)("CoreService"),a.ICharsetService=(0,c.createDecorator)("CharsetService"),a.IInstantiationService=(0,c.createDecorator)("InstantiationService"),function(h){h[h.TRACE=0]="TRACE",h[h.DEBUG=1]="DEBUG",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.OFF=5]="OFF"}(u||(a.LogLevelEnum=u={})),a.ILogService=(0,c.createDecorator)("LogService"),a.IOptionsService=(0,c.createDecorator)("OptionsService"),a.IOscLinkService=(0,c.createDecorator)("OscLinkService"),a.IUnicodeService=(0,c.createDecorator)("UnicodeService"),a.IDecorationService=(0,c.createDecorator)("DecorationService")},1480:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeService=void 0;const c=l(8460),u=l(225);class h{static extractShouldJoin(d){return(1&d)!=0}static extractWidth(d){return d>>1&3}static extractCharKind(d){return d>>3}static createPropertyValue(d,g,_=!1){return(16777215&d)<<3|(3&g)<<1|(_?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new c.EventEmitter,this.onChange=this._onChange.event;const d=new u.UnicodeV6;this.register(d),this._active=d.version,this._activeProvider=d}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(d){if(!this._providers[d])throw new Error(`unknown Unicode version "${d}"`);this._active=d,this._activeProvider=this._providers[d],this._onChange.fire(d)}register(d){this._providers[d.version]=d}wcwidth(d){return this._activeProvider.wcwidth(d)}getStringCellWidth(d){let g=0,_=0;const m=d.length;for(let p=0;p<m;++p){let b=d.charCodeAt(p);if(55296<=b&&b<=56319){if(++p>=m)return g+this.wcwidth(b);const w=d.charCodeAt(p);56320<=w&&w<=57343?b=1024*(b-55296)+w-56320+65536:g+=this.wcwidth(w)}const y=this.charProperties(b,_);let v=h.extractWidth(y);h.extractShouldJoin(y)&&(v-=h.extractWidth(_)),g+=v,_=y}return g}charProperties(d,g){return this._activeProvider.charProperties(d,g)}}a.UnicodeService=h}},n={};function i(o){var a=n[o];if(a!==void 0)return a.exports;var l=n[o]={exports:{}};return r[o].call(l.exports,l,l.exports,i),l.exports}var s={};return(()=>{var o=s;Object.defineProperty(o,"__esModule",{value:!0}),o.Terminal=void 0;const a=i(9042),l=i(3236),c=i(844),u=i(5741),h=i(8285),f=i(7975),d=i(7090),g=["cols","rows"];class _ extends c.Disposable{constructor(p){super(),this._core=this.register(new l.Terminal(p)),this._addonManager=this.register(new u.AddonManager),this._publicOptions={...this._core.options};const b=v=>this._core.options[v],y=(v,w)=>{this._checkReadonlyOptions(v),this._core.options[v]=w};for(const v in this._core.options){const w={get:b.bind(this,v),set:y.bind(this,v)};Object.defineProperty(this._publicOptions,v,w)}}_checkReadonlyOptions(p){if(g.includes(p))throw new Error(`Option "${p}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new f.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new d.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new h.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const p=this._core.coreService.decPrivateModes;let b="none";switch(this._core.coreMouseService.activeProtocol){case"X10":b="x10";break;case"VT200":b="vt200";break;case"DRAG":b="drag";break;case"ANY":b="any"}return{applicationCursorKeysMode:p.applicationCursorKeys,applicationKeypadMode:p.applicationKeypad,bracketedPasteMode:p.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:b,originMode:p.origin,reverseWraparoundMode:p.reverseWraparound,sendFocusMode:p.sendFocus,wraparoundMode:p.wraparound}}get options(){return this._publicOptions}set options(p){for(const b in p)this._publicOptions[b]=p[b]}blur(){this._core.blur()}focus(){this._core.focus()}input(p,b=!0){this._core.input(p,b)}resize(p,b){this._verifyIntegers(p,b),this._core.resize(p,b)}open(p){this._core.open(p)}attachCustomKeyEventHandler(p){this._core.attachCustomKeyEventHandler(p)}attachCustomWheelEventHandler(p){this._core.attachCustomWheelEventHandler(p)}registerLinkProvider(p){return this._core.registerLinkProvider(p)}registerCharacterJoiner(p){return this._checkProposedApi(),this._core.registerCharacterJoiner(p)}deregisterCharacterJoiner(p){this._checkProposedApi(),this._core.deregisterCharacterJoiner(p)}registerMarker(p=0){return this._verifyIntegers(p),this._core.registerMarker(p)}registerDecoration(p){return this._checkProposedApi(),this._verifyPositiveIntegers(p.x??0,p.width??0,p.height??0),this._core.registerDecoration(p)}hasSelection(){return this._core.hasSelection()}select(p,b,y){this._verifyIntegers(p,b,y),this._core.select(p,b,y)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(p,b){this._verifyIntegers(p,b),this._core.selectLines(p,b)}dispose(){super.dispose()}scrollLines(p){this._verifyIntegers(p),this._core.scrollLines(p)}scrollPages(p){this._verifyIntegers(p),this._core.scrollPages(p)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(p){this._verifyIntegers(p),this._core.scrollToLine(p)}clear(){this._core.clear()}write(p,b){this._core.write(p,b)}writeln(p,b){this._core.write(p),this._core.write(`\r
`,b)}paste(p){this._core.paste(p)}refresh(p,b){this._verifyIntegers(p,b),this._core.refresh(p,b)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(p){this._addonManager.loadAddon(this,p)}static get strings(){return a}_verifyIntegers(...p){for(const b of p)if(b===1/0||isNaN(b)||b%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...p){for(const b of p)if(b&&(b===1/0||isNaN(b)||b%1!=0||b<0))throw new Error("This API only accepts positive integers")}}o.Terminal=_})(),s})())})(n6);var Gne=n6.exports;const qne=getComputedStyle(document.documentElement),Ot=t=>qne.getPropertyValue(t)||void 0;function k_(t){return{cursor:Ot("--bolt-elements-terminal-cursorColor"),cursorAccent:Ot("--bolt-elements-terminal-cursorColorAccent"),foreground:Ot("--bolt-elements-terminal-textColor"),background:Ot("--bolt-elements-terminal-backgroundColor"),selectionBackground:Ot("--bolt-elements-terminal-selection-backgroundColor"),selectionForeground:Ot("--bolt-elements-terminal-selection-textColor"),selectionInactiveBackground:Ot("--bolt-elements-terminal-selection-backgroundColorInactive"),black:Ot("--bolt-elements-terminal-color-black"),red:Ot("--bolt-elements-terminal-color-red"),green:Ot("--bolt-elements-terminal-color-green"),yellow:Ot("--bolt-elements-terminal-color-yellow"),blue:Ot("--bolt-elements-terminal-color-blue"),magenta:Ot("--bolt-elements-terminal-color-magenta"),cyan:Ot("--bolt-elements-terminal-color-cyan"),white:Ot("--bolt-elements-terminal-color-white"),brightBlack:Ot("--bolt-elements-terminal-color-brightBlack"),brightRed:Ot("--bolt-elements-terminal-color-brightRed"),brightGreen:Ot("--bolt-elements-terminal-color-brightGreen"),brightYellow:Ot("--bolt-elements-terminal-color-brightYellow"),brightBlue:Ot("--bolt-elements-terminal-color-brightBlue"),brightMagenta:Ot("--bolt-elements-terminal-color-brightMagenta"),brightCyan:Ot("--bolt-elements-terminal-color-brightCyan"),brightWhite:Ot("--bolt-elements-terminal-color-brightWhite"),...t}}const Kne=Fr("Terminal"),kk=D.memo(D.forwardRef(({className:t,theme:e,readonly:r,id:n,onTerminalReady:i,onTerminalResize:s},o)=>{const a=D.useRef(null),l=D.useRef();return D.useEffect(()=>{const c=a.current,u=new Vne.FitAddon,h=new Wne.WebLinksAddon,f=new Gne.Terminal({cursorBlink:!0,convertEol:!0,disableStdin:r,theme:k_(r?{cursor:"#00000000"}:{}),fontSize:12,fontFamily:"Menlo, courier-new, courier, monospace"});l.current=f,f.loadAddon(u),f.loadAddon(h),f.open(c);const d=new ResizeObserver(()=>{u.fit(),s?.(f.cols,f.rows)});return d.observe(c),Kne.debug(`Attach [${n}]`),i?.(f),()=>{d.disconnect(),f.dispose()}},[]),D.useEffect(()=>{const c=l.current;c.options.theme=k_(r?{cursor:"#00000000"}:{}),c.options.disableStdin=r},[e,r]),D.useImperativeHandle(o,()=>({reloadStyles:()=>{const c=l.current;c.options.theme=k_(r?{cursor:"#00000000"}:{})}}),[]),R.jsx("div",{className:t,ref:a})})),Yne=Fr("Terminal"),Ak=3,_y=25,Xne=D.memo(()=>{const t=St(Ve.showTerminal),e=St(kp),r=D.useRef([]),n=D.useRef(null),i=D.useRef(!1),[s,o]=D.useState(0),[a,l]=D.useState(1),c=()=>{a<Ak&&(l(a+1),o(a))};return D.useEffect(()=>{const{current:u}=n;if(!u)return;const h=u.isCollapsed();!t&&!h?u.collapse():t&&h&&u.resize(_y),i.current=!1},[t]),D.useEffect(()=>{const u=KO.on("toggleTerminal",()=>{i.current=!0}),h=kp.subscribe(()=>{for(const f of Object.values(r.current))f?.reloadStyles()});return()=>{u(),h()}},[]),R.jsx(bu,{ref:n,defaultSize:t?_y:0,minSize:10,collapsible:!0,onExpand:()=>{i.current||Ve.toggleTerminal(!0)},onCollapse:()=>{i.current||Ve.toggleTerminal(!1)},children:R.jsx("div",{className:"h-full",children:R.jsxs("div",{className:"bg-bolt-elements-terminals-background h-full flex flex-col",children:[R.jsxs("div",{className:"flex items-center bg-bolt-elements-background-depth-2 border-y border-bolt-elements-borderColor gap-1.5 min-h-[34px] p-2",children:[Array.from({length:a+1},(u,h)=>{const f=s===h;return R.jsx(Qe.Fragment,{children:h==0?R.jsxs("button",{className:je("flex items-center text-sm cursor-pointer gap-1.5 px-3 py-2 h-full whitespace-nowrap rounded-full",{"bg-bolt-elements-terminals-buttonBackground text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary":f,"bg-bolt-elements-background-depth-2 text-bolt-elements-textSecondary hover:bg-bolt-elements-terminals-buttonBackground":!f}),onClick:()=>o(h),children:[R.jsx("div",{className:"i-ph:terminal-window-duotone text-lg"}),"Bolt Terminal"]},h):R.jsx(Qe.Fragment,{children:R.jsxs("button",{className:je("flex items-center text-sm cursor-pointer gap-1.5 px-3 py-2 h-full whitespace-nowrap rounded-full",{"bg-bolt-elements-terminals-buttonBackground text-bolt-elements-textPrimary":f,"bg-bolt-elements-background-depth-2 text-bolt-elements-textSecondary hover:bg-bolt-elements-terminals-buttonBackground":!f}),onClick:()=>o(h),children:[R.jsx("div",{className:"i-ph:terminal-window-duotone text-lg"}),"Terminal ",a>1&&h]},h)})},h)}),a<Ak&&R.jsx(qt,{icon:"i-ph:plus",size:"md",onClick:c}),R.jsx(qt,{className:"ml-auto",icon:"i-ph:caret-down",title:"Close",size:"md",onClick:()=>Ve.toggleTerminal(!1)})]}),Array.from({length:a+1},(u,h)=>{const f=s===h;return Yne.debug(`Starting bolt terminal [${h}]`),h==0?R.jsx(kk,{id:`terminal_${h}`,className:je("h-full overflow-hidden",{hidden:!f}),ref:d=>{r.current.push(d)},onTerminalReady:d=>Ve.attachBoltTerminal(d),onTerminalResize:(d,g)=>Ve.onTerminalResize(d,g),theme:e},h):R.jsx(kk,{id:`terminal_${h}`,className:je("h-full overflow-hidden",{hidden:!f}),ref:d=>{r.current.push(d)},onTerminalReady:d=>Ve.attachTerminal(d),onTerminalResize:(d,g)=>Ve.onTerminalResize(d,g),theme:e},h)})]})})})}),Qne=100-_y,Zne={tabSize:2},Jne=D.memo(({files:t,unsavedFiles:e,editorDocument:r,selectedFile:n,isStreaming:i,onFileSelect:s,onEditorChange:o,onEditorScroll:a,onFileSave:l,onFileReset:c})=>{Jl.trace("EditorPanel");const u=St(kp),h=St(Ve.showTerminal),f=D.useMemo(()=>{if(r)return r.filePath.split("/")},[r]),d=D.useMemo(()=>r!==void 0&&e?.has(r.filePath),[r,e]);return R.jsxs(dy,{direction:"vertical",children:[R.jsx(bu,{defaultSize:h?Qne:100,minSize:20,children:R.jsxs(dy,{direction:"horizontal",children:[R.jsx(bu,{defaultSize:20,minSize:10,collapsible:!0,children:R.jsxs("div",{className:"flex flex-col border-r border-bolt-elements-borderColor h-full",children:[R.jsxs(Tk,{children:[R.jsx("div",{className:"i-ph:tree-structure-duotone shrink-0"}),"Files"]}),R.jsx(JM,{className:"h-full",files:t,hideRoot:!0,unsavedFiles:e,rootFolder:Vh,selectedFile:n,onFileSelect:s})]})}),R.jsx(py,{}),R.jsxs(bu,{className:"flex flex-col",defaultSize:80,minSize:20,children:[R.jsx(Tk,{className:"overflow-x-auto",children:f?.length&&R.jsxs("div",{className:"flex items-center flex-1 text-sm",children:[R.jsx(zne,{pathSegments:f,files:t,onFileSelect:s}),d&&R.jsxs("div",{className:"flex gap-1 ml-auto -mr-1.5",children:[R.jsxs(sl,{onClick:l,children:[R.jsx("div",{className:"i-ph:floppy-disk-duotone"}),"Save"]}),R.jsxs(sl,{onClick:c,children:[R.jsx("div",{className:"i-ph:clock-counter-clockwise-duotone"}),"Reset"]})]})]})}),R.jsx("div",{className:"h-full flex-1 overflow-hidden",children:R.jsx(qN,{theme:u,editable:!i&&r!==void 0,settings:Zne,doc:r,autoFocusOnDocumentChange:!tre(),onScroll:a,onChange:o,onSave:l})})]})]})}),R.jsx(py,{}),R.jsx(Xne,{})]})}),eie=D.memo(({activePreviewIndex:t,setActivePreviewIndex:e,isDropdownOpen:r,setIsDropdownOpen:n,setHasSelectedPreview:i,previews:s})=>{const o=D.useRef(null),a=s.map((l,c)=>({...l,index:c})).sort((l,c)=>l.port-c.port);return D.useEffect(()=>{const l=c=>{o.current&&!o.current.contains(c.target)&&n(!1)};return r?window.addEventListener("mousedown",l):window.removeEventListener("mousedown",l),()=>{window.removeEventListener("mousedown",l)}},[r]),R.jsxs("div",{className:"relative z-port-dropdown",ref:o,children:[R.jsx(qt,{icon:"i-ph:plug",onClick:()=>n(!r)}),r&&R.jsxs("div",{className:"absolute right-0 mt-2 bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor rounded shadow-sm min-w-[140px] dropdown-animation",children:[R.jsx("div",{className:"px-4 py-2 border-b border-bolt-elements-borderColor text-sm font-semibold text-bolt-elements-textPrimary",children:"Ports"}),a.map(l=>R.jsx("div",{className:"flex items-center px-4 py-2 cursor-pointer hover:bg-bolt-elements-item-backgroundActive",onClick:()=>{e(l.index),n(!1),i(!0)},children:R.jsx("span",{className:t===l.index?"text-bolt-elements-item-contentAccent":"text-bolt-elements-item-contentDefault group-hover:text-bolt-elements-item-contentActive",children:l.port})},l.port))]})]})}),tie=D.memo(()=>{const t=D.useRef(null),e=D.useRef(null),r=D.useRef(null),[n,i]=D.useState(0),[s,o]=D.useState(!1),[a,l]=D.useState(!1),c=D.useRef(!1),u=St(Ve.previews),h=u[n],[f,d]=D.useState(""),[g,_]=D.useState(),[m,p]=D.useState(!1),[b,y]=D.useState(37.5),v=D.useRef({isResizing:!1,side:null,startX:0,startWidthPercent:37.5,windowWidth:window.innerWidth}),w=2;D.useEffect(()=>{if(!h){d(""),_(void 0);return}const{baseUrl:$}=h;d($),_($)},[h]);const S=D.useCallback($=>{if(!h)return!1;const{baseUrl:te}=h;return $===te?!0:$.startsWith(te)?["/","?","#"].includes($.charAt(te.length)):!1},[h]),x=D.useCallback(($,te,Q,ee)=>te.port<ee[$].port?Q:$,[]);D.useEffect(()=>{if(u.length>1&&!c.current){const $=u.reduce(x,0);i($)}},[u,x]);const E=()=>{t.current&&(t.current.src=t.current.src)},T=async()=>{!a&&e.current?await e.current.requestFullscreen():document.fullscreenElement&&await document.exitFullscreen()};D.useEffect(()=>{const $=()=>{l(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",$),()=>{document.removeEventListener("fullscreenchange",$)}},[]);const k=()=>{p($=>!$)},B=($,te)=>{m&&(document.body.style.userSelect="none",v.current.isResizing=!0,v.current.side=te,v.current.startX=$.clientX,v.current.startWidthPercent=b,v.current.windowWidth=window.innerWidth,document.addEventListener("mousemove",P),document.addEventListener("mouseup",O),$.preventDefault())},P=$=>{if(!v.current.isResizing)return;const te=$.clientX-v.current.startX,Q=v.current.windowWidth,ee=te/Q*100*w;let L=v.current.startWidthPercent;v.current.side==="right"?L=v.current.startWidthPercent+ee:v.current.side==="left"&&(L=v.current.startWidthPercent-ee),L=Math.max(10,Math.min(L,90)),y(L)},O=()=>{v.current.isResizing=!1,v.current.side=null,document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",O),document.body.style.userSelect=""};D.useEffect(()=>{const $=()=>{};return window.addEventListener("resize",$),()=>{window.removeEventListener("resize",$)}},[]);const A=()=>R.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",pointerEvents:"none"},children:R.jsx("div",{style:{color:"rgba(0,0,0,0.5)",fontSize:"10px",lineHeight:"5px",userSelect:"none",marginLeft:"1px"},children:" "})});return R.jsxs("div",{ref:e,className:"w-full h-full flex flex-col relative",children:[s&&R.jsx("div",{className:"z-iframe-overlay w-full h-full absolute",onClick:()=>o(!1)}),R.jsxs("div",{className:"bg-bolt-elements-background-depth-2 p-2 flex items-center gap-1.5",children:[R.jsx(qt,{icon:"i-ph:arrow-clockwise",onClick:E}),R.jsx("div",{className:`flex items-center gap-1 flex-grow bg-bolt-elements-preview-addressBar-background border border-bolt-elements-borderColor text-bolt-elements-preview-addressBar-text rounded-full px-3 py-1 text-sm hover:bg-bolt-elements-preview-addressBar-backgroundHover hover:focus-within:bg-bolt-elements-preview-addressBar-backgroundActive focus-within:bg-bolt-elements-preview-addressBar-backgroundActive
        focus-within-border-bolt-elements-borderColorActive focus-within:text-bolt-elements-preview-addressBar-textActive`,children:R.jsx("input",{ref:r,className:"w-full bg-transparent outline-none",type:"text",value:f,onChange:$=>{d($.target.value)},onKeyDown:$=>{$.key==="Enter"&&S(f)&&(_(f),r.current&&r.current.blur())}})}),u.length>1&&R.jsx(eie,{activePreviewIndex:n,setActivePreviewIndex:i,isDropdownOpen:s,setHasSelectedPreview:$=>c.current=$,setIsDropdownOpen:o,previews:u}),R.jsx(qt,{icon:"i-ph:devices",onClick:k,title:m?"Switch to Responsive Mode":"Switch to Device Mode"}),R.jsx(qt,{icon:a?"i-ph:arrows-in":"i-ph:arrows-out",onClick:T,title:a?"Exit Full Screen":"Full Screen"})]}),R.jsx("div",{className:"flex-1 border-t border-bolt-elements-borderColor flex justify-center items-center overflow-auto",children:R.jsxs("div",{style:{width:m?`${b}%`:"100%",height:"100%",overflow:"visible",background:"#fff",position:"relative",display:"flex"},children:[h?R.jsx("iframe",{ref:t,className:"border-none w-full h-full bg-white",src:g,allowFullScreen:!0}):R.jsx("div",{className:"flex w-full h-full justify-center items-center bg-white",children:"No preview available"}),m&&R.jsxs(R.Fragment,{children:[R.jsx("div",{onMouseDown:$=>B($,"left"),style:{position:"absolute",top:0,left:0,width:"15px",marginLeft:"-15px",height:"100%",cursor:"ew-resize",background:"rgba(255,255,255,.2)",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s",userSelect:"none"},onMouseOver:$=>$.currentTarget.style.background="rgba(255,255,255,.5)",onMouseOut:$=>$.currentTarget.style.background="rgba(255,255,255,.2)",title:"Drag to resize width",children:R.jsx(A,{})}),R.jsx("div",{onMouseDown:$=>B($,"right"),style:{position:"absolute",top:0,right:0,width:"15px",marginRight:"-15px",height:"100%",cursor:"ew-resize",background:"rgba(255,255,255,.2)",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s",userSelect:"none"},onMouseOver:$=>$.currentTarget.style.background="rgba(255,255,255,.5)",onMouseOut:$=>$.currentTarget.style.background="rgba(255,255,255,.2)",title:"Drag to resize width",children:R.jsx(A,{})})]})]})})]})}),rie={ease:On},nie={left:{value:"code",text:"Code"},right:{value:"preview",text:"Preview"}},iie={closed:{width:0,transition:{duration:.2,ease:On}},open:{width:"var(--workbench-width)",transition:{duration:.2,ease:On}}},sie=D.memo(({chatStarted:t,isStreaming:e})=>{Jl.trace("Workbench");const[r,n]=D.useState(!1),i=St(dv(Ve.previews,y=>y.length>0)),s=St(Ve.showWorkbench),o=St(Ve.selectedFile),a=St(Ve.currentDocument),l=St(Ve.unsavedFiles),c=St(Ve.files),u=St(Ve.currentView),h=XO(1024),f=y=>{Ve.currentView.set(y)};D.useEffect(()=>{i&&f("preview")},[i]),D.useEffect(()=>{Ve.setDocuments(c)},[c]);const d=D.useCallback(y=>{Ve.setCurrentDocumentContent(y.content)},[]),g=D.useCallback(y=>{Ve.setCurrentDocumentScrollPosition(y)},[]),_=D.useCallback(y=>{Ve.setSelectedFile(y)},[]),m=D.useCallback(()=>{Ve.saveCurrentDocument().catch(()=>{Be.error("Failed to update file content")})},[]),p=D.useCallback(()=>{Ve.resetCurrentDocument()},[]),b=D.useCallback(async()=>{n(!0);try{const y=await window.showDirectoryPicker();await Ve.syncFiles(y),Be.success("Files synced successfully")}catch(y){console.error("Error syncing files:",y),Be.error("Failed to sync files")}finally{n(!1)}},[]);return t&&R.jsx(Jr.div,{initial:"closed",animate:s?"open":"closed",variants:iie,className:"z-workbench",children:R.jsx("div",{className:je("fixed top-[calc(var(--header-height)+1.5rem)] bottom-6 w-[var(--workbench-inner-width)] mr-4 z-0 transition-[left,width] duration-200 bolt-ease-cubic-bezier",{"w-full":h,"left-0":s&&h,"left-[var(--workbench-left)]":s,"left-[100%]":!s}),children:R.jsx("div",{className:"absolute inset-0 px-2 lg:px-6",children:R.jsxs("div",{className:"h-full flex flex-col bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor shadow-sm rounded-lg overflow-hidden",children:[R.jsxs("div",{className:"flex items-center px-3 py-2 border-b border-bolt-elements-borderColor",children:[R.jsx(xte,{selected:u,options:nie,setSelected:f}),R.jsx("div",{className:"ml-auto"}),u==="code"&&R.jsxs("div",{className:"flex overflow-y-auto",children:[R.jsxs(sl,{className:"mr-1 text-sm",onClick:()=>{Ve.downloadZip()},children:[R.jsx("div",{className:"i-ph:code"}),"Download Code"]}),R.jsxs(sl,{className:"mr-1 text-sm",onClick:b,disabled:r,children:[r?R.jsx("div",{className:"i-ph:spinner"}):R.jsx("div",{className:"i-ph:cloud-arrow-down"}),r?"Syncing...":"Sync Files"]}),R.jsxs(sl,{className:"mr-1 text-sm",onClick:()=>{Ve.toggleTerminal(!Ve.showTerminal.get())},children:[R.jsx("div",{className:"i-ph:terminal"}),"Toggle Terminal"]}),R.jsxs(sl,{className:"mr-1 text-sm",onClick:()=>{const y=prompt("Please enter a name for your new GitHub repository:","bolt-generated-project");if(!y){alert("Repository name is required. Push to GitHub cancelled.");return}const v=ct.get("githubUsername"),w=ct.get("githubToken");if(!v||!w){const S=prompt("Please enter your GitHub username:"),x=prompt("Please enter your GitHub personal access token:");if(!S||!x){alert("GitHub username and token are required. Push to GitHub cancelled.");return}Ve.pushToGitHub(y,S,x)}else Ve.pushToGitHub(y,v,w)},children:[R.jsx("div",{className:"i-ph:github-logo"}),"Push to GitHub"]})]}),R.jsx(qt,{icon:"i-ph:x-circle",className:"-mr-1",size:"xl",onClick:()=>{Ve.showWorkbench.set(!1)}})]}),R.jsxs("div",{className:"relative flex-1 overflow-hidden",children:[R.jsx(Rk,{initial:{x:u==="code"?0:"-100%"},animate:{x:u==="code"?0:"-100%"},children:R.jsx(Jne,{editorDocument:a,isStreaming:e,selectedFile:o,files:c,unsavedFiles:l,onFileSelect:_,onEditorScroll:g,onEditorChange:d,onFileSave:m,onFileReset:p})}),R.jsx(Rk,{initial:{x:u==="preview"?0:"100%"},animate:{x:u==="preview"?0:"100%"},children:R.jsx(tie,{})})]})]})})})})}),Rk=D.memo(({children:t,...e})=>R.jsx(Jr.div,{className:"absolute inset-0",transition:rie,...e,children:t}));function Pk(t){const e=[],r=String(t||"");let n=r.indexOf(","),i=0,s=!1;for(;!s;){n===-1&&(n=r.length,s=!0);const o=r.slice(i,n).trim();(o||!s)&&e.push(o),i=n+1,n=r.indexOf(",",i)}return e}function bE(t,e){const r=e||{};return(t[t.length-1]===""?[...t,""]:t).join((r.padRight?" ":"")+","+(r.padLeft===!1?"":" ")).trim()}const oie=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,aie=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,lie={};function Ik(t,e){return(lie.jsx?aie:oie).test(t)}const cie=/[ \t\n\f\r]/g;function Kg(t){return typeof t=="object"?t.type==="text"?Dk(t.value):!1:Dk(t)}function Dk(t){return t.replace(cie,"")===""}class nf{constructor(e,r,n){this.property=e,this.normal=r,n&&(this.space=n)}}nf.prototype.property={};nf.prototype.normal={};nf.prototype.space=null;function s6(t,e){const r={},n={};let i=-1;for(;++i<t.length;)Object.assign(r,t[i].property),Object.assign(n,t[i].normal);return new nf(r,n,e)}function ah(t){return t.toLowerCase()}class Bn{constructor(e,r){this.property=e,this.attribute=r}}Bn.prototype.space=null;Bn.prototype.boolean=!1;Bn.prototype.booleanish=!1;Bn.prototype.overloadedBoolean=!1;Bn.prototype.number=!1;Bn.prototype.commaSeparated=!1;Bn.prototype.spaceSeparated=!1;Bn.prototype.commaOrSpaceSeparated=!1;Bn.prototype.mustUseProperty=!1;Bn.prototype.defined=!1;let uie=0;const Xe=xa(),Wt=xa(),o6=xa(),Oe=xa(),Et=xa(),El=xa(),nn=xa();function xa(){return 2**++uie}const by=Object.freeze(Object.defineProperty({__proto__:null,boolean:Xe,booleanish:Wt,commaOrSpaceSeparated:nn,commaSeparated:El,number:Oe,overloadedBoolean:o6,spaceSeparated:Et},Symbol.toStringTag,{value:"Module"})),A_=Object.keys(by);class yE extends Bn{constructor(e,r,n,i){let s=-1;if(super(e,r),Ok(this,"space",i),typeof n=="number")for(;++s<A_.length;){const o=A_[s];Ok(this,A_[s],(n&by[o])===by[o])}}}yE.prototype.defined=!0;function Ok(t,e,r){r&&(t[e]=r)}const hie={}.hasOwnProperty;function cc(t){const e={},r={};let n;for(n in t.properties)if(hie.call(t.properties,n)){const i=t.properties[n],s=new yE(n,t.transform(t.attributes||{},n),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(n)&&(s.mustUseProperty=!0),e[n]=s,r[ah(n)]=n,r[ah(s.attribute)]=n}return new nf(e,r,t.space)}const a6=cc({space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),l6=cc({space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function c6(t,e){return e in t?t[e]:e}function u6(t,e){return c6(t,e.toLowerCase())}const h6=cc({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:u6,properties:{xmlns:null,xmlnsXLink:null}}),f6=cc({transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Wt,ariaAutoComplete:null,ariaBusy:Wt,ariaChecked:Wt,ariaColCount:Oe,ariaColIndex:Oe,ariaColSpan:Oe,ariaControls:Et,ariaCurrent:null,ariaDescribedBy:Et,ariaDetails:null,ariaDisabled:Wt,ariaDropEffect:Et,ariaErrorMessage:null,ariaExpanded:Wt,ariaFlowTo:Et,ariaGrabbed:Wt,ariaHasPopup:null,ariaHidden:Wt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Et,ariaLevel:Oe,ariaLive:null,ariaModal:Wt,ariaMultiLine:Wt,ariaMultiSelectable:Wt,ariaOrientation:null,ariaOwns:Et,ariaPlaceholder:null,ariaPosInSet:Oe,ariaPressed:Wt,ariaReadOnly:Wt,ariaRelevant:null,ariaRequired:Wt,ariaRoleDescription:Et,ariaRowCount:Oe,ariaRowIndex:Oe,ariaRowSpan:Oe,ariaSelected:Wt,ariaSetSize:Oe,ariaSort:null,ariaValueMax:Oe,ariaValueMin:Oe,ariaValueNow:Oe,ariaValueText:null,role:null}}),fie=cc({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:u6,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:El,acceptCharset:Et,accessKey:Et,action:null,allow:null,allowFullScreen:Xe,allowPaymentRequest:Xe,allowUserMedia:Xe,alt:null,as:null,async:Xe,autoCapitalize:null,autoComplete:Et,autoFocus:Xe,autoPlay:Xe,blocking:Et,capture:null,charSet:null,checked:Xe,cite:null,className:Et,cols:Oe,colSpan:null,content:null,contentEditable:Wt,controls:Xe,controlsList:Et,coords:Oe|El,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Xe,defer:Xe,dir:null,dirName:null,disabled:Xe,download:o6,draggable:Wt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Xe,formTarget:null,headers:Et,height:Oe,hidden:Xe,high:Oe,href:null,hrefLang:null,htmlFor:Et,httpEquiv:Et,id:null,imageSizes:null,imageSrcSet:null,inert:Xe,inputMode:null,integrity:null,is:null,isMap:Xe,itemId:null,itemProp:Et,itemRef:Et,itemScope:Xe,itemType:Et,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Xe,low:Oe,manifest:null,max:null,maxLength:Oe,media:null,method:null,min:null,minLength:Oe,multiple:Xe,muted:Xe,name:null,nonce:null,noModule:Xe,noValidate:Xe,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Xe,optimum:Oe,pattern:null,ping:Et,placeholder:null,playsInline:Xe,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Xe,referrerPolicy:null,rel:Et,required:Xe,reversed:Xe,rows:Oe,rowSpan:Oe,sandbox:Et,scope:null,scoped:Xe,seamless:Xe,selected:Xe,shadowRootClonable:Xe,shadowRootDelegatesFocus:Xe,shadowRootMode:null,shape:null,size:Oe,sizes:null,slot:null,span:Oe,spellCheck:Wt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Oe,step:null,style:null,tabIndex:Oe,target:null,title:null,translate:null,type:null,typeMustMatch:Xe,useMap:null,value:Wt,width:Oe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Et,axis:null,background:null,bgColor:null,border:Oe,borderColor:null,bottomMargin:Oe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Xe,declare:Xe,event:null,face:null,frame:null,frameBorder:null,hSpace:Oe,leftMargin:Oe,link:null,longDesc:null,lowSrc:null,marginHeight:Oe,marginWidth:Oe,noResize:Xe,noHref:Xe,noShade:Xe,noWrap:Xe,object:null,profile:null,prompt:null,rev:null,rightMargin:Oe,rules:null,scheme:null,scrolling:Wt,standby:null,summary:null,text:null,topMargin:Oe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Oe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Xe,disableRemotePlayback:Xe,prefix:null,property:null,results:Oe,security:null,unselectable:null}}),die=cc({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:c6,properties:{about:nn,accentHeight:Oe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Oe,amplitude:Oe,arabicForm:null,ascent:Oe,attributeName:null,attributeType:null,azimuth:Oe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Oe,by:null,calcMode:null,capHeight:Oe,className:Et,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Oe,diffuseConstant:Oe,direction:null,display:null,dur:null,divisor:Oe,dominantBaseline:null,download:Xe,dx:null,dy:null,edgeMode:null,editable:null,elevation:Oe,enableBackground:null,end:null,event:null,exponent:Oe,externalResourcesRequired:null,fill:null,fillOpacity:Oe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:El,g2:El,glyphName:El,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Oe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Oe,horizOriginX:Oe,horizOriginY:Oe,id:null,ideographic:Oe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Oe,k:Oe,k1:Oe,k2:Oe,k3:Oe,k4:Oe,kernelMatrix:nn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Oe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Oe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Oe,overlineThickness:Oe,paintOrder:null,panose1:null,path:null,pathLength:Oe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Et,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Oe,pointsAtY:Oe,pointsAtZ:Oe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:nn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:nn,rev:nn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:nn,requiredFeatures:nn,requiredFonts:nn,requiredFormats:nn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Oe,specularExponent:Oe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Oe,strikethroughThickness:Oe,string:null,stroke:null,strokeDashArray:nn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Oe,strokeOpacity:Oe,strokeWidth:null,style:null,surfaceScale:Oe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:nn,tabIndex:Oe,tableValues:null,target:null,targetX:Oe,targetY:Oe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:nn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Oe,underlineThickness:Oe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Oe,values:null,vAlphabetic:Oe,vMathematical:Oe,vectorEffect:null,vHanging:Oe,vIdeographic:Oe,version:null,vertAdvY:Oe,vertOriginX:Oe,vertOriginY:Oe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Oe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),pie=/^data[-\w.:]+$/i,Lk=/-[a-z]/g,mie=/[A-Z]/g;function sf(t,e){const r=ah(e);let n=e,i=Bn;if(r in t.normal)return t.property[t.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&pie.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(Lk,_ie);n="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!Lk.test(s)){let o=s.replace(mie,gie);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=yE}return new i(n,e)}function gie(t){return"-"+t.toLowerCase()}function _ie(t){return t.charAt(1).toUpperCase()}const bie={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},uc=s6([l6,a6,h6,f6,fie],"html"),Ui=s6([l6,a6,h6,f6,die],"svg");function Nk(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function vE(t){return t.join(" ").trim()}var d6={},Mk=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,yie=/\n/g,vie=/^\s*/,wie=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Eie=/^:\s*/,Sie=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,xie=/^[;\s]*/,Tie=/^\s+|\s+$/g,Cie=`
`,Bk="/",Fk="*",Ro="",kie="comment",Aie="declaration",Rie=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var r=1,n=1;function i(g){var _=g.match(yie);_&&(r+=_.length);var m=g.lastIndexOf(Cie);n=~m?g.length-m:n+g.length}function s(){var g={line:r,column:n};return function(_){return _.position=new o(g),c(),_}}function o(g){this.start=g,this.end={line:r,column:n},this.source=e.source}o.prototype.content=t;function a(g){var _=new Error(e.source+":"+r+":"+n+": "+g);if(_.reason=g,_.filename=e.source,_.line=r,_.column=n,_.source=t,!e.silent)throw _}function l(g){var _=g.exec(t);if(_){var m=_[0];return i(m),t=t.slice(m.length),_}}function c(){l(vie)}function u(g){var _;for(g=g||[];_=h();)_!==!1&&g.push(_);return g}function h(){var g=s();if(!(Bk!=t.charAt(0)||Fk!=t.charAt(1))){for(var _=2;Ro!=t.charAt(_)&&(Fk!=t.charAt(_)||Bk!=t.charAt(_+1));)++_;if(_+=2,Ro===t.charAt(_-1))return a("End of comment missing");var m=t.slice(2,_-2);return n+=2,i(m),t=t.slice(_),n+=2,g({type:kie,comment:m})}}function f(){var g=s(),_=l(wie);if(_){if(h(),!l(Eie))return a("property missing ':'");var m=l(Sie),p=g({type:Aie,property:Hk(_[0].replace(Mk,Ro)),value:m?Hk(m[0].replace(Mk,Ro)):Ro});return l(xie),p}}function d(){var g=[];u(g);for(var _;_=f();)_!==!1&&(g.push(_),u(g));return g}return c(),d()};function Hk(t){return t?t.replace(Tie,Ro):Ro}var Pie=Hn&&Hn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(d6,"__esModule",{value:!0});var Uk=d6.default=Die,Iie=Pie(Rie);function Die(t,e){var r=null;if(!t||typeof t!="string")return r;var n=(0,Iie.default)(t),i=typeof e=="function";return n.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?e(o,a,s):a&&(r=r||{},r[o]=a)}}),r}const Oie=Uk.default||Uk,Yg=p6("end"),ji=p6("start");function p6(t){return e;function e(r){const n=r&&r.position&&r.position[t]||{};if(typeof n.line=="number"&&n.line>0&&typeof n.column=="number"&&n.column>0)return{line:n.line,column:n.column,offset:typeof n.offset=="number"&&n.offset>-1?n.offset:void 0}}}function m6(t){const e=ji(t),r=Yg(t);if(e&&r)return{start:e,end:r}}function yu(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?jk(t.position):"start"in t||"end"in t?jk(t):"line"in t||"column"in t?yy(t):""}function yy(t){return $k(t&&t.line)+":"+$k(t&&t.column)}function jk(t){return yy(t&&t.start)+"-"+yy(t&&t.end)}function $k(t){return t&&typeof t=="number"?t:1}class Ar extends Error{constructor(e,r,n){super(),typeof r=="string"&&(n=r,r=void 0);let i="",s={},o=!1;if(r&&("line"in r&&"column"in r?s={place:r}:"start"in r&&"end"in r?s={place:r}:"type"in r?s={ancestors:[r],place:r.position}:s={...r}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof n=="string"){const l=n.indexOf(":");l===-1?s.ruleId=n:(s.source=n.slice(0,l),s.ruleId=n.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=yu(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Ar.prototype.file="";Ar.prototype.name="";Ar.prototype.reason="";Ar.prototype.message="";Ar.prototype.stack="";Ar.prototype.column=void 0;Ar.prototype.line=void 0;Ar.prototype.ancestors=void 0;Ar.prototype.cause=void 0;Ar.prototype.fatal=void 0;Ar.prototype.place=void 0;Ar.prototype.ruleId=void 0;Ar.prototype.source=void 0;const wE={}.hasOwnProperty,Lie=new Map,Nie=/[A-Z]/g,Mie=/-([a-z])/g,Bie=new Set(["table","tbody","thead","tfoot","tr"]),Fie=new Set(["td","th"]),g6="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Hie(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const r=e.filePath||void 0;let n;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");n=qie(r,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");n=Gie(r,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:n,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:r,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Ui:uc,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=_6(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function _6(t,e,r){if(e.type==="element")return Uie(t,e,r);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return jie(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return zie(t,e,r);if(e.type==="mdxjsEsm")return $ie(t,e);if(e.type==="root")return Vie(t,e,r);if(e.type==="text")return Wie(t,e)}function Uie(t,e,r){const n=t.schema;let i=n;e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(i=Ui,t.schema=i),t.ancestors.push(e);const s=y6(t,e.tagName,!1),o=Kie(t,e);let a=SE(t,e);return Bie.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!Kg(l):!0})),b6(t,o,s,e),EE(o,a),t.ancestors.pop(),t.schema=n,t.create(e,s,o,r)}function jie(t,e){if(e.data&&e.data.estree&&t.evaluater){const n=e.data.estree.body[0];return n.type,t.evaluater.evaluateExpression(n.expression)}lh(t,e.position)}function $ie(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);lh(t,e.position)}function zie(t,e,r){const n=t.schema;let i=n;e.name==="svg"&&n.space==="html"&&(i=Ui,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:y6(t,e.name,!0),o=Yie(t,e),a=SE(t,e);return b6(t,o,s,e),EE(o,a),t.ancestors.pop(),t.schema=n,t.create(e,s,o,r)}function Vie(t,e,r){const n={};return EE(n,SE(t,e)),t.create(e,t.Fragment,n,r)}function Wie(t,e){return e.value}function b6(t,e,r,n){typeof r!="string"&&r!==t.Fragment&&t.passNode&&(e.node=n)}function EE(t,e){if(e.length>0){const r=e.length>1?e:e[0];r&&(t.children=r)}}function Gie(t,e,r){return n;function n(i,s,o,a){const c=Array.isArray(o.children)?r:e;return a?c(s,o,a):c(s,o)}}function qie(t,e){return r;function r(n,i,s,o){const a=Array.isArray(s.children),l=ji(n);return e(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function Kie(t,e){const r={};let n,i;for(i in e.properties)if(i!=="children"&&wE.call(e.properties,i)){const s=Xie(t,i,e.properties[i]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&Fie.has(e.tagName)?n=a:r[o]=a}}if(n){const s=r.style||(r.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=n}return r}function Yie(t,e){const r={};for(const n of e.attributes)if(n.type==="mdxJsxExpressionAttribute")if(n.data&&n.data.estree&&t.evaluater){const s=n.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(r,t.evaluater.evaluateExpression(a.argument))}else lh(t,e.position);else{const i=n.name;let s;if(n.value&&typeof n.value=="object")if(n.value.data&&n.value.data.estree&&t.evaluater){const a=n.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else lh(t,e.position);else s=n.value===null?!0:n.value;r[i]=s}return r}function SE(t,e){const r=[];let n=-1;const i=t.passKeys?new Map:Lie;for(;++n<e.children.length;){const s=e.children[n];let o;if(t.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const c=i.get(l)||0;o=l+"-"+c,i.set(l,c+1)}}const a=_6(t,s,o);a!==void 0&&r.push(a)}return r}function Xie(t,e,r){const n=sf(t.schema,e);if(!(r==null||typeof r=="number"&&Number.isNaN(r))){if(Array.isArray(r)&&(r=n.commaSeparated?bE(r):vE(r)),n.property==="style"){let i=typeof r=="object"?r:Qie(t,String(r));return t.stylePropertyNameCase==="css"&&(i=Zie(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&n.space?bie[n.property]||n.property:n.attribute,r]}}function Qie(t,e){const r={};try{Oie(e,n)}catch(i){if(!t.ignoreInvalidStyle){const s=i,o=new Ar("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=t.filePath||void 0,o.url=g6+"#cannot-parse-style-attribute",o}}return r;function n(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(Mie,ese)),r[o]=s}}function y6(t,e,r){let n;if(!r)n={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=Ik(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}n=o}else n=Ik(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(n.type==="Literal"){const i=n.value;return wE.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(n);lh(t)}function lh(t,e){const r=new Ar("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw r.file=t.filePath||void 0,r.url=g6+"#cannot-handle-mdx-estrees-without-createevaluater",r}function Zie(t){const e={};let r;for(r in t)wE.call(t,r)&&(e[Jie(r)]=t[r]);return e}function Jie(t){let e=t.replace(Nie,tse);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function ese(t,e){return e.toUpperCase()}function tse(t){return"-"+t.toLowerCase()}const R_={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},rse={};function xE(t,e){const r=rse,n=typeof r.includeImageAlt=="boolean"?r.includeImageAlt:!0,i=typeof r.includeHtml=="boolean"?r.includeHtml:!0;return v6(t,n,i)}function v6(t,e,r){if(nse(t)){if("value"in t)return t.type==="html"&&!r?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return zk(t.children,e,r)}return Array.isArray(t)?zk(t,e,r):""}function zk(t,e,r){const n=[];let i=-1;for(;++i<t.length;)n[i]=v6(t[i],e,r);return n.join("")}function nse(t){return!!(t&&typeof t=="object")}const Vk=document.createElement("i");function TE(t){const e="&"+t+";";Vk.innerHTML=e;const r=Vk.textContent;return r.charCodeAt(r.length-1)===59&&t!=="semi"||r===e?!1:r}function dn(t,e,r,n){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,r=r>0?r:0,n.length<1e4)o=Array.from(n),o.unshift(e,r),t.splice(...o);else for(r&&t.splice(e,r);s<n.length;)o=n.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function Sn(t,e){return t.length>0?(dn(t,t.length,0,e),t):e}const Wk={}.hasOwnProperty;function w6(t){const e={};let r=-1;for(;++r<t.length;)ise(e,t[r]);return e}function ise(t,e){let r;for(r in e){const i=(Wk.call(t,r)?t[r]:void 0)||(t[r]={}),s=e[r];let o;if(s)for(o in s){Wk.call(i,o)||(i[o]=[]);const a=s[o];sse(i[o],Array.isArray(a)?a:a?[a]:[])}}}function sse(t,e){let r=-1;const n=[];for(;++r<e.length;)(e[r].add==="after"?t:n).push(e[r]);dn(t,0,0,n)}function E6(t,e){const r=Number.parseInt(t,e);return r<9||r===11||r>13&&r<32||r>126&&r<160||r>55295&&r<57344||r>64975&&r<65008||(r&65535)===65535||(r&65535)===65534||r>1114111?"":String.fromCodePoint(r)}function zn(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Or=fo(/[A-Za-z]/),Sr=fo(/[\dA-Za-z]/),ose=fo(/[#-'*+\--9=?A-Z^-~]/);function Tm(t){return t!==null&&(t<32||t===127)}const vy=fo(/\d/),ase=fo(/[\dA-Fa-f]/),lse=fo(/[!-/:-@[-`{-~]/);function We(t){return t!==null&&t<-2}function vt(t){return t!==null&&(t<0||t===32)}function tt(t){return t===-2||t===-1||t===32}const Xg=fo(/\p{P}|\p{S}/u),ua=fo(/\s/);function fo(t){return e;function e(r){return r!==null&&r>-1&&t.test(String.fromCharCode(r))}}function hc(t){const e=[];let r=-1,n=0,i=0;for(;++r<t.length;){const s=t.charCodeAt(r);let o="";if(s===37&&Sr(t.charCodeAt(r+1))&&Sr(t.charCodeAt(r+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(r+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(n,r),encodeURIComponent(o)),n=r+i+1,o=""),i&&(r+=i,i=0)}return e.join("")+t.slice(n)}function at(t,e,r,n){const i=n?n-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return tt(l)?(t.enter(r),a(l)):e(l)}function a(l){return tt(l)&&s++<i?(t.consume(l),a):(t.exit(r),e(l))}}const cse={tokenize:use};function use(t){const e=t.attempt(this.parser.constructs.contentInitial,n,i);let r;return e;function n(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),at(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const l=t.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=l),r=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return We(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const hse={tokenize:fse},Gk={tokenize:dse};function fse(t){const e=this,r=[];let n=0,i,s,o;return a;function a(y){if(n<r.length){const v=r[n];return e.containerState=v[1],t.attempt(v[0].continuation,l,c)(y)}return c(y)}function l(y){if(n++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&b();const v=e.events.length;let w=v,S;for(;w--;)if(e.events[w][0]==="exit"&&e.events[w][1].type==="chunkFlow"){S=e.events[w][1].end;break}p(n);let x=v;for(;x<e.events.length;)e.events[x][1].end={...S},x++;return dn(e.events,w+1,0,e.events.slice(v)),e.events.length=x,c(y)}return a(y)}function c(y){if(n===r.length){if(!i)return f(y);if(i.currentConstruct&&i.currentConstruct.concrete)return g(y);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(Gk,u,h)(y)}function u(y){return i&&b(),p(n),f(y)}function h(y){return e.parser.lazy[e.now().line]=n!==r.length,o=e.now().offset,g(y)}function f(y){return e.containerState={},t.attempt(Gk,d,g)(y)}function d(y){return n++,r.push([e.currentConstruct,e.containerState]),f(y)}function g(y){if(y===null){i&&b(),p(0),t.consume(y);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),_(y)}function _(y){if(y===null){m(t.exit("chunkFlow"),!0),p(0),t.consume(y);return}return We(y)?(t.consume(y),m(t.exit("chunkFlow")),n=0,e.interrupt=void 0,a):(t.consume(y),_)}function m(y,v){const w=e.sliceStream(y);if(v&&w.push(null),y.previous=s,s&&(s.next=y),s=y,i.defineSkip(y.start),i.write(w),e.parser.lazy[y.start.line]){let S=i.events.length;for(;S--;)if(i.events[S][1].start.offset<o&&(!i.events[S][1].end||i.events[S][1].end.offset>o))return;const x=e.events.length;let E=x,T,k;for(;E--;)if(e.events[E][0]==="exit"&&e.events[E][1].type==="chunkFlow"){if(T){k=e.events[E][1].end;break}T=!0}for(p(n),S=x;S<e.events.length;)e.events[S][1].end={...k},S++;dn(e.events,E+1,0,e.events.slice(x)),e.events.length=S}}function p(y){let v=r.length;for(;v-- >y;){const w=r[v];e.containerState=w[1],w[0].exit.call(e,t)}r.length=y}function b(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function dse(t,e,r){return at(t,t.attempt(this.parser.constructs.document,e,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ul(t){if(t===null||vt(t)||ua(t))return 1;if(Xg(t))return 2}function Qg(t,e,r){const n=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!n.includes(s)&&(e=s(e,r),n.push(s))}return e}const wy={name:"attention",resolveAll:pse,tokenize:mse};function pse(t,e){let r=-1,n,i,s,o,a,l,c,u;for(;++r<t.length;)if(t[r][0]==="enter"&&t[r][1].type==="attentionSequence"&&t[r][1]._close){for(n=r;n--;)if(t[n][0]==="exit"&&t[n][1].type==="attentionSequence"&&t[n][1]._open&&e.sliceSerialize(t[n][1]).charCodeAt(0)===e.sliceSerialize(t[r][1]).charCodeAt(0)){if((t[n][1]._close||t[r][1]._open)&&(t[r][1].end.offset-t[r][1].start.offset)%3&&!((t[n][1].end.offset-t[n][1].start.offset+t[r][1].end.offset-t[r][1].start.offset)%3))continue;l=t[n][1].end.offset-t[n][1].start.offset>1&&t[r][1].end.offset-t[r][1].start.offset>1?2:1;const h={...t[n][1].end},f={...t[r][1].start};qk(h,-l),qk(f,l),o={type:l>1?"strongSequence":"emphasisSequence",start:h,end:{...t[n][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[r][1].start},end:f},s={type:l>1?"strongText":"emphasisText",start:{...t[n][1].end},end:{...t[r][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[n][1].end={...o.start},t[r][1].start={...a.end},c=[],t[n][1].end.offset-t[n][1].start.offset&&(c=Sn(c,[["enter",t[n][1],e],["exit",t[n][1],e]])),c=Sn(c,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),c=Sn(c,Qg(e.parser.constructs.insideSpan.null,t.slice(n+1,r),e)),c=Sn(c,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[r][1].end.offset-t[r][1].start.offset?(u=2,c=Sn(c,[["enter",t[r][1],e],["exit",t[r][1],e]])):u=0,dn(t,n-1,r-n+3,c),r=n+c.length-u-2;break}}for(r=-1;++r<t.length;)t[r][1].type==="attentionSequence"&&(t[r][1].type="data");return t}function mse(t,e){const r=this.parser.constructs.attentionMarkers.null,n=this.previous,i=Ul(n);let s;return o;function o(l){return s=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===s)return t.consume(l),a;const c=t.exit("attentionSequence"),u=Ul(l),h=!u||u===2&&i||r.includes(l),f=!i||i===2&&u||r.includes(n);return c._open=!!(s===42?h:h&&(i||!f)),c._close=!!(s===42?f:f&&(u||!h)),e(l)}}function qk(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const gse={name:"autolink",tokenize:_se};function _se(t,e,r){let n=0;return i;function i(d){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(d),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(d){return Or(d)?(t.consume(d),o):d===64?r(d):c(d)}function o(d){return d===43||d===45||d===46||Sr(d)?(n=1,a(d)):c(d)}function a(d){return d===58?(t.consume(d),n=0,l):(d===43||d===45||d===46||Sr(d))&&n++<32?(t.consume(d),a):(n=0,c(d))}function l(d){return d===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(d),t.exit("autolinkMarker"),t.exit("autolink"),e):d===null||d===32||d===60||Tm(d)?r(d):(t.consume(d),l)}function c(d){return d===64?(t.consume(d),u):ose(d)?(t.consume(d),c):r(d)}function u(d){return Sr(d)?h(d):r(d)}function h(d){return d===46?(t.consume(d),n=0,u):d===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(d),t.exit("autolinkMarker"),t.exit("autolink"),e):f(d)}function f(d){if((d===45||Sr(d))&&n++<63){const g=d===45?f:h;return t.consume(d),g}return r(d)}}const of={partial:!0,tokenize:bse};function bse(t,e,r){return n;function n(s){return tt(s)?at(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||We(s)?e(s):r(s)}}const S6={continuation:{tokenize:vse},exit:wse,name:"blockQuote",tokenize:yse};function yse(t,e,r){const n=this;return i;function i(o){if(o===62){const a=n.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return r(o)}function s(o){return tt(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function vse(t,e,r){const n=this;return i;function i(o){return tt(o)?at(t,s,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(S6,e,r)(o)}}function wse(t){t.exit("blockQuote")}const x6={name:"characterEscape",tokenize:Ese};function Ese(t,e,r){return n;function n(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return lse(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):r(s)}}const T6={name:"characterReference",tokenize:Sse};function Sse(t,e,r){const n=this;let i=0,s,o;return a;function a(h){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),l}function l(h){return h===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(h),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),s=31,o=Sr,u(h))}function c(h){return h===88||h===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(h),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=ase,u):(t.enter("characterReferenceValue"),s=7,o=vy,u(h))}function u(h){if(h===59&&i){const f=t.exit("characterReferenceValue");return o===Sr&&!TE(n.sliceSerialize(f))?r(h):(t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(h)&&i++<s?(t.consume(h),u):r(h)}}const Kk={partial:!0,tokenize:Tse},Yk={concrete:!0,name:"codeFenced",tokenize:xse};function xse(t,e,r){const n=this,i={partial:!0,tokenize:w};let s=0,o=0,a;return l;function l(S){return c(S)}function c(S){const x=n.events[n.events.length-1];return s=x&&x[1].type==="linePrefix"?x[2].sliceSerialize(x[1],!0).length:0,a=S,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u(S)}function u(S){return S===a?(o++,t.consume(S),u):o<3?r(S):(t.exit("codeFencedFenceSequence"),tt(S)?at(t,h,"whitespace")(S):h(S))}function h(S){return S===null||We(S)?(t.exit("codeFencedFence"),n.interrupt?e(S):t.check(Kk,_,v)(S)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),f(S))}function f(S){return S===null||We(S)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),h(S)):tt(S)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),at(t,d,"whitespace")(S)):S===96&&S===a?r(S):(t.consume(S),f)}function d(S){return S===null||We(S)?h(S):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),g(S))}function g(S){return S===null||We(S)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),h(S)):S===96&&S===a?r(S):(t.consume(S),g)}function _(S){return t.attempt(i,v,m)(S)}function m(S){return t.enter("lineEnding"),t.consume(S),t.exit("lineEnding"),p}function p(S){return s>0&&tt(S)?at(t,b,"linePrefix",s+1)(S):b(S)}function b(S){return S===null||We(S)?t.check(Kk,_,v)(S):(t.enter("codeFlowValue"),y(S))}function y(S){return S===null||We(S)?(t.exit("codeFlowValue"),b(S)):(t.consume(S),y)}function v(S){return t.exit("codeFenced"),e(S)}function w(S,x,E){let T=0;return k;function k($){return S.enter("lineEnding"),S.consume($),S.exit("lineEnding"),B}function B($){return S.enter("codeFencedFence"),tt($)?at(S,P,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):P($)}function P($){return $===a?(S.enter("codeFencedFenceSequence"),O($)):E($)}function O($){return $===a?(T++,S.consume($),O):T>=o?(S.exit("codeFencedFenceSequence"),tt($)?at(S,A,"whitespace")($):A($)):E($)}function A($){return $===null||We($)?(S.exit("codeFencedFence"),x($)):E($)}}}function Tse(t,e,r){const n=this;return i;function i(o){return o===null?r(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return n.parser.lazy[n.now().line]?r(o):e(o)}}const P_={name:"codeIndented",tokenize:kse},Cse={partial:!0,tokenize:Ase};function kse(t,e,r){const n=this;return i;function i(c){return t.enter("codeIndented"),at(t,s,"linePrefix",5)(c)}function s(c){const u=n.events[n.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(c):r(c)}function o(c){return c===null?l(c):We(c)?t.attempt(Cse,o,l)(c):(t.enter("codeFlowValue"),a(c))}function a(c){return c===null||We(c)?(t.exit("codeFlowValue"),o(c)):(t.consume(c),a)}function l(c){return t.exit("codeIndented"),e(c)}}function Ase(t,e,r){const n=this;return i;function i(o){return n.parser.lazy[n.now().line]?r(o):We(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):at(t,s,"linePrefix",5)(o)}function s(o){const a=n.events[n.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):We(o)?i(o):r(o)}}const Rse={name:"codeText",previous:Ise,resolve:Pse,tokenize:Dse};function Pse(t){let e=t.length-4,r=3,n,i;if((t[r][1].type==="lineEnding"||t[r][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(n=r;++n<e;)if(t[n][1].type==="codeTextData"){t[r][1].type="codeTextPadding",t[e][1].type="codeTextPadding",r+=2,e-=2;break}}for(n=r-1,e++;++n<=e;)i===void 0?n!==e&&t[n][1].type!=="lineEnding"&&(i=n):(n===e||t[n][1].type==="lineEnding")&&(t[i][1].type="codeTextData",n!==i+2&&(t[i][1].end=t[n-1][1].end,t.splice(i+2,n-i-2),e-=n-i-2,n=i+2),i=void 0);return t}function Ise(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Dse(t,e,r){let n=0,i,s;return o;function o(h){return t.enter("codeText"),t.enter("codeTextSequence"),a(h)}function a(h){return h===96?(t.consume(h),n++,a):(t.exit("codeTextSequence"),l(h))}function l(h){return h===null?r(h):h===32?(t.enter("space"),t.consume(h),t.exit("space"),l):h===96?(s=t.enter("codeTextSequence"),i=0,u(h)):We(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),l):(t.enter("codeTextData"),c(h))}function c(h){return h===null||h===32||h===96||We(h)?(t.exit("codeTextData"),l(h)):(t.consume(h),c)}function u(h){return h===96?(t.consume(h),i++,u):i===n?(t.exit("codeTextSequence"),t.exit("codeText"),e(h)):(s.type="codeTextData",c(h))}}class Ose{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,r){const n=r??Number.POSITIVE_INFINITY;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,r,n){const i=r||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return n&&Hc(this.left,n),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Hc(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Hc(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const r=this.left.splice(e,Number.POSITIVE_INFINITY);Hc(this.right,r.reverse())}else{const r=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Hc(this.left,r.reverse())}}}function Hc(t,e){let r=0;if(e.length<1e4)t.push(...e);else for(;r<e.length;)t.push(...e.slice(r,r+1e4)),r+=1e4}function C6(t){const e={};let r=-1,n,i,s,o,a,l,c;const u=new Ose(t);for(;++r<u.length;){for(;r in e;)r=e[r];if(n=u.get(r),r&&n[1].type==="chunkFlow"&&u.get(r-1)[1].type==="listItemPrefix"&&(l=n[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(n[0]==="enter")n[1].contentType&&(Object.assign(e,Lse(u,r)),r=e[r],c=!0);else if(n[1]._container){for(s=r,i=void 0;s--&&(o=u.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(n[1].end={...u.get(i)[1].start},a=u.slice(i,r),a.unshift(n),u.splice(i,r-i+1,a))}}return dn(t,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function Lse(t,e){const r=t.get(e)[1],n=t.get(e)[2];let i=e-1;const s=[],o=r._tokenizer||n.parser[r.contentType](r.start),a=o.events,l=[],c={};let u,h,f=-1,d=r,g=0,_=0;const m=[_];for(;d;){for(;t.get(++i)[1]!==d;);s.push(i),d._tokenizer||(u=n.sliceStream(d),d.next||u.push(null),h&&o.defineSkip(d.start),d._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),d._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=d,d=d.next}for(d=r;++f<a.length;)a[f][0]==="exit"&&a[f-1][0]==="enter"&&a[f][1].type===a[f-1][1].type&&a[f][1].start.line!==a[f][1].end.line&&(_=f+1,m.push(_),d._tokenizer=void 0,d.previous=void 0,d=d.next);for(o.events=[],d?(d._tokenizer=void 0,d.previous=void 0):m.pop(),f=m.length;f--;){const p=a.slice(m[f],m[f+1]),b=s.pop();l.push([b,b+p.length-1]),t.splice(b,2,p)}for(l.reverse(),f=-1;++f<l.length;)c[g+l[f][0]]=g+l[f][1],g+=l[f][1]-l[f][0]-1;return c}const Nse={resolve:Bse,tokenize:Fse},Mse={partial:!0,tokenize:Hse};function Bse(t){return C6(t),t}function Fse(t,e){let r;return n;function n(a){return t.enter("content"),r=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):We(a)?t.check(Mse,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),r.next=t.enter("chunkContent",{contentType:"content",previous:r}),r=r.next,i}}function Hse(t,e,r){const n=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),at(t,s,"linePrefix")}function s(o){if(o===null||We(o))return r(o);const a=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(n.parser.constructs.flow,r,e)(o)}}function k6(t,e,r,n,i,s,o,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return h;function h(p){return p===60?(t.enter(n),t.enter(i),t.enter(s),t.consume(p),t.exit(s),f):p===null||p===32||p===41||Tm(p)?r(p):(t.enter(n),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),_(p))}function f(p){return p===62?(t.enter(s),t.consume(p),t.exit(s),t.exit(i),t.exit(n),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),d(p))}function d(p){return p===62?(t.exit("chunkString"),t.exit(a),f(p)):p===null||p===60||We(p)?r(p):(t.consume(p),p===92?g:d)}function g(p){return p===60||p===62||p===92?(t.consume(p),d):d(p)}function _(p){return!u&&(p===null||p===41||vt(p))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(n),e(p)):u<c&&p===40?(t.consume(p),u++,_):p===41?(t.consume(p),u--,_):p===null||p===32||p===40||Tm(p)?r(p):(t.consume(p),p===92?m:_)}function m(p){return p===40||p===41||p===92?(t.consume(p),_):_(p)}}function A6(t,e,r,n,i,s){const o=this;let a=0,l;return c;function c(d){return t.enter(n),t.enter(i),t.consume(d),t.exit(i),t.enter(s),u}function u(d){return a>999||d===null||d===91||d===93&&!l||d===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?r(d):d===93?(t.exit(s),t.enter(i),t.consume(d),t.exit(i),t.exit(n),e):We(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),u):(t.enter("chunkString",{contentType:"string"}),h(d))}function h(d){return d===null||d===91||d===93||We(d)||a++>999?(t.exit("chunkString"),u(d)):(t.consume(d),l||(l=!tt(d)),d===92?f:h)}function f(d){return d===91||d===92||d===93?(t.consume(d),a++,h):h(d)}}function R6(t,e,r,n,i,s){let o;return a;function a(f){return f===34||f===39||f===40?(t.enter(n),t.enter(i),t.consume(f),t.exit(i),o=f===40?41:f,l):r(f)}function l(f){return f===o?(t.enter(i),t.consume(f),t.exit(i),t.exit(n),e):(t.enter(s),c(f))}function c(f){return f===o?(t.exit(s),l(o)):f===null?r(f):We(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),at(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),u(f))}function u(f){return f===o||f===null||We(f)?(t.exit("chunkString"),c(f)):(t.consume(f),f===92?h:u)}function h(f){return f===o||f===92?(t.consume(f),u):u(f)}}function vu(t,e){let r;return n;function n(i){return We(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),r=!0,n):tt(i)?at(t,n,r?"linePrefix":"lineSuffix")(i):e(i)}}const Use={name:"definition",tokenize:$se},jse={partial:!0,tokenize:zse};function $se(t,e,r){const n=this;let i;return s;function s(d){return t.enter("definition"),o(d)}function o(d){return A6.call(n,t,a,r,"definitionLabel","definitionLabelMarker","definitionLabelString")(d)}function a(d){return i=zn(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),d===58?(t.enter("definitionMarker"),t.consume(d),t.exit("definitionMarker"),l):r(d)}function l(d){return vt(d)?vu(t,c)(d):c(d)}function c(d){return k6(t,u,r,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(d)}function u(d){return t.attempt(jse,h,h)(d)}function h(d){return tt(d)?at(t,f,"whitespace")(d):f(d)}function f(d){return d===null||We(d)?(t.exit("definition"),n.parser.defined.push(i),e(d)):r(d)}}function zse(t,e,r){return n;function n(a){return vt(a)?vu(t,i)(a):r(a)}function i(a){return R6(t,s,r,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return tt(a)?at(t,o,"whitespace")(a):o(a)}function o(a){return a===null||We(a)?e(a):r(a)}}const Vse={name:"hardBreakEscape",tokenize:Wse};function Wse(t,e,r){return n;function n(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return We(s)?(t.exit("hardBreakEscape"),e(s)):r(s)}}const Gse={name:"headingAtx",resolve:qse,tokenize:Kse};function qse(t,e){let r=t.length-2,n=3,i,s;return t[n][1].type==="whitespace"&&(n+=2),r-2>n&&t[r][1].type==="whitespace"&&(r-=2),t[r][1].type==="atxHeadingSequence"&&(n===r-1||r-4>n&&t[r-2][1].type==="whitespace")&&(r-=n+1===r?2:4),r>n&&(i={type:"atxHeadingText",start:t[n][1].start,end:t[r][1].end},s={type:"chunkText",start:t[n][1].start,end:t[r][1].end,contentType:"text"},dn(t,n,r-n+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function Kse(t,e,r){let n=0;return i;function i(u){return t.enter("atxHeading"),s(u)}function s(u){return t.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&n++<6?(t.consume(u),o):u===null||vt(u)?(t.exit("atxHeadingSequence"),a(u)):r(u)}function a(u){return u===35?(t.enter("atxHeadingSequence"),l(u)):u===null||We(u)?(t.exit("atxHeading"),e(u)):tt(u)?at(t,a,"whitespace")(u):(t.enter("atxHeadingText"),c(u))}function l(u){return u===35?(t.consume(u),l):(t.exit("atxHeadingSequence"),a(u))}function c(u){return u===null||u===35||vt(u)?(t.exit("atxHeadingText"),a(u)):(t.consume(u),c)}}const Yse=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Xk=["pre","script","style","textarea"],Xse={concrete:!0,name:"htmlFlow",resolveTo:Jse,tokenize:eoe},Qse={partial:!0,tokenize:roe},Zse={partial:!0,tokenize:toe};function Jse(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function eoe(t,e,r){const n=this;let i,s,o,a,l;return c;function c(H){return u(H)}function u(H){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(H),h}function h(H){return H===33?(t.consume(H),f):H===47?(t.consume(H),s=!0,_):H===63?(t.consume(H),i=3,n.interrupt?e:M):Or(H)?(t.consume(H),o=String.fromCharCode(H),m):r(H)}function f(H){return H===45?(t.consume(H),i=2,d):H===91?(t.consume(H),i=5,a=0,g):Or(H)?(t.consume(H),i=4,n.interrupt?e:M):r(H)}function d(H){return H===45?(t.consume(H),n.interrupt?e:M):r(H)}function g(H){const Z="CDATA[";return H===Z.charCodeAt(a++)?(t.consume(H),a===Z.length?n.interrupt?e:P:g):r(H)}function _(H){return Or(H)?(t.consume(H),o=String.fromCharCode(H),m):r(H)}function m(H){if(H===null||H===47||H===62||vt(H)){const Z=H===47,re=o.toLowerCase();return!Z&&!s&&Xk.includes(re)?(i=1,n.interrupt?e(H):P(H)):Yse.includes(o.toLowerCase())?(i=6,Z?(t.consume(H),p):n.interrupt?e(H):P(H)):(i=7,n.interrupt&&!n.parser.lazy[n.now().line]?r(H):s?b(H):y(H))}return H===45||Sr(H)?(t.consume(H),o+=String.fromCharCode(H),m):r(H)}function p(H){return H===62?(t.consume(H),n.interrupt?e:P):r(H)}function b(H){return tt(H)?(t.consume(H),b):k(H)}function y(H){return H===47?(t.consume(H),k):H===58||H===95||Or(H)?(t.consume(H),v):tt(H)?(t.consume(H),y):k(H)}function v(H){return H===45||H===46||H===58||H===95||Sr(H)?(t.consume(H),v):w(H)}function w(H){return H===61?(t.consume(H),S):tt(H)?(t.consume(H),w):y(H)}function S(H){return H===null||H===60||H===61||H===62||H===96?r(H):H===34||H===39?(t.consume(H),l=H,x):tt(H)?(t.consume(H),S):E(H)}function x(H){return H===l?(t.consume(H),l=null,T):H===null||We(H)?r(H):(t.consume(H),x)}function E(H){return H===null||H===34||H===39||H===47||H===60||H===61||H===62||H===96||vt(H)?w(H):(t.consume(H),E)}function T(H){return H===47||H===62||tt(H)?y(H):r(H)}function k(H){return H===62?(t.consume(H),B):r(H)}function B(H){return H===null||We(H)?P(H):tt(H)?(t.consume(H),B):r(H)}function P(H){return H===45&&i===2?(t.consume(H),te):H===60&&i===1?(t.consume(H),Q):H===62&&i===4?(t.consume(H),U):H===63&&i===3?(t.consume(H),M):H===93&&i===5?(t.consume(H),L):We(H)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(Qse,j,O)(H)):H===null||We(H)?(t.exit("htmlFlowData"),O(H)):(t.consume(H),P)}function O(H){return t.check(Zse,A,j)(H)}function A(H){return t.enter("lineEnding"),t.consume(H),t.exit("lineEnding"),$}function $(H){return H===null||We(H)?O(H):(t.enter("htmlFlowData"),P(H))}function te(H){return H===45?(t.consume(H),M):P(H)}function Q(H){return H===47?(t.consume(H),o="",ee):P(H)}function ee(H){if(H===62){const Z=o.toLowerCase();return Xk.includes(Z)?(t.consume(H),U):P(H)}return Or(H)&&o.length<8?(t.consume(H),o+=String.fromCharCode(H),ee):P(H)}function L(H){return H===93?(t.consume(H),M):P(H)}function M(H){return H===62?(t.consume(H),U):H===45&&i===2?(t.consume(H),M):P(H)}function U(H){return H===null||We(H)?(t.exit("htmlFlowData"),j(H)):(t.consume(H),U)}function j(H){return t.exit("htmlFlow"),e(H)}}function toe(t,e,r){const n=this;return i;function i(o){return We(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):r(o)}function s(o){return n.parser.lazy[n.now().line]?r(o):e(o)}}function roe(t,e,r){return n;function n(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(of,e,r)}}const noe={name:"htmlText",tokenize:ioe};function ioe(t,e,r){const n=this;let i,s,o;return a;function a(M){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(M),l}function l(M){return M===33?(t.consume(M),c):M===47?(t.consume(M),w):M===63?(t.consume(M),y):Or(M)?(t.consume(M),E):r(M)}function c(M){return M===45?(t.consume(M),u):M===91?(t.consume(M),s=0,g):Or(M)?(t.consume(M),b):r(M)}function u(M){return M===45?(t.consume(M),d):r(M)}function h(M){return M===null?r(M):M===45?(t.consume(M),f):We(M)?(o=h,Q(M)):(t.consume(M),h)}function f(M){return M===45?(t.consume(M),d):h(M)}function d(M){return M===62?te(M):M===45?f(M):h(M)}function g(M){const U="CDATA[";return M===U.charCodeAt(s++)?(t.consume(M),s===U.length?_:g):r(M)}function _(M){return M===null?r(M):M===93?(t.consume(M),m):We(M)?(o=_,Q(M)):(t.consume(M),_)}function m(M){return M===93?(t.consume(M),p):_(M)}function p(M){return M===62?te(M):M===93?(t.consume(M),p):_(M)}function b(M){return M===null||M===62?te(M):We(M)?(o=b,Q(M)):(t.consume(M),b)}function y(M){return M===null?r(M):M===63?(t.consume(M),v):We(M)?(o=y,Q(M)):(t.consume(M),y)}function v(M){return M===62?te(M):y(M)}function w(M){return Or(M)?(t.consume(M),S):r(M)}function S(M){return M===45||Sr(M)?(t.consume(M),S):x(M)}function x(M){return We(M)?(o=x,Q(M)):tt(M)?(t.consume(M),x):te(M)}function E(M){return M===45||Sr(M)?(t.consume(M),E):M===47||M===62||vt(M)?T(M):r(M)}function T(M){return M===47?(t.consume(M),te):M===58||M===95||Or(M)?(t.consume(M),k):We(M)?(o=T,Q(M)):tt(M)?(t.consume(M),T):te(M)}function k(M){return M===45||M===46||M===58||M===95||Sr(M)?(t.consume(M),k):B(M)}function B(M){return M===61?(t.consume(M),P):We(M)?(o=B,Q(M)):tt(M)?(t.consume(M),B):T(M)}function P(M){return M===null||M===60||M===61||M===62||M===96?r(M):M===34||M===39?(t.consume(M),i=M,O):We(M)?(o=P,Q(M)):tt(M)?(t.consume(M),P):(t.consume(M),A)}function O(M){return M===i?(t.consume(M),i=void 0,$):M===null?r(M):We(M)?(o=O,Q(M)):(t.consume(M),O)}function A(M){return M===null||M===34||M===39||M===60||M===61||M===96?r(M):M===47||M===62||vt(M)?T(M):(t.consume(M),A)}function $(M){return M===47||M===62||vt(M)?T(M):r(M)}function te(M){return M===62?(t.consume(M),t.exit("htmlTextData"),t.exit("htmlText"),e):r(M)}function Q(M){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(M),t.exit("lineEnding"),ee}function ee(M){return tt(M)?at(t,L,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):L(M)}function L(M){return t.enter("htmlTextData"),o(M)}}const CE={name:"labelEnd",resolveAll:loe,resolveTo:coe,tokenize:uoe},soe={tokenize:hoe},ooe={tokenize:foe},aoe={tokenize:doe};function loe(t){let e=-1;const r=[];for(;++e<t.length;){const n=t[e][1];if(r.push(t[e]),n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd"){const i=n.type==="labelImage"?4:2;n.type="data",e+=i}}return t.length!==r.length&&dn(t,0,t.length,r),t}function coe(t,e){let r=t.length,n=0,i,s,o,a;for(;r--;)if(i=t[r][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[r][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[r][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=r,i.type!=="labelLink")){n=2;break}}else i.type==="labelEnd"&&(o=r);const l={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},u={type:"labelText",start:{...t[s+n+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",c,e]],a=Sn(a,t.slice(s+1,s+n+3)),a=Sn(a,[["enter",u,e]]),a=Sn(a,Qg(e.parser.constructs.insideSpan.null,t.slice(s+n+4,o-3),e)),a=Sn(a,[["exit",u,e],t[o-2],t[o-1],["exit",c,e]]),a=Sn(a,t.slice(o+1)),a=Sn(a,[["exit",l,e]]),dn(t,s,t.length,a),t}function uoe(t,e,r){const n=this;let i=n.events.length,s,o;for(;i--;)if((n.events[i][1].type==="labelImage"||n.events[i][1].type==="labelLink")&&!n.events[i][1]._balanced){s=n.events[i][1];break}return a;function a(f){return s?s._inactive?h(f):(o=n.parser.defined.includes(zn(n.sliceSerialize({start:s.end,end:n.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(f),t.exit("labelMarker"),t.exit("labelEnd"),l):r(f)}function l(f){return f===40?t.attempt(soe,u,o?u:h)(f):f===91?t.attempt(ooe,u,o?c:h)(f):o?u(f):h(f)}function c(f){return t.attempt(aoe,u,h)(f)}function u(f){return e(f)}function h(f){return s._balanced=!0,r(f)}}function hoe(t,e,r){return n;function n(h){return t.enter("resource"),t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),i}function i(h){return vt(h)?vu(t,s)(h):s(h)}function s(h){return h===41?u(h):k6(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return vt(h)?vu(t,l)(h):u(h)}function a(h){return r(h)}function l(h){return h===34||h===39||h===40?R6(t,c,r,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):u(h)}function c(h){return vt(h)?vu(t,u)(h):u(h)}function u(h){return h===41?(t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),t.exit("resource"),e):r(h)}}function foe(t,e,r){const n=this;return i;function i(a){return A6.call(n,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return n.parser.defined.includes(zn(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?e(a):r(a)}function o(a){return r(a)}}function doe(t,e,r){return n;function n(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):r(s)}}const poe={name:"labelStartImage",resolveAll:CE.resolveAll,tokenize:moe};function moe(t,e,r){const n=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):r(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(a):e(a)}}const goe={name:"labelStartLink",resolveAll:CE.resolveAll,tokenize:_oe};function _oe(t,e,r){const n=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(o):e(o)}}const I_={name:"lineEnding",tokenize:boe};function boe(t,e){return r;function r(n){return t.enter("lineEnding"),t.consume(n),t.exit("lineEnding"),at(t,e,"linePrefix")}}const mp={name:"thematicBreak",tokenize:yoe};function yoe(t,e,r){let n=0,i;return s;function s(c){return t.enter("thematicBreak"),o(c)}function o(c){return i=c,a(c)}function a(c){return c===i?(t.enter("thematicBreakSequence"),l(c)):n>=3&&(c===null||We(c))?(t.exit("thematicBreak"),e(c)):r(c)}function l(c){return c===i?(t.consume(c),n++,l):(t.exit("thematicBreakSequence"),tt(c)?at(t,a,"whitespace")(c):a(c))}}const zr={continuation:{tokenize:Soe},exit:Toe,name:"list",tokenize:Eoe},voe={partial:!0,tokenize:Coe},woe={partial:!0,tokenize:xoe};function Eoe(t,e,r){const n=this,i=n.events[n.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(d){const g=n.containerState.type||(d===42||d===43||d===45?"listUnordered":"listOrdered");if(g==="listUnordered"?!n.containerState.marker||d===n.containerState.marker:vy(d)){if(n.containerState.type||(n.containerState.type=g,t.enter(g,{_container:!0})),g==="listUnordered")return t.enter("listItemPrefix"),d===42||d===45?t.check(mp,r,c)(d):c(d);if(!n.interrupt||d===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(d)}return r(d)}function l(d){return vy(d)&&++o<10?(t.consume(d),l):(!n.interrupt||o<2)&&(n.containerState.marker?d===n.containerState.marker:d===41||d===46)?(t.exit("listItemValue"),c(d)):r(d)}function c(d){return t.enter("listItemMarker"),t.consume(d),t.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||d,t.check(of,n.interrupt?r:u,t.attempt(voe,f,h))}function u(d){return n.containerState.initialBlankLine=!0,s++,f(d)}function h(d){return tt(d)?(t.enter("listItemPrefixWhitespace"),t.consume(d),t.exit("listItemPrefixWhitespace"),f):r(d)}function f(d){return n.containerState.size=s+n.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(d)}}function Soe(t,e,r){const n=this;return n.containerState._closeFlow=void 0,t.check(of,i,s);function i(a){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,at(t,e,"listItemIndent",n.containerState.size+1)(a)}function s(a){return n.containerState.furtherBlankLines||!tt(a)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,o(a)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,t.attempt(woe,e,o)(a))}function o(a){return n.containerState._closeFlow=!0,n.interrupt=void 0,at(t,t.attempt(zr,e,r),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function xoe(t,e,r){const n=this;return at(t,i,"listItemIndent",n.containerState.size+1);function i(s){const o=n.events[n.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===n.containerState.size?e(s):r(s)}}function Toe(t){t.exit(this.containerState.type)}function Coe(t,e,r){const n=this;return at(t,i,"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=n.events[n.events.length-1];return!tt(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):r(s)}}const Qk={name:"setextUnderline",resolveTo:koe,tokenize:Aoe};function koe(t,e){let r=t.length,n,i,s;for(;r--;)if(t[r][0]==="enter"){if(t[r][1].type==="content"){n=r;break}t[r][1].type==="paragraph"&&(i=r)}else t[r][1].type==="content"&&t.splice(r,1),!s&&t[r][1].type==="definition"&&(s=r);const o={type:"setextHeading",start:{...t[i][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[n][1],e]),t[n][1].end={...t[s][1].end}):t[n][1]=o,t.push(["exit",o,e]),t}function Aoe(t,e,r){const n=this;let i;return s;function s(c){let u=n.events.length,h;for(;u--;)if(n.events[u][1].type!=="lineEnding"&&n.events[u][1].type!=="linePrefix"&&n.events[u][1].type!=="content"){h=n.events[u][1].type==="paragraph";break}return!n.parser.lazy[n.now().line]&&(n.interrupt||h)?(t.enter("setextHeadingLine"),i=c,o(c)):r(c)}function o(c){return t.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===i?(t.consume(c),a):(t.exit("setextHeadingLineSequence"),tt(c)?at(t,l,"lineSuffix")(c):l(c))}function l(c){return c===null||We(c)?(t.exit("setextHeadingLine"),e(c)):r(c)}}const Roe={tokenize:Poe};function Poe(t){const e=this,r=t.attempt(of,n,t.attempt(this.parser.constructs.flowInitial,i,at(t,t.attempt(this.parser.constructs.flow,i,t.attempt(Nse,i)),"linePrefix")));return r;function n(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,r}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,r}}const Ioe={resolveAll:I6()},Doe=P6("string"),Ooe=P6("text");function P6(t){return{resolveAll:I6(t==="text"?Loe:void 0),tokenize:e};function e(r){const n=this,i=this.parser.constructs[t],s=r.attempt(i,o,a);return o;function o(u){return c(u)?s(u):a(u)}function a(u){if(u===null){r.consume(u);return}return r.enter("data"),r.consume(u),l}function l(u){return c(u)?(r.exit("data"),s(u)):(r.consume(u),l)}function c(u){if(u===null)return!0;const h=i[u];let f=-1;if(h)for(;++f<h.length;){const d=h[f];if(!d.previous||d.previous.call(n,n.previous))return!0}return!1}}}function I6(t){return e;function e(r,n){let i=-1,s;for(;++i<=r.length;)s===void 0?r[i]&&r[i][1].type==="data"&&(s=i,i++):(!r[i]||r[i][1].type!=="data")&&(i!==s+2&&(r[s][1].end=r[i-1][1].end,r.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(r,n):r}}function Loe(t,e){let r=0;for(;++r<=t.length;)if((r===t.length||t[r][1].type==="lineEnding")&&t[r-1][1].type==="data"){const n=t[r-1][1],i=e.sliceStream(n);let s=i.length,o=-1,a=0,l;for(;s--;){const c=i[s];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(c===-2)l=!0,a++;else if(c!==-1){s++;break}}if(a){const c={type:r===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:n.start._bufferIndex+o,_index:n.start._index+s,line:n.end.line,column:n.end.column-a,offset:n.end.offset-a},end:{...n.end}};n.end={...c.start},n.start.offset===n.end.offset?Object.assign(n,c):(t.splice(r,0,["enter",c,e],["exit",c,e]),r+=2)}r++}return t}const Noe={42:zr,43:zr,45:zr,48:zr,49:zr,50:zr,51:zr,52:zr,53:zr,54:zr,55:zr,56:zr,57:zr,62:S6},Moe={91:Use},Boe={[-2]:P_,[-1]:P_,32:P_},Foe={35:Gse,42:mp,45:[Qk,mp],60:Xse,61:Qk,95:mp,96:Yk,126:Yk},Hoe={38:T6,92:x6},Uoe={[-5]:I_,[-4]:I_,[-3]:I_,33:poe,38:T6,42:wy,60:[gse,noe],91:goe,92:[Vse,x6],93:CE,95:wy,96:Rse},joe={null:[wy,Ioe]},$oe={null:[42,95]},zoe={null:[]},Voe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:$oe,contentInitial:Moe,disable:zoe,document:Noe,flow:Foe,flowInitial:Boe,insideSpan:joe,string:Hoe,text:Uoe},Symbol.toStringTag,{value:"Module"}));function Woe(t,e,r){let n={_bufferIndex:-1,_index:0,line:r&&r.line||1,column:r&&r.column||1,offset:r&&r.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:x(w),check:x(S),consume:b,enter:y,exit:v,interrupt:x(S,{interrupt:!0})},c={code:null,containerState:{},defineSkip:_,events:[],now:g,parser:t,previous:null,sliceSerialize:f,sliceStream:d,write:h};let u=e.tokenize.call(c,l);return e.resolveAll&&s.push(e),c;function h(B){return o=Sn(o,B),m(),o[o.length-1]!==null?[]:(E(e,0),c.events=Qg(s,c.events,c),c.events)}function f(B,P){return qoe(d(B),P)}function d(B){return Goe(o,B)}function g(){const{_bufferIndex:B,_index:P,line:O,column:A,offset:$}=n;return{_bufferIndex:B,_index:P,line:O,column:A,offset:$}}function _(B){i[B.line]=B.column,k()}function m(){let B;for(;n._index<o.length;){const P=o[n._index];if(typeof P=="string")for(B=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===B&&n._bufferIndex<P.length;)p(P.charCodeAt(n._bufferIndex));else p(P)}}function p(B){u=u(B)}function b(B){We(B)?(n.line++,n.column=1,n.offset+=B===-3?2:1,k()):B!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===o[n._index].length&&(n._bufferIndex=-1,n._index++)),c.previous=B}function y(B,P){const O=P||{};return O.type=B,O.start=g(),c.events.push(["enter",O,c]),a.push(O),O}function v(B){const P=a.pop();return P.end=g(),c.events.push(["exit",P,c]),P}function w(B,P){E(B,P.from)}function S(B,P){P.restore()}function x(B,P){return O;function O(A,$,te){let Q,ee,L,M;return Array.isArray(A)?j(A):"tokenize"in A?j([A]):U(A);function U(ge){return X;function X(V){const ie=V!==null&&ge[V],se=V!==null&&ge.null,me=[...Array.isArray(ie)?ie:ie?[ie]:[],...Array.isArray(se)?se:se?[se]:[]];return j(me)(V)}}function j(ge){return Q=ge,ee=0,ge.length===0?te:H(ge[ee])}function H(ge){return X;function X(V){return M=T(),L=ge,ge.partial||(c.currentConstruct=ge),ge.name&&c.parser.constructs.disable.null.includes(ge.name)?re():ge.tokenize.call(P?Object.assign(Object.create(c),P):c,l,Z,re)(V)}}function Z(ge){return B(L,M),$}function re(ge){return M.restore(),++ee<Q.length?H(Q[ee]):te}}}function E(B,P){B.resolveAll&&!s.includes(B)&&s.push(B),B.resolve&&dn(c.events,P,c.events.length-P,B.resolve(c.events.slice(P),c)),B.resolveTo&&(c.events=B.resolveTo(c.events,c))}function T(){const B=g(),P=c.previous,O=c.currentConstruct,A=c.events.length,$=Array.from(a);return{from:A,restore:te};function te(){n=B,c.previous=P,c.currentConstruct=O,c.events.length=A,a=$,k()}}function k(){n.line in i&&n.column<2&&(n.column=i[n.line],n.offset+=i[n.line]-1)}}function Goe(t,e){const r=e.start._index,n=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(r===i)o=[t[r].slice(n,s)];else{if(o=t.slice(r,i),n>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(n):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function qoe(t,e){let r=-1;const n=[];let i;for(;++r<t.length;){const s=t[r];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,n.push(o)}return n.join("")}function Koe(t){const n={constructs:w6([Voe,...(t||{}).extensions||[]]),content:i(cse),defined:[],document:i(hse),flow:i(Roe),lazy:{},string:i(Doe),text:i(Ooe)};return n;function i(s){return o;function o(a){return Woe(n,s,a)}}}function Yoe(t){for(;!C6(t););return t}const Zk=/[\0\t\n\r]/g;function Xoe(){let t=1,e="",r=!0,n;return i;function i(s,o,a){const l=[];let c,u,h,f,d;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),h=0,e="",r&&(s.charCodeAt(0)===65279&&h++,r=void 0);h<s.length;){if(Zk.lastIndex=h,c=Zk.exec(s),f=c&&c.index!==void 0?c.index:s.length,d=s.charCodeAt(f),!c){e=s.slice(h);break}if(d===10&&h===f&&n)l.push(-3),n=void 0;else switch(n&&(l.push(-5),n=void 0),h<f&&(l.push(s.slice(h,f)),t+=f-h),d){case 0:{l.push(65533),t++;break}case 9:{for(u=Math.ceil(t/4)*4,l.push(-2);t++<u;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:n=!0,t=1}h=f+1}return a&&(n&&l.push(-5),e&&l.push(e),l.push(null)),l}}const Qoe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Zoe(t){return t.replace(Qoe,Joe)}function Joe(t,e,r){if(e)return e;if(r.charCodeAt(0)===35){const i=r.charCodeAt(1),s=i===120||i===88;return E6(r.slice(s?2:1),s?16:10)}return TE(r)||t}const D6={}.hasOwnProperty;function eae(t,e,r){return typeof e!="string"&&(r=e,e=void 0),tae(r)(Yoe(Koe(r).document().write(Xoe()(t,e,!0))))}function tae(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(oe),autolinkProtocol:T,autolinkEmail:T,atxHeading:s(he),blockQuote:s(se),characterEscape:T,characterReference:T,codeFenced:s(me),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(me,o),codeText:s(de,o),codeTextData:T,data:T,codeFlowValue:T,definition:s(ve),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(F),hardBreakEscape:s(ae),hardBreakTrailing:s(ae),htmlFlow:s(W,o),htmlFlowData:T,htmlText:s(W,o),htmlTextData:T,image:s(G),label:o,link:s(oe),listItem:s(Se),listItemValue:f,listOrdered:s(ye,h),listUnordered:s(ye),paragraph:s(pe),reference:H,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(he),strong:s(Te),thematicBreak:s(xe)},exit:{atxHeading:l(),atxHeadingSequence:w,autolink:l(),autolinkEmail:ie,autolinkProtocol:V,blockQuote:l(),characterEscapeValue:k,characterReferenceMarkerHexadecimal:re,characterReferenceMarkerNumeric:re,characterReferenceValue:ge,characterReference:X,codeFenced:l(m),codeFencedFence:_,codeFencedFenceInfo:d,codeFencedFenceMeta:g,codeFlowValue:k,codeIndented:l(p),codeText:l($),codeTextData:k,data:k,definition:l(),definitionDestinationString:v,definitionLabelString:b,definitionTitleString:y,emphasis:l(),hardBreakEscape:l(P),hardBreakTrailing:l(P),htmlFlow:l(O),htmlFlowData:k,htmlText:l(A),htmlTextData:k,image:l(Q),label:L,labelText:ee,lineEnding:B,link:l(te),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:Z,resourceDestinationString:M,resourceTitleString:U,resource:j,setextHeading:l(E),setextHeadingLineSequence:x,setextHeadingText:S,strong:l(),thematicBreak:l()}};O6(e,(t||{}).mdastExtensions||[]);const r={};return n;function n(ue){let Ce={type:"root",children:[]};const Pe={stack:[Ce],tokenStack:[],config:e,enter:a,exit:c,buffer:o,resume:u,data:r},ze=[];let z=-1;for(;++z<ue.length;)if(ue[z][1].type==="listOrdered"||ue[z][1].type==="listUnordered")if(ue[z][0]==="enter")ze.push(z);else{const I=ze.pop();z=i(ue,I,z)}for(z=-1;++z<ue.length;){const I=e[ue[z][0]];D6.call(I,ue[z][1].type)&&I[ue[z][1].type].call(Object.assign({sliceSerialize:ue[z][2].sliceSerialize},Pe),ue[z][1])}if(Pe.tokenStack.length>0){const I=Pe.tokenStack[Pe.tokenStack.length-1];(I[1]||Jk).call(Pe,void 0,I[0])}for(Ce.position={start:ws(ue.length>0?ue[0][1].start:{line:1,column:1,offset:0}),end:ws(ue.length>0?ue[ue.length-2][1].end:{line:1,column:1,offset:0})},z=-1;++z<e.transforms.length;)Ce=e.transforms[z](Ce)||Ce;return Ce}function i(ue,Ce,Pe){let ze=Ce-1,z=-1,I=!1,N,q,le,be;for(;++ze<=Pe;){const we=ue[ze];switch(we[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{we[0]==="enter"?z++:z--,be=void 0;break}case"lineEndingBlank":{we[0]==="enter"&&(N&&!be&&!z&&!le&&(le=ze),be=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:be=void 0}if(!z&&we[0]==="enter"&&we[1].type==="listItemPrefix"||z===-1&&we[0]==="exit"&&(we[1].type==="listUnordered"||we[1].type==="listOrdered")){if(N){let qe=ze;for(q=void 0;qe--;){const st=ue[qe];if(st[1].type==="lineEnding"||st[1].type==="lineEndingBlank"){if(st[0]==="exit")continue;q&&(ue[q][1].type="lineEndingBlank",I=!0),st[1].type="lineEnding",q=qe}else if(!(st[1].type==="linePrefix"||st[1].type==="blockQuotePrefix"||st[1].type==="blockQuotePrefixWhitespace"||st[1].type==="blockQuoteMarker"||st[1].type==="listItemIndent"))break}le&&(!q||le<q)&&(N._spread=!0),N.end=Object.assign({},q?ue[q][1].start:we[1].end),ue.splice(q||ze,0,["exit",N,we[2]]),ze++,Pe++}if(we[1].type==="listItemPrefix"){const qe={type:"listItem",_spread:!1,start:Object.assign({},we[1].start),end:void 0};N=qe,ue.splice(ze,0,["enter",qe,we[2]]),ze++,Pe++,le=void 0,be=!0}}}return ue[Ce][1]._spread=I,Pe}function s(ue,Ce){return Pe;function Pe(ze){a.call(this,ue(ze),ze),Ce&&Ce.call(this,ze)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(ue,Ce,Pe){this.stack[this.stack.length-1].children.push(ue),this.stack.push(ue),this.tokenStack.push([Ce,Pe||void 0]),ue.position={start:ws(Ce.start),end:void 0}}function l(ue){return Ce;function Ce(Pe){ue&&ue.call(this,Pe),c.call(this,Pe)}}function c(ue,Ce){const Pe=this.stack.pop(),ze=this.tokenStack.pop();if(ze)ze[0].type!==ue.type&&(Ce?Ce.call(this,ue,ze[0]):(ze[1]||Jk).call(this,ue,ze[0]));else throw new Error("Cannot close `"+ue.type+"` ("+yu({start:ue.start,end:ue.end})+"): its not open");Pe.position.end=ws(ue.end)}function u(){return xE(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function f(ue){if(this.data.expectingFirstListItemValue){const Ce=this.stack[this.stack.length-2];Ce.start=Number.parseInt(this.sliceSerialize(ue),10),this.data.expectingFirstListItemValue=void 0}}function d(){const ue=this.resume(),Ce=this.stack[this.stack.length-1];Ce.lang=ue}function g(){const ue=this.resume(),Ce=this.stack[this.stack.length-1];Ce.meta=ue}function _(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function m(){const ue=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=ue.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function p(){const ue=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=ue.replace(/(\r?\n|\r)$/g,"")}function b(ue){const Ce=this.resume(),Pe=this.stack[this.stack.length-1];Pe.label=Ce,Pe.identifier=zn(this.sliceSerialize(ue)).toLowerCase()}function y(){const ue=this.resume(),Ce=this.stack[this.stack.length-1];Ce.title=ue}function v(){const ue=this.resume(),Ce=this.stack[this.stack.length-1];Ce.url=ue}function w(ue){const Ce=this.stack[this.stack.length-1];if(!Ce.depth){const Pe=this.sliceSerialize(ue).length;Ce.depth=Pe}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function x(ue){const Ce=this.stack[this.stack.length-1];Ce.depth=this.sliceSerialize(ue).codePointAt(0)===61?1:2}function E(){this.data.setextHeadingSlurpLineEnding=void 0}function T(ue){const Pe=this.stack[this.stack.length-1].children;let ze=Pe[Pe.length-1];(!ze||ze.type!=="text")&&(ze=Ae(),ze.position={start:ws(ue.start),end:void 0},Pe.push(ze)),this.stack.push(ze)}function k(ue){const Ce=this.stack.pop();Ce.value+=this.sliceSerialize(ue),Ce.position.end=ws(ue.end)}function B(ue){const Ce=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Pe=Ce.children[Ce.children.length-1];Pe.position.end=ws(ue.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Ce.type)&&(T.call(this,ue),k.call(this,ue))}function P(){this.data.atHardBreak=!0}function O(){const ue=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=ue}function A(){const ue=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=ue}function $(){const ue=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=ue}function te(){const ue=this.stack[this.stack.length-1];if(this.data.inReference){const Ce=this.data.referenceType||"shortcut";ue.type+="Reference",ue.referenceType=Ce,delete ue.url,delete ue.title}else delete ue.identifier,delete ue.label;this.data.referenceType=void 0}function Q(){const ue=this.stack[this.stack.length-1];if(this.data.inReference){const Ce=this.data.referenceType||"shortcut";ue.type+="Reference",ue.referenceType=Ce,delete ue.url,delete ue.title}else delete ue.identifier,delete ue.label;this.data.referenceType=void 0}function ee(ue){const Ce=this.sliceSerialize(ue),Pe=this.stack[this.stack.length-2];Pe.label=Zoe(Ce),Pe.identifier=zn(Ce).toLowerCase()}function L(){const ue=this.stack[this.stack.length-1],Ce=this.resume(),Pe=this.stack[this.stack.length-1];if(this.data.inReference=!0,Pe.type==="link"){const ze=ue.children;Pe.children=ze}else Pe.alt=Ce}function M(){const ue=this.resume(),Ce=this.stack[this.stack.length-1];Ce.url=ue}function U(){const ue=this.resume(),Ce=this.stack[this.stack.length-1];Ce.title=ue}function j(){this.data.inReference=void 0}function H(){this.data.referenceType="collapsed"}function Z(ue){const Ce=this.resume(),Pe=this.stack[this.stack.length-1];Pe.label=Ce,Pe.identifier=zn(this.sliceSerialize(ue)).toLowerCase(),this.data.referenceType="full"}function re(ue){this.data.characterReferenceType=ue.type}function ge(ue){const Ce=this.sliceSerialize(ue),Pe=this.data.characterReferenceType;let ze;Pe?(ze=E6(Ce,Pe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ze=TE(Ce);const z=this.stack[this.stack.length-1];z.value+=ze}function X(ue){const Ce=this.stack.pop();Ce.position.end=ws(ue.end)}function V(ue){k.call(this,ue);const Ce=this.stack[this.stack.length-1];Ce.url=this.sliceSerialize(ue)}function ie(ue){k.call(this,ue);const Ce=this.stack[this.stack.length-1];Ce.url="mailto:"+this.sliceSerialize(ue)}function se(){return{type:"blockquote",children:[]}}function me(){return{type:"code",lang:null,meta:null,value:""}}function de(){return{type:"inlineCode",value:""}}function ve(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function F(){return{type:"emphasis",children:[]}}function he(){return{type:"heading",depth:0,children:[]}}function ae(){return{type:"break"}}function W(){return{type:"html",value:""}}function G(){return{type:"image",title:null,url:"",alt:null}}function oe(){return{type:"link",title:null,url:"",children:[]}}function ye(ue){return{type:"list",ordered:ue.type==="listOrdered",start:null,spread:ue._spread,children:[]}}function Se(ue){return{type:"listItem",spread:ue._spread,checked:null,children:[]}}function pe(){return{type:"paragraph",children:[]}}function Te(){return{type:"strong",children:[]}}function Ae(){return{type:"text",value:""}}function xe(){return{type:"thematicBreak"}}}function ws(t){return{line:t.line,column:t.column,offset:t.offset}}function O6(t,e){let r=-1;for(;++r<e.length;){const n=e[r];Array.isArray(n)?O6(t,n):rae(t,n)}}function rae(t,e){let r;for(r in e)if(D6.call(e,r))switch(r){case"canContainEols":{const n=e[r];n&&t[r].push(...n);break}case"transforms":{const n=e[r];n&&t[r].push(...n);break}case"enter":case"exit":{const n=e[r];n&&Object.assign(t[r],n);break}}}function Jk(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+yu({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+yu({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+yu({start:e.start,end:e.end})+") is still open")}function nae(t){const e=this;e.parser=r;function r(n){return eae(n,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function iae(t,e){const r={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,r),t.applyData(e,r)}function sae(t,e){const r={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,r),[t.applyData(e,r),{type:"text",value:`
`}]}function oae(t,e){const r=e.value?e.value+`
`:"",n={};e.lang&&(n.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:n,children:[{type:"text",value:r}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function aae(t,e){const r={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function lae(t,e){const r={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function cae(t,e){const r=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=String(e.identifier).toUpperCase(),i=hc(n.toLowerCase()),s=t.footnoteOrder.indexOf(n);let o,a=t.footnoteCounts.get(n);a===void 0?(a=0,t.footnoteOrder.push(n),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(n,a);const l={type:"element",tagName:"a",properties:{href:"#"+r+"fn-"+i,id:r+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,c),t.applyData(e,c)}function uae(t,e){const r={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function hae(t,e){if(t.options.allowDangerousHtml){const r={type:"raw",value:e.value};return t.patch(e,r),t.applyData(e,r)}}function L6(t,e){const r=e.referenceType;let n="]";if(r==="collapsed"?n+="[]":r==="full"&&(n+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+n}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=n:i.push({type:"text",value:n}),i}function fae(t,e){const r=String(e.identifier).toUpperCase(),n=t.definitionById.get(r);if(!n)return L6(t,e);const i={src:hc(n.url||""),alt:e.alt};n.title!==null&&n.title!==void 0&&(i.title=n.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function dae(t,e){const r={src:hc(e.url)};e.alt!==null&&e.alt!==void 0&&(r.alt=e.alt),e.title!==null&&e.title!==void 0&&(r.title=e.title);const n={type:"element",tagName:"img",properties:r,children:[]};return t.patch(e,n),t.applyData(e,n)}function pae(t,e){const r={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,r);const n={type:"element",tagName:"code",properties:{},children:[r]};return t.patch(e,n),t.applyData(e,n)}function mae(t,e){const r=String(e.identifier).toUpperCase(),n=t.definitionById.get(r);if(!n)return L6(t,e);const i={href:hc(n.url||"")};n.title!==null&&n.title!==void 0&&(i.title=n.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function gae(t,e){const r={href:hc(e.url)};e.title!==null&&e.title!==void 0&&(r.title=e.title);const n={type:"element",tagName:"a",properties:r,children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function _ae(t,e,r){const n=t.all(e),i=r?bae(r):N6(e),s={},o=[];if(typeof e.checked=="boolean"){const u=n[0];let h;u&&u.type==="element"&&u.tagName==="p"?h=u:(h={type:"element",tagName:"p",properties:{},children:[]},n.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<n.length;){const u=n[a];(i||a!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?o.push(...u.children):o.push(u)}const l=n[n.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,c),t.applyData(e,c)}function bae(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const r=t.children;let n=-1;for(;!e&&++n<r.length;)e=N6(r[n])}return e}function N6(t){const e=t.spread;return e??t.children.length>1}function yae(t,e){const r={},n=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(r.start=e.start);++i<n.length;){const o=n[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){r.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:r,children:t.wrap(n,!0)};return t.patch(e,s),t.applyData(e,s)}function vae(t,e){const r={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function wae(t,e){const r={type:"root",children:t.wrap(t.all(e))};return t.patch(e,r),t.applyData(e,r)}function Eae(t,e){const r={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function Sae(t,e){const r=t.all(e),n=r.shift(),i=[];if(n){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([n],!0)};t.patch(e.children[0],o),i.push(o)}if(r.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(r,!0)},a=ji(e.children[1]),l=Yg(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function xae(t,e,r){const n=r?r.children:void 0,s=(n?n.indexOf(e):1)===0?"th":"td",o=r&&r.type==="table"?r.align:void 0,a=o?o.length:e.children.length;let l=-1;const c=[];for(;++l<a;){const h=e.children[l],f={},d=o?o[l]:void 0;d&&(f.align=d);let g={type:"element",tagName:s,properties:f,children:[]};h&&(g.children=t.all(h),t.patch(h,g),g=t.applyData(h,g)),c.push(g)}const u={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,u),t.applyData(e,u)}function Tae(t,e){const r={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}const eA=9,tA=32;function Cae(t){const e=String(t),r=/\r?\n|\r/g;let n=r.exec(e),i=0;const s=[];for(;n;)s.push(rA(e.slice(i,n.index),i>0,!0),n[0]),i=n.index+n[0].length,n=r.exec(e);return s.push(rA(e.slice(i),i>0,!1)),s.join("")}function rA(t,e,r){let n=0,i=t.length;if(e){let s=t.codePointAt(n);for(;s===eA||s===tA;)n++,s=t.codePointAt(n)}if(r){let s=t.codePointAt(i-1);for(;s===eA||s===tA;)i--,s=t.codePointAt(i-1)}return i>n?t.slice(n,i):""}function kae(t,e){const r={type:"text",value:Cae(String(e.value))};return t.patch(e,r),t.applyData(e,r)}function Aae(t,e){const r={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,r),t.applyData(e,r)}const Rae={blockquote:iae,break:sae,code:oae,delete:aae,emphasis:lae,footnoteReference:cae,heading:uae,html:hae,imageReference:fae,image:dae,inlineCode:pae,linkReference:mae,link:gae,listItem:_ae,list:yae,paragraph:vae,root:wae,strong:Eae,table:Sae,tableCell:Tae,tableRow:xae,text:kae,thematicBreak:Aae,toml:Ad,yaml:Ad,definition:Ad,footnoteDefinition:Ad};function Ad(){}const M6=-1,Zg=0,Cm=1,km=2,kE=3,AE=4,RE=5,PE=6,B6=7,F6=8,nA=typeof self=="object"?self:globalThis,Pae=(t,e)=>{const r=(i,s)=>(t.set(s,i),i),n=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case Zg:case M6:return r(o,i);case Cm:{const a=r([],i);for(const l of o)a.push(n(l));return a}case km:{const a=r({},i);for(const[l,c]of o)a[n(l)]=n(c);return a}case kE:return r(new Date(o),i);case AE:{const{source:a,flags:l}=o;return r(new RegExp(a,l),i)}case RE:{const a=r(new Map,i);for(const[l,c]of o)a.set(n(l),n(c));return a}case PE:{const a=r(new Set,i);for(const l of o)a.add(n(l));return a}case B6:{const{name:a,message:l}=o;return r(new nA[a](l),i)}case F6:return r(BigInt(o),i);case"BigInt":return r(Object(BigInt(o)),i)}return r(new nA[s](o),i)};return n},iA=t=>Pae(new Map,t)(0),ja="",{toString:Iae}={},{keys:Dae}=Object,Uc=t=>{const e=typeof t;if(e!=="object"||!t)return[Zg,e];const r=Iae.call(t).slice(8,-1);switch(r){case"Array":return[Cm,ja];case"Object":return[km,ja];case"Date":return[kE,ja];case"RegExp":return[AE,ja];case"Map":return[RE,ja];case"Set":return[PE,ja]}return r.includes("Array")?[Cm,r]:r.includes("Error")?[B6,r]:[km,r]},Rd=([t,e])=>t===Zg&&(e==="function"||e==="symbol"),Oae=(t,e,r,n)=>{const i=(o,a)=>{const l=n.push(o)-1;return r.set(a,l),l},s=o=>{if(r.has(o))return r.get(o);let[a,l]=Uc(o);switch(a){case Zg:{let u=o;switch(l){case"bigint":a=F6,u=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return i([M6],o)}return i([a,u],o)}case Cm:{if(l)return i([l,[...o]],o);const u=[],h=i([a,u],o);for(const f of o)u.push(s(f));return h}case km:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const u=[],h=i([a,u],o);for(const f of Dae(o))(t||!Rd(Uc(o[f])))&&u.push([s(f),s(o[f])]);return h}case kE:return i([a,o.toISOString()],o);case AE:{const{source:u,flags:h}=o;return i([a,{source:u,flags:h}],o)}case RE:{const u=[],h=i([a,u],o);for(const[f,d]of o)(t||!(Rd(Uc(f))||Rd(Uc(d))))&&u.push([s(f),s(d)]);return h}case PE:{const u=[],h=i([a,u],o);for(const f of o)(t||!Rd(Uc(f)))&&u.push(s(f));return h}}const{message:c}=o;return i([a,{name:l,message:c}],o)};return s},sA=(t,{json:e,lossy:r}={})=>{const n=[];return Oae(!(e||r),!!e,new Map,n)(t),n},ha=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?iA(sA(t,e)):structuredClone(t):(t,e)=>iA(sA(t,e));function Lae(t,e){const r=[{type:"text",value:""}];return e>1&&r.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),r}function Nae(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function Mae(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=t.options.footnoteBackContent||Lae,n=t.options.footnoteBackLabel||Nae,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[l]);if(!c)continue;const u=t.all(c),h=String(c.identifier).toUpperCase(),f=hc(h.toLowerCase());let d=0;const g=[],_=t.footnoteCounts.get(h);for(;_!==void 0&&++d<=_;){g.length>0&&g.push({type:"text",value:" "});let b=typeof r=="string"?r:r(l,d);typeof b=="string"&&(b={type:"text",value:b}),g.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+f+(d>1?"-"+d:""),dataFootnoteBackref:"",ariaLabel:typeof n=="string"?n:n(l,d),className:["data-footnote-backref"]},children:Array.isArray(b)?b:[b]})}const m=u[u.length-1];if(m&&m.type==="element"&&m.tagName==="p"){const b=m.children[m.children.length-1];b&&b.type==="text"?b.value+=" ":m.children.push({type:"text",value:" "}),m.children.push(...g)}else u.push(...g);const p={type:"element",tagName:"li",properties:{id:e+"fn-"+f},children:t.wrap(u,!0)};t.patch(c,p),a.push(p)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...ha(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const Jg=function(t){if(t==null)return Uae;if(typeof t=="function")return e0(t);if(typeof t=="object")return Array.isArray(t)?Bae(t):Fae(t);if(typeof t=="string")return Hae(t);throw new Error("Expected function, string, or object as test")};function Bae(t){const e=[];let r=-1;for(;++r<t.length;)e[r]=Jg(t[r]);return e0(n);function n(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function Fae(t){const e=t;return e0(r);function r(n){const i=n;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function Hae(t){return e0(e);function e(r){return r&&r.type===t}}function e0(t){return e;function e(r,n,i){return!!(jae(r)&&t.call(this,r,typeof n=="number"?n:void 0,i||void 0))}}function Uae(){return!0}function jae(t){return t!==null&&typeof t=="object"&&"type"in t}const H6=[],$ae=!0,Ey=!1,U6="skip";function j6(t,e,r,n){let i;typeof e=="function"&&typeof r!="function"?(n=r,r=e):i=e;const s=Jg(i),o=n?-1:1;a(t,void 0,[])();function a(l,c,u){const h=l&&typeof l=="object"?l:{};if(typeof h.type=="string"){const d=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(l.type+(d?"<"+d+">":""))+")"})}return f;function f(){let d=H6,g,_,m;if((!e||s(l,c,u[u.length-1]||void 0))&&(d=zae(r(l,u)),d[0]===Ey))return d;if("children"in l&&l.children){const p=l;if(p.children&&d[0]!==U6)for(_=(n?p.children.length:-1)+o,m=u.concat(p);_>-1&&_<p.children.length;){const b=p.children[_];if(g=a(b,_,m)(),g[0]===Ey)return g;_=typeof g[1]=="number"?g[1]:_+o}}return d}}}function zae(t){return Array.isArray(t)?t:typeof t=="number"?[$ae,t]:t==null?H6:[t]}function af(t,e,r,n){let i,s,o;typeof e=="function"&&typeof r!="function"?(s=void 0,o=e,i=r):(s=e,o=r,i=n),j6(t,s,a,i);function a(l,c){const u=c[c.length-1],h=u?u.children.indexOf(l):void 0;return o(l,h,u)}}const Sy={}.hasOwnProperty,Vae={};function Wae(t,e){const r=e||Vae,n=new Map,i=new Map,s=new Map,o={...Rae,...r.handlers},a={all:c,applyData:qae,definitionById:n,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:r,patch:Gae,wrap:Yae};return af(t,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const h=u.type==="definition"?n:i,f=String(u.identifier).toUpperCase();h.has(f)||h.set(f,u)}}),a;function l(u,h){const f=u.type,d=a.handlers[f];if(Sy.call(a.handlers,f)&&d)return d(a,u,h);if(a.options.passThrough&&a.options.passThrough.includes(f)){if("children"in u){const{children:_,...m}=u,p=ha(m);return p.children=a.all(u),p}return ha(u)}return(a.options.unknownHandler||Kae)(a,u,h)}function c(u){const h=[];if("children"in u){const f=u.children;let d=-1;for(;++d<f.length;){const g=a.one(f[d],u);if(g){if(d&&f[d-1].type==="break"&&(!Array.isArray(g)&&g.type==="text"&&(g.value=oA(g.value)),!Array.isArray(g)&&g.type==="element")){const _=g.children[0];_&&_.type==="text"&&(_.value=oA(_.value))}Array.isArray(g)?h.push(...g):h.push(g)}}}return h}}function Gae(t,e){t.position&&(e.position=m6(t))}function qae(t,e){let r=e;if(t&&t.data){const n=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof n=="string")if(r.type==="element")r.tagName=n;else{const o="children"in r?r.children:[r];r={type:"element",tagName:n,properties:{},children:o}}r.type==="element"&&s&&Object.assign(r.properties,ha(s)),"children"in r&&r.children&&i!==null&&i!==void 0&&(r.children=i)}return r}function Kae(t,e){const r=e.data||{},n="value"in e&&!(Sy.call(r,"hProperties")||Sy.call(r,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Yae(t,e){const r=[];let n=-1;for(e&&r.push({type:"text",value:`
`});++n<t.length;)n&&r.push({type:"text",value:`
`}),r.push(t[n]);return e&&t.length>0&&r.push({type:"text",value:`
`}),r}function oA(t){let e=0,r=t.charCodeAt(e);for(;r===9||r===32;)e++,r=t.charCodeAt(e);return t.slice(e)}function aA(t,e){const r=Wae(t,e),n=r.one(t,void 0),i=Mae(r),s=Array.isArray(n)?{type:"root",children:n}:n||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Xae(t,e){return t&&"run"in t?async function(r,n){const i=aA(r,{file:n,...e});await t.run(i,n)}:function(r,n){return aA(r,{file:n,...t||e})}}function lA(t){if(t)throw t}var gp=Object.prototype.hasOwnProperty,$6=Object.prototype.toString,cA=Object.defineProperty,uA=Object.getOwnPropertyDescriptor,hA=function(e){return typeof Array.isArray=="function"?Array.isArray(e):$6.call(e)==="[object Array]"},fA=function(e){if(!e||$6.call(e)!=="[object Object]")return!1;var r=gp.call(e,"constructor"),n=e.constructor&&e.constructor.prototype&&gp.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!n)return!1;var i;for(i in e);return typeof i>"u"||gp.call(e,i)},dA=function(e,r){cA&&r.name==="__proto__"?cA(e,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):e[r.name]=r.newValue},pA=function(e,r){if(r==="__proto__")if(gp.call(e,r)){if(uA)return uA(e,r).value}else return;return e[r]},Qae=function t(){var e,r,n,i,s,o,a=arguments[0],l=1,c=arguments.length,u=!1;for(typeof a=="boolean"&&(u=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<c;++l)if(e=arguments[l],e!=null)for(r in e)n=pA(a,r),i=pA(e,r),a!==i&&(u&&i&&(fA(i)||(s=hA(i)))?(s?(s=!1,o=n&&hA(n)?n:[]):o=n&&fA(n)?n:{},dA(a,{name:r,newValue:t(u,o,i)})):typeof i<"u"&&dA(a,{name:r,newValue:i}));return a};const D_=mn(Qae);function xy(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function Zae(){const t=[],e={run:r,use:n};return e;function r(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...c){const u=t[++s];let h=-1;if(l){o(l);return}for(;++h<i.length;)(c[h]===null||c[h]===void 0)&&(c[h]=i[h]);i=c,u?Jae(u,a)(...c):o(null,...c)}}function n(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function Jae(t,e){let r;return n;function n(...o){const a=t.length>o.length;let l;a&&o.push(i);try{l=t.apply(this,o)}catch(c){const u=c;if(a&&r)throw u;return i(u)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){r||(r=!0,e(o,...a))}function s(o){i(null,o)}}const fi={basename:ele,dirname:tle,extname:rle,join:nle,sep:"/"};function ele(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');lf(t);let r=0,n=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){r=i+1;break}}else n<0&&(s=!0,n=i+1);return n<0?"":t.slice(r,n)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){r=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(n=i):(a=-1,n=o));return r===n?n=o:n<0&&(n=t.length),t.slice(r,n)}function tle(t){if(lf(t),t.length===0)return".";let e=-1,r=t.length,n;for(;--r;)if(t.codePointAt(r)===47){if(n){e=r;break}}else n||(n=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function rle(t){lf(t);let e=t.length,r=-1,n=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){n=e+1;break}continue}r<0&&(o=!0,r=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||r<0||s===0||s===1&&i===r-1&&i===n+1?"":t.slice(i,r)}function nle(...t){let e=-1,r;for(;++e<t.length;)lf(t[e]),t[e]&&(r=r===void 0?t[e]:r+"/"+t[e]);return r===void 0?".":ile(r)}function ile(t){lf(t);const e=t.codePointAt(0)===47;let r=sle(t,!e);return r.length===0&&!e&&(r="."),r.length>0&&t.codePointAt(t.length-1)===47&&(r+="/"),e?"/"+r:r}function sle(t,e){let r="",n=0,i=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(r.length<2||n!==2||r.codePointAt(r.length-1)!==46||r.codePointAt(r.length-2)!==46){if(r.length>2){if(l=r.lastIndexOf("/"),l!==r.length-1){l<0?(r="",n=0):(r=r.slice(0,l),n=r.length-1-r.lastIndexOf("/")),i=o,s=0;continue}}else if(r.length>0){r="",n=0,i=o,s=0;continue}}e&&(r=r.length>0?r+"/..":"..",n=2)}else r.length>0?r+="/"+t.slice(i+1,o):r=t.slice(i+1,o),n=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return r}function lf(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const ole={cwd:ale};function ale(){return"/"}function Ty(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function lle(t){if(typeof t=="string")t=new URL(t);else if(!Ty(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return cle(t)}function cle(t){if(t.hostname!==""){const n=new TypeError('File URL host must be "localhost" or empty on darwin');throw n.code="ERR_INVALID_FILE_URL_HOST",n}const e=t.pathname;let r=-1;for(;++r<e.length;)if(e.codePointAt(r)===37&&e.codePointAt(r+1)===50){const n=e.codePointAt(r+2);if(n===70||n===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const O_=["history","path","basename","stem","extname","dirname"];class z6{constructor(e){let r;e?Ty(e)?r={path:e}:typeof e=="string"||ule(e)?r={value:e}:r=e:r={},this.cwd="cwd"in r?"":ole.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n=-1;for(;++n<O_.length;){const s=O_[n];s in r&&r[s]!==void 0&&r[s]!==null&&(this[s]=s==="history"?[...r[s]]:r[s])}let i;for(i in r)O_.includes(i)||(this[i]=r[i])}get basename(){return typeof this.path=="string"?fi.basename(this.path):void 0}set basename(e){N_(e,"basename"),L_(e,"basename"),this.path=fi.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?fi.dirname(this.path):void 0}set dirname(e){mA(this.basename,"dirname"),this.path=fi.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?fi.extname(this.path):void 0}set extname(e){if(L_(e,"extname"),mA(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=fi.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Ty(e)&&(e=lle(e)),N_(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?fi.basename(this.path,this.extname):void 0}set stem(e){N_(e,"stem"),L_(e,"stem"),this.path=fi.join(this.dirname||"",e+(this.extname||""))}fail(e,r,n){const i=this.message(e,r,n);throw i.fatal=!0,i}info(e,r,n){const i=this.message(e,r,n);return i.fatal=void 0,i}message(e,r,n){const i=new Ar(e,r,n);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function L_(t,e){if(t&&t.includes(fi.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+fi.sep+"`")}function N_(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function mA(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function ule(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const hle=function(t){const n=this.constructor.prototype,i=n[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,n),s},fle={}.hasOwnProperty;class IE extends hle{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Zae()}copy(){const e=new IE;let r=-1;for(;++r<this.attachers.length;){const n=this.attachers[r];e.use(...n)}return e.data(D_(!0,{},this.namespace)),e}data(e,r){return typeof e=="string"?arguments.length===2?(F_("data",this.frozen),this.namespace[e]=r,this):fle.call(this.namespace,e)&&this.namespace[e]||void 0:e?(F_("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[r,...n]=this.attachers[this.freezeIndex];if(n[0]===!1)continue;n[0]===!0&&(n[0]=void 0);const i=r.call(e,...n);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const r=Pd(e),n=this.parser||this.Parser;return M_("parse",n),n(String(r),r)}process(e,r){const n=this;return this.freeze(),M_("process",this.parser||this.Parser),B_("process",this.compiler||this.Compiler),r?i(void 0,r):new Promise(i);function i(s,o){const a=Pd(e),l=n.parse(a);n.run(l,a,function(u,h,f){if(u||!h||!f)return c(u);const d=h,g=n.stringify(d,f);mle(g)?f.value=g:f.result=g,c(u,f)});function c(u,h){u||!h?o(u):s?s(h):r(void 0,h)}}}processSync(e){let r=!1,n;return this.freeze(),M_("processSync",this.parser||this.Parser),B_("processSync",this.compiler||this.Compiler),this.process(e,i),_A("processSync","process",r),n;function i(s,o){r=!0,lA(s),n=o}}run(e,r,n){gA(e),this.freeze();const i=this.transformers;return!n&&typeof r=="function"&&(n=r,r=void 0),n?s(void 0,n):new Promise(s);function s(o,a){const l=Pd(r);i.run(e,l,c);function c(u,h,f){const d=h||e;u?a(u):o?o(d):n(void 0,d,f)}}}runSync(e,r){let n=!1,i;return this.run(e,r,s),_A("runSync","run",n),i;function s(o,a){lA(o),i=a,n=!0}}stringify(e,r){this.freeze();const n=Pd(r),i=this.compiler||this.Compiler;return B_("stringify",i),gA(e),i(e,n)}use(e,...r){const n=this.attachers,i=this.namespace;if(F_("use",this.frozen),e!=null)if(typeof e=="function")l(e,r);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...h]=c;l(u,h)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(i.settings=D_(!0,i.settings,c.settings))}function a(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const h=c[u];s(h)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let h=-1,f=-1;for(;++h<n.length;)if(n[h][0]===c){f=h;break}if(f===-1)n.push([c,...u]);else if(u.length>0){let[d,...g]=u;const _=n[f][1];xy(_)&&xy(d)&&(d=D_(!0,_,d)),n[f]=[c,d,...g]}}}}const dle=new IE().freeze();function M_(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function B_(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function F_(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function gA(t){if(!xy(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function _A(t,e,r){if(!r)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Pd(t){return ple(t)?t:new z6(t)}function ple(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function mle(t){return typeof t=="string"||gle(t)}function gle(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const _le="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",bA=[],yA={allowDangerousHtml:!0},ble=/^(https?|ircs?|mailto|xmpp)$/i,yle=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function vle(t){const e=t.allowedElements,r=t.allowElement,n=t.children||"",i=t.className,s=t.components,o=t.disallowedElements,a=t.rehypePlugins||bA,l=t.remarkPlugins||bA,c=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...yA}:yA,u=t.skipHtml,h=t.unwrapDisallowed,f=t.urlTransform||wle,d=dle().use(nae).use(l).use(Xae,c).use(a),g=new z6;typeof n=="string"&&(g.value=n);for(const b of yle)Object.hasOwn(t,b.from)&&(""+b.from+(b.to?"use `"+b.to+"` instead":"remove it")+_le+b.id,void 0);const _=d.parse(g);let m=d.runSync(_,g);return i&&(m={type:"element",tagName:"div",properties:{className:i},children:m.type==="root"?m.children:[m]}),af(m,p),Hie(m,{Fragment:R.Fragment,components:s,ignoreInvalidStyle:!0,jsx:R.jsx,jsxs:R.jsxs,passKeys:!0,passNode:!0});function p(b,y,v){if(b.type==="raw"&&v&&typeof y=="number")return u?v.children.splice(y,1):v.children[y]={type:"text",value:b.value},y;if(b.type==="element"){let w;for(w in R_)if(Object.hasOwn(R_,w)&&Object.hasOwn(b.properties,w)){const S=b.properties[w],x=R_[w];(x===null||x.includes(b.tagName))&&(b.properties[w]=f(String(S||""),w,b))}}if(b.type==="element"){let w=e?!e.includes(b.tagName):o?o.includes(b.tagName):!1;if(!w&&r&&typeof y=="number"&&(w=!r(b,y,v)),w&&v&&typeof y=="number")return h&&b.children?v.children.splice(y,1,...b.children):v.children.splice(y,1),y}}}function wle(t){const e=t.indexOf(":"),r=t.indexOf("?"),n=t.indexOf("#"),i=t.indexOf("/");return e<0||i>-1&&e>i||r>-1&&e>r||n>-1&&e>n||ble.test(t.slice(0,e))?t:""}const vA=/[#.]/g;function Ele(t,e){const r=t||"",n={};let i=0,s,o;for(;i<r.length;){vA.lastIndex=i;const a=vA.exec(r),l=r.slice(i,a?a.index:r.length);l&&(s?s==="#"?n.id=l:Array.isArray(n.className)?n.className.push(l):n.className=[l]:o=l,i+=l.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||e||"div",properties:n,children:[]}}const Cy={}.hasOwnProperty;function V6(t,e,r){const n=r&&Cle(r);function i(s,o,...a){let l=-1,c;if(s==null){c={type:"root",children:[]};const u=o;a.unshift(u)}else if(c=Ele(s,e),c.tagName=c.tagName.toLowerCase(),n&&Cy.call(n,c.tagName)&&(c.tagName=n[c.tagName]),Sle(o))a.unshift(o);else{let u;for(u in o)Cy.call(o,u)&&xle(t,c.properties,u,o[u])}for(;++l<a.length;)ky(c.children,a[l]);return c.type==="element"&&c.tagName==="template"&&(c.content={type:"root",children:c.children},c.children=[]),c}return i}function Sle(t){if(t===null||typeof t!="object"||Array.isArray(t))return!0;if(typeof t.type!="string")return!1;const e=t,r=Object.keys(t);for(const n of r){const i=e[n];if(i&&typeof i=="object"){if(!Array.isArray(i))return!0;const s=i;for(const o of s)if(typeof o!="number"&&typeof o!="string")return!0}}return!!("children"in t&&Array.isArray(t.children))}function xle(t,e,r,n){const i=sf(t,r);let s=-1,o;if(n!=null){if(typeof n=="number"){if(Number.isNaN(n))return;o=n}else typeof n=="boolean"?o=n:typeof n=="string"?i.spaceSeparated?o=Nk(n):i.commaSeparated?o=Pk(n):i.commaOrSpaceSeparated?o=Nk(Pk(n).join(" ")):o=wA(i,i.property,n):Array.isArray(n)?o=n.concat():o=i.property==="style"?Tle(n):String(n);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const l=wA(i,i.property,o[s]);a[s]=l}o=a}if(i.property==="className"&&Array.isArray(e.className)){const a=o;o=e.className.concat(a)}e[i.property]=o}}function ky(t,e){let r=-1;if(e!=null)if(typeof e=="string"||typeof e=="number")t.push({type:"text",value:String(e)});else if(Array.isArray(e))for(;++r<e.length;)ky(t,e[r]);else if(typeof e=="object"&&"type"in e)e.type==="root"?ky(t,e.children):t.push(e);else throw new Error("Expected node, nodes, or string, got `"+e+"`")}function wA(t,e,r){if(typeof r=="string"){if(t.number&&r&&!Number.isNaN(Number(r)))return Number(r);if((t.boolean||t.overloadedBoolean)&&(r===""||ah(r)===ah(e)))return!0}return r}function Tle(t){const e=[];let r;for(r in t)Cy.call(t,r)&&e.push([r,t[r]].join(": "));return e.join("; ")}function Cle(t){const e={};let r=-1;for(;++r<t.length;)e[t[r].toLowerCase()]=t[r];return e}const kle=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Ale=V6(uc,"div"),Rle=V6(Ui,"g",kle);function Ple(t){const e=String(t),r=[];return{toOffset:i,toPoint:n};function n(s){if(typeof s=="number"&&s>-1&&s<=e.length){let o=0;for(;;){let a=r[o];if(a===void 0){const l=EA(e,r[o-1]);a=l===-1?e.length+1:l+1,r[o]=a}if(a>s)return{line:o+1,column:s-(o>0?r[o-1]:0)+1,offset:s};o++}}}function i(s){if(s&&typeof s.line=="number"&&typeof s.column=="number"&&!Number.isNaN(s.line)&&!Number.isNaN(s.column)){for(;r.length<s.line;){const a=r[r.length-1],l=EA(e,a),c=l===-1?e.length+1:l+1;if(a===c)break;r.push(c)}const o=(s.line>1?r[s.line-2]:0)+s.column-1;if(o<r[s.line-1])return o}}}function EA(t,e){const r=t.indexOf("\r",e),n=t.indexOf(`
`,e);return n===-1?r:r===-1||r+1===n?n:r<n?r:n}const Fo={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},W6={}.hasOwnProperty,Ile=Object.prototype;function Dle(t,e){const r=e||{};return DE({file:r.file||void 0,location:!1,schema:r.space==="svg"?Ui:uc,verbose:r.verbose||!1},t)}function DE(t,e){let r;switch(e.nodeName){case"#comment":{const n=e;return r={type:"comment",value:n.data},_p(t,n,r),r}case"#document":case"#document-fragment":{const n=e,i="mode"in n?n.mode==="quirks"||n.mode==="limited-quirks":!1;if(r={type:"root",children:G6(t,e.childNodes),data:{quirksMode:i}},t.file&&t.location){const s=String(t.file),o=Ple(s),a=o.toPoint(0),l=o.toPoint(s.length);r.position={start:a,end:l}}return r}case"#documentType":{const n=e;return r={type:"doctype"},_p(t,n,r),r}case"#text":{const n=e;return r={type:"text",value:n.value},_p(t,n,r),r}default:return r=Ole(t,e),r}}function G6(t,e){let r=-1;const n=[];for(;++r<e.length;){const i=DE(t,e[r]);n.push(i)}return n}function Ole(t,e){const r=t.schema;t.schema=e.namespaceURI===Fo.svg?Ui:uc;let n=-1;const i={};for(;++n<e.attrs.length;){const a=e.attrs[n],l=(a.prefix?a.prefix+":":"")+a.name;W6.call(Ile,l)||(i[l]=a.value)}const o=(t.schema.space==="svg"?Rle:Ale)(e.tagName,i,G6(t,e.childNodes));if(_p(t,e,o),o.tagName==="template"){const a=e,l=a.sourceCodeLocation,c=l&&l.startTag&&al(l.startTag),u=l&&l.endTag&&al(l.endTag),h=DE(t,a.content);c&&u&&t.file&&(h.position={start:c.end,end:u.start}),o.content=h}return t.schema=r,o}function _p(t,e,r){if("sourceCodeLocation"in e&&e.sourceCodeLocation&&t.file){const n=Lle(t,r,e.sourceCodeLocation);n&&(t.location=!0,r.position=n)}}function Lle(t,e,r){const n=al(r);if(e.type==="element"){const i=e.children[e.children.length-1];if(n&&!r.endTag&&i&&i.position&&i.position.end&&(n.end=Object.assign({},i.position.end)),t.verbose){const s={};let o;if(r.attrs)for(o in r.attrs)W6.call(r.attrs,o)&&(s[sf(t.schema,o).property]=al(r.attrs[o]));r.startTag;const a=al(r.startTag),l=r.endTag?al(r.endTag):void 0,c={opening:a};l&&(c.closing=l),c.properties=s,e.data={position:c}}}return n}function al(t){const e=SA({line:t.startLine,column:t.startCol,offset:t.startOffset}),r=SA({line:t.endLine,column:t.endCol,offset:t.endOffset});return e||r?{start:e,end:r}:void 0}function SA(t){return t.line&&t.column?t:void 0}const xA={}.hasOwnProperty;function OE(t,e){const r=e||{};function n(i,...s){let o=n.invalid;const a=n.handlers;if(i&&xA.call(i,t)){const l=String(i[t]);o=xA.call(a,l)?a[l]:n.unknown}if(o)return o.call(this,i,...s)}return n.handlers=r.handlers||{},n.invalid=r.invalid,n.unknown=r.unknown,n}const Nle={},Mle={}.hasOwnProperty,q6=OE("type",{handlers:{root:Fle,element:zle,text:jle,comment:$le,doctype:Ule}});function Ble(t,e){const n=(e||Nle).space;return q6(t,n==="svg"?Ui:uc)}function Fle(t,e){const r={nodeName:"#document",mode:(t.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return r.childNodes=LE(t.children,r,e),fc(t,r),r}function Hle(t,e){const r={nodeName:"#document-fragment",childNodes:[]};return r.childNodes=LE(t.children,r,e),fc(t,r),r}function Ule(t){const e={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return fc(t,e),e}function jle(t){const e={nodeName:"#text",value:t.value,parentNode:null};return fc(t,e),e}function $le(t){const e={nodeName:"#comment",data:t.value,parentNode:null};return fc(t,e),e}function zle(t,e){const r=e;let n=r;t.type==="element"&&t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(n=Ui);const i=[];let s;if(t.properties){for(s in t.properties)if(s!=="children"&&Mle.call(t.properties,s)){const l=Vle(n,s,t.properties[s]);l&&i.push(l)}}const o=n.space,a={nodeName:t.tagName,tagName:t.tagName,attrs:i,namespaceURI:Fo[o],childNodes:[],parentNode:null};return a.childNodes=LE(t.children,a,n),fc(t,a),t.tagName==="template"&&t.content&&(a.content=Hle(t.content,n)),a}function Vle(t,e,r){const n=sf(t,e);if(r===!1||r===null||r===void 0||typeof r=="number"&&Number.isNaN(r)||!r&&n.boolean)return;Array.isArray(r)&&(r=n.commaSeparated?bE(r):vE(r));const i={name:n.attribute,value:r===!0?"":String(r)};if(n.space&&n.space!=="html"&&n.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=n.attribute.slice(0,s)),i.namespace=Fo[n.space]}return i}function LE(t,e,r){let n=-1;const i=[];if(t)for(;++n<t.length;){const s=q6(t[n],r);s.parentNode=e,i.push(s)}return i}function fc(t,e){const r=t.position;r&&r.start&&r.end&&(r.start.offset,r.end.offset,e.sourceCodeLocation={startLine:r.start.line,startCol:r.start.column,startOffset:r.start.offset,endLine:r.end.line,endCol:r.end.column,endOffset:r.end.offset})}const K6=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],Wle=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),At="";var K;(function(t){t[t.EOF=-1]="EOF",t[t.NULL=0]="NULL",t[t.TABULATION=9]="TABULATION",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.LINE_FEED=10]="LINE_FEED",t[t.FORM_FEED=12]="FORM_FEED",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",t[t.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_A=97]="LATIN_SMALL_A",t[t.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(K||(K={}));const jr={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function Y6(t){return t>=55296&&t<=57343}function Gle(t){return t>=56320&&t<=57343}function qle(t,e){return(t-55296)*1024+9216+e}function X6(t){return t!==32&&t!==10&&t!==13&&t!==9&&t!==12&&t>=1&&t<=31||t>=127&&t<=159}function Q6(t){return t>=64976&&t<=65007||Wle.has(t)}var Ee;(function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ee||(Ee={}));const Kle=65536;class Yle{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=Kle,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e,r){const{line:n,col:i,offset:s}=this,o=i+r,a=s+r;return{code:e,startLine:n,endLine:n,startCol:o,endCol:o,startOffset:a,endOffset:a}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const r=this.html.charCodeAt(this.pos+1);if(Gle(r))return this.pos++,this._addGap(),qle(e,r)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,K.EOF;return this._err(Ee.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,r){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=r}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,r){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(r)return this.html.startsWith(e,this.pos);for(let n=0;n<e.length;n++)if((this.html.charCodeAt(this.pos+n)|32)!==e.charCodeAt(n))return!1;return!0}peek(e){const r=this.pos+e;if(r>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,K.EOF;const n=this.html.charCodeAt(r);return n===K.CARRIAGE_RETURN?K.LINE_FEED:n}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,K.EOF;let e=this.html.charCodeAt(this.pos);return e===K.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,K.LINE_FEED):e===K.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,Y6(e)&&(e=this._processSurrogate(e)),this.handler.onParseError===null||e>31&&e<127||e===K.LINE_FEED||e===K.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){X6(e)?this._err(Ee.controlCharacterInInputStream):Q6(e)&&this._err(Ee.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var et;(function(t){t[t.CHARACTER=0]="CHARACTER",t[t.NULL_CHARACTER=1]="NULL_CHARACTER",t[t.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",t[t.START_TAG=3]="START_TAG",t[t.END_TAG=4]="END_TAG",t[t.COMMENT=5]="COMMENT",t[t.DOCTYPE=6]="DOCTYPE",t[t.EOF=7]="EOF",t[t.HIBERNATION=8]="HIBERNATION"})(et||(et={}));function Z6(t,e){for(let r=t.attrs.length-1;r>=0;r--)if(t.attrs[r].name===e)return t.attrs[r].value;return null}const J6=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(t=>t.charCodeAt(0))),Xle=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(t=>t.charCodeAt(0)));var H_;const Qle=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Zle=(H_=String.fromCodePoint)!==null&&H_!==void 0?H_:function(t){let e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),e+=String.fromCharCode(t),e};function Jle(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=Qle.get(t))!==null&&e!==void 0?e:t}var sr;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(sr||(sr={}));const ece=32;var js;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(js||(js={}));function Ay(t){return t>=sr.ZERO&&t<=sr.NINE}function tce(t){return t>=sr.UPPER_A&&t<=sr.UPPER_F||t>=sr.LOWER_A&&t<=sr.LOWER_F}function rce(t){return t>=sr.UPPER_A&&t<=sr.UPPER_Z||t>=sr.LOWER_A&&t<=sr.LOWER_Z||Ay(t)}function nce(t){return t===sr.EQUALS||rce(t)}var rr;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(rr||(rr={}));var Ki;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(Ki||(Ki={}));class eB{constructor(e,r,n){this.decodeTree=e,this.emitCodePoint=r,this.errors=n,this.state=rr.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Ki.Strict}startEntity(e){this.decodeMode=e,this.state=rr.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,r){switch(this.state){case rr.EntityStart:return e.charCodeAt(r)===sr.NUM?(this.state=rr.NumericStart,this.consumed+=1,this.stateNumericStart(e,r+1)):(this.state=rr.NamedEntity,this.stateNamedEntity(e,r));case rr.NumericStart:return this.stateNumericStart(e,r);case rr.NumericDecimal:return this.stateNumericDecimal(e,r);case rr.NumericHex:return this.stateNumericHex(e,r);case rr.NamedEntity:return this.stateNamedEntity(e,r)}}stateNumericStart(e,r){return r>=e.length?-1:(e.charCodeAt(r)|ece)===sr.LOWER_X?(this.state=rr.NumericHex,this.consumed+=1,this.stateNumericHex(e,r+1)):(this.state=rr.NumericDecimal,this.stateNumericDecimal(e,r))}addToNumericResult(e,r,n,i){if(r!==n){const s=n-r;this.result=this.result*Math.pow(i,s)+parseInt(e.substr(r,s),i),this.consumed+=s}}stateNumericHex(e,r){const n=r;for(;r<e.length;){const i=e.charCodeAt(r);if(Ay(i)||tce(i))r+=1;else return this.addToNumericResult(e,n,r,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(e,n,r,16),-1}stateNumericDecimal(e,r){const n=r;for(;r<e.length;){const i=e.charCodeAt(r);if(Ay(i))r+=1;else return this.addToNumericResult(e,n,r,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(e,n,r,10),-1}emitNumericEntity(e,r){var n;if(this.consumed<=r)return(n=this.errors)===null||n===void 0||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===sr.SEMI)this.consumed+=1;else if(this.decodeMode===Ki.Strict)return 0;return this.emitCodePoint(Jle(this.result),this.consumed),this.errors&&(e!==sr.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,r){const{decodeTree:n}=this;let i=n[this.treeIndex],s=(i&js.VALUE_LENGTH)>>14;for(;r<e.length;r++,this.excess++){const o=e.charCodeAt(r);if(this.treeIndex=ice(n,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===Ki.Attribute&&(s===0||nce(o))?0:this.emitNotTerminatedNamedEntity();if(i=n[this.treeIndex],s=(i&js.VALUE_LENGTH)>>14,s!==0){if(o===sr.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Ki.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:r,decodeTree:n}=this,i=(n[r]&js.VALUE_LENGTH)>>14;return this.emitNamedEntityData(r,i,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,r,n){const{decodeTree:i}=this;return this.emitCodePoint(r===1?i[e]&~js.VALUE_LENGTH:i[e+1],n),r===3&&this.emitCodePoint(i[e+2],n),n}end(){var e;switch(this.state){case rr.NamedEntity:return this.result!==0&&(this.decodeMode!==Ki.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case rr.NumericDecimal:return this.emitNumericEntity(0,2);case rr.NumericHex:return this.emitNumericEntity(0,3);case rr.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case rr.EntityStart:return 0}}}function tB(t){let e="";const r=new eB(t,n=>e+=Zle(n));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){e+=i.slice(o,a),r.startEntity(s);const c=r.write(i,a+1);if(c<0){o=a+r.end();break}o=a+c,a=c===0?o+1:o}const l=e+i.slice(o);return e="",l}}function ice(t,e,r,n){const i=(e&js.BRANCH_LENGTH)>>7,s=e&js.JUMP_TABLE;if(i===0)return s!==0&&n===s?r:-1;if(s){const l=n-s;return l<0||l>=i?-1:t[r+l]-1}let o=r,a=o+i-1;for(;o<=a;){const l=o+a>>>1,c=t[l];if(c<n)o=l+1;else if(c>n)a=l-1;else return t[l+i]}return-1}tB(J6);tB(Xle);var Ie;(function(t){t.HTML="http://www.w3.org/1999/xhtml",t.MATHML="http://www.w3.org/1998/Math/MathML",t.SVG="http://www.w3.org/2000/svg",t.XLINK="http://www.w3.org/1999/xlink",t.XML="http://www.w3.org/XML/1998/namespace",t.XMLNS="http://www.w3.org/2000/xmlns/"})(Ie||(Ie={}));var Qo;(function(t){t.TYPE="type",t.ACTION="action",t.ENCODING="encoding",t.PROMPT="prompt",t.NAME="name",t.COLOR="color",t.FACE="face",t.SIZE="size"})(Qo||(Qo={}));var xn;(function(t){t.NO_QUIRKS="no-quirks",t.QUIRKS="quirks",t.LIMITED_QUIRKS="limited-quirks"})(xn||(xn={}));var _e;(function(t){t.A="a",t.ADDRESS="address",t.ANNOTATION_XML="annotation-xml",t.APPLET="applet",t.AREA="area",t.ARTICLE="article",t.ASIDE="aside",t.B="b",t.BASE="base",t.BASEFONT="basefont",t.BGSOUND="bgsound",t.BIG="big",t.BLOCKQUOTE="blockquote",t.BODY="body",t.BR="br",t.BUTTON="button",t.CAPTION="caption",t.CENTER="center",t.CODE="code",t.COL="col",t.COLGROUP="colgroup",t.DD="dd",t.DESC="desc",t.DETAILS="details",t.DIALOG="dialog",t.DIR="dir",t.DIV="div",t.DL="dl",t.DT="dt",t.EM="em",t.EMBED="embed",t.FIELDSET="fieldset",t.FIGCAPTION="figcaption",t.FIGURE="figure",t.FONT="font",t.FOOTER="footer",t.FOREIGN_OBJECT="foreignObject",t.FORM="form",t.FRAME="frame",t.FRAMESET="frameset",t.H1="h1",t.H2="h2",t.H3="h3",t.H4="h4",t.H5="h5",t.H6="h6",t.HEAD="head",t.HEADER="header",t.HGROUP="hgroup",t.HR="hr",t.HTML="html",t.I="i",t.IMG="img",t.IMAGE="image",t.INPUT="input",t.IFRAME="iframe",t.KEYGEN="keygen",t.LABEL="label",t.LI="li",t.LINK="link",t.LISTING="listing",t.MAIN="main",t.MALIGNMARK="malignmark",t.MARQUEE="marquee",t.MATH="math",t.MENU="menu",t.META="meta",t.MGLYPH="mglyph",t.MI="mi",t.MO="mo",t.MN="mn",t.MS="ms",t.MTEXT="mtext",t.NAV="nav",t.NOBR="nobr",t.NOFRAMES="noframes",t.NOEMBED="noembed",t.NOSCRIPT="noscript",t.OBJECT="object",t.OL="ol",t.OPTGROUP="optgroup",t.OPTION="option",t.P="p",t.PARAM="param",t.PLAINTEXT="plaintext",t.PRE="pre",t.RB="rb",t.RP="rp",t.RT="rt",t.RTC="rtc",t.RUBY="ruby",t.S="s",t.SCRIPT="script",t.SEARCH="search",t.SECTION="section",t.SELECT="select",t.SOURCE="source",t.SMALL="small",t.SPAN="span",t.STRIKE="strike",t.STRONG="strong",t.STYLE="style",t.SUB="sub",t.SUMMARY="summary",t.SUP="sup",t.TABLE="table",t.TBODY="tbody",t.TEMPLATE="template",t.TEXTAREA="textarea",t.TFOOT="tfoot",t.TD="td",t.TH="th",t.THEAD="thead",t.TITLE="title",t.TR="tr",t.TRACK="track",t.TT="tt",t.U="u",t.UL="ul",t.SVG="svg",t.VAR="var",t.WBR="wbr",t.XMP="xmp"})(_e||(_e={}));var C;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.A=1]="A",t[t.ADDRESS=2]="ADDRESS",t[t.ANNOTATION_XML=3]="ANNOTATION_XML",t[t.APPLET=4]="APPLET",t[t.AREA=5]="AREA",t[t.ARTICLE=6]="ARTICLE",t[t.ASIDE=7]="ASIDE",t[t.B=8]="B",t[t.BASE=9]="BASE",t[t.BASEFONT=10]="BASEFONT",t[t.BGSOUND=11]="BGSOUND",t[t.BIG=12]="BIG",t[t.BLOCKQUOTE=13]="BLOCKQUOTE",t[t.BODY=14]="BODY",t[t.BR=15]="BR",t[t.BUTTON=16]="BUTTON",t[t.CAPTION=17]="CAPTION",t[t.CENTER=18]="CENTER",t[t.CODE=19]="CODE",t[t.COL=20]="COL",t[t.COLGROUP=21]="COLGROUP",t[t.DD=22]="DD",t[t.DESC=23]="DESC",t[t.DETAILS=24]="DETAILS",t[t.DIALOG=25]="DIALOG",t[t.DIR=26]="DIR",t[t.DIV=27]="DIV",t[t.DL=28]="DL",t[t.DT=29]="DT",t[t.EM=30]="EM",t[t.EMBED=31]="EMBED",t[t.FIELDSET=32]="FIELDSET",t[t.FIGCAPTION=33]="FIGCAPTION",t[t.FIGURE=34]="FIGURE",t[t.FONT=35]="FONT",t[t.FOOTER=36]="FOOTER",t[t.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",t[t.FORM=38]="FORM",t[t.FRAME=39]="FRAME",t[t.FRAMESET=40]="FRAMESET",t[t.H1=41]="H1",t[t.H2=42]="H2",t[t.H3=43]="H3",t[t.H4=44]="H4",t[t.H5=45]="H5",t[t.H6=46]="H6",t[t.HEAD=47]="HEAD",t[t.HEADER=48]="HEADER",t[t.HGROUP=49]="HGROUP",t[t.HR=50]="HR",t[t.HTML=51]="HTML",t[t.I=52]="I",t[t.IMG=53]="IMG",t[t.IMAGE=54]="IMAGE",t[t.INPUT=55]="INPUT",t[t.IFRAME=56]="IFRAME",t[t.KEYGEN=57]="KEYGEN",t[t.LABEL=58]="LABEL",t[t.LI=59]="LI",t[t.LINK=60]="LINK",t[t.LISTING=61]="LISTING",t[t.MAIN=62]="MAIN",t[t.MALIGNMARK=63]="MALIGNMARK",t[t.MARQUEE=64]="MARQUEE",t[t.MATH=65]="MATH",t[t.MENU=66]="MENU",t[t.META=67]="META",t[t.MGLYPH=68]="MGLYPH",t[t.MI=69]="MI",t[t.MO=70]="MO",t[t.MN=71]="MN",t[t.MS=72]="MS",t[t.MTEXT=73]="MTEXT",t[t.NAV=74]="NAV",t[t.NOBR=75]="NOBR",t[t.NOFRAMES=76]="NOFRAMES",t[t.NOEMBED=77]="NOEMBED",t[t.NOSCRIPT=78]="NOSCRIPT",t[t.OBJECT=79]="OBJECT",t[t.OL=80]="OL",t[t.OPTGROUP=81]="OPTGROUP",t[t.OPTION=82]="OPTION",t[t.P=83]="P",t[t.PARAM=84]="PARAM",t[t.PLAINTEXT=85]="PLAINTEXT",t[t.PRE=86]="PRE",t[t.RB=87]="RB",t[t.RP=88]="RP",t[t.RT=89]="RT",t[t.RTC=90]="RTC",t[t.RUBY=91]="RUBY",t[t.S=92]="S",t[t.SCRIPT=93]="SCRIPT",t[t.SEARCH=94]="SEARCH",t[t.SECTION=95]="SECTION",t[t.SELECT=96]="SELECT",t[t.SOURCE=97]="SOURCE",t[t.SMALL=98]="SMALL",t[t.SPAN=99]="SPAN",t[t.STRIKE=100]="STRIKE",t[t.STRONG=101]="STRONG",t[t.STYLE=102]="STYLE",t[t.SUB=103]="SUB",t[t.SUMMARY=104]="SUMMARY",t[t.SUP=105]="SUP",t[t.TABLE=106]="TABLE",t[t.TBODY=107]="TBODY",t[t.TEMPLATE=108]="TEMPLATE",t[t.TEXTAREA=109]="TEXTAREA",t[t.TFOOT=110]="TFOOT",t[t.TD=111]="TD",t[t.TH=112]="TH",t[t.THEAD=113]="THEAD",t[t.TITLE=114]="TITLE",t[t.TR=115]="TR",t[t.TRACK=116]="TRACK",t[t.TT=117]="TT",t[t.U=118]="U",t[t.UL=119]="UL",t[t.SVG=120]="SVG",t[t.VAR=121]="VAR",t[t.WBR=122]="WBR",t[t.XMP=123]="XMP"})(C||(C={}));const sce=new Map([[_e.A,C.A],[_e.ADDRESS,C.ADDRESS],[_e.ANNOTATION_XML,C.ANNOTATION_XML],[_e.APPLET,C.APPLET],[_e.AREA,C.AREA],[_e.ARTICLE,C.ARTICLE],[_e.ASIDE,C.ASIDE],[_e.B,C.B],[_e.BASE,C.BASE],[_e.BASEFONT,C.BASEFONT],[_e.BGSOUND,C.BGSOUND],[_e.BIG,C.BIG],[_e.BLOCKQUOTE,C.BLOCKQUOTE],[_e.BODY,C.BODY],[_e.BR,C.BR],[_e.BUTTON,C.BUTTON],[_e.CAPTION,C.CAPTION],[_e.CENTER,C.CENTER],[_e.CODE,C.CODE],[_e.COL,C.COL],[_e.COLGROUP,C.COLGROUP],[_e.DD,C.DD],[_e.DESC,C.DESC],[_e.DETAILS,C.DETAILS],[_e.DIALOG,C.DIALOG],[_e.DIR,C.DIR],[_e.DIV,C.DIV],[_e.DL,C.DL],[_e.DT,C.DT],[_e.EM,C.EM],[_e.EMBED,C.EMBED],[_e.FIELDSET,C.FIELDSET],[_e.FIGCAPTION,C.FIGCAPTION],[_e.FIGURE,C.FIGURE],[_e.FONT,C.FONT],[_e.FOOTER,C.FOOTER],[_e.FOREIGN_OBJECT,C.FOREIGN_OBJECT],[_e.FORM,C.FORM],[_e.FRAME,C.FRAME],[_e.FRAMESET,C.FRAMESET],[_e.H1,C.H1],[_e.H2,C.H2],[_e.H3,C.H3],[_e.H4,C.H4],[_e.H5,C.H5],[_e.H6,C.H6],[_e.HEAD,C.HEAD],[_e.HEADER,C.HEADER],[_e.HGROUP,C.HGROUP],[_e.HR,C.HR],[_e.HTML,C.HTML],[_e.I,C.I],[_e.IMG,C.IMG],[_e.IMAGE,C.IMAGE],[_e.INPUT,C.INPUT],[_e.IFRAME,C.IFRAME],[_e.KEYGEN,C.KEYGEN],[_e.LABEL,C.LABEL],[_e.LI,C.LI],[_e.LINK,C.LINK],[_e.LISTING,C.LISTING],[_e.MAIN,C.MAIN],[_e.MALIGNMARK,C.MALIGNMARK],[_e.MARQUEE,C.MARQUEE],[_e.MATH,C.MATH],[_e.MENU,C.MENU],[_e.META,C.META],[_e.MGLYPH,C.MGLYPH],[_e.MI,C.MI],[_e.MO,C.MO],[_e.MN,C.MN],[_e.MS,C.MS],[_e.MTEXT,C.MTEXT],[_e.NAV,C.NAV],[_e.NOBR,C.NOBR],[_e.NOFRAMES,C.NOFRAMES],[_e.NOEMBED,C.NOEMBED],[_e.NOSCRIPT,C.NOSCRIPT],[_e.OBJECT,C.OBJECT],[_e.OL,C.OL],[_e.OPTGROUP,C.OPTGROUP],[_e.OPTION,C.OPTION],[_e.P,C.P],[_e.PARAM,C.PARAM],[_e.PLAINTEXT,C.PLAINTEXT],[_e.PRE,C.PRE],[_e.RB,C.RB],[_e.RP,C.RP],[_e.RT,C.RT],[_e.RTC,C.RTC],[_e.RUBY,C.RUBY],[_e.S,C.S],[_e.SCRIPT,C.SCRIPT],[_e.SEARCH,C.SEARCH],[_e.SECTION,C.SECTION],[_e.SELECT,C.SELECT],[_e.SOURCE,C.SOURCE],[_e.SMALL,C.SMALL],[_e.SPAN,C.SPAN],[_e.STRIKE,C.STRIKE],[_e.STRONG,C.STRONG],[_e.STYLE,C.STYLE],[_e.SUB,C.SUB],[_e.SUMMARY,C.SUMMARY],[_e.SUP,C.SUP],[_e.TABLE,C.TABLE],[_e.TBODY,C.TBODY],[_e.TEMPLATE,C.TEMPLATE],[_e.TEXTAREA,C.TEXTAREA],[_e.TFOOT,C.TFOOT],[_e.TD,C.TD],[_e.TH,C.TH],[_e.THEAD,C.THEAD],[_e.TITLE,C.TITLE],[_e.TR,C.TR],[_e.TRACK,C.TRACK],[_e.TT,C.TT],[_e.U,C.U],[_e.UL,C.UL],[_e.SVG,C.SVG],[_e.VAR,C.VAR],[_e.WBR,C.WBR],[_e.XMP,C.XMP]]);function dc(t){var e;return(e=sce.get(t))!==null&&e!==void 0?e:C.UNKNOWN}const De=C,oce={[Ie.HTML]:new Set([De.ADDRESS,De.APPLET,De.AREA,De.ARTICLE,De.ASIDE,De.BASE,De.BASEFONT,De.BGSOUND,De.BLOCKQUOTE,De.BODY,De.BR,De.BUTTON,De.CAPTION,De.CENTER,De.COL,De.COLGROUP,De.DD,De.DETAILS,De.DIR,De.DIV,De.DL,De.DT,De.EMBED,De.FIELDSET,De.FIGCAPTION,De.FIGURE,De.FOOTER,De.FORM,De.FRAME,De.FRAMESET,De.H1,De.H2,De.H3,De.H4,De.H5,De.H6,De.HEAD,De.HEADER,De.HGROUP,De.HR,De.HTML,De.IFRAME,De.IMG,De.INPUT,De.LI,De.LINK,De.LISTING,De.MAIN,De.MARQUEE,De.MENU,De.META,De.NAV,De.NOEMBED,De.NOFRAMES,De.NOSCRIPT,De.OBJECT,De.OL,De.P,De.PARAM,De.PLAINTEXT,De.PRE,De.SCRIPT,De.SECTION,De.SELECT,De.SOURCE,De.STYLE,De.SUMMARY,De.TABLE,De.TBODY,De.TD,De.TEMPLATE,De.TEXTAREA,De.TFOOT,De.TH,De.THEAD,De.TITLE,De.TR,De.TRACK,De.UL,De.WBR,De.XMP]),[Ie.MATHML]:new Set([De.MI,De.MO,De.MN,De.MS,De.MTEXT,De.ANNOTATION_XML]),[Ie.SVG]:new Set([De.TITLE,De.FOREIGN_OBJECT,De.DESC]),[Ie.XLINK]:new Set,[Ie.XML]:new Set,[Ie.XMLNS]:new Set},Ry=new Set([De.H1,De.H2,De.H3,De.H4,De.H5,De.H6]);_e.STYLE,_e.SCRIPT,_e.XMP,_e.IFRAME,_e.NOEMBED,_e.NOFRAMES,_e.PLAINTEXT;var J;(function(t){t[t.DATA=0]="DATA",t[t.RCDATA=1]="RCDATA",t[t.RAWTEXT=2]="RAWTEXT",t[t.SCRIPT_DATA=3]="SCRIPT_DATA",t[t.PLAINTEXT=4]="PLAINTEXT",t[t.TAG_OPEN=5]="TAG_OPEN",t[t.END_TAG_OPEN=6]="END_TAG_OPEN",t[t.TAG_NAME=7]="TAG_NAME",t[t.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",t[t.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",t[t.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",t[t.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",t[t.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",t[t.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",t[t.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",t[t.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",t[t.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",t[t.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",t[t.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",t[t.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",t[t.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",t[t.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",t[t.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",t[t.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",t[t.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",t[t.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",t[t.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",t[t.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",t[t.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",t[t.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",t[t.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",t[t.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",t[t.BOGUS_COMMENT=40]="BOGUS_COMMENT",t[t.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",t[t.COMMENT_START=42]="COMMENT_START",t[t.COMMENT_START_DASH=43]="COMMENT_START_DASH",t[t.COMMENT=44]="COMMENT",t[t.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",t[t.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",t[t.COMMENT_END_DASH=49]="COMMENT_END_DASH",t[t.COMMENT_END=50]="COMMENT_END",t[t.COMMENT_END_BANG=51]="COMMENT_END_BANG",t[t.DOCTYPE=52]="DOCTYPE",t[t.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",t[t.DOCTYPE_NAME=54]="DOCTYPE_NAME",t[t.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",t[t.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",t[t.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",t[t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",t[t.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",t[t.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",t[t.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",t[t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",t[t.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",t[t.CDATA_SECTION=68]="CDATA_SECTION",t[t.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",t[t.CDATA_SECTION_END=70]="CDATA_SECTION_END",t[t.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",t[t.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(J||(J={}));const $t={DATA:J.DATA,RCDATA:J.RCDATA,RAWTEXT:J.RAWTEXT,SCRIPT_DATA:J.SCRIPT_DATA,PLAINTEXT:J.PLAINTEXT,CDATA_SECTION:J.CDATA_SECTION};function ace(t){return t>=K.DIGIT_0&&t<=K.DIGIT_9}function su(t){return t>=K.LATIN_CAPITAL_A&&t<=K.LATIN_CAPITAL_Z}function lce(t){return t>=K.LATIN_SMALL_A&&t<=K.LATIN_SMALL_Z}function Cs(t){return lce(t)||su(t)}function TA(t){return Cs(t)||ace(t)}function Id(t){return t+32}function rB(t){return t===K.SPACE||t===K.LINE_FEED||t===K.TABULATION||t===K.FORM_FEED}function CA(t){return rB(t)||t===K.SOLIDUS||t===K.GREATER_THAN_SIGN}function cce(t){return t===K.NULL?Ee.nullCharacterReference:t>1114111?Ee.characterReferenceOutsideUnicodeRange:Y6(t)?Ee.surrogateCharacterReference:Q6(t)?Ee.noncharacterCharacterReference:X6(t)||t===K.CARRIAGE_RETURN?Ee.controlCharacterReference:null}class uce{constructor(e,r){this.options=e,this.handler=r,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=J.DATA,this.returnState=J.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Yle(r),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new eB(J6,(n,i)=>{this.preprocessor.pos=this.entityStartPos+i-1,this._flushCodePointConsumedAsCharacterReference(n)},r.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(Ee.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:n=>{this._err(Ee.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+n)},validateNumericCharacterReference:n=>{const i=cce(n);i&&this._err(i,1)}}:void 0)}_err(e,r=0){var n,i;(i=(n=this.handler).onParseError)===null||i===void 0||i.call(n,this.preprocessor.getError(e,r))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||e?.())}write(e,r,n){this.active=!0,this.preprocessor.write(e,r),this._runParsingLoop(),this.paused||n?.()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let r=0;r<e;r++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,r){return this.preprocessor.startsWith(e,r)?(this._advanceBy(e.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:et.START_TAG,tagName:"",tagID:C.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:et.END_TAG,tagName:"",tagID:C.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:et.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:et.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,r){this.currentCharacterToken={type:e,chars:r,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,r;const n=this.currentToken;if(Z6(n,this.currentAttr.name)===null){if(n.attrs.push(this.currentAttr),n.location&&this.currentLocation){const i=(e=(r=n.location).attrs)!==null&&e!==void 0?e:r.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ee.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=dc(e.tagName),e.type===et.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(Ee.endTagWithAttributes),e.selfClosing&&this._err(Ee.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case et.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case et.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case et.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:et.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,r){if(this.currentCharacterToken)if(this.currentCharacterToken.type===e){this.currentCharacterToken.chars+=r;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(e,r)}_emitCodePoint(e){const r=rB(e)?et.WHITESPACE_CHARACTER:e===K.NULL?et.NULL_CHARACTER:et.CHARACTER;this._appendCharToCurrentCharacterToken(r,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(et.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=J.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?Ki.Attribute:Ki.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===J.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case J.DATA:{this._stateData(e);break}case J.RCDATA:{this._stateRcdata(e);break}case J.RAWTEXT:{this._stateRawtext(e);break}case J.SCRIPT_DATA:{this._stateScriptData(e);break}case J.PLAINTEXT:{this._statePlaintext(e);break}case J.TAG_OPEN:{this._stateTagOpen(e);break}case J.END_TAG_OPEN:{this._stateEndTagOpen(e);break}case J.TAG_NAME:{this._stateTagName(e);break}case J.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(e);break}case J.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(e);break}case J.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(e);break}case J.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(e);break}case J.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(e);break}case J.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(e);break}case J.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(e);break}case J.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(e);break}case J.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(e);break}case J.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(e);break}case J.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(e);break}case J.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(e);break}case J.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(e);break}case J.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(e);break}case J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(e);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(e);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(e);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(e);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(e);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(e);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(e);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(e);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(e);break}case J.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(e);break}case J.ATTRIBUTE_NAME:{this._stateAttributeName(e);break}case J.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(e);break}case J.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(e);break}case J.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(e);break}case J.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(e);break}case J.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(e);break}case J.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(e);break}case J.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(e);break}case J.BOGUS_COMMENT:{this._stateBogusComment(e);break}case J.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(e);break}case J.COMMENT_START:{this._stateCommentStart(e);break}case J.COMMENT_START_DASH:{this._stateCommentStartDash(e);break}case J.COMMENT:{this._stateComment(e);break}case J.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(e);break}case J.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(e);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(e);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(e);break}case J.COMMENT_END_DASH:{this._stateCommentEndDash(e);break}case J.COMMENT_END:{this._stateCommentEnd(e);break}case J.COMMENT_END_BANG:{this._stateCommentEndBang(e);break}case J.DOCTYPE:{this._stateDoctype(e);break}case J.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(e);break}case J.DOCTYPE_NAME:{this._stateDoctypeName(e);break}case J.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(e);break}case J.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(e);break}case J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(e);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(e);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(e);break}case J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(e);break}case J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break}case J.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(e);break}case J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(e);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(e);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(e);break}case J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(e);break}case J.BOGUS_DOCTYPE:{this._stateBogusDoctype(e);break}case J.CDATA_SECTION:{this._stateCdataSection(e);break}case J.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(e);break}case J.CDATA_SECTION_END:{this._stateCdataSectionEnd(e);break}case J.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case J.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(e);break}default:throw new Error("Unknown state")}}_stateData(e){switch(e){case K.LESS_THAN_SIGN:{this.state=J.TAG_OPEN;break}case K.AMPERSAND:{this._startCharacterReference();break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitCodePoint(e);break}case K.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case K.AMPERSAND:{this._startCharacterReference();break}case K.LESS_THAN_SIGN:{this.state=J.RCDATA_LESS_THAN_SIGN;break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitChars(At);break}case K.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case K.LESS_THAN_SIGN:{this.state=J.RAWTEXT_LESS_THAN_SIGN;break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitChars(At);break}case K.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case K.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_LESS_THAN_SIGN;break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitChars(At);break}case K.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case K.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitChars(At);break}case K.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateTagOpen(e){if(Cs(e))this._createStartTagToken(),this.state=J.TAG_NAME,this._stateTagName(e);else switch(e){case K.EXCLAMATION_MARK:{this.state=J.MARKUP_DECLARATION_OPEN;break}case K.SOLIDUS:{this.state=J.END_TAG_OPEN;break}case K.QUESTION_MARK:{this._err(Ee.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=J.BOGUS_COMMENT,this._stateBogusComment(e);break}case K.EOF:{this._err(Ee.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ee.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=J.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(Cs(e))this._createEndTagToken(),this.state=J.TAG_NAME,this._stateTagName(e);else switch(e){case K.GREATER_THAN_SIGN:{this._err(Ee.missingEndTagName),this.state=J.DATA;break}case K.EOF:{this._err(Ee.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ee.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const r=this.currentToken;switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:{this.state=J.BEFORE_ATTRIBUTE_NAME;break}case K.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case K.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),r.tagName+=At;break}case K.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:r.tagName+=String.fromCodePoint(su(e)?Id(e):e)}}_stateRcdataLessThanSign(e){e===K.SOLIDUS?this.state=J.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){Cs(e)?(this.state=J.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const r=this.currentToken;switch(r.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=J.BEFORE_ATTRIBUTE_NAME,!1;case K.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=J.SELF_CLOSING_START_TAG,!1;case K.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=J.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===K.SOLIDUS?this.state=J.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){Cs(e)?(this.state=J.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case K.SOLIDUS:{this.state=J.SCRIPT_DATA_END_TAG_OPEN;break}case K.EXCLAMATION_MARK:{this.state=J.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=J.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){Cs(e)?(this.state=J.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===K.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===K.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case K.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case K.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitChars(At);break}case K.EOF:{this._err(Ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case K.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case K.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(At);break}case K.EOF:{this._err(Ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case K.HYPHEN_MINUS:{this._emitChars("-");break}case K.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case K.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(At);break}case K.EOF:{this._err(Ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===K.SOLIDUS?this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Cs(e)?(this._emitChars("<"),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){Cs(e)?(this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(jr.SCRIPT,!1)&&CA(this.preprocessor.peek(jr.SCRIPT.length))){this._emitCodePoint(e);for(let r=0;r<jr.SCRIPT.length;r++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case K.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case K.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitChars(At);break}case K.EOF:{this._err(Ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case K.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case K.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(At);break}case K.EOF:{this._err(Ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case K.HYPHEN_MINUS:{this._emitChars("-");break}case K.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case K.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(At);break}case K.EOF:{this._err(Ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===K.SOLIDUS?(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(jr.SCRIPT,!1)&&CA(this.preprocessor.peek(jr.SCRIPT.length))){this._emitCodePoint(e);for(let r=0;r<jr.SCRIPT.length;r++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:break;case K.SOLIDUS:case K.GREATER_THAN_SIGN:case K.EOF:{this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case K.EQUALS_SIGN:{this._err(Ee.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=J.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:case K.SOLIDUS:case K.GREATER_THAN_SIGN:case K.EOF:{this._leaveAttrName(),this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case K.EQUALS_SIGN:{this._leaveAttrName(),this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case K.QUOTATION_MARK:case K.APOSTROPHE:case K.LESS_THAN_SIGN:{this._err(Ee.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),this.currentAttr.name+=At;break}default:this.currentAttr.name+=String.fromCodePoint(su(e)?Id(e):e)}}_stateAfterAttributeName(e){switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:break;case K.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case K.EQUALS_SIGN:{this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case K.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case K.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:break;case K.QUOTATION_MARK:{this.state=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case K.APOSTROPHE:{this.state=J.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case K.GREATER_THAN_SIGN:{this._err(Ee.missingAttributeValue),this.state=J.DATA,this.emitCurrentTagToken();break}default:this.state=J.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case K.QUOTATION_MARK:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case K.AMPERSAND:{this._startCharacterReference();break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),this.currentAttr.value+=At;break}case K.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case K.APOSTROPHE:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case K.AMPERSAND:{this._startCharacterReference();break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),this.currentAttr.value+=At;break}case K.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case K.AMPERSAND:{this._startCharacterReference();break}case K.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),this.currentAttr.value+=At;break}case K.QUOTATION_MARK:case K.APOSTROPHE:case K.LESS_THAN_SIGN:case K.EQUALS_SIGN:case K.GRAVE_ACCENT:{this._err(Ee.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break}case K.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case K.SOLIDUS:{this._leaveAttrValue(),this.state=J.SELF_CLOSING_START_TAG;break}case K.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case K.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:this._err(Ee.missingWhitespaceBetweenAttributes),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case K.GREATER_THAN_SIGN:{const r=this.currentToken;r.selfClosing=!0,this.state=J.DATA,this.emitCurrentTagToken();break}case K.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:this._err(Ee.unexpectedSolidusInTag),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const r=this.currentToken;switch(e){case K.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(r);break}case K.EOF:{this.emitCurrentComment(r),this._emitEOFToken();break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),r.data+=At;break}default:r.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(jr.DASH_DASH,!0)?(this._createCommentToken(jr.DASH_DASH.length+1),this.state=J.COMMENT_START):this._consumeSequenceIfMatch(jr.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(jr.DOCTYPE.length+1),this.state=J.DOCTYPE):this._consumeSequenceIfMatch(jr.CDATA_START,!0)?this.inForeignNode?this.state=J.CDATA_SECTION:(this._err(Ee.cdataInHtmlContent),this._createCommentToken(jr.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=J.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ee.incorrectlyOpenedComment),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case K.HYPHEN_MINUS:{this.state=J.COMMENT_START_DASH;break}case K.GREATER_THAN_SIGN:{this._err(Ee.abruptClosingOfEmptyComment),this.state=J.DATA;const r=this.currentToken;this.emitCurrentComment(r);break}default:this.state=J.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const r=this.currentToken;switch(e){case K.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case K.GREATER_THAN_SIGN:{this._err(Ee.abruptClosingOfEmptyComment),this.state=J.DATA,this.emitCurrentComment(r);break}case K.EOF:{this._err(Ee.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="-",this.state=J.COMMENT,this._stateComment(e)}}_stateComment(e){const r=this.currentToken;switch(e){case K.HYPHEN_MINUS:{this.state=J.COMMENT_END_DASH;break}case K.LESS_THAN_SIGN:{r.data+="<",this.state=J.COMMENT_LESS_THAN_SIGN;break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),r.data+=At;break}case K.EOF:{this._err(Ee.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const r=this.currentToken;switch(e){case K.EXCLAMATION_MARK:{r.data+="!",this.state=J.COMMENT_LESS_THAN_SIGN_BANG;break}case K.LESS_THAN_SIGN:{r.data+="<";break}default:this.state=J.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===K.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=J.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===K.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=J.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==K.GREATER_THAN_SIGN&&e!==K.EOF&&this._err(Ee.nestedComment),this.state=J.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const r=this.currentToken;switch(e){case K.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case K.EOF:{this._err(Ee.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="-",this.state=J.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const r=this.currentToken;switch(e){case K.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(r);break}case K.EXCLAMATION_MARK:{this.state=J.COMMENT_END_BANG;break}case K.HYPHEN_MINUS:{r.data+="-";break}case K.EOF:{this._err(Ee.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="--",this.state=J.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const r=this.currentToken;switch(e){case K.HYPHEN_MINUS:{r.data+="--!",this.state=J.COMMENT_END_DASH;break}case K.GREATER_THAN_SIGN:{this._err(Ee.incorrectlyClosedComment),this.state=J.DATA,this.emitCurrentComment(r);break}case K.EOF:{this._err(Ee.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="--!",this.state=J.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_NAME;break}case K.GREATER_THAN_SIGN:{this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break}case K.EOF:{this._err(Ee.eofInDoctype),this._createDoctypeToken(null);const r=this.currentToken;r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Ee.missingWhitespaceBeforeDoctypeName),this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(su(e))this._createDoctypeToken(String.fromCharCode(Id(e))),this.state=J.DOCTYPE_NAME;else switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:break;case K.NULL:{this._err(Ee.unexpectedNullCharacter),this._createDoctypeToken(At),this.state=J.DOCTYPE_NAME;break}case K.GREATER_THAN_SIGN:{this._err(Ee.missingDoctypeName),this._createDoctypeToken(null);const r=this.currentToken;r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=J.DATA;break}case K.EOF:{this._err(Ee.eofInDoctype),this._createDoctypeToken(null);const r=this.currentToken;r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=J.DOCTYPE_NAME}}_stateDoctypeName(e){const r=this.currentToken;switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:{this.state=J.AFTER_DOCTYPE_NAME;break}case K.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(r);break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),r.name+=At;break}case K.EOF:{this._err(Ee.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.name+=String.fromCodePoint(su(e)?Id(e):e)}}_stateAfterDoctypeName(e){const r=this.currentToken;switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:break;case K.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(r);break}case K.EOF:{this._err(Ee.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(jr.PUBLIC,!1)?this.state=J.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(jr.SYSTEM,!1)?this.state=J.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ee.invalidCharacterSequenceAfterDoctypeName),r.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const r=this.currentToken;switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case K.QUOTATION_MARK:{this._err(Ee.missingWhitespaceAfterDoctypePublicKeyword),r.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case K.APOSTROPHE:{this._err(Ee.missingWhitespaceAfterDoctypePublicKeyword),r.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case K.GREATER_THAN_SIGN:{this._err(Ee.missingDoctypePublicIdentifier),r.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(r);break}case K.EOF:{this._err(Ee.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Ee.missingQuoteBeforeDoctypePublicIdentifier),r.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const r=this.currentToken;switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:break;case K.QUOTATION_MARK:{r.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case K.APOSTROPHE:{r.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case K.GREATER_THAN_SIGN:{this._err(Ee.missingDoctypePublicIdentifier),r.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(r);break}case K.EOF:{this._err(Ee.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Ee.missingQuoteBeforeDoctypePublicIdentifier),r.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const r=this.currentToken;switch(e){case K.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),r.publicId+=At;break}case K.GREATER_THAN_SIGN:{this._err(Ee.abruptDoctypePublicIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=J.DATA;break}case K.EOF:{this._err(Ee.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const r=this.currentToken;switch(e){case K.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),r.publicId+=At;break}case K.GREATER_THAN_SIGN:{this._err(Ee.abruptDoctypePublicIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=J.DATA;break}case K.EOF:{this._err(Ee.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const r=this.currentToken;switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:{this.state=J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case K.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(r);break}case K.QUOTATION_MARK:{this._err(Ee.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),r.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case K.APOSTROPHE:{this._err(Ee.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),r.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case K.EOF:{this._err(Ee.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Ee.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const r=this.currentToken;switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:break;case K.GREATER_THAN_SIGN:{this.emitCurrentDoctype(r),this.state=J.DATA;break}case K.QUOTATION_MARK:{r.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case K.APOSTROPHE:{r.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case K.EOF:{this._err(Ee.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Ee.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const r=this.currentToken;switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case K.QUOTATION_MARK:{this._err(Ee.missingWhitespaceAfterDoctypeSystemKeyword),r.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case K.APOSTROPHE:{this._err(Ee.missingWhitespaceAfterDoctypeSystemKeyword),r.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case K.GREATER_THAN_SIGN:{this._err(Ee.missingDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(r);break}case K.EOF:{this._err(Ee.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Ee.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const r=this.currentToken;switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:break;case K.QUOTATION_MARK:{r.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case K.APOSTROPHE:{r.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case K.GREATER_THAN_SIGN:{this._err(Ee.missingDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(r);break}case K.EOF:{this._err(Ee.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Ee.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const r=this.currentToken;switch(e){case K.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),r.systemId+=At;break}case K.GREATER_THAN_SIGN:{this._err(Ee.abruptDoctypeSystemIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=J.DATA;break}case K.EOF:{this._err(Ee.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const r=this.currentToken;switch(e){case K.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case K.NULL:{this._err(Ee.unexpectedNullCharacter),r.systemId+=At;break}case K.GREATER_THAN_SIGN:{this._err(Ee.abruptDoctypeSystemIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=J.DATA;break}case K.EOF:{this._err(Ee.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const r=this.currentToken;switch(e){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:break;case K.GREATER_THAN_SIGN:{this.emitCurrentDoctype(r),this.state=J.DATA;break}case K.EOF:{this._err(Ee.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Ee.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const r=this.currentToken;switch(e){case K.GREATER_THAN_SIGN:{this.emitCurrentDoctype(r),this.state=J.DATA;break}case K.NULL:{this._err(Ee.unexpectedNullCharacter);break}case K.EOF:{this.emitCurrentDoctype(r),this._emitEOFToken();break}}}_stateCdataSection(e){switch(e){case K.RIGHT_SQUARE_BRACKET:{this.state=J.CDATA_SECTION_BRACKET;break}case K.EOF:{this._err(Ee.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===K.RIGHT_SQUARE_BRACKET?this.state=J.CDATA_SECTION_END:(this._emitChars("]"),this.state=J.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case K.GREATER_THAN_SIGN:{this.state=J.DATA;break}case K.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=J.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0)if(this.preprocessor.lastChunkWritten)e=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}e===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(K.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&TA(this.preprocessor.peek(1))?J.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){TA(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===K.SEMICOLON&&this._err(Ee.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}}const nB=new Set([C.DD,C.DT,C.LI,C.OPTGROUP,C.OPTION,C.P,C.RB,C.RP,C.RT,C.RTC]),kA=new Set([...nB,C.CAPTION,C.COLGROUP,C.TBODY,C.TD,C.TFOOT,C.TH,C.THEAD,C.TR]),Am=new Set([C.APPLET,C.CAPTION,C.HTML,C.MARQUEE,C.OBJECT,C.TABLE,C.TD,C.TEMPLATE,C.TH]),hce=new Set([...Am,C.OL,C.UL]),fce=new Set([...Am,C.BUTTON]),AA=new Set([C.ANNOTATION_XML,C.MI,C.MN,C.MO,C.MS,C.MTEXT]),RA=new Set([C.DESC,C.FOREIGN_OBJECT,C.TITLE]),dce=new Set([C.TR,C.TEMPLATE,C.HTML]),pce=new Set([C.TBODY,C.TFOOT,C.THEAD,C.TEMPLATE,C.HTML]),mce=new Set([C.TABLE,C.TEMPLATE,C.HTML]),gce=new Set([C.TD,C.TH]);class _ce{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,r,n){this.treeAdapter=r,this.handler=n,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=C.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===C.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Ie.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,r){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=r,this.currentTagId=r,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,r,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,r){const n=this._indexOf(e);this.items[n]=r,n===this.stackTop&&(this.current=r)}insertAfter(e,r,n){const i=this._indexOf(e)+1;this.items.splice(i,0,r),this.tagIDs.splice(i,0,n),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(e){let r=this.stackTop+1;do r=this.tagIDs.lastIndexOf(e,r-1);while(r>0&&this.treeAdapter.getNamespaceURI(this.items[r])!==Ie.HTML);this.shortenToLength(r<0?0:r)}shortenToLength(e){for(;this.stackTop>=e;){const r=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(r,this.stackTop<e)}}popUntilElementPopped(e){const r=this._indexOf(e);this.shortenToLength(r<0?0:r)}popUntilPopped(e,r){const n=this._indexOfTagNames(e,r);this.shortenToLength(n<0?0:n)}popUntilNumberedHeaderPopped(){this.popUntilPopped(Ry,Ie.HTML)}popUntilTableCellPopped(){this.popUntilPopped(gce,Ie.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,r){for(let n=this.stackTop;n>=0;n--)if(e.has(this.tagIDs[n])&&this.treeAdapter.getNamespaceURI(this.items[n])===r)return n;return-1}clearBackTo(e,r){const n=this._indexOfTagNames(e,r);this.shortenToLength(n+1)}clearBackToTableContext(){this.clearBackTo(mce,Ie.HTML)}clearBackToTableBodyContext(){this.clearBackTo(pce,Ie.HTML)}clearBackToTableRowContext(){this.clearBackTo(dce,Ie.HTML)}remove(e){const r=this._indexOf(e);r>=0&&(r===this.stackTop?this.pop():(this.items.splice(r,1),this.tagIDs.splice(r,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===C.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const r=this._indexOf(e)-1;return r>=0?this.items[r]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===C.HTML}hasInDynamicScope(e,r){for(let n=this.stackTop;n>=0;n--){const i=this.tagIDs[n];switch(this.treeAdapter.getNamespaceURI(this.items[n])){case Ie.HTML:{if(i===e)return!0;if(r.has(i))return!1;break}case Ie.SVG:{if(RA.has(i))return!1;break}case Ie.MATHML:{if(AA.has(i))return!1;break}}}return!0}hasInScope(e){return this.hasInDynamicScope(e,Am)}hasInListItemScope(e){return this.hasInDynamicScope(e,hce)}hasInButtonScope(e){return this.hasInDynamicScope(e,fce)}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const r=this.tagIDs[e];switch(this.treeAdapter.getNamespaceURI(this.items[e])){case Ie.HTML:{if(Ry.has(r))return!0;if(Am.has(r))return!1;break}case Ie.SVG:{if(RA.has(r))return!1;break}case Ie.MATHML:{if(AA.has(r))return!1;break}}}return!0}hasInTableScope(e){for(let r=this.stackTop;r>=0;r--)if(this.treeAdapter.getNamespaceURI(this.items[r])===Ie.HTML)switch(this.tagIDs[r]){case e:return!0;case C.TABLE:case C.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--)if(this.treeAdapter.getNamespaceURI(this.items[e])===Ie.HTML)switch(this.tagIDs[e]){case C.TBODY:case C.THEAD:case C.TFOOT:return!0;case C.TABLE:case C.HTML:return!1}return!0}hasInSelectScope(e){for(let r=this.stackTop;r>=0;r--)if(this.treeAdapter.getNamespaceURI(this.items[r])===Ie.HTML)switch(this.tagIDs[r]){case e:return!0;case C.OPTION:case C.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;nB.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;kA.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==e&&kA.has(this.currentTagId);)this.pop()}}const U_=3;var mi;(function(t){t[t.Marker=0]="Marker",t[t.Element=1]="Element"})(mi||(mi={}));const PA={type:mi.Marker};class bce{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,r){const n=[],i=r.length,s=this.treeAdapter.getTagName(e),o=this.treeAdapter.getNamespaceURI(e);for(let a=0;a<this.entries.length;a++){const l=this.entries[a];if(l.type===mi.Marker)break;const{element:c}=l;if(this.treeAdapter.getTagName(c)===s&&this.treeAdapter.getNamespaceURI(c)===o){const u=this.treeAdapter.getAttrList(c);u.length===i&&n.push({idx:a,attrs:u})}}return n}_ensureNoahArkCondition(e){if(this.entries.length<U_)return;const r=this.treeAdapter.getAttrList(e),n=this._getNoahArkConditionCandidates(e,r);if(n.length<U_)return;const i=new Map(r.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<n.length;o++){const a=n[o];a.attrs.every(l=>i.get(l.name)===l.value)&&(s+=1,s>=U_&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(PA)}pushElement(e,r){this._ensureNoahArkCondition(e),this.entries.unshift({type:mi.Element,element:e,token:r})}insertElementAfterBookmark(e,r){const n=this.entries.indexOf(this.bookmark);this.entries.splice(n,0,{type:mi.Element,element:e,token:r})}removeEntry(e){const r=this.entries.indexOf(e);r>=0&&this.entries.splice(r,1)}clearToLastMarker(){const e=this.entries.indexOf(PA);e>=0?this.entries.splice(0,e+1):this.entries.length=0}getElementEntryInScopeWithTagName(e){const r=this.entries.find(n=>n.type===mi.Marker||this.treeAdapter.getTagName(n.element)===e);return r&&r.type===mi.Element?r:null}getElementEntry(e){return this.entries.find(r=>r.type===mi.Element&&r.element===e)}}const ks={createDocument(){return{nodeName:"#document",mode:xn.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(t,e,r){return{nodeName:t,tagName:t,attrs:r,namespaceURI:e,childNodes:[],parentNode:null}},createCommentNode(t){return{nodeName:"#comment",data:t,parentNode:null}},createTextNode(t){return{nodeName:"#text",value:t,parentNode:null}},appendChild(t,e){t.childNodes.push(e),e.parentNode=t},insertBefore(t,e,r){const n=t.childNodes.indexOf(r);t.childNodes.splice(n,0,e),e.parentNode=t},setTemplateContent(t,e){t.content=e},getTemplateContent(t){return t.content},setDocumentType(t,e,r,n){const i=t.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=e,i.publicId=r,i.systemId=n;else{const s={nodeName:"#documentType",name:e,publicId:r,systemId:n,parentNode:null};ks.appendChild(t,s)}},setDocumentMode(t,e){t.mode=e},getDocumentMode(t){return t.mode},detachNode(t){if(t.parentNode){const e=t.parentNode.childNodes.indexOf(t);t.parentNode.childNodes.splice(e,1),t.parentNode=null}},insertText(t,e){if(t.childNodes.length>0){const r=t.childNodes[t.childNodes.length-1];if(ks.isTextNode(r)){r.value+=e;return}}ks.appendChild(t,ks.createTextNode(e))},insertTextBefore(t,e,r){const n=t.childNodes[t.childNodes.indexOf(r)-1];n&&ks.isTextNode(n)?n.value+=e:ks.insertBefore(t,ks.createTextNode(e),r)},adoptAttributes(t,e){const r=new Set(t.attrs.map(n=>n.name));for(let n=0;n<e.length;n++)r.has(e[n].name)||t.attrs.push(e[n])},getFirstChild(t){return t.childNodes[0]},getChildNodes(t){return t.childNodes},getParentNode(t){return t.parentNode},getAttrList(t){return t.attrs},getTagName(t){return t.tagName},getNamespaceURI(t){return t.namespaceURI},getTextNodeContent(t){return t.value},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){return t.name},getDocumentTypeNodePublicId(t){return t.publicId},getDocumentTypeNodeSystemId(t){return t.systemId},isTextNode(t){return t.nodeName==="#text"},isCommentNode(t){return t.nodeName==="#comment"},isDocumentTypeNode(t){return t.nodeName==="#documentType"},isElementNode(t){return Object.prototype.hasOwnProperty.call(t,"tagName")},setNodeSourceCodeLocation(t,e){t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){t.sourceCodeLocation={...t.sourceCodeLocation,...e}}},iB="html",yce="about:legacy-compat",vce="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",sB=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],wce=[...sB,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],Ece=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),oB=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Sce=[...oB,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function IA(t,e){return e.some(r=>t.startsWith(r))}function xce(t){return t.name===iB&&t.publicId===null&&(t.systemId===null||t.systemId===yce)}function Tce(t){if(t.name!==iB)return xn.QUIRKS;const{systemId:e}=t;if(e&&e.toLowerCase()===vce)return xn.QUIRKS;let{publicId:r}=t;if(r!==null){if(r=r.toLowerCase(),Ece.has(r))return xn.QUIRKS;let n=e===null?wce:sB;if(IA(r,n))return xn.QUIRKS;if(n=e===null?oB:Sce,IA(r,n))return xn.LIMITED_QUIRKS}return xn.NO_QUIRKS}const DA={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Cce="definitionurl",kce="definitionURL",Ace=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),Rce=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Ie.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Ie.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Ie.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Ie.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Ie.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Ie.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Ie.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:Ie.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Ie.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Ie.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Ie.XMLNS}]]),Pce=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),Ice=new Set([C.B,C.BIG,C.BLOCKQUOTE,C.BODY,C.BR,C.CENTER,C.CODE,C.DD,C.DIV,C.DL,C.DT,C.EM,C.EMBED,C.H1,C.H2,C.H3,C.H4,C.H5,C.H6,C.HEAD,C.HR,C.I,C.IMG,C.LI,C.LISTING,C.MENU,C.META,C.NOBR,C.OL,C.P,C.PRE,C.RUBY,C.S,C.SMALL,C.SPAN,C.STRONG,C.STRIKE,C.SUB,C.SUP,C.TABLE,C.TT,C.U,C.UL,C.VAR]);function Dce(t){const e=t.tagID;return e===C.FONT&&t.attrs.some(({name:n})=>n===Qo.COLOR||n===Qo.SIZE||n===Qo.FACE)||Ice.has(e)}function aB(t){for(let e=0;e<t.attrs.length;e++)if(t.attrs[e].name===Cce){t.attrs[e].name=kce;break}}function lB(t){for(let e=0;e<t.attrs.length;e++){const r=Ace.get(t.attrs[e].name);r!=null&&(t.attrs[e].name=r)}}function NE(t){for(let e=0;e<t.attrs.length;e++){const r=Rce.get(t.attrs[e].name);r&&(t.attrs[e].prefix=r.prefix,t.attrs[e].name=r.name,t.attrs[e].namespace=r.namespace)}}function Oce(t){const e=Pce.get(t.tagName);e!=null&&(t.tagName=e,t.tagID=dc(t.tagName))}function Lce(t,e){return e===Ie.MATHML&&(t===C.MI||t===C.MO||t===C.MN||t===C.MS||t===C.MTEXT)}function Nce(t,e,r){if(e===Ie.MATHML&&t===C.ANNOTATION_XML){for(let n=0;n<r.length;n++)if(r[n].name===Qo.ENCODING){const i=r[n].value.toLowerCase();return i===DA.TEXT_HTML||i===DA.APPLICATION_XML}}return e===Ie.SVG&&(t===C.FOREIGN_OBJECT||t===C.DESC||t===C.TITLE)}function Mce(t,e,r,n){return(!n||n===Ie.HTML)&&Nce(t,e,r)||(!n||n===Ie.MATHML)&&Lce(t,e)}const Bce="hidden",Fce=8,Hce=3;var ne;(function(t){t[t.INITIAL=0]="INITIAL",t[t.BEFORE_HTML=1]="BEFORE_HTML",t[t.BEFORE_HEAD=2]="BEFORE_HEAD",t[t.IN_HEAD=3]="IN_HEAD",t[t.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",t[t.AFTER_HEAD=5]="AFTER_HEAD",t[t.IN_BODY=6]="IN_BODY",t[t.TEXT=7]="TEXT",t[t.IN_TABLE=8]="IN_TABLE",t[t.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",t[t.IN_CAPTION=10]="IN_CAPTION",t[t.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",t[t.IN_TABLE_BODY=12]="IN_TABLE_BODY",t[t.IN_ROW=13]="IN_ROW",t[t.IN_CELL=14]="IN_CELL",t[t.IN_SELECT=15]="IN_SELECT",t[t.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",t[t.IN_TEMPLATE=17]="IN_TEMPLATE",t[t.AFTER_BODY=18]="AFTER_BODY",t[t.IN_FRAMESET=19]="IN_FRAMESET",t[t.AFTER_FRAMESET=20]="AFTER_FRAMESET",t[t.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",t[t.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ne||(ne={}));const Uce={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},cB=new Set([C.TABLE,C.TBODY,C.TFOOT,C.THEAD,C.TR]),OA={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:ks,onParseError:null};class LA{constructor(e,r,n=null,i=null){this.fragmentContext=n,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ne.INITIAL,this.originalInsertionMode=ne.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...OA,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=r??this.treeAdapter.createDocument(),this.tokenizer=new uce(this.options,this),this.activeFormattingElements=new bce(this.treeAdapter),this.fragmentContextID=n?dc(this.treeAdapter.getTagName(n)):C.UNKNOWN,this._setContextModes(n??this.document,this.fragmentContextID),this.openElements=new _ce(this.document,this.treeAdapter,this)}static parse(e,r){const n=new this(r);return n.tokenizer.write(e,!0),n.document}static getFragmentParser(e,r){const n={...OA,...r};e??(e=n.treeAdapter.createElement(_e.TEMPLATE,Ie.HTML,[]));const i=n.treeAdapter.createElement("documentmock",Ie.HTML,[]),s=new this(n,i,e);return s.fragmentContextID===C.TEMPLATE&&s.tmplInsertionModeStack.unshift(ne.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),r=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,r),r}_err(e,r,n){var i;if(!this.onParseError)return;const s=(i=e.location)!==null&&i!==void 0?i:Uce,o={code:r,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:n?s.startLine:s.endLine,endCol:n?s.startCol:s.endCol,endOffset:n?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(e,r,n){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,e),n&&this.openElements.stackTop>0&&this._setContextModes(e,r)}onItemPop(e,r){var n,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),(i=(n=this.treeAdapter).onItemPop)===null||i===void 0||i.call(n,e,this.openElements.current),r){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(e,r){const n=e===this.document||this.treeAdapter.getNamespaceURI(e)===Ie.HTML;this.currentNotInHTML=!n,this.tokenizer.inForeignNode=!n&&!this._isIntegrationPoint(r,e)}_switchToTextParsing(e,r){this._insertElement(e,Ie.HTML),this.tokenizer.state=r,this.originalInsertionMode=this.insertionMode,this.insertionMode=ne.TEXT}switchToPlaintextParsing(){this.insertionMode=ne.TEXT,this.originalInsertionMode=ne.IN_BODY,this.tokenizer.state=$t.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===_e.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Ie.HTML))switch(this.fragmentContextID){case C.TITLE:case C.TEXTAREA:{this.tokenizer.state=$t.RCDATA;break}case C.STYLE:case C.XMP:case C.IFRAME:case C.NOEMBED:case C.NOFRAMES:case C.NOSCRIPT:{this.tokenizer.state=$t.RAWTEXT;break}case C.SCRIPT:{this.tokenizer.state=$t.SCRIPT_DATA;break}case C.PLAINTEXT:{this.tokenizer.state=$t.PLAINTEXT;break}}}_setDocumentType(e){const r=e.name||"",n=e.publicId||"",i=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,r,n,i),e.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,e.location)}}_attachElementToTree(e,r){if(this.options.sourceCodeLocationInfo){const n=r&&{...r,startTag:r};this.treeAdapter.setNodeSourceCodeLocation(e,n)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const n=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(n,e)}}_appendElement(e,r){const n=this.treeAdapter.createElement(e.tagName,r,e.attrs);this._attachElementToTree(n,e.location)}_insertElement(e,r){const n=this.treeAdapter.createElement(e.tagName,r,e.attrs);this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID)}_insertFakeElement(e,r){const n=this.treeAdapter.createElement(e,Ie.HTML,[]);this._attachElementToTree(n,null),this.openElements.push(n,r)}_insertTemplate(e){const r=this.treeAdapter.createElement(e.tagName,Ie.HTML,e.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(r,n),this._attachElementToTree(r,e.location),this.openElements.push(r,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(_e.HTML,Ie.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,C.HTML)}_appendCommentNode(e,r){const n=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(r,n),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,e.location)}_insertCharacters(e){let r,n;if(this._shouldFosterParentOnInsertion()?({parent:r,beforeElement:n}=this._findFosterParentingLocation(),n?this.treeAdapter.insertTextBefore(r,e.chars,n):this.treeAdapter.insertText(r,e.chars)):(r=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(r,e.chars)),!e.location)return;const i=this.treeAdapter.getChildNodes(r),s=n?i.lastIndexOf(n):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:l,endCol:c,endOffset:u}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:l,endCol:c,endOffset:u})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,e.location)}_adoptNodes(e,r){for(let n=this.treeAdapter.getFirstChild(e);n;n=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(r,n)}_setEndLocation(e,r){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&r.location){const n=r.location,i=this.treeAdapter.getTagName(e),s=r.type===et.END_TAG&&i===r.tagName?{endTag:{...n},endLine:n.endLine,endCol:n.endCol,endOffset:n.endOffset}:{endLine:n.startLine,endCol:n.startCol,endOffset:n.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,s)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let r,n;return this.openElements.stackTop===0&&this.fragmentContext?(r=this.fragmentContext,n=this.fragmentContextID):{current:r,currentTagId:n}=this.openElements,e.tagID===C.SVG&&this.treeAdapter.getTagName(r)===_e.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(r)===Ie.MATHML?!1:this.tokenizer.inForeignNode||(e.tagID===C.MGLYPH||e.tagID===C.MALIGNMARK)&&!this._isIntegrationPoint(n,r,Ie.HTML)}_processToken(e){switch(e.type){case et.CHARACTER:{this.onCharacter(e);break}case et.NULL_CHARACTER:{this.onNullCharacter(e);break}case et.COMMENT:{this.onComment(e);break}case et.DOCTYPE:{this.onDoctype(e);break}case et.START_TAG:{this._processStartTag(e);break}case et.END_TAG:{this.onEndTag(e);break}case et.EOF:{this.onEof(e);break}case et.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(e);break}}}_isIntegrationPoint(e,r,n){const i=this.treeAdapter.getNamespaceURI(r),s=this.treeAdapter.getAttrList(r);return Mce(e,i,s,n)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const r=this.activeFormattingElements.entries.findIndex(i=>i.type===mi.Marker||this.openElements.contains(i.element)),n=r<0?e-1:r-1;for(let i=n;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ne.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(C.P),this.openElements.popUntilTagNamePopped(C.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(e===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case C.TR:{this.insertionMode=ne.IN_ROW;return}case C.TBODY:case C.THEAD:case C.TFOOT:{this.insertionMode=ne.IN_TABLE_BODY;return}case C.CAPTION:{this.insertionMode=ne.IN_CAPTION;return}case C.COLGROUP:{this.insertionMode=ne.IN_COLUMN_GROUP;return}case C.TABLE:{this.insertionMode=ne.IN_TABLE;return}case C.BODY:{this.insertionMode=ne.IN_BODY;return}case C.FRAMESET:{this.insertionMode=ne.IN_FRAMESET;return}case C.SELECT:{this._resetInsertionModeForSelect(e);return}case C.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case C.HTML:{this.insertionMode=this.headElement?ne.AFTER_HEAD:ne.BEFORE_HEAD;return}case C.TD:case C.TH:{if(e>0){this.insertionMode=ne.IN_CELL;return}break}case C.HEAD:{if(e>0){this.insertionMode=ne.IN_HEAD;return}break}}this.insertionMode=ne.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let r=e-1;r>0;r--){const n=this.openElements.tagIDs[r];if(n===C.TEMPLATE)break;if(n===C.TABLE){this.insertionMode=ne.IN_SELECT_IN_TABLE;return}}this.insertionMode=ne.IN_SELECT}_isElementCausesFosterParenting(e){return cB.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const r=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case C.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(r)===Ie.HTML)return{parent:this.treeAdapter.getTemplateContent(r),beforeElement:null};break}case C.TABLE:{const n=this.treeAdapter.getParentNode(r);return n?{parent:n,beforeElement:r}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const r=this._findFosterParentingLocation();r.beforeElement?this.treeAdapter.insertBefore(r.parent,e,r.beforeElement):this.treeAdapter.appendChild(r.parent,e)}_isSpecialElement(e,r){const n=this.treeAdapter.getNamespaceURI(e);return oce[n].has(r)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){ghe(this,e);return}switch(this.insertionMode){case ne.INITIAL:{jc(this,e);break}case ne.BEFORE_HTML:{wu(this,e);break}case ne.BEFORE_HEAD:{Eu(this,e);break}case ne.IN_HEAD:{Su(this,e);break}case ne.IN_HEAD_NO_SCRIPT:{xu(this,e);break}case ne.AFTER_HEAD:{Tu(this,e);break}case ne.IN_BODY:case ne.IN_CAPTION:case ne.IN_CELL:case ne.IN_TEMPLATE:{hB(this,e);break}case ne.TEXT:case ne.IN_SELECT:case ne.IN_SELECT_IN_TABLE:{this._insertCharacters(e);break}case ne.IN_TABLE:case ne.IN_TABLE_BODY:case ne.IN_ROW:{j_(this,e);break}case ne.IN_TABLE_TEXT:{_B(this,e);break}case ne.IN_COLUMN_GROUP:{Rm(this,e);break}case ne.AFTER_BODY:{Pm(this,e);break}case ne.AFTER_AFTER_BODY:{bp(this,e);break}}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){mhe(this,e);return}switch(this.insertionMode){case ne.INITIAL:{jc(this,e);break}case ne.BEFORE_HTML:{wu(this,e);break}case ne.BEFORE_HEAD:{Eu(this,e);break}case ne.IN_HEAD:{Su(this,e);break}case ne.IN_HEAD_NO_SCRIPT:{xu(this,e);break}case ne.AFTER_HEAD:{Tu(this,e);break}case ne.TEXT:{this._insertCharacters(e);break}case ne.IN_TABLE:case ne.IN_TABLE_BODY:case ne.IN_ROW:{j_(this,e);break}case ne.IN_COLUMN_GROUP:{Rm(this,e);break}case ne.AFTER_BODY:{Pm(this,e);break}case ne.AFTER_AFTER_BODY:{bp(this,e);break}}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){Py(this,e);return}switch(this.insertionMode){case ne.INITIAL:case ne.BEFORE_HTML:case ne.BEFORE_HEAD:case ne.IN_HEAD:case ne.IN_HEAD_NO_SCRIPT:case ne.AFTER_HEAD:case ne.IN_BODY:case ne.IN_TABLE:case ne.IN_CAPTION:case ne.IN_COLUMN_GROUP:case ne.IN_TABLE_BODY:case ne.IN_ROW:case ne.IN_CELL:case ne.IN_SELECT:case ne.IN_SELECT_IN_TABLE:case ne.IN_TEMPLATE:case ne.IN_FRAMESET:case ne.AFTER_FRAMESET:{Py(this,e);break}case ne.IN_TABLE_TEXT:{$c(this,e);break}case ne.AFTER_BODY:{qce(this,e);break}case ne.AFTER_AFTER_BODY:case ne.AFTER_AFTER_FRAMESET:{Kce(this,e);break}}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case ne.INITIAL:{Yce(this,e);break}case ne.BEFORE_HEAD:case ne.IN_HEAD:case ne.IN_HEAD_NO_SCRIPT:case ne.AFTER_HEAD:{this._err(e,Ee.misplacedDoctype);break}case ne.IN_TABLE_TEXT:{$c(this,e);break}}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,Ee.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?_he(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case ne.INITIAL:{jc(this,e);break}case ne.BEFORE_HTML:{Xce(this,e);break}case ne.BEFORE_HEAD:{Zce(this,e);break}case ne.IN_HEAD:{Zn(this,e);break}case ne.IN_HEAD_NO_SCRIPT:{tue(this,e);break}case ne.AFTER_HEAD:{nue(this,e);break}case ne.IN_BODY:{Rr(this,e);break}case ne.IN_TABLE:{jl(this,e);break}case ne.IN_TABLE_TEXT:{$c(this,e);break}case ne.IN_CAPTION:{Jue(this,e);break}case ne.IN_COLUMN_GROUP:{FE(this,e);break}case ne.IN_TABLE_BODY:{n0(this,e);break}case ne.IN_ROW:{i0(this,e);break}case ne.IN_CELL:{rhe(this,e);break}case ne.IN_SELECT:{vB(this,e);break}case ne.IN_SELECT_IN_TABLE:{ihe(this,e);break}case ne.IN_TEMPLATE:{ohe(this,e);break}case ne.AFTER_BODY:{lhe(this,e);break}case ne.IN_FRAMESET:{che(this,e);break}case ne.AFTER_FRAMESET:{hhe(this,e);break}case ne.AFTER_AFTER_BODY:{dhe(this,e);break}case ne.AFTER_AFTER_FRAMESET:{phe(this,e);break}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?bhe(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case ne.INITIAL:{jc(this,e);break}case ne.BEFORE_HTML:{Qce(this,e);break}case ne.BEFORE_HEAD:{Jce(this,e);break}case ne.IN_HEAD:{eue(this,e);break}case ne.IN_HEAD_NO_SCRIPT:{rue(this,e);break}case ne.AFTER_HEAD:{iue(this,e);break}case ne.IN_BODY:{r0(this,e);break}case ne.TEXT:{zue(this,e);break}case ne.IN_TABLE:{ch(this,e);break}case ne.IN_TABLE_TEXT:{$c(this,e);break}case ne.IN_CAPTION:{ehe(this,e);break}case ne.IN_COLUMN_GROUP:{the(this,e);break}case ne.IN_TABLE_BODY:{Iy(this,e);break}case ne.IN_ROW:{yB(this,e);break}case ne.IN_CELL:{nhe(this,e);break}case ne.IN_SELECT:{wB(this,e);break}case ne.IN_SELECT_IN_TABLE:{she(this,e);break}case ne.IN_TEMPLATE:{ahe(this,e);break}case ne.AFTER_BODY:{SB(this,e);break}case ne.IN_FRAMESET:{uhe(this,e);break}case ne.AFTER_FRAMESET:{fhe(this,e);break}case ne.AFTER_AFTER_BODY:{bp(this,e);break}}}onEof(e){switch(this.insertionMode){case ne.INITIAL:{jc(this,e);break}case ne.BEFORE_HTML:{wu(this,e);break}case ne.BEFORE_HEAD:{Eu(this,e);break}case ne.IN_HEAD:{Su(this,e);break}case ne.IN_HEAD_NO_SCRIPT:{xu(this,e);break}case ne.AFTER_HEAD:{Tu(this,e);break}case ne.IN_BODY:case ne.IN_TABLE:case ne.IN_CAPTION:case ne.IN_COLUMN_GROUP:case ne.IN_TABLE_BODY:case ne.IN_ROW:case ne.IN_CELL:case ne.IN_SELECT:case ne.IN_SELECT_IN_TABLE:{mB(this,e);break}case ne.TEXT:{Vue(this,e);break}case ne.IN_TABLE_TEXT:{$c(this,e);break}case ne.IN_TEMPLATE:{EB(this,e);break}case ne.AFTER_BODY:case ne.IN_FRAMESET:case ne.AFTER_FRAMESET:case ne.AFTER_AFTER_BODY:case ne.AFTER_AFTER_FRAMESET:{BE(this,e);break}}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===K.LINE_FEED)){if(e.chars.length===1)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case ne.IN_HEAD:case ne.IN_HEAD_NO_SCRIPT:case ne.AFTER_HEAD:case ne.TEXT:case ne.IN_COLUMN_GROUP:case ne.IN_SELECT:case ne.IN_SELECT_IN_TABLE:case ne.IN_FRAMESET:case ne.AFTER_FRAMESET:{this._insertCharacters(e);break}case ne.IN_BODY:case ne.IN_CAPTION:case ne.IN_CELL:case ne.IN_TEMPLATE:case ne.AFTER_BODY:case ne.AFTER_AFTER_BODY:case ne.AFTER_AFTER_FRAMESET:{uB(this,e);break}case ne.IN_TABLE:case ne.IN_TABLE_BODY:case ne.IN_ROW:{j_(this,e);break}case ne.IN_TABLE_TEXT:{gB(this,e);break}}}}function jce(t,e){let r=t.activeFormattingElements.getElementEntryInScopeWithTagName(e.tagName);return r?t.openElements.contains(r.element)?t.openElements.hasInScope(e.tagID)||(r=null):(t.activeFormattingElements.removeEntry(r),r=null):pB(t,e),r}function $ce(t,e){let r=null,n=t.openElements.stackTop;for(;n>=0;n--){const i=t.openElements.items[n];if(i===e.element)break;t._isSpecialElement(i,t.openElements.tagIDs[n])&&(r=i)}return r||(t.openElements.shortenToLength(n<0?0:n),t.activeFormattingElements.removeEntry(e)),r}function zce(t,e,r){let n=e,i=t.openElements.getCommonAncestor(e);for(let s=0,o=i;o!==r;s++,o=i){i=t.openElements.getCommonAncestor(o);const a=t.activeFormattingElements.getElementEntry(o),l=a&&s>=Hce;!a||l?(l&&t.activeFormattingElements.removeEntry(a),t.openElements.remove(o)):(o=Vce(t,a),n===e&&(t.activeFormattingElements.bookmark=a),t.treeAdapter.detachNode(n),t.treeAdapter.appendChild(o,n),n=o)}return n}function Vce(t,e){const r=t.treeAdapter.getNamespaceURI(e.element),n=t.treeAdapter.createElement(e.token.tagName,r,e.token.attrs);return t.openElements.replace(e.element,n),e.element=n,n}function Wce(t,e,r){const n=t.treeAdapter.getTagName(e),i=dc(n);if(t._isElementCausesFosterParenting(i))t._fosterParentElement(r);else{const s=t.treeAdapter.getNamespaceURI(e);i===C.TEMPLATE&&s===Ie.HTML&&(e=t.treeAdapter.getTemplateContent(e)),t.treeAdapter.appendChild(e,r)}}function Gce(t,e,r){const n=t.treeAdapter.getNamespaceURI(r.element),{token:i}=r,s=t.treeAdapter.createElement(i.tagName,n,i.attrs);t._adoptNodes(e,s),t.treeAdapter.appendChild(e,s),t.activeFormattingElements.insertElementAfterBookmark(s,i),t.activeFormattingElements.removeEntry(r),t.openElements.remove(r.element),t.openElements.insertAfter(e,s,i.tagID)}function ME(t,e){for(let r=0;r<Fce;r++){const n=jce(t,e);if(!n)break;const i=$ce(t,n);if(!i)break;t.activeFormattingElements.bookmark=n;const s=zce(t,i,n.element),o=t.openElements.getCommonAncestor(n.element);t.treeAdapter.detachNode(s),o&&Wce(t,o,s),Gce(t,i,n)}}function Py(t,e){t._appendCommentNode(e,t.openElements.currentTmplContentOrNode)}function qce(t,e){t._appendCommentNode(e,t.openElements.items[0])}function Kce(t,e){t._appendCommentNode(e,t.document)}function BE(t,e){if(t.stopped=!0,e.location){const r=t.fragmentContext?0:2;for(let n=t.openElements.stackTop;n>=r;n--)t._setEndLocation(t.openElements.items[n],e);if(!t.fragmentContext&&t.openElements.stackTop>=0){const n=t.openElements.items[0],i=t.treeAdapter.getNodeSourceCodeLocation(n);if(i&&!i.endTag&&(t._setEndLocation(n,e),t.openElements.stackTop>=1)){const s=t.openElements.items[1],o=t.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&t._setEndLocation(s,e)}}}}function Yce(t,e){t._setDocumentType(e);const r=e.forceQuirks?xn.QUIRKS:Tce(e);xce(e)||t._err(e,Ee.nonConformingDoctype),t.treeAdapter.setDocumentMode(t.document,r),t.insertionMode=ne.BEFORE_HTML}function jc(t,e){t._err(e,Ee.missingDoctype,!0),t.treeAdapter.setDocumentMode(t.document,xn.QUIRKS),t.insertionMode=ne.BEFORE_HTML,t._processToken(e)}function Xce(t,e){e.tagID===C.HTML?(t._insertElement(e,Ie.HTML),t.insertionMode=ne.BEFORE_HEAD):wu(t,e)}function Qce(t,e){const r=e.tagID;(r===C.HTML||r===C.HEAD||r===C.BODY||r===C.BR)&&wu(t,e)}function wu(t,e){t._insertFakeRootElement(),t.insertionMode=ne.BEFORE_HEAD,t._processToken(e)}function Zce(t,e){switch(e.tagID){case C.HTML:{Rr(t,e);break}case C.HEAD:{t._insertElement(e,Ie.HTML),t.headElement=t.openElements.current,t.insertionMode=ne.IN_HEAD;break}default:Eu(t,e)}}function Jce(t,e){const r=e.tagID;r===C.HEAD||r===C.BODY||r===C.HTML||r===C.BR?Eu(t,e):t._err(e,Ee.endTagWithoutMatchingOpenElement)}function Eu(t,e){t._insertFakeElement(_e.HEAD,C.HEAD),t.headElement=t.openElements.current,t.insertionMode=ne.IN_HEAD,t._processToken(e)}function Zn(t,e){switch(e.tagID){case C.HTML:{Rr(t,e);break}case C.BASE:case C.BASEFONT:case C.BGSOUND:case C.LINK:case C.META:{t._appendElement(e,Ie.HTML),e.ackSelfClosing=!0;break}case C.TITLE:{t._switchToTextParsing(e,$t.RCDATA);break}case C.NOSCRIPT:{t.options.scriptingEnabled?t._switchToTextParsing(e,$t.RAWTEXT):(t._insertElement(e,Ie.HTML),t.insertionMode=ne.IN_HEAD_NO_SCRIPT);break}case C.NOFRAMES:case C.STYLE:{t._switchToTextParsing(e,$t.RAWTEXT);break}case C.SCRIPT:{t._switchToTextParsing(e,$t.SCRIPT_DATA);break}case C.TEMPLATE:{t._insertTemplate(e),t.activeFormattingElements.insertMarker(),t.framesetOk=!1,t.insertionMode=ne.IN_TEMPLATE,t.tmplInsertionModeStack.unshift(ne.IN_TEMPLATE);break}case C.HEAD:{t._err(e,Ee.misplacedStartTagForHeadElement);break}default:Su(t,e)}}function eue(t,e){switch(e.tagID){case C.HEAD:{t.openElements.pop(),t.insertionMode=ne.AFTER_HEAD;break}case C.BODY:case C.BR:case C.HTML:{Su(t,e);break}case C.TEMPLATE:{Ta(t,e);break}default:t._err(e,Ee.endTagWithoutMatchingOpenElement)}}function Ta(t,e){t.openElements.tmplCount>0?(t.openElements.generateImpliedEndTagsThoroughly(),t.openElements.currentTagId!==C.TEMPLATE&&t._err(e,Ee.closingOfElementWithOpenChildElements),t.openElements.popUntilTagNamePopped(C.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode()):t._err(e,Ee.endTagWithoutMatchingOpenElement)}function Su(t,e){t.openElements.pop(),t.insertionMode=ne.AFTER_HEAD,t._processToken(e)}function tue(t,e){switch(e.tagID){case C.HTML:{Rr(t,e);break}case C.BASEFONT:case C.BGSOUND:case C.HEAD:case C.LINK:case C.META:case C.NOFRAMES:case C.STYLE:{Zn(t,e);break}case C.NOSCRIPT:{t._err(e,Ee.nestedNoscriptInHead);break}default:xu(t,e)}}function rue(t,e){switch(e.tagID){case C.NOSCRIPT:{t.openElements.pop(),t.insertionMode=ne.IN_HEAD;break}case C.BR:{xu(t,e);break}default:t._err(e,Ee.endTagWithoutMatchingOpenElement)}}function xu(t,e){const r=e.type===et.EOF?Ee.openElementsLeftAfterEof:Ee.disallowedContentInNoscriptInHead;t._err(e,r),t.openElements.pop(),t.insertionMode=ne.IN_HEAD,t._processToken(e)}function nue(t,e){switch(e.tagID){case C.HTML:{Rr(t,e);break}case C.BODY:{t._insertElement(e,Ie.HTML),t.framesetOk=!1,t.insertionMode=ne.IN_BODY;break}case C.FRAMESET:{t._insertElement(e,Ie.HTML),t.insertionMode=ne.IN_FRAMESET;break}case C.BASE:case C.BASEFONT:case C.BGSOUND:case C.LINK:case C.META:case C.NOFRAMES:case C.SCRIPT:case C.STYLE:case C.TEMPLATE:case C.TITLE:{t._err(e,Ee.abandonedHeadElementChild),t.openElements.push(t.headElement,C.HEAD),Zn(t,e),t.openElements.remove(t.headElement);break}case C.HEAD:{t._err(e,Ee.misplacedStartTagForHeadElement);break}default:Tu(t,e)}}function iue(t,e){switch(e.tagID){case C.BODY:case C.HTML:case C.BR:{Tu(t,e);break}case C.TEMPLATE:{Ta(t,e);break}default:t._err(e,Ee.endTagWithoutMatchingOpenElement)}}function Tu(t,e){t._insertFakeElement(_e.BODY,C.BODY),t.insertionMode=ne.IN_BODY,t0(t,e)}function t0(t,e){switch(e.type){case et.CHARACTER:{hB(t,e);break}case et.WHITESPACE_CHARACTER:{uB(t,e);break}case et.COMMENT:{Py(t,e);break}case et.START_TAG:{Rr(t,e);break}case et.END_TAG:{r0(t,e);break}case et.EOF:{mB(t,e);break}}}function uB(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e)}function hB(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e),t.framesetOk=!1}function sue(t,e){t.openElements.tmplCount===0&&t.treeAdapter.adoptAttributes(t.openElements.items[0],e.attrs)}function oue(t,e){const r=t.openElements.tryPeekProperlyNestedBodyElement();r&&t.openElements.tmplCount===0&&(t.framesetOk=!1,t.treeAdapter.adoptAttributes(r,e.attrs))}function aue(t,e){const r=t.openElements.tryPeekProperlyNestedBodyElement();t.framesetOk&&r&&(t.treeAdapter.detachNode(r),t.openElements.popAllUpToHtmlElement(),t._insertElement(e,Ie.HTML),t.insertionMode=ne.IN_FRAMESET)}function lue(t,e){t.openElements.hasInButtonScope(C.P)&&t._closePElement(),t._insertElement(e,Ie.HTML)}function cue(t,e){t.openElements.hasInButtonScope(C.P)&&t._closePElement(),Ry.has(t.openElements.currentTagId)&&t.openElements.pop(),t._insertElement(e,Ie.HTML)}function uue(t,e){t.openElements.hasInButtonScope(C.P)&&t._closePElement(),t._insertElement(e,Ie.HTML),t.skipNextNewLine=!0,t.framesetOk=!1}function hue(t,e){const r=t.openElements.tmplCount>0;(!t.formElement||r)&&(t.openElements.hasInButtonScope(C.P)&&t._closePElement(),t._insertElement(e,Ie.HTML),r||(t.formElement=t.openElements.current))}function fue(t,e){t.framesetOk=!1;const r=e.tagID;for(let n=t.openElements.stackTop;n>=0;n--){const i=t.openElements.tagIDs[n];if(r===C.LI&&i===C.LI||(r===C.DD||r===C.DT)&&(i===C.DD||i===C.DT)){t.openElements.generateImpliedEndTagsWithExclusion(i),t.openElements.popUntilTagNamePopped(i);break}if(i!==C.ADDRESS&&i!==C.DIV&&i!==C.P&&t._isSpecialElement(t.openElements.items[n],i))break}t.openElements.hasInButtonScope(C.P)&&t._closePElement(),t._insertElement(e,Ie.HTML)}function due(t,e){t.openElements.hasInButtonScope(C.P)&&t._closePElement(),t._insertElement(e,Ie.HTML),t.tokenizer.state=$t.PLAINTEXT}function pue(t,e){t.openElements.hasInScope(C.BUTTON)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(C.BUTTON)),t._reconstructActiveFormattingElements(),t._insertElement(e,Ie.HTML),t.framesetOk=!1}function mue(t,e){const r=t.activeFormattingElements.getElementEntryInScopeWithTagName(_e.A);r&&(ME(t,e),t.openElements.remove(r.element),t.activeFormattingElements.removeEntry(r)),t._reconstructActiveFormattingElements(),t._insertElement(e,Ie.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function gue(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Ie.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function _ue(t,e){t._reconstructActiveFormattingElements(),t.openElements.hasInScope(C.NOBR)&&(ME(t,e),t._reconstructActiveFormattingElements()),t._insertElement(e,Ie.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function bue(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Ie.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1}function yue(t,e){t.treeAdapter.getDocumentMode(t.document)!==xn.QUIRKS&&t.openElements.hasInButtonScope(C.P)&&t._closePElement(),t._insertElement(e,Ie.HTML),t.framesetOk=!1,t.insertionMode=ne.IN_TABLE}function fB(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,Ie.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function dB(t){const e=Z6(t,Qo.TYPE);return e!=null&&e.toLowerCase()===Bce}function vue(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,Ie.HTML),dB(e)||(t.framesetOk=!1),e.ackSelfClosing=!0}function wue(t,e){t._appendElement(e,Ie.HTML),e.ackSelfClosing=!0}function Eue(t,e){t.openElements.hasInButtonScope(C.P)&&t._closePElement(),t._appendElement(e,Ie.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function Sue(t,e){e.tagName=_e.IMG,e.tagID=C.IMG,fB(t,e)}function xue(t,e){t._insertElement(e,Ie.HTML),t.skipNextNewLine=!0,t.tokenizer.state=$t.RCDATA,t.originalInsertionMode=t.insertionMode,t.framesetOk=!1,t.insertionMode=ne.TEXT}function Tue(t,e){t.openElements.hasInButtonScope(C.P)&&t._closePElement(),t._reconstructActiveFormattingElements(),t.framesetOk=!1,t._switchToTextParsing(e,$t.RAWTEXT)}function Cue(t,e){t.framesetOk=!1,t._switchToTextParsing(e,$t.RAWTEXT)}function NA(t,e){t._switchToTextParsing(e,$t.RAWTEXT)}function kue(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Ie.HTML),t.framesetOk=!1,t.insertionMode=t.insertionMode===ne.IN_TABLE||t.insertionMode===ne.IN_CAPTION||t.insertionMode===ne.IN_TABLE_BODY||t.insertionMode===ne.IN_ROW||t.insertionMode===ne.IN_CELL?ne.IN_SELECT_IN_TABLE:ne.IN_SELECT}function Aue(t,e){t.openElements.currentTagId===C.OPTION&&t.openElements.pop(),t._reconstructActiveFormattingElements(),t._insertElement(e,Ie.HTML)}function Rue(t,e){t.openElements.hasInScope(C.RUBY)&&t.openElements.generateImpliedEndTags(),t._insertElement(e,Ie.HTML)}function Pue(t,e){t.openElements.hasInScope(C.RUBY)&&t.openElements.generateImpliedEndTagsWithExclusion(C.RTC),t._insertElement(e,Ie.HTML)}function Iue(t,e){t._reconstructActiveFormattingElements(),aB(e),NE(e),e.selfClosing?t._appendElement(e,Ie.MATHML):t._insertElement(e,Ie.MATHML),e.ackSelfClosing=!0}function Due(t,e){t._reconstructActiveFormattingElements(),lB(e),NE(e),e.selfClosing?t._appendElement(e,Ie.SVG):t._insertElement(e,Ie.SVG),e.ackSelfClosing=!0}function MA(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Ie.HTML)}function Rr(t,e){switch(e.tagID){case C.I:case C.S:case C.B:case C.U:case C.EM:case C.TT:case C.BIG:case C.CODE:case C.FONT:case C.SMALL:case C.STRIKE:case C.STRONG:{gue(t,e);break}case C.A:{mue(t,e);break}case C.H1:case C.H2:case C.H3:case C.H4:case C.H5:case C.H6:{cue(t,e);break}case C.P:case C.DL:case C.OL:case C.UL:case C.DIV:case C.DIR:case C.NAV:case C.MAIN:case C.MENU:case C.ASIDE:case C.CENTER:case C.FIGURE:case C.FOOTER:case C.HEADER:case C.HGROUP:case C.DIALOG:case C.DETAILS:case C.ADDRESS:case C.ARTICLE:case C.SEARCH:case C.SECTION:case C.SUMMARY:case C.FIELDSET:case C.BLOCKQUOTE:case C.FIGCAPTION:{lue(t,e);break}case C.LI:case C.DD:case C.DT:{fue(t,e);break}case C.BR:case C.IMG:case C.WBR:case C.AREA:case C.EMBED:case C.KEYGEN:{fB(t,e);break}case C.HR:{Eue(t,e);break}case C.RB:case C.RTC:{Rue(t,e);break}case C.RT:case C.RP:{Pue(t,e);break}case C.PRE:case C.LISTING:{uue(t,e);break}case C.XMP:{Tue(t,e);break}case C.SVG:{Due(t,e);break}case C.HTML:{sue(t,e);break}case C.BASE:case C.LINK:case C.META:case C.STYLE:case C.TITLE:case C.SCRIPT:case C.BGSOUND:case C.BASEFONT:case C.TEMPLATE:{Zn(t,e);break}case C.BODY:{oue(t,e);break}case C.FORM:{hue(t,e);break}case C.NOBR:{_ue(t,e);break}case C.MATH:{Iue(t,e);break}case C.TABLE:{yue(t,e);break}case C.INPUT:{vue(t,e);break}case C.PARAM:case C.TRACK:case C.SOURCE:{wue(t,e);break}case C.IMAGE:{Sue(t,e);break}case C.BUTTON:{pue(t,e);break}case C.APPLET:case C.OBJECT:case C.MARQUEE:{bue(t,e);break}case C.IFRAME:{Cue(t,e);break}case C.SELECT:{kue(t,e);break}case C.OPTION:case C.OPTGROUP:{Aue(t,e);break}case C.NOEMBED:case C.NOFRAMES:{NA(t,e);break}case C.FRAMESET:{aue(t,e);break}case C.TEXTAREA:{xue(t,e);break}case C.NOSCRIPT:{t.options.scriptingEnabled?NA(t,e):MA(t,e);break}case C.PLAINTEXT:{due(t,e);break}case C.COL:case C.TH:case C.TD:case C.TR:case C.HEAD:case C.FRAME:case C.TBODY:case C.TFOOT:case C.THEAD:case C.CAPTION:case C.COLGROUP:break;default:MA(t,e)}}function Oue(t,e){if(t.openElements.hasInScope(C.BODY)&&(t.insertionMode=ne.AFTER_BODY,t.options.sourceCodeLocationInfo)){const r=t.openElements.tryPeekProperlyNestedBodyElement();r&&t._setEndLocation(r,e)}}function Lue(t,e){t.openElements.hasInScope(C.BODY)&&(t.insertionMode=ne.AFTER_BODY,SB(t,e))}function Nue(t,e){const r=e.tagID;t.openElements.hasInScope(r)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(r))}function Mue(t){const e=t.openElements.tmplCount>0,{formElement:r}=t;e||(t.formElement=null),(r||e)&&t.openElements.hasInScope(C.FORM)&&(t.openElements.generateImpliedEndTags(),e?t.openElements.popUntilTagNamePopped(C.FORM):r&&t.openElements.remove(r))}function Bue(t){t.openElements.hasInButtonScope(C.P)||t._insertFakeElement(_e.P,C.P),t._closePElement()}function Fue(t){t.openElements.hasInListItemScope(C.LI)&&(t.openElements.generateImpliedEndTagsWithExclusion(C.LI),t.openElements.popUntilTagNamePopped(C.LI))}function Hue(t,e){const r=e.tagID;t.openElements.hasInScope(r)&&(t.openElements.generateImpliedEndTagsWithExclusion(r),t.openElements.popUntilTagNamePopped(r))}function Uue(t){t.openElements.hasNumberedHeaderInScope()&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilNumberedHeaderPopped())}function jue(t,e){const r=e.tagID;t.openElements.hasInScope(r)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(r),t.activeFormattingElements.clearToLastMarker())}function $ue(t){t._reconstructActiveFormattingElements(),t._insertFakeElement(_e.BR,C.BR),t.openElements.pop(),t.framesetOk=!1}function pB(t,e){const r=e.tagName,n=e.tagID;for(let i=t.openElements.stackTop;i>0;i--){const s=t.openElements.items[i],o=t.openElements.tagIDs[i];if(n===o&&(n!==C.UNKNOWN||t.treeAdapter.getTagName(s)===r)){t.openElements.generateImpliedEndTagsWithExclusion(n),t.openElements.stackTop>=i&&t.openElements.shortenToLength(i);break}if(t._isSpecialElement(s,o))break}}function r0(t,e){switch(e.tagID){case C.A:case C.B:case C.I:case C.S:case C.U:case C.EM:case C.TT:case C.BIG:case C.CODE:case C.FONT:case C.NOBR:case C.SMALL:case C.STRIKE:case C.STRONG:{ME(t,e);break}case C.P:{Bue(t);break}case C.DL:case C.UL:case C.OL:case C.DIR:case C.DIV:case C.NAV:case C.PRE:case C.MAIN:case C.MENU:case C.ASIDE:case C.BUTTON:case C.CENTER:case C.FIGURE:case C.FOOTER:case C.HEADER:case C.HGROUP:case C.DIALOG:case C.ADDRESS:case C.ARTICLE:case C.DETAILS:case C.SEARCH:case C.SECTION:case C.SUMMARY:case C.LISTING:case C.FIELDSET:case C.BLOCKQUOTE:case C.FIGCAPTION:{Nue(t,e);break}case C.LI:{Fue(t);break}case C.DD:case C.DT:{Hue(t,e);break}case C.H1:case C.H2:case C.H3:case C.H4:case C.H5:case C.H6:{Uue(t);break}case C.BR:{$ue(t);break}case C.BODY:{Oue(t,e);break}case C.HTML:{Lue(t,e);break}case C.FORM:{Mue(t);break}case C.APPLET:case C.OBJECT:case C.MARQUEE:{jue(t,e);break}case C.TEMPLATE:{Ta(t,e);break}default:pB(t,e)}}function mB(t,e){t.tmplInsertionModeStack.length>0?EB(t,e):BE(t,e)}function zue(t,e){var r;e.tagID===C.SCRIPT&&((r=t.scriptHandler)===null||r===void 0||r.call(t,t.openElements.current)),t.openElements.pop(),t.insertionMode=t.originalInsertionMode}function Vue(t,e){t._err(e,Ee.eofInElementThatCanContainOnlyText),t.openElements.pop(),t.insertionMode=t.originalInsertionMode,t.onEof(e)}function j_(t,e){if(cB.has(t.openElements.currentTagId))switch(t.pendingCharacterTokens.length=0,t.hasNonWhitespacePendingCharacterToken=!1,t.originalInsertionMode=t.insertionMode,t.insertionMode=ne.IN_TABLE_TEXT,e.type){case et.CHARACTER:{_B(t,e);break}case et.WHITESPACE_CHARACTER:{gB(t,e);break}}else cf(t,e)}function Wue(t,e){t.openElements.clearBackToTableContext(),t.activeFormattingElements.insertMarker(),t._insertElement(e,Ie.HTML),t.insertionMode=ne.IN_CAPTION}function Gue(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,Ie.HTML),t.insertionMode=ne.IN_COLUMN_GROUP}function que(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(_e.COLGROUP,C.COLGROUP),t.insertionMode=ne.IN_COLUMN_GROUP,FE(t,e)}function Kue(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,Ie.HTML),t.insertionMode=ne.IN_TABLE_BODY}function Yue(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(_e.TBODY,C.TBODY),t.insertionMode=ne.IN_TABLE_BODY,n0(t,e)}function Xue(t,e){t.openElements.hasInTableScope(C.TABLE)&&(t.openElements.popUntilTagNamePopped(C.TABLE),t._resetInsertionMode(),t._processStartTag(e))}function Que(t,e){dB(e)?t._appendElement(e,Ie.HTML):cf(t,e),e.ackSelfClosing=!0}function Zue(t,e){!t.formElement&&t.openElements.tmplCount===0&&(t._insertElement(e,Ie.HTML),t.formElement=t.openElements.current,t.openElements.pop())}function jl(t,e){switch(e.tagID){case C.TD:case C.TH:case C.TR:{Yue(t,e);break}case C.STYLE:case C.SCRIPT:case C.TEMPLATE:{Zn(t,e);break}case C.COL:{que(t,e);break}case C.FORM:{Zue(t,e);break}case C.TABLE:{Xue(t,e);break}case C.TBODY:case C.TFOOT:case C.THEAD:{Kue(t,e);break}case C.INPUT:{Que(t,e);break}case C.CAPTION:{Wue(t,e);break}case C.COLGROUP:{Gue(t,e);break}default:cf(t,e)}}function ch(t,e){switch(e.tagID){case C.TABLE:{t.openElements.hasInTableScope(C.TABLE)&&(t.openElements.popUntilTagNamePopped(C.TABLE),t._resetInsertionMode());break}case C.TEMPLATE:{Ta(t,e);break}case C.BODY:case C.CAPTION:case C.COL:case C.COLGROUP:case C.HTML:case C.TBODY:case C.TD:case C.TFOOT:case C.TH:case C.THEAD:case C.TR:break;default:cf(t,e)}}function cf(t,e){const r=t.fosterParentingEnabled;t.fosterParentingEnabled=!0,t0(t,e),t.fosterParentingEnabled=r}function gB(t,e){t.pendingCharacterTokens.push(e)}function _B(t,e){t.pendingCharacterTokens.push(e),t.hasNonWhitespacePendingCharacterToken=!0}function $c(t,e){let r=0;if(t.hasNonWhitespacePendingCharacterToken)for(;r<t.pendingCharacterTokens.length;r++)cf(t,t.pendingCharacterTokens[r]);else for(;r<t.pendingCharacterTokens.length;r++)t._insertCharacters(t.pendingCharacterTokens[r]);t.insertionMode=t.originalInsertionMode,t._processToken(e)}const bB=new Set([C.CAPTION,C.COL,C.COLGROUP,C.TBODY,C.TD,C.TFOOT,C.TH,C.THEAD,C.TR]);function Jue(t,e){const r=e.tagID;bB.has(r)?t.openElements.hasInTableScope(C.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(C.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=ne.IN_TABLE,jl(t,e)):Rr(t,e)}function ehe(t,e){const r=e.tagID;switch(r){case C.CAPTION:case C.TABLE:{t.openElements.hasInTableScope(C.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(C.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=ne.IN_TABLE,r===C.TABLE&&ch(t,e));break}case C.BODY:case C.COL:case C.COLGROUP:case C.HTML:case C.TBODY:case C.TD:case C.TFOOT:case C.TH:case C.THEAD:case C.TR:break;default:r0(t,e)}}function FE(t,e){switch(e.tagID){case C.HTML:{Rr(t,e);break}case C.COL:{t._appendElement(e,Ie.HTML),e.ackSelfClosing=!0;break}case C.TEMPLATE:{Zn(t,e);break}default:Rm(t,e)}}function the(t,e){switch(e.tagID){case C.COLGROUP:{t.openElements.currentTagId===C.COLGROUP&&(t.openElements.pop(),t.insertionMode=ne.IN_TABLE);break}case C.TEMPLATE:{Ta(t,e);break}case C.COL:break;default:Rm(t,e)}}function Rm(t,e){t.openElements.currentTagId===C.COLGROUP&&(t.openElements.pop(),t.insertionMode=ne.IN_TABLE,t._processToken(e))}function n0(t,e){switch(e.tagID){case C.TR:{t.openElements.clearBackToTableBodyContext(),t._insertElement(e,Ie.HTML),t.insertionMode=ne.IN_ROW;break}case C.TH:case C.TD:{t.openElements.clearBackToTableBodyContext(),t._insertFakeElement(_e.TR,C.TR),t.insertionMode=ne.IN_ROW,i0(t,e);break}case C.CAPTION:case C.COL:case C.COLGROUP:case C.TBODY:case C.TFOOT:case C.THEAD:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=ne.IN_TABLE,jl(t,e));break}default:jl(t,e)}}function Iy(t,e){const r=e.tagID;switch(e.tagID){case C.TBODY:case C.TFOOT:case C.THEAD:{t.openElements.hasInTableScope(r)&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=ne.IN_TABLE);break}case C.TABLE:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=ne.IN_TABLE,ch(t,e));break}case C.BODY:case C.CAPTION:case C.COL:case C.COLGROUP:case C.HTML:case C.TD:case C.TH:case C.TR:break;default:ch(t,e)}}function i0(t,e){switch(e.tagID){case C.TH:case C.TD:{t.openElements.clearBackToTableRowContext(),t._insertElement(e,Ie.HTML),t.insertionMode=ne.IN_CELL,t.activeFormattingElements.insertMarker();break}case C.CAPTION:case C.COL:case C.COLGROUP:case C.TBODY:case C.TFOOT:case C.THEAD:case C.TR:{t.openElements.hasInTableScope(C.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=ne.IN_TABLE_BODY,n0(t,e));break}default:jl(t,e)}}function yB(t,e){switch(e.tagID){case C.TR:{t.openElements.hasInTableScope(C.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=ne.IN_TABLE_BODY);break}case C.TABLE:{t.openElements.hasInTableScope(C.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=ne.IN_TABLE_BODY,Iy(t,e));break}case C.TBODY:case C.TFOOT:case C.THEAD:{(t.openElements.hasInTableScope(e.tagID)||t.openElements.hasInTableScope(C.TR))&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=ne.IN_TABLE_BODY,Iy(t,e));break}case C.BODY:case C.CAPTION:case C.COL:case C.COLGROUP:case C.HTML:case C.TD:case C.TH:break;default:ch(t,e)}}function rhe(t,e){const r=e.tagID;bB.has(r)?(t.openElements.hasInTableScope(C.TD)||t.openElements.hasInTableScope(C.TH))&&(t._closeTableCell(),i0(t,e)):Rr(t,e)}function nhe(t,e){const r=e.tagID;switch(r){case C.TD:case C.TH:{t.openElements.hasInTableScope(r)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(r),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=ne.IN_ROW);break}case C.TABLE:case C.TBODY:case C.TFOOT:case C.THEAD:case C.TR:{t.openElements.hasInTableScope(r)&&(t._closeTableCell(),yB(t,e));break}case C.BODY:case C.CAPTION:case C.COL:case C.COLGROUP:case C.HTML:break;default:r0(t,e)}}function vB(t,e){switch(e.tagID){case C.HTML:{Rr(t,e);break}case C.OPTION:{t.openElements.currentTagId===C.OPTION&&t.openElements.pop(),t._insertElement(e,Ie.HTML);break}case C.OPTGROUP:{t.openElements.currentTagId===C.OPTION&&t.openElements.pop(),t.openElements.currentTagId===C.OPTGROUP&&t.openElements.pop(),t._insertElement(e,Ie.HTML);break}case C.HR:{t.openElements.currentTagId===C.OPTION&&t.openElements.pop(),t.openElements.currentTagId===C.OPTGROUP&&t.openElements.pop(),t._appendElement(e,Ie.HTML),e.ackSelfClosing=!0;break}case C.INPUT:case C.KEYGEN:case C.TEXTAREA:case C.SELECT:{t.openElements.hasInSelectScope(C.SELECT)&&(t.openElements.popUntilTagNamePopped(C.SELECT),t._resetInsertionMode(),e.tagID!==C.SELECT&&t._processStartTag(e));break}case C.SCRIPT:case C.TEMPLATE:{Zn(t,e);break}}}function wB(t,e){switch(e.tagID){case C.OPTGROUP:{t.openElements.stackTop>0&&t.openElements.currentTagId===C.OPTION&&t.openElements.tagIDs[t.openElements.stackTop-1]===C.OPTGROUP&&t.openElements.pop(),t.openElements.currentTagId===C.OPTGROUP&&t.openElements.pop();break}case C.OPTION:{t.openElements.currentTagId===C.OPTION&&t.openElements.pop();break}case C.SELECT:{t.openElements.hasInSelectScope(C.SELECT)&&(t.openElements.popUntilTagNamePopped(C.SELECT),t._resetInsertionMode());break}case C.TEMPLATE:{Ta(t,e);break}}}function ihe(t,e){const r=e.tagID;r===C.CAPTION||r===C.TABLE||r===C.TBODY||r===C.TFOOT||r===C.THEAD||r===C.TR||r===C.TD||r===C.TH?(t.openElements.popUntilTagNamePopped(C.SELECT),t._resetInsertionMode(),t._processStartTag(e)):vB(t,e)}function she(t,e){const r=e.tagID;r===C.CAPTION||r===C.TABLE||r===C.TBODY||r===C.TFOOT||r===C.THEAD||r===C.TR||r===C.TD||r===C.TH?t.openElements.hasInTableScope(r)&&(t.openElements.popUntilTagNamePopped(C.SELECT),t._resetInsertionMode(),t.onEndTag(e)):wB(t,e)}function ohe(t,e){switch(e.tagID){case C.BASE:case C.BASEFONT:case C.BGSOUND:case C.LINK:case C.META:case C.NOFRAMES:case C.SCRIPT:case C.STYLE:case C.TEMPLATE:case C.TITLE:{Zn(t,e);break}case C.CAPTION:case C.COLGROUP:case C.TBODY:case C.TFOOT:case C.THEAD:{t.tmplInsertionModeStack[0]=ne.IN_TABLE,t.insertionMode=ne.IN_TABLE,jl(t,e);break}case C.COL:{t.tmplInsertionModeStack[0]=ne.IN_COLUMN_GROUP,t.insertionMode=ne.IN_COLUMN_GROUP,FE(t,e);break}case C.TR:{t.tmplInsertionModeStack[0]=ne.IN_TABLE_BODY,t.insertionMode=ne.IN_TABLE_BODY,n0(t,e);break}case C.TD:case C.TH:{t.tmplInsertionModeStack[0]=ne.IN_ROW,t.insertionMode=ne.IN_ROW,i0(t,e);break}default:t.tmplInsertionModeStack[0]=ne.IN_BODY,t.insertionMode=ne.IN_BODY,Rr(t,e)}}function ahe(t,e){e.tagID===C.TEMPLATE&&Ta(t,e)}function EB(t,e){t.openElements.tmplCount>0?(t.openElements.popUntilTagNamePopped(C.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode(),t.onEof(e)):BE(t,e)}function lhe(t,e){e.tagID===C.HTML?Rr(t,e):Pm(t,e)}function SB(t,e){var r;if(e.tagID===C.HTML){if(t.fragmentContext||(t.insertionMode=ne.AFTER_AFTER_BODY),t.options.sourceCodeLocationInfo&&t.openElements.tagIDs[0]===C.HTML){t._setEndLocation(t.openElements.items[0],e);const n=t.openElements.items[1];n&&!(!((r=t.treeAdapter.getNodeSourceCodeLocation(n))===null||r===void 0)&&r.endTag)&&t._setEndLocation(n,e)}}else Pm(t,e)}function Pm(t,e){t.insertionMode=ne.IN_BODY,t0(t,e)}function che(t,e){switch(e.tagID){case C.HTML:{Rr(t,e);break}case C.FRAMESET:{t._insertElement(e,Ie.HTML);break}case C.FRAME:{t._appendElement(e,Ie.HTML),e.ackSelfClosing=!0;break}case C.NOFRAMES:{Zn(t,e);break}}}function uhe(t,e){e.tagID===C.FRAMESET&&!t.openElements.isRootHtmlElementCurrent()&&(t.openElements.pop(),!t.fragmentContext&&t.openElements.currentTagId!==C.FRAMESET&&(t.insertionMode=ne.AFTER_FRAMESET))}function hhe(t,e){switch(e.tagID){case C.HTML:{Rr(t,e);break}case C.NOFRAMES:{Zn(t,e);break}}}function fhe(t,e){e.tagID===C.HTML&&(t.insertionMode=ne.AFTER_AFTER_FRAMESET)}function dhe(t,e){e.tagID===C.HTML?Rr(t,e):bp(t,e)}function bp(t,e){t.insertionMode=ne.IN_BODY,t0(t,e)}function phe(t,e){switch(e.tagID){case C.HTML:{Rr(t,e);break}case C.NOFRAMES:{Zn(t,e);break}}}function mhe(t,e){e.chars=At,t._insertCharacters(e)}function ghe(t,e){t._insertCharacters(e),t.framesetOk=!1}function xB(t){for(;t.treeAdapter.getNamespaceURI(t.openElements.current)!==Ie.HTML&&!t._isIntegrationPoint(t.openElements.currentTagId,t.openElements.current);)t.openElements.pop()}function _he(t,e){if(Dce(e))xB(t),t._startTagOutsideForeignContent(e);else{const r=t._getAdjustedCurrentElement(),n=t.treeAdapter.getNamespaceURI(r);n===Ie.MATHML?aB(e):n===Ie.SVG&&(Oce(e),lB(e)),NE(e),e.selfClosing?t._appendElement(e,n):t._insertElement(e,n),e.ackSelfClosing=!0}}function bhe(t,e){if(e.tagID===C.P||e.tagID===C.BR){xB(t),t._endTagOutsideForeignContent(e);return}for(let r=t.openElements.stackTop;r>0;r--){const n=t.openElements.items[r];if(t.treeAdapter.getNamespaceURI(n)===Ie.HTML){t._endTagOutsideForeignContent(e);break}const i=t.treeAdapter.getTagName(n);if(i.toLowerCase()===e.tagName){e.tagName=i,t.openElements.shortenToLength(r);break}}}_e.AREA,_e.BASE,_e.BASEFONT,_e.BGSOUND,_e.BR,_e.COL,_e.EMBED,_e.FRAME,_e.HR,_e.IMG,_e.INPUT,_e.KEYGEN,_e.LINK,_e.META,_e.PARAM,_e.SOURCE,_e.TRACK,_e.WBR;const yhe=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,vhe=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),BA={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function TB(t,e){const r=Phe(t),n=OE("type",{handlers:{root:whe,element:Ehe,text:She,comment:kB,doctype:xhe,raw:Che},unknown:khe}),i={parser:r?new LA(BA):LA.getFragmentParser(void 0,BA),handle(a){n(a,i)},stitches:!1,options:e||{}};n(t,i),pc(i,ji());const s=r?i.parser.document:i.parser.getFragment(),o=Dle(s,{file:i.options.file});return i.stitches&&af(o,"comment",function(a,l,c){const u=a;if(u.value.stitch&&c&&l!==void 0){const h=c.children;return h[l]=u.value.stitch,l}}),o.type==="root"&&o.children.length===1&&o.children[0].type===t.type?o.children[0]:o}function CB(t,e){let r=-1;if(t)for(;++r<t.length;)e.handle(t[r])}function whe(t,e){CB(t.children,e)}function Ehe(t,e){Ahe(t,e),CB(t.children,e),Rhe(t,e)}function She(t,e){e.parser.tokenizer.state>4&&(e.parser.tokenizer.state=0);const r={type:et.CHARACTER,chars:t.value,location:uf(t)};pc(e,ji(t)),e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken)}function xhe(t,e){const r={type:et.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:uf(t)};pc(e,ji(t)),e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken)}function The(t,e){e.stitches=!0;const r=Ihe(t);if("children"in t&&"children"in r){const n=TB({type:"root",children:t.children},e.options);r.children=n.children}kB({type:"comment",value:{stitch:r}},e)}function kB(t,e){const r=t.value,n={type:et.COMMENT,data:r,location:uf(t)};pc(e,ji(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function Che(t,e){if(e.parser.tokenizer.preprocessor.html="",e.parser.tokenizer.preprocessor.pos=-1,e.parser.tokenizer.preprocessor.lastGapPos=-2,e.parser.tokenizer.preprocessor.gapStack=[],e.parser.tokenizer.preprocessor.skipNextNewLine=!1,e.parser.tokenizer.preprocessor.lastChunkWritten=!1,e.parser.tokenizer.preprocessor.endOfChunkHit=!1,e.parser.tokenizer.preprocessor.isEol=!1,AB(e,ji(t)),e.parser.tokenizer.write(e.options.tagfilter?t.value.replace(yhe,"&lt;$1$2"):t.value,!1),e.parser.tokenizer._runParsingLoop(),e.parser.tokenizer.state===72||e.parser.tokenizer.state===78){e.parser.tokenizer.preprocessor.lastChunkWritten=!0;const r=e.parser.tokenizer._consume();e.parser.tokenizer._callState(r)}}function khe(t,e){const r=t;if(e.options.passThrough&&e.options.passThrough.includes(r.type))The(r,e);else{let n="";throw vhe.has(r.type)&&(n=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+r.type+"` node"+n)}}function pc(t,e){AB(t,e);const r=t.parser.tokenizer.currentCharacterToken;r&&r.location&&(r.location.endLine=t.parser.tokenizer.preprocessor.line,r.location.endCol=t.parser.tokenizer.preprocessor.col+1,r.location.endOffset=t.parser.tokenizer.preprocessor.offset+1,t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)),t.parser.tokenizer.paused=!1,t.parser.tokenizer.inLoop=!1,t.parser.tokenizer.active=!1,t.parser.tokenizer.returnState=$t.DATA,t.parser.tokenizer.charRefCode=-1,t.parser.tokenizer.consumedAfterSnapshot=-1,t.parser.tokenizer.currentLocation=null,t.parser.tokenizer.currentCharacterToken=null,t.parser.tokenizer.currentToken=null,t.parser.tokenizer.currentAttr={name:"",value:""}}function AB(t,e){if(e&&e.offset!==void 0){const r={startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:-1,endCol:-1,endOffset:-1};t.parser.tokenizer.preprocessor.lineStartPos=-e.column+1,t.parser.tokenizer.preprocessor.droppedBufferSize=e.offset,t.parser.tokenizer.preprocessor.line=e.line,t.parser.tokenizer.currentLocation=r}}function Ahe(t,e){const r=t.tagName.toLowerCase();if(e.parser.tokenizer.state===$t.PLAINTEXT)return;pc(e,ji(t));const n=e.parser.openElements.current;let i="namespaceURI"in n?n.namespaceURI:Fo.html;i===Fo.html&&r==="svg"&&(i=Fo.svg);const s=Ble({...t,children:[]},{space:i===Fo.svg?"svg":"html"}),o={type:et.START_TAG,tagName:r,tagID:dc(r),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:uf(t)};e.parser.currentToken=o,e.parser._processToken(e.parser.currentToken),e.parser.tokenizer.lastStartTagName=r}function Rhe(t,e){const r=t.tagName.toLowerCase();if(!e.parser.tokenizer.inForeignNode&&K6.includes(r)||e.parser.tokenizer.state===$t.PLAINTEXT)return;pc(e,Yg(t));const n={type:et.END_TAG,tagName:r,tagID:dc(r),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:uf(t)};e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken),r===e.parser.tokenizer.lastStartTagName&&(e.parser.tokenizer.state===$t.RCDATA||e.parser.tokenizer.state===$t.RAWTEXT||e.parser.tokenizer.state===$t.SCRIPT_DATA)&&(e.parser.tokenizer.state=$t.DATA)}function Phe(t){const e=t.type==="root"?t.children[0]:t;return!!(e&&(e.type==="doctype"||e.type==="element"&&e.tagName.toLowerCase()==="html"))}function uf(t){const e=ji(t)||{line:void 0,column:void 0,offset:void 0},r=Yg(t)||{line:void 0,column:void 0,offset:void 0};return{startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:r.line,endCol:r.column,endOffset:r.offset}}function Ihe(t){return"children"in t?ha({...t,children:[]}):ha(t)}function Dhe(t){return function(e,r){return TB(e,{...t,file:r})}}function Im(t,e){const r=String(t);if(typeof e!="string")throw new TypeError("Expected character");let n=0,i=r.indexOf(e);for(;i!==-1;)n++,i=r.indexOf(e,i+e.length);return n}function Ohe(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Lhe(t,e,r){const i=Jg((r||{}).ignore||[]),s=Nhe(e);let o=-1;for(;++o<s.length;)j6(t,"text",a);function a(c,u){let h=-1,f;for(;++h<u.length;){const d=u[h],g=f?f.children:void 0;if(i(d,g?g.indexOf(d):void 0,f))return;f=d}if(f)return l(c,u)}function l(c,u){const h=u[u.length-1],f=s[o][0],d=s[o][1];let g=0;const m=h.children.indexOf(c);let p=!1,b=[];f.lastIndex=0;let y=f.exec(c.value);for(;y;){const v=y.index,w={index:y.index,input:y.input,stack:[...u,c]};let S=d(...y,w);if(typeof S=="string"&&(S=S.length>0?{type:"text",value:S}:void 0),S===!1?f.lastIndex=v+1:(g!==v&&b.push({type:"text",value:c.value.slice(g,v)}),Array.isArray(S)?b.push(...S):S&&b.push(S),g=v+y[0].length,p=!0),!f.global)break;y=f.exec(c.value)}return p?(g<c.value.length&&b.push({type:"text",value:c.value.slice(g)}),h.children.splice(m,1,...b)):b=[c],m+b.length}}function Nhe(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const r=!t[0]||Array.isArray(t[0])?t:[t];let n=-1;for(;++n<r.length;){const i=r[n];e.push([Mhe(i[0]),Bhe(i[1])])}return e}function Mhe(t){return typeof t=="string"?new RegExp(Ohe(t),"g"):t}function Bhe(t){return typeof t=="function"?t:function(){return t}}const $_="phrasing",z_=["autolink","link","image","label"];function Fhe(){return{transforms:[Whe],enter:{literalAutolink:Uhe,literalAutolinkEmail:V_,literalAutolinkHttp:V_,literalAutolinkWww:V_},exit:{literalAutolink:Vhe,literalAutolinkEmail:zhe,literalAutolinkHttp:jhe,literalAutolinkWww:$he}}}function Hhe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:$_,notInConstruct:z_},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:$_,notInConstruct:z_},{character:":",before:"[ps]",after:"\\/",inConstruct:$_,notInConstruct:z_}]}}function Uhe(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function V_(t){this.config.enter.autolinkProtocol.call(this,t)}function jhe(t){this.config.exit.autolinkProtocol.call(this,t)}function $he(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function zhe(t){this.config.exit.autolinkEmail.call(this,t)}function Vhe(t){this.exit(t)}function Whe(t){Lhe(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Ghe],[/(?<=^|\s|\p{P}|\p{S})([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/gu,qhe]],{ignore:["link","linkReference"]})}function Ghe(t,e,r,n,i){let s="";if(!RB(i)||(/^w/i.test(e)&&(r=e+r,e="",s="http://"),!Khe(r)))return!1;const o=Yhe(r+n);if(!o[0])return!1;const a={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function qhe(t,e,r,n){return!RB(n,!0)||/[-\d_]$/.test(r)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+r,children:[{type:"text",value:e+"@"+r}]}}function Khe(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function Yhe(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let r=e[0],n=r.indexOf(")");const i=Im(t,"(");let s=Im(t,")");for(;n!==-1&&i>s;)t+=r.slice(0,n+1),r=r.slice(n+1),n=r.indexOf(")"),s++;return[t,r]}function RB(t,e){const r=t.input.charCodeAt(t.index-1);return(t.index===0||ua(r)||Xg(r))&&(!e||r!==47)}PB.peek=ofe;function Xhe(){return{enter:{gfmFootnoteDefinition:Zhe,gfmFootnoteDefinitionLabelString:Jhe,gfmFootnoteCall:rfe,gfmFootnoteCallString:nfe},exit:{gfmFootnoteDefinition:tfe,gfmFootnoteDefinitionLabelString:efe,gfmFootnoteCall:sfe,gfmFootnoteCallString:ife}}}function Qhe(){return{unsafe:[{character:"[",inConstruct:["phrasing","label","reference"]}],handlers:{footnoteDefinition:afe,footnoteReference:PB}}}function Zhe(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function Jhe(){this.buffer()}function efe(t){const e=this.resume(),r=this.stack[this.stack.length-1];r.type,r.label=e,r.identifier=zn(this.sliceSerialize(t)).toLowerCase()}function tfe(t){this.exit(t)}function rfe(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function nfe(){this.buffer()}function ife(t){const e=this.resume(),r=this.stack[this.stack.length-1];r.type,r.label=e,r.identifier=zn(this.sliceSerialize(t)).toLowerCase()}function sfe(t){this.exit(t)}function PB(t,e,r,n){const i=r.createTracker(n);let s=i.move("[^");const o=r.enter("footnoteReference"),a=r.enter("reference");return s+=i.move(r.safe(r.associationId(t),{...i.current(),before:s,after:"]"})),a(),o(),s+=i.move("]"),s}function ofe(){return"["}function afe(t,e,r,n){const i=r.createTracker(n);let s=i.move("[^");const o=r.enter("footnoteDefinition"),a=r.enter("label");return s+=i.move(r.safe(r.associationId(t),{...i.current(),before:s,after:"]"})),a(),s+=i.move("]:"+(t.children&&t.children.length>0?" ":"")),i.shift(4),s+=i.move(r.indentLines(r.containerFlow(t,i.current()),lfe)),o(),s}function lfe(t,e,r){return e===0?t:(r?"":"    ")+t}const cfe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];IB.peek=pfe;function ufe(){return{canContainEols:["delete"],enter:{strikethrough:ffe},exit:{strikethrough:dfe}}}function hfe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:cfe}],handlers:{delete:IB}}}function ffe(t){this.enter({type:"delete",children:[]},t)}function dfe(t){this.exit(t)}function IB(t,e,r,n){const i=r.createTracker(n),s=r.enter("strikethrough");let o=i.move("~~");return o+=r.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function pfe(){return"~"}function mfe(t){return t.length}function gfe(t,e){const r=e||{},n=(r.align||[]).concat(),i=r.stringLength||mfe,s=[],o=[],a=[],l=[];let c=0,u=-1;for(;++u<t.length;){const _=[],m=[];let p=-1;for(t[u].length>c&&(c=t[u].length);++p<t[u].length;){const b=_fe(t[u][p]);if(r.alignDelimiters!==!1){const y=i(b);m[p]=y,(l[p]===void 0||y>l[p])&&(l[p]=y)}_.push(b)}o[u]=_,a[u]=m}let h=-1;if(typeof n=="object"&&"length"in n)for(;++h<c;)s[h]=FA(n[h]);else{const _=FA(n);for(;++h<c;)s[h]=_}h=-1;const f=[],d=[];for(;++h<c;){const _=s[h];let m="",p="";_===99?(m=":",p=":"):_===108?m=":":_===114&&(p=":");let b=r.alignDelimiters===!1?1:Math.max(1,l[h]-m.length-p.length);const y=m+"-".repeat(b)+p;r.alignDelimiters!==!1&&(b=m.length+b+p.length,b>l[h]&&(l[h]=b),d[h]=b),f[h]=y}o.splice(1,0,f),a.splice(1,0,d),u=-1;const g=[];for(;++u<o.length;){const _=o[u],m=a[u];h=-1;const p=[];for(;++h<c;){const b=_[h]||"";let y="",v="";if(r.alignDelimiters!==!1){const w=l[h]-(m[h]||0),S=s[h];S===114?y=" ".repeat(w):S===99?w%2?(y=" ".repeat(w/2+.5),v=" ".repeat(w/2-.5)):(y=" ".repeat(w/2),v=y):v=" ".repeat(w)}r.delimiterStart!==!1&&!h&&p.push("|"),r.padding!==!1&&!(r.alignDelimiters===!1&&b==="")&&(r.delimiterStart!==!1||h)&&p.push(" "),r.alignDelimiters!==!1&&p.push(y),p.push(b),r.alignDelimiters!==!1&&p.push(v),r.padding!==!1&&p.push(" "),(r.delimiterEnd!==!1||h!==c-1)&&p.push("|")}g.push(r.delimiterEnd===!1?p.join("").replace(/ +$/,""):p.join(""))}return g.join(`
`)}function _fe(t){return t==null?"":String(t)}function FA(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function bfe(t,e,r,n){const i=r.enter("blockquote"),s=r.createTracker(n);s.move("> "),s.shift(2);const o=r.indentLines(r.containerFlow(t,s.current()),yfe);return i(),o}function yfe(t,e,r){return">"+(r?"":" ")+t}function vfe(t,e){return HA(t,e.inConstruct,!0)&&!HA(t,e.notInConstruct,!1)}function HA(t,e,r){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return r;let n=-1;for(;++n<e.length;)if(t.includes(e[n]))return!0;return!1}function UA(t,e,r,n){let i=-1;for(;++i<r.unsafe.length;)if(r.unsafe[i].character===`
`&&vfe(r.stack,r.unsafe[i]))return/[ \t]/.test(n.before)?"":" ";return`\\
`}function wfe(t,e){const r=String(t);let n=r.indexOf(e),i=n,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;n!==-1;)n===i?++s>o&&(o=s):s=1,i=n+e.length,n=r.indexOf(e,i);return o}function Efe(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function Sfe(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function xfe(t,e,r,n){const i=Sfe(r),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(Efe(t,r)){const h=r.enter("codeIndented"),f=r.indentLines(s,Tfe);return h(),f}const a=r.createTracker(n),l=i.repeat(Math.max(wfe(s,i)+1,3)),c=r.enter("codeFenced");let u=a.move(l);if(t.lang){const h=r.enter(`codeFencedLang${o}`);u+=a.move(r.safe(t.lang,{before:u,after:" ",encode:["`"],...a.current()})),h()}if(t.lang&&t.meta){const h=r.enter(`codeFencedMeta${o}`);u+=a.move(" "),u+=a.move(r.safe(t.meta,{before:u,after:`
`,encode:["`"],...a.current()})),h()}return u+=a.move(`
`),s&&(u+=a.move(s+`
`)),u+=a.move(l),c(),u}function Tfe(t,e,r){return(r?"":"    ")+t}function HE(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function Cfe(t,e,r,n){const i=HE(r),s=i==='"'?"Quote":"Apostrophe",o=r.enter("definition");let a=r.enter("label");const l=r.createTracker(n);let c=l.move("[");return c+=l.move(r.safe(r.associationId(t),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!t.url||/[\0- \u007F]/.test(t.url)?(a=r.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(r.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=r.enter("destinationRaw"),c+=l.move(r.safe(t.url,{before:c,after:t.title?" ":`
`,...l.current()}))),a(),t.title&&(a=r.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(r.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),o(),c}function kfe(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function uh(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Dm(t,e,r){const n=Ul(t),i=Ul(e);return n===void 0?i===void 0?r==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:n===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}DB.peek=Afe;function DB(t,e,r,n){const i=kfe(r),s=r.enter("emphasis"),o=r.createTracker(n),a=o.move(i);let l=o.move(r.containerPhrasing(t,{after:i,before:a,...o.current()}));const c=l.charCodeAt(0),u=Dm(n.before.charCodeAt(n.before.length-1),c,i);u.inside&&(l=uh(c)+l.slice(1));const h=l.charCodeAt(l.length-1),f=Dm(n.after.charCodeAt(0),h,i);f.inside&&(l=l.slice(0,-1)+uh(h));const d=o.move(i);return s(),r.attentionEncodeSurroundingInfo={after:f.outside,before:u.outside},a+l+d}function Afe(t,e,r){return r.options.emphasis||"*"}function Rfe(t,e){let r=!1;return af(t,function(n){if("value"in n&&/\r?\n|\r/.test(n.value)||n.type==="break")return r=!0,Ey}),!!((!t.depth||t.depth<3)&&xE(t)&&(e.options.setext||r))}function Pfe(t,e,r,n){const i=Math.max(Math.min(6,t.depth||1),1),s=r.createTracker(n);if(Rfe(t,r)){const u=r.enter("headingSetext"),h=r.enter("phrasing"),f=r.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return h(),u(),f+`
`+(i===1?"=":"-").repeat(f.length-(Math.max(f.lastIndexOf("\r"),f.lastIndexOf(`
`))+1))}const o="#".repeat(i),a=r.enter("headingAtx"),l=r.enter("phrasing");s.move(o+" ");let c=r.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(c)&&(c=uh(c.charCodeAt(0))+c.slice(1)),c=c?o+" "+c:o,r.options.closeAtx&&(c+=" "+o),l(),a(),c}OB.peek=Ife;function OB(t){return t.value||""}function Ife(){return"<"}LB.peek=Dfe;function LB(t,e,r,n){const i=HE(r),s=i==='"'?"Quote":"Apostrophe",o=r.enter("image");let a=r.enter("label");const l=r.createTracker(n);let c=l.move("![");return c+=l.move(r.safe(t.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=r.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(r.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=r.enter("destinationRaw"),c+=l.move(r.safe(t.url,{before:c,after:t.title?" ":")",...l.current()}))),a(),t.title&&(a=r.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(r.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),c+=l.move(")"),o(),c}function Dfe(){return"!"}NB.peek=Ofe;function NB(t,e,r,n){const i=t.referenceType,s=r.enter("imageReference");let o=r.enter("label");const a=r.createTracker(n);let l=a.move("![");const c=r.safe(t.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=r.stack;r.stack=[],o=r.enter("reference");const h=r.safe(r.associationId(t),{before:l,after:"]",...a.current()});return o(),r.stack=u,s(),i==="full"||!c||c!==h?l+=a.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function Ofe(){return"!"}MB.peek=Lfe;function MB(t,e,r){let n=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(n);)i+="`";for(/[^ \r\n]/.test(n)&&(/^[ \r\n]/.test(n)&&/[ \r\n]$/.test(n)||/^`|`$/.test(n))&&(n=" "+n+" ");++s<r.unsafe.length;){const o=r.unsafe[s],a=r.compilePattern(o);let l;if(o.atBreak)for(;l=a.exec(n);){let c=l.index;n.charCodeAt(c)===10&&n.charCodeAt(c-1)===13&&c--,n=n.slice(0,c)+" "+n.slice(l.index+1)}}return i+n+i}function Lfe(){return"`"}function BB(t,e){const r=xE(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(r===t.url||"mailto:"+r===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}FB.peek=Nfe;function FB(t,e,r,n){const i=HE(r),s=i==='"'?"Quote":"Apostrophe",o=r.createTracker(n);let a,l;if(BB(t,r)){const u=r.stack;r.stack=[],a=r.enter("autolink");let h=o.move("<");return h+=o.move(r.containerPhrasing(t,{before:h,after:">",...o.current()})),h+=o.move(">"),a(),r.stack=u,h}a=r.enter("link"),l=r.enter("label");let c=o.move("[");return c+=o.move(r.containerPhrasing(t,{before:c,after:"](",...o.current()})),c+=o.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=r.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(r.safe(t.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(l=r.enter("destinationRaw"),c+=o.move(r.safe(t.url,{before:c,after:t.title?" ":")",...o.current()}))),l(),t.title&&(l=r.enter(`title${s}`),c+=o.move(" "+i),c+=o.move(r.safe(t.title,{before:c,after:i,...o.current()})),c+=o.move(i),l()),c+=o.move(")"),a(),c}function Nfe(t,e,r){return BB(t,r)?"<":"["}HB.peek=Mfe;function HB(t,e,r,n){const i=t.referenceType,s=r.enter("linkReference");let o=r.enter("label");const a=r.createTracker(n);let l=a.move("[");const c=r.containerPhrasing(t,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=r.stack;r.stack=[],o=r.enter("reference");const h=r.safe(r.associationId(t),{before:l,after:"]",...a.current()});return o(),r.stack=u,s(),i==="full"||!c||c!==h?l+=a.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function Mfe(){return"["}function UE(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function Bfe(t){const e=UE(t),r=t.options.bulletOther;if(!r)return e==="*"?"-":"*";if(r!=="*"&&r!=="+"&&r!=="-")throw new Error("Cannot serialize items with `"+r+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(r===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+r+"`) to be different");return r}function Ffe(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function UB(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function Hfe(t,e,r,n){const i=r.enter("list"),s=r.bulletCurrent;let o=t.ordered?Ffe(r):UE(r);const a=t.ordered?o==="."?")":".":Bfe(r);let l=e&&r.bulletLastUsed?o===r.bulletLastUsed:!1;if(!t.ordered){const u=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&u&&(!u.children||!u.children[0])&&r.stack[r.stack.length-1]==="list"&&r.stack[r.stack.length-2]==="listItem"&&r.stack[r.stack.length-3]==="list"&&r.stack[r.stack.length-4]==="listItem"&&r.indexStack[r.indexStack.length-1]===0&&r.indexStack[r.indexStack.length-2]===0&&r.indexStack[r.indexStack.length-3]===0&&(l=!0),UB(r)===o&&u){let h=-1;for(;++h<t.children.length;){const f=t.children[h];if(f&&f.type==="listItem"&&f.children&&f.children[0]&&f.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),r.bulletCurrent=o;const c=r.containerFlow(t,n);return r.bulletLastUsed=o,r.bulletCurrent=s,i(),c}function Ufe(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function jfe(t,e,r,n){const i=Ufe(r);let s=r.bulletCurrent||UE(r);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(r.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const a=r.createTracker(n);a.move(s+" ".repeat(o-s.length)),a.shift(o);const l=r.enter("listItem"),c=r.indentLines(r.containerFlow(t,a.current()),u);return l(),c;function u(h,f,d){return f?(d?"":" ".repeat(o))+h:(d?s:s+" ".repeat(o-s.length))+h}}function $fe(t,e,r,n){const i=r.enter("paragraph"),s=r.enter("phrasing"),o=r.containerPhrasing(t,n);return s(),i(),o}const zfe=Jg(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Vfe(t,e,r,n){return(t.children.some(function(o){return zfe(o)})?r.containerPhrasing:r.containerFlow).call(r,t,n)}function Wfe(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}jB.peek=Gfe;function jB(t,e,r,n){const i=Wfe(r),s=r.enter("strong"),o=r.createTracker(n),a=o.move(i+i);let l=o.move(r.containerPhrasing(t,{after:i,before:a,...o.current()}));const c=l.charCodeAt(0),u=Dm(n.before.charCodeAt(n.before.length-1),c,i);u.inside&&(l=uh(c)+l.slice(1));const h=l.charCodeAt(l.length-1),f=Dm(n.after.charCodeAt(0),h,i);f.inside&&(l=l.slice(0,-1)+uh(h));const d=o.move(i+i);return s(),r.attentionEncodeSurroundingInfo={after:f.outside,before:u.outside},a+l+d}function Gfe(t,e,r){return r.options.strong||"*"}function qfe(t,e,r,n){return r.safe(t.value,n)}function Kfe(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function Yfe(t,e,r){const n=(UB(r)+(r.options.ruleSpaces?" ":"")).repeat(Kfe(r));return r.options.ruleSpaces?n.slice(0,-1):n}const $B={blockquote:bfe,break:UA,code:xfe,definition:Cfe,emphasis:DB,hardBreak:UA,heading:Pfe,html:OB,image:LB,imageReference:NB,inlineCode:MB,link:FB,linkReference:HB,list:Hfe,listItem:jfe,paragraph:$fe,root:Vfe,strong:jB,text:qfe,thematicBreak:Yfe};function Xfe(){return{enter:{table:Qfe,tableData:jA,tableHeader:jA,tableRow:Jfe},exit:{codeText:ede,table:Zfe,tableData:W_,tableHeader:W_,tableRow:W_}}}function Qfe(t){const e=t._align;this.enter({type:"table",align:e.map(function(r){return r==="none"?null:r}),children:[]},t),this.data.inTable=!0}function Zfe(t){this.exit(t),this.data.inTable=void 0}function Jfe(t){this.enter({type:"tableRow",children:[]},t)}function W_(t){this.exit(t)}function jA(t){this.enter({type:"tableCell",children:[]},t)}function ede(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,tde));const r=this.stack[this.stack.length-1];r.type,r.value=e,this.exit(t)}function tde(t,e){return e==="|"?e:t}function rde(t){const e=t||{},r=e.tableCellPadding,n=e.tablePipeAlign,i=e.stringLength,s=r?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:f,table:o,tableCell:l,tableRow:a}};function o(d,g,_,m){return c(u(d,_,m),d.align)}function a(d,g,_,m){const p=h(d,_,m),b=c([p]);return b.slice(0,b.indexOf(`
`))}function l(d,g,_,m){const p=_.enter("tableCell"),b=_.enter("phrasing"),y=_.containerPhrasing(d,{...m,before:s,after:s});return b(),p(),y}function c(d,g){return gfe(d,{align:g,alignDelimiters:n,padding:r,stringLength:i})}function u(d,g,_){const m=d.children;let p=-1;const b=[],y=g.enter("table");for(;++p<m.length;)b[p]=h(m[p],g,_);return y(),b}function h(d,g,_){const m=d.children;let p=-1;const b=[],y=g.enter("tableRow");for(;++p<m.length;)b[p]=l(m[p],d,g,_);return y(),b}function f(d,g,_){let m=$B.inlineCode(d,g,_);return _.stack.includes("tableCell")&&(m=m.replace(/\|/g,"\\$&")),m}}function nde(){return{exit:{taskListCheckValueChecked:$A,taskListCheckValueUnchecked:$A,paragraph:sde}}}function ide(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:ode}}}function $A(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function sde(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const r=this.stack[this.stack.length-1];r.type;const n=r.children[0];if(n&&n.type==="text"){const i=e.children;let s=-1,o;for(;++s<i.length;){const a=i[s];if(a.type==="paragraph"){o=a;break}}o===r&&(n.value=n.value.slice(1),n.value.length===0?r.children.shift():r.position&&n.position&&typeof n.position.start.offset=="number"&&(n.position.start.column++,n.position.start.offset++,r.position.start=Object.assign({},n.position.start)))}}this.exit(t)}function ode(t,e,r,n){const i=t.children[0],s=typeof t.checked=="boolean"&&i&&i.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",a=r.createTracker(n);s&&a.move(o);let l=$B.listItem(t,e,r,{...n,...a.current()});return s&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(u){return u+o}}function ade(){return[Fhe(),Xhe(),ufe(),Xfe(),nde()]}function lde(t){return{extensions:[Hhe(),Qhe(),hfe(),rde(t),ide()]}}const cde={tokenize:mde,partial:!0},zB={tokenize:gde,partial:!0},VB={tokenize:_de,partial:!0},WB={tokenize:bde,partial:!0},ude={tokenize:yde,partial:!0},GB={name:"wwwAutolink",tokenize:dde,previous:KB},qB={name:"protocolAutolink",tokenize:pde,previous:YB},bs={name:"emailAutolink",tokenize:fde,previous:XB},$i={};function hde(){return{text:$i}}let bo=48;for(;bo<123;)$i[bo]=bs,bo++,bo===58?bo=65:bo===91&&(bo=97);$i[43]=bs;$i[45]=bs;$i[46]=bs;$i[95]=bs;$i[72]=[bs,qB];$i[104]=[bs,qB];$i[87]=[bs,GB];$i[119]=[bs,GB];function fde(t,e,r){const n=this;let i,s;return o;function o(h){return!Dy(h)||!XB.call(n,n.previous)||jE(n.events)?r(h):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),a(h))}function a(h){return Dy(h)?(t.consume(h),a):h===64?(t.consume(h),l):r(h)}function l(h){return h===46?t.check(ude,u,c)(h):h===45||h===95||Sr(h)?(s=!0,t.consume(h),l):u(h)}function c(h){return t.consume(h),i=!0,l}function u(h){return s&&i&&Or(n.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(h)):r(h)}}function dde(t,e,r){const n=this;return i;function i(o){return o!==87&&o!==119||!KB.call(n,n.previous)||jE(n.events)?r(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(cde,t.attempt(zB,t.attempt(VB,s),r),r)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function pde(t,e,r){const n=this;let i="",s=!1;return o;function o(h){return(h===72||h===104)&&YB.call(n,n.previous)&&!jE(n.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(h),t.consume(h),a):r(h)}function a(h){if(Or(h)&&i.length<5)return i+=String.fromCodePoint(h),t.consume(h),a;if(h===58){const f=i.toLowerCase();if(f==="http"||f==="https")return t.consume(h),l}return r(h)}function l(h){return h===47?(t.consume(h),s?c:(s=!0,l)):r(h)}function c(h){return h===null||Tm(h)||vt(h)||ua(h)||Xg(h)?r(h):t.attempt(zB,t.attempt(VB,u),r)(h)}function u(h){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(h)}}function mde(t,e,r){let n=0;return i;function i(o){return(o===87||o===119)&&n<3?(n++,t.consume(o),i):o===46&&n===3?(t.consume(o),s):r(o)}function s(o){return o===null?r(o):e(o)}}function gde(t,e,r){let n,i,s;return o;function o(c){return c===46||c===95?t.check(WB,l,a)(c):c===null||vt(c)||ua(c)||c!==45&&Xg(c)?l(c):(s=!0,t.consume(c),o)}function a(c){return c===95?n=!0:(i=n,n=void 0),t.consume(c),o}function l(c){return i||n||!s?r(c):e(c)}}function _de(t,e){let r=0,n=0;return i;function i(o){return o===40?(r++,t.consume(o),i):o===41&&n<r?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(WB,e,s)(o):o===null||vt(o)||ua(o)?e(o):(t.consume(o),i)}function s(o){return o===41&&n++,t.consume(o),i}}function bde(t,e,r){return n;function n(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(t.consume(a),n):a===38?(t.consume(a),s):a===93?(t.consume(a),i):a===60||a===null||vt(a)||ua(a)?e(a):r(a)}function i(a){return a===null||a===40||a===91||vt(a)||ua(a)?e(a):n(a)}function s(a){return Or(a)?o(a):r(a)}function o(a){return a===59?(t.consume(a),n):Or(a)?(t.consume(a),o):r(a)}}function yde(t,e,r){return n;function n(s){return t.consume(s),i}function i(s){return Sr(s)?r(s):e(s)}}function KB(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||vt(t)}function YB(t){return!Or(t)}function XB(t){return!(t===47||Dy(t))}function Dy(t){return t===43||t===45||t===46||t===95||Sr(t)}function jE(t){let e=t.length,r=!1;for(;e--;){const n=t[e][1];if((n.type==="labelLink"||n.type==="labelImage")&&!n._balanced){r=!0;break}if(n._gfmAutolinkLiteralWalkedInto){r=!1;break}}return t.length>0&&!r&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),r}const vde={tokenize:Ade,partial:!0};function wde(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Tde,continuation:{tokenize:Cde},exit:kde}},text:{91:{name:"gfmFootnoteCall",tokenize:xde},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Ede,resolveTo:Sde}}}}function Ede(t,e,r){const n=this;let i=n.events.length;const s=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let o;for(;i--;){const l=n.events[i][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!o||!o._balanced)return r(l);const c=zn(n.sliceSerialize({start:o.end,end:n.now()}));return c.codePointAt(0)!==94||!s.includes(c.slice(1))?r(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function Sde(t,e){let r=t.length;for(;r--;)if(t[r][1].type==="labelImage"&&t[r][0]==="enter"){t[r][1];break}t[r+1][1].type="data",t[r+3][1].type="gfmFootnoteCallLabelMarker";const n={type:"gfmFootnoteCall",start:Object.assign({},t[r+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[r+3][1].end),end:Object.assign({},t[r+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[t[r+1],t[r+2],["enter",n,e],t[r+3],t[r+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",n,e]];return t.splice(r,t.length-r+1,...a),t}function xde(t,e,r){const n=this,i=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let s=0,o;return a;function a(h){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),l}function l(h){return h!==94?r(h):(t.enter("gfmFootnoteCallMarker"),t.consume(h),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",c)}function c(h){if(s>999||h===93&&!o||h===null||h===91||vt(h))return r(h);if(h===93){t.exit("chunkString");const f=t.exit("gfmFootnoteCallString");return i.includes(zn(n.sliceSerialize(f)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):r(h)}return vt(h)||(o=!0),s++,t.consume(h),h===92?u:c}function u(h){return h===91||h===92||h===93?(t.consume(h),s++,c):c(h)}}function Tde(t,e,r){const n=this,i=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let s,o=0,a;return l;function l(g){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(g),t.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(g){return g===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(g),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",u):r(g)}function u(g){if(o>999||g===93&&!a||g===null||g===91||vt(g))return r(g);if(g===93){t.exit("chunkString");const _=t.exit("gfmFootnoteDefinitionLabelString");return s=zn(n.sliceSerialize(_)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(g),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),f}return vt(g)||(a=!0),o++,t.consume(g),g===92?h:u}function h(g){return g===91||g===92||g===93?(t.consume(g),o++,u):u(g)}function f(g){return g===58?(t.enter("definitionMarker"),t.consume(g),t.exit("definitionMarker"),i.includes(s)||i.push(s),at(t,d,"gfmFootnoteDefinitionWhitespace")):r(g)}function d(g){return e(g)}}function Cde(t,e,r){return t.check(of,e,t.attempt(vde,e,r))}function kde(t){t.exit("gfmFootnoteDefinition")}function Ade(t,e,r){const n=this;return at(t,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=n.events[n.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):r(s)}}function Rde(t){let r=(t||{}).singleTilde;const n={name:"strikethrough",tokenize:s,resolveAll:i};return r==null&&(r=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}};function i(o,a){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let c=l;for(;c--;)if(o[c][0]==="exit"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[c][1].end.offset-o[c][1].start.offset){o[l][1].type="strikethroughSequence",o[c][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},o[c][1].start),end:Object.assign({},o[l][1].end)},h={type:"strikethroughText",start:Object.assign({},o[c][1].end),end:Object.assign({},o[l][1].start)},f=[["enter",u,a],["enter",o[c][1],a],["exit",o[c][1],a],["enter",h,a]],d=a.parser.constructs.insideSpan.null;d&&dn(f,f.length,0,Qg(d,o.slice(c+1,l),a)),dn(f,f.length,0,[["exit",h,a],["enter",o[l][1],a],["exit",o[l][1],a],["exit",u,a]]),dn(o,c-1,l-c+3,f),l=c+f.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function s(o,a,l){const c=this.previous,u=this.events;let h=0;return f;function f(g){return c===126&&u[u.length-1][1].type!=="characterEscape"?l(g):(o.enter("strikethroughSequenceTemporary"),d(g))}function d(g){const _=Ul(c);if(g===126)return h>1?l(g):(o.consume(g),h++,d);if(h<2&&!r)return l(g);const m=o.exit("strikethroughSequenceTemporary"),p=Ul(g);return m._open=!p||p===2&&!!_,m._close=!_||_===2&&!!p,a(g)}}}class Pde{constructor(){this.map=[]}add(e,r,n){Ide(this,e,r,n)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let r=this.map.length;const n=[];for(;r>0;)r-=1,n.push(e.slice(this.map[r][0]+this.map[r][1]),this.map[r][2]),e.length=this.map[r][0];n.push([...e]),e.length=0;let i=n.pop();for(;i;)e.push(...i),i=n.pop();this.map.length=0}}function Ide(t,e,r,n){let i=0;if(!(r===0&&n.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=r,t.map[i][2].push(...n);return}i+=1}t.map.push([e,r,n])}}function Dde(t,e){let r=!1;const n=[];for(;e<t.length;){const i=t[e];if(r){if(i[0]==="enter")i[1].type==="tableContent"&&n.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=n.length-1;n[s]=n[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(r=!0);e+=1}return n}function Ode(){return{flow:{null:{name:"table",tokenize:Lde,resolveAll:Nde}}}}function Lde(t,e,r){const n=this;let i=0,s=0,o;return a;function a(k){let B=n.events.length-1;for(;B>-1;){const A=n.events[B][1].type;if(A==="lineEnding"||A==="linePrefix")B--;else break}const P=B>-1?n.events[B][1].type:null,O=P==="tableHead"||P==="tableRow"?S:l;return O===S&&n.parser.lazy[n.now().line]?r(k):O(k)}function l(k){return t.enter("tableHead"),t.enter("tableRow"),c(k)}function c(k){return k===124||(o=!0,s+=1),u(k)}function u(k){return k===null?r(k):We(k)?s>1?(s=0,n.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(k),t.exit("lineEnding"),d):r(k):tt(k)?at(t,u,"whitespace")(k):(s+=1,o&&(o=!1,i+=1),k===124?(t.enter("tableCellDivider"),t.consume(k),t.exit("tableCellDivider"),o=!0,u):(t.enter("data"),h(k)))}function h(k){return k===null||k===124||vt(k)?(t.exit("data"),u(k)):(t.consume(k),k===92?f:h)}function f(k){return k===92||k===124?(t.consume(k),h):h(k)}function d(k){return n.interrupt=!1,n.parser.lazy[n.now().line]?r(k):(t.enter("tableDelimiterRow"),o=!1,tt(k)?at(t,g,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(k):g(k))}function g(k){return k===45||k===58?m(k):k===124?(o=!0,t.enter("tableCellDivider"),t.consume(k),t.exit("tableCellDivider"),_):w(k)}function _(k){return tt(k)?at(t,m,"whitespace")(k):m(k)}function m(k){return k===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(k),t.exit("tableDelimiterMarker"),p):k===45?(s+=1,p(k)):k===null||We(k)?v(k):w(k)}function p(k){return k===45?(t.enter("tableDelimiterFiller"),b(k)):w(k)}function b(k){return k===45?(t.consume(k),b):k===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(k),t.exit("tableDelimiterMarker"),y):(t.exit("tableDelimiterFiller"),y(k))}function y(k){return tt(k)?at(t,v,"whitespace")(k):v(k)}function v(k){return k===124?g(k):k===null||We(k)?!o||i!==s?w(k):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(k)):w(k)}function w(k){return r(k)}function S(k){return t.enter("tableRow"),x(k)}function x(k){return k===124?(t.enter("tableCellDivider"),t.consume(k),t.exit("tableCellDivider"),x):k===null||We(k)?(t.exit("tableRow"),e(k)):tt(k)?at(t,x,"whitespace")(k):(t.enter("data"),E(k))}function E(k){return k===null||k===124||vt(k)?(t.exit("data"),x(k)):(t.consume(k),k===92?T:E)}function T(k){return k===92||k===124?(t.consume(k),E):E(k)}}function Nde(t,e){let r=-1,n=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],a=!1,l=0,c,u,h;const f=new Pde;for(;++r<t.length;){const d=t[r],g=d[1];d[0]==="enter"?g.type==="tableHead"?(a=!1,l!==0&&(zA(f,e,l,c,u),u=void 0,l=0),c={type:"table",start:Object.assign({},g.start),end:Object.assign({},g.end)},f.add(r,0,[["enter",c,e]])):g.type==="tableRow"||g.type==="tableDelimiterRow"?(n=!0,h=void 0,s=[0,0,0,0],o=[0,r+1,0,0],a&&(a=!1,u={type:"tableBody",start:Object.assign({},g.start),end:Object.assign({},g.end)},f.add(r,0,[["enter",u,e]])),i=g.type==="tableDelimiterRow"?2:u?3:1):i&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")?(n=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],h=Dd(f,e,s,i,void 0,h),s=[0,0,0,0]),o[2]=r)):g.type==="tableCellDivider"&&(n?n=!1:(s[1]!==0&&(o[0]=o[1],h=Dd(f,e,s,i,void 0,h)),s=o,o=[s[1],r,0,0])):g.type==="tableHead"?(a=!0,l=r):g.type==="tableRow"||g.type==="tableDelimiterRow"?(l=r,s[1]!==0?(o[0]=o[1],h=Dd(f,e,s,i,r,h)):o[1]!==0&&(h=Dd(f,e,o,i,r,h)),i=0):i&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")&&(o[3]=r)}for(l!==0&&zA(f,e,l,c,u),f.consume(e.events),r=-1;++r<e.events.length;){const d=e.events[r];d[0]==="enter"&&d[1].type==="table"&&(d[1]._align=Dde(e.events,r))}return t}function Dd(t,e,r,n,i,s){const o=n===1?"tableHeader":n===2?"tableDelimiter":"tableData",a="tableContent";r[0]!==0&&(s.end=Object.assign({},Ka(e.events,r[0])),t.add(r[0],0,[["exit",s,e]]));const l=Ka(e.events,r[1]);if(s={type:o,start:Object.assign({},l),end:Object.assign({},l)},t.add(r[1],0,[["enter",s,e]]),r[2]!==0){const c=Ka(e.events,r[2]),u=Ka(e.events,r[3]),h={type:a,start:Object.assign({},c),end:Object.assign({},u)};if(t.add(r[2],0,[["enter",h,e]]),n!==2){const f=e.events[r[2]],d=e.events[r[3]];if(f[1].end=Object.assign({},d[1].end),f[1].type="chunkText",f[1].contentType="text",r[3]>r[2]+1){const g=r[2]+1,_=r[3]-r[2]-1;t.add(g,_,[])}}t.add(r[3]+1,0,[["exit",h,e]])}return i!==void 0&&(s.end=Object.assign({},Ka(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function zA(t,e,r,n,i){const s=[],o=Ka(e.events,r);i&&(i.end=Object.assign({},o),s.push(["exit",i,e])),n.end=Object.assign({},o),s.push(["exit",n,e]),t.add(r+1,0,s)}function Ka(t,e){const r=t[e],n=r[0]==="enter"?"start":"end";return r[1][n]}const Mde={name:"tasklistCheck",tokenize:Fde};function Bde(){return{text:{91:Mde}}}function Fde(t,e,r){const n=this;return i;function i(l){return n.previous!==null||!n._gfmTasklistFirstContentOfListItem?r(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),s)}function s(l){return vt(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),o):r(l)}function o(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),a):r(l)}function a(l){return We(l)?e(l):tt(l)?t.check({tokenize:Hde},e,r)(l):r(l)}}function Hde(t,e,r){return at(t,n,"whitespace");function n(i){return i===null?r(i):e(i)}}function Ude(t){return w6([hde(),wde(),Rde(t),Ode(),Bde()])}const jde={};function $de(t){const e=this,r=t||jde,n=e.data(),i=n.micromarkExtensions||(n.micromarkExtensions=[]),s=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),o=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);i.push(Ude(r)),s.push(ade()),o.push(lde(r))}const yo=["ariaDescribedBy","ariaLabel","ariaLabelledBy"],Cu={ancestors:{tbody:["table"],td:["table"],th:["table"],thead:["table"],tfoot:["table"],tr:["table"]},attributes:{a:[...yo,"dataFootnoteBackref","dataFootnoteRef",["className","data-footnote-backref"],"href"],blockquote:["cite"],code:[["className",/^language-./]],del:["cite"],div:["itemScope","itemType"],dl:[...yo],h2:[["className","sr-only"]],img:[...yo,"longDesc","src"],input:[["disabled",!0],["type","checkbox"]],ins:["cite"],li:[["className","task-list-item"]],ol:[...yo,["className","contains-task-list"]],q:["cite"],section:["dataFootnotes",["className","footnotes"]],source:["srcSet"],summary:[...yo],table:[...yo],ul:[...yo,["className","contains-task-list"]],"*":["abbr","accept","acceptCharset","accessKey","action","align","alt","axis","border","cellPadding","cellSpacing","char","charOff","charSet","checked","clear","colSpan","color","cols","compact","coords","dateTime","dir","encType","frame","hSpace","headers","height","hrefLang","htmlFor","id","isMap","itemProp","label","lang","maxLength","media","method","multiple","name","noHref","noShade","noWrap","open","prompt","readOnly","rev","rowSpan","rows","rules","scope","selected","shape","size","span","start","summary","tabIndex","title","useMap","vAlign","value","width"]},clobber:["ariaDescribedBy","ariaLabelledBy","id","name"],clobberPrefix:"user-content-",protocols:{cite:["http","https"],href:["http","https","irc","ircs","mailto","xmpp"],longDesc:["http","https"],src:["http","https"]},required:{input:{disabled:!0,type:"checkbox"}},strip:["script"],tagNames:["a","b","blockquote","br","code","dd","del","details","div","dl","dt","em","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","li","ol","p","picture","pre","q","rp","rt","ruby","s","samp","section","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","tr","tt","ul","var"]},Ds={}.hasOwnProperty;function zde(t,e){let r={type:"root",children:[]};const n={schema:e?{...Cu,...e}:Cu,stack:[]},i=QB(n,t);return i&&(Array.isArray(i)?i.length===1?r=i[0]:r.children=i:r=i),r}function QB(t,e){if(e&&typeof e=="object"){const r=e;switch(typeof r.type=="string"?r.type:""){case"comment":return Vde(t,r);case"doctype":return Wde(t,r);case"element":return Gde(t,r);case"root":return qde(t,r);case"text":return Kde(t,r)}}}function Vde(t,e){if(t.schema.allowComments){const r=typeof e.value=="string"?e.value:"",n=r.indexOf("-->"),s={type:"comment",value:n<0?r:r.slice(0,n)};return hf(s,e),s}}function Wde(t,e){if(t.schema.allowDoctypes){const r={type:"doctype"};return hf(r,e),r}}function Gde(t,e){const r=typeof e.tagName=="string"?e.tagName:"";t.stack.push(r);const n=ZB(t,e.children),i=Yde(t,e.properties);t.stack.pop();let s=!1;if(r&&r!=="*"&&(!t.schema.tagNames||t.schema.tagNames.includes(r))&&(s=!0,t.schema.ancestors&&Ds.call(t.schema.ancestors,r))){const a=t.schema.ancestors[r];let l=-1;for(s=!1;++l<a.length;)t.stack.includes(a[l])&&(s=!0)}if(!s)return t.schema.strip&&!t.schema.strip.includes(r)?n:void 0;const o={type:"element",tagName:r,properties:i,children:n};return hf(o,e),o}function qde(t,e){const n={type:"root",children:ZB(t,e.children)};return hf(n,e),n}function Kde(t,e){const n={type:"text",value:typeof e.value=="string"?e.value:""};return hf(n,e),n}function ZB(t,e){const r=[];if(Array.isArray(e)){const n=e;let i=-1;for(;++i<n.length;){const s=QB(t,n[i]);s&&(Array.isArray(s)?r.push(...s):r.push(s))}}return r}function Yde(t,e){const r=t.stack[t.stack.length-1],n=t.schema.attributes,i=t.schema.required,s=n&&Ds.call(n,r)?n[r]:void 0,o=n&&Ds.call(n,"*")?n["*"]:void 0,a=e&&typeof e=="object"?e:{},l={};let c;for(c in a)if(Ds.call(a,c)){const u=a[c];let h=VA(t,WA(s,c),c,u);h==null&&(h=VA(t,WA(o,c),c,u)),h!=null&&(l[c]=h)}if(i&&Ds.call(i,r)){const u=i[r];for(c in u)Ds.call(u,c)&&!Ds.call(l,c)&&(l[c]=u[c])}return l}function VA(t,e,r,n){return e?Array.isArray(n)?Xde(t,e,r,n):JB(t,e,r,n):void 0}function Xde(t,e,r,n){let i=-1;const s=[];for(;++i<n.length;){const o=JB(t,e,r,n[i]);(typeof o=="number"||typeof o=="string")&&s.push(o)}return s}function JB(t,e,r,n){if(!(typeof n!="boolean"&&typeof n!="number"&&typeof n!="string")&&Qde(t,r,n)){if(typeof e=="object"&&e.length>1){let i=!1,s=0;for(;++s<e.length;){const o=e[s];if(o&&typeof o=="object"&&"flags"in o){if(o.test(String(n))){i=!0;break}}else if(o===n){i=!0;break}}if(!i)return}return t.schema.clobber&&t.schema.clobberPrefix&&t.schema.clobber.includes(r)?t.schema.clobberPrefix+n:n}}function Qde(t,e,r){const n=t.schema.protocols&&Ds.call(t.schema.protocols,e)?t.schema.protocols[e]:void 0;if(!n||n.length===0)return!0;const i=String(r),s=i.indexOf(":"),o=i.indexOf("?"),a=i.indexOf("#"),l=i.indexOf("/");if(s<0||l>-1&&s>l||o>-1&&s>o||a>-1&&s>a)return!0;let c=-1;for(;++c<n.length;){const u=n[c];if(s===u.length&&i.slice(0,u.length)===u)return!0}return!1}function hf(t,e){const r=m6(e);e.data&&(t.data=ha(e.data)),r&&(t.position=r)}function WA(t,e){let r,n=-1;if(t)for(;++n<t.length;){const i=t[n],s=typeof i=="string"?i:i[0];if(s===e)return i;s==="data*"&&(r=i)}if(e.length>4&&e.slice(0,4).toLowerCase()==="data")return r}function Zde(t){return function(e){return zde(e,t)}}const e4=["a","b","blockquote","br","code","dd","del","details","div","dl","dt","em","h1","h2","h3","h4","h5","h6","hr","i","ins","kbd","li","ol","p","pre","q","rp","rt","ruby","s","samp","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","tr","ul","var"],Jde={...Cu,tagNames:e4,attributes:{...Cu.attributes,div:[...Cu.attributes?.div??[],"data*",["className","__boltArtifact__"]]},strip:[]};function epe(t){const e=[$de];return t&&e.unshift(rpe),e}function tpe(t){const e=[];return t&&e.push(Dhe,[Zde,Jde]),e}const rpe=()=>(t,e)=>{const r=e.toString();af(t,(n,i,s)=>{if(i==null||["paragraph","text","inlineCode","code","strong","emphasis"].includes(n.type)||!n.position)return!0;let o=r.slice(n.position.start.offset,n.position.end.offset);return n.type==="heading"&&(o=`
${o}`),s.children[i]={type:"text",value:o},[U6,i]})},t4=[{id:"abap",name:"ABAP",import:()=>Y(()=>import("./abap-BwpQXVS2.js"),[])},{id:"actionscript-3",name:"ActionScript",import:()=>Y(()=>import("./actionscript-3-Ci-La1BS.js"),[])},{id:"ada",name:"Ada",import:()=>Y(()=>import("./ada-DOAn35dn.js"),[])},{id:"angular-html",name:"Angular HTML",import:()=>Y(()=>import("./angular-html-GqBVQ6Dm.js").then(t=>t.f),__vite__mapDeps([13,14,15,16]))},{id:"angular-ts",name:"Angular TypeScript",import:()=>Y(()=>import("./angular-ts-MKs4dlu_.js"),__vite__mapDeps([17,13,14,15,16,18]))},{id:"apache",name:"Apache Conf",import:()=>Y(()=>import("./apache-Dn00JSTd.js"),[])},{id:"apex",name:"Apex",import:()=>Y(()=>import("./apex-BzwtH5UL.js"),[])},{id:"apl",name:"APL",import:()=>Y(()=>import("./apl-C6GBNg32.js"),__vite__mapDeps([19,14,15,16,20,21,22]))},{id:"applescript",name:"AppleScript",import:()=>Y(()=>import("./applescript-DIt9OTko.js"),[])},{id:"ara",name:"Ara",import:()=>Y(()=>import("./ara-CJxt7p29.js"),[])},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:()=>Y(()=>import("./asciidoc-CcSEeikT.js"),[])},{id:"asm",name:"Assembly",import:()=>Y(()=>import("./asm-DPTZissz.js"),[])},{id:"astro",name:"Astro",import:()=>Y(()=>import("./astro-DTSlZd1t.js"),__vite__mapDeps([23,22,15,24,16,25]))},{id:"awk",name:"AWK",import:()=>Y(()=>import("./awk-BINKOAKH.js"),[])},{id:"ballerina",name:"Ballerina",import:()=>Y(()=>import("./ballerina-DCcCncrU.js"),[])},{id:"bat",name:"Batch File",aliases:["batch"],import:()=>Y(()=>import("./bat-B9Vj0mJK.js"),[])},{id:"beancount",name:"Beancount",import:()=>Y(()=>import("./beancount-DDUKAZWS.js"),[])},{id:"berry",name:"Berry",aliases:["be"],import:()=>Y(()=>import("./berry-DnyWjya5.js"),[])},{id:"bibtex",name:"BibTeX",import:()=>Y(()=>import("./bibtex-CpWBKVjh.js"),[])},{id:"bicep",name:"Bicep",import:()=>Y(()=>import("./bicep-BWkuYGGO.js"),[])},{id:"blade",name:"Blade",import:()=>Y(()=>import("./blade-CPEzV-UE.js"),__vite__mapDeps([26,14,15,16,20,21,27,22]))},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:()=>Y(()=>import("./bsl-Dgyn0ogV.js"),__vite__mapDeps([28,29]))},{id:"c",name:"C",import:()=>Y(()=>import("./c-BhsLqr-4.js"),[])},{id:"cadence",name:"Cadence",aliases:["cdc"],import:()=>Y(()=>import("./cadence-CEjiMJLT.js"),[])},{id:"cairo",name:"Cairo",import:()=>Y(()=>import("./cairo-DMFdBl0X.js"),[])},{id:"clarity",name:"Clarity",import:()=>Y(()=>import("./clarity-CXmV_HiI.js"),[])},{id:"clojure",name:"Clojure",aliases:["clj"],import:()=>Y(()=>import("./clojure-mLcCfA0-.js"),[])},{id:"cmake",name:"CMake",import:()=>Y(()=>import("./cmake-DbXoA79R.js"),[])},{id:"cobol",name:"COBOL",import:()=>Y(()=>import("./cobol-NX_YbRMJ.js"),__vite__mapDeps([30,14,15,16,21]))},{id:"codeowners",name:"CODEOWNERS",import:()=>Y(()=>import("./codeowners-Bp6g37R7.js"),[])},{id:"codeql",name:"CodeQL",aliases:["ql"],import:()=>Y(()=>import("./codeql-Bdprqoiu.js"),[])},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:()=>Y(()=>import("./coffee-CXcjgkhu.js"),__vite__mapDeps([31,15]))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:()=>Y(()=>import("./common-lisp-CQO4gZEw.js"),[])},{id:"coq",name:"Coq",import:()=>Y(()=>import("./coq-BCzYJAay.js"),[])},{id:"cpp",name:"C++",aliases:["c++"],import:()=>Y(()=>import("./cpp-IRqjNdQP.js"),__vite__mapDeps([32,33,34,35,27]))},{id:"crystal",name:"Crystal",import:()=>Y(()=>import("./crystal-DFEzbmK1.js"),__vite__mapDeps([36,14,15,16,27,35,37]))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:()=>Y(()=>import("./csharp-D7v6OrNy.js"),[])},{id:"css",name:"CSS",import:()=>Y(()=>import("./css-u4bm_LMz.js"),[])},{id:"csv",name:"CSV",import:()=>Y(()=>import("./csv-B0qRVHPH.js"),[])},{id:"cue",name:"CUE",import:()=>Y(()=>import("./cue-DmZ-uG0V.js"),[])},{id:"cypher",name:"Cypher",aliases:["cql"],import:()=>Y(()=>import("./cypher-DfpIq38s.js"),[])},{id:"d",name:"D",import:()=>Y(()=>import("./d-B5L7zzq-.js"),[])},{id:"dart",name:"Dart",import:()=>Y(()=>import("./dart-D9W_gRNE.js"),[])},{id:"dax",name:"DAX",import:()=>Y(()=>import("./dax-yA8e6OR-.js"),[])},{id:"desktop",name:"Desktop",import:()=>Y(()=>import("./desktop-DEIpsLCJ.js"),[])},{id:"diff",name:"Diff",import:()=>Y(()=>import("./diff-Dnfm4U7b.js"),[])},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:()=>Y(()=>import("./docker-BHpzmqOf.js"),[])},{id:"dotenv",name:"dotEnv",import:()=>Y(()=>import("./dotenv-DQxx3LPD.js"),[])},{id:"dream-maker",name:"Dream Maker",import:()=>Y(()=>import("./dream-maker-BMwgFBEQ.js"),[])},{id:"edge",name:"Edge",import:()=>Y(()=>import("./edge-Cq_6DOij.js"),__vite__mapDeps([38,24,14,15,16,39]))},{id:"elixir",name:"Elixir",import:()=>Y(()=>import("./elixir-BoNJ9vXU.js"),__vite__mapDeps([40,14,15,16]))},{id:"elm",name:"Elm",import:()=>Y(()=>import("./elm-CTr_twwF.js"),__vite__mapDeps([41,34,35]))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:()=>Y(()=>import("./emacs-lisp-CMz7PuSU.js"),[])},{id:"erb",name:"ERB",import:()=>Y(()=>import("./erb-DuefeV9w.js"),__vite__mapDeps([42,14,15,16,43,20,21,27,35,37,44]))},{id:"erlang",name:"Erlang",aliases:["erl"],import:()=>Y(()=>import("./erlang-CMOi41r9.js"),[])},{id:"fennel",name:"Fennel",import:()=>Y(()=>import("./fennel-dZn0vQkf.js"),[])},{id:"fish",name:"Fish",import:()=>Y(()=>import("./fish-CQzXS8_C.js"),[])},{id:"fluent",name:"Fluent",aliases:["ftl"],import:()=>Y(()=>import("./fluent-CNRQ974Q.js"),[])},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:()=>Y(()=>import("./fortran-fixed-form-C9lV_GL-.js"),__vite__mapDeps([45,46]))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:()=>Y(()=>import("./fortran-free-form-B3Z_eaxm.js"),[])},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:()=>Y(()=>import("./fsharp-Vw5t3P44.js"),__vite__mapDeps([47,48]))},{id:"gdresource",name:"GDResource",import:()=>Y(()=>import("./gdresource-D_y5yz_M.js"),__vite__mapDeps([49,50,51]))},{id:"gdscript",name:"GDScript",import:()=>Y(()=>import("./gdscript-BIguuW30.js"),[])},{id:"gdshader",name:"GDShader",import:()=>Y(()=>import("./gdshader-BSHf-0eb.js"),[])},{id:"genie",name:"Genie",import:()=>Y(()=>import("./genie-DJEtsjbi.js"),[])},{id:"gherkin",name:"Gherkin",import:()=>Y(()=>import("./gherkin--30QC5Em.js"),[])},{id:"git-commit",name:"Git Commit Message",import:()=>Y(()=>import("./git-commit-C0WNX4K0.js"),__vite__mapDeps([52,53]))},{id:"git-rebase",name:"Git Rebase Message",import:()=>Y(()=>import("./git-rebase-3YLVFLpI.js"),__vite__mapDeps([54,37]))},{id:"gleam",name:"Gleam",import:()=>Y(()=>import("./gleam-C30t_gpS.js"),[])},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:()=>Y(()=>import("./glimmer-js-D4fdoRWd.js"),__vite__mapDeps([55,15,24,16,14]))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:()=>Y(()=>import("./glimmer-ts-DFoQQgBS.js"),__vite__mapDeps([56,24,16,15,14]))},{id:"glsl",name:"GLSL",import:()=>Y(()=>import("./glsl-bwZ1_LLM.js"),__vite__mapDeps([34,35]))},{id:"gnuplot",name:"Gnuplot",import:()=>Y(()=>import("./gnuplot-CmWLV2bY.js"),[])},{id:"go",name:"Go",import:()=>Y(()=>import("./go-Cv7ZOjGq.js"),[])},{id:"graphql",name:"GraphQL",aliases:["gql"],import:()=>Y(()=>import("./graphql-DqgCZ2sd.js"),__vite__mapDeps([57,15,24,58,59]))},{id:"groovy",name:"Groovy",import:()=>Y(()=>import("./groovy-BWslPs4p.js"),[])},{id:"hack",name:"Hack",import:()=>Y(()=>import("./hack-BV5LM4CS.js"),__vite__mapDeps([60,14,15,16,27]))},{id:"haml",name:"Ruby Haml",import:()=>Y(()=>import("./haml-B1jT_oKV.js"),__vite__mapDeps([61,15,16]))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:()=>Y(()=>import("./handlebars-HtVeTy3a.js"),__vite__mapDeps([62,14,15,16,63]))},{id:"haskell",name:"Haskell",aliases:["hs"],import:()=>Y(()=>import("./haskell-ChDww4um.js"),[])},{id:"haxe",name:"Haxe",import:()=>Y(()=>import("./haxe-BgqZeg96.js"),[])},{id:"hcl",name:"HashiCorp HCL",import:()=>Y(()=>import("./hcl-Cztwc-HH.js"),[])},{id:"hjson",name:"Hjson",import:()=>Y(()=>import("./hjson-D9Bn7OQI.js"),[])},{id:"hlsl",name:"HLSL",import:()=>Y(()=>import("./hlsl-DkpUthgY.js"),[])},{id:"html",name:"HTML",import:()=>Y(()=>import("./html-DG1TtFnM.js"),__vite__mapDeps([14,15,16]))},{id:"html-derivative",name:"HTML (Derivative)",import:()=>Y(()=>import("./html-derivative-CDVwFiY1.js"),__vite__mapDeps([39,14,15,16]))},{id:"http",name:"HTTP",import:()=>Y(()=>import("./http-CYnz8shJ.js"),__vite__mapDeps([64,37,22,20,21,57,15,24,58,59]))},{id:"hxml",name:"HXML",import:()=>Y(()=>import("./hxml-BfFmssGd.js"),__vite__mapDeps([65,66]))},{id:"hy",name:"Hy",import:()=>Y(()=>import("./hy-YurBl9Qv.js"),[])},{id:"imba",name:"Imba",import:()=>Y(()=>import("./imba-C6vdFTm2.js"),__vite__mapDeps([67,24]))},{id:"ini",name:"INI",aliases:["properties"],import:()=>Y(()=>import("./ini-BjABl1g7.js"),[])},{id:"java",name:"Java",import:()=>Y(()=>import("./java-BN40hmum.js"),[])},{id:"javascript",name:"JavaScript",aliases:["js"],import:()=>Y(()=>import("./javascript-DNgb01dh.js"),[])},{id:"jinja",name:"Jinja",import:()=>Y(()=>import("./jinja-BORjBBXU.js"),__vite__mapDeps([68,14,15,16]))},{id:"jison",name:"Jison",import:()=>Y(()=>import("./jison-Ct8rtT8R.js"),__vite__mapDeps([69,15]))},{id:"json",name:"JSON",import:()=>Y(()=>import("./json-DWmkr0yC.js"),[])},{id:"json5",name:"JSON5",import:()=>Y(()=>import("./json5-BDjtpMT8.js"),[])},{id:"jsonc",name:"JSON with Comments",import:()=>Y(()=>import("./jsonc-B8E-_56i.js"),[])},{id:"jsonl",name:"JSON Lines",import:()=>Y(()=>import("./jsonl-NKd-Y1zG.js"),[])},{id:"jsonnet",name:"Jsonnet",import:()=>Y(()=>import("./jsonnet-CpRrwcwt.js"),[])},{id:"jssm",name:"JSSM",aliases:["fsl"],import:()=>Y(()=>import("./jssm-DlYXzDlu.js"),[])},{id:"jsx",name:"JSX",import:()=>Y(()=>import("./jsx-CM4fc1WH.js"),[])},{id:"julia",name:"Julia",aliases:["jl"],import:()=>Y(()=>import("./julia-Czdw582_.js"),__vite__mapDeps([70,32,33,34,35,27,71,15,72]))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:()=>Y(()=>import("./kotlin-BZRbnyjI.js"),[])},{id:"kusto",name:"Kusto",aliases:["kql"],import:()=>Y(()=>import("./kusto-plSVBvJQ.js"),[])},{id:"latex",name:"LaTeX",import:()=>Y(()=>import("./latex-BpoAco4y.js"),__vite__mapDeps([73,74,72]))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:()=>Y(()=>import("./lean-yLioyJ2E.js"),[])},{id:"less",name:"Less",import:()=>Y(()=>import("./less-Dk1rBueR.js"),[])},{id:"liquid",name:"Liquid",import:()=>Y(()=>import("./liquid-0snwLfvK.js"),__vite__mapDeps([75,14,15,16,22]))},{id:"log",name:"Log file",import:()=>Y(()=>import("./log-B4_rEpOs.js"),[])},{id:"logo",name:"Logo",import:()=>Y(()=>import("./logo-Dtn98rcr.js"),[])},{id:"lua",name:"Lua",import:()=>Y(()=>import("./lua-B2--UKVN.js"),__vite__mapDeps([44,35]))},{id:"luau",name:"Luau",import:()=>Y(()=>import("./luau-DepYB8Ml.js"),[])},{id:"make",name:"Makefile",aliases:["makefile"],import:()=>Y(()=>import("./make-DNDvMORL.js"),[])},{id:"markdown",name:"Markdown",aliases:["md"],import:()=>Y(()=>import("./markdown-CNXuF1yM.js"),[])},{id:"marko",name:"Marko",import:()=>Y(()=>import("./marko-BxSrAFJn.js"),__vite__mapDeps([76,16,77,18,15]))},{id:"matlab",name:"MATLAB",import:()=>Y(()=>import("./matlab-Kxp7UmFj.js"),[])},{id:"mdc",name:"MDC",import:()=>Y(()=>import("./mdc-DfEMzj3F.js"),__vite__mapDeps([78,48,63,39,14,15,16]))},{id:"mdx",name:"MDX",import:()=>Y(()=>import("./mdx-Bcw97oti.js"),[])},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:()=>Y(()=>import("./mermaid-D0xWnrgR.js"),[])},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:()=>Y(()=>import("./mipsasm-BzaEo2Du.js"),[])},{id:"mojo",name:"Mojo",import:()=>Y(()=>import("./mojo-B2bjgU-v.js"),[])},{id:"move",name:"Move",import:()=>Y(()=>import("./move-EZUUsui8.js"),[])},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:()=>Y(()=>import("./narrat-DLbgOhZU.js"),[])},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:()=>Y(()=>import("./nextflow-B2uSYIFn.js"),[])},{id:"nginx",name:"Nginx",import:()=>Y(()=>import("./nginx-Dw0nYz9L.js"),__vite__mapDeps([79,44,35]))},{id:"nim",name:"Nim",import:()=>Y(()=>import("./nim-NHYZZDnF.js"),__vite__mapDeps([80,35,14,15,16,20,21,34,48]))},{id:"nix",name:"Nix",import:()=>Y(()=>import("./nix-DVWcdiGS.js"),[])},{id:"nushell",name:"nushell",aliases:["nu"],import:()=>Y(()=>import("./nushell-ZJvK9Z2N.js"),[])},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:()=>Y(()=>import("./objective-c-B6NdQBKR.js"),[])},{id:"objective-cpp",name:"Objective-C++",import:()=>Y(()=>import("./objective-cpp-BkG9CdHo.js"),[])},{id:"ocaml",name:"OCaml",import:()=>Y(()=>import("./ocaml-CLmbwNS9.js"),[])},{id:"pascal",name:"Pascal",import:()=>Y(()=>import("./pascal-JqZropPD.js"),[])},{id:"perl",name:"Perl",import:()=>Y(()=>import("./perl-DLffUHFU.js"),__vite__mapDeps([81,14,15,16,20,21,27]))},{id:"php",name:"PHP",import:()=>Y(()=>import("./php-D3VTUn6x.js"),__vite__mapDeps([82,14,15,16,20,21,27,22]))},{id:"plsql",name:"PL/SQL",import:()=>Y(()=>import("./plsql-LKU2TuZ1.js"),[])},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:()=>Y(()=>import("./po-BFLt1xDp.js"),[])},{id:"postcss",name:"PostCSS",import:()=>Y(()=>import("./postcss-DmF4-xLG.js"),[])},{id:"powerquery",name:"PowerQuery",import:()=>Y(()=>import("./powerquery-ByY1Guvr.js"),[])},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:()=>Y(()=>import("./powershell-DES0gjzB.js"),[])},{id:"prisma",name:"Prisma",import:()=>Y(()=>import("./prisma-DFIOpqzz.js"),[])},{id:"prolog",name:"Prolog",import:()=>Y(()=>import("./prolog-BNxDCkIA.js"),[])},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:()=>Y(()=>import("./proto-hdsyEllQ.js"),[])},{id:"pug",name:"Pug",aliases:["jade"],import:()=>Y(()=>import("./pug-BbGfWiEl.js"),__vite__mapDeps([83,15,16,14]))},{id:"puppet",name:"Puppet",import:()=>Y(()=>import("./puppet-DWMP3yrW.js"),[])},{id:"purescript",name:"PureScript",import:()=>Y(()=>import("./purescript-DvQyZZSe.js"),[])},{id:"python",name:"Python",aliases:["py"],import:()=>Y(()=>import("./python-CK56Z9cH.js"),[])},{id:"qml",name:"QML",import:()=>Y(()=>import("./qml-Dhho_E4W.js"),__vite__mapDeps([84,15]))},{id:"qmldir",name:"QML Directory",import:()=>Y(()=>import("./qmldir-C8lEn-DE.js"),[])},{id:"qss",name:"Qt Style Sheets",import:()=>Y(()=>import("./qss-DhMKtDLN.js"),[])},{id:"r",name:"R",import:()=>Y(()=>import("./r-Cqv5JV-q.js"),[])},{id:"racket",name:"Racket",import:()=>Y(()=>import("./racket-CwIbMU3B.js"),[])},{id:"raku",name:"Raku",aliases:["perl6"],import:()=>Y(()=>import("./raku-DZ4hUExO.js"),[])},{id:"razor",name:"ASP.NET Razor",import:()=>Y(()=>import("./razor-CDyaIOPG.js"),__vite__mapDeps([85,14,15,16,86]))},{id:"reg",name:"Windows Registry Script",import:()=>Y(()=>import("./reg-CrOfvjVs.js"),[])},{id:"regexp",name:"RegExp",aliases:["regex"],import:()=>Y(()=>import("./regexp-DoiKbUTj.js"),[])},{id:"rel",name:"Rel",import:()=>Y(()=>import("./rel-Dzwn3p-3.js"),[])},{id:"riscv",name:"RISC-V",import:()=>Y(()=>import("./riscv-BGct0Hx7.js"),[])},{id:"rst",name:"reStructuredText",import:()=>Y(()=>import("./rst-BtGMdPX_.js"),__vite__mapDeps([87,39,14,15,16,32,33,34,35,27,71,37,63,88,43,20,21,44]))},{id:"ruby",name:"Ruby",aliases:["rb"],import:()=>Y(()=>import("./ruby-C8Yez0Ov.js"),__vite__mapDeps([43,14,15,16,20,21,27,35,37,44]))},{id:"rust",name:"Rust",aliases:["rs"],import:()=>Y(()=>import("./rust-Bjs2cL5p.js"),[])},{id:"sas",name:"SAS",import:()=>Y(()=>import("./sas-K_Wwm3IX.js"),__vite__mapDeps([89,27]))},{id:"sass",name:"Sass",import:()=>Y(()=>import("./sass-BrbOHqWv.js"),[])},{id:"scala",name:"Scala",import:()=>Y(()=>import("./scala-Lp17StYA.js"),[])},{id:"scheme",name:"Scheme",import:()=>Y(()=>import("./scheme-BbccZ3y2.js"),[])},{id:"scss",name:"SCSS",import:()=>Y(()=>import("./scss-BfMQ58X7.js"),__vite__mapDeps([18,16]))},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:()=>Y(()=>import("./sdbl-BLhTXw86.js"),[])},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:()=>Y(()=>import("./shaderlab-CsYUIUcf.js"),__vite__mapDeps([90,91]))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:()=>Y(()=>import("./shellscript-HNM5thJl.js"),[])},{id:"shellsession",name:"Shell Session",aliases:["console"],import:()=>Y(()=>import("./shellsession-DU_2P5ZA.js"),__vite__mapDeps([92,37]))},{id:"smalltalk",name:"Smalltalk",import:()=>Y(()=>import("./smalltalk-DsCg8CPl.js"),[])},{id:"solidity",name:"Solidity",import:()=>Y(()=>import("./solidity-DymQr0nX.js"),[])},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:()=>Y(()=>import("./soy-aWhPD8Nq.js"),__vite__mapDeps([93,14,15,16]))},{id:"sparql",name:"SPARQL",import:()=>Y(()=>import("./sparql-B5YtT9lV.js"),__vite__mapDeps([94,95]))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:()=>Y(()=>import("./splunk-j_FrBdja.js"),[])},{id:"sql",name:"SQL",import:()=>Y(()=>import("./sql-D8nBeWSR.js"),[])},{id:"ssh-config",name:"SSH Config",import:()=>Y(()=>import("./ssh-config-D-RymO5g.js"),[])},{id:"stata",name:"Stata",import:()=>Y(()=>import("./stata-bRt97scT.js"),__vite__mapDeps([96,27]))},{id:"stylus",name:"Stylus",aliases:["styl"],import:()=>Y(()=>import("./stylus-DwU8c_yx.js"),[])},{id:"svelte",name:"Svelte",import:()=>Y(()=>import("./svelte-DK3KTNg_.js"),__vite__mapDeps([97,15,24,16,25]))},{id:"swift",name:"Swift",import:()=>Y(()=>import("./swift-D2TqM893.js"),[])},{id:"system-verilog",name:"SystemVerilog",import:()=>Y(()=>import("./system-verilog-DFQ4Xr-4.js"),[])},{id:"systemd",name:"Systemd Units",import:()=>Y(()=>import("./systemd-DA0ESIWO.js"),[])},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:()=>Y(()=>import("./talonscript-CGXjegLJ.js"),[])},{id:"tasl",name:"Tasl",import:()=>Y(()=>import("./tasl-CQjiPCtT.js"),[])},{id:"tcl",name:"Tcl",import:()=>Y(()=>import("./tcl-NUI3YrRW.js"),[])},{id:"templ",name:"Templ",import:()=>Y(()=>import("./templ-CP2hJ0oK.js"),__vite__mapDeps([98,99,15,16]))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:()=>Y(()=>import("./terraform-rf8nNrOk.js"),[])},{id:"tex",name:"TeX",import:()=>Y(()=>import("./tex-Dej6pUpk.js"),__vite__mapDeps([74,72]))},{id:"toml",name:"TOML",import:()=>Y(()=>import("./toml-Dwo6uFCY.js"),[])},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:()=>Y(()=>import("./ts-tags-CiO5kd_m.js"),__vite__mapDeps([100,24,16,15,34,35,14,27,20,21]))},{id:"tsv",name:"TSV",import:()=>Y(()=>import("./tsv-B_m7g4N7.js"),[])},{id:"tsx",name:"TSX",import:()=>Y(()=>import("./tsx-DqpEK-75.js"),[])},{id:"turtle",name:"Turtle",import:()=>Y(()=>import("./turtle-C0hdQUNN.js"),[])},{id:"twig",name:"Twig",import:()=>Y(()=>import("./twig-DN6YEzOP.js"),__vite__mapDeps([101,16,15,18,82,14,20,21,27,22,71,43,35,37,44]))},{id:"typescript",name:"TypeScript",aliases:["ts"],import:()=>Y(()=>import("./typescript-CVESyXxo.js"),[])},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:()=>Y(()=>import("./typespec-B_R80ZlN.js"),[])},{id:"typst",name:"Typst",aliases:["typ"],import:()=>Y(()=>import("./typst-F89DG-fP.js"),[])},{id:"v",name:"V",import:()=>Y(()=>import("./v-DH4N8IuU.js"),[])},{id:"vala",name:"Vala",import:()=>Y(()=>import("./vala-C8pgRvQH.js"),[])},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:()=>Y(()=>import("./vb-Bv-mwDEg.js"),[])},{id:"verilog",name:"Verilog",import:()=>Y(()=>import("./verilog-6RUVFG9U.js"),[])},{id:"vhdl",name:"VHDL",import:()=>Y(()=>import("./vhdl-IBB5Tl9j.js"),[])},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:()=>Y(()=>import("./viml-CIxipgmy.js"),[])},{id:"vue",name:"Vue",import:()=>Y(()=>import("./vue-xldAUJov.js"),__vite__mapDeps([102,14,15,16,24,22,39]))},{id:"vue-html",name:"Vue HTML",import:()=>Y(()=>import("./vue-html-x3hEOujm.js"),__vite__mapDeps([103,102,14,15,16,24,22,39]))},{id:"vyper",name:"Vyper",aliases:["vy"],import:()=>Y(()=>import("./vyper-DzaHHFTY.js"),[])},{id:"wasm",name:"WebAssembly",import:()=>Y(()=>import("./wasm-sH2JAGjN.js"),[])},{id:"wenyan",name:"Wenyan",aliases:[""],import:()=>Y(()=>import("./wenyan-7A4Fjokl.js"),[])},{id:"wgsl",name:"WGSL",import:()=>Y(()=>import("./wgsl-CSoQzgif.js"),[])},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:()=>Y(()=>import("./wikitext-BqtQrzRp.js"),[])},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:()=>Y(()=>import("./wolfram-aeT0-ak7.js"),[])},{id:"xml",name:"XML",import:()=>Y(()=>import("./xml-BOQ9RtXF.js"),__vite__mapDeps([20,21]))},{id:"xsl",name:"XSL",import:()=>Y(()=>import("./xsl-BqG2VzO2.js"),__vite__mapDeps([104,20,21]))},{id:"yaml",name:"YAML",aliases:["yml"],import:()=>Y(()=>import("./yaml-CIiI48o2.js"),[])},{id:"zenscript",name:"ZenScript",import:()=>Y(()=>import("./zenscript-NgWrSVUg.js"),[])},{id:"zig",name:"Zig",import:()=>Y(()=>import("./zig-D44NvAEk.js"),[])}],npe=Object.fromEntries(t4.map(t=>[t.id,t.import])),ipe=Object.fromEntries(t4.flatMap(t=>t.aliases?.map(e=>[e,t.import])||[])),r4={...npe,...ipe},spe=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:()=>Y(()=>import("./andromeeda-C3khCPGq.js"),[])},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:()=>Y(()=>import("./aurora-x-D-2ljcwZ.js"),[])},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:()=>Y(()=>import("./ayu-dark-Cv9koXgw.js"),[])},{id:"catppuccin-frappe",displayName:"Catppuccin Frapp",type:"dark",import:()=>Y(()=>import("./catppuccin-frappe-CD_QflpE.js"),[])},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:()=>Y(()=>import("./catppuccin-latte-DRW-0cLl.js"),[])},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:()=>Y(()=>import("./catppuccin-macchiato-C-_shW-Y.js"),[])},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:()=>Y(()=>import("./catppuccin-mocha-LGGdnPYs.js"),[])},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:()=>Y(()=>import("./dark-plus-B74Y8nHz.js"),[])},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:()=>Y(()=>import("./dracula-BzJJZx-M.js"),[])},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:()=>Y(()=>import("./dracula-soft-BXkSAIEj.js"),[])},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:()=>Y(()=>import("./everforest-dark-BgDCqdQA.js"),[])},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:()=>Y(()=>import("./everforest-light-C8M2exoo.js"),[])},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:()=>Y(()=>import("./github-dark-DHJKELXO.js"),[])},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:()=>Y(()=>import("./github-dark-default-Cuk6v7N8.js"),[])},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:()=>Y(()=>import("./github-dark-dimmed-DH5Ifo-i.js"),[])},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:()=>Y(()=>import("./github-dark-high-contrast-E3gJ1_iC.js"),[])},{id:"github-light",displayName:"GitHub Light",type:"light",import:()=>Y(()=>import("./github-light-DAi9KRSo.js"),[])},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:()=>Y(()=>import("./github-light-default-D7oLnXFd.js"),[])},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:()=>Y(()=>import("./github-light-high-contrast-BfjtVDDH.js"),[])},{id:"houston",displayName:"Houston",type:"dark",import:()=>Y(()=>import("./houston-DnULxvSX.js"),[])},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:()=>Y(()=>import("./kanagawa-dragon-RXHOmnpW.js"),[])},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:()=>Y(()=>import("./kanagawa-lotus-zchoCBdH.js"),[])},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:()=>Y(()=>import("./kanagawa-wave-2aygx1xg.js"),[])},{id:"laserwave",displayName:"LaserWave",type:"dark",import:()=>Y(()=>import("./laserwave-DUszq2jm.js"),[])},{id:"light-plus",displayName:"Light Plus",type:"light",import:()=>Y(()=>import("./light-plus-w1el_4yc.js"),[])},{id:"material-theme",displayName:"Material Theme",type:"dark",import:()=>Y(()=>import("./material-theme-D5KoaKCx.js"),[])},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:()=>Y(()=>import("./material-theme-darker-BfHTSMKl.js"),[])},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:()=>Y(()=>import("./material-theme-lighter-B0m2ddpp.js"),[])},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:()=>Y(()=>import("./material-theme-ocean-CyktbL80.js"),[])},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:()=>Y(()=>import("./material-theme-palenight-Csfq5Kiy.js"),[])},{id:"min-dark",displayName:"Min Dark",type:"dark",import:()=>Y(()=>import("./min-dark-CafNBF8u.js"),[])},{id:"min-light",displayName:"Min Light",type:"light",import:()=>Y(()=>import("./min-light-CTRr51gU.js"),[])},{id:"monokai",displayName:"Monokai",type:"dark",import:()=>Y(()=>import("./monokai-CQWsIgnU.js"),[])},{id:"night-owl",displayName:"Night Owl",type:"dark",import:()=>Y(()=>import("./night-owl-C6J8XiCD.js"),[])},{id:"nord",displayName:"Nord",type:"dark",import:()=>Y(()=>import("./nord-Ddv68eIx.js"),[])},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:()=>Y(()=>import("./one-dark-pro-GBQ2dnAY.js"),[])},{id:"one-light",displayName:"One Light",type:"light",import:()=>Y(()=>import("./one-light-PoHY5YXO.js"),[])},{id:"plastic",displayName:"Plastic",type:"dark",import:()=>Y(()=>import("./plastic-3e1v2bzS.js"),[])},{id:"poimandres",displayName:"Poimandres",type:"dark",import:()=>Y(()=>import("./poimandres-CS3Unz2-.js"),[])},{id:"red",displayName:"Red",type:"dark",import:()=>Y(()=>import("./red-2pWuV6-S.js"),[])},{id:"rose-pine",displayName:"Ros Pine",type:"dark",import:()=>Y(()=>import("./rose-pine-CmCqftbK.js"),[])},{id:"rose-pine-dawn",displayName:"Ros Pine Dawn",type:"light",import:()=>Y(()=>import("./rose-pine-dawn-Ds-gbosJ.js"),[])},{id:"rose-pine-moon",displayName:"Ros Pine Moon",type:"dark",import:()=>Y(()=>import("./rose-pine-moon-CjDtw9vr.js"),[])},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:()=>Y(()=>import("./slack-dark-BthQWCQV.js"),[])},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:()=>Y(()=>import("./slack-ochin-DqwNpetd.js"),[])},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:()=>Y(()=>import("./snazzy-light-Bw305WKR.js"),[])},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:()=>Y(()=>import("./solarized-dark-CmY0Y6Yh.js"),[])},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:()=>Y(()=>import("./solarized-light-DZQMDcrx.js"),[])},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:()=>Y(()=>import("./synthwave-84-CbfX1IO0.js"),[])},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:()=>Y(()=>import("./tokyo-night-DBQeEorK.js"),[])},{id:"vesper",displayName:"Vesper",type:"dark",import:()=>Y(()=>import("./vesper-BEBZ7ncR.js"),[])},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:()=>Y(()=>import("./vitesse-black-Bkuqu6BP.js"),[])},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:()=>Y(()=>import("./vitesse-dark-D0r3Knsf.js"),[])},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:()=>Y(()=>import("./vitesse-light-CVO1_9PV.js"),[])}],ope=Object.fromEntries(spe.map(t=>[t.id,t.import]));let ss=class extends Error{constructor(e){super(e),this.name="ShikiError"}},$E=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function ape(){return 2147483648}function lpe(){return typeof performance<"u"?performance.now():Date.now()}const cpe=(t,e)=>t+(e-t%e)%e;async function upe(t){let e,r;const n={};function i(d){r=d,n.HEAPU8=new Uint8Array(d),n.HEAPU32=new Uint32Array(d)}function s(d,g,_){n.HEAPU8.copyWithin(d,g,g+_)}function o(d){try{return e.grow(d-r.byteLength+65535>>>16),i(e.buffer),1}catch{}}function a(d){const g=n.HEAPU8.length;d=d>>>0;const _=ape();if(d>_)return!1;for(let m=1;m<=4;m*=2){let p=g*(1+.2/m);p=Math.min(p,d+100663296);const b=Math.min(_,cpe(Math.max(d,p),65536));if(o(b))return!0}return!1}const l=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function c(d,g,_=1024){const m=g+_;let p=g;for(;d[p]&&!(p>=m);)++p;if(p-g>16&&d.buffer&&l)return l.decode(d.subarray(g,p));let b="";for(;g<p;){let y=d[g++];if(!(y&128)){b+=String.fromCharCode(y);continue}const v=d[g++]&63;if((y&224)===192){b+=String.fromCharCode((y&31)<<6|v);continue}const w=d[g++]&63;if((y&240)===224?y=(y&15)<<12|v<<6|w:y=(y&7)<<18|v<<12|w<<6|d[g++]&63,y<65536)b+=String.fromCharCode(y);else{const S=y-65536;b+=String.fromCharCode(55296|S>>10,56320|S&1023)}}return b}function u(d,g){return d?c(n.HEAPU8,d,g):""}const h={emscripten_get_now:lpe,emscripten_memcpy_big:s,emscripten_resize_heap:a,fd_write:()=>0};async function f(){const g=await t({env:h,wasi_snapshot_preview1:h});e=g.memory,i(e.buffer),Object.assign(n,g),n.UTF8ToString=u}return await f(),n}let nr=null;function hpe(t){throw new $E(t.UTF8ToString(t.getLastOnigError()))}class s0{static _utf8ByteLength(e){let r=0;for(let n=0,i=e.length;n<i;n++){const s=e.charCodeAt(n);let o=s,a=!1;if(s>=55296&&s<=56319&&n+1<i){const l=e.charCodeAt(n+1);l>=56320&&l<=57343&&(o=(s-55296<<10)+65536|l-56320,a=!0)}o<=127?r+=1:o<=2047?r+=2:o<=65535?r+=3:r+=4,a&&n++}return r}utf16Length;utf8Length;utf16Value;utf8Value;utf16OffsetToUtf8;utf8OffsetToUtf16;constructor(e){const r=e.length,n=s0._utf8ByteLength(e),i=n!==r,s=i?new Uint32Array(r+1):null;i&&(s[r]=n);const o=i?new Uint32Array(n+1):null;i&&(o[n]=r);const a=new Uint8Array(n);let l=0;for(let c=0;c<r;c++){const u=e.charCodeAt(c);let h=u,f=!1;if(u>=55296&&u<=56319&&c+1<r){const d=e.charCodeAt(c+1);d>=56320&&d<=57343&&(h=(u-55296<<10)+65536|d-56320,f=!0)}i&&(s[c]=l,f&&(s[c+1]=l),h<=127?o[l+0]=c:h<=2047?(o[l+0]=c,o[l+1]=c):h<=65535?(o[l+0]=c,o[l+1]=c,o[l+2]=c):(o[l+0]=c,o[l+1]=c,o[l+2]=c,o[l+3]=c)),h<=127?a[l++]=h:h<=2047?(a[l++]=192|(h&1984)>>>6,a[l++]=128|(h&63)>>>0):h<=65535?(a[l++]=224|(h&61440)>>>12,a[l++]=128|(h&4032)>>>6,a[l++]=128|(h&63)>>>0):(a[l++]=240|(h&1835008)>>>18,a[l++]=128|(h&258048)>>>12,a[l++]=128|(h&4032)>>>6,a[l++]=128|(h&63)>>>0),f&&c++}this.utf16Length=r,this.utf8Length=n,this.utf16Value=e,this.utf8Value=a,this.utf16OffsetToUtf8=s,this.utf8OffsetToUtf16=o}createString(e){const r=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,r),r}}class wn{static LAST_ID=0;static _sharedPtr=0;static _sharedPtrInUse=!1;id=++wn.LAST_ID;_onigBinding;content;utf16Length;utf8Length;utf16OffsetToUtf8;utf8OffsetToUtf16;ptr;constructor(e){if(!nr)throw new $E("Must invoke loadWasm first.");this._onigBinding=nr,this.content=e;const r=new s0(e);this.utf16Length=r.utf16Length,this.utf8Length=r.utf8Length,this.utf16OffsetToUtf8=r.utf16OffsetToUtf8,this.utf8OffsetToUtf16=r.utf8OffsetToUtf16,this.utf8Length<1e4&&!wn._sharedPtrInUse?(wn._sharedPtr||(wn._sharedPtr=nr.omalloc(1e4)),wn._sharedPtrInUse=!0,nr.HEAPU8.set(r.utf8Value,wn._sharedPtr),this.ptr=wn._sharedPtr):this.ptr=r.createString(nr)}convertUtf8OffsetToUtf16(e){return this.utf8OffsetToUtf16?e<0?0:e>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[e]:e}convertUtf16OffsetToUtf8(e){return this.utf16OffsetToUtf8?e<0?0:e>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[e]:e}dispose(){this.ptr===wn._sharedPtr?wn._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}}class fpe{_onigBinding;_ptr;constructor(e){if(!nr)throw new $E("Must invoke loadWasm first.");const r=[],n=[];for(let a=0,l=e.length;a<l;a++){const c=new s0(e[a]);r[a]=c.createString(nr),n[a]=c.utf8Length}const i=nr.omalloc(4*e.length);nr.HEAPU32.set(r,i/4);const s=nr.omalloc(4*e.length);nr.HEAPU32.set(n,s/4);const o=nr.createOnigScanner(i,s,e.length);for(let a=0,l=e.length;a<l;a++)nr.ofree(r[a]);nr.ofree(s),nr.ofree(i),o===0&&hpe(nr),this._onigBinding=nr,this._ptr=o}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,r,n){let i=0;if(typeof n=="number"&&(i=n),typeof e=="string"){e=new wn(e);const s=this._findNextMatchSync(e,r,!1,i);return e.dispose(),s}return this._findNextMatchSync(e,r,!1,i)}_findNextMatchSync(e,r,n,i){const s=this._onigBinding,o=s.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(r),i);if(o===0)return null;const a=s.HEAPU32;let l=o/4;const c=a[l++],u=a[l++],h=[];for(let f=0;f<u;f++){const d=e.convertUtf8OffsetToUtf16(a[l++]),g=e.convertUtf8OffsetToUtf16(a[l++]);h[f]={start:d,end:g,length:g-d}}return{index:c,captureIndices:h}}}function dpe(t){return typeof t.instantiator=="function"}function ppe(t){return typeof t.default=="function"}function mpe(t){return typeof t.data<"u"}function gpe(t){return typeof Response<"u"&&t instanceof Response}function _pe(t){return typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||ArrayBuffer.isView(t))||typeof Ne<"u"&&Ne.isBuffer?.(t)||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&t instanceof Uint32Array}let Od;function bpe(t){if(Od)return Od;async function e(){nr=await upe(async r=>{let n=t;return n=await n,typeof n=="function"&&(n=await n(r)),typeof n=="function"&&(n=await n(r)),dpe(n)?n=await n.instantiator(r):ppe(n)?n=await n.default(r):(mpe(n)&&(n=n.data),gpe(n)?typeof WebAssembly.instantiateStreaming=="function"?n=await ype(n)(r):n=await vpe(n)(r):_pe(n)?n=await G_(n)(r):n instanceof WebAssembly.Module?n=await G_(n)(r):"default"in n&&n.default instanceof WebAssembly.Module&&(n=await G_(n.default)(r))),"instance"in n&&(n=n.instance),"exports"in n&&(n=n.exports),n})}return Od=e(),Od}function G_(t){return e=>WebAssembly.instantiate(t,e)}function ype(t){return e=>WebAssembly.instantiateStreaming(t,e)}function vpe(t){return async e=>{const r=await t.arrayBuffer();return WebAssembly.instantiate(r,e)}}let wpe;function Epe(){return wpe}async function n4(t){return t&&await bpe(t),{createScanner(e){return new fpe(e)},createString(e){return new wn(e)}}}function Spe(t){return zE(t)}function zE(t){return Array.isArray(t)?xpe(t):typeof t=="object"?Tpe(t):t}function xpe(t){let e=[];for(let r=0,n=t.length;r<n;r++)e[r]=zE(t[r]);return e}function Tpe(t){let e={};for(let r in t)e[r]=zE(t[r]);return e}function i4(t,...e){return e.forEach(r=>{for(let n in r)t[n]=r[n]}),t}function s4(t){const e=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return e===0?t:~e===t.length-1?s4(t.substring(0,t.length-1)):t.substr(~e+1)}var q_=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,Ld=class{static hasCaptures(t){return t===null?!1:(q_.lastIndex=0,q_.test(t))}static replaceCaptures(t,e,r){return t.replace(q_,(n,i,s,o)=>{let a=r[parseInt(i||s,10)];if(a){let l=e.substring(a.start,a.end);for(;l[0]===".";)l=l.substring(1);switch(o){case"downcase":return l.toLowerCase();case"upcase":return l.toUpperCase();default:return l}}else return n})}};function o4(t,e){return t<e?-1:t>e?1:0}function a4(t,e){if(t===null&&e===null)return 0;if(!t)return-1;if(!e)return 1;let r=t.length,n=e.length;if(r===n){for(let i=0;i<r;i++){let s=o4(t[i],e[i]);if(s!==0)return s}return 0}return r-n}function GA(t){return!!(/^#[0-9a-f]{6}$/i.test(t)||/^#[0-9a-f]{8}$/i.test(t)||/^#[0-9a-f]{3}$/i.test(t)||/^#[0-9a-f]{4}$/i.test(t))}function l4(t){return t.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var c4=class{constructor(t){this.fn=t,this.cache=new Map}get(t){if(this.cache.has(t))return this.cache.get(t);const e=this.fn(t);return this.cache.set(t,e),e}},Om=class{constructor(t,e,r){this._colorMap=t,this._defaults=e,this._root=r,this._cachedMatchRoot=new c4(n=>this._root.match(n))}static createFromRawTheme(t,e){return this.createFromParsedTheme(Ape(t),e)}static createFromParsedTheme(t,e){return Ppe(t,e)}getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(t){if(t===null)return this._defaults;const e=t.scopeName,n=this._cachedMatchRoot.get(e).find(i=>Cpe(t.parent,i.parentScopes));return n?new u4(n.fontStyle,n.foreground,n.background):null}},K_=class yp{constructor(e,r){this.parent=e,this.scopeName=r}static push(e,r){for(const n of r)e=new yp(e,n);return e}static from(...e){let r=null;for(let n=0;n<e.length;n++)r=new yp(r,e[n]);return r}push(e){return new yp(this,e)}getSegments(){let e=this;const r=[];for(;e;)r.push(e.scopeName),e=e.parent;return r.reverse(),r}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const r=[];let n=this;for(;n&&n!==e;)r.push(n.scopeName),n=n.parent;return n===e?r.reverse():void 0}};function Cpe(t,e){if(e.length===0)return!0;for(let r=0;r<e.length;r++){let n=e[r],i=!1;if(n===">"){if(r===e.length-1)return!1;n=e[++r],i=!0}for(;t&&!kpe(t.scopeName,n);){if(i)return!1;t=t.parent}if(!t)return!1;t=t.parent}return!0}function kpe(t,e){return e===t||t.startsWith(e)&&t[e.length]==="."}var u4=class{constructor(t,e,r){this.fontStyle=t,this.foregroundId=e,this.backgroundId=r}};function Ape(t){if(!t)return[];if(!t.settings||!Array.isArray(t.settings))return[];let e=t.settings,r=[],n=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];if(!o.settings)continue;let a;if(typeof o.scope=="string"){let h=o.scope;h=h.replace(/^[,]+/,""),h=h.replace(/[,]+$/,""),a=h.split(",")}else Array.isArray(o.scope)?a=o.scope:a=[""];let l=-1;if(typeof o.settings.fontStyle=="string"){l=0;let h=o.settings.fontStyle.split(" ");for(let f=0,d=h.length;f<d;f++)switch(h[f]){case"italic":l=l|1;break;case"bold":l=l|2;break;case"underline":l=l|4;break;case"strikethrough":l=l|8;break}}let c=null;typeof o.settings.foreground=="string"&&GA(o.settings.foreground)&&(c=o.settings.foreground);let u=null;typeof o.settings.background=="string"&&GA(o.settings.background)&&(u=o.settings.background);for(let h=0,f=a.length;h<f;h++){let g=a[h].trim().split(" "),_=g[g.length-1],m=null;g.length>1&&(m=g.slice(0,g.length-1),m.reverse()),r[n++]=new Rpe(_,m,i,l,c,u)}}return r}var Rpe=class{constructor(t,e,r,n,i,s){this.scope=t,this.parentScopes=e,this.index=r,this.fontStyle=n,this.foreground=i,this.background=s}},es=(t=>(t[t.NotSet=-1]="NotSet",t[t.None=0]="None",t[t.Italic=1]="Italic",t[t.Bold=2]="Bold",t[t.Underline=4]="Underline",t[t.Strikethrough=8]="Strikethrough",t))(es||{});function Ppe(t,e){t.sort((l,c)=>{let u=o4(l.scope,c.scope);return u!==0||(u=a4(l.parentScopes,c.parentScopes),u!==0)?u:l.index-c.index});let r=0,n="#000000",i="#ffffff";for(;t.length>=1&&t[0].scope==="";){let l=t.shift();l.fontStyle!==-1&&(r=l.fontStyle),l.foreground!==null&&(n=l.foreground),l.background!==null&&(i=l.background)}let s=new Ipe(e),o=new u4(r,s.getId(n),s.getId(i)),a=new Ope(new Oy(0,null,-1,0,0),[]);for(let l=0,c=t.length;l<c;l++){let u=t[l];a.insert(0,u.scope,u.parentScopes,u.fontStyle,s.getId(u.foreground),s.getId(u.background))}return new Om(s,o,a)}var Ipe=class{constructor(t){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(t)){this._isFrozen=!0;for(let e=0,r=t.length;e<r;e++)this._color2id[t[e]]=e,this._id2color[e]=t[e]}else this._isFrozen=!1}getId(t){if(t===null)return 0;t=t.toUpperCase();let e=this._color2id[t];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${t}`);return e=++this._lastColorId,this._color2id[t]=e,this._id2color[e]=t,e}getColorMap(){return this._id2color.slice(0)}},Dpe=Object.freeze([]),Oy=class h4{constructor(e,r,n,i,s){this.scopeDepth=e,this.parentScopes=r||Dpe,this.fontStyle=n,this.foreground=i,this.background=s}clone(){return new h4(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let r=[];for(let n=0,i=e.length;n<i;n++)r[n]=e[n].clone();return r}acceptOverwrite(e,r,n,i){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,r!==-1&&(this.fontStyle=r),n!==0&&(this.foreground=n),i!==0&&(this.background=i)}},Ope=class Ly{constructor(e,r=[],n={}){this._mainRule=e,this._children=n,this._rulesWithParentScopes=r}static _cmpBySpecificity(e,r){if(e.scopeDepth!==r.scopeDepth)return r.scopeDepth-e.scopeDepth;let n=0,i=0;for(;e.parentScopes[n]===">"&&n++,r.parentScopes[i]===">"&&i++,!(n>=e.parentScopes.length||i>=r.parentScopes.length);){const s=r.parentScopes[i].length-e.parentScopes[n].length;if(s!==0)return s;n++,i++}return r.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let n=e.indexOf("."),i,s;if(n===-1?(i=e,s=""):(i=e.substring(0,n),s=e.substring(n+1)),this._children.hasOwnProperty(i))return this._children[i].match(s)}const r=this._rulesWithParentScopes.concat(this._mainRule);return r.sort(Ly._cmpBySpecificity),r}insert(e,r,n,i,s,o){if(r===""){this._doInsertHere(e,n,i,s,o);return}let a=r.indexOf("."),l,c;a===-1?(l=r,c=""):(l=r.substring(0,a),c=r.substring(a+1));let u;this._children.hasOwnProperty(l)?u=this._children[l]:(u=new Ly(this._mainRule.clone(),Oy.cloneArr(this._rulesWithParentScopes)),this._children[l]=u),u.insert(e+1,c,n,i,s,o)}_doInsertHere(e,r,n,i,s){if(r===null){this._mainRule.acceptOverwrite(e,n,i,s);return}for(let o=0,a=this._rulesWithParentScopes.length;o<a;o++){let l=this._rulesWithParentScopes[o];if(a4(l.parentScopes,r)===0){l.acceptOverwrite(e,n,i,s);return}}n===-1&&(n=this._mainRule.fontStyle),i===0&&(i=this._mainRule.foreground),s===0&&(s=this._mainRule.background),this._rulesWithParentScopes.push(new Oy(e,r,n,i,s))}},$l=class bn{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const r=bn.getLanguageId(e),n=bn.getTokenType(e),i=bn.getFontStyle(e),s=bn.getForeground(e),o=bn.getBackground(e);console.log({languageId:r,tokenType:n,fontStyle:i,foreground:s,background:o})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,r,n,i,s,o,a){let l=bn.getLanguageId(e),c=bn.getTokenType(e),u=bn.containsBalancedBrackets(e)?1:0,h=bn.getFontStyle(e),f=bn.getForeground(e),d=bn.getBackground(e);return r!==0&&(l=r),n!==8&&(c=n),i!==null&&(u=i?1:0),s!==-1&&(h=s),o!==0&&(f=o),a!==0&&(d=a),(l<<0|c<<8|u<<10|h<<11|f<<15|d<<24)>>>0}};function Lm(t,e){const r=[],n=Lpe(t);let i=n.next();for(;i!==null;){let l=0;if(i.length===2&&i.charAt(1)===":"){switch(i.charAt(0)){case"R":l=1;break;case"L":l=-1;break;default:console.log(`Unknown priority ${i} in scope selector`)}i=n.next()}let c=o();if(r.push({matcher:c,priority:l}),i!==",")break;i=n.next()}return r;function s(){if(i==="-"){i=n.next();const l=s();return c=>!!l&&!l(c)}if(i==="("){i=n.next();const l=a();return i===")"&&(i=n.next()),l}if(qA(i)){const l=[];do l.push(i),i=n.next();while(qA(i));return c=>e(l,c)}return null}function o(){const l=[];let c=s();for(;c;)l.push(c),c=s();return u=>l.every(h=>h(u))}function a(){const l=[];let c=o();for(;c&&(l.push(c),i==="|"||i===",");){do i=n.next();while(i==="|"||i===",");c=o()}return u=>l.some(h=>h(u))}}function qA(t){return!!t&&!!t.match(/[\w\.:]+/)}function Lpe(t){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,r=e.exec(t);return{next:()=>{if(!r)return null;const n=r[0];return r=e.exec(t),n}}}function f4(t){typeof t.dispose=="function"&&t.dispose()}var hh=class{constructor(t){this.scopeName=t}toKey(){return this.scopeName}},Npe=class{constructor(t,e){this.scopeName=t,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},Mpe=class{constructor(){this._references=[],this._seenReferenceKeys=new Set,this.visitedRule=new Set}get references(){return this._references}add(t){const e=t.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(t))}},Bpe=class{constructor(t,e){this.repo=t,this.initialScopeName=e,this.seenFullScopeRequests=new Set,this.seenPartialScopeRequests=new Set,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new hh(this.initialScopeName)]}processQueue(){const t=this.Q;this.Q=[];const e=new Mpe;for(const r of t)Fpe(r,this.initialScopeName,this.repo,e);for(const r of e.references)if(r instanceof hh){if(this.seenFullScopeRequests.has(r.scopeName))continue;this.seenFullScopeRequests.add(r.scopeName),this.Q.push(r)}else{if(this.seenFullScopeRequests.has(r.scopeName)||this.seenPartialScopeRequests.has(r.toKey()))continue;this.seenPartialScopeRequests.add(r.toKey()),this.Q.push(r)}}};function Fpe(t,e,r,n){const i=r.lookup(t.scopeName);if(!i){if(t.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const s=r.lookup(e);t instanceof hh?vp({baseGrammar:s,selfGrammar:i},n):Ny(t.ruleName,{baseGrammar:s,selfGrammar:i,repository:i.repository},n);const o=r.injections(t.scopeName);if(o)for(const a of o)n.add(new hh(a))}function Ny(t,e,r){if(e.repository&&e.repository[t]){const n=e.repository[t];Nm([n],e,r)}}function vp(t,e){t.selfGrammar.patterns&&Array.isArray(t.selfGrammar.patterns)&&Nm(t.selfGrammar.patterns,{...t,repository:t.selfGrammar.repository},e),t.selfGrammar.injections&&Nm(Object.values(t.selfGrammar.injections),{...t,repository:t.selfGrammar.repository},e)}function Nm(t,e,r){for(const n of t){if(r.visitedRule.has(n))continue;r.visitedRule.add(n);const i=n.repository?i4({},e.repository,n.repository):e.repository;Array.isArray(n.patterns)&&Nm(n.patterns,{...e,repository:i},r);const s=n.include;if(!s)continue;const o=d4(s);switch(o.kind){case 0:vp({...e,selfGrammar:e.baseGrammar},r);break;case 1:vp(e,r);break;case 2:Ny(o.ruleName,{...e,repository:i},r);break;case 3:case 4:const a=o.scopeName===e.selfGrammar.scopeName?e.selfGrammar:o.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(a){const l={baseGrammar:e.baseGrammar,selfGrammar:a,repository:i};o.kind===4?Ny(o.ruleName,l,r):vp(l,r)}else o.kind===4?r.add(new Npe(o.scopeName,o.ruleName)):r.add(new hh(o.scopeName));break}}}var Hpe=class{constructor(){this.kind=0}},Upe=class{constructor(){this.kind=1}},jpe=class{constructor(t){this.ruleName=t,this.kind=2}},$pe=class{constructor(t){this.scopeName=t,this.kind=3}},zpe=class{constructor(t,e){this.scopeName=t,this.ruleName=e,this.kind=4}};function d4(t){if(t==="$base")return new Hpe;if(t==="$self")return new Upe;const e=t.indexOf("#");if(e===-1)return new $pe(t);if(e===0)return new jpe(t.substring(1));{const r=t.substring(0,e),n=t.substring(e+1);return new zpe(r,n)}}var Vpe=/\\(\d+)/,KA=/\\(\d+)/g,Wpe=-1,p4=-2;var ff=class{constructor(t,e,r,n){this.$location=t,this.id=e,this._name=r||null,this._nameIsCapturing=Ld.hasCaptures(this._name),this._contentName=n||null,this._contentNameIsCapturing=Ld.hasCaptures(this._contentName)}get debugName(){const t=this.$location?`${s4(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${t}`}getName(t,e){return!this._nameIsCapturing||this._name===null||t===null||e===null?this._name:Ld.replaceCaptures(this._name,t,e)}getContentName(t,e){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:Ld.replaceCaptures(this._contentName,t,e)}},Gpe=class extends ff{constructor(t,e,r,n,i){super(t,e,r,n),this.retokenizeCapturedWithRuleId=i}dispose(){}collectPatterns(t,e){throw new Error("Not supported!")}compile(t,e){throw new Error("Not supported!")}compileAG(t,e,r,n){throw new Error("Not supported!")}},qpe=class extends ff{constructor(t,e,r,n,i){super(t,e,r,null),this._match=new fh(n,this.id),this.captures=i,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(t,e){e.push(this._match)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,r,n){return this._getCachedCompiledPatterns(t).compileAG(t,r,n)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new dh,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},YA=class extends ff{constructor(t,e,r,n,i){super(t,e,r,n),this.patterns=i.patterns,this.hasMissingPatterns=i.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(t,e){for(const r of this.patterns)t.getRule(r).collectPatterns(t,e)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,r,n){return this._getCachedCompiledPatterns(t).compileAG(t,r,n)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new dh,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},My=class extends ff{constructor(t,e,r,n,i,s,o,a,l,c){super(t,e,r,n),this._begin=new fh(i,this.id),this.beginCaptures=s,this._end=new fh(o||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=a,this.applyEndPatternLast=l||!1,this.patterns=c.patterns,this.hasMissingPatterns=c.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(t,e){return this._end.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t,e).compile(t)}compileAG(t,e,r,n){return this._getCachedCompiledPatterns(t,e).compileAG(t,r,n)}_getCachedCompiledPatterns(t,e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new dh;for(const r of this.patterns)t.getRule(r).collectPatterns(t,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,e):this._cachedCompiledPatterns.setSource(0,e)),this._cachedCompiledPatterns}},Mm=class extends ff{constructor(t,e,r,n,i,s,o,a,l){super(t,e,r,n),this._begin=new fh(i,this.id),this.beginCaptures=s,this.whileCaptures=a,this._while=new fh(o,p4),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=l.patterns,this.hasMissingPatterns=l.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(t,e){return this._while.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,r,n){return this._getCachedCompiledPatterns(t).compileAG(t,r,n)}_getCachedCompiledPatterns(t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new dh;for(const e of this.patterns)t.getRule(e).collectPatterns(t,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(t,e){return this._getCachedCompiledWhilePatterns(t,e).compile(t)}compileWhileAG(t,e,r,n){return this._getCachedCompiledWhilePatterns(t,e).compileAG(t,r,n)}_getCachedCompiledWhilePatterns(t,e){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new dh,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,e||""),this._cachedCompiledWhilePatterns}},m4=class _r{static createCaptureRule(e,r,n,i,s){return e.registerRule(o=>new Gpe(r,o,n,i,s))}static getCompiledRuleId(e,r,n){return e.id||r.registerRule(i=>{if(e.id=i,e.match)return new qpe(e.$vscodeTextmateLocation,e.id,e.name,e.match,_r._compileCaptures(e.captures,r,n));if(typeof e.begin>"u"){e.repository&&(n=i4({},n,e.repository));let s=e.patterns;return typeof s>"u"&&e.include&&(s=[{include:e.include}]),new YA(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,_r._compilePatterns(s,r,n))}return e.while?new Mm(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,_r._compileCaptures(e.beginCaptures||e.captures,r,n),e.while,_r._compileCaptures(e.whileCaptures||e.captures,r,n),_r._compilePatterns(e.patterns,r,n)):new My(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,_r._compileCaptures(e.beginCaptures||e.captures,r,n),e.end,_r._compileCaptures(e.endCaptures||e.captures,r,n),e.applyEndPatternLast,_r._compilePatterns(e.patterns,r,n))}),e.id}static _compileCaptures(e,r,n){let i=[];if(e){let s=0;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const a=parseInt(o,10);a>s&&(s=a)}for(let o=0;o<=s;o++)i[o]=null;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const a=parseInt(o,10);let l=0;e[o].patterns&&(l=_r.getCompiledRuleId(e[o],r,n)),i[a]=_r.createCaptureRule(r,e[o].$vscodeTextmateLocation,e[o].name,e[o].contentName,l)}}return i}static _compilePatterns(e,r,n){let i=[];if(e)for(let s=0,o=e.length;s<o;s++){const a=e[s];let l=-1;if(a.include){const c=d4(a.include);switch(c.kind){case 0:case 1:l=_r.getCompiledRuleId(n[a.include],r,n);break;case 2:let u=n[c.ruleName];u&&(l=_r.getCompiledRuleId(u,r,n));break;case 3:case 4:const h=c.scopeName,f=c.kind===4?c.ruleName:null,d=r.getExternalGrammar(h,n);if(d)if(f){let g=d.repository[f];g&&(l=_r.getCompiledRuleId(g,r,d.repository))}else l=_r.getCompiledRuleId(d.repository.$self,r,d.repository);break}}else l=_r.getCompiledRuleId(a,r,n);if(l!==-1){const c=r.getRule(l);let u=!1;if((c instanceof YA||c instanceof My||c instanceof Mm)&&c.hasMissingPatterns&&c.patterns.length===0&&(u=!0),u)continue;i.push(l)}}return{patterns:i,hasMissingPatterns:(e?e.length:0)!==i.length}}},fh=class g4{constructor(e,r){if(e){const n=e.length;let i=0,s=[],o=!1;for(let a=0;a<n;a++)if(e.charAt(a)==="\\"&&a+1<n){const c=e.charAt(a+1);c==="z"?(s.push(e.substring(i,a)),s.push("$(?!\\n)(?<!\\n)"),i=a+2):(c==="A"||c==="G")&&(o=!0),a++}this.hasAnchor=o,i===0?this.source=e:(s.push(e.substring(i,n)),this.source=s.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=r,this.hasBackReferences=Vpe.test(this.source)}clone(){return new g4(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,r){let n=r.map(i=>e.substring(i.start,i.end));return KA.lastIndex=0,this.source.replace(KA,(i,s)=>l4(n[parseInt(s,10)]||""))}_buildAnchorCache(){let e=[],r=[],n=[],i=[],s,o,a,l;for(s=0,o=this.source.length;s<o;s++)a=this.source.charAt(s),e[s]=a,r[s]=a,n[s]=a,i[s]=a,a==="\\"&&s+1<o&&(l=this.source.charAt(s+1),l==="A"?(e[s+1]="",r[s+1]="",n[s+1]="A",i[s+1]="A"):l==="G"?(e[s+1]="",r[s+1]="G",n[s+1]="",i[s+1]="G"):(e[s+1]=l,r[s+1]=l,n[s+1]=l,i[s+1]=l),s++);return{A0_G0:e.join(""),A0_G1:r.join(""),A1_G0:n.join(""),A1_G1:i.join("")}}resolveAnchors(e,r){return!this.hasAnchor||!this._anchorCache?this.source:e?r?this._anchorCache.A1_G1:this._anchorCache.A1_G0:r?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},dh=class{constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(t){this._items.push(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}unshift(t){this._items.unshift(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}length(){return this._items.length}setSource(t,e){this._items[t].source!==e&&(this._disposeCaches(),this._items[t].setSource(e))}compile(t){if(!this._cached){let e=this._items.map(r=>r.source);this._cached=new XA(t,e,this._items.map(r=>r.ruleId))}return this._cached}compileAG(t,e,r){return this._hasAnchors?e?r?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(t,e,r)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(t,e,r)),this._anchorCache.A1_G0):r?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(t,e,r)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(t,e,r)),this._anchorCache.A0_G0):this.compile(t)}_resolveAnchors(t,e,r){let n=this._items.map(i=>i.resolveAnchors(e,r));return new XA(t,n,this._items.map(i=>i.ruleId))}},XA=class{constructor(t,e,r){this.regExps=e,this.rules=r,this.scanner=t.createOnigScanner(e)}dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const t=[];for(let e=0,r=this.rules.length;e<r;e++)t.push("   - "+this.rules[e]+": "+this.regExps[e]);return t.join(`
`)}findNextMatchSync(t,e,r){const n=this.scanner.findNextMatchSync(t,e,r);return n?{ruleId:this.rules[n.index],captureIndices:n.captureIndices}:null}},By=class{constructor(t,e){this.languageId=t,this.tokenType=e}},VE=class Fy{constructor(e,r){this._getBasicScopeAttributes=new c4(n=>{const i=this._scopeToLanguage(n),s=this._toStandardTokenType(n);return new By(i,s)}),this._defaultAttributes=new By(e,8),this._embeddedLanguagesMatcher=new Ype(Object.entries(r||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?Fy._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const r=e.match(Fy.STANDARD_TOKEN_TYPE_REGEXP);if(!r)return 8;switch(r[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}};VE._NULL_SCOPE_METADATA=new By(0,0);VE.STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/;var Kpe=VE,Ype=class{constructor(t){if(t.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(t);const e=t.map(([r,n])=>l4(r));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(t){if(!this.scopesRegExp)return;const e=t.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},QA=class{constructor(t,e){this.stack=t,this.stoppedEarly=e}};function _4(t,e,r,n,i,s,o,a){const l=e.content.length;let c=!1,u=-1;if(o){const d=Xpe(t,e,r,n,i,s);i=d.stack,n=d.linePos,r=d.isFirstLine,u=d.anchorPosition}const h=Date.now();for(;!c;){if(a!==0&&Date.now()-h>a)return new QA(i,!0);f()}return new QA(i,!1);function f(){const d=Qpe(t,e,r,n,i,u);if(!d){s.produce(i,l),c=!0;return}const g=d.captureIndices,_=d.matchedRuleId,m=g&&g.length>0?g[0].end>n:!1;if(_===Wpe){const p=i.getRule(t);s.produce(i,g[0].start),i=i.withContentNameScopesList(i.nameScopesList),ou(t,e,r,i,s,p.endCaptures,g),s.produce(i,g[0].end);const b=i;if(i=i.parent,u=b.getAnchorPos(),!m&&b.getEnterPos()===n){i=b,s.produce(i,l),c=!0;return}}else{const p=t.getRule(_);s.produce(i,g[0].start);const b=i,y=p.getName(e.content,g),v=i.contentNameScopesList.pushAttributed(y,t);if(i=i.push(_,n,u,g[0].end===l,null,v,v),p instanceof My){const w=p;ou(t,e,r,i,s,w.beginCaptures,g),s.produce(i,g[0].end),u=g[0].end;const S=w.getContentName(e.content,g),x=v.pushAttributed(S,t);if(i=i.withContentNameScopesList(x),w.endHasBackReferences&&(i=i.withEndRule(w.getEndWithResolvedBackReferences(e.content,g))),!m&&b.hasSameRuleAs(i)){i=i.pop(),s.produce(i,l),c=!0;return}}else if(p instanceof Mm){const w=p;ou(t,e,r,i,s,w.beginCaptures,g),s.produce(i,g[0].end),u=g[0].end;const S=w.getContentName(e.content,g),x=v.pushAttributed(S,t);if(i=i.withContentNameScopesList(x),w.whileHasBackReferences&&(i=i.withEndRule(w.getWhileWithResolvedBackReferences(e.content,g))),!m&&b.hasSameRuleAs(i)){i=i.pop(),s.produce(i,l),c=!0;return}}else if(ou(t,e,r,i,s,p.captures,g),s.produce(i,g[0].end),i=i.pop(),!m){i=i.safePop(),s.produce(i,l),c=!0;return}}g[0].end>n&&(n=g[0].end,r=!1)}}function Xpe(t,e,r,n,i,s){let o=i.beginRuleCapturedEOL?0:-1;const a=[];for(let l=i;l;l=l.pop()){const c=l.getRule(t);c instanceof Mm&&a.push({rule:c,stack:l})}for(let l=a.pop();l;l=a.pop()){const{ruleScanner:c,findOptions:u}=eme(l.rule,t,l.stack.endRule,r,n===o),h=c.findNextMatchSync(e,n,u);if(h){if(h.ruleId!==p4){i=l.stack.pop();break}h.captureIndices&&h.captureIndices.length&&(s.produce(l.stack,h.captureIndices[0].start),ou(t,e,r,l.stack,s,l.rule.whileCaptures,h.captureIndices),s.produce(l.stack,h.captureIndices[0].end),o=h.captureIndices[0].end,h.captureIndices[0].end>n&&(n=h.captureIndices[0].end,r=!1))}else{i=l.stack.pop();break}}return{stack:i,linePos:n,anchorPosition:o,isFirstLine:r}}function Qpe(t,e,r,n,i,s){const o=Zpe(t,e,r,n,i,s),a=t.getInjections();if(a.length===0)return o;const l=Jpe(a,t,e,r,n,i,s);if(!l)return o;if(!o)return l;const c=o.captureIndices[0].start,u=l.captureIndices[0].start;return u<c||l.priorityMatch&&u===c?l:o}function Zpe(t,e,r,n,i,s){const o=i.getRule(t),{ruleScanner:a,findOptions:l}=b4(o,t,i.endRule,r,n===s),c=a.findNextMatchSync(e,n,l);return c?{captureIndices:c.captureIndices,matchedRuleId:c.ruleId}:null}function Jpe(t,e,r,n,i,s,o){let a=Number.MAX_VALUE,l=null,c,u=0;const h=s.contentNameScopesList.getScopeNames();for(let f=0,d=t.length;f<d;f++){const g=t[f];if(!g.matcher(h))continue;const _=e.getRule(g.ruleId),{ruleScanner:m,findOptions:p}=b4(_,e,null,n,i===o),b=m.findNextMatchSync(r,i,p);if(!b)continue;const y=b.captureIndices[0].start;if(!(y>=a)&&(a=y,l=b.captureIndices,c=b.ruleId,u=g.priority,a===i))break}return l?{priorityMatch:u===-1,captureIndices:l,matchedRuleId:c}:null}function b4(t,e,r,n,i){return{ruleScanner:t.compileAG(e,r,n,i),findOptions:0}}function eme(t,e,r,n,i){return{ruleScanner:t.compileWhileAG(e,r,n,i),findOptions:0}}function ou(t,e,r,n,i,s,o){if(s.length===0)return;const a=e.content,l=Math.min(s.length,o.length),c=[],u=o[0].end;for(let h=0;h<l;h++){const f=s[h];if(f===null)continue;const d=o[h];if(d.length===0)continue;if(d.start>u)break;for(;c.length>0&&c[c.length-1].endPos<=d.start;)i.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop();if(c.length>0?i.produceFromScopes(c[c.length-1].scopes,d.start):i.produce(n,d.start),f.retokenizeCapturedWithRuleId){const _=f.getName(a,o),m=n.contentNameScopesList.pushAttributed(_,t),p=f.getContentName(a,o),b=m.pushAttributed(p,t),y=n.push(f.retokenizeCapturedWithRuleId,d.start,-1,!1,null,m,b),v=t.createOnigString(a.substring(0,d.end));_4(t,v,r&&d.start===0,d.start,y,i,!1,0),f4(v);continue}const g=f.getName(a,o);if(g!==null){const m=(c.length>0?c[c.length-1].scopes:n.contentNameScopesList).pushAttributed(g,t);c.push(new tme(m,d.end))}}for(;c.length>0;)i.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop()}var tme=class{constructor(t,e){this.scopes=t,this.endPos=e}};function rme(t,e,r,n,i,s,o,a){return new ime(t,e,r,n,i,s,o,a)}function ZA(t,e,r,n,i){const s=Lm(e,Bm),o=m4.getCompiledRuleId(r,n,i.repository);for(const a of s)t.push({debugSelector:e,matcher:a.matcher,ruleId:o,grammar:i,priority:a.priority})}function Bm(t,e){if(e.length<t.length)return!1;let r=0;return t.every(n=>{for(let i=r;i<e.length;i++)if(nme(e[i],n))return r=i+1,!0;return!1})}function nme(t,e){if(!t)return!1;if(t===e)return!0;const r=e.length;return t.length>r&&t.substr(0,r)===e&&t[r]==="."}var ime=class{constructor(t,e,r,n,i,s,o,a){if(this._rootScopeName=t,this.balancedBracketSelectors=s,this._onigLib=a,this._basicScopeAttributesProvider=new Kpe(r,n),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=o,this._grammar=JA(e,null),this._injections=null,this._tokenTypeMatchers=[],i)for(const l of Object.keys(i)){const c=Lm(l,Bm);for(const u of c)this._tokenTypeMatchers.push({matcher:u.matcher,type:i[l]})}}get themeProvider(){return this._grammarRepository}dispose(){for(const t of this._ruleId2desc)t&&t.dispose()}createOnigScanner(t){return this._onigLib.createOnigScanner(t)}createOnigString(t){return this._onigLib.createOnigString(t)}getMetadataForScope(t){return this._basicScopeAttributesProvider.getBasicScopeAttributes(t)}_collectInjections(){const t={lookup:i=>i===this._rootScopeName?this._grammar:this.getExternalGrammar(i),injections:i=>this._grammarRepository.injections(i)},e=[],r=this._rootScopeName,n=t.lookup(r);if(n){const i=n.injections;if(i)for(let o in i)ZA(e,o,i[o],this,n);const s=this._grammarRepository.injections(r);s&&s.forEach(o=>{const a=this.getExternalGrammar(o);if(a){const l=a.injectionSelector;l&&ZA(e,l,a,this,a)}})}return e.sort((i,s)=>i.priority-s.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(t){const e=++this._lastRuleId,r=t(e);return this._ruleId2desc[e]=r,r}getRule(t){return this._ruleId2desc[t]}getExternalGrammar(t,e){if(this._includedGrammars[t])return this._includedGrammars[t];if(this._grammarRepository){const r=this._grammarRepository.lookup(t);if(r)return this._includedGrammars[t]=JA(r,e&&e.$base),this._includedGrammars[t]}}tokenizeLine(t,e,r=0){const n=this._tokenize(t,e,!1,r);return{tokens:n.lineTokens.getResult(n.ruleStack,n.lineLength),ruleStack:n.ruleStack,stoppedEarly:n.stoppedEarly}}tokenizeLine2(t,e,r=0){const n=this._tokenize(t,e,!0,r);return{tokens:n.lineTokens.getBinaryResult(n.ruleStack,n.lineLength),ruleStack:n.ruleStack,stoppedEarly:n.stoppedEarly}}_tokenize(t,e,r,n){this._rootId===-1&&(this._rootId=m4.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let i;if(!e||e===Uy.NULL){i=!0;const c=this._basicScopeAttributesProvider.getDefaultAttributes(),u=this.themeProvider.getDefaults(),h=$l.set(0,c.languageId,c.tokenType,null,u.fontStyle,u.foregroundId,u.backgroundId),f=this.getRule(this._rootId).getName(null,null);let d;f?d=ku.createRootAndLookUpScopeName(f,h,this):d=ku.createRoot("unknown",h),e=new Uy(null,this._rootId,-1,-1,!1,null,d,d)}else i=!1,e.reset();t=t+`
`;const s=this.createOnigString(t),o=s.content.length,a=new ome(r,t,this._tokenTypeMatchers,this.balancedBracketSelectors),l=_4(this,s,i,0,e,a,!0,n);return f4(s),{lineLength:o,lineTokens:a,ruleStack:l.stack,stoppedEarly:l.stoppedEarly}}};function JA(t,e){return t=Spe(t),t.repository=t.repository||{},t.repository.$self={$vscodeTextmateLocation:t.$vscodeTextmateLocation,patterns:t.patterns,name:t.scopeName},t.repository.$base=e||t.repository.$self,t}var ku=class hi{constructor(e,r,n){this.parent=e,this.scopePath=r,this.tokenAttributes=n}static fromExtension(e,r){let n=e,i=e?.scopePath??null;for(const s of r)i=K_.push(i,s.scopeNames),n=new hi(n,i,s.encodedTokenAttributes);return n}static createRoot(e,r){return new hi(null,new K_(null,e),r)}static createRootAndLookUpScopeName(e,r,n){const i=n.getMetadataForScope(e),s=new K_(null,e),o=n.themeProvider.themeMatch(s),a=hi.mergeAttributes(r,i,o);return new hi(null,s,a)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return hi.equals(this,e)}static equals(e,r){do{if(e===r||!e&&!r)return!0;if(!e||!r||e.scopeName!==r.scopeName||e.tokenAttributes!==r.tokenAttributes)return!1;e=e.parent,r=r.parent}while(!0)}static mergeAttributes(e,r,n){let i=-1,s=0,o=0;return n!==null&&(i=n.fontStyle,s=n.foregroundId,o=n.backgroundId),$l.set(e,r.languageId,r.tokenType,null,i,s,o)}pushAttributed(e,r){if(e===null)return this;if(e.indexOf(" ")===-1)return hi._pushAttributed(this,e,r);const n=e.split(/ /g);let i=this;for(const s of n)i=hi._pushAttributed(i,s,r);return i}static _pushAttributed(e,r,n){const i=n.getMetadataForScope(r),s=e.scopePath.push(r),o=n.themeProvider.themeMatch(s),a=hi.mergeAttributes(e.tokenAttributes,i,o);return new hi(e,s,a)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const r=[];let n=this;for(;n&&n!==e;)r.push({encodedTokenAttributes:n.tokenAttributes,scopeNames:n.scopePath.getExtensionIfDefined(n.parent?.scopePath??null)}),n=n.parent;return n===e?r.reverse():void 0}},Hy=class Ya{constructor(e,r,n,i,s,o,a,l){this.parent=e,this.ruleId=r,this.beginRuleCapturedEOL=s,this.endRule=o,this.nameScopesList=a,this.contentNameScopesList=l,this._stackElementBrand=void 0,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=n,this._anchorPos=i}equals(e){return e===null?!1:Ya._equals(this,e)}static _equals(e,r){return e===r?!0:this._structuralEquals(e,r)?ku.equals(e.contentNameScopesList,r.contentNameScopesList):!1}static _structuralEquals(e,r){do{if(e===r||!e&&!r)return!0;if(!e||!r||e.depth!==r.depth||e.ruleId!==r.ruleId||e.endRule!==r.endRule)return!1;e=e.parent,r=r.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){Ya._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,r,n,i,s,o,a){return new Ya(this,e,r,n,i,s,o,a)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,r){return this.parent&&(r=this.parent._writeString(e,r)),e[r++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,r}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new Ya(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let r=this;for(;r&&r._enterPos===e._enterPos;){if(r.ruleId===e.ruleId)return!0;r=r.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(e,r){const n=ku.fromExtension(e?.nameScopesList??null,r.nameScopesList);return new Ya(e,r.ruleId,r.enterPos??-1,r.anchorPos??-1,r.beginRuleCapturedEOL,r.endRule,n,ku.fromExtension(n,r.contentNameScopesList))}};Hy.NULL=new Hy(null,0,0,0,!1,null,null,null);var Uy=Hy,sme=class{constructor(t,e){this.allowAny=!1,this.balancedBracketScopes=t.flatMap(r=>r==="*"?(this.allowAny=!0,[]):Lm(r,Bm).map(n=>n.matcher)),this.unbalancedBracketScopes=e.flatMap(r=>Lm(r,Bm).map(n=>n.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(t){for(const e of this.unbalancedBracketScopes)if(e(t))return!1;for(const e of this.balancedBracketScopes)if(e(t))return!0;return this.allowAny}},ome=class{constructor(t,e,r,n){this.balancedBracketSelectors=n,this._emitBinaryTokens=t,this._tokenTypeOverrides=r,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}produce(t,e){this.produceFromScopes(t.contentNameScopesList,e)}produceFromScopes(t,e){if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let n=t?.tokenAttributes??0,i=!1;if(this.balancedBracketSelectors?.matchesAlways&&(i=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const s=t?.getScopeNames()??[];for(const o of this._tokenTypeOverrides)o.matcher(s)&&(n=$l.set(n,0,o.type,null,-1,0,0));this.balancedBracketSelectors&&(i=this.balancedBracketSelectors.match(s))}if(i&&(n=$l.set(n,0,8,i,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===n){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(n),this._lastTokenEndIndex=e;return}const r=t?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:r}),this._lastTokenEndIndex=e}getResult(t,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(t,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._binaryTokens[this._binaryTokens.length-2]=0);const r=new Uint32Array(this._binaryTokens.length);for(let n=0,i=this._binaryTokens.length;n<i;n++)r[n]=this._binaryTokens[n];return r}},ame=class{constructor(t,e){this._onigLib=e,this._grammars=new Map,this._rawGrammars=new Map,this._injectionGrammars=new Map,this._theme=t}dispose(){for(const t of this._grammars.values())t.dispose()}setTheme(t){this._theme=t}getColorMap(){return this._theme.getColorMap()}addGrammar(t,e){this._rawGrammars.set(t.scopeName,t),e&&this._injectionGrammars.set(t.scopeName,e)}lookup(t){return this._rawGrammars.get(t)}injections(t){return this._injectionGrammars.get(t)}getDefaults(){return this._theme.getDefaults()}themeMatch(t){return this._theme.match(t)}grammarForScopeName(t,e,r,n,i){if(!this._grammars.has(t)){let s=this._rawGrammars.get(t);if(!s)return null;this._grammars.set(t,rme(t,s,e,r,n,i,this,this._onigLib))}return this._grammars.get(t)}},lme=class{constructor(e){this._options=e,this._syncRegistry=new ame(Om.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,r){this._syncRegistry.setTheme(Om.createFromRawTheme(e,r))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,r,n){return this.loadGrammarWithConfiguration(e,r,{embeddedLanguages:n})}loadGrammarWithConfiguration(e,r,n){return this._loadGrammar(e,r,n.embeddedLanguages,n.tokenTypes,new sme(n.balancedBracketSelectors||[],n.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,r,n,i,s){const o=new Bpe(this._syncRegistry,e);for(;o.Q.length>0;)o.Q.map(a=>this._loadSingleGrammar(a.scopeName)),o.processQueue();return this._grammarForScopeName(e,r,n,i,s)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const r=this._options.loadGrammar(e);if(r){const n=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(r,n)}}addGrammar(e,r=[],n=0,i=null){return this._syncRegistry.addGrammar(e,r),this._grammarForScopeName(e.scopeName,n,i)}_grammarForScopeName(e,r=0,n=null,i=null,s=null){return this._syncRegistry.grammarForScopeName(e,r,n,i,s)}},jy=Uy.NULL;const cme=/["&'<>`]/g,ume=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,hme=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,fme=/[|\\{}()[\]^$+*?.]/g,e2=new WeakMap;function dme(t,e){if(t=t.replace(e.subset?pme(e.subset):cme,n),e.subset||e.escapeOnly)return t;return t.replace(ume,r).replace(hme,n);function r(i,s,o){return e.format((i.charCodeAt(0)-55296)*1024+i.charCodeAt(1)-56320+65536,o.charCodeAt(s+2),e)}function n(i,s,o){return e.format(i.charCodeAt(0),o.charCodeAt(s+1),e)}}function pme(t){let e=e2.get(t);return e||(e=mme(t),e2.set(t,e)),e}function mme(t){const e=[];let r=-1;for(;++r<t.length;)e.push(t[r].replace(fme,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const gme=/[\dA-Fa-f]/;function _me(t,e,r){const n="&#x"+t.toString(16).toUpperCase();return r&&e&&!gme.test(String.fromCharCode(e))?n:n+";"}const bme=/\d/;function yme(t,e,r){const n="&#"+String(t);return r&&e&&!bme.test(String.fromCharCode(e))?n:n+";"}const vme=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],Y_={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},wme=["cent","copy","divide","gt","lt","not","para","times"],y4={}.hasOwnProperty,$y={};let Nd;for(Nd in Y_)y4.call(Y_,Nd)&&($y[Y_[Nd]]=Nd);const Eme=/[^\dA-Za-z]/;function Sme(t,e,r,n){const i=String.fromCharCode(t);if(y4.call($y,i)){const s=$y[i],o="&"+s;return r&&vme.includes(s)&&!wme.includes(s)&&(!n||e&&e!==61&&Eme.test(String.fromCharCode(e)))?o:o+";"}return""}function xme(t,e,r){let n=_me(t,e,r.omitOptionalSemicolons),i;if((r.useNamedReferences||r.useShortestReferences)&&(i=Sme(t,e,r.omitOptionalSemicolons,r.attribute)),(r.useShortestReferences||!i)&&r.useShortestReferences){const s=yme(t,e,r.omitOptionalSemicolons);s.length<n.length&&(n=s)}return i&&(!r.useShortestReferences||i.length<n.length)?i:n}function Sl(t,e){return dme(t,Object.assign({format:xme},e))}const Tme=/^>|^->|<!--|-->|--!>|<!-$/g,Cme=[">"],kme=["<",">"];function Ame(t,e,r,n){return n.settings.bogusComments?"<?"+Sl(t.value,Object.assign({},n.settings.characterReferences,{subset:Cme}))+">":"<!--"+t.value.replace(Tme,i)+"-->";function i(s){return Sl(s,Object.assign({},n.settings.characterReferences,{subset:kme}))}}function Rme(t,e,r,n){return"<!"+(n.settings.upperDoctype?"DOCTYPE":"doctype")+(n.settings.tightDoctype?"":" ")+"html>"}const tr=w4(1),v4=w4(-1),Pme=[];function w4(t){return e;function e(r,n,i){const s=r?r.children:Pme;let o=(n||0)+t,a=s[o];if(!i)for(;a&&Kg(a);)o+=t,a=s[o];return a}}const Ime={}.hasOwnProperty;function E4(t){return e;function e(r,n,i){return Ime.call(t,r.tagName)&&t[r.tagName](r,n,i)}}const WE=E4({body:Ome,caption:X_,colgroup:X_,dd:Bme,dt:Mme,head:X_,html:Dme,li:Nme,optgroup:Fme,option:Hme,p:Lme,rp:t2,rt:t2,tbody:jme,td:r2,tfoot:$me,th:r2,thead:Ume,tr:zme});function X_(t,e,r){const n=tr(r,e,!0);return!n||n.type!=="comment"&&!(n.type==="text"&&Kg(n.value.charAt(0)))}function Dme(t,e,r){const n=tr(r,e);return!n||n.type!=="comment"}function Ome(t,e,r){const n=tr(r,e);return!n||n.type!=="comment"}function Lme(t,e,r){const n=tr(r,e);return n?n.type==="element"&&(n.tagName==="address"||n.tagName==="article"||n.tagName==="aside"||n.tagName==="blockquote"||n.tagName==="details"||n.tagName==="div"||n.tagName==="dl"||n.tagName==="fieldset"||n.tagName==="figcaption"||n.tagName==="figure"||n.tagName==="footer"||n.tagName==="form"||n.tagName==="h1"||n.tagName==="h2"||n.tagName==="h3"||n.tagName==="h4"||n.tagName==="h5"||n.tagName==="h6"||n.tagName==="header"||n.tagName==="hgroup"||n.tagName==="hr"||n.tagName==="main"||n.tagName==="menu"||n.tagName==="nav"||n.tagName==="ol"||n.tagName==="p"||n.tagName==="pre"||n.tagName==="section"||n.tagName==="table"||n.tagName==="ul"):!r||!(r.type==="element"&&(r.tagName==="a"||r.tagName==="audio"||r.tagName==="del"||r.tagName==="ins"||r.tagName==="map"||r.tagName==="noscript"||r.tagName==="video"))}function Nme(t,e,r){const n=tr(r,e);return!n||n.type==="element"&&n.tagName==="li"}function Mme(t,e,r){const n=tr(r,e);return!!(n&&n.type==="element"&&(n.tagName==="dt"||n.tagName==="dd"))}function Bme(t,e,r){const n=tr(r,e);return!n||n.type==="element"&&(n.tagName==="dt"||n.tagName==="dd")}function t2(t,e,r){const n=tr(r,e);return!n||n.type==="element"&&(n.tagName==="rp"||n.tagName==="rt")}function Fme(t,e,r){const n=tr(r,e);return!n||n.type==="element"&&n.tagName==="optgroup"}function Hme(t,e,r){const n=tr(r,e);return!n||n.type==="element"&&(n.tagName==="option"||n.tagName==="optgroup")}function Ume(t,e,r){const n=tr(r,e);return!!(n&&n.type==="element"&&(n.tagName==="tbody"||n.tagName==="tfoot"))}function jme(t,e,r){const n=tr(r,e);return!n||n.type==="element"&&(n.tagName==="tbody"||n.tagName==="tfoot")}function $me(t,e,r){return!tr(r,e)}function zme(t,e,r){const n=tr(r,e);return!n||n.type==="element"&&n.tagName==="tr"}function r2(t,e,r){const n=tr(r,e);return!n||n.type==="element"&&(n.tagName==="td"||n.tagName==="th")}const Vme=E4({body:qme,colgroup:Kme,head:Gme,html:Wme,tbody:Yme});function Wme(t){const e=tr(t,-1);return!e||e.type!=="comment"}function Gme(t){const e=new Set;for(const n of t.children)if(n.type==="element"&&(n.tagName==="base"||n.tagName==="title")){if(e.has(n.tagName))return!1;e.add(n.tagName)}const r=t.children[0];return!r||r.type==="element"}function qme(t){const e=tr(t,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&Kg(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function Kme(t,e,r){const n=v4(r,e),i=tr(t,-1,!0);return r&&n&&n.type==="element"&&n.tagName==="colgroup"&&WE(n,r.children.indexOf(n),r)?!1:!!(i&&i.type==="element"&&i.tagName==="col")}function Yme(t,e,r){const n=v4(r,e),i=tr(t,-1);return r&&n&&n.type==="element"&&(n.tagName==="thead"||n.tagName==="tbody")&&WE(n,r.children.indexOf(n),r)?!1:!!(i&&i.type==="element"&&i.tagName==="tr")}const Md={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function Xme(t,e,r,n){const i=n.schema,s=i.space==="svg"?!1:n.settings.omitOptionalTags;let o=i.space==="svg"?n.settings.closeEmptyElements:n.settings.voids.includes(t.tagName.toLowerCase());const a=[];let l;i.space==="html"&&t.tagName==="svg"&&(n.schema=Ui);const c=Qme(n,t.properties),u=n.all(i.space==="html"&&t.tagName==="template"?t.content:t);return n.schema=i,u&&(o=!1),(c||!s||!Vme(t,e,r))&&(a.push("<",t.tagName,c?" "+c:""),o&&(i.space==="svg"||n.settings.closeSelfClosing)&&(l=c.charAt(c.length-1),(!n.settings.tightSelfClosing||l==="/"||l&&l!=='"'&&l!=="'")&&a.push(" "),a.push("/")),a.push(">")),a.push(u),!o&&(!s||!WE(t,e,r))&&a.push("</"+t.tagName+">"),a.join("")}function Qme(t,e){const r=[];let n=-1,i;if(e){for(i in e)if(e[i]!==null&&e[i]!==void 0){const s=Zme(t,i,e[i]);s&&r.push(s)}}for(;++n<r.length;){const s=t.settings.tightAttributes?r[n].charAt(r[n].length-1):void 0;n!==r.length-1&&s!=='"'&&s!=="'"&&(r[n]+=" ")}return r.join("")}function Zme(t,e,r){const n=sf(t.schema,e),i=t.settings.allowParseErrors&&t.schema.space==="html"?0:1,s=t.settings.allowDangerousCharacters?0:1;let o=t.quote,a;if(n.overloadedBoolean&&(r===n.attribute||r==="")?r=!0:(n.boolean||n.overloadedBoolean&&typeof r!="string")&&(r=!!r),r==null||r===!1||typeof r=="number"&&Number.isNaN(r))return"";const l=Sl(n.attribute,Object.assign({},t.settings.characterReferences,{subset:Md.name[i][s]}));return r===!0||(r=Array.isArray(r)?(n.commaSeparated?bE:vE)(r,{padLeft:!t.settings.tightCommaSeparatedLists}):String(r),t.settings.collapseEmptyAttributes&&!r)?l:(t.settings.preferUnquoted&&(a=Sl(r,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:Md.unquoted[i][s]}))),a!==r&&(t.settings.quoteSmart&&Im(r,o)>Im(r,t.alternative)&&(o=t.alternative),a=o+Sl(r,Object.assign({},t.settings.characterReferences,{subset:(o==="'"?Md.single:Md.double)[i][s],attribute:!0}))+o),l+(a&&"="+a))}const Jme=["<","&"];function S4(t,e,r,n){return r&&r.type==="element"&&(r.tagName==="script"||r.tagName==="style")?t.value:Sl(t.value,Object.assign({},n.settings.characterReferences,{subset:Jme}))}function ege(t,e,r,n){return n.settings.allowDangerousHtml?t.value:S4(t,e,r,n)}function tge(t,e,r,n){return n.all(t)}const rge=OE("type",{invalid:nge,unknown:ige,handlers:{comment:Ame,doctype:Rme,element:Xme,raw:ege,root:tge,text:S4}});function nge(t){throw new Error("Expected node, not `"+t+"`")}function ige(t){const e=t;throw new Error("Cannot compile unknown node `"+e.type+"`")}const sge={},oge={},age=[];function lge(t,e){const r=sge,n=r.quote||'"',i=n==='"'?"'":'"';if(n!=='"'&&n!=="'")throw new Error("Invalid quote `"+n+"`, expected `'` or `\"`");return{one:cge,all:uge,settings:{omitOptionalTags:r.omitOptionalTags||!1,allowParseErrors:r.allowParseErrors||!1,allowDangerousCharacters:r.allowDangerousCharacters||!1,quoteSmart:r.quoteSmart||!1,preferUnquoted:r.preferUnquoted||!1,tightAttributes:r.tightAttributes||!1,upperDoctype:r.upperDoctype||!1,tightDoctype:r.tightDoctype||!1,bogusComments:r.bogusComments||!1,tightCommaSeparatedLists:r.tightCommaSeparatedLists||!1,tightSelfClosing:r.tightSelfClosing||!1,collapseEmptyAttributes:r.collapseEmptyAttributes||!1,allowDangerousHtml:r.allowDangerousHtml||!1,voids:r.voids||K6,characterReferences:r.characterReferences||oge,closeSelfClosing:r.closeSelfClosing||!1,closeEmptyElements:r.closeEmptyElements||!1},schema:r.space==="svg"?Ui:uc,quote:n,alternative:i}.one(Array.isArray(t)?{type:"root",children:t}:t,void 0,void 0)}function cge(t,e,r){return rge(t,e,r,this)}function uge(t){const e=[],r=t&&t.children||age;let n=-1;for(;++n<r.length;)e[n]=this.one(r[n],n,t);return e.join("")}function hge(t){return Array.isArray(t)?t:[t]}function o0(t,e=!1){const r=t.split(/(\r?\n)/g);let n=0;const i=[];for(let s=0;s<r.length;s+=2){const o=e?r[s]+(r[s+1]||""):r[s];i.push([o,n]),n+=r[s].length,n+=r[s+1]?.length||0}return i}function GE(t){return!t||["plaintext","txt","text","plain"].includes(t)}function qE(t){return t==="ansi"||GE(t)}function KE(t){return t==="none"}function x4(t){return KE(t)}function T4(t,e){var r;if(!e)return t;t.properties||(t.properties={}),(r=t.properties).class||(r.class=[]),typeof t.properties.class=="string"&&(t.properties.class=t.properties.class.split(/\s+/g)),Array.isArray(t.properties.class)||(t.properties.class=[]);const n=Array.isArray(e)?e:e.split(/\s+/g);for(const i of n)i&&!t.properties.class.includes(i)&&t.properties.class.push(i);return t}function fge(t,e){let r=0;const n=[];for(const i of e)i>r&&n.push({...t,content:t.content.slice(r,i),offset:t.offset+r}),r=i;return r<t.content.length&&n.push({...t,content:t.content.slice(r),offset:t.offset+r}),n}function dge(t,e){const r=Array.from(e instanceof Set?e:new Set(e)).sort((n,i)=>n-i);return r.length?t.map(n=>n.flatMap(i=>{const s=r.filter(o=>i.offset<o&&o<i.offset+i.content.length).map(o=>o-i.offset).sort((o,a)=>o-a);return s.length?fge(i,s):i})):t}async function C4(t){return Promise.resolve(typeof t=="function"?t():t).then(e=>e.default||e)}function Fm(t,e){const r=typeof t=="string"?{}:{...t.colorReplacements},n=typeof t=="string"?t:t.name;for(const[i,s]of Object.entries(e?.colorReplacements||{}))typeof s=="string"?r[i]=s:i===n&&Object.assign(r,s);return r}function Ho(t,e){return t&&(e?.[t?.toLowerCase()]||t)}function k4(t){const e={};return t.color&&(e.color=t.color),t.bgColor&&(e["background-color"]=t.bgColor),t.fontStyle&&(t.fontStyle&es.Italic&&(e["font-style"]="italic"),t.fontStyle&es.Bold&&(e["font-weight"]="bold"),t.fontStyle&es.Underline&&(e["text-decoration"]="underline")),e}function pge(t){return typeof t=="string"?t:Object.entries(t).map(([e,r])=>`${e}:${r}`).join(";")}function mge(t){const e=o0(t,!0).map(([i])=>i);function r(i){if(i===t.length)return{line:e.length-1,character:e[e.length-1].length};let s=i,o=0;for(const a of e){if(s<a.length)break;s-=a.length,o++}return{line:o,character:s}}function n(i,s){let o=0;for(let a=0;a<i;a++)o+=e[a].length;return o+=s,o}return{lines:e,indexToPos:r,posToIndex:n}}class Pr extends Error{constructor(e){super(e),this.name="ShikiError"}}var gge=Object.defineProperty,_ge=(t,e,r)=>e in t?gge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,n2=(t,e,r)=>(_ge(t,typeof e!="symbol"?e+"":e,r),r);const A4=new WeakMap;function a0(t,e){A4.set(t,e)}function ph(t){return A4.get(t)}class mc{constructor(...e){if(n2(this,"_stacks",{}),n2(this,"lang"),e.length===2){const[r,n]=e;this.lang=n,this._stacks=r}else{const[r,n,i]=e;this.lang=n,this._stacks={[i]:r}}}get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,r){return new mc(Object.fromEntries(hge(r).map(n=>[n,jy])),e)}getInternalStack(e=this.theme){return this._stacks[e]}get scopes(){return i2(this._stacks[this.theme])}getScopes(e=this.theme){return i2(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.scopes}}}function i2(t){const e=[],r=new Set;function n(i){if(r.has(i))return;r.add(i);const s=i?.nameScopesList?.scopeName;s&&e.push(s),i.parent&&n(i.parent)}return n(t),e}function bge(t,e){if(!(t instanceof mc))throw new Pr("Invalid grammar state");return t.getInternalStack(e)}function yge(){const t=new WeakMap;function e(r){if(!t.has(r.meta)){let n=function(o){if(typeof o=="number"){if(o<0||o>r.source.length)throw new Pr(`Invalid decoration offset: ${o}. Code length: ${r.source.length}`);return{...i.indexToPos(o),offset:o}}else{const a=i.lines[o.line];if(a===void 0)throw new Pr(`Invalid decoration position ${JSON.stringify(o)}. Lines length: ${i.lines.length}`);if(o.character<0||o.character>a.length)throw new Pr(`Invalid decoration position ${JSON.stringify(o)}. Line ${o.line} length: ${a.length}`);return{...o,offset:i.posToIndex(o.line,o.character)}}};const i=mge(r.source),s=(r.options.decorations||[]).map(o=>({...o,start:n(o.start),end:n(o.end)}));vge(s),t.set(r.meta,{decorations:s,converter:i,source:r.source})}return t.get(r.meta)}return{name:"shiki:decorations",tokens(r){if(!this.options.decorations?.length)return;const i=e(this).decorations.flatMap(o=>[o.start.offset,o.end.offset]);return dge(r,i)},code(r){if(!this.options.decorations?.length)return;const n=e(this),i=Array.from(r.children).filter(u=>u.type==="element"&&u.tagName==="span");if(i.length!==n.converter.lines.length)throw new Pr(`Number of lines in code element (${i.length}) does not match the number of lines in the source (${n.converter.lines.length}). Failed to apply decorations.`);function s(u,h,f,d){const g=i[u];let _="",m=-1,p=-1;if(h===0&&(m=0),f===0&&(p=0),f===Number.POSITIVE_INFINITY&&(p=g.children.length),m===-1||p===-1)for(let y=0;y<g.children.length;y++)_+=R4(g.children[y]),m===-1&&_.length===h&&(m=y+1),p===-1&&_.length===f&&(p=y+1);if(m===-1)throw new Pr(`Failed to find start index for decoration ${JSON.stringify(d.start)}`);if(p===-1)throw new Pr(`Failed to find end index for decoration ${JSON.stringify(d.end)}`);const b=g.children.slice(m,p);if(!d.alwaysWrap&&b.length===g.children.length)a(g,d,"line");else if(!d.alwaysWrap&&b.length===1&&b[0].type==="element")a(b[0],d,"token");else{const y={type:"element",tagName:"span",properties:{},children:b};a(y,d,"wrapper"),g.children.splice(m,b.length,y)}}function o(u,h){i[u]=a(i[u],h,"line")}function a(u,h,f){const d=h.properties||{},g=h.transform||(_=>_);return u.tagName=h.tagName||"span",u.properties={...u.properties,...d,class:u.properties.class},h.properties?.class&&T4(u,h.properties.class),u=g(u,f)||u,u}const l=[],c=n.decorations.sort((u,h)=>h.start.offset-u.start.offset);for(const u of c){const{start:h,end:f}=u;if(h.line===f.line)s(h.line,h.character,f.character,u);else if(h.line<f.line){s(h.line,h.character,Number.POSITIVE_INFINITY,u);for(let d=h.line+1;d<f.line;d++)l.unshift(()=>o(d,u));s(f.line,0,f.character,u)}}l.forEach(u=>u())}}}function vge(t){for(let e=0;e<t.length;e++){const r=t[e];if(r.start.offset>r.end.offset)throw new Pr(`Invalid decoration range: ${JSON.stringify(r.start)} - ${JSON.stringify(r.end)}`);for(let n=e+1;n<t.length;n++){const i=t[n],s=r.start.offset<i.start.offset&&i.start.offset<r.end.offset,o=r.start.offset<i.end.offset&&i.end.offset<r.end.offset,a=i.start.offset<r.start.offset&&r.start.offset<i.end.offset,l=i.start.offset<r.end.offset&&r.end.offset<i.end.offset;if(s||o||a||l){if(o&&o||a&&l)continue;throw new Pr(`Decorations ${JSON.stringify(r.start)} and ${JSON.stringify(i.start)} intersect.`)}}}}function R4(t){return t.type==="text"?t.value:t.type==="element"?t.children.map(R4).join(""):""}const wge=[yge()];function Hm(t){return[...t.transformers||[],...wge]}var Uo=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],Q_={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",9:"strikethrough"};function Ege(t,e){const r=t.indexOf("\x1B[",e);if(r!==-1){const n=t.indexOf("m",r);return{sequence:t.substring(r+2,n).split(";"),startPosition:r,position:n+1}}return{position:t.length}}function s2(t,e){let r=1;const n=t[e+r++];let i;if(n==="2"){const s=[t[e+r++],t[e+r++],t[e+r]].map(o=>Number.parseInt(o));s.length===3&&!s.some(o=>Number.isNaN(o))&&(i={type:"rgb",rgb:s})}else if(n==="5"){const s=Number.parseInt(t[e+r]);Number.isNaN(s)||(i={type:"table",index:Number(s)})}return[r,i]}function Sge(t){const e=[];for(let r=0;r<t.length;r++){const n=t[r],i=Number.parseInt(n);if(!Number.isNaN(i))if(i===0)e.push({type:"resetAll"});else if(i<=9)Q_[i]&&e.push({type:"setDecoration",value:Q_[i]});else if(i<=29){const s=Q_[i-20];s&&e.push({type:"resetDecoration",value:s})}else if(i<=37)e.push({type:"setForegroundColor",value:{type:"named",name:Uo[i-30]}});else if(i===38){const[s,o]=s2(t,r);o&&e.push({type:"setForegroundColor",value:o}),r+=s}else if(i===39)e.push({type:"resetForegroundColor"});else if(i<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:Uo[i-40]}});else if(i===48){const[s,o]=s2(t,r);o&&e.push({type:"setBackgroundColor",value:o}),r+=s}else i===49?e.push({type:"resetBackgroundColor"}):i>=90&&i<=97?e.push({type:"setForegroundColor",value:{type:"named",name:Uo[i-90+8]}}):i>=100&&i<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:Uo[i-100+8]}})}return e}function xge(){let t=null,e=null,r=new Set;return{parse(n){const i=[];let s=0;do{const o=Ege(n,s),a=o.sequence?n.substring(s,o.startPosition):n.substring(s);if(a.length>0&&i.push({value:a,foreground:t,background:e,decorations:new Set(r)}),o.sequence){const l=Sge(o.sequence);for(const c of l)c.type==="resetAll"?(t=null,e=null,r.clear()):c.type==="resetForegroundColor"?t=null:c.type==="resetBackgroundColor"?e=null:c.type==="resetDecoration"&&r.delete(c.value);for(const c of l)c.type==="setForegroundColor"?t=c.value:c.type==="setBackgroundColor"?e=c.value:c.type==="setDecoration"&&r.add(c.value)}s=o.position}while(s<n.length);return i}}}var Tge={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function Cge(t=Tge){function e(a){return t[a]}function r(a){return`#${a.map(l=>Math.max(0,Math.min(l,255)).toString(16).padStart(2,"0")).join("")}`}let n;function i(){if(n)return n;n=[];for(let c=0;c<Uo.length;c++)n.push(e(Uo[c]));let a=[0,95,135,175,215,255];for(let c=0;c<6;c++)for(let u=0;u<6;u++)for(let h=0;h<6;h++)n.push(r([a[c],a[u],a[h]]));let l=8;for(let c=0;c<24;c++,l+=10)n.push(r([l,l,l]));return n}function s(a){return i()[a]}function o(a){switch(a.type){case"named":return e(a.name);case"rgb":return r(a.rgb);case"table":return s(a.index)}}return{value:o}}function kge(t,e,r){const n=Fm(t,r),i=o0(e),s=Cge(Object.fromEntries(Uo.map(a=>[a,t.colors?.[`terminal.ansi${a[0].toUpperCase()}${a.substring(1)}`]]))),o=xge();return i.map(a=>o.parse(a[0]).map(l=>{let c,u;l.decorations.has("reverse")?(c=l.background?s.value(l.background):t.bg,u=l.foreground?s.value(l.foreground):t.fg):(c=l.foreground?s.value(l.foreground):t.fg,u=l.background?s.value(l.background):void 0),c=Ho(c,n),u=Ho(u,n),l.decorations.has("dim")&&(c=Age(c));let h=es.None;return l.decorations.has("bold")&&(h|=es.Bold),l.decorations.has("italic")&&(h|=es.Italic),l.decorations.has("underline")&&(h|=es.Underline),{content:l.value,offset:a[1],color:c,bgColor:u,fontStyle:h}}))}function Age(t){const e=t.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/);if(e)if(e[3]){const n=Math.round(Number.parseInt(e[3],16)/2).toString(16).padStart(2,"0");return`#${e[1]}${e[2]}${n}`}else return e[2]?`#${e[1]}${e[2]}80`:`#${Array.from(e[1]).map(n=>`${n}${n}`).join("")}80`;const r=t.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return r?`var(${r[1]}-dim)`:t}function YE(t,e,r={}){const{lang:n="text",theme:i=t.getLoadedThemes()[0]}=r;if(GE(n)||KE(i))return o0(e).map(l=>[{content:l[0],offset:l[1]}]);const{theme:s,colorMap:o}=t.setTheme(i);if(n==="ansi")return kge(s,e,r);const a=t.getLanguage(n);if(r.grammarState){if(r.grammarState.lang!==a.name)throw new ss(`Grammar state language "${r.grammarState.lang}" does not match highlight language "${a.name}"`);if(!r.grammarState.themes.includes(s.name))throw new ss(`Grammar state themes "${r.grammarState.themes}" do not contain highlight theme "${s.name}"`)}return Pge(e,a,s,o,r)}function Rge(...t){if(t.length===2)return ph(t[1]);const[e,r,n={}]=t,{lang:i="text",theme:s=e.getLoadedThemes()[0]}=n;if(GE(i)||KE(s))throw new ss("Plain language does not have grammar state");if(i==="ansi")throw new ss("ANSI language does not have grammar state");const{theme:o,colorMap:a}=e.setTheme(s),l=e.getLanguage(i);return new mc(Um(r,l,o,a,n).stateStack,l.name,o.name)}function Pge(t,e,r,n,i){const s=Um(t,e,r,n,i),o=new mc(Um(t,e,r,n,i).stateStack,e.name,r.name);return a0(s.tokens,o),s.tokens}function Um(t,e,r,n,i){const s=Fm(r,i),{tokenizeMaxLineLength:o=0,tokenizeTimeLimit:a=500}=i,l=o0(t);let c=i.grammarState?bge(i.grammarState,r.name)??jy:i.grammarContextCode!=null?Um(i.grammarContextCode,e,r,n,{...i,grammarState:void 0,grammarContextCode:void 0}).stateStack:jy,u=[];const h=[];for(let f=0,d=l.length;f<d;f++){const[g,_]=l[f];if(g===""){u=[],h.push([]);continue}if(o>0&&g.length>=o){u=[],h.push([{content:g,offset:_,color:"",fontStyle:0}]);continue}let m,p,b;i.includeExplanation&&(m=e.tokenizeLine(g,c),p=m.tokens,b=0);const y=e.tokenizeLine2(g,c,a),v=y.tokens.length/2;for(let w=0;w<v;w++){const S=y.tokens[2*w],x=w+1<v?y.tokens[2*w+2]:g.length;if(S===x)continue;const E=y.tokens[2*w+1],T=Ho(n[$l.getForeground(E)],s),k=$l.getFontStyle(E),B={content:g.substring(S,x),offset:_+S,color:T,fontStyle:k};if(i.includeExplanation){const P=[];if(i.includeExplanation!=="scopeName")for(const A of r.settings){let $;switch(typeof A.scope){case"string":$=A.scope.split(/,/).map(te=>te.trim());break;case"object":$=A.scope;break;default:continue}P.push({settings:A,selectors:$.map(te=>te.split(/ /))})}B.explanation=[];let O=0;for(;S+O<x;){const A=p[b],$=g.substring(A.startIndex,A.endIndex);O+=$.length,B.explanation.push({content:$,scopes:i.includeExplanation==="scopeName"?Ige(A.scopes):Dge(P,A.scopes)}),b+=1}}u.push(B)}h.push(u),u=[],c=y.ruleStack}return{tokens:h,stateStack:c}}function Ige(t){return t.map(e=>({scopeName:e}))}function Dge(t,e){const r=[];for(let n=0,i=e.length;n<i;n++){const s=e[n];r[n]={scopeName:s,themeMatches:Lge(t,s,e.slice(0,n))}}return r}function o2(t,e){return t===e||e.substring(0,t.length)===t&&e[t.length]==="."}function Oge(t,e,r){if(!o2(t[t.length-1],e))return!1;let n=t.length-2,i=r.length-1;for(;n>=0&&i>=0;)o2(t[n],r[i])&&(n-=1),i-=1;return n===-1}function Lge(t,e,r){const n=[];for(const{selectors:i,settings:s}of t)for(const o of i)if(Oge(o,e,r)){n.push(s);break}return n}function P4(t,e,r){const n=Object.entries(r.themes).filter(l=>l[1]).map(l=>({color:l[0],theme:l[1]})),i=n.map(l=>{const c=YE(t,e,{...r,theme:l.theme}),u=ph(c),h=typeof l.theme=="string"?l.theme:l.theme.name;return{tokens:c,state:u,theme:h}}),s=Nge(...i.map(l=>l.tokens)),o=s[0].map((l,c)=>l.map((u,h)=>{const f={content:u.content,variants:{},offset:u.offset};return"includeExplanation"in r&&r.includeExplanation&&(f.explanation=u.explanation),s.forEach((d,g)=>{const{content:_,explanation:m,offset:p,...b}=d[c][h];f.variants[n[g].color]=b}),f})),a=i[0].state?new mc(Object.fromEntries(i.map(l=>[l.theme,l.state?.getInternalStack(l.theme)])),i[0].state.lang):void 0;return a&&a0(o,a),o}function Nge(...t){const e=t.map(()=>[]),r=t.length;for(let n=0;n<t[0].length;n++){const i=t.map(l=>l[n]),s=e.map(()=>[]);e.forEach((l,c)=>l.push(s[c]));const o=i.map(()=>0),a=i.map(l=>l[0]);for(;a.every(l=>l);){const l=Math.min(...a.map(c=>c.content.length));for(let c=0;c<r;c++){const u=a[c];u.content.length===l?(s[c].push(u),o[c]+=1,a[c]=i[c][o[c]]):(s[c].push({...u,content:u.content.slice(0,l)}),a[c]={...u,content:u.content.slice(l),offset:u.offset+l})}}}return e}function jm(t,e,r){let n,i,s,o,a,l;if("themes"in r){const{defaultColor:c="light",cssVariablePrefix:u="--shiki-"}=r,h=Object.entries(r.themes).filter(m=>m[1]).map(m=>({color:m[0],theme:m[1]})).sort((m,p)=>m.color===c?-1:p.color===c?1:0);if(h.length===0)throw new ss("`themes` option must not be empty");const f=P4(t,e,r);if(l=ph(f),c&&!h.find(m=>m.color===c))throw new ss(`\`themes\` option must contain the defaultColor key \`${c}\``);const d=h.map(m=>t.getTheme(m.theme)),g=h.map(m=>m.color);s=f.map(m=>m.map(p=>Mge(p,g,u,c))),l&&a0(s,l);const _=h.map(m=>Fm(m.theme,r));i=h.map((m,p)=>(p===0&&c?"":`${u+m.color}:`)+(Ho(d[p].fg,_[p])||"inherit")).join(";"),n=h.map((m,p)=>(p===0&&c?"":`${u+m.color}-bg:`)+(Ho(d[p].bg,_[p])||"inherit")).join(";"),o=`shiki-themes ${d.map(m=>m.name).join(" ")}`,a=c?void 0:[i,n].join(";")}else if("theme"in r){const c=Fm(r.theme,r);s=YE(t,e,r);const u=t.getTheme(r.theme);n=Ho(u.bg,c),i=Ho(u.fg,c),o=u.name,l=ph(s)}else throw new ss("Invalid options, either `theme` or `themes` must be provided");return{tokens:s,fg:i,bg:n,themeName:o,rootStyle:a,grammarState:l}}function Mge(t,e,r,n){const i={content:t.content,explanation:t.explanation,offset:t.offset},s=e.map(l=>k4(t.variants[l])),o=new Set(s.flatMap(l=>Object.keys(l))),a={};return s.forEach((l,c)=>{for(const u of o){const h=l[u]||"inherit";if(c===0&&n)a[u]=h;else{const f=u==="color"?"":u==="background-color"?"-bg":`-${u}`,d=r+e[c]+(u==="color"?"":f);a[d]=h}}}),i.htmlStyle=a,i}function $m(t,e,r,n={meta:{},options:r,codeToHast:(i,s)=>$m(t,i,s),codeToTokens:(i,s)=>jm(t,i,s)}){let i=e;for(const d of Hm(r))i=d.preprocess?.call(n,i,r)||i;let{tokens:s,fg:o,bg:a,themeName:l,rootStyle:c,grammarState:u}=jm(t,i,r);const{mergeWhitespaces:h=!0}=r;h===!0?s=Fge(s):h==="never"&&(s=Hge(s));const f={...n,get source(){return i}};for(const d of Hm(r))s=d.tokens?.call(f,s)||s;return Bge(s,{...r,fg:o,bg:a,themeName:l,rootStyle:c},f,u)}function Bge(t,e,r,n=ph(t)){const i=Hm(e),s=[],o={type:"root",children:[]},{structure:a="classic",tabindex:l="0"}=e;let c={type:"element",tagName:"pre",properties:{class:`shiki ${e.themeName||""}`,style:e.rootStyle||`background-color:${e.bg};color:${e.fg}`,...l!==!1&&l!=null?{tabindex:l.toString()}:{},...Object.fromEntries(Array.from(Object.entries(e.meta||{})).filter(([g])=>!g.startsWith("_")))},children:[]},u={type:"element",tagName:"code",properties:{},children:s};const h=[],f={...r,structure:a,addClassToHast:T4,get source(){return r.source},get tokens(){return t},get options(){return e},get root(){return o},get pre(){return c},get code(){return u},get lines(){return h}};if(t.forEach((g,_)=>{_&&(a==="inline"?o.children.push({type:"element",tagName:"br",properties:{},children:[]}):a==="classic"&&s.push({type:"text",value:`
`}));let m={type:"element",tagName:"span",properties:{class:"line"},children:[]},p=0;for(const b of g){let y={type:"element",tagName:"span",properties:{...b.htmlAttrs},children:[{type:"text",value:b.content}]};b.htmlStyle;const v=pge(b.htmlStyle||k4(b));v&&(y.properties.style=v);for(const w of i)y=w?.span?.call(f,y,_+1,p,m,b)||y;a==="inline"?o.children.push(y):a==="classic"&&m.children.push(y),p+=b.content.length}if(a==="classic"){for(const b of i)m=b?.line?.call(f,m,_+1)||m;h.push(m),s.push(m)}}),a==="classic"){for(const g of i)u=g?.code?.call(f,u)||u;c.children.push(u);for(const g of i)c=g?.pre?.call(f,c)||c;o.children.push(c)}let d=o;for(const g of i)d=g?.root?.call(f,d)||d;return n&&a0(d,n),d}function Fge(t){return t.map(e=>{const r=[];let n="",i=0;return e.forEach((s,o)=>{const l=!(s.fontStyle&&s.fontStyle&es.Underline);l&&s.content.match(/^\s+$/)&&e[o+1]?(i||(i=s.offset),n+=s.content):n?(l?r.push({...s,offset:i,content:n+s.content}):r.push({content:n,offset:i},s),i=0,n=""):r.push(s)}),r})}function Hge(t){return t.map(e=>e.flatMap(r=>{if(r.content.match(/^\s+$/))return r;const n=r.content.match(/^(\s*)(.*?)(\s*)$/);if(!n)return r;const[,i,s,o]=n;if(!i&&!o)return r;const a=[{...r,offset:r.offset+i.length,content:s}];return i&&a.unshift({content:i,offset:r.offset}),o&&a.push({content:o,offset:r.offset+i.length+s.length}),a}))}function Uge(t,e,r){const n={meta:{},options:r,codeToHast:(s,o)=>$m(t,s,o),codeToTokens:(s,o)=>jm(t,s,o)};let i=lge($m(t,e,r,n));for(const s of Hm(r))i=s.postprocess?.call(n,i,r)||i;return i}const a2={light:"#333333",dark:"#bbbbbb"},l2={light:"#fffffe",dark:"#1e1e1e"},c2="__shiki_resolved";function XE(t){if(t?.[c2])return t;const e={...t};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||(e.type="dark"),e.colorReplacements={...e.colorReplacements},e.settings||(e.settings=[]);let{bg:r,fg:n}=e;if(!r||!n){const a=e.settings?e.settings.find(l=>!l.name&&!l.scope):void 0;a?.settings?.foreground&&(n=a.settings.foreground),a?.settings?.background&&(r=a.settings.background),!n&&e?.colors?.["editor.foreground"]&&(n=e.colors["editor.foreground"]),!r&&e?.colors?.["editor.background"]&&(r=e.colors["editor.background"]),n||(n=e.type==="light"?a2.light:a2.dark),r||(r=e.type==="light"?l2.light:l2.dark),e.fg=n,e.bg=r}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let i=0;const s=new Map;function o(a){if(s.has(a))return s.get(a);i+=1;const l=`#${i.toString(16).padStart(8,"0").toLowerCase()}`;return e.colorReplacements?.[`#${l}`]?o(a):(s.set(a,l),l)}e.settings=e.settings.map(a=>{const l=a.settings?.foreground&&!a.settings.foreground.startsWith("#"),c=a.settings?.background&&!a.settings.background.startsWith("#");if(!l&&!c)return a;const u={...a,settings:{...a.settings}};if(l){const h=o(a.settings.foreground);e.colorReplacements[h]=a.settings.foreground,u.settings.foreground=h}if(c){const h=o(a.settings.background);e.colorReplacements[h]=a.settings.background,u.settings.background=h}return u});for(const a of Object.keys(e.colors||{}))if((a==="editor.foreground"||a==="editor.background"||a.startsWith("terminal.ansi"))&&!e.colors[a]?.startsWith("#")){const l=o(e.colors[a]);e.colorReplacements[l]=e.colors[a],e.colors[a]=l}return Object.defineProperty(e,c2,{enumerable:!1,writable:!1,value:!0}),e}async function I4(t){return Array.from(new Set((await Promise.all(t.filter(e=>!qE(e)).map(async e=>await C4(e).then(r=>Array.isArray(r)?r:[r])))).flat()))}async function D4(t){return(await Promise.all(t.map(async r=>x4(r)?null:XE(await C4(r))))).filter(r=>!!r)}var jge=Object.defineProperty,$ge=(t,e,r)=>e in t?jge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,vo=(t,e,r)=>($ge(t,typeof e!="symbol"?e+"":e,r),r);class zge extends lme{constructor(e,r,n,i={}){super(e),this._resolver=e,this._themes=r,this._langs=n,this._alias=i,vo(this,"_resolvedThemes",new Map),vo(this,"_resolvedGrammars",new Map),vo(this,"_langMap",new Map),vo(this,"_langGraph",new Map),vo(this,"_textmateThemeCache",new WeakMap),vo(this,"_loadedThemesCache",null),vo(this,"_loadedLanguagesCache",null),this._themes.map(s=>this.loadTheme(s)),this.loadLanguages(this._langs)}getTheme(e){return typeof e=="string"?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const r=XE(e);return r.name&&(this._resolvedThemes.set(r.name,r),this._loadedThemesCache=null),r}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let r=this._textmateThemeCache.get(e);r||(r=Om.createFromRawTheme(e),this._textmateThemeCache.set(e,r)),this._syncRegistry.setTheme(r)}getGrammar(e){if(this._alias[e]){const r=new Set([e]);for(;this._alias[e];){if(e=this._alias[e],r.has(e))throw new Pr(`Circular alias \`${Array.from(r).join(" -> ")} -> ${e}\``);r.add(e)}}return this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const r=new Set([...this._langMap.values()].filter(s=>s.embeddedLangsLazy?.includes(e.name)));this._resolver.addLanguage(e);const n={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const i=this.loadGrammarWithConfiguration(e.scopeName,1,n);if(i.name=e.name,this._resolvedGrammars.set(e.name,i),e.aliases&&e.aliases.forEach(s=>{this._alias[s]=e.name}),this._loadedLanguagesCache=null,r.size)for(const s of r)this._resolvedGrammars.delete(s.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(s.scopeName),this._syncRegistry?._grammars?.delete(s.scopeName),this.loadLanguage(this._langMap.get(s.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const i of e)this.resolveEmbeddedLanguages(i);const r=Array.from(this._langGraph.entries()),n=r.filter(([i,s])=>!s);if(n.length){const i=r.filter(([s,o])=>o&&o.embeddedLangs?.some(a=>n.map(([l])=>l).includes(a))).filter(s=>!n.includes(s));throw new Pr(`Missing languages ${n.map(([s])=>`\`${s}\``).join(", ")}, required by ${i.map(([s])=>`\`${s}\``).join(", ")}`)}for(const[i,s]of r)this._resolver.addLanguage(s);for(const[i,s]of r)this.loadLanguage(s)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){if(this._langMap.set(e.name,e),this._langGraph.set(e.name,e),e.embeddedLangs)for(const r of e.embeddedLangs)this._langGraph.set(r,this._langMap.get(r))}}var Vge=Object.defineProperty,Wge=(t,e,r)=>e in t?Vge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Bd=(t,e,r)=>(Wge(t,typeof e!="symbol"?e+"":e,r),r);class Gge{constructor(e,r){Bd(this,"_langs",new Map),Bd(this,"_scopeToLang",new Map),Bd(this,"_injections",new Map),Bd(this,"_onigLib"),this._onigLib={createOnigScanner:n=>e.createScanner(n),createOnigString:n=>e.createString(n)},r.forEach(n=>this.addLanguage(n))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(r=>{this._langs.set(r,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(r=>{this._injections.get(r)||this._injections.set(r,[]),this._injections.get(r).push(e.scopeName)})}getInjections(e){const r=e.split(".");let n=[];for(let i=1;i<=r.length;i++){const s=r.slice(0,i).join(".");n=[...n,...this._injections.get(s)||[]]}return n}}let zc=0;function qge(t){zc+=1,t.warnings!==!1&&zc>=10&&zc%10===0&&console.warn(`[Shiki] ${zc} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;if(!t.engine)throw new Pr("`engine` option is required for synchronous mode");const r=(t.langs||[]).flat(1),n=(t.themes||[]).flat(1).map(XE),i=new Gge(t.engine,r),s=new zge(i,n,r,t.langAlias);let o;function a(b){m();const y=s.getGrammar(typeof b=="string"?b:b.name);if(!y)throw new Pr(`Language \`${b}\` not found, you may need to load it first`);return y}function l(b){if(b==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};m();const y=s.getTheme(b);if(!y)throw new Pr(`Theme \`${b}\` not found, you may need to load it first`);return y}function c(b){m();const y=l(b);o!==b&&(s.setTheme(y),o=b);const v=s.getColorMap();return{theme:y,colorMap:v}}function u(){return m(),s.getLoadedThemes()}function h(){return m(),s.getLoadedLanguages()}function f(...b){m(),s.loadLanguages(b.flat(1))}async function d(...b){return f(await I4(b))}function g(...b){m();for(const y of b.flat(1))s.loadTheme(y)}async function _(...b){return m(),g(await D4(b))}function m(){if(e)throw new Pr("Shiki instance has been disposed")}function p(){e||(e=!0,s.dispose(),zc-=1)}return{setTheme:c,getTheme:l,getLanguage:a,getLoadedThemes:u,getLoadedLanguages:h,loadLanguage:d,loadLanguageSync:f,loadTheme:_,loadThemeSync:g,dispose:p,[Symbol.dispose]:p}}async function Kge(t={}){t.loadWasm;const[e,r,n]=await Promise.all([D4(t.themes||[]),I4(t.langs||[]),t.engine||n4(t.loadWasm||Epe())]);return qge({...t,loadWasm:void 0,themes:e,langs:r,engine:n})}async function Yge(t={}){const e=await Kge(t);return{getLastGrammarState:(...r)=>Rge(e,...r),codeToTokensBase:(r,n)=>YE(e,r,n),codeToTokensWithThemes:(r,n)=>P4(e,r,n),codeToTokens:(r,n)=>jm(e,r,n),codeToHast:(r,n)=>$m(e,r,n),codeToHtml:(r,n)=>Uge(e,r,n),...e,getInternalContext:()=>e}}function Xge(t,e,r){let n,i,s;{const a=t;n=a.langs,i=a.themes,s=a.engine}async function o(a){function l(d){if(typeof d=="string"){if(qE(d))return[];const g=n[d];if(!g)throw new ss(`Language \`${d}\` is not included in this bundle. You may want to load it from external source.`);return g}return d}function c(d){if(x4(d))return"none";if(typeof d=="string"){const g=i[d];if(!g)throw new ss(`Theme \`${d}\` is not included in this bundle. You may want to load it from external source.`);return g}return d}const u=(a.themes??[]).map(d=>c(d)),h=(a.langs??[]).map(d=>l(d)),f=await Yge({engine:a.engine??s(),...a,themes:u,langs:h});return{...f,loadLanguage(...d){return f.loadLanguage(...d.map(l))},loadTheme(...d){return f.loadTheme(...d.map(c))}}}return o}function Qge(t){let e;async function r(n={}){if(e){const i=await e;return await Promise.all([i.loadTheme(...n.themes||[]),i.loadLanguage(...n.langs||[])]),i}else return e=t({...n,themes:n.themes||[],langs:n.langs||[]}),e}return r}function Zge(t){const e=Qge(t);return{getSingletonHighlighter(r){return e(r)},async codeToHtml(r,n){return(await e({langs:[n.lang],themes:"theme"in n?[n.theme]:Object.values(n.themes)})).codeToHtml(r,n)},async codeToHast(r,n){return(await e({langs:[n.lang],themes:"theme"in n?[n.theme]:Object.values(n.themes)})).codeToHast(r,n)},async codeToTokens(r,n){return(await e({langs:[n.lang],themes:"theme"in n?[n.theme]:Object.values(n.themes)})).codeToTokens(r,n)},async codeToTokensBase(r,n){return(await e({langs:[n.lang],themes:[n.theme]})).codeToTokensBase(r,n)},async codeToTokensWithThemes(r,n){return(await e({langs:[n.lang],themes:Object.values(n.themes).filter(Boolean)})).codeToTokensWithThemes(r,n)},async getLastGrammarState(r,n){return(await e({langs:[n.lang],themes:[n.theme]})).getLastGrammarState(r,n)}}}const O4=Xge({langs:r4,themes:ope,engine:()=>n4(Y(()=>import("./wasm-CG6Dc4jp.js"),[]))}),{codeToHtml:Jge,codeToHast:nxe,codeToTokens:ixe,codeToTokensBase:sxe,codeToTokensWithThemes:oxe,getSingletonHighlighter:axe,getLastGrammarState:lxe}=Zge(O4),e0e={langs:["shell"],themes:["light-plus","dark-plus"]},t0e=await O4(e0e),r0e=D.memo(({messageId:t})=>{const e=D.useRef(!1),[r,n]=D.useState(!1),[i,s]=D.useState(!1),a=St(Ve.artifacts)[t],l=St(dv(a.runner.actions,u=>Object.values(u))),c=()=>{e.current=!0,n(!r)};return D.useEffect(()=>{if(l.length&&!r&&!e.current&&n(!0),l.length!==0&&a.type==="bundled"){const u=!l.find(h=>h.status!=="complete");i!==u&&s(u)}},[l]),R.jsxs("div",{className:"artifact border border-bolt-elements-borderColor flex flex-col overflow-hidden rounded-lg w-full transition-border duration-150",children:[R.jsxs("div",{className:"flex",children:[R.jsxs("button",{className:"flex items-stretch bg-bolt-elements-artifacts-background hover:bg-bolt-elements-artifacts-backgroundHover w-full overflow-hidden",onClick:()=>{const u=Ve.showWorkbench.get();Ve.showWorkbench.set(!u)},children:[a.type=="bundled"&&R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"p-4",children:i?R.jsx("div",{className:"i-ph:files-light",style:{fontSize:"2rem"}}):R.jsx("div",{className:"i-svg-spinners:90-ring-with-bg",style:{fontSize:"2rem"}})}),R.jsx("div",{className:"bg-bolt-elements-artifacts-borderColor w-[1px]"})]}),R.jsxs("div",{className:"px-5 p-3.5 w-full text-left",children:[R.jsx("div",{className:"w-full text-bolt-elements-textPrimary font-medium leading-5 text-sm",children:a?.title}),R.jsx("div",{className:"w-full w-full text-bolt-elements-textSecondary text-xs mt-0.5",children:"Click to open Workbench"})]})]}),R.jsx("div",{className:"bg-bolt-elements-artifacts-borderColor w-[1px]"}),R.jsx(Bp,{children:l.length&&a.type!=="bundled"&&R.jsx(Jr.button,{initial:{width:0},animate:{width:"auto"},exit:{width:0},transition:{duration:.15,ease:On},className:"bg-bolt-elements-artifacts-background hover:bg-bolt-elements-artifacts-backgroundHover",onClick:c,children:R.jsx("div",{className:"p-4",children:R.jsx("div",{className:r?"i-ph:caret-up-bold":"i-ph:caret-down-bold"})})})})]}),R.jsx(Bp,{children:a.type!=="bundled"&&r&&l.length>0&&R.jsxs(Jr.div,{className:"actions",initial:{height:0},animate:{height:"auto"},exit:{height:"0px"},transition:{duration:.15},children:[R.jsx("div",{className:"bg-bolt-elements-artifacts-borderColor h-[1px]"}),R.jsx("div",{className:"p-5 text-left bg-bolt-elements-actions-background",children:R.jsx(o0e,{actions:l})})]})})]})});function n0e({classsName:t,code:e}){return R.jsx("div",{className:je("text-xs",t),dangerouslySetInnerHTML:{__html:t0e.codeToHtml(e,{lang:"shell",theme:"dark-plus"})}})}const i0e={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};function s0e(t){Ve.currentView.get()!=="code"&&Ve.currentView.set("code"),Ve.setSelectedFile(`${Vh}/${t}`)}const o0e=D.memo(({actions:t})=>R.jsx(Jr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:R.jsx("ul",{className:"list-none space-y-2.5",children:t.map((e,r)=>{const{status:n,type:i,content:s}=e,o=r===t.length-1;return R.jsxs(Jr.li,{variants:i0e,initial:"hidden",animate:"visible",transition:{duration:.2,ease:On},children:[R.jsxs("div",{className:"flex items-center gap-1.5 text-sm",children:[R.jsx("div",{className:je("text-lg",a0e(e.status)),children:n==="running"?R.jsx(R.Fragment,{children:i!=="start"?R.jsx("div",{className:"i-svg-spinners:90-ring-with-bg"}):R.jsx("div",{className:"i-ph:terminal-window-duotone"})}):n==="pending"?R.jsx("div",{className:"i-ph:circle-duotone"}):n==="complete"?R.jsx("div",{className:"i-ph:check"}):n==="failed"||n==="aborted"?R.jsx("div",{className:"i-ph:x"}):null}),i==="file"?R.jsxs("div",{children:["Create"," ",R.jsx("code",{className:"bg-bolt-elements-artifacts-inlineCode-background text-bolt-elements-artifacts-inlineCode-text px-1.5 py-1 rounded-md text-bolt-elements-item-contentAccent hover:underline cursor-pointer",onClick:()=>s0e(e.filePath),children:e.filePath})]}):i==="shell"?R.jsx("div",{className:"flex items-center w-full min-h-[28px]",children:R.jsx("span",{className:"flex-1",children:"Run command"})}):i==="start"?R.jsx("a",{onClick:a=>{a.preventDefault(),Ve.currentView.set("preview")},className:"flex items-center w-full min-h-[28px]",children:R.jsx("span",{className:"flex-1",children:"Start Application"})}):null]}),(i==="shell"||i==="start")&&R.jsx(n0e,{classsName:je("mt-1",{"mb-3.5":!o}),code:s})]},r)})})}));function a0e(t){switch(t){case"pending":return"text-bolt-elements-textTertiary";case"running":return"text-bolt-elements-loader-progress";case"complete":return"text-bolt-elements-icon-success";case"aborted":return"text-bolt-elements-textSecondary";case"failed":return"text-bolt-elements-icon-error";default:return}}const l0e="C",c0e={CopyButtonContainer:l0e},u2=Fr("CodeBlock"),u0e=D.memo(({className:t,code:e,language:r="plaintext",theme:n="dark-plus",disableCopy:i=!1})=>{const[s,o]=D.useState(void 0),[a,l]=D.useState(!1),c=()=>{a||(navigator.clipboard.writeText(e),l(!0),setTimeout(()=>{l(!1)},2e3))};return D.useEffect(()=>{r&&!qE(r)&&!(r in r4)&&u2.warn(`Unsupported language '${r}'`),u2.trace(`Language = ${r}`),(async()=>{o(await Jge(e,{lang:r,theme:n}))})()},[e]),R.jsxs("div",{className:je("relative group text-left",t),children:[R.jsx("div",{className:je(c0e.CopyButtonContainer,"bg-white absolute top-[10px] right-[10px] rounded-md z-10 text-lg flex items-center justify-center opacity-0 group-hover:opacity-100",{"rounded-l-0 opacity-100":a}),children:!i&&R.jsx("button",{className:je("flex items-center bg-transparent p-[6px] justify-center before:bg-white before:rounded-l-md before:text-gray-500 before:border-r before:border-gray-300",{"before:opacity-0":!a,"before:opacity-100":a}),title:"Copy Code",onClick:()=>c(),children:R.jsx("div",{className:"i-ph:clipboard-text-duotone"})})}),R.jsx("div",{dangerouslySetInnerHTML:{__html:s??""}})]})}),h0e="B",f0e={MarkdownContent:h0e},h2=Fr("MarkdownComponent"),zy=D.memo(({children:t,html:e=!1,limitedMarkdown:r=!1})=>{h2.trace("Render");const n=D.useMemo(()=>({div:({className:i,children:s,node:o,...a})=>{if(i?.includes("__boltArtifact__")){const l=o?.properties.dataMessageId;return l||h2.error(`Invalid message id ${l}`),R.jsx(r0e,{messageId:l})}return R.jsx("div",{className:i,...a,children:s})},pre:i=>{const{children:s,node:o,...a}=i,[l]=o?.children??[];if(l&&l.type==="element"&&l.tagName==="code"&&l.children[0].type==="text"){const{className:c,...u}=l.properties,[,h="plaintext"]=/language-(\w+)/.exec(String(c)||"")??[];return R.jsx(u0e,{code:l.children[0].value,language:h,...u})}return R.jsx("pre",{...a,children:s})}}),[]);return R.jsx(vle,{allowedElements:e4,className:f0e.MarkdownContent,components:n,remarkPlugins:epe(r),rehypePlugins:tpe(e),children:d0e(t)})}),d0e=t=>{if(!t||!t.includes("__boltArtifact__"))return t;const e=t.split(`
`),r=e.findIndex(n=>n.includes("__boltArtifact__"));return r===-1?t:(r>0&&e[r-1]?.trim().match(/^```\w*$/)&&(e[r-1]=""),r<e.length-1&&e[r+1]?.trim().match(/^```$/)&&(e[r+1]=""),e.join(`
`))},p0e=D.memo(({content:t})=>R.jsx("div",{className:"overflow-hidden w-full",children:R.jsx(zy,{html:!0,children:t})}));function m0e({content:t}){if(Array.isArray(t)){const r=t.find(s=>s.type==="text"),n=f2(r?.text||""),i=t.filter(s=>s.type==="image"&&s.image);return R.jsx("div",{className:"overflow-hidden pt-[4px]",children:R.jsxs("div",{className:"flex items-start gap-4",children:[R.jsx("div",{className:"flex-1",children:R.jsx(zy,{limitedMarkdown:!0,children:n})}),i.length>0&&R.jsx("div",{className:"flex-shrink-0 w-[160px]",children:i.map((s,o)=>R.jsx("div",{className:"relative",children:R.jsx("img",{src:s.image,alt:`Uploaded image ${o+1}`,className:"w-full h-[160px] rounded-lg object-cover border border-bolt-elements-borderColor"})},o))})]})})}const e=f2(t);return R.jsx("div",{className:"overflow-hidden pt-[4px]",children:R.jsx(zy,{limitedMarkdown:!0,children:e})})}function f2(t){return t.replace(Nz,"").replace(Mz,"")}const g0e=Qe.forwardRef((t,e)=>{const{id:r,isStreaming:n=!1,messages:i=[]}=t,s=FF(),o=l=>{const c=new URLSearchParams(s.search);c.set("rewindTo",l),window.location.search=c.toString()},a=async l=>{try{if(!gt||!Fs.get()){Be.error("Chat persistence is not available");return}const c=await x$(gt,Fs.get(),l);window.location.href=`/chat/${c}`}catch(c){Be.error("Failed to fork chat: "+c.message)}};return R.jsxs("div",{id:r,ref:e,className:t.className,children:[i.length>0?i.map((l,c)=>{const{role:u,content:h,id:f}=l,d=u==="user",g=c===0,_=c===i.length-1;return R.jsxs("div",{className:je("flex gap-4 p-6 w-full rounded-[calc(0.75rem-1px)]",{"bg-bolt-elements-messages-background":d||!n||n&&!_,"bg-gradient-to-b from-bolt-elements-messages-background from-30% to-transparent":n&&_,"mt-4":!g}),children:[d&&R.jsx("div",{className:"flex items-center justify-center w-[34px] h-[34px] overflow-hidden bg-white text-gray-600 rounded-full shrink-0 self-start",children:R.jsx("div",{className:"i-ph:user-fill text-xl"})}),R.jsx("div",{className:"grid grid-col-1 w-full",children:d?R.jsx(m0e,{content:h}):R.jsx(p0e,{content:h})}),!d&&R.jsxs("div",{className:"flex gap-2 flex-col lg:flex-row",children:[R.jsx(ra,{tooltip:"Revert to this message",children:f&&R.jsx("button",{onClick:()=>o(f),className:je("i-ph:arrow-u-up-left","text-xl text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary transition-colors")},"i-ph:arrow-u-up-left")}),R.jsx(ra,{tooltip:"Fork chat from this message",children:R.jsx("button",{onClick:()=>a(f),className:je("i-ph:git-fork","text-xl text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary transition-colors")},"i-ph:git-fork")})]})]},c)}):null,n&&R.jsx("div",{className:"text-center w-full text-bolt-elements-textSecondary i-svg-spinners:3-dots-fade text-4xl mt-4"})]})}),_0e=va(.4,0,.2,1),b0e=({show:t,isStreaming:e,disabled:r,onClick:n})=>R.jsx(Bp,{children:t?R.jsx(Jr.button,{className:"absolute flex justify-center items-center top-[18px] right-[22px] p-1 bg-accent-500 hover:brightness-94 color-white rounded-md w-[34px] h-[34px] transition-theme disabled:opacity-50 disabled:cursor-not-allowed",transition:{ease:_0e,duration:.17},initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},disabled:r,onClick:i=>{i.preventDefault(),r||n?.(i)},children:R.jsx("div",{className:"text-lg",children:e?R.jsx("div",{className:"i-ph:stop-circle-bold"}):R.jsx("div",{className:"i-ph:arrow-right"})})}):null}),y0e=({provider:t,apiKey:e,setApiKey:r})=>{const[n,i]=D.useState(!1),[s,o]=D.useState(e),a=()=>{r(s),i(!1)};return R.jsxs("div",{className:"flex items-start sm:items-center mt-2 mb-2 flex-col sm:flex-row",children:[R.jsxs("div",{children:[R.jsxs("span",{className:"text-sm text-bolt-elements-textSecondary",children:[t?.name," API Key:"]}),!n&&R.jsxs("div",{className:"flex items-center mb-4",children:[R.jsx("span",{className:"flex-1 text-xs text-bolt-elements-textPrimary mr-2",children:e?"":"Not set (will still work if set in .env file)"}),R.jsx(qt,{onClick:()=>i(!0),title:"Edit API Key",children:R.jsx("div",{className:"i-ph:pencil-simple"})})]})]}),n?R.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[R.jsx("input",{type:"password",value:s,placeholder:"Your API Key",onChange:l=>o(l.target.value),className:"flex-1 px-2 py-1 text-xs lg:text-sm rounded border border-bolt-elements-borderColor bg-bolt-elements-prompt-background text-bolt-elements-textPrimary focus:outline-none focus:ring-2 focus:ring-bolt-elements-focus"}),R.jsx(qt,{onClick:a,title:"Save API Key",children:R.jsx("div",{className:"i-ph:check"})}),R.jsx(qt,{onClick:()=>i(!1),title:"Cancel",children:R.jsx("div",{className:"i-ph:x"})})]}):R.jsx(R.Fragment,{children:t?.getApiKeyLink&&R.jsxs(qt,{className:"ml-auto",onClick:()=>window.open(t?.getApiKeyLink),title:"Edit API Key",children:[R.jsx("span",{className:"mr-2 text-xs lg:text-sm",children:t?.labelForGetApiKey||"Get API Key"}),R.jsx("div",{className:t?.icon||"i-ph:key"})]})})]})},v0e="w",w0e="x",E0e="y",S0e="z",x0e="A",Vc={BaseChat:v0e,Chat:w0e,PromptEffectContainer:E0e,PromptEffectLine:S0e,PromptShine:x0e},T0e=({exportChat:t})=>R.jsx(ra,{tooltip:"Export Chat",children:R.jsx(qt,{title:"Export Chat",onClick:()=>t?.(),children:R.jsx("div",{className:"i-ph:download-simple text-xl"})})});var d2={};function p2(t){return Array.isArray(t)?t:[t]}const Vy="",m2=" ",Z_="\\",C0e=/^\s+$/,k0e=/(?:[^\\]|^)\\$/,A0e=/^\\!/,R0e=/^\\#/,P0e=/\r?\n/g,I0e=/^\.*\/|^\.+$/,J_="/";let L4="node-ignore";typeof Symbol<"u"&&(L4=Symbol.for("node-ignore"));const g2=L4,D0e=(t,e,r)=>Object.defineProperty(t,e,{value:r}),O0e=/([0-z])-([0-z])/g,N4=()=>!1,L0e=t=>t.replace(O0e,(e,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?e:Vy),N0e=t=>{const{length:e}=t;return t.slice(0,e-e%2)},M0e=[[/^\uFEFF/,()=>Vy],[/((?:\\\\)*?)(\\?\s+)$/,(t,e,r)=>e+(r.indexOf("\\")===0?m2:Vy)],[/(\\+?)\s/g,(t,e)=>{const{length:r}=e;return e.slice(0,r-r%2)+m2}],[/[\\$.|*+(){^]/g,t=>`\\${t}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(t,e,r)=>e+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(t,e,r)=>{const n=r.replace(/\\\*/g,"[^\\/]*");return e+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>Z_],[/\\\\/g,()=>Z_],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(t,e,r,n,i)=>e===Z_?`\\[${r}${N0e(n)}${i}`:i==="]"&&n.length%2===0?`[${L0e(r)}${n}]`:"[]"],[/(?:[^*])$/,t=>/\/$/.test(t)?`${t}$`:`${t}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(t,e)=>`${e?`${e}[^/]+`:"[^/]*"}(?=$|\\/$)`]],_2=Object.create(null),B0e=(t,e)=>{let r=_2[t];return r||(r=M0e.reduce((n,[i,s])=>n.replace(i,s.bind(t)),t),_2[t]=r),e?new RegExp(r,"i"):new RegExp(r)},QE=t=>typeof t=="string",F0e=t=>t&&QE(t)&&!C0e.test(t)&&!k0e.test(t)&&t.indexOf("#")!==0,H0e=t=>t.split(P0e);let U0e=class{constructor(e,r,n,i){this.origin=e,this.pattern=r,this.negative=n,this.regex=i}};const j0e=(t,e)=>{const r=t;let n=!1;t.indexOf("!")===0&&(n=!0,t=t.substr(1)),t=t.replace(A0e,"!").replace(R0e,"#");const i=B0e(t,e);return new U0e(r,t,n,i)},$0e=(t,e)=>{throw new e(t)},fs=(t,e,r)=>QE(t)?t?fs.isNotRelative(t)?r(`path should be a \`path.relative()\`d string, but got "${e}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${e}\``,TypeError),M4=t=>I0e.test(t);fs.isNotRelative=M4;fs.convert=t=>t;let z0e=class{constructor({ignorecase:e=!0,ignoreCase:r=e,allowRelativePaths:n=!1}={}){D0e(this,g2,!0),this._rules=[],this._ignoreCase=r,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(e){if(e&&e[g2]){this._rules=this._rules.concat(e._rules),this._added=!0;return}if(F0e(e)){const r=j0e(e,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(e){return this._added=!1,p2(QE(e)?H0e(e):e).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(e){return this.add(e)}_testOne(e,r){let n=!1,i=!1;return this._rules.forEach(s=>{const{negative:o}=s;if(i===o&&n!==i||o&&!n&&!i&&!r)return;s.regex.test(e)&&(n=!o,i=o)}),{ignored:n,unignored:i}}_test(e,r,n,i){const s=e&&fs.convert(e);return fs(s,e,this._allowRelativePaths?N4:$0e),this._t(s,r,n,i)}_t(e,r,n,i){if(e in r)return r[e];if(i||(i=e.split(J_)),i.pop(),!i.length)return r[e]=this._testOne(e,n);const s=this._t(i.join(J_)+J_,r,n,i);return r[e]=s.ignored?s:this._testOne(e,n)}ignores(e){return this._test(e,this._ignoreCache,!1).ignored}createFilter(){return e=>!this.ignores(e)}filter(e){return p2(e).filter(this.createFilter())}test(e){return this._test(e,this._testCache,!0)}};const zm=t=>new z0e(t),V0e=t=>fs(t&&fs.convert(t),t,N4);zm.isPathValid=V0e;zm.default=zm;var W0e=zm;if(typeof Ft<"u"&&(d2&&d2.IGNORE_TEST_WIN32||Ft.platform==="win32")){const t=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");fs.convert=t;const e=/^[a-z]:\//i;fs.isNotRelative=r=>e.test(r)||M4(r)}const B4=mn(W0e),G0e=["node_modules/**",".git/**","dist/**","build/**",".next/**","coverage/**",".cache/**",".vscode/**",".idea/**","**/*.log","**/.DS_Store","**/npm-debug.log*","**/yarn-debug.log*","**/yarn-error.log*"],b2=1e3,q0e=B4().add(G0e),Vm=()=>Math.random().toString(36).substring(2,15),K0e=async t=>{const r=new Uint8Array(await t.slice(0,1024).arrayBuffer());for(let n=0;n<r.length;n++){const i=r[n];if(i===0||i<32&&i!==9&&i!==10&&i!==13)return!0}return!1},Y0e=t=>!q0e.ignores(t);async function F4(t){const e=r=>t.some(n=>n.path.endsWith(r));if(e("package.json")){const r=t.find(n=>n.path.endsWith("package.json"));if(!r)return{type:"",setupCommand:"",followupMessage:""};try{const i=JSON.parse(r.content)?.scripts||{},o=["dev","start","preview"].find(a=>i[a]);return o?{type:"Node.js",setupCommand:`npm install && npm run ${o}`,followupMessage:`Found "${o}" script in package.json. Running "npm run ${o}" after installation.`}:{type:"Node.js",setupCommand:"npm install",followupMessage:"Would you like me to inspect package.json to determine the available scripts for running this project?"}}catch(n){return console.error("Error parsing package.json:",n),{type:"",setupCommand:"",followupMessage:""}}}return e("index.html")?{type:"Static",setupCommand:"npx --yes serve",followupMessage:""}:{type:"",setupCommand:"",followupMessage:""}}function H4(t){return t.setupCommand?{role:"assistant",content:`
<boltArtifact id="project-setup" title="Project Setup">
<boltAction type="shell">
${t.setupCommand}
</boltAction>
</boltArtifact>${t.followupMessage?`

${t.followupMessage}`:""}`,id:Vm(),createdAt:new Date}:null}const X0e=async(t,e,r)=>{const n=await Promise.all(t.map(async u=>new Promise((h,f)=>{const d=new FileReader;d.onload=()=>{const g=d.result,_=u.webkitRelativePath.split("/").slice(1).join("/");h({content:g,path:_})},d.onerror=f,d.readAsText(u)}))),i=await F4(n),s=H4(i),o=e.length>0?`

Skipped ${e.length} binary files:
${e.map(u=>`- ${u}`).join(`
`)}`:"",a={role:"assistant",content:`I've imported the contents of the "${r}" folder.${o}

<boltArtifact id="imported-files" title="Imported Files">
${n.map(u=>`<boltAction type="file" filePath="${u.path}">
${u.content}
</boltAction>`).join(`

`)}
</boltArtifact>`,id:Vm(),createdAt:new Date},c=[{role:"user",id:Vm(),content:`Import the "${r}" folder`,createdAt:new Date},a];return s&&c.push(s),c},Q0e=({className:t,importChat:e})=>{const[r,n]=D.useState(!1),i=async s=>{const o=Array.from(s.target.files||[]);if(o.length>b2){Be.error(`This folder contains ${o.length.toLocaleString()} files. This product is not yet optimized for very large projects. Please select a folder with fewer than ${b2.toLocaleString()} files.`);return}const a=o[0]?.webkitRelativePath.split("/")[0]||"Unknown Folder";n(!0);const l=Be.loading(`Importing ${a}...`);try{const c=o.filter(g=>Y0e(g.webkitRelativePath));if(c.length===0){Be.error("No files found in the selected folder");return}const u=await Promise.all(c.map(async g=>({file:g,isBinary:await K0e(g)}))),h=u.filter(g=>!g.isBinary).map(g=>g.file),f=u.filter(g=>g.isBinary).map(g=>g.file.webkitRelativePath.split("/").slice(1).join("/"));if(h.length===0){Be.error("No text files found in the selected folder");return}f.length>0&&Be.info(`Skipping ${f.length} binary files`);const d=await X0e(h,f,a);e&&await e(a,[...d]),Be.success("Folder imported successfully")}catch(c){console.error("Failed to import folder:",c),Be.error("Failed to import folder")}finally{n(!1),Be.dismiss(l),s.target.value=""}};return R.jsxs(R.Fragment,{children:[R.jsx("input",{type:"file",id:"folder-import",className:"hidden",webkitdirectory:"",directory:"",onChange:i}),R.jsxs("button",{onClick:()=>{document.getElementById("folder-import")?.click()},className:t,disabled:r,children:[R.jsx("div",{className:"i-ph:upload-simple"}),r?"Importing...":"Import Folder"]})]})};function Z0e(t){return R.jsxs("div",{className:"flex flex-col items-center justify-center w-auto",children:[R.jsx("input",{type:"file",id:"chat-import",className:"hidden",accept:".json",onChange:async e=>{const r=e.target.files?.[0];if(r&&t){try{const n=new FileReader;n.onload=async i=>{try{const s=i.target?.result,o=JSON.parse(s);Array.isArray(o.messages)||Be.error("Invalid chat file format"),await t(o.description,o.messages),Be.success("Chat imported successfully")}catch(s){s instanceof Error?Be.error("Failed to parse chat file: "+s.message):Be.error("Failed to parse chat file")}},n.onerror=()=>Be.error("Failed to read chat file"),n.readAsText(r)}catch(n){Be.error(n instanceof Error?n.message:"Failed to import chat")}e.target.value=""}else Be.error("Something went wrong")}}),R.jsx("div",{className:"flex flex-col items-center gap-4 max-w-2xl text-center",children:R.jsxs("div",{className:"flex gap-2",children:[R.jsxs("button",{onClick:()=>{document.getElementById("chat-import")?.click()},className:"px-4 py-2 rounded-lg border border-bolt-elements-borderColor bg-bolt-elements-prompt-background text-bolt-elements-textPrimary hover:bg-bolt-elements-background-depth-3 transition-all flex items-center gap-2",children:[R.jsx("div",{className:"i-ph:upload-simple"}),"Import Chat"]}),R.jsx(Q0e,{importChat:t,className:"px-4 py-2 rounded-lg border border-bolt-elements-borderColor bg-bolt-elements-prompt-background text-bolt-elements-textPrimary hover:bg-bolt-elements-background-depth-3 transition-all flex items-center gap-2"})]})})]})}const J0e=[{text:"Build a todo app in React using Tailwind"},{text:"Build a simple blog using Astro"},{text:"Create a cookie consent form using Material UI"},{text:"Make a space invaders game"},{text:"Make a Tic Tac Toe game in html, css and js only"}];function e_e(t){return R.jsx("div",{id:"examples",className:"relative flex flex-col gap-9 w-full max-w-3xl mx-auto flex justify-center mt-6",children:R.jsx("div",{className:"flex flex-wrap justify-center gap-2",style:{animation:".25s ease-out 0s 1 _fade-and-move-in_g2ptj_1 forwards"},children:J0e.map((e,r)=>R.jsx("button",{onClick:n=>{t?.(n,e.text)},className:"border border-bolt-elements-borderColor rounded-full bg-gray-50 hover:bg-gray-100 dark:bg-gray-950 dark:hover:bg-gray-900 text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary px-3 py-1 text-xs transition-theme",children:e.text},r))})})}var un=function(t){if(t=t||{},this.Promise=t.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=t.domainReentrant||!1,this.domainReentrant){if(typeof Ft>"u"||typeof Ft.domain>"u")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=t.timeout||un.DEFAULT_TIMEOUT,this.maxOccupationTime=t.maxOccupationTime||un.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=t.maxExecutionTime||un.DEFAULT_MAX_EXECUTION_TIME,t.maxPending===1/0||Number.isInteger(t.maxPending)&&t.maxPending>=0?this.maxPending=t.maxPending:this.maxPending=un.DEFAULT_MAX_PENDING};un.DEFAULT_TIMEOUT=0;un.DEFAULT_MAX_OCCUPATION_TIME=0;un.DEFAULT_MAX_EXECUTION_TIME=0;un.DEFAULT_MAX_PENDING=1e3;un.prototype.acquire=function(t,e,r,n){if(Array.isArray(t))return this._acquireBatch(t,e,r,n);if(typeof e!="function")throw new Error("You must pass a function to execute");var i=null,s=null,o=null;typeof r!="function"&&(n=r,r=null,o=new this.Promise(function(b,y){i=b,s=y})),n=n||{};var a=!1,l=null,c=null,u=null,h=this,f=function(b,y,v){c&&(clearTimeout(c),c=null),u&&(clearTimeout(u),u=null),b&&(h.queues[t]&&h.queues[t].length===0&&delete h.queues[t],h.domainReentrant&&delete h.domains[t]),a||(o?y?s(y):i(v):typeof r=="function"&&r(y,v),a=!0),b&&h.queues[t]&&h.queues[t].length>0&&h.queues[t].shift()()},d=function(b){if(a)return f(b);l&&(clearTimeout(l),l=null),h.domainReentrant&&b&&(h.domains[t]=Ft.domain);var y=n.maxExecutionTime||h.maxExecutionTime;if(y&&(u=setTimeout(function(){h.queues[t]&&f(b,new Error("Maximum execution time is exceeded "+t))},y)),e.length===1){var v=!1;try{e(function(w,S){v||(v=!0,f(b,w,S))})}catch(w){v||(v=!0,f(b,w))}}else h._promiseTry(function(){return e()}).then(function(w){f(b,void 0,w)},function(w){f(b,w)})};h.domainReentrant&&Ft.domain&&(d=Ft.domain.bind(d));var g=n.maxPending||h.maxPending;if(!h.queues[t])h.queues[t]=[],d(!0);else if(h.domainReentrant&&Ft.domain&&Ft.domain===h.domains[t])d(!1);else if(h.queues[t].length>=g)f(!1,new Error("Too many pending tasks in queue "+t));else{var _=function(){d(!0)};n.skipQueue?h.queues[t].unshift(_):h.queues[t].push(_);var m=n.timeout||h.timeout;m&&(l=setTimeout(function(){l=null,f(!1,new Error("async-lock timed out in queue "+t))},m))}var p=n.maxOccupationTime||h.maxOccupationTime;if(p&&(c=setTimeout(function(){h.queues[t]&&f(!1,new Error("Maximum occupation time is exceeded in queue "+t))},p)),o)return o};un.prototype._acquireBatch=function(t,e,r,n){typeof r!="function"&&(n=r,r=null);var i=this,s=function(a,l){return function(c){i.acquire(a,l,c,n)}},o=t.reduceRight(function(a,l){return s(l,a)},e);if(typeof r=="function")o(r);else return new this.Promise(function(a,l){o.length===1?o(function(c,u){c?l(c):a(u)}):a(o())})};un.prototype.isBusy=function(t){return t?!!this.queues[t]:Object.keys(this.queues).length>0};un.prototype._promiseTry=function(t){try{return this.Promise.resolve(t())}catch(e){return this.Promise.reject(e)}};var t_e=un,r_e=t_e;const Wm=mn(r_e);var Wy={exports:{}};typeof Object.create=="function"?Wy.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Wy.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};var n_e=Wy.exports,Gy={exports:{}};const i_e=HF(Q$);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=i_e,n=r.Buffer;function i(o,a){for(var l in o)a[l]=o[l]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=s);function s(o,a,l){return n(o,a,l)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,l)},s.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var c=n(o);return a!==void 0?typeof l=="string"?c.fill(a,l):c.fill(a):c.fill(0),c},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}})(Gy,Gy.exports);var U4=Gy.exports,j4=U4.Buffer;function l0(t,e){this._block=j4.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}l0.prototype.update=function(t,e){typeof t=="string"&&(e=e||"utf8",t=j4.from(t,e));for(var r=this._block,n=this._blockSize,i=t.length,s=this._len,o=0;o<i;){for(var a=s%n,l=Math.min(i-o,n-a),c=0;c<l;c++)r[a+c]=t[o+c];s+=l,o+=l,s%n===0&&this._update(r)}return this._len+=i,this};l0.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=this._len*8;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(r&4294967295)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var s=this._hash();return t?s.toString(t):s};l0.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var s_e=l0,o_e=n_e,$4=s_e,a_e=U4.Buffer,l_e=[1518500249,1859775393,-1894007588,-899497514],c_e=new Array(80);function df(){this.init(),this._w=c_e,$4.call(this,64,56)}o_e(df,$4);df.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function u_e(t){return t<<1|t>>>31}function h_e(t){return t<<5|t>>>27}function f_e(t){return t<<30|t>>>2}function d_e(t,e,r,n){return t===0?e&r|~e&n:t===2?e&r|e&n|r&n:e^r^n}df.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=0;a<16;++a)e[a]=t.readInt32BE(a*4);for(;a<80;++a)e[a]=u_e(e[a-3]^e[a-8]^e[a-14]^e[a-16]);for(var l=0;l<80;++l){var c=~~(l/20),u=h_e(r)+d_e(c,n,i,s)+o+e[l]+l_e[c]|0;o=s,s=i,i=f_e(n),n=r,r=u}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=o+this._e|0};df.prototype._hash=function(){var t=a_e.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var p_e=df;const z4=mn(p_e);var V4={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */(function(t){(function(e){e(typeof DO_NOT_EXPORT_CRC>"u"?t:{})})(function(e){e.version="1.2.2";function r(){for(var E=0,T=new Array(256),k=0;k!=256;++k)E=k,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,T[k]=E;return typeof Int32Array<"u"?new Int32Array(T):T}var n=r();function i(E){var T=0,k=0,B=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(B=0;B!=256;++B)P[B]=E[B];for(B=0;B!=256;++B)for(k=E[B],T=256+B;T<4096;T+=256)k=P[T]=k>>>8^E[k&255];var O=[];for(B=1;B!=16;++B)O[B-1]=typeof Int32Array<"u"?P.subarray(B*256,B*256+256):P.slice(B*256,B*256+256);return O}var s=i(n),o=s[0],a=s[1],l=s[2],c=s[3],u=s[4],h=s[5],f=s[6],d=s[7],g=s[8],_=s[9],m=s[10],p=s[11],b=s[12],y=s[13],v=s[14];function w(E,T){for(var k=T^-1,B=0,P=E.length;B<P;)k=k>>>8^n[(k^E.charCodeAt(B++))&255];return~k}function S(E,T){for(var k=T^-1,B=E.length-15,P=0;P<B;)k=v[E[P++]^k&255]^y[E[P++]^k>>8&255]^b[E[P++]^k>>16&255]^p[E[P++]^k>>>24]^m[E[P++]]^_[E[P++]]^g[E[P++]]^d[E[P++]]^f[E[P++]]^h[E[P++]]^u[E[P++]]^c[E[P++]]^l[E[P++]]^a[E[P++]]^o[E[P++]]^n[E[P++]];for(B+=15;P<B;)k=k>>>8^n[(k^E[P++])&255];return~k}function x(E,T){for(var k=T^-1,B=0,P=E.length,O=0,A=0;B<P;)O=E.charCodeAt(B++),O<128?k=k>>>8^n[(k^O)&255]:O<2048?(k=k>>>8^n[(k^(192|O>>6&31))&255],k=k>>>8^n[(k^(128|O&63))&255]):O>=55296&&O<57344?(O=(O&1023)+64,A=E.charCodeAt(B++)&1023,k=k>>>8^n[(k^(240|O>>8&7))&255],k=k>>>8^n[(k^(128|O>>2&63))&255],k=k>>>8^n[(k^(128|A>>6&15|(O&3)<<4))&255],k=k>>>8^n[(k^(128|A&63))&255]):(k=k>>>8^n[(k^(224|O>>12&15))&255],k=k>>>8^n[(k^(128|O>>6&63))&255],k=k>>>8^n[(k^(128|O&63))&255]);return~k}e.table=n,e.bstr=w,e.buf=S,e.str=x})})(V4);const m_e=mn(V4);var ys={};(function(t){var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function r(s,o){return Object.prototype.hasOwnProperty.call(s,o)}t.assign=function(s){for(var o=Array.prototype.slice.call(arguments,1);o.length;){var a=o.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(var l in a)r(a,l)&&(s[l]=a[l])}}return s},t.shrinkBuf=function(s,o){return s.length===o?s:s.subarray?s.subarray(0,o):(s.length=o,s)};var n={arraySet:function(s,o,a,l,c){if(o.subarray&&s.subarray){s.set(o.subarray(a,a+l),c);return}for(var u=0;u<l;u++)s[c+u]=o[a+u]},flattenChunks:function(s){var o,a,l,c,u,h;for(l=0,o=0,a=s.length;o<a;o++)l+=s[o].length;for(h=new Uint8Array(l),c=0,o=0,a=s.length;o<a;o++)u=s[o],h.set(u,c),c+=u.length;return h}},i={arraySet:function(s,o,a,l,c){for(var u=0;u<l;u++)s[c+u]=o[a+u]},flattenChunks:function(s){return[].concat.apply([],s)}};t.setTyped=function(s){s?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,n)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,i))},t.setTyped(e)})(ys);var pf={},zi={},gc={},g_e=ys,__e=4,y2=0,v2=1,b_e=2;function _c(t){for(var e=t.length;--e>=0;)t[e]=0}var y_e=0,W4=1,v_e=2,w_e=3,E_e=258,ZE=29,mf=256,mh=mf+1+ZE,xl=30,JE=19,G4=2*mh+1,jo=15,eb=16,S_e=7,eS=256,q4=16,K4=17,Y4=18,qy=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],wp=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],x_e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],X4=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],T_e=512,Wi=new Array((mh+2)*2);_c(Wi);var Au=new Array(xl*2);_c(Au);var gh=new Array(T_e);_c(gh);var _h=new Array(E_e-w_e+1);_c(_h);var tS=new Array(ZE);_c(tS);var Gm=new Array(xl);_c(Gm);function tb(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}var Q4,Z4,J4;function rb(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function e5(t){return t<256?gh[t]:gh[256+(t>>>7)]}function bh(t,e){t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255}function Xr(t,e,r){t.bi_valid>eb-r?(t.bi_buf|=e<<t.bi_valid&65535,bh(t,t.bi_buf),t.bi_buf=e>>eb-t.bi_valid,t.bi_valid+=r-eb):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function wi(t,e,r){Xr(t,r[e*2],r[e*2+1])}function t5(t,e){var r=0;do r|=t&1,t>>>=1,r<<=1;while(--e>0);return r>>>1}function C_e(t){t.bi_valid===16?(bh(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)}function k_e(t,e){var r=e.dyn_tree,n=e.max_code,i=e.stat_desc.static_tree,s=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,l=e.stat_desc.max_length,c,u,h,f,d,g,_=0;for(f=0;f<=jo;f++)t.bl_count[f]=0;for(r[t.heap[t.heap_max]*2+1]=0,c=t.heap_max+1;c<G4;c++)u=t.heap[c],f=r[r[u*2+1]*2+1]+1,f>l&&(f=l,_++),r[u*2+1]=f,!(u>n)&&(t.bl_count[f]++,d=0,u>=a&&(d=o[u-a]),g=r[u*2],t.opt_len+=g*(f+d),s&&(t.static_len+=g*(i[u*2+1]+d)));if(_!==0){do{for(f=l-1;t.bl_count[f]===0;)f--;t.bl_count[f]--,t.bl_count[f+1]+=2,t.bl_count[l]--,_-=2}while(_>0);for(f=l;f!==0;f--)for(u=t.bl_count[f];u!==0;)h=t.heap[--c],!(h>n)&&(r[h*2+1]!==f&&(t.opt_len+=(f-r[h*2+1])*r[h*2],r[h*2+1]=f),u--)}}function r5(t,e,r){var n=new Array(jo+1),i=0,s,o;for(s=1;s<=jo;s++)n[s]=i=i+r[s-1]<<1;for(o=0;o<=e;o++){var a=t[o*2+1];a!==0&&(t[o*2]=t5(n[a]++,a))}}function A_e(){var t,e,r,n,i,s=new Array(jo+1);for(r=0,n=0;n<ZE-1;n++)for(tS[n]=r,t=0;t<1<<qy[n];t++)_h[r++]=n;for(_h[r-1]=n,i=0,n=0;n<16;n++)for(Gm[n]=i,t=0;t<1<<wp[n];t++)gh[i++]=n;for(i>>=7;n<xl;n++)for(Gm[n]=i<<7,t=0;t<1<<wp[n]-7;t++)gh[256+i++]=n;for(e=0;e<=jo;e++)s[e]=0;for(t=0;t<=143;)Wi[t*2+1]=8,t++,s[8]++;for(;t<=255;)Wi[t*2+1]=9,t++,s[9]++;for(;t<=279;)Wi[t*2+1]=7,t++,s[7]++;for(;t<=287;)Wi[t*2+1]=8,t++,s[8]++;for(r5(Wi,mh+1,s),t=0;t<xl;t++)Au[t*2+1]=5,Au[t*2]=t5(t,5);Q4=new tb(Wi,qy,mf+1,mh,jo),Z4=new tb(Au,wp,0,xl,jo),J4=new tb(new Array(0),x_e,0,JE,S_e)}function n5(t){var e;for(e=0;e<mh;e++)t.dyn_ltree[e*2]=0;for(e=0;e<xl;e++)t.dyn_dtree[e*2]=0;for(e=0;e<JE;e++)t.bl_tree[e*2]=0;t.dyn_ltree[eS*2]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function i5(t){t.bi_valid>8?bh(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function R_e(t,e,r,n){i5(t),bh(t,r),bh(t,~r),g_e.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}function w2(t,e,r,n){var i=e*2,s=r*2;return t[i]<t[s]||t[i]===t[s]&&n[e]<=n[r]}function nb(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&w2(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!w2(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function E2(t,e,r){var n,i,s=0,o,a;if(t.last_lit!==0)do n=t.pending_buf[t.d_buf+s*2]<<8|t.pending_buf[t.d_buf+s*2+1],i=t.pending_buf[t.l_buf+s],s++,n===0?wi(t,i,e):(o=_h[i],wi(t,o+mf+1,e),a=qy[o],a!==0&&(i-=tS[o],Xr(t,i,a)),n--,o=e5(n),wi(t,o,r),a=wp[o],a!==0&&(n-=Gm[o],Xr(t,n,a)));while(s<t.last_lit);wi(t,eS,e)}function Ky(t,e){var r=e.dyn_tree,n=e.stat_desc.static_tree,i=e.stat_desc.has_stree,s=e.stat_desc.elems,o,a,l=-1,c;for(t.heap_len=0,t.heap_max=G4,o=0;o<s;o++)r[o*2]!==0?(t.heap[++t.heap_len]=l=o,t.depth[o]=0):r[o*2+1]=0;for(;t.heap_len<2;)c=t.heap[++t.heap_len]=l<2?++l:0,r[c*2]=1,t.depth[c]=0,t.opt_len--,i&&(t.static_len-=n[c*2+1]);for(e.max_code=l,o=t.heap_len>>1;o>=1;o--)nb(t,r,o);c=s;do o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],nb(t,r,1),a=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=a,r[c*2]=r[o*2]+r[a*2],t.depth[c]=(t.depth[o]>=t.depth[a]?t.depth[o]:t.depth[a])+1,r[o*2+1]=r[a*2+1]=c,t.heap[1]=c++,nb(t,r,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],k_e(t,e),r5(r,l,t.bl_count)}function S2(t,e,r){var n,i=-1,s,o=e[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),e[(r+1)*2+1]=65535,n=0;n<=r;n++)s=o,o=e[(n+1)*2+1],!(++a<l&&s===o)&&(a<c?t.bl_tree[s*2]+=a:s!==0?(s!==i&&t.bl_tree[s*2]++,t.bl_tree[q4*2]++):a<=10?t.bl_tree[K4*2]++:t.bl_tree[Y4*2]++,a=0,i=s,o===0?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4))}function x2(t,e,r){var n,i=-1,s,o=e[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),n=0;n<=r;n++)if(s=o,o=e[(n+1)*2+1],!(++a<l&&s===o)){if(a<c)do wi(t,s,t.bl_tree);while(--a!==0);else s!==0?(s!==i&&(wi(t,s,t.bl_tree),a--),wi(t,q4,t.bl_tree),Xr(t,a-3,2)):a<=10?(wi(t,K4,t.bl_tree),Xr(t,a-3,3)):(wi(t,Y4,t.bl_tree),Xr(t,a-11,7));a=0,i=s,o===0?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4)}}function P_e(t){var e;for(S2(t,t.dyn_ltree,t.l_desc.max_code),S2(t,t.dyn_dtree,t.d_desc.max_code),Ky(t,t.bl_desc),e=JE-1;e>=3&&t.bl_tree[X4[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e}function I_e(t,e,r,n){var i;for(Xr(t,e-257,5),Xr(t,r-1,5),Xr(t,n-4,4),i=0;i<n;i++)Xr(t,t.bl_tree[X4[i]*2+1],3);x2(t,t.dyn_ltree,e-1),x2(t,t.dyn_dtree,r-1)}function D_e(t){var e=4093624447,r;for(r=0;r<=31;r++,e>>>=1)if(e&1&&t.dyn_ltree[r*2]!==0)return y2;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return v2;for(r=32;r<mf;r++)if(t.dyn_ltree[r*2]!==0)return v2;return y2}var T2=!1;function O_e(t){T2||(A_e(),T2=!0),t.l_desc=new rb(t.dyn_ltree,Q4),t.d_desc=new rb(t.dyn_dtree,Z4),t.bl_desc=new rb(t.bl_tree,J4),t.bi_buf=0,t.bi_valid=0,n5(t)}function s5(t,e,r,n){Xr(t,(y_e<<1)+(n?1:0),3),R_e(t,e,r)}function L_e(t){Xr(t,W4<<1,3),wi(t,eS,Wi),C_e(t)}function N_e(t,e,r,n){var i,s,o=0;t.level>0?(t.strm.data_type===b_e&&(t.strm.data_type=D_e(t)),Ky(t,t.l_desc),Ky(t,t.d_desc),o=P_e(t),i=t.opt_len+3+7>>>3,s=t.static_len+3+7>>>3,s<=i&&(i=s)):i=s=r+5,r+4<=i&&e!==-1?s5(t,e,r,n):t.strategy===__e||s===i?(Xr(t,(W4<<1)+(n?1:0),3),E2(t,Wi,Au)):(Xr(t,(v_e<<1)+(n?1:0),3),I_e(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),E2(t,t.dyn_ltree,t.dyn_dtree)),n5(t),n&&i5(t)}function M_e(t,e,r){return t.pending_buf[t.d_buf+t.last_lit*2]=e>>>8&255,t.pending_buf[t.d_buf+t.last_lit*2+1]=e&255,t.pending_buf[t.l_buf+t.last_lit]=r&255,t.last_lit++,e===0?t.dyn_ltree[r*2]++:(t.matches++,e--,t.dyn_ltree[(_h[r]+mf+1)*2]++,t.dyn_dtree[e5(e)*2]++),t.last_lit===t.lit_bufsize-1}gc._tr_init=O_e;gc._tr_stored_block=s5;gc._tr_flush_block=N_e;gc._tr_tally=M_e;gc._tr_align=L_e;function B_e(t,e,r,n){for(var i=t&65535|0,s=t>>>16&65535|0,o=0;r!==0;){o=r>2e3?2e3:r,r-=o;do i=i+e[n++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0}var o5=B_e;function F_e(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e}var H_e=F_e();function U_e(t,e,r,n){var i=H_e,s=n+r;t^=-1;for(var o=n;o<s;o++)t=t>>>8^i[(t^e[o])&255];return t^-1}var a5=U_e,rS={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ir=ys,In=gc,l5=o5,As=a5,j_e=rS,Ca=0,$_e=1,z_e=3,Ks=4,C2=5,Ei=0,k2=1,Dn=-2,V_e=-3,ib=-5,W_e=-1,G_e=1,Fd=2,q_e=3,K_e=4,Y_e=0,X_e=2,c0=8,Q_e=9,Z_e=15,J_e=8,ebe=29,tbe=256,Yy=tbe+1+ebe,rbe=30,nbe=19,ibe=2*Yy+1,sbe=15,nt=3,$s=258,Vn=$s+nt+1,obe=32,u0=42,Xy=69,Ep=73,Sp=91,xp=103,$o=113,au=666,Zt=1,gf=2,fa=3,bc=4,abe=3;function zs(t,e){return t.msg=j_e[e],e}function A2(t){return(t<<1)-(t>4?9:0)}function Ms(t){for(var e=t.length;--e>=0;)t[e]=0}function Rs(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),r!==0&&(Ir.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,e.pending===0&&(e.pending_out=0))}function dr(t,e){In._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Rs(t.strm)}function ht(t,e){t.pending_buf[t.pending++]=e}function Wc(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255}function lbe(t,e,r,n){var i=t.avail_in;return i>n&&(i=n),i===0?0:(t.avail_in-=i,Ir.arraySet(e,t.input,t.next_in,i,r),t.state.wrap===1?t.adler=l5(t.adler,e,i,r):t.state.wrap===2&&(t.adler=As(t.adler,e,i,r)),t.next_in+=i,t.total_in+=i,i)}function c5(t,e){var r=t.max_chain_length,n=t.strstart,i,s,o=t.prev_length,a=t.nice_match,l=t.strstart>t.w_size-Vn?t.strstart-(t.w_size-Vn):0,c=t.window,u=t.w_mask,h=t.prev,f=t.strstart+$s,d=c[n+o-1],g=c[n+o];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do if(i=e,!(c[i+o]!==g||c[i+o-1]!==d||c[i]!==c[n]||c[++i]!==c[n+1])){n+=2,i++;do;while(c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&n<f);if(s=$s-(f-n),n=f-$s,s>o){if(t.match_start=e,o=s,s>=a)break;d=c[n+o-1],g=c[n+o]}}while((e=h[e&u])>l&&--r!==0);return o<=t.lookahead?o:t.lookahead}function da(t){var e=t.w_size,r,n,i,s,o;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-Vn)){Ir.arraySet(t.window,t.window,e,e,0),t.match_start-=e,t.strstart-=e,t.block_start-=e,n=t.hash_size,r=n;do i=t.head[--r],t.head[r]=i>=e?i-e:0;while(--n);n=e,r=n;do i=t.prev[--r],t.prev[r]=i>=e?i-e:0;while(--n);s+=e}if(t.strm.avail_in===0)break;if(n=lbe(t.strm,t.window,t.strstart+t.lookahead,s),t.lookahead+=n,t.lookahead+t.insert>=nt)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+nt-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<nt)););}while(t.lookahead<Vn&&t.strm.avail_in!==0)}function cbe(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(da(t),t.lookahead===0&&e===Ca)return Zt;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((t.strstart===0||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,dr(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-Vn&&(dr(t,!1),t.strm.avail_out===0))return Zt}return t.insert=0,e===Ks?(dr(t,!0),t.strm.avail_out===0?fa:bc):(t.strstart>t.block_start&&(dr(t,!1),t.strm.avail_out===0),Zt)}function sb(t,e){for(var r,n;;){if(t.lookahead<Vn){if(da(t),t.lookahead<Vn&&e===Ca)return Zt;if(t.lookahead===0)break}if(r=0,t.lookahead>=nt&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+nt-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),r!==0&&t.strstart-r<=t.w_size-Vn&&(t.match_length=c5(t,r)),t.match_length>=nt)if(n=In._tr_tally(t,t.strstart-t.match_start,t.match_length-nt),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=nt){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+nt-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=In._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(dr(t,!1),t.strm.avail_out===0))return Zt}return t.insert=t.strstart<nt-1?t.strstart:nt-1,e===Ks?(dr(t,!0),t.strm.avail_out===0?fa:bc):t.last_lit&&(dr(t,!1),t.strm.avail_out===0)?Zt:gf}function $a(t,e){for(var r,n,i;;){if(t.lookahead<Vn){if(da(t),t.lookahead<Vn&&e===Ca)return Zt;if(t.lookahead===0)break}if(r=0,t.lookahead>=nt&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+nt-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=nt-1,r!==0&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-Vn&&(t.match_length=c5(t,r),t.match_length<=5&&(t.strategy===G_e||t.match_length===nt&&t.strstart-t.match_start>4096)&&(t.match_length=nt-1)),t.prev_length>=nt&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-nt,n=In._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-nt),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+nt-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=nt-1,t.strstart++,n&&(dr(t,!1),t.strm.avail_out===0))return Zt}else if(t.match_available){if(n=In._tr_tally(t,0,t.window[t.strstart-1]),n&&dr(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return Zt}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=In._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<nt-1?t.strstart:nt-1,e===Ks?(dr(t,!0),t.strm.avail_out===0?fa:bc):t.last_lit&&(dr(t,!1),t.strm.avail_out===0)?Zt:gf}function ube(t,e){for(var r,n,i,s,o=t.window;;){if(t.lookahead<=$s){if(da(t),t.lookahead<=$s&&e===Ca)return Zt;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=nt&&t.strstart>0&&(i=t.strstart-1,n=o[i],n===o[++i]&&n===o[++i]&&n===o[++i])){s=t.strstart+$s;do;while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<s);t.match_length=$s-(s-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=nt?(r=In._tr_tally(t,1,t.match_length-nt),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=In._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(dr(t,!1),t.strm.avail_out===0))return Zt}return t.insert=0,e===Ks?(dr(t,!0),t.strm.avail_out===0?fa:bc):t.last_lit&&(dr(t,!1),t.strm.avail_out===0)?Zt:gf}function hbe(t,e){for(var r;;){if(t.lookahead===0&&(da(t),t.lookahead===0)){if(e===Ca)return Zt;break}if(t.match_length=0,r=In._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(dr(t,!1),t.strm.avail_out===0))return Zt}return t.insert=0,e===Ks?(dr(t,!0),t.strm.avail_out===0?fa:bc):t.last_lit&&(dr(t,!1),t.strm.avail_out===0)?Zt:gf}function si(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}var ll;ll=[new si(0,0,0,0,cbe),new si(4,4,8,4,sb),new si(4,5,16,8,sb),new si(4,6,32,32,sb),new si(4,4,16,16,$a),new si(8,16,32,32,$a),new si(8,16,128,128,$a),new si(8,32,128,256,$a),new si(32,128,258,1024,$a),new si(32,258,258,4096,$a)];function fbe(t){t.window_size=2*t.w_size,Ms(t.head),t.max_lazy_match=ll[t.level].max_lazy,t.good_match=ll[t.level].good_length,t.nice_match=ll[t.level].nice_length,t.max_chain_length=ll[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=nt-1,t.match_available=0,t.ins_h=0}function dbe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=c0,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Ir.Buf16(ibe*2),this.dyn_dtree=new Ir.Buf16((2*rbe+1)*2),this.bl_tree=new Ir.Buf16((2*nbe+1)*2),Ms(this.dyn_ltree),Ms(this.dyn_dtree),Ms(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Ir.Buf16(sbe+1),this.heap=new Ir.Buf16(2*Yy+1),Ms(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Ir.Buf16(2*Yy+1),Ms(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function u5(t){var e;return!t||!t.state?zs(t,Dn):(t.total_in=t.total_out=0,t.data_type=X_e,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?u0:$o,t.adler=e.wrap===2?0:1,e.last_flush=Ca,In._tr_init(e),Ei)}function h5(t){var e=u5(t);return e===Ei&&fbe(t.state),e}function pbe(t,e){return!t||!t.state||t.state.wrap!==2?Dn:(t.state.gzhead=e,Ei)}function f5(t,e,r,n,i,s){if(!t)return Dn;var o=1;if(e===W_e&&(e=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),i<1||i>Q_e||r!==c0||n<8||n>15||e<0||e>9||s<0||s>K_e)return zs(t,Dn);n===8&&(n=9);var a=new dbe;return t.state=a,a.strm=t,a.wrap=o,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+nt-1)/nt),a.window=new Ir.Buf8(a.w_size*2),a.head=new Ir.Buf16(a.hash_size),a.prev=new Ir.Buf16(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Ir.Buf8(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=e,a.strategy=s,a.method=r,h5(t)}function mbe(t,e){return f5(t,e,c0,Z_e,J_e,Y_e)}function gbe(t,e){var r,n,i,s;if(!t||!t.state||e>C2||e<0)return t?zs(t,Dn):Dn;if(n=t.state,!t.output||!t.input&&t.avail_in!==0||n.status===au&&e!==Ks)return zs(t,t.avail_out===0?ib:Dn);if(n.strm=t,r=n.last_flush,n.last_flush=e,n.status===u0)if(n.wrap===2)t.adler=0,ht(n,31),ht(n,139),ht(n,8),n.gzhead?(ht(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),ht(n,n.gzhead.time&255),ht(n,n.gzhead.time>>8&255),ht(n,n.gzhead.time>>16&255),ht(n,n.gzhead.time>>24&255),ht(n,n.level===9?2:n.strategy>=Fd||n.level<2?4:0),ht(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(ht(n,n.gzhead.extra.length&255),ht(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=As(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=Xy):(ht(n,0),ht(n,0),ht(n,0),ht(n,0),ht(n,0),ht(n,n.level===9?2:n.strategy>=Fd||n.level<2?4:0),ht(n,abe),n.status=$o);else{var o=c0+(n.w_bits-8<<4)<<8,a=-1;n.strategy>=Fd||n.level<2?a=0:n.level<6?a=1:n.level===6?a=2:a=3,o|=a<<6,n.strstart!==0&&(o|=obe),o+=31-o%31,n.status=$o,Wc(n,o),n.strstart!==0&&(Wc(n,t.adler>>>16),Wc(n,t.adler&65535)),t.adler=1}if(n.status===Xy)if(n.gzhead.extra){for(i=n.pending;n.gzindex<(n.gzhead.extra.length&65535)&&!(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(t.adler=As(t.adler,n.pending_buf,n.pending-i,i)),Rs(t),i=n.pending,n.pending===n.pending_buf_size));)ht(n,n.gzhead.extra[n.gzindex]&255),n.gzindex++;n.gzhead.hcrc&&n.pending>i&&(t.adler=As(t.adler,n.pending_buf,n.pending-i,i)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=Ep)}else n.status=Ep;if(n.status===Ep)if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(t.adler=As(t.adler,n.pending_buf,n.pending-i,i)),Rs(t),i=n.pending,n.pending===n.pending_buf_size)){s=1;break}n.gzindex<n.gzhead.name.length?s=n.gzhead.name.charCodeAt(n.gzindex++)&255:s=0,ht(n,s)}while(s!==0);n.gzhead.hcrc&&n.pending>i&&(t.adler=As(t.adler,n.pending_buf,n.pending-i,i)),s===0&&(n.gzindex=0,n.status=Sp)}else n.status=Sp;if(n.status===Sp)if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(t.adler=As(t.adler,n.pending_buf,n.pending-i,i)),Rs(t),i=n.pending,n.pending===n.pending_buf_size)){s=1;break}n.gzindex<n.gzhead.comment.length?s=n.gzhead.comment.charCodeAt(n.gzindex++)&255:s=0,ht(n,s)}while(s!==0);n.gzhead.hcrc&&n.pending>i&&(t.adler=As(t.adler,n.pending_buf,n.pending-i,i)),s===0&&(n.status=xp)}else n.status=xp;if(n.status===xp&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&Rs(t),n.pending+2<=n.pending_buf_size&&(ht(n,t.adler&255),ht(n,t.adler>>8&255),t.adler=0,n.status=$o)):n.status=$o),n.pending!==0){if(Rs(t),t.avail_out===0)return n.last_flush=-1,Ei}else if(t.avail_in===0&&A2(e)<=A2(r)&&e!==Ks)return zs(t,ib);if(n.status===au&&t.avail_in!==0)return zs(t,ib);if(t.avail_in!==0||n.lookahead!==0||e!==Ca&&n.status!==au){var l=n.strategy===Fd?hbe(n,e):n.strategy===q_e?ube(n,e):ll[n.level].func(n,e);if((l===fa||l===bc)&&(n.status=au),l===Zt||l===fa)return t.avail_out===0&&(n.last_flush=-1),Ei;if(l===gf&&(e===$_e?In._tr_align(n):e!==C2&&(In._tr_stored_block(n,0,0,!1),e===z_e&&(Ms(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),Rs(t),t.avail_out===0))return n.last_flush=-1,Ei}return e!==Ks?Ei:n.wrap<=0?k2:(n.wrap===2?(ht(n,t.adler&255),ht(n,t.adler>>8&255),ht(n,t.adler>>16&255),ht(n,t.adler>>24&255),ht(n,t.total_in&255),ht(n,t.total_in>>8&255),ht(n,t.total_in>>16&255),ht(n,t.total_in>>24&255)):(Wc(n,t.adler>>>16),Wc(n,t.adler&65535)),Rs(t),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?Ei:k2)}function _be(t){var e;return!t||!t.state?Dn:(e=t.state.status,e!==u0&&e!==Xy&&e!==Ep&&e!==Sp&&e!==xp&&e!==$o&&e!==au?zs(t,Dn):(t.state=null,e===$o?zs(t,V_e):Ei))}function bbe(t,e){var r=e.length,n,i,s,o,a,l,c,u;if(!t||!t.state||(n=t.state,o=n.wrap,o===2||o===1&&n.status!==u0||n.lookahead))return Dn;for(o===1&&(t.adler=l5(t.adler,e,r,0)),n.wrap=0,r>=n.w_size&&(o===0&&(Ms(n.head),n.strstart=0,n.block_start=0,n.insert=0),u=new Ir.Buf8(n.w_size),Ir.arraySet(u,e,r-n.w_size,n.w_size,0),e=u,r=n.w_size),a=t.avail_in,l=t.next_in,c=t.input,t.avail_in=r,t.next_in=0,t.input=e,da(n);n.lookahead>=nt;){i=n.strstart,s=n.lookahead-(nt-1);do n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+nt-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++;while(--s);n.strstart=i,n.lookahead=nt-1,da(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=nt-1,n.match_available=0,t.next_in=l,t.input=c,t.avail_in=a,n.wrap=o,Ei}zi.deflateInit=mbe;zi.deflateInit2=f5;zi.deflateReset=h5;zi.deflateResetKeep=u5;zi.deflateSetHeader=pbe;zi.deflate=gbe;zi.deflateEnd=_be;zi.deflateSetDictionary=bbe;zi.deflateInfo="pako deflate (from Nodeca project)";var ka={},h0=ys,d5=!0,p5=!0;try{String.fromCharCode.apply(null,[0])}catch{d5=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{p5=!1}var yh=new h0.Buf8(256);for(var Es=0;Es<256;Es++)yh[Es]=Es>=252?6:Es>=248?5:Es>=240?4:Es>=224?3:Es>=192?2:1;yh[254]=yh[254]=1;ka.string2buf=function(t){var e,r,n,i,s,o=t.length,a=0;for(i=0;i<o;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<o&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(e=new h0.Buf8(a),s=0,i=0;s<a;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<o&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|r&63):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|r&63):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|r&63);return e};function m5(t,e){if(e<65534&&(t.subarray&&p5||!t.subarray&&d5))return String.fromCharCode.apply(null,h0.shrinkBuf(t,e));for(var r="",n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r}ka.buf2binstring=function(t){return m5(t,t.length)};ka.binstring2buf=function(t){for(var e=new h0.Buf8(t.length),r=0,n=e.length;r<n;r++)e[r]=t.charCodeAt(r);return e};ka.buf2string=function(t,e){var r,n,i,s,o=e||t.length,a=new Array(o*2);for(n=0,r=0;r<o;){if(i=t[r++],i<128){a[n++]=i;continue}if(s=yh[i],s>4){a[n++]=65533,r+=s-1;continue}for(i&=s===2?31:s===3?15:7;s>1&&r<o;)i=i<<6|t[r++]&63,s--;if(s>1){a[n++]=65533;continue}i<65536?a[n++]=i:(i-=65536,a[n++]=55296|i>>10&1023,a[n++]=56320|i&1023)}return m5(a,n)};ka.utf8border=function(t,e){var r;for(e=e||t.length,e>t.length&&(e=t.length),r=e-1;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+yh[t[r]]>e?r:e};function ybe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var g5=ybe,Ru=zi,Pu=ys,Qy=ka,Zy=rS,vbe=g5,_5=Object.prototype.toString,wbe=0,ob=4,Tl=0,R2=1,P2=2,Ebe=-1,Sbe=0,xbe=8;function pa(t){if(!(this instanceof pa))return new pa(t);this.options=Pu.assign({level:Ebe,method:xbe,chunkSize:16384,windowBits:15,memLevel:8,strategy:Sbe,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new vbe,this.strm.avail_out=0;var r=Ru.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==Tl)throw new Error(Zy[r]);if(e.header&&Ru.deflateSetHeader(this.strm,e.header),e.dictionary){var n;if(typeof e.dictionary=="string"?n=Qy.string2buf(e.dictionary):_5.call(e.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(e.dictionary):n=e.dictionary,r=Ru.deflateSetDictionary(this.strm,n),r!==Tl)throw new Error(Zy[r]);this._dict_set=!0}}pa.prototype.push=function(t,e){var r=this.strm,n=this.options.chunkSize,i,s;if(this.ended)return!1;s=e===~~e?e:e===!0?ob:wbe,typeof t=="string"?r.input=Qy.string2buf(t):_5.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new Pu.Buf8(n),r.next_out=0,r.avail_out=n),i=Ru.deflate(r,s),i!==R2&&i!==Tl)return this.onEnd(i),this.ended=!0,!1;(r.avail_out===0||r.avail_in===0&&(s===ob||s===P2))&&(this.options.to==="string"?this.onData(Qy.buf2binstring(Pu.shrinkBuf(r.output,r.next_out))):this.onData(Pu.shrinkBuf(r.output,r.next_out)))}while((r.avail_in>0||r.avail_out===0)&&i!==R2);return s===ob?(i=Ru.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Tl):(s===P2&&(this.onEnd(Tl),r.avail_out=0),!0)};pa.prototype.onData=function(t){this.chunks.push(t)};pa.prototype.onEnd=function(t){t===Tl&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Pu.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function nS(t,e){var r=new pa(e);if(r.push(t,!0),r.err)throw r.msg||Zy[r.err];return r.result}function Tbe(t,e){return e=e||{},e.raw=!0,nS(t,e)}function Cbe(t,e){return e=e||{},e.gzip=!0,nS(t,e)}pf.Deflate=pa;pf.deflate=nS;pf.deflateRaw=Tbe;pf.gzip=Cbe;var _f={},Jn={},Hd=30,kbe=12,Abe=function(e,r){var n,i,s,o,a,l,c,u,h,f,d,g,_,m,p,b,y,v,w,S,x,E,T,k,B;n=e.state,i=e.next_in,k=e.input,s=i+(e.avail_in-5),o=e.next_out,B=e.output,a=o-(r-e.avail_out),l=o+(e.avail_out-257),c=n.dmax,u=n.wsize,h=n.whave,f=n.wnext,d=n.window,g=n.hold,_=n.bits,m=n.lencode,p=n.distcode,b=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{_<15&&(g+=k[i++]<<_,_+=8,g+=k[i++]<<_,_+=8),v=m[g&b];t:for(;;){if(w=v>>>24,g>>>=w,_-=w,w=v>>>16&255,w===0)B[o++]=v&65535;else if(w&16){S=v&65535,w&=15,w&&(_<w&&(g+=k[i++]<<_,_+=8),S+=g&(1<<w)-1,g>>>=w,_-=w),_<15&&(g+=k[i++]<<_,_+=8,g+=k[i++]<<_,_+=8),v=p[g&y];r:for(;;){if(w=v>>>24,g>>>=w,_-=w,w=v>>>16&255,w&16){if(x=v&65535,w&=15,_<w&&(g+=k[i++]<<_,_+=8,_<w&&(g+=k[i++]<<_,_+=8)),x+=g&(1<<w)-1,x>c){e.msg="invalid distance too far back",n.mode=Hd;break e}if(g>>>=w,_-=w,w=o-a,x>w){if(w=x-w,w>h&&n.sane){e.msg="invalid distance too far back",n.mode=Hd;break e}if(E=0,T=d,f===0){if(E+=u-w,w<S){S-=w;do B[o++]=d[E++];while(--w);E=o-x,T=B}}else if(f<w){if(E+=u+f-w,w-=f,w<S){S-=w;do B[o++]=d[E++];while(--w);if(E=0,f<S){w=f,S-=w;do B[o++]=d[E++];while(--w);E=o-x,T=B}}}else if(E+=f-w,w<S){S-=w;do B[o++]=d[E++];while(--w);E=o-x,T=B}for(;S>2;)B[o++]=T[E++],B[o++]=T[E++],B[o++]=T[E++],S-=3;S&&(B[o++]=T[E++],S>1&&(B[o++]=T[E++]))}else{E=o-x;do B[o++]=B[E++],B[o++]=B[E++],B[o++]=B[E++],S-=3;while(S>2);S&&(B[o++]=B[E++],S>1&&(B[o++]=B[E++]))}}else if(w&64){e.msg="invalid distance code",n.mode=Hd;break e}else{v=p[(v&65535)+(g&(1<<w)-1)];continue r}break}}else if(w&64)if(w&32){n.mode=kbe;break e}else{e.msg="invalid literal/length code",n.mode=Hd;break e}else{v=m[(v&65535)+(g&(1<<w)-1)];continue t}break}}while(i<s&&o<l);S=_>>3,i-=S,_-=S<<3,g&=(1<<_)-1,e.next_in=i,e.next_out=o,e.avail_in=i<s?5+(s-i):5-(i-s),e.avail_out=o<l?257+(l-o):257-(o-l),n.hold=g,n.bits=_},I2=ys,za=15,D2=852,O2=592,L2=0,ab=1,N2=2,Rbe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Pbe=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Ibe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Dbe=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],Obe=function(e,r,n,i,s,o,a,l){var c=l.bits,u=0,h=0,f=0,d=0,g=0,_=0,m=0,p=0,b=0,y=0,v,w,S,x,E,T=null,k=0,B,P=new I2.Buf16(za+1),O=new I2.Buf16(za+1),A=null,$=0,te,Q,ee;for(u=0;u<=za;u++)P[u]=0;for(h=0;h<i;h++)P[r[n+h]]++;for(g=c,d=za;d>=1&&P[d]===0;d--);if(g>d&&(g=d),d===0)return s[o++]=1<<24|64<<16|0,s[o++]=1<<24|64<<16|0,l.bits=1,0;for(f=1;f<d&&P[f]===0;f++);for(g<f&&(g=f),p=1,u=1;u<=za;u++)if(p<<=1,p-=P[u],p<0)return-1;if(p>0&&(e===L2||d!==1))return-1;for(O[1]=0,u=1;u<za;u++)O[u+1]=O[u]+P[u];for(h=0;h<i;h++)r[n+h]!==0&&(a[O[r[n+h]]++]=h);if(e===L2?(T=A=a,B=19):e===ab?(T=Rbe,k-=257,A=Pbe,$-=257,B=256):(T=Ibe,A=Dbe,B=-1),y=0,h=0,u=f,E=o,_=g,m=0,S=-1,b=1<<g,x=b-1,e===ab&&b>D2||e===N2&&b>O2)return 1;for(;;){te=u-m,a[h]<B?(Q=0,ee=a[h]):a[h]>B?(Q=A[$+a[h]],ee=T[k+a[h]]):(Q=96,ee=0),v=1<<u-m,w=1<<_,f=w;do w-=v,s[E+(y>>m)+w]=te<<24|Q<<16|ee|0;while(w!==0);for(v=1<<u-1;y&v;)v>>=1;if(v!==0?(y&=v-1,y+=v):y=0,h++,--P[u]===0){if(u===d)break;u=r[n+a[h]]}if(u>g&&(y&x)!==S){for(m===0&&(m=g),E+=f,_=u-m,p=1<<_;_+m<d&&(p-=P[_+m],!(p<=0));)_++,p<<=1;if(b+=1<<_,e===ab&&b>D2||e===N2&&b>O2)return 1;S=y&x,s[S]=g<<24|_<<16|E-o|0}}return y!==0&&(s[E+y]=u-m<<24|64<<16|0),l.bits=g,0},hn=ys,Jy=o5,oi=a5,Lbe=Abe,Iu=Obe,Nbe=0,b5=1,y5=2,M2=4,Mbe=5,Ud=6,ma=0,Bbe=1,Fbe=2,Nn=-2,v5=-3,w5=-4,Hbe=-5,B2=8,E5=1,F2=2,H2=3,U2=4,j2=5,$2=6,z2=7,V2=8,W2=9,G2=10,qm=11,Vi=12,lb=13,q2=14,cb=15,K2=16,Y2=17,X2=18,Q2=19,jd=20,$d=21,Z2=22,J2=23,eR=24,tR=25,rR=26,ub=27,nR=28,iR=29,kt=30,S5=31,Ube=32,jbe=852,$be=592,zbe=15,Vbe=zbe;function sR(t){return(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24)}function Wbe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new hn.Buf16(320),this.work=new hn.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function x5(t){var e;return!t||!t.state?Nn:(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=E5,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new hn.Buf32(jbe),e.distcode=e.distdyn=new hn.Buf32($be),e.sane=1,e.back=-1,ma)}function T5(t){var e;return!t||!t.state?Nn:(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,x5(t))}function C5(t,e){var r,n;return!t||!t.state||(n=t.state,e<0?(r=0,e=-e):(r=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?Nn:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,T5(t))}function k5(t,e){var r,n;return t?(n=new Wbe,t.state=n,n.window=null,r=C5(t,e),r!==ma&&(t.state=null),r):Nn}function Gbe(t){return k5(t,Vbe)}var oR=!0,hb,fb;function qbe(t){if(oR){var e;for(hb=new hn.Buf32(512),fb=new hn.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Iu(b5,t.lens,0,288,hb,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Iu(y5,t.lens,0,32,fb,0,t.work,{bits:5}),oR=!1}t.lencode=hb,t.lenbits=9,t.distcode=fb,t.distbits=5}function A5(t,e,r,n){var i,s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new hn.Buf8(s.wsize)),n>=s.wsize?(hn.arraySet(s.window,e,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),hn.arraySet(s.window,e,r-n,i,s.wnext),n-=i,n?(hn.arraySet(s.window,e,r-n,n,0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0}function Kbe(t,e){var r,n,i,s,o,a,l,c,u,h,f,d,g,_,m=0,p,b,y,v,w,S,x,E,T=new hn.Buf8(4),k,B,P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&t.avail_in!==0)return Nn;r=t.state,r.mode===Vi&&(r.mode=lb),o=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,n=t.input,a=t.avail_in,c=r.hold,u=r.bits,h=a,f=l,E=ma;e:for(;;)switch(r.mode){case E5:if(r.wrap===0){r.mode=lb;break}for(;u<16;){if(a===0)break e;a--,c+=n[s++]<<u,u+=8}if(r.wrap&2&&c===35615){r.check=0,T[0]=c&255,T[1]=c>>>8&255,r.check=oi(r.check,T,2,0),c=0,u=0,r.mode=F2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(r.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",r.mode=kt;break}if((c&15)!==B2){t.msg="unknown compression method",r.mode=kt;break}if(c>>>=4,u-=4,x=(c&15)+8,r.wbits===0)r.wbits=x;else if(x>r.wbits){t.msg="invalid window size",r.mode=kt;break}r.dmax=1<<x,t.adler=r.check=1,r.mode=c&512?G2:Vi,c=0,u=0;break;case F2:for(;u<16;){if(a===0)break e;a--,c+=n[s++]<<u,u+=8}if(r.flags=c,(r.flags&255)!==B2){t.msg="unknown compression method",r.mode=kt;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=kt;break}r.head&&(r.head.text=c>>8&1),r.flags&512&&(T[0]=c&255,T[1]=c>>>8&255,r.check=oi(r.check,T,2,0)),c=0,u=0,r.mode=H2;case H2:for(;u<32;){if(a===0)break e;a--,c+=n[s++]<<u,u+=8}r.head&&(r.head.time=c),r.flags&512&&(T[0]=c&255,T[1]=c>>>8&255,T[2]=c>>>16&255,T[3]=c>>>24&255,r.check=oi(r.check,T,4,0)),c=0,u=0,r.mode=U2;case U2:for(;u<16;){if(a===0)break e;a--,c+=n[s++]<<u,u+=8}r.head&&(r.head.xflags=c&255,r.head.os=c>>8),r.flags&512&&(T[0]=c&255,T[1]=c>>>8&255,r.check=oi(r.check,T,2,0)),c=0,u=0,r.mode=j2;case j2:if(r.flags&1024){for(;u<16;){if(a===0)break e;a--,c+=n[s++]<<u,u+=8}r.length=c,r.head&&(r.head.extra_len=c),r.flags&512&&(T[0]=c&255,T[1]=c>>>8&255,r.check=oi(r.check,T,2,0)),c=0,u=0}else r.head&&(r.head.extra=null);r.mode=$2;case $2:if(r.flags&1024&&(d=r.length,d>a&&(d=a),d&&(r.head&&(x=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),hn.arraySet(r.head.extra,n,s,d,x)),r.flags&512&&(r.check=oi(r.check,n,d,s)),a-=d,s+=d,r.length-=d),r.length))break e;r.length=0,r.mode=z2;case z2:if(r.flags&2048){if(a===0)break e;d=0;do x=n[s+d++],r.head&&x&&r.length<65536&&(r.head.name+=String.fromCharCode(x));while(x&&d<a);if(r.flags&512&&(r.check=oi(r.check,n,d,s)),a-=d,s+=d,x)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=V2;case V2:if(r.flags&4096){if(a===0)break e;d=0;do x=n[s+d++],r.head&&x&&r.length<65536&&(r.head.comment+=String.fromCharCode(x));while(x&&d<a);if(r.flags&512&&(r.check=oi(r.check,n,d,s)),a-=d,s+=d,x)break e}else r.head&&(r.head.comment=null);r.mode=W2;case W2:if(r.flags&512){for(;u<16;){if(a===0)break e;a--,c+=n[s++]<<u,u+=8}if(c!==(r.check&65535)){t.msg="header crc mismatch",r.mode=kt;break}c=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Vi;break;case G2:for(;u<32;){if(a===0)break e;a--,c+=n[s++]<<u,u+=8}t.adler=r.check=sR(c),c=0,u=0,r.mode=qm;case qm:if(r.havedict===0)return t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,r.hold=c,r.bits=u,Fbe;t.adler=r.check=1,r.mode=Vi;case Vi:if(e===Mbe||e===Ud)break e;case lb:if(r.last){c>>>=u&7,u-=u&7,r.mode=ub;break}for(;u<3;){if(a===0)break e;a--,c+=n[s++]<<u,u+=8}switch(r.last=c&1,c>>>=1,u-=1,c&3){case 0:r.mode=q2;break;case 1:if(qbe(r),r.mode=jd,e===Ud){c>>>=2,u-=2;break e}break;case 2:r.mode=Y2;break;case 3:t.msg="invalid block type",r.mode=kt}c>>>=2,u-=2;break;case q2:for(c>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,c+=n[s++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",r.mode=kt;break}if(r.length=c&65535,c=0,u=0,r.mode=cb,e===Ud)break e;case cb:r.mode=K2;case K2:if(d=r.length,d){if(d>a&&(d=a),d>l&&(d=l),d===0)break e;hn.arraySet(i,n,s,d,o),a-=d,s+=d,l-=d,o+=d,r.length-=d;break}r.mode=Vi;break;case Y2:for(;u<14;){if(a===0)break e;a--,c+=n[s++]<<u,u+=8}if(r.nlen=(c&31)+257,c>>>=5,u-=5,r.ndist=(c&31)+1,c>>>=5,u-=5,r.ncode=(c&15)+4,c>>>=4,u-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=kt;break}r.have=0,r.mode=X2;case X2:for(;r.have<r.ncode;){for(;u<3;){if(a===0)break e;a--,c+=n[s++]<<u,u+=8}r.lens[P[r.have++]]=c&7,c>>>=3,u-=3}for(;r.have<19;)r.lens[P[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,k={bits:r.lenbits},E=Iu(Nbe,r.lens,0,19,r.lencode,0,r.work,k),r.lenbits=k.bits,E){t.msg="invalid code lengths set",r.mode=kt;break}r.have=0,r.mode=Q2;case Q2:for(;r.have<r.nlen+r.ndist;){for(;m=r.lencode[c&(1<<r.lenbits)-1],p=m>>>24,b=m>>>16&255,y=m&65535,!(p<=u);){if(a===0)break e;a--,c+=n[s++]<<u,u+=8}if(y<16)c>>>=p,u-=p,r.lens[r.have++]=y;else{if(y===16){for(B=p+2;u<B;){if(a===0)break e;a--,c+=n[s++]<<u,u+=8}if(c>>>=p,u-=p,r.have===0){t.msg="invalid bit length repeat",r.mode=kt;break}x=r.lens[r.have-1],d=3+(c&3),c>>>=2,u-=2}else if(y===17){for(B=p+3;u<B;){if(a===0)break e;a--,c+=n[s++]<<u,u+=8}c>>>=p,u-=p,x=0,d=3+(c&7),c>>>=3,u-=3}else{for(B=p+7;u<B;){if(a===0)break e;a--,c+=n[s++]<<u,u+=8}c>>>=p,u-=p,x=0,d=11+(c&127),c>>>=7,u-=7}if(r.have+d>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=kt;break}for(;d--;)r.lens[r.have++]=x}}if(r.mode===kt)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=kt;break}if(r.lenbits=9,k={bits:r.lenbits},E=Iu(b5,r.lens,0,r.nlen,r.lencode,0,r.work,k),r.lenbits=k.bits,E){t.msg="invalid literal/lengths set",r.mode=kt;break}if(r.distbits=6,r.distcode=r.distdyn,k={bits:r.distbits},E=Iu(y5,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,k),r.distbits=k.bits,E){t.msg="invalid distances set",r.mode=kt;break}if(r.mode=jd,e===Ud)break e;case jd:r.mode=$d;case $d:if(a>=6&&l>=258){t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,r.hold=c,r.bits=u,Lbe(t,f),o=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,n=t.input,a=t.avail_in,c=r.hold,u=r.bits,r.mode===Vi&&(r.back=-1);break}for(r.back=0;m=r.lencode[c&(1<<r.lenbits)-1],p=m>>>24,b=m>>>16&255,y=m&65535,!(p<=u);){if(a===0)break e;a--,c+=n[s++]<<u,u+=8}if(b&&!(b&240)){for(v=p,w=b,S=y;m=r.lencode[S+((c&(1<<v+w)-1)>>v)],p=m>>>24,b=m>>>16&255,y=m&65535,!(v+p<=u);){if(a===0)break e;a--,c+=n[s++]<<u,u+=8}c>>>=v,u-=v,r.back+=v}if(c>>>=p,u-=p,r.back+=p,r.length=y,b===0){r.mode=rR;break}if(b&32){r.back=-1,r.mode=Vi;break}if(b&64){t.msg="invalid literal/length code",r.mode=kt;break}r.extra=b&15,r.mode=Z2;case Z2:if(r.extra){for(B=r.extra;u<B;){if(a===0)break e;a--,c+=n[s++]<<u,u+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=J2;case J2:for(;m=r.distcode[c&(1<<r.distbits)-1],p=m>>>24,b=m>>>16&255,y=m&65535,!(p<=u);){if(a===0)break e;a--,c+=n[s++]<<u,u+=8}if(!(b&240)){for(v=p,w=b,S=y;m=r.distcode[S+((c&(1<<v+w)-1)>>v)],p=m>>>24,b=m>>>16&255,y=m&65535,!(v+p<=u);){if(a===0)break e;a--,c+=n[s++]<<u,u+=8}c>>>=v,u-=v,r.back+=v}if(c>>>=p,u-=p,r.back+=p,b&64){t.msg="invalid distance code",r.mode=kt;break}r.offset=y,r.extra=b&15,r.mode=eR;case eR:if(r.extra){for(B=r.extra;u<B;){if(a===0)break e;a--,c+=n[s++]<<u,u+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=kt;break}r.mode=tR;case tR:if(l===0)break e;if(d=f-l,r.offset>d){if(d=r.offset-d,d>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=kt;break}d>r.wnext?(d-=r.wnext,g=r.wsize-d):g=r.wnext-d,d>r.length&&(d=r.length),_=r.window}else _=i,g=o-r.offset,d=r.length;d>l&&(d=l),l-=d,r.length-=d;do i[o++]=_[g++];while(--d);r.length===0&&(r.mode=$d);break;case rR:if(l===0)break e;i[o++]=r.length,l--,r.mode=$d;break;case ub:if(r.wrap){for(;u<32;){if(a===0)break e;a--,c|=n[s++]<<u,u+=8}if(f-=l,t.total_out+=f,r.total+=f,f&&(t.adler=r.check=r.flags?oi(r.check,i,f,o-f):Jy(r.check,i,f,o-f)),f=l,(r.flags?c:sR(c))!==r.check){t.msg="incorrect data check",r.mode=kt;break}c=0,u=0}r.mode=nR;case nR:if(r.wrap&&r.flags){for(;u<32;){if(a===0)break e;a--,c+=n[s++]<<u,u+=8}if(c!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=kt;break}c=0,u=0}r.mode=iR;case iR:E=Bbe;break e;case kt:E=v5;break e;case S5:return w5;case Ube:default:return Nn}return t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,r.hold=c,r.bits=u,(r.wsize||f!==t.avail_out&&r.mode<kt&&(r.mode<ub||e!==M2))&&A5(t,t.output,t.next_out,f-t.avail_out),h-=t.avail_in,f-=t.avail_out,t.total_in+=h,t.total_out+=f,r.total+=f,r.wrap&&f&&(t.adler=r.check=r.flags?oi(r.check,i,f,t.next_out-f):Jy(r.check,i,f,t.next_out-f)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Vi?128:0)+(r.mode===jd||r.mode===cb?256:0),(h===0&&f===0||e===M2)&&E===ma&&(E=Hbe),E}function Ybe(t){if(!t||!t.state)return Nn;var e=t.state;return e.window&&(e.window=null),t.state=null,ma}function Xbe(t,e){var r;return!t||!t.state||(r=t.state,!(r.wrap&2))?Nn:(r.head=e,e.done=!1,ma)}function Qbe(t,e){var r=e.length,n,i,s;return!t||!t.state||(n=t.state,n.wrap!==0&&n.mode!==qm)?Nn:n.mode===qm&&(i=1,i=Jy(i,e,r,0),i!==n.check)?v5:(s=A5(t,e,r,r),s?(n.mode=S5,w5):(n.havedict=1,ma))}Jn.inflateReset=T5;Jn.inflateReset2=C5;Jn.inflateResetKeep=x5;Jn.inflateInit=Gbe;Jn.inflateInit2=k5;Jn.inflate=Kbe;Jn.inflateEnd=Ybe;Jn.inflateGetHeader=Xbe;Jn.inflateSetDictionary=Qbe;Jn.inflateInfo="pako inflate (from Nodeca project)";var R5={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function Zbe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Jbe=Zbe,Cl=Jn,Du=ys,Tp=ka,Ht=R5,ev=rS,e1e=g5,t1e=Jbe,P5=Object.prototype.toString;function ga(t){if(!(this instanceof ga))return new ga(t);this.options=Du.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new e1e,this.strm.avail_out=0;var r=Cl.inflateInit2(this.strm,e.windowBits);if(r!==Ht.Z_OK)throw new Error(ev[r]);if(this.header=new t1e,Cl.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Tp.string2buf(e.dictionary):P5.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=Cl.inflateSetDictionary(this.strm,e.dictionary),r!==Ht.Z_OK)))throw new Error(ev[r])}ga.prototype.push=function(t,e){var r=this.strm,n=this.options.chunkSize,i=this.options.dictionary,s,o,a,l,c,u=!1;if(this.ended)return!1;o=e===~~e?e:e===!0?Ht.Z_FINISH:Ht.Z_NO_FLUSH,typeof t=="string"?r.input=Tp.binstring2buf(t):P5.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new Du.Buf8(n),r.next_out=0,r.avail_out=n),s=Cl.inflate(r,Ht.Z_NO_FLUSH),s===Ht.Z_NEED_DICT&&i&&(s=Cl.inflateSetDictionary(this.strm,i)),s===Ht.Z_BUF_ERROR&&u===!0&&(s=Ht.Z_OK,u=!1),s!==Ht.Z_STREAM_END&&s!==Ht.Z_OK)return this.onEnd(s),this.ended=!0,!1;r.next_out&&(r.avail_out===0||s===Ht.Z_STREAM_END||r.avail_in===0&&(o===Ht.Z_FINISH||o===Ht.Z_SYNC_FLUSH))&&(this.options.to==="string"?(a=Tp.utf8border(r.output,r.next_out),l=r.next_out-a,c=Tp.buf2string(r.output,a),r.next_out=l,r.avail_out=n-l,l&&Du.arraySet(r.output,r.output,a,l,0),this.onData(c)):this.onData(Du.shrinkBuf(r.output,r.next_out))),r.avail_in===0&&r.avail_out===0&&(u=!0)}while((r.avail_in>0||r.avail_out===0)&&s!==Ht.Z_STREAM_END);return s===Ht.Z_STREAM_END&&(o=Ht.Z_FINISH),o===Ht.Z_FINISH?(s=Cl.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===Ht.Z_OK):(o===Ht.Z_SYNC_FLUSH&&(this.onEnd(Ht.Z_OK),r.avail_out=0),!0)};ga.prototype.onData=function(t){this.chunks.push(t)};ga.prototype.onEnd=function(t){t===Ht.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Du.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function iS(t,e){var r=new ga(e);if(r.push(t,!0),r.err)throw r.msg||ev[r.err];return r.result}function r1e(t,e){return e=e||{},e.raw=!0,iS(t,e)}_f.Inflate=ga;_f.inflate=iS;_f.inflateRaw=r1e;_f.ungzip=iS;var n1e=ys.assign,i1e=pf,s1e=_f,o1e=R5,I5={};n1e(I5,i1e,s1e,o1e);var a1e=I5;const sS=mn(a1e),aR=(t,e)=>function(...r){const n=e.promiseModule;return new n((i,s)=>{e.multiArgs?r.push((...o)=>{e.errorFirst?o[0]?s(o):(o.shift(),i(o)):i(o)}):e.errorFirst?r.push((o,a)=>{o?s(o):i(a)}):r.push(i),t.apply(this,r)})};var l1e=(t,e)=>{e=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},e);const r=typeof t;if(!(t!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":r}\``);const n=s=>{const o=a=>typeof a=="string"?s===a:a.test(s);return e.include?e.include.some(o):!e.exclude.some(o)};let i;r==="function"?i=function(...s){return e.excludeMain?t(...s):aR(t,e).apply(this,s)}:i=Object.create(Object.getPrototypeOf(t));for(const s in t){const o=t[s];i[s]=typeof o=="function"&&n(s)?aR(o,e):o}return i};const db=mn(l1e);var lR={};function cR(t){return Array.isArray(t)?t:[t]}const tv="",uR=" ",pb="\\",c1e=/^\s+$/,u1e=/(?:[^\\]|^)\\$/,h1e=/^\\!/,f1e=/^\\#/,d1e=/\r?\n/g,p1e=/^\.*\/|^\.+$/,mb="/";let D5="node-ignore";typeof Symbol<"u"&&(D5=Symbol.for("node-ignore"));const hR=D5,m1e=(t,e,r)=>Object.defineProperty(t,e,{value:r}),g1e=/([0-z])-([0-z])/g,O5=()=>!1,_1e=t=>t.replace(g1e,(e,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?e:tv),b1e=t=>{const{length:e}=t;return t.slice(0,e-e%2)},y1e=[[/^\uFEFF/,()=>tv],[/((?:\\\\)*?)(\\?\s+)$/,(t,e,r)=>e+(r.indexOf("\\")===0?uR:tv)],[/(\\+?)\s/g,(t,e)=>{const{length:r}=e;return e.slice(0,r-r%2)+uR}],[/[\\$.|*+(){^]/g,t=>`\\${t}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(t,e,r)=>e+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(t,e,r)=>{const n=r.replace(/\\\*/g,"[^\\/]*");return e+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>pb],[/\\\\/g,()=>pb],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(t,e,r,n,i)=>e===pb?`\\[${r}${b1e(n)}${i}`:i==="]"&&n.length%2===0?`[${_1e(r)}${n}]`:"[]"],[/(?:[^*])$/,t=>/\/$/.test(t)?`${t}$`:`${t}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(t,e)=>`${e?`${e}[^/]+`:"[^/]*"}(?=$|\\/$)`]],fR=Object.create(null),v1e=(t,e)=>{let r=fR[t];return r||(r=y1e.reduce((n,[i,s])=>n.replace(i,s.bind(t)),t),fR[t]=r),e?new RegExp(r,"i"):new RegExp(r)},oS=t=>typeof t=="string",w1e=t=>t&&oS(t)&&!c1e.test(t)&&!u1e.test(t)&&t.indexOf("#")!==0,E1e=t=>t.split(d1e);class S1e{constructor(e,r,n,i){this.origin=e,this.pattern=r,this.negative=n,this.regex=i}}const x1e=(t,e)=>{const r=t;let n=!1;t.indexOf("!")===0&&(n=!0,t=t.substr(1)),t=t.replace(h1e,"!").replace(f1e,"#");const i=v1e(t,e);return new S1e(r,t,n,i)},T1e=(t,e)=>{throw new e(t)},ds=(t,e,r)=>oS(t)?t?ds.isNotRelative(t)?r(`path should be a \`path.relative()\`d string, but got "${e}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${e}\``,TypeError),L5=t=>p1e.test(t);ds.isNotRelative=L5;ds.convert=t=>t;class C1e{constructor({ignorecase:e=!0,ignoreCase:r=e,allowRelativePaths:n=!1}={}){m1e(this,hR,!0),this._rules=[],this._ignoreCase=r,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(e){if(e&&e[hR]){this._rules=this._rules.concat(e._rules),this._added=!0;return}if(w1e(e)){const r=x1e(e,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(e){return this._added=!1,cR(oS(e)?E1e(e):e).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(e){return this.add(e)}_testOne(e,r){let n=!1,i=!1;return this._rules.forEach(s=>{const{negative:o}=s;if(i===o&&n!==i||o&&!n&&!i&&!r)return;s.regex.test(e)&&(n=!o,i=o)}),{ignored:n,unignored:i}}_test(e,r,n,i){const s=e&&ds.convert(e);return ds(s,e,this._allowRelativePaths?O5:T1e),this._t(s,r,n,i)}_t(e,r,n,i){if(e in r)return r[e];if(i||(i=e.split(mb)),i.pop(),!i.length)return r[e]=this._testOne(e,n);const s=this._t(i.join(mb)+mb,r,n,i);return r[e]=s.ignored?s:this._testOne(e,n)}ignores(e){return this._test(e,this._ignoreCache,!1).ignored}createFilter(){return e=>!this.ignores(e)}filter(e){return cR(e).filter(this.createFilter())}test(e){return this._test(e,this._testCache,!0)}}const Km=t=>new C1e(t),k1e=t=>ds(t&&ds.convert(t),t,O5);Km.isPathValid=k1e;Km.default=Km;var A1e=Km;if(typeof Ft<"u"&&(lR&&lR.IGNORE_TEST_WIN32||Ft.platform==="win32")){const t=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");ds.convert=t;const e=/^[a-z]:\//i;ds.isNotRelative=r=>e.test(r)||L5(r)}const R1e=mn(A1e);function P1e(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ai(t,e,r){return e=e instanceof RegExp?e:new RegExp(P1e(e),"g"),t.replace(e,r)}var I1e={clean:function(e){if(typeof e!="string")throw new Error("Expected a string, received: "+e);return e=ai(e,"./","/"),e=ai(e,"..","."),e=ai(e," ","-"),e=ai(e,/^[~^:?*\\\-]/g,""),e=ai(e,/[~^:?*\\]/g,"-"),e=ai(e,/[~^:?*\\\-]$/g,""),e=ai(e,"@{","-"),e=ai(e,/\.$/g,""),e=ai(e,/\/$/g,""),e=ai(e,/\.lock$/g,""),e}},D1e=I1e;const Ai=mn(D1e);var O1e=function(t,e){var r=t,n=e,i=r.length,s=n.length,o=!1,a=null,l=i+1,c=[],u=[],h=[],f="",d=-1,g=0,_=1,m,p,b=function(){i>=s&&(m=r,p=i,r=n,n=m,i=s,s=p,o=!0,l=i+1)},y=function(x,E,T){return{x,y:E,k:T}},v=function(x,E){return{elem:x,t:E}},w=function(x,E,T){var k,B,P;for(E>T?k=c[x-1+l]:k=c[x+1+l],P=Math.max(E,T),B=P-x;B<i&&P<s&&r[B]===n[P];)++B,++P;return c[x+l]=u.length,u[u.length]=new y(B,P,k),P},S=function(x){var E,T,k;for(E=T=0,k=x.length-1;k>=0;--k)for(;E<x[k].x||T<x[k].y;)x[k].y-x[k].x>T-E?(o?h[h.length]=new v(n[T],d):h[h.length]=new v(n[T],_),++T):x[k].y-x[k].x<T-E?(o?h[h.length]=new v(r[E],_):h[h.length]=new v(r[E],d),++E):(h[h.length]=new v(r[E],g),f+=r[E],++E,++T)};return b(),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return a},getlcs:function(){return f},getses:function(){return h},compose:function(){var x,E,T,k,B,P,O,A;for(x=s-i,E=i+s+3,T={},O=0;O<E;++O)T[O]=-1,c[O]=-1;k=-1;do{for(++k,A=-k;A<=x-1;++A)T[A+l]=w(A,T[A-1+l]+1,T[A+1+l]);for(A=x+k;A>=x+1;--A)T[A+l]=w(A,T[A-1+l]+1,T[A+1+l]);T[x+l]=w(x,T[x-1+l]+1,T[x+1+l])}while(T[x+l]!==s);for(a=x+2*k,B=c[x+l],P=[];B!==-1;)P[P.length]=new y(u[B].x,u[B].y,null),B=u[B].k;S(P)}}},L1e=O1e;function N1e(t,e){var r=new L1e(t,e);r.compose();for(var n=r.getses(),i,s,o=t.length-1,a=e.length-1,l=n.length-1;l>=0;--l)n[l].t===r.SES_COMMON?(s?(s.chain={file1index:o,file2index:a,chain:null},s=s.chain):(i={file1index:o,file2index:a,chain:null},s=i),o--,a--):n[l].t===r.SES_DELETE?o--:n[l].t===r.SES_ADD&&a--;var c={file1index:-1,file2index:-1,chain:null};return s?(s.chain=c,i):c}function dR(t,e){for(var r=[],n=t.length,i=e.length,s=N1e(t,e);s!==null;s=s.chain){var o=n-s.file1index-1,a=i-s.file2index-1;n=s.file1index,i=s.file2index,(o||a)&&r.push({file1:[n+1,o],file2:[i+1,a]})}return r.reverse(),r}function M1e(t,e,r){var n,i=dR(e,t),s=dR(e,r),o=[];function a(O,A){o.push([O.file1[0],A,O.file1[1],O.file2[0],O.file2[1]])}for(n=0;n<i.length;n++)a(i[n],0);for(n=0;n<s.length;n++)a(s[n],2);o.sort(function(O,A){return O[0]-A[0]});var l=[],c=0;function u(O){O>c&&(l.push([1,c,O-c]),c=O)}for(var h=0;h<o.length;h++){for(var f=h,d=o[h],g=d[0],_=g+d[2];h<o.length-1;){var m=o[h+1],p=m[0];if(p>_)break;_=Math.max(_,p+m[2]),h++}if(u(g),f==h)d[4]>0&&l.push([d[1],d[3],d[4]]);else{var b={0:[t.length,-1,e.length,-1],2:[r.length,-1,e.length,-1]};for(n=f;n<=h;n++){d=o[n];var y=d[1],v=b[y],w=d[0],S=w+d[2],x=d[3],E=x+d[4];v[0]=Math.min(x,v[0]),v[1]=Math.max(E,v[1]),v[2]=Math.min(w,v[2]),v[3]=Math.max(S,v[3])}var T=b[0][0]+(g-b[0][2]),k=b[0][1]+(_-b[0][3]),B=b[2][0]+(g-b[2][2]),P=b[2][1]+(_-b[2][3]);l.push([-1,T,k-T,g,_-g,B,P-B])}c=_}return u(e.length),l}function B1e(t,e,r){var n=[],i=[t,e,r],s=M1e(t,e,r),o=[];function a(){o.length&&n.push({ok:o}),o=[]}function l(d){for(var g=0;g<d.length;g++)o.push(d[g])}function c(d){if(d[2]!=d[6])return!0;for(var g=d[1],_=d[5],m=0;m<d[2];m++)if(t[m+g]!=r[m+_])return!0;return!1}for(var u=0;u<s.length;u++){var h=s[u],f=h[0];f==-1?c(h)?(a(),n.push({conflict:{a:t.slice(h[1],h[1]+h[2]),aIndex:h[1],o:e.slice(h[3],h[3]+h[4]),oIndex:h[3],b:r.slice(h[5],h[5]+h[6]),bIndex:h[5]}})):l(i[0].slice(h[1],h[1]+h[2])):l(i[f].slice(h[1],h[1]+h[2]))}return a(),n}var F1e=B1e;const H1e=mn(F1e);class lt extends Error{constructor(e){super(e),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(e){const r=new lt(e.message);return r.code=e.code,r.data=e.data,r.caller=e.caller,r.stack=e.stack,r}get isIsomorphicGitError(){return!0}}class bf extends lt{constructor(e){super(`Modifying the index is not possible because you have unmerged files: ${e.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=bf.code,this.data={filepaths:e}}}bf.code="UnmergedPathsError";class Ye extends lt{constructor(e){super(`An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${e}`),this.code=this.name=Ye.code,this.data={message:e}}}Ye.code="InternalError";class yc extends lt{constructor(e){super(`The filepath "${e}" contains unsafe character sequences`),this.code=this.name=yc.code,this.data={filepath:e}}}yc.code="UnsafeFilepathError";class Si{constructor(e){this.buffer=e,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(e){this._start=e}slice(e){const r=this.buffer.slice(this._start,this._start+e);return this._start+=e,r}toString(e,r){const n=this.buffer.toString(e,this._start,this._start+r);return this._start+=r,n}write(e,r,n){const i=this.buffer.write(e,this._start,r,n);return this._start+=r,i}copy(e,r,n){const i=e.copy(this.buffer,this._start,r,n);return this._start+=i,i}readUInt8(){const e=this.buffer.readUInt8(this._start);return this._start+=1,e}writeUInt8(e){const r=this.buffer.writeUInt8(e,this._start);return this._start+=1,r}readUInt16BE(){const e=this.buffer.readUInt16BE(this._start);return this._start+=2,e}writeUInt16BE(e){const r=this.buffer.writeUInt16BE(e,this._start);return this._start+=2,r}readUInt32BE(){const e=this.buffer.readUInt32BE(this._start);return this._start+=4,e}writeUInt32BE(e){const r=this.buffer.writeUInt32BE(e,this._start);return this._start+=4,r}}function f0(t,e){return-(t<e)||+(t>e)}function N5(t,e){return f0(t.path,e.path)}function M5(t){let e=t>0?t>>12:0;e!==4&&e!==8&&e!==10&&e!==14&&(e=8);let r=t&511;return r&73?r=493:r=420,e!==8&&(r=0),(e<<12)+r}const li=2**32;function pR(t,e,r,n){if(t!==void 0&&e!==void 0)return[t,e];r===void 0&&(r=n.valueOf());const i=Math.floor(r/1e3),s=(r-i*1e3)*1e6;return[i,s]}function zl(t){const[e,r]=pR(t.ctimeSeconds,t.ctimeNanoseconds,t.ctimeMs,t.ctime),[n,i]=pR(t.mtimeSeconds,t.mtimeNanoseconds,t.mtimeMs,t.mtime);return{ctimeSeconds:e%li,ctimeNanoseconds:r%li,mtimeSeconds:n%li,mtimeNanoseconds:i%li,dev:t.dev%li,ino:t.ino%li,mode:M5(t.mode%li),uid:t.uid%li,gid:t.gid%li,size:t.size>-1?t.size%li:0}}function U1e(t){let e="";for(const r of new Uint8Array(t))r<16&&(e+="0"),e+=r.toString(16);return e}let gb=null;async function ps(t){return gb===null&&(gb=await $1e()),gb?B5(t):j1e(t)}function j1e(t){return new z4().update(t).digest("hex")}async function B5(t){const e=await crypto.subtle.digest("SHA-1",t);return U1e(e)}async function $1e(){try{if(await B5(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709")return!0}catch{}return!1}function z1e(t){return{assumeValid:!!(t&32768),extended:!!(t&16384),stage:(t&12288)>>12,nameLength:t&4095}}function V1e(t){const e=t.flags;return e.extended=!1,e.nameLength=Math.min(Ne.from(t.path).length,4095),(e.assumeValid?32768:0)+(e.extended?16384:0)+((e.stage&3)<<12)+(e.nameLength&4095)}class Po{constructor(e,r){this._dirty=!1,this._unmergedPaths=r||new Set,this._entries=e||new Map}_addEntry(e){if(e.flags.stage===0)e.stages=[e],this._entries.set(e.path,e),this._unmergedPaths.delete(e.path);else{let r=this._entries.get(e.path);r||(this._entries.set(e.path,e),r=e),r.stages[e.flags.stage]=e,this._unmergedPaths.add(e.path)}}static async from(e){if(Ne.isBuffer(e))return Po.fromBuffer(e);if(e===null)return new Po(null);throw new Ye("invalid type passed to GitIndex.from")}static async fromBuffer(e){if(e.length===0)throw new Ye("Index file is empty (.git/index)");const r=new Po,n=new Si(e),i=n.toString("utf8",4);if(i!=="DIRC")throw new Ye(`Invalid dircache magic file number: ${i}`);const s=await ps(e.slice(0,-20)),o=e.slice(-20).toString("hex");if(o!==s)throw new Ye(`Invalid checksum in GitIndex buffer: expected ${o} but saw ${s}`);const a=n.readUInt32BE();if(a!==2)throw new Ye(`Unsupported dircache version: ${a}`);const l=n.readUInt32BE();let c=0;for(;!n.eof()&&c<l;){const u={};u.ctimeSeconds=n.readUInt32BE(),u.ctimeNanoseconds=n.readUInt32BE(),u.mtimeSeconds=n.readUInt32BE(),u.mtimeNanoseconds=n.readUInt32BE(),u.dev=n.readUInt32BE(),u.ino=n.readUInt32BE(),u.mode=n.readUInt32BE(),u.uid=n.readUInt32BE(),u.gid=n.readUInt32BE(),u.size=n.readUInt32BE(),u.oid=n.slice(20).toString("hex");const h=n.readUInt16BE();u.flags=z1e(h);const f=e.indexOf(0,n.tell()+1)-n.tell();if(f<1)throw new Ye(`Got a path length of: ${f}`);if(u.path=n.toString("utf8",f),u.path.includes("..\\")||u.path.includes("../"))throw new yc(u.path);let d=8-(n.tell()-12)%8;for(d===0&&(d=8);d--;){const g=n.readUInt8();if(g!==0)throw new Ye(`Expected 1-8 null characters but got '${g}' after ${u.path}`);if(n.eof())throw new Ye("Unexpected end of file")}u.stages=[],r._addEntry(u),c++}return r}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort(N5)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(e=>e.stages.length>1?e.stages.filter(r=>r):e)}*[Symbol.iterator](){for(const e of this.entries)yield e}insert({filepath:e,stats:r,oid:n,stage:i=0}){r||(r={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),r=zl(r);const s=Ne.from(e),o={ctimeSeconds:r.ctimeSeconds,ctimeNanoseconds:r.ctimeNanoseconds,mtimeSeconds:r.mtimeSeconds,mtimeNanoseconds:r.mtimeNanoseconds,dev:r.dev,ino:r.ino,mode:r.mode||33188,uid:r.uid,gid:r.gid,size:r.size,path:e,oid:n,flags:{assumeValid:!1,extended:!1,stage:i,nameLength:s.length<4095?s.length:4095},stages:[]};this._addEntry(o),this._dirty=!0}delete({filepath:e}){if(this._entries.has(e))this._entries.delete(e);else for(const r of this._entries.keys())r.startsWith(e+"/")&&this._entries.delete(r);this._unmergedPaths.has(e)&&this._unmergedPaths.delete(e),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:e}){return this._entries.has(e)}render(){return this.entries.map(e=>`${e.mode.toString(8)} ${e.oid}    ${e.path}`).join(`
`)}static async _entryToBuffer(e){const r=Ne.from(e.path),n=Math.ceil((62+r.length+1)/8)*8,i=Ne.alloc(n),s=new Si(i),o=zl(e);return s.writeUInt32BE(o.ctimeSeconds),s.writeUInt32BE(o.ctimeNanoseconds),s.writeUInt32BE(o.mtimeSeconds),s.writeUInt32BE(o.mtimeNanoseconds),s.writeUInt32BE(o.dev),s.writeUInt32BE(o.ino),s.writeUInt32BE(o.mode),s.writeUInt32BE(o.uid),s.writeUInt32BE(o.gid),s.writeUInt32BE(o.size),s.write(e.oid,20,"hex"),s.writeUInt16BE(V1e(e)),s.write(e.path,r.length,"utf8"),i}async toObject(){const e=Ne.alloc(12),r=new Si(e);r.write("DIRC",4,"utf8"),r.writeUInt32BE(2),r.writeUInt32BE(this.entriesFlat.length);let n=[];for(const a of this.entries)if(n.push(Po._entryToBuffer(a)),a.stages.length>1)for(const l of a.stages)l&&l!==a&&n.push(Po._entryToBuffer(l));n=await Promise.all(n);const i=Ne.concat(n),s=Ne.concat([e,i]),o=await ps(s);return Ne.concat([s,Ne.from(o,"hex")])}}function Ym(t,e,r=!0,n=!0){const i=zl(t),s=zl(e);return r&&i.mode!==s.mode||i.mtimeSeconds!==s.mtimeSeconds||i.ctimeSeconds!==s.ctimeSeconds||i.uid!==s.uid||i.gid!==s.gid||n&&i.ino!==s.ino||i.size!==s.size}let _b=null;const Va=Symbol("IndexCache");function W1e(){return{map:new Map,stats:new Map}}async function G1e(t,e,r){const n=await t.lstat(e),i=await t.read(e),s=await Po.from(i);r.map.set(e,s),r.stats.set(e,n)}async function q1e(t,e,r){const n=r.stats.get(e);if(n===void 0)return!0;const i=await t.lstat(e);return n===null||i===null?!1:Ym(n,i)}class pr{static async acquire({fs:e,gitdir:r,cache:n,allowUnmerged:i=!0},s){n[Va]||(n[Va]=W1e());const o=`${r}/index`;_b===null&&(_b=new Wm({maxPending:1/0}));let a,l=[];return await _b.acquire(o,async()=>{await q1e(e,o,n[Va])&&await G1e(e,o,n[Va]);const c=n[Va].map.get(o);if(l=c.unmergedPaths,l.length&&!i)throw new bf(l);if(a=await s(c),c._dirty){const u=await c.toObject();await e.write(o,u),n[Va].stats.set(o,await e.lstat(o)),c._dirty=!1}}),a}}function Xm(t){const e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return e>-1&&(t=t.slice(e+1)),t}function Vl(t){const e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return e===-1?".":e===0?"/":t.slice(0,e)}function F5(t){const e=new Map,r=function(i){if(!e.has(i)){const s={type:"tree",fullpath:i,basename:Xm(i),metadata:{},children:[]};e.set(i,s),s.parent=r(Vl(i)),s.parent&&s.parent!==s&&s.parent.children.push(s)}return e.get(i)},n=function(i,s){if(!e.has(i)){const o={type:"blob",fullpath:i,basename:Xm(i),metadata:s,parent:r(Vl(i)),children:[]};o.parent&&o.parent.children.push(o),e.set(i,o)}return e.get(i)};r(".");for(const i of t)n(i.path,i);return e}function K1e(t){switch(t){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new Ye(`Unexpected GitTree entry mode: ${t.toString(8)}`)}class Y1e{constructor({fs:e,gitdir:r,cache:n}){this.treePromise=pr.acquire({fs:e,gitdir:r,cache:n},async function(s){return F5(s.entries)});const i=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(e){const r=e._fullpath,i=(await this.treePromise).get(r);if(!i||i.type==="blob")return null;if(i.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${r}'`);const s=i.children.map(o=>o.fullpath);return s.sort(f0),s}async type(e){return e._type===!1&&await e.stat(),e._type}async mode(e){return e._mode===!1&&await e.stat(),e._mode}async stat(e){if(e._stat===!1){const n=(await this.treePromise).get(e._fullpath);if(!n)throw new Error(`ENOENT: no such file or directory, lstat '${e._fullpath}'`);const i=n.type==="tree"?{}:zl(n.metadata);e._type=n.type==="tree"?"tree":K1e(i.mode),e._mode=i.mode,n.type==="tree"?e._stat=void 0:e._stat=i}return e._stat}async content(e){}async oid(e){if(e._oid===!1){const n=(await this.treePromise).get(e._fullpath);e._oid=n.metadata.oid}return e._oid}}const d0=Symbol("GitWalkSymbol");function p0(){const t=Object.create(null);return Object.defineProperty(t,d0,{value:function({fs:e,gitdir:r,cache:n}){return new Y1e({fs:e,gitdir:r,cache:n})}}),Object.freeze(t),t}class Tt extends lt{constructor(e){super(`Could not find ${e}.`),this.code=this.name=Tt.code,this.data={what:e}}}Tt.code="NotFoundError";class Ur extends lt{constructor(e,r,n,i){super(`Object ${e} ${i?`at ${i}`:""}was anticipated to be a ${n} but it is a ${r}.`),this.code=this.name=Ur.code,this.data={oid:e,actual:r,expected:n,filepath:i}}}Ur.code="ObjectTypeError";class so extends lt{constructor(e){super(`Expected a 40-char hex object id but saw "${e}".`),this.code=this.name=so.code,this.data={value:e}}}so.code="InvalidOidError";class yf extends lt{constructor(e){super(`Could not find a fetch refspec for remote "${e}". Make sure the config file has an entry like the following:
[remote "${e}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=yf.code,this.data={remote:e}}}yf.code="NoRefspecError";class Qm{constructor(e){if(this.refs=new Map,this.parsedConfig=[],e){let r=null;this.parsedConfig=e.trim().split(`
`).map(n=>{if(/^\s*#/.test(n))return{line:n,comment:!0};const i=n.indexOf(" ");if(n.startsWith("^")){const s=n.slice(1);return this.refs.set(r+"^{}",s),{line:n,ref:r,peeled:s}}else{const s=n.slice(0,i);return r=n.slice(i+1),this.refs.set(r,s),{line:n,ref:r,oid:s}}})}return this}static from(e){return new Qm(e)}delete(e){this.parsedConfig=this.parsedConfig.filter(r=>r.ref!==e),this.refs.delete(e)}toString(){return this.parsedConfig.map(({line:e})=>e).join(`
`)+`
`}}class Zm{constructor({remotePath:e,localPath:r,force:n,matchPrefix:i}){Object.assign(this,{remotePath:e,localPath:r,force:n,matchPrefix:i})}static from(e){const[r,n,i,s,o]=e.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),a=r==="+",l=i==="*";if(l!==(o==="*"))throw new Ye("Invalid refspec");return new Zm({remotePath:n,localPath:s,force:a,matchPrefix:l})}translate(e){if(this.matchPrefix){if(e.startsWith(this.remotePath))return this.localPath+e.replace(this.remotePath,"")}else if(e===this.remotePath)return this.localPath;return null}reverseTranslate(e){if(this.matchPrefix){if(e.startsWith(this.localPath))return this.remotePath+e.replace(this.localPath,"")}else if(e===this.localPath)return this.remotePath;return null}}class aS{constructor(e=[]){this.rules=e}static from(e){const r=[];for(const n of e)r.push(Zm.from(n));return new aS(r)}add(e){const r=Zm.from(e);this.rules.push(r)}translate(e){const r=[];for(const n of this.rules)for(const i of e){const s=n.translate(i);s&&r.push([i,s])}return r}translateOne(e){let r=null;for(const n of this.rules){const i=n.translate(e);i&&(r=i)}return r}localNamespaces(){return this.rules.filter(e=>e.matchPrefix).map(e=>e.localPath.replace(/\/$/,""))}}function X1e(t,e){const r=t.replace(/\^\{\}$/,""),n=e.replace(/\^\{\}$/,""),i=-(r<n)||+(r>n);return i===0?t.endsWith("^{}")?1:-1:i}const Q1e=t=>{t=t.toLowerCase();let e=parseInt(t);return t.endsWith("k")&&(e*=1024),t.endsWith("m")&&(e*=1024*1024),t.endsWith("g")&&(e*=1024*1024*1024),e},Gc=t=>{if(t=t.trim().toLowerCase(),t==="true"||t==="yes"||t==="on")return!0;if(t==="false"||t==="no"||t==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${t}`)},mR={core:{filemode:Gc,bare:Gc,logallrefupdates:Gc,symlinks:Gc,ignorecase:Gc,bigFileThreshold:Q1e}},Z1e=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,J1e=/^[A-Za-z0-9-.]+$/,eye=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,tye=/^[A-Za-z][A-Za-z-]*$/,rye=/^(.*?)( *[#;].*)$/,nye=t=>{const e=Z1e.exec(t);if(e!=null){const[r,n]=e.slice(1);return[r,n]}return null},iye=t=>{const e=eye.exec(t);if(e!=null){const[r,n="true"]=e.slice(1),i=sye(n),s=oye(i);return[r,s]}return null},sye=t=>{const e=rye.exec(t);if(e==null)return t;const[r,n]=e.slice(1);return gR(r)&&gR(n)?`${r}${n}`:r},gR=t=>(t.match(/(?:^|[^\\])"/g)||[]).length%2!==0,oye=t=>t.split("").reduce((e,r,n,i)=>{const s=r==='"'&&i[n-1]!=="\\",o=r==="\\"&&i[n+1]==='"';return s||o?e:e+r},""),_R=t=>t!=null?t.toLowerCase():null,rv=(t,e,r)=>[_R(t),e,_R(r)].filter(n=>n!=null).join("."),bR=t=>{const e=t.split("."),r=e.shift(),n=e.pop(),i=e.length?e.join("."):void 0;return{section:r,subsection:i,name:n,path:rv(r,i,n),sectionPath:rv(r,i,null)}},aye=(t,e)=>t.reduce((r,n,i)=>e(n)?i:r,-1);class lS{constructor(e){let r=null,n=null;this.parsedConfig=e?e.split(`
`).map(i=>{let s=null,o=null;const a=i.trim(),l=nye(a),c=l!=null;if(c)[r,n]=l;else{const h=iye(a);h!=null&&([s,o]=h)}const u=rv(r,n,s);return{line:i,isSection:c,section:r,subsection:n,name:s,value:o,path:u}}):[]}static from(e){return new lS(e)}async get(e,r=!1){const n=bR(e).path,i=this.parsedConfig.filter(s=>s.path===n).map(({section:s,name:o,value:a})=>{const l=mR[s]&&mR[s][o];return l?l(a):a});return r?i:i.pop()}async getall(e){return this.get(e,!0)}async getSubsections(e){return this.parsedConfig.filter(r=>r.section===e&&r.isSection).map(r=>r.subsection)}async deleteSection(e,r){this.parsedConfig=this.parsedConfig.filter(n=>!(n.section===e&&n.subsection===r))}async append(e,r){return this.set(e,r,!0)}async set(e,r,n=!1){const{section:i,subsection:s,name:o,path:a,sectionPath:l}=bR(e),c=aye(this.parsedConfig,u=>u.path===a);if(r==null)c!==-1&&this.parsedConfig.splice(c,1);else if(c!==-1){const u=this.parsedConfig[c],h=Object.assign({},u,{name:o,value:r,modified:!0});n?this.parsedConfig.splice(c+1,0,h):this.parsedConfig[c]=h}else{const u=this.parsedConfig.findIndex(f=>f.path===l),h={section:i,subsection:s,name:o,value:r,modified:!0,path:a};if(J1e.test(i)&&tye.test(o))if(u>=0)this.parsedConfig.splice(u+1,0,h);else{const f={section:i,subsection:s,modified:!0,path:l};this.parsedConfig.push(f,h)}}}toString(){return this.parsedConfig.map(({line:e,section:r,subsection:n,name:i,value:s,modified:o=!1})=>o?i!=null&&s!=null?typeof s=="string"&&/[#;]/.test(s)?`	${i} = "${s}"`:`	${i} = ${s}`:n!=null?`[${r} "${n}"]`:`[${r}]`:e).join(`
`)}}class zt{static async get({fs:e,gitdir:r}){const n=await e.read(`${r}/config`,{encoding:"utf8"});return lS.from(n)}static async save({fs:e,gitdir:r,config:n}){await e.write(`${r}/config`,n.toString(),{encoding:"utf8"})}}const zd=t=>[`${t}`,`refs/${t}`,`refs/tags/${t}`,`refs/heads/${t}`,`refs/remotes/${t}`,`refs/remotes/${t}/HEAD`],lye=["config","description","index","shallow","commondir"];let bb;async function Ss(t,e){return bb===void 0&&(bb=new Wm),bb.acquire(t,e)}class Le{static async updateRemoteRefs({fs:e,gitdir:r,remote:n,refs:i,symrefs:s,tags:o,refspecs:a=void 0,prune:l=!1,pruneTags:c=!1}){for(const m of i.values())if(!m.match(/[0-9a-f]{40}/))throw new so(m);const u=await zt.get({fs:e,gitdir:r});if(!a){if(a=await u.getall(`remote.${n}.fetch`),a.length===0)throw new yf(n);a.unshift(`+HEAD:refs/remotes/${n}/HEAD`)}const h=aS.from(a),f=new Map;if(c){const m=await Le.listRefs({fs:e,gitdir:r,filepath:"refs/tags"});await Le.deleteRefs({fs:e,gitdir:r,refs:m.map(p=>`refs/tags/${p}`)})}if(o){for(const m of i.keys())if(m.startsWith("refs/tags")&&!m.endsWith("^{}")&&!await Le.exists({fs:e,gitdir:r,ref:m})){const p=i.get(m);f.set(m,p)}}const d=h.translate([...i.keys()]);for(const[m,p]of d){const b=i.get(m);f.set(p,b)}const g=h.translate([...s.keys()]);for(const[m,p]of g){const b=s.get(m),y=h.translateOne(b);y&&f.set(p,`ref: ${y}`)}const _=[];if(l){for(const m of h.localNamespaces()){const p=(await Le.listRefs({fs:e,gitdir:r,filepath:m})).map(b=>`${m}/${b}`);for(const b of p)f.has(b)||_.push(b)}_.length>0&&await Le.deleteRefs({fs:e,gitdir:r,refs:_})}for(const[m,p]of f)await Ss(m,async()=>e.write(Re.join(r,m),`${p.trim()}
`,"utf8"));return{pruned:_}}static async writeRef({fs:e,gitdir:r,ref:n,value:i}){if(!i.match(/[0-9a-f]{40}/))throw new so(i);await Ss(n,async()=>e.write(Re.join(r,n),`${i.trim()}
`,"utf8"))}static async writeSymbolicRef({fs:e,gitdir:r,ref:n,value:i}){await Ss(n,async()=>e.write(Re.join(r,n),`ref: ${i.trim()}
`,"utf8"))}static async deleteRef({fs:e,gitdir:r,ref:n}){return Le.deleteRefs({fs:e,gitdir:r,refs:[n]})}static async deleteRefs({fs:e,gitdir:r,refs:n}){await Promise.all(n.map(a=>e.rm(Re.join(r,a))));let i=await Ss("packed-refs",async()=>e.read(`${r}/packed-refs`,{encoding:"utf8"}));const s=Qm.from(i),o=s.refs.size;for(const a of n)s.refs.has(a)&&s.delete(a);s.refs.size<o&&(i=s.toString(),await Ss("packed-refs",async()=>e.write(`${r}/packed-refs`,i,{encoding:"utf8"})))}static async resolve({fs:e,gitdir:r,ref:n,depth:i=void 0}){if(i!==void 0&&(i--,i===-1))return n;if(n.startsWith("ref: "))return n=n.slice(5),Le.resolve({fs:e,gitdir:r,ref:n,depth:i});if(n.length===40&&/[0-9a-f]{40}/.test(n))return n;const s=await Le.packedRefs({fs:e,gitdir:r}),o=zd(n).filter(a=>!lye.includes(a));for(const a of o){const l=await Ss(a,async()=>await e.read(`${r}/${a}`,{encoding:"utf8"})||s.get(a));if(l)return Le.resolve({fs:e,gitdir:r,ref:l.trim(),depth:i})}throw new Tt(n)}static async exists({fs:e,gitdir:r,ref:n}){try{return await Le.expand({fs:e,gitdir:r,ref:n}),!0}catch{return!1}}static async expand({fs:e,gitdir:r,ref:n}){if(n.length===40&&/[0-9a-f]{40}/.test(n))return n;const i=await Le.packedRefs({fs:e,gitdir:r}),s=zd(n);for(const o of s)if(await Ss(o,async()=>e.exists(`${r}/${o}`))||i.has(o))return o;throw new Tt(n)}static async expandAgainstMap({ref:e,map:r}){const n=zd(e);for(const i of n)if(await r.has(i))return i;throw new Tt(e)}static resolveAgainstMap({ref:e,fullref:r=e,depth:n=void 0,map:i}){if(n!==void 0&&(n--,n===-1))return{fullref:r,oid:e};if(e.startsWith("ref: "))return e=e.slice(5),Le.resolveAgainstMap({ref:e,fullref:r,depth:n,map:i});if(e.length===40&&/[0-9a-f]{40}/.test(e))return{fullref:r,oid:e};const s=zd(e);for(const o of s){const a=i.get(o);if(a)return Le.resolveAgainstMap({ref:a.trim(),fullref:o,depth:n,map:i})}throw new Tt(e)}static async packedRefs({fs:e,gitdir:r}){const n=await Ss("packed-refs",async()=>e.read(`${r}/packed-refs`,{encoding:"utf8"}));return Qm.from(n).refs}static async listRefs({fs:e,gitdir:r,filepath:n}){const i=Le.packedRefs({fs:e,gitdir:r});let s=null;try{s=await e.readdirDeep(`${r}/${n}`),s=s.map(o=>o.replace(`${r}/${n}/`,""))}catch{s=[]}for(let o of(await i).keys())o.startsWith(n)&&(o=o.replace(n+"/",""),s.includes(o)||s.push(o));return s.sort(X1e),s}static async listBranches({fs:e,gitdir:r,remote:n}){return n?Le.listRefs({fs:e,gitdir:r,filepath:`refs/remotes/${n}`}):Le.listRefs({fs:e,gitdir:r,filepath:"refs/heads"})}static async listTags({fs:e,gitdir:r}){return(await Le.listRefs({fs:e,gitdir:r,filepath:"refs/tags"})).filter(i=>!i.endsWith("^{}"))}}function cye(t,e){return f0(yR(t),yR(e))}function yR(t){return t.mode==="040000"?t.path+"/":t.path}function H5(t){switch(t){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new Ye(`Unexpected GitTree entry mode: ${t}`)}function uye(t){const e=[];let r=0;for(;r<t.length;){const n=t.indexOf(32,r);if(n===-1)throw new Ye(`GitTree: Error parsing buffer at byte location ${r}: Could not find the next space character.`);const i=t.indexOf(0,r);if(i===-1)throw new Ye(`GitTree: Error parsing buffer at byte location ${r}: Could not find the next null character.`);let s=t.slice(r,n).toString("utf8");s==="40000"&&(s="040000");const o=H5(s),a=t.slice(n+1,i).toString("utf8");if(a.includes("\\")||a.includes("/"))throw new yc(a);const l=t.slice(i+1,i+21).toString("hex");r=i+21,e.push({mode:s,path:a,oid:l,type:o})}return e}function hye(t){if(typeof t=="number"&&(t=t.toString(8)),t.match(/^0?4.*/))return"040000";if(t.match(/^1006.*/))return"100644";if(t.match(/^1007.*/))return"100755";if(t.match(/^120.*/))return"120000";if(t.match(/^160.*/))return"160000";throw new Ye(`Could not understand file mode: ${t}`)}function fye(t){return!t.oid&&t.sha&&(t.oid=t.sha),t.mode=hye(t.mode),t.type||(t.type=H5(t.mode)),t}class tn{constructor(e){if(Ne.isBuffer(e))this._entries=uye(e);else if(Array.isArray(e))this._entries=e.map(fye);else throw new Ye("invalid type passed to GitTree constructor");this._entries.sort(N5)}static from(e){return new tn(e)}render(){return this._entries.map(e=>`${e.mode} ${e.type} ${e.oid}    ${e.path}`).join(`
`)}toObject(){const e=[...this._entries];return e.sort(cye),Ne.concat(e.map(r=>{const n=Ne.from(r.mode.replace(/^0/,"")),i=Ne.from(" "),s=Ne.from(r.path,"utf8"),o=Ne.from([0]),a=Ne.from(r.oid,"hex");return Ne.concat([n,i,s,o,a])}))}entries(){return this._entries}*[Symbol.iterator](){for(const e of this._entries)yield e}}class vc{static wrap({type:e,object:r}){return Ne.concat([Ne.from(`${e} ${r.byteLength.toString()}\0`),Ne.from(r)])}static unwrap(e){const r=e.indexOf(32),n=e.indexOf(0),i=e.slice(0,r).toString("utf8"),s=e.slice(r+1,n).toString("utf8"),o=e.length-(n+1);if(parseInt(s)!==o)throw new Ye(`Length mismatch: expected ${s} bytes but got ${o} instead.`);return{type:i,object:Ne.from(e.slice(n+1))}}}async function dye({fs:t,gitdir:e,oid:r}){const n=`objects/${r.slice(0,2)}/${r.slice(2)}`,i=await t.read(`${e}/${n}`);return i?{object:i,format:"deflated",source:n}:null}function pye(t,e){const r=new Si(t),n=vR(r);if(n!==e.byteLength)throw new Ye(`applyDelta expected source buffer to be ${n} bytes but the provided buffer was ${e.length} bytes`);const i=vR(r);let s;const o=ER(r,e);if(o.byteLength===i)s=o;else{s=Ne.alloc(i);const a=new Si(s);for(a.copy(o);!r.eof();)a.copy(ER(r,e));const l=a.tell();if(i!==l)throw new Ye(`applyDelta expected target buffer to be ${i} bytes but the resulting buffer was ${l} bytes`)}return s}function vR(t){let e=0,r=0,n=null;do n=t.readUInt8(),e|=(n&127)<<r,r+=7;while(n&128);return e}function wR(t,e,r){let n=0,i=0;for(;r--;)e&1&&(n|=t.readUInt8()<<i),e>>=1,i+=8;return n}function ER(t,e){const r=t.readUInt8(),n=128,i=15,s=112;if(r&n){const o=wR(t,r&i,4);let a=wR(t,(r&s)>>4,3);return a===0&&(a=65536),e.slice(o,o+a)}else return t.slice(r)}function mye(t){let e=[t];return{next(){return Promise.resolve({done:e.length===0,value:e.pop()})},return(){return e=[],{}},[Symbol.asyncIterator](){return this}}}function U5(t){return t[Symbol.asyncIterator]?t[Symbol.asyncIterator]():t[Symbol.iterator]?t[Symbol.iterator]():t.next?t:mye(t)}class j5{constructor(e){if(typeof Ne>"u")throw new Error("Missing Buffer dependency");this.stream=U5(e),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(e){if(!this.eof())return this.started||await this._init(),this.cursor+e>this.buffer.length&&(this._trim(),await this._accumulate(e)),this._moveCursor(e),this.buffer.slice(this.undoCursor,this.cursor)}async skip(e){this.eof()||(this.started||await this._init(),this.cursor+e>this.buffer.length&&(this._trim(),await this._accumulate(e)),this._moveCursor(e))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:e,value:r}=await this.stream.next();return e&&(this._ended=!0,!r)?Ne.alloc(0):(r&&(r=Ne.from(r)),r)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(e){this.undoCursor=this.cursor,this.cursor+=e,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(e){if(this._ended)return;const r=[this.buffer];for(;this.cursor+e>gye(r);){const n=await this._next();if(this._ended)break;r.push(n)}this.buffer=Ne.concat(r)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}}function gye(t){return t.reduce((e,r)=>e+r.length,0)}async function _ye(t,e){const r=new j5(t);let n=await r.read(4);if(n=n.toString("utf8"),n!=="PACK")throw new Ye(`Invalid PACK header '${n}'`);let i=await r.read(4);if(i=i.readUInt32BE(0),i!==2)throw new Ye(`Invalid packfile version: ${i}`);let s=await r.read(4);if(s=s.readUInt32BE(0),!(s<1))for(;!r.eof()&&s--;){const o=r.tell(),{type:a,length:l,ofs:c,reference:u}=await bye(r),h=new sS.Inflate;for(;!h.result;){const f=await r.chunk();if(!f)break;if(h.push(f,!1),h.err)throw new Ye(`Pako error: ${h.msg}`);if(h.result){if(h.result.length!==l)throw new Ye("Inflated object size is different from that stated in packfile.");await r.undo(),await r.read(f.length-h.strm.avail_in);const d=r.tell();await e({data:h.result,type:a,num:s,offset:o,end:d,reference:u,ofs:c})}}}}async function bye(t){let e=await t.byte();const r=e>>4&7;let n=e&15;if(e&128){let o=4;do e=await t.byte(),n|=(e&127)<<o,o+=7;while(e&128)}let i,s;if(r===6){let o=0;i=0;const a=[];do e=await t.byte(),i|=(e&127)<<o,o+=7,a.push(e);while(e&128);s=Ne.from(a)}return r===7&&(s=await t.read(20)),{type:r,length:n,ofs:i,reference:s}}async function $5(t){return sS.inflate(t)}function yye(t){const e=[];let r=0,n=0;do{r=t.readUInt8();const i=r&127;e.push(i),n=r&128}while(n);return e.reduce((i,s)=>i+1<<7|s,-1)}function vye(t,e){let r=e,n=4,i=null;do i=t.readUInt8(),r|=(i&127)<<n,n+=7;while(i&128);return r}class Wl{constructor(e){Object.assign(this,e),this.offsetCache={}}static async fromIdx({idx:e,getExternalRefDelta:r}){const n=new Si(e);if(n.slice(4).toString("hex")!=="ff744f63")return;const s=n.readUInt32BE();if(s!==2)throw new Ye(`Unable to read version ${s} packfile IDX. (Only version 2 supported)`);if(e.byteLength>2048*1024*1024)throw new Ye("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");n.seek(n.tell()+4*255);const o=n.readUInt32BE(),a=[];for(let u=0;u<o;u++){const h=n.slice(20).toString("hex");a[u]=h}n.seek(n.tell()+4*o);const l=new Map;for(let u=0;u<o;u++)l.set(a[u],n.readUInt32BE());const c=n.slice(20).toString("hex");return new Wl({hashes:a,crcs:{},offsets:l,packfileSha:c,getExternalRefDelta:r})}static async fromPack({pack:e,getExternalRefDelta:r,onProgress:n}){const i={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},s={},o=e.slice(-20).toString("hex"),a=[],l={},c=new Map;let u=null,h=null;await _ye([e],async({data:m,type:p,reference:b,offset:y,num:v})=>{u===null&&(u=v);const w=Math.floor((u-v)*100/u);w!==h&&n&&await n({phase:"Receiving objects",loaded:u-v,total:u}),h=w,p=i[p],["commit","tree","blob","tag"].includes(p)?s[y]={type:p,offset:y}:p==="ofs-delta"?s[y]={type:p,offset:y}:p==="ref-delta"&&(s[y]={type:p,offset:y})});const f=Object.keys(s).map(Number);for(const[m,p]of f.entries()){const b=m+1===f.length?e.byteLength-20:f[m+1],y=s[p],v=m_e.buf(e.slice(p,b))>>>0;y.end=b,y.crc=v}const d=new Wl({pack:Promise.resolve(e),packfileSha:o,crcs:l,hashes:a,offsets:c,getExternalRefDelta:r});h=null;let g=0;const _=[0,0,0,0,0,0,0,0,0,0,0,0];for(let m in s){m=Number(m);const p=Math.floor(g*100/u);p!==h&&n&&await n({phase:"Resolving deltas",loaded:g,total:u}),g++,h=p;const b=s[m];if(!b.oid)try{d.readDepth=0,d.externalReadDepth=0;const{type:y,object:v}=await d.readSlice({start:m});_[d.readDepth]+=1;const w=await ps(vc.wrap({type:y,object:v}));b.oid=w,a.push(w),c.set(w,m),l[w]=b.crc}catch{continue}}return a.sort(),d}async toBuffer(){const e=[],r=(c,u)=>{e.push(Ne.from(c,u))};r("ff744f63","hex"),r("00000002","hex");const n=new Si(Ne.alloc(256*4));for(let c=0;c<256;c++){let u=0;for(const h of this.hashes)parseInt(h.slice(0,2),16)<=c&&u++;n.writeUInt32BE(u)}e.push(n.buffer);for(const c of this.hashes)r(c,"hex");const i=new Si(Ne.alloc(this.hashes.length*4));for(const c of this.hashes)i.writeUInt32BE(this.crcs[c]);e.push(i.buffer);const s=new Si(Ne.alloc(this.hashes.length*4));for(const c of this.hashes)s.writeUInt32BE(this.offsets.get(c));e.push(s.buffer),r(this.packfileSha,"hex");const o=Ne.concat(e),a=await ps(o),l=Ne.alloc(20);return l.write(a,"hex"),Ne.concat([o,l])}async load({pack:e}){this.pack=e}async unload(){this.pack=null}async read({oid:e}){if(!this.offsets.get(e)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(e);throw new Ye(`Could not read object ${e} from packfile`)}const r=this.offsets.get(e);return this.readSlice({start:r})}async readSlice({start:e}){if(this.offsetCache[e])return Object.assign({},this.offsetCache[e]);this.readDepth++;const r={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new Ye("Tried to read from a GitPackIndex with no packfile loaded into memory");const n=(await this.pack).slice(e),i=new Si(n),s=i.readUInt8(),o=s&112;let a=r[o];if(a===void 0)throw new Ye("Unrecognized type: 0b"+o.toString(2));const l=s&15;let c=l;s&128&&(c=vye(i,l));let h=null,f=null;if(a==="ofs_delta"){const g=yye(i),_=e-g;({object:h,type:a}=await this.readSlice({start:_}))}if(a==="ref_delta"){const g=i.slice(20).toString("hex");({object:h,type:a}=await this.read({oid:g}))}const d=n.slice(i.tell());if(f=Ne.from(await $5(d)),f.byteLength!==c)throw new Ye(`Packfile told us object would have length ${c} but it had length ${f.byteLength}`);return h&&(f=Ne.from(pye(f,h))),this.readDepth>3&&(this.offsetCache[e]={type:a,object:f}),{type:a,format:"content",object:f}}}const Vd=Symbol("PackfileCache");async function wye({fs:t,filename:e,getExternalRefDelta:r,emitter:n,emitterPrefix:i}){const s=await t.read(e);return Wl.fromIdx({idx:s,getExternalRefDelta:r})}function cS({fs:t,cache:e,filename:r,getExternalRefDelta:n,emitter:i,emitterPrefix:s}){e[Vd]||(e[Vd]=new Map);let o=e[Vd].get(r);return o||(o=wye({fs:t,filename:r,getExternalRefDelta:n,emitter:i,emitterPrefix:s}),e[Vd].set(r,o)),o}async function Eye({fs:t,cache:e,gitdir:r,oid:n,format:i="content",getExternalRefDelta:s}){let o=await t.readdir(Re.join(r,"objects/pack"));o=o.filter(a=>a.endsWith(".idx"));for(const a of o){const l=`${r}/objects/pack/${a}`,c=await cS({fs:t,cache:e,filename:l,getExternalRefDelta:s});if(c.error)throw new Ye(c.error);if(c.offsets.has(n)){if(!c.pack){const h=l.replace(/idx$/,"pack");c.pack=t.read(h)}const u=await c.read({oid:n,getExternalRefDelta:s});return u.format="content",u.source=`objects/pack/${a.replace(/idx$/,"pack")}`,u}}return null}async function Nt({fs:t,cache:e,gitdir:r,oid:n,format:i="content"}){const s=u=>Nt({fs:t,cache:e,gitdir:r,oid:u});let o;if(n==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(o={format:"wrapped",object:Ne.from("tree 0\0")}),o||(o=await dye({fs:t,gitdir:r,oid:n})),!o){if(o=await Eye({fs:t,cache:e,gitdir:r,oid:n,getExternalRefDelta:s}),!o)throw new Tt(n);return o}if(i==="deflated"||(o.format==="deflated"&&(o.object=Ne.from(await $5(o.object)),o.format="wrapped"),i==="wrapped"))return o;const a=await ps(o.object);if(a!==n)throw new Ye(`SHA check failed! Expected ${n}, computed ${a}`);const{object:l,type:c}=vc.unwrap(o.object);if(o.type=c,o.object=l,o.format="content",i==="content")return o;throw new Ye(`invalid requested format "${i}"`)}class ei extends lt{constructor(e,r,n=!0){super(`Failed to create ${e} at ${r} because it already exists.${n?` (Hint: use 'force: true' parameter to overwrite existing ${e}.)`:""}`),this.code=this.name=ei.code,this.data={noun:e,where:r,canForce:n}}}ei.code="AlreadyExistsError";class vf extends lt{constructor(e,r,n){super(`Found multiple ${e} matching "${r}" (${n.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=vf.code,this.data={nouns:e,short:r,matches:n}}}vf.code="AmbiguousError";class wf extends lt{constructor(e){super(`Your local changes to the following files would be overwritten by checkout: ${e.join(", ")}`),this.code=this.name=wf.code,this.data={filepaths:e}}}wf.code="CheckoutConflictError";class Ef extends lt{constructor(e,r){super(`Failed to checkout "${e}" because commit ${r} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=Ef.code,this.data={ref:e,oid:r}}}Ef.code="CommitNotFetchedError";class Sf extends lt{constructor(){super("Empty response from git server."),this.code=this.name=Sf.code,this.data={}}}Sf.code="EmptyServerResponseError";class xf extends lt{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=xf.code,this.data={}}}xf.code="FastForwardError";class Tf extends lt{constructor(e,r){super(`One or more branches were not updated: ${e}`),this.code=this.name=Tf.code,this.data={prettyDetails:e,result:r}}}Tf.code="GitPushError";class Gl extends lt{constructor(e,r,n){super(`HTTP Error: ${e} ${r}`),this.code=this.name=Gl.code,this.data={statusCode:e,statusMessage:r,response:n}}}Gl.code="HttpError";class oo extends lt{constructor(e){let r="invalid filepath";e==="leading-slash"||e==="trailing-slash"?r='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':e==="directory"&&(r='"filepath" should not be a directory.'),super(r),this.code=this.name=oo.code,this.data={reason:e}}}oo.code="InvalidFilepathError";class ms extends lt{constructor(e,r){super(`"${e}" would be an invalid git reference. (Hint: a valid alternative would be "${r}".)`),this.code=this.name=ms.code,this.data={ref:e,suggestion:r}}}ms.code="InvalidRefNameError";class Cf extends lt{constructor(e){super(`Maximum search depth of ${e} exceeded.`),this.code=this.name=Cf.code,this.data={depth:e}}}Cf.code="MaxDepthError";class wc extends lt{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=wc.code,this.data={}}}wc.code="MergeNotSupportedError";class Ec extends lt{constructor(e,r,n,i){super(`Automatic merge failed with one or more merge conflicts in the following files: ${e.toString()}. Fix conflicts then commit the result.`),this.code=this.name=Ec.code,this.data={filepaths:e,bothModified:r,deleteByUs:n,deleteByTheirs:i}}}Ec.code="MergeConflictError";class Br extends lt{constructor(e){super(`No name was provided for ${e} in the argument or in the .git/config file.`),this.code=this.name=Br.code,this.data={role:e}}}Br.code="MissingNameError";class Zr extends lt{constructor(e){super(`The function requires a "${e}" parameter but none was provided.`),this.code=this.name=Zr.code,this.data={parameter:e}}}Zr.code="MissingParameterError";class kf extends lt{constructor(e){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=kf.code,this.data={errors:e},this.errors=e}}kf.code="MultipleGitError";class Aa extends lt{constructor(e,r){super(`Expected "${e}" but received "${r}".`),this.code=this.name=Aa.code,this.data={expected:e,actual:r}}}Aa.code="ParseError";class ql extends lt{constructor(e){let r="";e==="not-fast-forward"?r=" because it was not a simple fast-forward":e==="tag-exists"&&(r=" because tag already exists"),super(`Push rejected${r}. Use "force: true" to override.`),this.code=this.name=ql.code,this.data={reason:e}}}ql.code="PushRejectedError";class Vs extends lt{constructor(e,r){super(`Remote does not support the "${e}" so the "${r}" parameter cannot be used.`),this.code=this.name=Vs.code,this.data={capability:e,parameter:r}}}Vs.code="RemoteCapabilityError";class Af extends lt{constructor(e,r){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${e}`),this.code=this.name=Af.code,this.data={preview:e,response:r}}}Af.code="SmartHttpError";class Rf extends lt{constructor(e,r,n){super(`Git remote "${e}" uses an unrecognized transport protocol: "${r}"`),this.code=this.name=Rf.code,this.data={url:e,transport:r,suggestion:n}}}Rf.code="UnknownTransportError";class Pf extends lt{constructor(e){super(`Cannot parse remote URL: "${e}"`),this.code=this.name=Pf.code,this.data={url:e}}}Pf.code="UrlParseError";class Sc extends lt{constructor(){super("The operation was canceled."),this.code=this.name=Sc.code,this.data={}}}Sc.code="UserCanceledError";class If extends lt{constructor(e){super(`Could not merge index: Entry for '${e}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=If.code,this.data={filepath:e}}}If.code="IndexResetError";class Df extends lt{constructor(e){super(`"${e}" does not point to any commit. You're maybe working on a repository with no commits yet. `),this.code=this.name=Df.code,this.data={ref:e}}}Df.code="NoCommitError";var Sye=Object.freeze({__proto__:null,AlreadyExistsError:ei,AmbiguousError:vf,CheckoutConflictError:wf,CommitNotFetchedError:Ef,EmptyServerResponseError:Sf,FastForwardError:xf,GitPushError:Tf,HttpError:Gl,InternalError:Ye,InvalidFilepathError:oo,InvalidOidError:so,InvalidRefNameError:ms,MaxDepthError:Cf,MergeNotSupportedError:wc,MergeConflictError:Ec,MissingNameError:Br,MissingParameterError:Zr,MultipleGitError:kf,NoRefspecError:yf,NotFoundError:Tt,ObjectTypeError:Ur,ParseError:Aa,PushRejectedError:ql,RemoteCapabilityError:Vs,SmartHttpError:Af,UnknownTransportError:Rf,UnsafeFilepathError:yc,UrlParseError:Pf,UserCanceledError:Sc,UnmergedPathsError:bf,IndexResetError:If,NoCommitError:Df});function nv({name:t,email:e,timestamp:r,timezoneOffset:n}){return n=xye(n),`${t} <${e}> ${r} ${n}`}function xye(t){const e=Tye(Cye(t));t=Math.abs(t);const r=Math.floor(t/60);t-=r*60;let n=String(r),i=String(t);return n.length<2&&(n="0"+n),i.length<2&&(i="0"+i),(e===-1?"-":"+")+n+i}function Tye(t){return Math.sign(t)||(Object.is(t,-0)?-1:1)}function Cye(t){return t===0?t:-t}function Gi(t){return t=t.replace(/\r/g,""),t=t.replace(/^\n+/,""),t=t.replace(/\n+$/,"")+`
`,t}function Jm(t){const[,e,r,n,i]=t.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:e,email:r,timestamp:Number(n),timezoneOffset:kye(i)}}function kye(t){let[,e,r,n]=t.match(/(\+|-)(\d\d)(\d\d)/);return n=(e==="+"?1:-1)*(Number(r)*60+Number(n)),Aye(n)}function Aye(t){return t===0?t:-t}class Mr{constructor(e){if(typeof e=="string")this._tag=e;else if(Ne.isBuffer(e))this._tag=e.toString("utf8");else if(typeof e=="object")this._tag=Mr.render(e);else throw new Ye("invalid type passed to GitAnnotatedTag constructor")}static from(e){return new Mr(e)}static render(e){return`object ${e.object}
type ${e.type}
tag ${e.tag}
tagger ${nv(e.tagger)}

${e.message}
${e.gpgsig?e.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){const e=this.withoutSignature();return e.slice(e.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){const e=this.justHeaders().split(`
`),r=[];for(const i of e)i[0]===" "?r[r.length-1]+=`
`+i.slice(1):r.push(i);const n={};for(const i of r){const s=i.slice(0,i.indexOf(" ")),o=i.slice(i.indexOf(" ")+1);Array.isArray(n[s])?n[s].push(o):n[s]=o}return n.tagger&&(n.tagger=Jm(n.tagger)),n.committer&&(n.committer=Jm(n.committer)),n}withoutSignature(){const e=Gi(this._tag);return e.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?e:e.slice(0,e.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;const e=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return Gi(e)}payload(){return this.withoutSignature()+`
`}toObject(){return Ne.from(this._tag,"utf8")}static async sign(e,r,n){const i=e.payload();let{signature:s}=await r({payload:i,secretKey:n});s=Gi(s);const o=i+s;return Mr.from(o)}}function yb(t){return t.trim().split(`
`).map(e=>" "+e).join(`
`)+`
`}function Rye(t){return t.split(`
`).map(e=>e.replace(/^ /,"")).join(`
`)}class Rt{constructor(e){if(typeof e=="string")this._commit=e;else if(Ne.isBuffer(e))this._commit=e.toString("utf8");else if(typeof e=="object")this._commit=Rt.render(e);else throw new Ye("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:e,signature:r}){const n=Rt.justHeaders(e),i=Rt.justMessage(e),s=Gi(n+`
gpgsig`+yb(r)+`
`+i);return new Rt(s)}static from(e){return new Rt(e)}toObject(){return Ne.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return Rt.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(e){return Gi(e.slice(e.indexOf(`

`)+2))}static justHeaders(e){return e.slice(0,e.indexOf(`

`))}parseHeaders(){const e=Rt.justHeaders(this._commit).split(`
`),r=[];for(const i of e)i[0]===" "?r[r.length-1]+=`
`+i.slice(1):r.push(i);const n={parent:[]};for(const i of r){const s=i.slice(0,i.indexOf(" ")),o=i.slice(i.indexOf(" ")+1);Array.isArray(n[s])?n[s].push(o):n[s]=o}return n.author&&(n.author=Jm(n.author)),n.committer&&(n.committer=Jm(n.committer)),n}static renderHeaders(e){let r="";if(e.tree?r+=`tree ${e.tree}
`:r+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,e.parent){if(e.parent.length===void 0)throw new Ye("commit 'parent' property should be an array");for(const s of e.parent)r+=`parent ${s}
`}const n=e.author;r+=`author ${nv(n)}
`;const i=e.committer||e.author;return r+=`committer ${nv(i)}
`,e.gpgsig&&(r+="gpgsig"+yb(e.gpgsig)),r}static render(e){return Rt.renderHeaders(e)+`
`+Gi(e.message)}render(){return this._commit}withoutSignature(){const e=Gi(this._commit);if(e.indexOf(`
gpgsig`)===-1)return e;const r=e.slice(0,e.indexOf(`
gpgsig`)),n=e.slice(e.indexOf(`-----END PGP SIGNATURE-----
`)+28);return Gi(r+`
`+n)}isolateSignature(){const e=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return Rye(e)}static async sign(e,r,n){const i=e.withoutSignature(),s=Rt.justMessage(e._commit);let{signature:o}=await r({payload:i,secretKey:n});o=Gi(o);const l=Rt.justHeaders(e._commit)+`
gpgsig`+yb(o)+`
`+s;return Rt.from(l)}}async function Kl({fs:t,cache:e,gitdir:r,oid:n}){if(n==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:tn.from([]),oid:n};const{type:i,object:s}=await Nt({fs:t,cache:e,gitdir:r,oid:n});if(i==="tag")return n=Mr.from(s).parse().object,Kl({fs:t,cache:e,gitdir:r,oid:n});if(i==="commit")return n=Rt.from(s).parse().tree,Kl({fs:t,cache:e,gitdir:r,oid:n});if(i!=="tree")throw new Ur(n,i,"tree");return{tree:tn.from(s),oid:n}}class Pye{constructor({fs:e,gitdir:r,ref:n,cache:i}){this.fs=e,this.cache=i,this.gitdir=r,this.mapPromise=(async()=>{const o=new Map;let a;try{a=await Le.resolve({fs:e,gitdir:r,ref:n})}catch(c){c instanceof Tt&&(a="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}const l=await Kl({fs:e,cache:this.cache,gitdir:r,oid:a});return l.type="tree",l.mode="40000",o.set(".",l),o})();const s=this;this.ConstructEntry=class{constructor(a){this._fullpath=a,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return s.type(this)}async mode(){return s.mode(this)}async stat(){return s.stat(this)}async content(){return s.content(this)}async oid(){return s.oid(this)}}}async readdir(e){const r=e._fullpath,{fs:n,cache:i,gitdir:s}=this,o=await this.mapPromise,a=o.get(r);if(!a)throw new Error(`No obj for ${r}`);const l=a.oid;if(!l)throw new Error(`No oid for obj ${JSON.stringify(a)}`);if(a.type!=="tree")return null;const{type:c,object:u}=await Nt({fs:n,cache:i,gitdir:s,oid:l});if(c!==a.type)throw new Ur(l,c,a.type);const h=tn.from(u);for(const f of h)o.set(Re.join(r,f.path),f);return h.entries().map(f=>Re.join(r,f.path))}async type(e){if(e._type===!1){const r=await this.mapPromise,{type:n}=r.get(e._fullpath);e._type=n}return e._type}async mode(e){if(e._mode===!1){const r=await this.mapPromise,{mode:n}=r.get(e._fullpath);e._mode=M5(parseInt(n,8))}return e._mode}async stat(e){}async content(e){if(e._content===!1){const r=await this.mapPromise,{fs:n,cache:i,gitdir:s}=this,a=r.get(e._fullpath).oid,{type:l,object:c}=await Nt({fs:n,cache:i,gitdir:s,oid:a});l!=="blob"?e._content=void 0:e._content=new Uint8Array(c)}return e._content}async oid(e){if(e._oid===!1){const n=(await this.mapPromise).get(e._fullpath);e._oid=n.oid}return e._oid}}function Ws({ref:t="HEAD"}={}){const e=Object.create(null);return Object.defineProperty(e,d0,{value:function({fs:r,gitdir:n,cache:i}){return new Pye({fs:r,gitdir:n,ref:t,cache:i})}}),Object.freeze(e),e}class Iye{constructor({fs:e,dir:r,gitdir:n,cache:i}){this.fs=e,this.cache=i,this.dir=r,this.gitdir=n;const s=this;this.ConstructEntry=class{constructor(a){this._fullpath=a,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return s.type(this)}async mode(){return s.mode(this)}async stat(){return s.stat(this)}async content(){return s.content(this)}async oid(){return s.oid(this)}}}async readdir(e){const r=e._fullpath,{fs:n,dir:i}=this,s=await n.readdir(Re.join(i,r));return s===null?null:s.map(o=>Re.join(r,o))}async type(e){return e._type===!1&&await e.stat(),e._type}async mode(e){return e._mode===!1&&await e.stat(),e._mode}async stat(e){if(e._stat===!1){const{fs:r,dir:n}=this;let i=await r.lstat(`${n}/${e._fullpath}`);if(!i)throw new Error(`ENOENT: no such file or directory, lstat '${e._fullpath}'`);let s=i.isDirectory()?"tree":"blob";s==="blob"&&!i.isFile()&&!i.isSymbolicLink()&&(s="special"),e._type=s,i=zl(i),e._mode=i.mode,i.size===-1&&e._actualSize&&(i.size=e._actualSize),e._stat=i}return e._stat}async content(e){if(e._content===!1){const{fs:r,dir:n,gitdir:i}=this;if(await e.type()==="tree")e._content=void 0;else{const o=await(await zt.get({fs:r,gitdir:i})).get("core.autocrlf"),a=await r.read(`${n}/${e._fullpath}`,{autocrlf:o});e._actualSize=a.length,e._stat&&e._stat.size===-1&&(e._stat.size=e._actualSize),e._content=new Uint8Array(a)}}return e._content}async oid(e){if(e._oid===!1){const{fs:r,gitdir:n,cache:i}=this;let s;await pr.acquire({fs:r,gitdir:n,cache:i},async function(o){const a=o.entriesMap.get(e._fullpath),l=await e.stat(),u=await(await zt.get({fs:r,gitdir:n})).get("core.filemode"),h=typeof Ft<"u"?Ft.platform!=="win32":!0;!a||Ym(l,a,u,h)?await e.content()===void 0?s=void 0:(s=await ps(vc.wrap({type:"blob",object:await e.content()})),a&&s===a.oid&&(!u||l.mode===a.mode)&&Ym(l,a,u,h)&&o.insert({filepath:e._fullpath,stats:l,oid:s})):s=a.oid}),e._oid=s}return e._oid}}function m0(){const t=Object.create(null);return Object.defineProperty(t,d0,{value:function({fs:e,dir:r,gitdir:n,cache:i}){return new Iye({fs:e,dir:r,gitdir:n,cache:i})}}),Object.freeze(t),t}function Dye(t,e){const r=e-t;return Array.from({length:r},(n,i)=>t+i)}const z5=typeof Array.prototype.flat>"u"?t=>t.reduce((e,r)=>e.concat(r),[]):t=>t.flat();class Oye{constructor(){this.value=null}consider(e){e!=null&&(this.value===null?this.value=e:e<this.value&&(this.value=e))}reset(){this.value=null}}function*Lye(t){const e=new Oye;let r;const n=[],i=t.length;for(let s=0;s<i;s++)n[s]=t[s].next().value,n[s]!==void 0&&e.consider(n[s]);if(e.value!==null)for(;;){const s=[];r=e.value,e.reset();for(let o=0;o<i;o++)n[o]!==void 0&&n[o]===r?(s[o]=n[o],n[o]=t[o].next().value):s[o]=null,n[o]!==void 0&&e.consider(n[o]);if(yield s,e.value===null)return}}async function Yl({fs:t,cache:e,dir:r,gitdir:n,trees:i,map:s=async(l,c)=>c,reduce:o=async(l,c)=>{const u=z5(c);return l!==void 0&&u.unshift(l),u},iterate:a=(l,c)=>Promise.all([...c].map(l))}){const l=i.map(d=>d[d0]({fs:t,dir:r,gitdir:n,cache:e})),c=new Array(l.length).fill("."),u=Dye(0,l.length),h=async d=>{u.map(m=>{d[m]=d[m]&&new l[m].ConstructEntry(d[m])});const _=(await Promise.all(u.map(m=>d[m]?l[m].readdir(d[m]):[]))).map(m=>m===null?[]:m).map(m=>m[Symbol.iterator]());return{entries:d,children:Lye(_)}},f=async d=>{const{entries:g,children:_}=await h(d),m=g.find(b=>b&&b._fullpath)._fullpath,p=await s(m,g);if(p!==null){let b=await a(f,_);return b=b.filter(y=>y!==void 0),o(p,b)}};return f(c)}async function iv(t,e){const r=await t.readdir(e);r==null?await t.rm(e):r.length?await Promise.all(r.map(n=>{const i=Re.join(e,n);return t.lstat(i).then(s=>{if(s)return s.isDirectory()?iv(t,i):t.rm(i)})})).then(()=>t.rmdir(e)):await t.rmdir(e)}function Nye(t){return Mye(t)&&SR(t.then)&&SR(t.catch)}function Mye(t){return t&&typeof t=="object"}function SR(t){return typeof t=="function"}function xR(t){return Nye((r=>{try{return r.readFile().catch(n=>n)}catch(n){return n}})(t))}const TR=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function CR(t,e){if(xR(e))for(const r of TR)t[`_${r}`]=e[r].bind(e);else for(const r of TR)t[`_${r}`]=db(e[r].bind(e));xR(e)?e.rm?t._rm=e.rm.bind(e):e.rmdir.length>1?t._rm=e.rmdir.bind(e):t._rm=iv.bind(null,t):e.rm?t._rm=db(e.rm.bind(e)):e.rmdir.length>2?t._rm=db(e.rmdir.bind(e)):t._rm=iv.bind(null,t)}class $e{constructor(e){if(typeof e._original_unwrapped_fs<"u")return e;const r=Object.getOwnPropertyDescriptor(e,"promises");r&&r.enumerable?CR(this,e.promises):CR(this,e),this._original_unwrapped_fs=e}async exists(e,r={}){try{return await this._stat(e),!0}catch(n){if(n.code==="ENOENT"||n.code==="ENOTDIR")return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',n),n}}async read(e,r={}){try{let n=await this._readFile(e,r);if(r.autocrlf==="true")try{n=new TextDecoder("utf8",{fatal:!0}).decode(n),n=n.replace(/\r\n/g,`
`),n=new TextEncoder().encode(n)}catch{}return typeof n!="string"&&(n=Ne.from(n)),n}catch{return null}}async write(e,r,n={}){try{await this._writeFile(e,r,n);return}catch{await this.mkdir(Vl(e)),await this._writeFile(e,r,n)}}async mkdir(e,r=!1){try{await this._mkdir(e);return}catch(n){if(n===null||n.code==="EEXIST")return;if(r)throw n;if(n.code==="ENOENT"){const i=Vl(e);if(i==="."||i==="/"||i===e)throw n;await this.mkdir(i),await this.mkdir(e,!0)}}}async rm(e){try{await this._unlink(e)}catch(r){if(r.code!=="ENOENT")throw r}}async rmdir(e,r){try{r&&r.recursive?await this._rm(e,r):await this._rmdir(e)}catch(n){if(n.code!=="ENOENT")throw n}}async readdir(e){try{const r=await this._readdir(e);return r.sort(f0),r}catch(r){return r.code==="ENOTDIR"?null:[]}}async readdirDeep(e){const r=await this._readdir(e);return(await Promise.all(r.map(async i=>{const s=e+"/"+i;return(await this._stat(s)).isDirectory()?this.readdirDeep(s):s}))).reduce((i,s)=>i.concat(s),[])}async lstat(e){try{return await this._lstat(e)}catch(r){if(r.code==="ENOENT")return null;throw r}}async readlink(e,r={encoding:"buffer"}){try{const n=await this._readlink(e,r);return Ne.isBuffer(n)?n:Ne.from(n)}catch(n){if(n.code==="ENOENT")return null;throw n}}async writelink(e,r){return this._symlink(r.toString("utf8"),e)}}function fe(t,e){if(e===void 0)throw new Zr(t)}async function eg(t,e){return!t&&!e?!1:t&&!e||!t&&e?!0:!(await t.type()==="tree"&&await e.type()==="tree"||await t.type()===await e.type()&&await t.mode()===await e.mode()&&await t.oid()===await e.oid())}async function Bye({fs:t,dir:e,gitdir:r=Re.join(e,".git"),commit:n="HEAD",cache:i={}}){try{fe("fs",t),fe("dir",e),fe("gitdir",r);const s=new $e(t),o=[Ws({ref:n}),m0(),p0()];let a=[];await pr.acquire({fs:s,gitdir:r,cache:i},async function(c){a=c.unmergedPaths});const l=await Yl({fs:s,cache:i,dir:e,gitdir:r,trees:o,map:async function(c,[u,h,f]){const d=!await eg(h,f),g=a.includes(c),_=!await eg(f,u);if(d||g)return u?{path:c,mode:await u.mode(),oid:await u.oid(),type:await u.type(),content:await u.content()}:void 0;if(_)return!1;throw new If(c)}});await pr.acquire({fs:s,gitdir:r,cache:i},async function(c){for(const u of l)if(u!==!1){if(!u){await s.rmdir(`${e}/${u.path}`,{recursive:!0}),c.delete({filepath:u.path});continue}if(u.type==="blob"){const h=new TextDecoder().decode(u.content);await s.write(`${e}/${u.path}`,h,{mode:u.mode}),c.insert({filepath:u.path,oid:u.oid,stage:0})}}})}catch(s){throw s.caller="git.abortMerge",s}}class g0{static async isIgnored({fs:e,dir:r,gitdir:n=Re.join(r,".git"),filepath:i}){if(Xm(i)===".git")return!0;if(i===".")return!1;let s="";const o=Re.join(n,"info","exclude");await e.exists(o)&&(s=await e.read(o,"utf8"));const a=[{gitignore:Re.join(r,".gitignore"),filepath:i}],l=i.split("/").filter(Boolean);for(let u=1;u<l.length;u++){const h=l.slice(0,u).join("/"),f=l.slice(u).join("/");a.push({gitignore:Re.join(r,h,".gitignore"),filepath:f})}let c=!1;for(const u of a){let h;try{h=await e.read(u.gitignore,"utf8")}catch(g){if(g.code==="NOENT")continue}const f=R1e().add(s);f.add(h);const d=Vl(u.filepath);if(d!=="."&&f.ignores(d))return!0;c?c=!f.test(u.filepath).unignored:c=f.test(u.filepath).ignored}return c}}async function Fye({fs:t,gitdir:e,object:r,format:n,oid:i}){if(n!=="deflated")throw new Ye("GitObjectStoreLoose expects objects to write to be in deflated format");const s=`objects/${i.slice(0,2)}/${i.slice(2)}`,o=`${e}/${s}`;await t.exists(o)||await t.write(o,r)}let vb=null;async function V5(t){return vb===null&&(vb=Uye()),vb?Hye(t):sS.deflate(t)}async function Hye(t){const e=new CompressionStream("deflate"),r=new Blob([t]).stream().pipeThrough(e);return new Uint8Array(await new Response(r).arrayBuffer())}function Uye(){try{return new CompressionStream("deflate").writable.close(),new Blob([]).stream().cancel(),!0}catch{return!1}}async function gn({fs:t,gitdir:e,type:r,object:n,format:i="content",oid:s=void 0,dryRun:o=!1}){return i!=="deflated"&&(i!=="wrapped"&&(n=vc.wrap({type:r,object:n})),s=await ps(n),n=Ne.from(await V5(n))),o||await Fye({fs:t,gitdir:e,object:n,format:"deflated",oid:s}),s}function jye(t){let e;for(;~(e=t.indexOf(92));)t[e]=47;return t}async function $ye({fs:t,dir:e,gitdir:r=Re.join(e,".git"),filepath:n,cache:i={},force:s=!1,parallel:o=!0}){try{fe("fs",t),fe("dir",e),fe("gitdir",r),fe("filepath",n);const a=new $e(t);await pr.acquire({fs:a,gitdir:r,cache:i},async l=>sv({dir:e,gitdir:r,fs:a,filepath:n,index:l,force:s,parallel:o}))}catch(a){throw a.caller="git.add",a}}async function sv({dir:t,gitdir:e,fs:r,filepath:n,index:i,force:s,parallel:o}){n=Array.isArray(n)?n:[n];const a=n.map(async h=>{if(!s&&await g0.isIgnored({fs:r,dir:t,gitdir:e,filepath:h}))return;const f=await r.lstat(Re.join(t,h));if(!f)throw new Tt(h);if(f.isDirectory()){const d=await r.readdir(Re.join(t,h));if(o){const g=d.map(_=>sv({dir:t,gitdir:e,fs:r,filepath:[Re.join(h,_)],index:i,force:s,parallel:o}));await Promise.all(g)}else for(const g of d)await sv({dir:t,gitdir:e,fs:r,filepath:[Re.join(h,g)],index:i,force:s,parallel:o})}else{const g=await(await zt.get({fs:r,gitdir:e})).get("core.autocrlf"),_=f.isSymbolicLink()?await r.readlink(Re.join(t,h)).then(jye):await r.read(Re.join(t,h),{autocrlf:g});if(_===null)throw new Tt(h);const m=await gn({fs:r,gitdir:e,type:"blob",object:_});i.insert({filepath:h,stats:f,oid:m})}}),l=await Promise.allSettled(a),c=l.filter(h=>h.status==="rejected").map(h=>h.reason);if(c.length>1)throw new kf(c);if(c.length===1)throw c[0];return l.filter(h=>h.status==="fulfilled"&&h.value).map(h=>h.value)}async function vh({fs:t,gitdir:e,path:r}){return(await zt.get({fs:t,gitdir:e})).get(r)}function W5(t,...e){for(const r of e)if(r)for(const n of Object.keys(r)){const i=r[n];i!==void 0&&(t[n]=i)}return t}async function _a({fs:t,gitdir:e,author:r,commit:n}){const i=Math.floor(Date.now()/1e3),s={name:await vh({fs:t,gitdir:e,path:"user.name"}),email:await vh({fs:t,gitdir:e,path:"user.email"})||"",timestamp:i,timezoneOffset:new Date(i*1e3).getTimezoneOffset()},o=W5({},s,n?n.author:void 0,r);if(o.name!==void 0)return o}async function Xl({fs:t,gitdir:e,author:r,committer:n,commit:i}){const s=Math.floor(Date.now()/1e3),o={name:await vh({fs:t,gitdir:e,path:"user.name"}),email:await vh({fs:t,gitdir:e,path:"user.email"})||"",timestamp:s,timezoneOffset:new Date(s*1e3).getTimezoneOffset()},a=W5({},o,i?i.committer:void 0,r,n);if(a.name!==void 0)return a}async function G5({fs:t,cache:e,gitdir:r,oid:n}){const{type:i,object:s}=await Nt({fs:t,cache:e,gitdir:r,oid:n});if(i==="tag")return n=Mr.from(s).parse().object,G5({fs:t,cache:e,gitdir:r,oid:n});if(i!=="commit")throw new Ur(n,i,"commit");return{commit:Rt.from(s),oid:n}}async function tg({fs:t,cache:e,gitdir:r,oid:n}){const{commit:i,oid:s}=await G5({fs:t,cache:e,gitdir:r,oid:n});return{oid:s,commit:i.parse(),payload:i.withoutSignature()}}async function _0({fs:t,cache:e,onSign:r,gitdir:n,message:i,author:s,committer:o,signingKey:a,amend:l=!1,dryRun:c=!1,noUpdateBranch:u=!1,ref:h,parent:f,tree:d}){let g=!1;h||(h=await Le.resolve({fs:t,gitdir:n,ref:"HEAD",depth:2}));let _,m;try{_=await Le.resolve({fs:t,gitdir:n,ref:h}),m=await tg({fs:t,gitdir:n,oid:_,cache:{}})}catch{g=!0}if(l&&g)throw new Df(h);const p=l?await _a({fs:t,gitdir:n,author:s,commit:m.commit}):await _a({fs:t,gitdir:n,author:s});if(!p)throw new Br("author");const b=l?await Xl({fs:t,gitdir:n,author:p,committer:o,commit:m.commit}):await Xl({fs:t,gitdir:n,author:p,committer:o});if(!b)throw new Br("committer");return pr.acquire({fs:t,gitdir:n,cache:e,allowUnmerged:!1},async function(y){const w=F5(y.entries).get(".");if(d||(d=await q5({fs:t,gitdir:n,inode:w,dryRun:c})),f?f=await Promise.all(f.map(E=>Le.resolve({fs:t,gitdir:n,ref:E}))):l?f=m.commit.parent:f=_?[_]:[],!i)if(l)i=m.commit.message;else throw new Zr("message");let S=Rt.from({tree:d,parent:f,author:p,committer:b,message:i});a&&(S=await Rt.sign(S,r,a));const x=await gn({fs:t,gitdir:n,type:"commit",object:S.toObject(),dryRun:c});return!u&&!c&&await Le.writeRef({fs:t,gitdir:n,ref:h,value:x}),x})}async function q5({fs:t,gitdir:e,inode:r,dryRun:n}){const i=r.children;for(const l of i)l.type==="tree"&&(l.metadata.mode="040000",l.metadata.oid=await q5({fs:t,gitdir:e,inode:l,dryRun:n}));const s=i.map(l=>({mode:l.metadata.mode,path:l.basename,oid:l.metadata.oid,type:l.type})),o=tn.from(s);return await gn({fs:t,gitdir:e,type:"tree",object:o.toObject(),dryRun:n})}async function Of({fs:t,cache:e,gitdir:r,oid:n,filepath:i}){if(i.startsWith("/"))throw new oo("leading-slash");if(i.endsWith("/"))throw new oo("trailing-slash");const s=n,o=await Kl({fs:t,cache:e,gitdir:r,oid:n}),a=o.tree;if(i==="")n=o.oid;else{const l=i.split("/");n=await K5({fs:t,cache:e,gitdir:r,tree:a,pathArray:l,oid:s,filepath:i})}return n}async function K5({fs:t,cache:e,gitdir:r,tree:n,pathArray:i,oid:s,filepath:o}){const a=i.shift();for(const l of n)if(l.path===a){if(i.length===0)return l.oid;{const{type:c,object:u}=await Nt({fs:t,cache:e,gitdir:r,oid:l.oid});if(c!=="tree")throw new Ur(s,c,"tree",o);return n=tn.from(u),K5({fs:t,cache:e,gitdir:r,tree:n,pathArray:i,oid:s,filepath:o})}}throw new Tt(`file or directory found at "${s}:${o}"`)}async function xc({fs:t,cache:e,gitdir:r,oid:n,filepath:i=void 0}){i!==void 0&&(n=await Of({fs:t,cache:e,gitdir:r,oid:n,filepath:i}));const{tree:s,oid:o}=await Kl({fs:t,cache:e,gitdir:r,oid:n});return{oid:o,tree:s.entries()}}async function uS({fs:t,gitdir:e,tree:r}){const n=tn.from(r).toObject();return await gn({fs:t,gitdir:e,type:"tree",object:n,format:"content"})}async function zye({fs:t,cache:e,onSign:r,gitdir:n,ref:i,oid:s,note:o,force:a,author:l,committer:c,signingKey:u}){let h;try{h=await Le.resolve({gitdir:n,fs:t,ref:i})}catch(p){if(!(p instanceof Tt))throw p}let d=(await xc({fs:t,cache:e,gitdir:n,oid:h||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(a)d=d.filter(p=>p.path!==s);else for(const p of d)if(p.path===s)throw new ei("note",s);typeof o=="string"&&(o=Ne.from(o,"utf8"));const g=await gn({fs:t,gitdir:n,type:"blob",object:o,format:"content"});d.push({mode:"100644",path:s,oid:g,type:"blob"});const _=await uS({fs:t,gitdir:n,tree:d});return await _0({fs:t,cache:e,onSign:r,gitdir:n,ref:i,tree:_,parent:h&&[h],message:`Note added by 'isomorphic-git addNote'
`,author:l,committer:c,signingKey:u})}async function Vye({fs:t,onSign:e,dir:r,gitdir:n=Re.join(r,".git"),ref:i="refs/notes/commits",oid:s,note:o,force:a,author:l,committer:c,signingKey:u,cache:h={}}){try{fe("fs",t),fe("gitdir",n),fe("oid",s),fe("note",o),u&&fe("onSign",e);const f=new $e(t),d=await _a({fs:f,gitdir:n,author:l});if(!d)throw new Br("author");const g=await Xl({fs:f,gitdir:n,author:d,committer:c});if(!g)throw new Br("committer");return await zye({fs:new $e(f),cache:h,onSign:e,gitdir:n,ref:i,oid:s,note:o,force:a,author:d,committer:g,signingKey:u})}catch(f){throw f.caller="git.addNote",f}}async function Y5({fs:t,gitdir:e,remote:r,url:n,force:i}){if(r!==Ai.clean(r))throw new ms(r,Ai.clean(r));const s=await zt.get({fs:t,gitdir:e});if(!i&&(await s.getSubsections("remote")).includes(r)&&n!==await s.get(`remote.${r}.url`))throw new ei("remote",r);await s.set(`remote.${r}.url`,n),await s.set(`remote.${r}.fetch`,`+refs/heads/*:refs/remotes/${r}/*`),await zt.save({fs:t,gitdir:e,config:s})}async function Wye({fs:t,dir:e,gitdir:r=Re.join(e,".git"),remote:n,url:i,force:s=!1}){try{return fe("fs",t),fe("gitdir",r),fe("remote",n),fe("url",i),await Y5({fs:new $e(t),gitdir:r,remote:n,url:i,force:s})}catch(o){throw o.caller="git.addRemote",o}}async function Gye({fs:t,cache:e,onSign:r,gitdir:n,ref:i,tagger:s,message:o=i,gpgsig:a,object:l,signingKey:c,force:u=!1}){if(i=i.startsWith("refs/tags/")?i:`refs/tags/${i}`,!u&&await Le.exists({fs:t,gitdir:n,ref:i}))throw new ei("tag",i);const h=await Le.resolve({fs:t,gitdir:n,ref:l||"HEAD"}),{type:f}=await Nt({fs:t,cache:e,gitdir:n,oid:h});let d=Mr.from({object:h,type:f,tag:i.replace("refs/tags/",""),tagger:s,message:o,gpgsig:a});c&&(d=await Mr.sign(d,r,c));const g=await gn({fs:t,gitdir:n,type:"tag",object:d.toObject()});await Le.writeRef({fs:t,gitdir:n,ref:i,value:g})}async function qye({fs:t,onSign:e,dir:r,gitdir:n=Re.join(r,".git"),ref:i,tagger:s,message:o=i,gpgsig:a,object:l,signingKey:c,force:u=!1,cache:h={}}){try{fe("fs",t),fe("gitdir",n),fe("ref",i),c&&fe("onSign",e);const f=new $e(t),d=await _a({fs:f,gitdir:n,author:s});if(!d)throw new Br("tagger");return await Gye({fs:f,cache:h,onSign:e,gitdir:n,ref:i,tagger:d,message:o,gpgsig:a,object:l,signingKey:c,force:u})}catch(f){throw f.caller="git.annotatedTag",f}}async function Kye({fs:t,gitdir:e,ref:r,object:n,checkout:i=!1,force:s=!1}){if(r!==Ai.clean(r))throw new ms(r,Ai.clean(r));const o=`refs/heads/${r}`;if(!s&&await Le.exists({fs:t,gitdir:e,ref:o}))throw new ei("branch",r,!1);let a;try{a=await Le.resolve({fs:t,gitdir:e,ref:n||"HEAD"})}catch{}a&&await Le.writeRef({fs:t,gitdir:e,ref:o,value:a}),i&&await Le.writeSymbolicRef({fs:t,gitdir:e,ref:"HEAD",value:o})}async function Yye({fs:t,dir:e,gitdir:r=Re.join(e,".git"),ref:n,object:i,checkout:s=!1,force:o=!1}){try{return fe("fs",t),fe("gitdir",r),fe("ref",n),await Kye({fs:new $e(t),gitdir:r,ref:n,object:i,checkout:s,force:o})}catch(a){throw a.caller="git.branch",a}}const X5=(t,e)=>t==="."||e==null||e.length===0||e==="."?!0:e.length>=t.length?e.startsWith(t):t.startsWith(e);async function hS({fs:t,cache:e,onProgress:r,onPostCheckout:n,dir:i,gitdir:s,remote:o,ref:a,filepaths:l,noCheckout:c,noUpdateHead:u,dryRun:h,force:f,track:d=!0}){let g;if(n)try{g=await Le.resolve({fs:t,gitdir:s,ref:"HEAD"})}catch{g="0000000000000000000000000000000000000000"}let _;try{_=await Le.resolve({fs:t,gitdir:s,ref:a})}catch(m){if(a==="HEAD")throw m;const p=`${o}/${a}`;if(_=await Le.resolve({fs:t,gitdir:s,ref:p}),d){const b=await zt.get({fs:t,gitdir:s});await b.set(`branch.${a}.remote`,o),await b.set(`branch.${a}.merge`,`refs/heads/${a}`),await zt.save({fs:t,gitdir:s,config:b})}await Le.writeRef({fs:t,gitdir:s,ref:`refs/heads/${a}`,value:_})}if(!c){let m;try{m=await Xye({fs:t,cache:e,onProgress:r,dir:i,gitdir:s,ref:a,force:f,filepaths:l})}catch(w){throw w instanceof Tt&&w.data.what===_?new Ef(a,_):w}const p=m.filter(([w])=>w==="conflict").map(([w,S])=>S);if(p.length>0)throw new wf(p);const b=m.filter(([w])=>w==="error").map(([w,S])=>S);if(b.length>0)throw new Ye(b.join(", "));if(h){n&&await n({previousHead:g,newHead:_,type:l!=null&&l.length>0?"file":"branch"});return}let y=0;const v=m.length;await pr.acquire({fs:t,gitdir:s,cache:e},async function(w){await Promise.all(m.filter(([S])=>S==="delete"||S==="delete-index").map(async function([S,x]){const E=`${i}/${x}`;S==="delete"&&await t.rm(E),w.delete({filepath:x}),r&&await r({phase:"Updating workdir",loaded:++y,total:v})}))}),await pr.acquire({fs:t,gitdir:s,cache:e},async function(w){for(const[S,x]of m)if(S==="rmdir"||S==="rmdir-index"){const E=`${i}/${x}`;try{S==="rmdir-index"&&w.delete({filepath:x}),await t.rmdir(E),r&&await r({phase:"Updating workdir",loaded:++y,total:v})}catch(T){if(T.code==="ENOTEMPTY")console.log(`Did not delete ${x} because directory is not empty`);else throw T}}}),await Promise.all(m.filter(([w])=>w==="mkdir"||w==="mkdir-index").map(async function([w,S]){const x=`${i}/${S}`;await t.mkdir(x),r&&await r({phase:"Updating workdir",loaded:++y,total:v})})),await pr.acquire({fs:t,gitdir:s,cache:e},async function(w){await Promise.all(m.filter(([S])=>S==="create"||S==="create-index"||S==="update"||S==="mkdir-index").map(async function([S,x,E,T,k]){const B=`${i}/${x}`;try{if(S!=="create-index"&&S!=="mkdir-index"){const{object:O}=await Nt({fs:t,cache:e,gitdir:s,oid:E});if(k&&await t.rm(B),T===33188)await t.write(B,O);else if(T===33261)await t.write(B,O,{mode:511});else if(T===40960)await t.writelink(B,O);else throw new Ye(`Invalid mode 0o${T.toString(8)} detected in blob ${E}`)}const P=await t.lstat(B);T===33261&&(P.mode=493),S==="mkdir-index"&&(P.mode=57344),w.insert({filepath:x,stats:P,oid:E}),r&&await r({phase:"Updating workdir",loaded:++y,total:v})}catch(P){console.log(P)}}))}),n&&await n({previousHead:g,newHead:_,type:l!=null&&l.length>0?"file":"branch"})}if(!u){const m=await Le.expand({fs:t,gitdir:s,ref:a});m.startsWith("refs/heads")?await Le.writeSymbolicRef({fs:t,gitdir:s,ref:"HEAD",value:m}):await Le.writeRef({fs:t,gitdir:s,ref:"HEAD",value:_})}}async function Xye({fs:t,cache:e,onProgress:r,dir:n,gitdir:i,ref:s,force:o,filepaths:a}){let l=0;return Yl({fs:t,cache:e,dir:n,gitdir:i,trees:[Ws({ref:s}),m0(),p0()],map:async function(c,[u,h,f]){if(c===".")return;if(a&&!a.some(g=>X5(c,g)))return null;switch(r&&await r({phase:"Analyzing workdir",loaded:++l}),[!!f,!!u,!!h].map(Number).join("")){case"000":return;case"001":return o&&a&&a.includes(c)?["delete",c]:void 0;case"010":switch(await u.type()){case"tree":return["mkdir",c];case"blob":return["create",c,await u.oid(),await u.mode()];case"commit":return["mkdir-index",c,await u.oid(),await u.mode()];default:return["error",`new entry Unhandled type ${await u.type()}`]}case"011":switch(`${await u.type()}-${await h.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",c];case"blob-blob":return await u.oid()!==await h.oid()?o?["update",c,await u.oid(),await u.mode(),await u.mode()!==await h.mode()]:["conflict",c]:await u.mode()!==await h.mode()?o?["update",c,await u.oid(),await u.mode(),!0]:["conflict",c]:["create-index",c,await u.oid(),await u.mode()];case"commit-tree":return;case"commit-blob":return["conflict",c];default:return["error",`new entry Unhandled type ${u.type}`]}case"100":return["delete-index",c];case"101":switch(await f.type()){case"tree":return["rmdir",c];case"blob":return await f.oid()!==await h.oid()?o?["delete",c]:["conflict",c]:["delete",c];case"commit":return["rmdir-index",c];default:return["error",`delete entry Unhandled type ${await f.type()}`]}case"110":case"111":switch(`${await f.type()}-${await u.type()}`){case"tree-tree":return;case"blob-blob":{if(await f.oid()===await u.oid()&&await f.mode()===await u.mode()&&!o)return;if(h){if(await h.oid()!==await f.oid()&&await h.oid()!==await u.oid())return o?["update",c,await u.oid(),await u.mode(),await u.mode()!==await h.mode()]:["conflict",c]}else if(o)return["update",c,await u.oid(),await u.mode(),await u.mode()!==await f.mode()];return await u.mode()!==await f.mode()?["update",c,await u.oid(),await u.mode(),!0]:await u.oid()!==await f.oid()?["update",c,await u.oid(),await u.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",c,await u.oid()];case"blob-tree":return["update-blob-to-tree",c];case"commit-commit":return["mkdir-index",c,await u.oid(),await u.mode()];default:return["error",`update entry Unhandled type ${await f.type()}-${await u.type()}`]}}},reduce:async function(c,u){return u=z5(u),c?c&&c[0]==="rmdir"?(u.push(c),u):(u.unshift(c),u):u}})}async function Qye({fs:t,onProgress:e,onPostCheckout:r,dir:n,gitdir:i=Re.join(n,".git"),remote:s="origin",ref:o,filepaths:a,noCheckout:l=!1,noUpdateHead:c=o===void 0,dryRun:u=!1,force:h=!1,track:f=!0,cache:d={}}){try{fe("fs",t),fe("dir",n),fe("gitdir",i);const g=o||"HEAD";return await hS({fs:new $e(t),cache:d,onProgress:e,onPostCheckout:r,dir:n,gitdir:i,remote:s,ref:g,filepaths:a,noCheckout:l,noUpdateHead:c,dryRun:u,force:h,track:f})}catch(g){throw g.caller="git.checkout",g}}const Zye=new RegExp("^refs/(heads/|tags/|remotes/)?(.*)");function zo(t){const e=Zye.exec(t);return e?e[1]==="remotes/"&&t.endsWith("/HEAD")?e[2].slice(0,-5):e[2]:t}async function Ra({fs:t,gitdir:e,fullname:r=!1,test:n=!1}){const i=await Le.resolve({fs:t,gitdir:e,ref:"HEAD",depth:2});if(n)try{await Le.resolve({fs:t,gitdir:e,ref:i})}catch{return}if(i.startsWith("refs/"))return r?i:zo(i)}function Jye(t){return t=t.replace(/^git@([^:]+):/,"https://$1/"),t=t.replace(/^ssh:\/\//,"https://"),t}function Q5({username:t="",password:e=""}){return`Basic ${Ne.from(`${t}:${e}`).toString("base64")}`}async function Lf(t,e){const r=U5(t);for(;;){const{value:n,done:i}=await r.next();if(n&&await e(n),i)break}r.return&&r.return()}async function rg(t){let e=0;const r=[];await Lf(t,s=>{r.push(s),e+=s.byteLength});const n=new Uint8Array(e);let i=0;for(const s of r)n.set(s,i),i+=s.byteLength;return n}function kR(t){let e=t.match(/^https?:\/\/([^/]+)@/);if(e==null)return{url:t,auth:{}};e=e[1];const[r,n]=e.split(":");return t=t.replace(`${e}@`,""),{url:t,auth:{username:r,password:n}}}function ov(t,e){const r=e.toString(16);return"0".repeat(t-r.length)+r}class jt{static flush(){return Ne.from("0000","utf8")}static delim(){return Ne.from("0001","utf8")}static encode(e){typeof e=="string"&&(e=Ne.from(e));const r=e.length+4,n=ov(4,r);return Ne.concat([Ne.from(n,"utf8"),e])}static streamReader(e){const r=new j5(e);return async function(){try{let i=await r.read(4);if(i==null)return!0;if(i=parseInt(i.toString("utf8"),16),i===0||i===1)return null;const s=await r.read(i-4);return s??!0}catch(i){return e.error=i,!0}}}}async function AR(t){const e={};let r;for(;r=await t(),r!==!0;){if(r===null)continue;r=r.toString("utf8").replace(/\n$/,"");const n=r.indexOf("=");if(n>-1){const i=r.slice(0,n),s=r.slice(n+1);e[i]=s}else e[r]=!0}return{protocolVersion:2,capabilities2:e}}async function RR(t,{service:e}){const r=new Set,n=new Map,i=new Map,s=jt.streamReader(t);let o=await s();for(;o===null;)o=await s();if(o===!0)throw new Sf;if(o.includes("version 2"))return AR(s);if(o.toString("utf8").replace(/\n$/,"")!==`# service=${e}`)throw new Aa(`# service=${e}\\n`,o.toString("utf8"));let a=await s();for(;a===null;)a=await s();if(a===!0)return{capabilities:r,refs:n,symrefs:i};if(a=a.toString("utf8"),a.includes("version 2"))return AR(s);const[l,c]=wb(a,"\0","\\x00");if(c.split(" ").map(u=>r.add(u)),l!=="0000000000000000000000000000000000000000 capabilities^{}"){const[u,h]=wb(l," "," ");for(n.set(h,u);;){const f=await s();if(f===!0)break;if(f!==null){const[d,g]=wb(f.toString("utf8")," "," ");n.set(g,d)}}}for(const u of r)if(u.startsWith("symref=")){const h=u.match(/symref=([^:]+):(.*)/);h.length===3&&i.set(h[1],h[2])}return{protocolVersion:1,capabilities:r,refs:n,symrefs:i}}function wb(t,e,r){const n=t.trim().split(e);if(n.length!==2)throw new Aa(`Two strings separated by '${r}'`,t.toString("utf8"));return n}const PR=(t,e)=>t.endsWith("?")?`${t}${e}`:`${t}/${e.replace(/^https?:\/\//,"")}`,IR=(t,e)=>{(e.username||e.password)&&(t.Authorization=Q5(e)),e.headers&&Object.assign(t,e.headers)},Eb=async t=>{try{const e=Ne.from(await rg(t.body)),r=e.toString("utf8");return{preview:r.length<256?r:r.slice(0,256)+"...",response:r,data:e}}catch{return{}}};class ng{static async capabilities(){return["discover","connect"]}static async discover({http:e,onProgress:r,onAuth:n,onAuthSuccess:i,onAuthFailure:s,corsProxy:o,service:a,url:l,headers:c,protocolVersion:u}){let{url:h,auth:f}=kR(l);const d=o?PR(o,h):h;(f.username||f.password)&&(c.Authorization=Q5(f)),u===2&&(c["Git-Protocol"]="version=2");let g,_,m=!1;do if(g=await e.request({onProgress:r,method:"GET",url:`${d}/info/refs?service=${a}`,headers:c}),_=!1,g.statusCode===401||g.statusCode===203){const p=m?s:n;if(p){if(f=await p(h,{...f,headers:{...c}}),f&&f.cancel)throw new Sc;f&&(IR(c,f),m=!0,_=!0)}}else g.statusCode===200&&m&&i&&await i(h,f);while(_);if(g.statusCode!==200){const{response:p}=await Eb(g);throw new Gl(g.statusCode,g.statusMessage,p)}if(g.headers["content-type"]===`application/x-${a}-advertisement`){const p=await RR(g.body,{service:a});return p.auth=f,p}else{const{preview:p,response:b,data:y}=await Eb(g);try{const v=await RR([y],{service:a});return v.auth=f,v}catch{throw new Af(p,b)}}}static async connect({http:e,onProgress:r,corsProxy:n,service:i,url:s,auth:o,body:a,headers:l}){const c=kR(s);c&&(s=c.url),n&&(s=PR(n,s)),l["content-type"]=`application/x-${i}-request`,l.accept=`application/x-${i}-result`,IR(l,o);const u=await e.request({onProgress:r,method:"POST",url:`${s}/${i}`,body:a,headers:l});if(u.statusCode!==200){const{response:h}=Eb(u);throw new Gl(u.statusCode,u.statusMessage,h)}return u}}function eve({url:t}){if(t.startsWith("git@"))return{transport:"ssh",address:t};const e=t.match(/(\w+)(:\/\/|::)(.*)/);if(e!==null){if(e[2]==="://")return{transport:e[1],address:e[0]};if(e[2]==="::")return{transport:e[1],address:e[3]}}}class b0{static getRemoteHelperFor({url:e}){const r=new Map;r.set("http",ng),r.set("https",ng);const n=eve({url:e});if(!n)throw new Pf(e);if(r.has(n.transport))return r.get(n.transport);throw new Rf(e,n.transport,n.transport==="ssh"?Jye(e):void 0)}}let wo=null;class wh{static async read({fs:e,gitdir:r}){wo===null&&(wo=new Wm);const n=Re.join(r,"shallow"),i=new Set;return await wo.acquire(n,async function(){const s=await e.read(n,{encoding:"utf8"});if(s===null||s.trim()==="")return i;s.trim().split(`
`).map(o=>i.add(o))}),i}static async write({fs:e,gitdir:r,oids:n}){wo===null&&(wo=new Wm);const i=Re.join(r,"shallow");if(n.size>0){const s=[...n].join(`
`)+`
`;await wo.acquire(i,async function(){await e.write(i,s,{encoding:"utf8"})})}else await wo.acquire(i,async function(){await e.rm(i)})}}async function tve({fs:t,gitdir:e,oid:r}){const n=`objects/${r.slice(0,2)}/${r.slice(2)}`;return t.exists(`${e}/${n}`)}async function rve({fs:t,cache:e,gitdir:r,oid:n,getExternalRefDelta:i}){let s=await t.readdir(Re.join(r,"objects/pack"));s=s.filter(o=>o.endsWith(".idx"));for(const o of s){const a=`${r}/objects/pack/${o}`,l=await cS({fs:t,cache:e,filename:a,getExternalRefDelta:i});if(l.error)throw new Ye(l.error);if(l.offsets.has(n))return!0}return!1}async function DR({fs:t,cache:e,gitdir:r,oid:n,format:i="content"}){const s=a=>Nt({fs:t,cache:e,gitdir:r,oid:a});let o=await tve({fs:t,gitdir:r,oid:n});return o||(o=await rve({fs:t,cache:e,gitdir:r,oid:n,getExternalRefDelta:s})),o}function nve(t){const i="5041434b"+"00000002"+"00000000";return t.slice(0,12).toString("hex")===i}function Z5(t,e){const r=t.map(n=>n.split("=",1)[0]);return e.filter(n=>{const i=n.split("=",1)[0];return r.includes(i)})}const y0={name:"isomorphic-git",version:"1.27.2",agent:"git/isomorphic-git@1.27.2"};class Cp{constructor(){this._queue=[]}write(e){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){const r=this._waiting;this._waiting=null,r({value:e})}else this._queue.push(e)}end(){if(this._ended=!0,this._waiting){const e=this._waiting;this._waiting=null,e({done:!0})}}destroy(e){this.error=e,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(e=>{this._waiting=e})}}function ive(t){const e=t.indexOf("\r"),r=t.indexOf(`
`);return e===-1&&r===-1?-1:e===-1?r+1:r===-1?e+1:r===e+1?r+1:Math.min(e,r)+1}function J5(t){const e=new Cp;let r="";return(async()=>(await Lf(t,n=>{for(n=n.toString("utf8"),r+=n;;){const i=ive(r);if(i===-1)break;e.write(r.slice(0,i)),r=r.slice(i)}}),r.length>0&&e.write(r),e.end()))(),e}class eF{static demux(e){const r=jt.streamReader(e),n=new Cp,i=new Cp,s=new Cp,o=async function(){const a=await r();if(a===null)return o();if(a===!0){n.end(),s.end(),e.error?i.destroy(e.error):i.end();return}switch(a[0]){case 1:{i.write(a.slice(1));break}case 2:{s.write(a.slice(1));break}case 3:{const l=a.slice(1);s.write(l),n.end(),s.end(),i.destroy(new Error(l.toString("utf8")));return}default:n.write(a)}o()};return o(),{packetlines:n,packfile:i,progress:s}}}async function sve(t){const{packetlines:e,packfile:r,progress:n}=eF.demux(t),i=[],s=[],o=[];let a=!1,l=!1;return new Promise((c,u)=>{Lf(e,h=>{const f=h.toString("utf8").trim();if(f.startsWith("shallow")){const d=f.slice(-41).trim();d.length!==40&&u(new so(d)),i.push(d)}else if(f.startsWith("unshallow")){const d=f.slice(-41).trim();d.length!==40&&u(new so(d)),s.push(d)}else if(f.startsWith("ACK")){const[,d,g]=f.split(" ");o.push({oid:d,status:g}),g||(l=!0)}else f.startsWith("NAK")?(a=!0,l=!0):(l=!0,a=!0);l&&(t.error?u(t.error):c({shallows:i,unshallows:s,acks:o,nak:a,packfile:r,progress:n}))}).finally(()=>{l||(t.error?u(t.error):c({shallows:i,unshallows:s,acks:o,nak:a,packfile:r,progress:n}))})})}function ove({capabilities:t=[],wants:e=[],haves:r=[],shallows:n=[],depth:i=null,since:s=null,exclude:o=[]}){const a=[];e=[...new Set(e)];let l=` ${t.join(" ")}`;for(const c of e)a.push(jt.encode(`want ${c}${l}
`)),l="";for(const c of n)a.push(jt.encode(`shallow ${c}
`));i!==null&&a.push(jt.encode(`deepen ${i}
`)),s!==null&&a.push(jt.encode(`deepen-since ${Math.floor(s.valueOf()/1e3)}
`));for(const c of o)a.push(jt.encode(`deepen-not ${c}
`));a.push(jt.flush());for(const c of r)a.push(jt.encode(`have ${c}
`));return a.push(jt.encode(`done
`)),a}async function fS({fs:t,cache:e,http:r,onProgress:n,onMessage:i,onAuth:s,onAuthSuccess:o,onAuthFailure:a,gitdir:l,ref:c,remoteRef:u,remote:h,url:f,corsProxy:d,depth:g=null,since:_=null,exclude:m=[],relative:p=!1,tags:b=!1,singleBranch:y=!1,headers:v={},prune:w=!1,pruneTags:S=!1}){const x=c||await Ra({fs:t,gitdir:l,test:!0}),E=await zt.get({fs:t,gitdir:l}),T=h||x&&await E.get(`branch.${x}.remote`)||"origin",k=f||await E.get(`remote.${T}.url`);if(typeof k>"u")throw new Zr("remote OR url");const B=u||x&&await E.get(`branch.${x}.merge`)||c||"HEAD";d===void 0&&(d=await E.get("http.corsProxy"));const P=b0.getRemoteHelperFor({url:k}),O=await P.discover({http:r,onAuth:s,onAuthSuccess:o,onAuthFailure:a,corsProxy:d,service:"git-upload-pack",url:k,headers:v,protocolVersion:1}),A=O.auth,$=O.refs;if($.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(g!==null&&!O.capabilities.has("shallow"))throw new Vs("shallow","depth");if(_!==null&&!O.capabilities.has("deepen-since"))throw new Vs("deepen-since","since");if(m.length>0&&!O.capabilities.has("deepen-not"))throw new Vs("deepen-not","exclude");if(p===!0&&!O.capabilities.has("deepen-relative"))throw new Vs("deepen-relative","relative");const{oid:te,fullref:Q}=Le.resolveAgainstMap({ref:B,map:$});for(const de of $.keys())de===Q||de==="HEAD"||de.startsWith("refs/heads/")||b&&de.startsWith("refs/tags/")||$.delete(de);const ee=Z5([...O.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${y0.agent}`]);p&&ee.push("deepen-relative");const L=y?[te]:$.values(),M=y?[x]:await Le.listRefs({fs:t,gitdir:l,filepath:"refs"});let U=[];for(let de of M)try{de=await Le.expand({fs:t,gitdir:l,ref:de});const ve=await Le.resolve({fs:t,gitdir:l,ref:de});await DR({fs:t,cache:e,gitdir:l,oid:ve})&&U.push(ve)}catch{}U=[...new Set(U)];const j=await wh.read({fs:t,gitdir:l}),H=O.capabilities.has("shallow")?[...j]:[],Z=ove({capabilities:ee,wants:L,haves:U,shallows:H,depth:g,since:_,exclude:m}),re=Ne.from(await rg(Z)),ge=await P.connect({http:r,onProgress:n,corsProxy:d,service:"git-upload-pack",url:k,auth:A,body:[re],headers:v}),X=await sve(ge.body);ge.headers&&(X.headers=ge.headers);for(const de of X.shallows)if(!j.has(de))try{const{object:ve}=await Nt({fs:t,cache:e,gitdir:l,oid:de}),F=new Rt(ve),he=await Promise.all(F.headers().parent.map(W=>DR({fs:t,cache:e,gitdir:l,oid:W})));he.length===0||he.every(W=>W)||j.add(de)}catch{j.add(de)}for(const de of X.unshallows)j.delete(de);if(await wh.write({fs:t,gitdir:l,oids:j}),y){const de=new Map([[Q,te]]),ve=new Map;let F=10,he=Q;for(;F--;){const G=O.symrefs.get(he);if(G===void 0)break;ve.set(he,G),he=G}const ae=$.get(he);ae&&de.set(he,ae);const{pruned:W}=await Le.updateRemoteRefs({fs:t,gitdir:l,remote:T,refs:de,symrefs:ve,tags:b,prune:w});w&&(X.pruned=W)}else{const{pruned:de}=await Le.updateRemoteRefs({fs:t,gitdir:l,remote:T,refs:$,symrefs:O.symrefs,tags:b,prune:w,pruneTags:S});w&&(X.pruned=de)}if(X.HEAD=O.symrefs.get("HEAD"),X.HEAD===void 0){const{oid:de}=Le.resolveAgainstMap({ref:"HEAD",map:$});for(const[ve,F]of $.entries())if(ve!=="HEAD"&&F===de){X.HEAD=ve;break}}const V=Q.startsWith("refs/tags")?"tag":"branch";if(X.FETCH_HEAD={oid:te,description:`${V} '${zo(Q)}' of ${k}`},n||i){const de=J5(X.progress);Lf(de,async ve=>{if(i&&await i(ve),n){const F=ve.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);F&&await n({phase:F[1].trim(),loaded:parseInt(F[2],10),total:parseInt(F[3],10)})}})}const ie=Ne.from(await rg(X.packfile));if(ge.body.error)throw ge.body.error;const se=ie.slice(-20).toString("hex"),me={defaultBranch:X.HEAD,fetchHead:X.FETCH_HEAD.oid,fetchHeadDescription:X.FETCH_HEAD.description};if(X.headers&&(me.headers=X.headers),w&&(me.pruned=X.pruned),se!==""&&!nve(ie)){me.packfile=`objects/pack/pack-${se}.pack`;const de=Re.join(l,me.packfile);await t.write(de,ie);const ve=he=>Nt({fs:t,cache:e,gitdir:l,oid:he}),F=await Wl.fromPack({pack:ie,getExternalRefDelta:ve,onProgress:n});await t.write(de.replace(/\.pack$/,".idx"),await F.toBuffer())}return me}async function tF({fs:t,bare:e=!1,dir:r,gitdir:n=e?r:Re.join(r,".git"),defaultBranch:i="master"}){if(await t.exists(n+"/config"))return;let s=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];s=s.map(o=>n+"/"+o);for(const o of s)await t.mkdir(o);await t.write(n+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${e}
`+(e?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await t.write(n+"/HEAD",`ref: refs/heads/${i}
`)}async function ave({fs:t,cache:e,http:r,onProgress:n,onMessage:i,onAuth:s,onAuthSuccess:o,onAuthFailure:a,onPostCheckout:l,dir:c,gitdir:u,url:h,corsProxy:f,ref:d,remote:g,depth:_,since:m,exclude:p,relative:b,singleBranch:y,noCheckout:v,noTags:w,headers:S}){try{if(await tF({fs:t,gitdir:u}),await Y5({fs:t,gitdir:u,remote:g,url:h,force:!1}),f){const T=await zt.get({fs:t,gitdir:u});await T.set("http.corsProxy",f),await zt.save({fs:t,gitdir:u,config:T})}const{defaultBranch:x,fetchHead:E}=await fS({fs:t,cache:e,http:r,onProgress:n,onMessage:i,onAuth:s,onAuthSuccess:o,onAuthFailure:a,gitdir:u,ref:d,remote:g,corsProxy:f,depth:_,since:m,exclude:p,relative:b,singleBranch:y,headers:S,tags:!w});if(E===null)return;d=d||x,d=d.replace("refs/heads/",""),await hS({fs:t,cache:e,onProgress:n,onPostCheckout:l,dir:c,gitdir:u,ref:d,remote:g,noCheckout:v})}catch(x){throw await t.rmdir(u,{recursive:!0,maxRetries:10}).catch(()=>{}),x}}async function lve({fs:t,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:s,onAuthFailure:o,onPostCheckout:a,dir:l,gitdir:c=Re.join(l,".git"),url:u,corsProxy:h=void 0,ref:f=void 0,remote:d="origin",depth:g=void 0,since:_=void 0,exclude:m=[],relative:p=!1,singleBranch:b=!1,noCheckout:y=!1,noTags:v=!1,headers:w={},cache:S={}}){try{return fe("fs",t),fe("http",e),fe("gitdir",c),y||fe("dir",l),fe("url",u),await ave({fs:new $e(t),cache:S,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:s,onAuthFailure:o,onPostCheckout:a,dir:l,gitdir:c,url:u,corsProxy:h,ref:f,remote:d,depth:g,since:_,exclude:m,relative:p,singleBranch:b,noCheckout:y,noTags:v,headers:w})}catch(x){throw x.caller="git.clone",x}}async function cve({fs:t,onSign:e,dir:r,gitdir:n=Re.join(r,".git"),message:i,author:s,committer:o,signingKey:a,amend:l=!1,dryRun:c=!1,noUpdateBranch:u=!1,ref:h,parent:f,tree:d,cache:g={}}){try{fe("fs",t),l||fe("message",i),a&&fe("onSign",e);const _=new $e(t);return await _0({fs:_,cache:g,onSign:e,gitdir:n,message:i,author:s,committer:o,signingKey:a,amend:l,dryRun:c,noUpdateBranch:u,ref:h,parent:f,tree:d})}catch(_){throw _.caller="git.commit",_}}async function uve({fs:t,dir:e,gitdir:r=Re.join(e,".git"),fullname:n=!1,test:i=!1}){try{return fe("fs",t),fe("gitdir",r),await Ra({fs:new $e(t),gitdir:r,fullname:n,test:i})}catch(s){throw s.caller="git.currentBranch",s}}async function hve({fs:t,gitdir:e,ref:r}){if(r=r.startsWith("refs/heads/")?r:`refs/heads/${r}`,!await Le.exists({fs:t,gitdir:e,ref:r}))throw new Tt(r);const i=await Le.expand({fs:t,gitdir:e,ref:r}),s=await Ra({fs:t,gitdir:e,fullname:!0});if(i===s){const l=await Le.resolve({fs:t,gitdir:e,ref:i});await Le.writeRef({fs:t,gitdir:e,ref:"HEAD",value:l})}await Le.deleteRef({fs:t,gitdir:e,ref:i});const o=zo(r),a=await zt.get({fs:t,gitdir:e});await a.deleteSection("branch",o),await zt.save({fs:t,gitdir:e,config:a})}async function fve({fs:t,dir:e,gitdir:r=Re.join(e,".git"),ref:n}){try{return fe("fs",t),fe("ref",n),await hve({fs:new $e(t),gitdir:r,ref:n})}catch(i){throw i.caller="git.deleteBranch",i}}async function dve({fs:t,dir:e,gitdir:r=Re.join(e,".git"),ref:n}){try{fe("fs",t),fe("ref",n),await Le.deleteRef({fs:new $e(t),gitdir:r,ref:n})}catch(i){throw i.caller="git.deleteRef",i}}async function pve({fs:t,gitdir:e,remote:r}){const n=await zt.get({fs:t,gitdir:e});await n.deleteSection("remote",r),await zt.save({fs:t,gitdir:e,config:n})}async function mve({fs:t,dir:e,gitdir:r=Re.join(e,".git"),remote:n}){try{return fe("fs",t),fe("remote",n),await pve({fs:new $e(t),gitdir:r,remote:n})}catch(i){throw i.caller="git.deleteRemote",i}}async function gve({fs:t,gitdir:e,ref:r}){r=r.startsWith("refs/tags/")?r:`refs/tags/${r}`,await Le.deleteRef({fs:t,gitdir:e,ref:r})}async function _ve({fs:t,dir:e,gitdir:r=Re.join(e,".git"),ref:n}){try{return fe("fs",t),fe("ref",n),await gve({fs:new $e(t),gitdir:r,ref:n})}catch(i){throw i.caller="git.deleteTag",i}}async function bve({fs:t,gitdir:e,oid:r}){const n=r.slice(0,2);return(await t.readdir(`${e}/objects/${n}`)).map(s=>`${n}${s}`).filter(s=>s.startsWith(r))}async function yve({fs:t,cache:e,gitdir:r,oid:n,getExternalRefDelta:i}){const s=[];let o=await t.readdir(Re.join(r,"objects/pack"));o=o.filter(a=>a.endsWith(".idx"));for(const a of o){const l=`${r}/objects/pack/${a}`,c=await cS({fs:t,cache:e,filename:l,getExternalRefDelta:i});if(c.error)throw new Ye(c.error);for(const u of c.offsets.keys())u.startsWith(n)&&s.push(u)}return s}async function vve({fs:t,cache:e,gitdir:r,oid:n}){const i=a=>Nt({fs:t,cache:e,gitdir:r,oid:a}),s=await bve({fs:t,gitdir:r,oid:n}),o=await yve({fs:t,cache:e,gitdir:r,oid:n,getExternalRefDelta:i});for(const a of o)s.indexOf(a)===-1&&s.push(a);if(s.length===1)return s[0];throw s.length>1?new vf("oids",n,s):new Tt(`an object matching "${n}"`)}async function wve({fs:t,dir:e,gitdir:r=Re.join(e,".git"),oid:n,cache:i={}}){try{return fe("fs",t),fe("gitdir",r),fe("oid",n),await vve({fs:new $e(t),cache:i,gitdir:r,oid:n})}catch(s){throw s.caller="git.expandOid",s}}async function Eve({fs:t,dir:e,gitdir:r=Re.join(e,".git"),ref:n}){try{return fe("fs",t),fe("gitdir",r),fe("ref",n),await Le.expand({fs:new $e(t),gitdir:r,ref:n})}catch(i){throw i.caller="git.expandRef",i}}async function dS({fs:t,cache:e,gitdir:r,oids:n}){const i={},s=n.length;let o=n.map((a,l)=>({index:l,oid:a}));for(;o.length;){const a=new Set;for(const{oid:c,index:u}of o)i[c]||(i[c]=new Set),i[c].add(u),i[c].size===s&&a.add(c);if(a.size>0)return[...a];const l=new Map;for(const{oid:c,index:u}of o)try{const{object:h}=await Nt({fs:t,cache:e,gitdir:r,oid:c}),f=Rt.from(h),{parent:d}=f.parseHeaders();for(const g of d)(!i[g]||!i[g].has(u))&&l.set(g+":"+u,{oid:g,index:u})}catch{}o=Array.from(l.values())}return[]}const Sb=/^.*(\r?\n|$)/gm;function Sve({branches:t,contents:e}){const r=t[1],n=t[2],i=e[0],s=e[1],o=e[2],a=s.match(Sb),l=i.match(Sb),c=o.match(Sb),u=H1e(a,l,c),h=7;let f="",d=!0;for(const g of u)g.ok&&(f+=g.ok.join("")),g.conflict&&(d=!1,f+=`${"<".repeat(h)} ${r}
`,f+=g.conflict.a.join(""),f+=`${"=".repeat(h)}
`,f+=g.conflict.b.join(""),f+=`${">".repeat(h)} ${n}
`);return{cleanMerge:d,mergedText:f}}async function xve({fs:t,cache:e,dir:r,gitdir:n=Re.join(r,".git"),index:i,ourOid:s,baseOid:o,theirOid:a,ourName:l="ours",baseName:c="base",theirName:u="theirs",dryRun:h=!1,abortOnConflict:f=!0,mergeDriver:d}){const g=Ws({ref:s}),_=Ws({ref:o}),m=Ws({ref:a}),p=[],b=[],y=[],v=[],w=await Yl({fs:t,cache:e,dir:r,gitdir:n,trees:[g,_,m],map:async function(S,[x,E,T]){const k=Xm(S),B=await eg(x,E),P=await eg(T,E);switch(`${B}-${P}`){case"false-false":return{mode:await E.mode(),path:k,oid:await E.oid(),type:await E.type()};case"false-true":return T?{mode:await T.mode(),path:k,oid:await T.oid(),type:await T.type()}:void 0;case"true-false":return x?{mode:await x.mode(),path:k,oid:await x.oid(),type:await x.type()}:void 0;case"true-true":{if(x&&E&&T&&await x.type()==="blob"&&await E.type()==="blob"&&await T.type()==="blob")return Tve({fs:t,gitdir:n,path:k,ours:x,base:E,theirs:T,ourName:l,baseName:c,theirName:u,mergeDriver:d}).then(async O=>{if(O.cleanMerge)f||i.insert({filepath:S,oid:O.mergeResult.oid,stage:0});else if(p.push(S),b.push(S),!f){const A=await E.oid(),$=await x.oid(),te=await T.oid();i.delete({filepath:S}),i.insert({filepath:S,oid:A,stage:1}),i.insert({filepath:S,oid:$,stage:2}),i.insert({filepath:S,oid:te,stage:3})}return O.mergeResult});if(E&&!x&&T&&await E.type()==="blob"&&await T.type()==="blob"){if(p.push(S),y.push(S),!f){const O=await E.oid(),A=await T.oid();i.delete({filepath:S}),i.insert({filepath:S,oid:O,stage:1}),i.insert({filepath:S,oid:A,stage:3})}return{mode:await T.mode(),oid:await T.oid(),type:"blob",path:k}}if(E&&x&&!T&&await E.type()==="blob"&&await x.type()==="blob"){if(p.push(S),v.push(S),!f){const O=await E.oid(),A=await x.oid();i.delete({filepath:S}),i.insert({filepath:S,oid:O,stage:1}),i.insert({filepath:S,oid:A,stage:2})}return{mode:await x.mode(),oid:await x.oid(),type:"blob",path:k}}if(E&&!x&&!T&&await E.type()==="blob")return;throw new wc}}},reduce:p.length!==0&&(!r||f)?void 0:async(S,x)=>{const E=x.filter(Boolean);if(S&&!(S&&S.type==="tree"&&E.length===0)){if(E.length>0){const k=new tn(E).toObject(),B=await gn({fs:t,gitdir:n,type:"tree",object:k,dryRun:h});S.oid=B}return S}}});return p.length!==0?(r&&!f&&await Yl({fs:t,cache:e,dir:r,gitdir:n,trees:[Ws({ref:w.oid})],map:async function(S,[x]){const E=`${r}/${S}`;if(await x.type()==="blob"){const T=await x.mode(),k=new TextDecoder().decode(await x.content());await t.write(E,k,{mode:T})}return!0}}),new Ec(p,b,y,v)):w.oid}async function Tve({fs:t,gitdir:e,path:r,ours:n,base:i,theirs:s,ourName:o,theirName:a,baseName:l,dryRun:c,mergeDriver:u=Sve}){const h="blob",f=await i.mode()===await n.mode()?await s.mode():await n.mode();if(await n.oid()===await s.oid())return{cleanMerge:!0,mergeResult:{mode:f,path:r,oid:await n.oid(),type:h}};if(await n.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:f,path:r,oid:await s.oid(),type:h}};if(await s.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:f,path:r,oid:await n.oid(),type:h}};const d=Ne.from(await n.content()).toString("utf8"),g=Ne.from(await i.content()).toString("utf8"),_=Ne.from(await s.content()).toString("utf8"),{mergedText:m,cleanMerge:p}=await u({branches:[l,o,a],contents:[g,d,_],path:r}),b=await gn({fs:t,gitdir:e,type:"blob",object:Ne.from(m,"utf8"),dryRun:c});return{cleanMerge:p,mergeResult:{mode:f,path:r,oid:b,type:h}}}async function rF({fs:t,cache:e,dir:r,gitdir:n,ours:i,theirs:s,fastForward:o=!0,fastForwardOnly:a=!1,dryRun:l=!1,noUpdateBranch:c=!1,abortOnConflict:u=!0,message:h,author:f,committer:d,signingKey:g,onSign:_,mergeDriver:m}){i===void 0&&(i=await Ra({fs:t,gitdir:n,fullname:!0})),i=await Le.expand({fs:t,gitdir:n,ref:i}),s=await Le.expand({fs:t,gitdir:n,ref:s});const p=await Le.resolve({fs:t,gitdir:n,ref:i}),b=await Le.resolve({fs:t,gitdir:n,ref:s}),y=await dS({fs:t,cache:e,gitdir:n,oids:[p,b]});if(y.length!==1)throw new wc;const v=y[0];if(v===b)return{oid:p,alreadyMerged:!0};if(o&&v===p)return!l&&!c&&await Le.writeRef({fs:t,gitdir:n,ref:i,value:b}),{oid:b,fastForward:!0};{if(a)throw new xf;const w=await pr.acquire({fs:t,gitdir:n,cache:e,allowUnmerged:!1},async x=>xve({fs:t,cache:e,dir:r,gitdir:n,index:x,ourOid:p,theirOid:b,baseOid:v,ourName:zo(i),baseName:"base",theirName:zo(s),dryRun:l,abortOnConflict:u,mergeDriver:m}));if(w instanceof Ec)throw w;return h||(h=`Merge branch '${zo(s)}' into ${zo(i)}`),{oid:await _0({fs:t,cache:e,gitdir:n,message:h,ref:i,tree:w,parent:[p,b],author:f,committer:d,signingKey:g,onSign:_,dryRun:l,noUpdateBranch:c}),tree:w,mergeCommit:!0}}}async function nF({fs:t,cache:e,http:r,onProgress:n,onMessage:i,onAuth:s,onAuthSuccess:o,onAuthFailure:a,dir:l,gitdir:c,ref:u,url:h,remote:f,remoteRef:d,prune:g,pruneTags:_,fastForward:m,fastForwardOnly:p,corsProxy:b,singleBranch:y,headers:v,author:w,committer:S,signingKey:x}){try{if(!u){const k=await Ra({fs:t,gitdir:c});if(!k)throw new Zr("ref");u=k}const{fetchHead:E,fetchHeadDescription:T}=await fS({fs:t,cache:e,http:r,onProgress:n,onMessage:i,onAuth:s,onAuthSuccess:o,onAuthFailure:a,gitdir:c,corsProxy:b,ref:u,url:h,remote:f,remoteRef:d,singleBranch:y,headers:v,prune:g,pruneTags:_});await rF({fs:t,cache:e,gitdir:c,ours:u,theirs:E,fastForward:m,fastForwardOnly:p,message:`Merge ${T}`,author:w,committer:S,signingKey:x,dryRun:!1,noUpdateBranch:!1}),await hS({fs:t,cache:e,onProgress:n,dir:l,gitdir:c,ref:u,remote:f,noCheckout:!1})}catch(E){throw E.caller="git.pull",E}}async function Cve({fs:t,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:s,onAuthFailure:o,dir:a,gitdir:l=Re.join(a,".git"),ref:c,url:u,remote:h,remoteRef:f,corsProxy:d,singleBranch:g,headers:_={},cache:m={}}){try{fe("fs",t),fe("http",e),fe("gitdir",l);const p={name:"",email:"",timestamp:Date.now(),timezoneOffset:0};return await nF({fs:new $e(t),cache:m,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:s,onAuthFailure:o,dir:a,gitdir:l,ref:c,url:u,remote:h,remoteRef:f,fastForwardOnly:!0,corsProxy:d,singleBranch:g,headers:_,author:p,committer:p})}catch(p){throw p.caller="git.fastForward",p}}async function kve({fs:t,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:s,onAuthFailure:o,dir:a,gitdir:l=Re.join(a,".git"),ref:c,remote:u,remoteRef:h,url:f,corsProxy:d,depth:g=null,since:_=null,exclude:m=[],relative:p=!1,tags:b=!1,singleBranch:y=!1,headers:v={},prune:w=!1,pruneTags:S=!1,cache:x={}}){try{return fe("fs",t),fe("http",e),fe("gitdir",l),await fS({fs:new $e(t),cache:x,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:s,onAuthFailure:o,gitdir:l,ref:c,remote:u,remoteRef:h,url:f,corsProxy:d,depth:g,since:_,exclude:m,relative:p,tags:b,singleBranch:y,headers:v,prune:w,pruneTags:S})}catch(E){throw E.caller="git.fetch",E}}async function Ave({fs:t,dir:e,gitdir:r=Re.join(e,".git"),oids:n,cache:i={}}){try{return fe("fs",t),fe("gitdir",r),fe("oids",n),await dS({fs:new $e(t),cache:i,gitdir:r,oids:n})}catch(s){throw s.caller="git.findMergeBase",s}}async function iF({fs:t,filepath:e}){if(await t.exists(Re.join(e,".git")))return e;{const r=Vl(e);if(r===e)throw new Tt(`git root for ${e}`);return iF({fs:t,filepath:r})}}async function Rve({fs:t,filepath:e}){try{return fe("fs",t),fe("filepath",e),await iF({fs:new $e(t),filepath:e})}catch(r){throw r.caller="git.findRoot",r}}async function Pve({fs:t,dir:e,gitdir:r=Re.join(e,".git"),path:n}){try{return fe("fs",t),fe("gitdir",r),fe("path",n),await vh({fs:new $e(t),gitdir:r,path:n})}catch(i){throw i.caller="git.getConfig",i}}async function Ive({fs:t,gitdir:e,path:r}){return(await zt.get({fs:t,gitdir:e})).getall(r)}async function Dve({fs:t,dir:e,gitdir:r=Re.join(e,".git"),path:n}){try{return fe("fs",t),fe("gitdir",r),fe("path",n),await Ive({fs:new $e(t),gitdir:r,path:n})}catch(i){throw i.caller="git.getConfigAll",i}}async function Ove({http:t,onAuth:e,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,url:s,headers:o={},forPush:a=!1}){try{fe("http",t),fe("url",s);const c=await b0.getRemoteHelperFor({url:s}).discover({http:t,onAuth:e,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,service:a?"git-receive-pack":"git-upload-pack",url:s,headers:o,protocolVersion:1}),u={capabilities:[...c.capabilities]};for(const[h,f]of c.refs){const d=h.split("/"),g=d.pop();let _=u;for(const m of d)_[m]=_[m]||{},_=_[m];_[g]=f}for(const[h,f]of c.symrefs){const d=h.split("/"),g=d.pop();let _=u;for(const m of d)_[m]=_[m]||{},_=_[m];_[g]=f}return u}catch(l){throw l.caller="git.getRemoteInfo",l}}function sF(t,e,r,n){const i=[];for(const[s,o]of t.refs){if(e&&!s.startsWith(e))continue;if(s.endsWith("^{}")){if(n){const l=s.replace("^{}",""),c=i[i.length-1],u=c.ref===l?c:i.find(h=>h.ref===l);if(u===void 0)throw new Error("I did not expect this to happen");u.peeled=o}continue}const a={ref:s,oid:o};r&&t.symrefs.has(s)&&(a.target=t.symrefs.get(s)),i.push(a)}return i}async function Lve({http:t,onAuth:e,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,url:s,headers:o={},forPush:a=!1,protocolVersion:l=2}){try{fe("http",t),fe("url",s);const u=await b0.getRemoteHelperFor({url:s}).discover({http:t,onAuth:e,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,service:a?"git-receive-pack":"git-upload-pack",url:s,headers:o,protocolVersion:l});if(u.protocolVersion===2)return{protocolVersion:u.protocolVersion,capabilities:u.capabilities2};const h={};for(const f of u.capabilities){const[d,g]=f.split("=");g?h[d]=g:h[d]=!0}return{protocolVersion:1,capabilities:h,refs:sF(u,void 0,!0,!0)}}catch(c){throw c.caller="git.getRemoteInfo2",c}}async function Nve({type:t,object:e,format:r="content",oid:n=void 0}){return r!=="deflated"&&(r!=="wrapped"&&(e=vc.wrap({type:t,object:e})),n=await ps(e)),{oid:n,object:e}}async function Mve({object:t}){try{fe("object",t),typeof t=="string"?t=Ne.from(t,"utf8"):t=Ne.from(t);const e="blob",{oid:r,object:n}=await Nve({type:"blob",format:"content",object:t});return{oid:r,type:e,object:new Uint8Array(n),format:"wrapped"}}catch(e){throw e.caller="git.hashBlob",e}}async function Bve({fs:t,cache:e,onProgress:r,dir:n,gitdir:i,filepath:s}){try{s=Re.join(n,s);const o=await t.read(s),a=c=>Nt({fs:t,cache:e,gitdir:i,oid:c}),l=await Wl.fromPack({pack:o,getExternalRefDelta:a,onProgress:r});return await t.write(s.replace(/\.pack$/,".idx"),await l.toBuffer()),{oids:[...l.hashes]}}catch(o){throw o.caller="git.indexPack",o}}async function Fve({fs:t,onProgress:e,dir:r,gitdir:n=Re.join(r,".git"),filepath:i,cache:s={}}){try{return fe("fs",t),fe("dir",r),fe("gitdir",r),fe("filepath",i),await Bve({fs:new $e(t),cache:s,onProgress:e,dir:r,gitdir:n,filepath:i})}catch(o){throw o.caller="git.indexPack",o}}async function Hve({fs:t,bare:e=!1,dir:r,gitdir:n=e?r:Re.join(r,".git"),defaultBranch:i="master"}){try{return fe("fs",t),fe("gitdir",n),e||fe("dir",r),await tF({fs:new $e(t),bare:e,dir:r,gitdir:n,defaultBranch:i})}catch(s){throw s.caller="git.init",s}}async function oF({fs:t,cache:e,gitdir:r,oid:n,ancestor:i,depth:s}){const o=await wh.read({fs:t,gitdir:r});if(!n)throw new Zr("oid");if(!i)throw new Zr("ancestor");if(n===i)return!1;const a=[n],l=new Set;let c=0;for(;a.length;){if(c++===s)throw new Cf(s);const u=a.shift(),{type:h,object:f}=await Nt({fs:t,cache:e,gitdir:r,oid:u});if(h!=="commit")throw new Ur(u,h,"commit");const d=Rt.from(f).parse();for(const g of d.parent)if(g===i)return!0;if(!o.has(u))for(const g of d.parent)l.has(g)||(a.push(g),l.add(g))}return!1}async function Uve({fs:t,dir:e,gitdir:r=Re.join(e,".git"),oid:n,ancestor:i,depth:s=-1,cache:o={}}){try{return fe("fs",t),fe("gitdir",r),fe("oid",n),fe("ancestor",i),await oF({fs:new $e(t),cache:o,gitdir:r,oid:n,ancestor:i,depth:s})}catch(a){throw a.caller="git.isDescendent",a}}async function jve({fs:t,dir:e,gitdir:r=Re.join(e,".git"),filepath:n}){try{return fe("fs",t),fe("dir",e),fe("gitdir",r),fe("filepath",n),g0.isIgnored({fs:new $e(t),dir:e,gitdir:r,filepath:n})}catch(i){throw i.caller="git.isIgnored",i}}async function $ve({fs:t,dir:e,gitdir:r=Re.join(e,".git"),remote:n}){try{return fe("fs",t),fe("gitdir",r),Le.listBranches({fs:new $e(t),gitdir:r,remote:n})}catch(i){throw i.caller="git.listBranches",i}}async function zve({fs:t,gitdir:e,ref:r,cache:n}){if(r){const i=await Le.resolve({gitdir:e,fs:t,ref:r}),s=[];return await aF({fs:t,cache:n,gitdir:e,oid:i,filenames:s,prefix:""}),s}else return pr.acquire({fs:t,gitdir:e,cache:n},async function(i){return i.entries.map(s=>s.path)})}async function aF({fs:t,cache:e,gitdir:r,oid:n,filenames:i,prefix:s}){const{tree:o}=await xc({fs:t,cache:e,gitdir:r,oid:n});for(const a of o)a.type==="tree"?await aF({fs:t,cache:e,gitdir:r,oid:a.oid,filenames:i,prefix:Re.join(s,a.path)}):i.push(Re.join(s,a.path))}async function Vve({fs:t,dir:e,gitdir:r=Re.join(e,".git"),ref:n,cache:i={}}){try{return fe("fs",t),fe("gitdir",r),await zve({fs:new $e(t),cache:i,gitdir:r,ref:n})}catch(s){throw s.caller="git.listFiles",s}}async function Wve({fs:t,cache:e,gitdir:r,ref:n}){let i;try{i=await Le.resolve({gitdir:r,fs:t,ref:n})}catch(a){if(a instanceof Tt)return[]}return(await xc({fs:t,cache:e,gitdir:r,oid:i})).tree.map(a=>({target:a.path,note:a.oid}))}async function Gve({fs:t,dir:e,gitdir:r=Re.join(e,".git"),ref:n="refs/notes/commits",cache:i={}}){try{return fe("fs",t),fe("gitdir",r),fe("ref",n),await Wve({fs:new $e(t),cache:i,gitdir:r,ref:n})}catch(s){throw s.caller="git.listNotes",s}}async function qve({fs:t,gitdir:e}){const r=await zt.get({fs:t,gitdir:e}),n=await r.getSubsections("remote");return Promise.all(n.map(async s=>{const o=await r.get(`remote.${s}.url`);return{remote:s,url:o}}))}async function Kve({fs:t,dir:e,gitdir:r=Re.join(e,".git")}){try{return fe("fs",t),fe("gitdir",r),await qve({fs:new $e(t),gitdir:r})}catch(n){throw n.caller="git.listRemotes",n}}async function Yve(t){const e=jt.streamReader(t),r=[];let n;for(;n=await e(),n!==!0;){if(n===null)continue;n=n.toString("utf8").replace(/\n$/,"");const[i,s,...o]=n.split(" "),a={ref:s,oid:i};for(const l of o){const[c,u]=l.split(":");c==="symref-target"?a.target=u:c==="peeled"&&(a.peeled=u)}r.push(a)}return r}async function Xve({prefix:t,symrefs:e,peelTags:r}){const n=[];return n.push(jt.encode(`command=ls-refs
`)),n.push(jt.encode(`agent=${y0.agent}
`)),(r||e||t)&&n.push(jt.delim()),r&&n.push(jt.encode("peel")),e&&n.push(jt.encode("symrefs")),t&&n.push(jt.encode(`ref-prefix ${t}`)),n.push(jt.flush()),n}async function Qve({http:t,onAuth:e,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,url:s,headers:o={},forPush:a=!1,protocolVersion:l=2,prefix:c,symrefs:u,peelTags:h}){try{fe("http",t),fe("url",s);const f=await ng.discover({http:t,onAuth:e,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,service:a?"git-receive-pack":"git-upload-pack",url:s,headers:o,protocolVersion:l});if(f.protocolVersion===1)return sF(f,c,u,h);const d=await Xve({prefix:c,symrefs:u,peelTags:h}),g=await ng.connect({http:t,auth:f.auth,headers:o,corsProxy:i,service:a?"git-receive-pack":"git-upload-pack",url:s,body:d});return Yve(g.body)}catch(f){throw f.caller="git.listServerRefs",f}}async function Zve({fs:t,dir:e,gitdir:r=Re.join(e,".git")}){try{return fe("fs",t),fe("gitdir",r),Le.listTags({fs:new $e(t),gitdir:r})}catch(n){throw n.caller="git.listTags",n}}function Jve(t,e){return t.committer.timestamp-e.committer.timestamp}const ewe="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function OR({fs:t,cache:e,gitdir:r,oid:n,fileId:i}){if(i===ewe)return;const s=n;let o;const a=await Kl({fs:t,cache:e,gitdir:r,oid:n}),l=a.tree;return i===a.oid?o=a.path:(o=await lF({fs:t,cache:e,gitdir:r,tree:l,fileId:i,oid:s}),Array.isArray(o)&&(o.length===0?o=void 0:o.length===1&&(o=o[0]))),o}async function lF({fs:t,cache:e,gitdir:r,tree:n,fileId:i,oid:s,filepaths:o=[],parentPath:a=""}){const l=n.entries().map(function(c){let u;return c.oid===i?(u=Re.join(a,c.path),o.push(u)):c.type==="tree"&&(u=Nt({fs:t,cache:e,gitdir:r,oid:c.oid}).then(function({object:h}){return lF({fs:t,cache:e,gitdir:r,tree:tn.from(h),fileId:i,oid:s,filepaths:o,parentPath:Re.join(a,c.path)})})),u});return await Promise.all(l),o}async function twe({fs:t,cache:e,gitdir:r,filepath:n,ref:i,depth:s,since:o,force:a,follow:l}){const c=typeof o>"u"?void 0:Math.floor(o.valueOf()/1e3),u=[],h=await wh.read({fs:t,gitdir:r}),f=await Le.resolve({fs:t,gitdir:r,ref:i}),d=[await tg({fs:t,cache:e,gitdir:r,oid:f})];let g,_,m;function p(b){m&&n&&u.push(b)}for(;d.length>0;){const b=d.pop();if(c!==void 0&&b.commit.committer.timestamp<=c)break;if(n){let y;try{y=await Of({fs:t,cache:e,gitdir:r,oid:b.commit.tree,filepath:n}),_&&g!==y&&u.push(_),g=y,_=b,m=!0}catch(v){if(v instanceof Tt){let w=l&&g;if(w&&(w=await OR({fs:t,cache:e,gitdir:r,oid:b.commit.tree,fileId:g}),w))if(Array.isArray(w)){if(_){const S=await OR({fs:t,cache:e,gitdir:r,oid:_.commit.tree,fileId:g});if(Array.isArray(S))if(w=w.filter(x=>S.indexOf(x)===-1),w.length===1)w=w[0],n=w,_&&u.push(_);else{w=!1,_&&u.push(_);break}}}else n=w,_&&u.push(_);if(!w){if(m&&g&&(u.push(_),!a))break;if(!a&&!l)throw v}_=b,m=!1}else throw v}}else u.push(b);if(s!==void 0&&u.length===s){p(b);break}if(!h.has(b.oid))for(const y of b.commit.parent){const v=await tg({fs:t,cache:e,gitdir:r,oid:y});d.map(w=>w.oid).includes(v.oid)||d.push(v)}d.length===0&&p(b),d.sort((y,v)=>Jve(y.commit,v.commit))}return u}async function rwe({fs:t,dir:e,gitdir:r=Re.join(e,".git"),filepath:n,ref:i="HEAD",depth:s,since:o,force:a,follow:l,cache:c={}}){try{return fe("fs",t),fe("gitdir",r),fe("ref",i),await twe({fs:new $e(t),cache:c,gitdir:r,filepath:n,ref:i,depth:s,since:o,force:a,follow:l})}catch(u){throw u.caller="git.log",u}}async function nwe({fs:t,onSign:e,dir:r,gitdir:n=Re.join(r,".git"),ours:i,theirs:s,fastForward:o=!0,fastForwardOnly:a=!1,dryRun:l=!1,noUpdateBranch:c=!1,abortOnConflict:u=!0,message:h,author:f,committer:d,signingKey:g,cache:_={},mergeDriver:m}){try{fe("fs",t),g&&fe("onSign",e);const p=new $e(t),b=await _a({fs:p,gitdir:n,author:f});if(!b&&(!a||!o))throw new Br("author");const y=await Xl({fs:p,gitdir:n,author:b,committer:d});if(!y&&(!a||!o))throw new Br("committer");return await rF({fs:p,cache:_,dir:r,gitdir:n,ours:i,theirs:s,fastForward:o,fastForwardOnly:a,dryRun:l,noUpdateBranch:c,abortOnConflict:u,message:h,author:b,committer:y,signingKey:g,onSign:e,mergeDriver:m})}catch(p){throw p.caller="git.merge",p}}const iwe={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function cF({fs:t,cache:e,dir:r,gitdir:n=Re.join(r,".git"),oids:i}){const s=new z4,o=[];function a(u,h){const f=Ne.from(u,h);o.push(f),s.update(f)}async function l({stype:u,object:h}){const f=iwe[u];let d=h.length,g=d>15?128:0;const _=d&15;d=d>>>4;let m=(g|f|_).toString(16);for(a(m,"hex");g;)g=d>127?128:0,m=g|d&127,a(ov(2,m),"hex"),d=d>>>7;a(Ne.from(await V5(h)))}a("PACK"),a("00000002","hex"),a(ov(8,i.length),"hex");for(const u of i){const{type:h,object:f}=await Nt({fs:t,cache:e,gitdir:n,oid:u});await l({write:a,object:f,stype:h})}const c=s.digest();return o.push(c),o}async function swe({fs:t,cache:e,gitdir:r,oids:n,write:i}){const s=await cF({fs:t,cache:e,gitdir:r,oids:n}),o=Ne.from(await rg(s)),l=`pack-${o.slice(-20).toString("hex")}.pack`;return i?(await t.write(Re.join(r,`objects/pack/${l}`),o),{filename:l}):{filename:l,packfile:new Uint8Array(o)}}async function owe({fs:t,dir:e,gitdir:r=Re.join(e,".git"),oids:n,write:i=!1,cache:s={}}){try{return fe("fs",t),fe("gitdir",r),fe("oids",n),await swe({fs:new $e(t),cache:s,gitdir:r,oids:n,write:i})}catch(o){throw o.caller="git.packObjects",o}}async function awe({fs:t,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:s,onAuthFailure:o,dir:a,gitdir:l=Re.join(a,".git"),ref:c,url:u,remote:h,remoteRef:f,prune:d=!1,pruneTags:g=!1,fastForward:_=!0,fastForwardOnly:m=!1,corsProxy:p,singleBranch:b,headers:y={},author:v,committer:w,signingKey:S,cache:x={}}){try{fe("fs",t),fe("gitdir",l);const E=new $e(t),T=await _a({fs:E,gitdir:l,author:v});if(!T)throw new Br("author");const k=await Xl({fs:E,gitdir:l,author:T,committer:w});if(!k)throw new Br("committer");return await nF({fs:E,cache:x,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:s,onAuthFailure:o,dir:a,gitdir:l,ref:c,url:u,remote:h,remoteRef:f,fastForward:_,fastForwardOnly:m,corsProxy:p,singleBranch:b,headers:y,author:T,committer:k,signingKey:S,prune:d,pruneTags:g})}catch(E){throw E.caller="git.pull",E}}async function lwe({fs:t,cache:e,dir:r,gitdir:n=Re.join(r,".git"),start:i,finish:s}){const o=await wh.read({fs:t,gitdir:n}),a=new Set,l=new Set;for(const h of i)a.add(await Le.resolve({fs:t,gitdir:n,ref:h}));for(const h of s)try{const f=await Le.resolve({fs:t,gitdir:n,ref:h});l.add(f)}catch{}const c=new Set;async function u(h){c.add(h);const{type:f,object:d}=await Nt({fs:t,cache:e,gitdir:n,oid:h});if(f==="tag"){const _=Mr.from(d).headers().object;return u(_)}if(f!=="commit")throw new Ur(h,f,"commit");if(!o.has(h)){const _=Rt.from(d).headers().parent;for(h of _)!l.has(h)&&!c.has(h)&&await u(h)}}for(const h of a)await u(h);return c}async function xb({fs:t,cache:e,dir:r,gitdir:n=Re.join(r,".git"),oids:i}){const s=new Set;async function o(a){if(s.has(a))return;s.add(a);const{type:l,object:c}=await Nt({fs:t,cache:e,gitdir:n,oid:a});if(l==="tag"){const h=Mr.from(c).headers().object;await o(h)}else if(l==="commit"){const h=Rt.from(c).headers().tree;await o(h)}else if(l==="tree"){const u=tn.from(c);for(const h of u)h.type==="blob"&&s.add(h.oid),h.type==="tree"&&await o(h.oid)}}for(const a of i)await o(a);return s}async function cwe(t){const e={};let r="";const n=jt.streamReader(t);let i=await n();for(;i!==!0;)i!==null&&(r+=i.toString("utf8")+`
`),i=await n();const s=r.toString("utf8").split(`
`);if(i=s.shift(),!i.startsWith("unpack "))throw new Aa('unpack ok" or "unpack [error message]',i);e.ok=i==="unpack ok",e.ok||(e.error=i.slice(7)),e.refs={};for(const o of s){if(o.trim()==="")continue;const a=o.slice(0,2),l=o.slice(3);let c=l.indexOf(" ");c===-1&&(c=l.length);const u=l.slice(0,c),h=l.slice(c+1);e.refs[u]={ok:a==="ok",error:h}}return e}async function uwe({capabilities:t=[],triplets:e=[]}){const r=[];let n=`\0 ${t.join(" ")}`;for(const i of e)r.push(jt.encode(`${i.oldoid} ${i.oid} ${i.fullRef}${n}
`)),n="";return r.push(jt.flush()),r}async function hwe({fs:t,cache:e,http:r,onProgress:n,onMessage:i,onAuth:s,onAuthSuccess:o,onAuthFailure:a,onPrePush:l,gitdir:c,ref:u,remoteRef:h,remote:f,url:d,force:g=!1,delete:_=!1,corsProxy:m,headers:p={}}){const b=u||await Ra({fs:t,gitdir:c});if(typeof b>"u")throw new Zr("ref");const y=await zt.get({fs:t,gitdir:c});f=f||await y.get(`branch.${b}.pushRemote`)||await y.get("remote.pushDefault")||await y.get(`branch.${b}.remote`)||"origin";const v=d||await y.get(`remote.${f}.pushurl`)||await y.get(`remote.${f}.url`);if(typeof v>"u")throw new Zr("remote OR url");const w=h||await y.get(`branch.${b}.merge`);if(typeof v>"u")throw new Zr("remoteRef");m===void 0&&(m=await y.get("http.corsProxy"));const S=await Le.expand({fs:t,gitdir:c,ref:b}),x=_?"0000000000000000000000000000000000000000":await Le.resolve({fs:t,gitdir:c,ref:S}),E=b0.getRemoteHelperFor({url:v}),T=await E.discover({http:r,onAuth:s,onAuthSuccess:o,onAuthFailure:a,corsProxy:m,service:"git-receive-pack",url:v,headers:p,protocolVersion:1}),k=T.auth;let B;if(!w)B=S;else try{B=await Le.expandAgainstMap({ref:w,map:T.refs})}catch(j){if(j instanceof Tt)B=w.startsWith("refs/")?w:`refs/heads/${w}`;else throw j}const P=T.refs.get(B)||"0000000000000000000000000000000000000000";if(l&&!await l({remote:f,url:v,localRef:{ref:_?"(delete)":S,oid:x},remoteRef:{ref:B,oid:P}}))throw new Sc;const O=!T.capabilities.has("no-thin");let A=new Set;if(!_){const j=[...T.refs.values()];let H=new Set;if(P!=="0000000000000000000000000000000000000000"){const Z=await dS({fs:t,cache:e,gitdir:c,oids:[x,P]});for(const re of Z)j.push(re);O&&(H=await xb({fs:t,cache:e,gitdir:c,oids:Z}))}if(!j.includes(x)){const Z=await lwe({fs:t,cache:e,gitdir:c,start:[x],finish:j});A=await xb({fs:t,cache:e,gitdir:c,oids:Z})}if(O){try{const Z=await Le.resolve({fs:t,gitdir:c,ref:`refs/remotes/${f}/HEAD`,depth:2}),{oid:re}=await Le.resolveAgainstMap({ref:Z.replace(`refs/remotes/${f}/`,""),fullref:Z,map:T.refs}),ge=[re];for(const X of await xb({fs:t,cache:e,gitdir:c,oids:ge}))H.add(X)}catch{}for(const Z of H)A.delete(Z)}if(x===P&&(g=!0),!g){if(S.startsWith("refs/tags")&&P!=="0000000000000000000000000000000000000000")throw new ql("tag-exists");if(x!=="0000000000000000000000000000000000000000"&&P!=="0000000000000000000000000000000000000000"&&!await oF({fs:t,cache:e,gitdir:c,oid:x,ancestor:P,depth:-1}))throw new ql("not-fast-forward")}}const $=Z5([...T.capabilities],["report-status","side-band-64k",`agent=${y0.agent}`]),te=await uwe({capabilities:$,triplets:[{oldoid:P,oid:x,fullRef:B}]}),Q=_?[]:await cF({fs:t,cache:e,gitdir:c,oids:[...A]}),ee=await E.connect({http:r,onProgress:n,corsProxy:m,service:"git-receive-pack",url:v,auth:k,headers:p,body:[...te,...Q]}),{packfile:L,progress:M}=await eF.demux(ee.body);if(i){const j=J5(M);Lf(j,async H=>{await i(H)})}const U=await cwe(L);if(ee.headers&&(U.headers=ee.headers),f&&U.ok&&U.refs[B].ok&&!S.startsWith("refs/tags")){const j=`refs/remotes/${f}/${B.replace("refs/heads","")}`;_?await Le.deleteRef({fs:t,gitdir:c,ref:j}):await Le.writeRef({fs:t,gitdir:c,ref:j,value:x})}if(U.ok&&Object.values(U.refs).every(j=>j.ok))return U;{const j=Object.entries(U.refs).filter(([H,Z])=>!Z.ok).map(([H,Z])=>`
  - ${H}: ${Z.error}`).join("");throw new Tf(j,U)}}async function fwe({fs:t,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:s,onAuthFailure:o,onPrePush:a,dir:l,gitdir:c=Re.join(l,".git"),ref:u,remoteRef:h,remote:f="origin",url:d,force:g=!1,delete:_=!1,corsProxy:m,headers:p={},cache:b={}}){try{return fe("fs",t),fe("http",e),fe("gitdir",c),await hwe({fs:new $e(t),cache:b,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:s,onAuthFailure:o,onPrePush:a,gitdir:c,ref:u,remoteRef:h,remote:f,url:d,force:g,delete:_,corsProxy:m,headers:p})}catch(y){throw y.caller="git.push",y}}async function uF({fs:t,cache:e,gitdir:r,oid:n}){const{type:i,object:s}=await Nt({fs:t,cache:e,gitdir:r,oid:n});if(i==="tag")return n=Mr.from(s).parse().object,uF({fs:t,cache:e,gitdir:r,oid:n});if(i!=="blob")throw new Ur(n,i,"blob");return{oid:n,blob:new Uint8Array(s)}}async function hF({fs:t,cache:e,gitdir:r,oid:n,filepath:i=void 0}){return i!==void 0&&(n=await Of({fs:t,cache:e,gitdir:r,oid:n,filepath:i})),await uF({fs:t,cache:e,gitdir:r,oid:n})}async function dwe({fs:t,dir:e,gitdir:r=Re.join(e,".git"),oid:n,filepath:i,cache:s={}}){try{return fe("fs",t),fe("gitdir",r),fe("oid",n),await hF({fs:new $e(t),cache:s,gitdir:r,oid:n,filepath:i})}catch(o){throw o.caller="git.readBlob",o}}async function pwe({fs:t,dir:e,gitdir:r=Re.join(e,".git"),oid:n,cache:i={}}){try{return fe("fs",t),fe("gitdir",r),fe("oid",n),await tg({fs:new $e(t),cache:i,gitdir:r,oid:n})}catch(s){throw s.caller="git.readCommit",s}}async function mwe({fs:t,cache:e,gitdir:r,ref:n="refs/notes/commits",oid:i}){const s=await Le.resolve({gitdir:r,fs:t,ref:n}),{blob:o}=await hF({fs:t,cache:e,gitdir:r,oid:s,filepath:i});return o}async function gwe({fs:t,dir:e,gitdir:r=Re.join(e,".git"),ref:n="refs/notes/commits",oid:i,cache:s={}}){try{return fe("fs",t),fe("gitdir",r),fe("ref",n),fe("oid",i),await mwe({fs:new $e(t),cache:s,gitdir:r,ref:n,oid:i})}catch(o){throw o.caller="git.readNote",o}}async function _we({fs:t,dir:e,gitdir:r=Re.join(e,".git"),oid:n,format:i="parsed",filepath:s=void 0,encoding:o=void 0,cache:a={}}){try{fe("fs",t),fe("gitdir",r),fe("oid",n);const l=new $e(t);s!==void 0&&(n=await Of({fs:l,cache:a,gitdir:r,oid:n,filepath:s}));const u=await Nt({fs:l,cache:a,gitdir:r,oid:n,format:i==="parsed"?"content":i});if(u.oid=n,i==="parsed")switch(u.format="parsed",u.type){case"commit":u.object=Rt.from(u.object).parse();break;case"tree":u.object=tn.from(u.object).entries();break;case"blob":o?u.object=u.object.toString(o):(u.object=new Uint8Array(u.object),u.format="content");break;case"tag":u.object=Mr.from(u.object).parse();break;default:throw new Ur(u.oid,u.type,"blob|commit|tag|tree")}else(u.format==="deflated"||u.format==="wrapped")&&(u.type=u.format);return u}catch(l){throw l.caller="git.readObject",l}}async function bwe({fs:t,cache:e,gitdir:r,oid:n}){const{type:i,object:s}=await Nt({fs:t,cache:e,gitdir:r,oid:n,format:"content"});if(i!=="tag")throw new Ur(n,i,"tag");const o=Mr.from(s);return{oid:n,tag:o.parse(),payload:o.payload()}}async function ywe({fs:t,dir:e,gitdir:r=Re.join(e,".git"),oid:n,cache:i={}}){try{return fe("fs",t),fe("gitdir",r),fe("oid",n),await bwe({fs:new $e(t),cache:i,gitdir:r,oid:n})}catch(s){throw s.caller="git.readTag",s}}async function vwe({fs:t,dir:e,gitdir:r=Re.join(e,".git"),oid:n,filepath:i=void 0,cache:s={}}){try{return fe("fs",t),fe("gitdir",r),fe("oid",n),await xc({fs:new $e(t),cache:s,gitdir:r,oid:n,filepath:i})}catch(o){throw o.caller="git.readTree",o}}async function wwe({fs:t,dir:e,gitdir:r=Re.join(e,".git"),filepath:n,cache:i={}}){try{fe("fs",t),fe("gitdir",r),fe("filepath",n),await pr.acquire({fs:new $e(t),gitdir:r,cache:i},async function(s){s.delete({filepath:n})})}catch(s){throw s.caller="git.remove",s}}async function Ewe({fs:t,cache:e,onSign:r,gitdir:n,ref:i="refs/notes/commits",oid:s,author:o,committer:a,signingKey:l}){let c;try{c=await Le.resolve({gitdir:n,fs:t,ref:i})}catch(g){if(!(g instanceof Tt))throw g}let h=(await xc({fs:t,gitdir:n,oid:c||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;h=h.filter(g=>g.path!==s);const f=await uS({fs:t,gitdir:n,tree:h});return await _0({fs:t,cache:e,onSign:r,gitdir:n,ref:i,tree:f,parent:c&&[c],message:`Note removed by 'isomorphic-git removeNote'
`,author:o,committer:a,signingKey:l})}async function Swe({fs:t,onSign:e,dir:r,gitdir:n=Re.join(r,".git"),ref:i="refs/notes/commits",oid:s,author:o,committer:a,signingKey:l,cache:c={}}){try{fe("fs",t),fe("gitdir",n),fe("oid",s);const u=new $e(t),h=await _a({fs:u,gitdir:n,author:o});if(!h)throw new Br("author");const f=await Xl({fs:u,gitdir:n,author:h,committer:a});if(!f)throw new Br("committer");return await Ewe({fs:u,cache:c,onSign:e,gitdir:n,ref:i,oid:s,author:h,committer:f,signingKey:l})}catch(u){throw u.caller="git.removeNote",u}}async function xwe({fs:t,gitdir:e,oldref:r,ref:n,checkout:i=!1}){if(n!==Ai.clean(n))throw new ms(n,Ai.clean(n));if(r!==Ai.clean(r))throw new ms(r,Ai.clean(r));const s=`refs/heads/${r}`,o=`refs/heads/${n}`;if(await Le.exists({fs:t,gitdir:e,ref:o}))throw new ei("branch",n,!1);const l=await Le.resolve({fs:t,gitdir:e,ref:s,depth:1});await Le.writeRef({fs:t,gitdir:e,ref:o,value:l}),await Le.deleteRef({fs:t,gitdir:e,ref:s});const u=await Ra({fs:t,gitdir:e,fullname:!0})===s;(i||u)&&await Le.writeSymbolicRef({fs:t,gitdir:e,ref:"HEAD",value:o})}async function Twe({fs:t,dir:e,gitdir:r=Re.join(e,".git"),ref:n,oldref:i,checkout:s=!1}){try{return fe("fs",t),fe("gitdir",r),fe("ref",n),fe("oldref",i),await xwe({fs:new $e(t),gitdir:r,ref:n,oldref:i,checkout:s})}catch(o){throw o.caller="git.renameBranch",o}}async function fF({gitdir:t,type:e,object:r}){return ps(vc.wrap({type:e,object:r}))}async function Cwe({fs:t,dir:e,gitdir:r=Re.join(e,".git"),filepath:n,ref:i,cache:s={}}){try{fe("fs",t),fe("gitdir",r),fe("filepath",n);const o=new $e(t);let a,l;try{a=await Le.resolve({fs:o,gitdir:r,ref:i||"HEAD"})}catch(h){if(i)throw h}if(a)try{a=await Of({fs:o,cache:s,gitdir:r,oid:a,filepath:n})}catch{a=null}let c={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0};const u=e&&await o.read(Re.join(e,n));u&&(l=await fF({gitdir:r,type:"blob",object:u}),a===l&&(c=await o.lstat(Re.join(e,n)))),await pr.acquire({fs:o,gitdir:r,cache:s},async function(h){h.delete({filepath:n}),a&&h.insert({filepath:n,stats:c,oid:a})})}catch(o){throw o.caller="git.reset",o}}async function kwe({fs:t,dir:e,gitdir:r=Re.join(e,".git"),ref:n,depth:i}){try{return fe("fs",t),fe("gitdir",r),fe("ref",n),await Le.resolve({fs:new $e(t),gitdir:r,ref:n,depth:i})}catch(s){throw s.caller="git.resolveRef",s}}async function Awe({fs:t,dir:e,gitdir:r=Re.join(e,".git"),path:n,value:i,append:s=!1}){try{fe("fs",t),fe("gitdir",r),fe("path",n);const o=new $e(t),a=await zt.get({fs:o,gitdir:r});s?await a.append(n,i):await a.set(n,i),await zt.save({fs:o,gitdir:r,config:a})}catch(o){throw o.caller="git.setConfig",o}}async function Rwe({fs:t,dir:e,gitdir:r=Re.join(e,".git"),filepath:n,cache:i={}}){try{fe("fs",t),fe("gitdir",r),fe("filepath",n);const s=new $e(t);if(await g0.isIgnored({fs:s,gitdir:r,dir:e,filepath:n}))return"ignored";const a=await Pwe({fs:s,cache:i,gitdir:r}),l=await dF({fs:s,cache:i,gitdir:r,tree:a,path:n}),c=await pr.acquire({fs:s,gitdir:r,cache:i},async function(_){for(const m of _)if(m.path===n)return m;return null}),u=await s.lstat(Re.join(e,n)),h=l!==null,f=c!==null,d=u!==null,g=async()=>{if(f&&!Ym(c,u))return c.oid;{const _=await s.read(Re.join(e,n)),m=await fF({gitdir:r,type:"blob",object:_});return f&&c.oid===m&&u.size!==-1&&pr.acquire({fs:s,gitdir:r,cache:i},async function(p){p.insert({filepath:n,stats:u,oid:m})}),m}};if(!h&&!d&&!f)return"absent";if(!h&&!d&&f)return"*absent";if(!h&&d&&!f)return"*added";if(!h&&d&&f)return await g()===c.oid?"added":"*added";if(h&&!d&&!f)return"deleted";if(h&&!d&&f)return l===c.oid,"*deleted";if(h&&d&&!f)return await g()===l?"*undeleted":"*undeletemodified";if(h&&d&&f){const _=await g();return _===l?_===c.oid?"unmodified":"*unmodified":_===c.oid?"modified":"*modified"}}catch(s){throw s.caller="git.status",s}}async function dF({fs:t,cache:e,gitdir:r,tree:n,path:i}){typeof i=="string"&&(i=i.split("/"));const s=i.shift();for(const o of n)if(o.path===s){if(i.length===0)return o.oid;const{type:a,object:l}=await Nt({fs:t,cache:e,gitdir:r,oid:o.oid});if(a==="tree"){const c=tn.from(l);return dF({fs:t,cache:e,gitdir:r,tree:c,path:i})}if(a==="blob")throw new Ur(o.oid,a,"blob",i.join("/"))}return null}async function Pwe({fs:t,cache:e,gitdir:r}){let n;try{n=await Le.resolve({fs:t,gitdir:r,ref:"HEAD"})}catch(s){if(s instanceof Tt)return[]}const{tree:i}=await xc({fs:t,cache:e,gitdir:r,oid:n});return i}async function Iwe({fs:t,dir:e,gitdir:r=Re.join(e,".git"),ref:n="HEAD",filepaths:i=["."],filter:s,cache:o={},ignored:a=!1}){try{fe("fs",t),fe("gitdir",r),fe("ref",n);const l=new $e(t);return await Yl({fs:l,cache:o,dir:e,gitdir:r,trees:[Ws({ref:n}),m0(),p0()],map:async function(c,[u,h,f]){if(!u&&!f&&h&&!a&&await g0.isIgnored({fs:l,dir:e,filepath:c})||!i.some(S=>X5(c,S)))return null;if(s&&!s(c))return;const[d,g,_]=await Promise.all([u&&u.type(),h&&h.type(),f&&f.type()]),m=[d,g,_].includes("blob");if((d==="tree"||d==="special")&&!m)return;if(d==="commit")return null;if((g==="tree"||g==="special")&&!m)return;if(_==="commit")return null;if((_==="tree"||_==="special")&&!m)return;const p=d==="blob"?await u.oid():void 0,b=_==="blob"?await f.oid():void 0;let y;d!=="blob"&&g==="blob"&&_!=="blob"?y="42":g==="blob"&&(y=await h.oid());const v=[void 0,p,y,b],w=v.map(S=>v.indexOf(S));return w.shift(),[c,...w]}})}catch(l){throw l.caller="git.statusMatrix",l}}async function Dwe({fs:t,dir:e,gitdir:r=Re.join(e,".git"),ref:n,object:i,force:s=!1}){try{fe("fs",t),fe("gitdir",r),fe("ref",n);const o=new $e(t);if(n===void 0)throw new Zr("ref");n=n.startsWith("refs/tags/")?n:`refs/tags/${n}`;const a=await Le.resolve({fs:o,gitdir:r,ref:i||"HEAD"});if(!s&&await Le.exists({fs:o,gitdir:r,ref:n}))throw new ei("tag",n);await Le.writeRef({fs:o,gitdir:r,ref:n,value:a})}catch(o){throw o.caller="git.tag",o}}async function Owe({fs:t,dir:e,gitdir:r=Re.join(e,".git"),cache:n={},filepath:i,oid:s,mode:o,add:a,remove:l,force:c}){try{fe("fs",t),fe("gitdir",r),fe("filepath",i);const u=new $e(t);if(l)return await pr.acquire({fs:u,gitdir:r,cache:n},async function(f){let d;if(!c&&(d=await u.lstat(Re.join(e,i)),d)){if(d.isDirectory())throw new oo("directory");return}f.has({filepath:i})&&f.delete({filepath:i})});let h;if(!s){if(h=await u.lstat(Re.join(e,i)),!h)throw new Tt(`file at "${i}" on disk and "remove" not set`);if(h.isDirectory())throw new oo("directory")}return await pr.acquire({fs:u,gitdir:r,cache:n},async function(f){if(!a&&!f.has({filepath:i}))throw new Tt(`file at "${i}" in index and "add" not set`);let d={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:o,uid:0,gid:0,size:0};if(!s){d=h;const g=d.isSymbolicLink()?await u.readlink(Re.join(e,i)):await u.read(Re.join(e,i));s=await gn({fs:u,gitdir:r,type:"blob",format:"content",object:g})}return f.insert({filepath:i,oid:s,stats:d}),s})}catch(u){throw u.caller="git.updateIndex",u}}function Lwe(){try{return y0.version}catch(t){throw t.caller="git.version",t}}async function Nwe({fs:t,dir:e,gitdir:r=Re.join(e,".git"),trees:n,map:i,reduce:s,iterate:o,cache:a={}}){try{return fe("fs",t),fe("gitdir",r),fe("trees",n),await Yl({fs:new $e(t),cache:a,dir:e,gitdir:r,trees:n,map:i,reduce:s,iterate:o})}catch(l){throw l.caller="git.walk",l}}async function Mwe({fs:t,dir:e,gitdir:r=Re.join(e,".git"),blob:n}){try{return fe("fs",t),fe("gitdir",r),fe("blob",n),await gn({fs:new $e(t),gitdir:r,type:"blob",object:n,format:"content"})}catch(i){throw i.caller="git.writeBlob",i}}async function Bwe({fs:t,gitdir:e,commit:r}){const n=Rt.from(r).toObject();return await gn({fs:t,gitdir:e,type:"commit",object:n,format:"content"})}async function Fwe({fs:t,dir:e,gitdir:r=Re.join(e,".git"),commit:n}){try{return fe("fs",t),fe("gitdir",r),fe("commit",n),await Bwe({fs:new $e(t),gitdir:r,commit:n})}catch(i){throw i.caller="git.writeCommit",i}}async function Hwe({fs:t,dir:e,gitdir:r=Re.join(e,".git"),type:n,object:i,format:s="parsed",oid:o,encoding:a=void 0}){try{const l=new $e(t);if(s==="parsed"){switch(n){case"commit":i=Rt.from(i).toObject();break;case"tree":i=tn.from(i).toObject();break;case"blob":i=Ne.from(i,a);break;case"tag":i=Mr.from(i).toObject();break;default:throw new Ur(o||"",n,"blob|commit|tag|tree")}s="content"}return o=await gn({fs:l,gitdir:r,type:n,object:i,oid:o,format:s}),o}catch(l){throw l.caller="git.writeObject",l}}async function Uwe({fs:t,dir:e,gitdir:r=Re.join(e,".git"),ref:n,value:i,force:s=!1,symbolic:o=!1}){try{fe("fs",t),fe("gitdir",r),fe("ref",n),fe("value",i);const a=new $e(t);if(n!==Ai.clean(n))throw new ms(n,Ai.clean(n));if(!s&&await Le.exists({fs:a,gitdir:r,ref:n}))throw new ei("ref",n);o?await Le.writeSymbolicRef({fs:a,gitdir:r,ref:n,value:i}):(i=await Le.resolve({fs:a,gitdir:r,ref:i}),await Le.writeRef({fs:a,gitdir:r,ref:n,value:i}))}catch(a){throw a.caller="git.writeRef",a}}async function jwe({fs:t,gitdir:e,tag:r}){const n=Mr.from(r).toObject();return await gn({fs:t,gitdir:e,type:"tag",object:n,format:"content"})}async function $we({fs:t,dir:e,gitdir:r=Re.join(e,".git"),tag:n}){try{return fe("fs",t),fe("gitdir",r),fe("tag",n),await jwe({fs:new $e(t),gitdir:r,tag:n})}catch(i){throw i.caller="git.writeTag",i}}async function zwe({fs:t,dir:e,gitdir:r=Re.join(e,".git"),tree:n}){try{return fe("fs",t),fe("gitdir",r),fe("tree",n),await uS({fs:new $e(t),gitdir:r,tree:n})}catch(i){throw i.caller="git.writeTree",i}}var Vwe={Errors:Sye,STAGE:p0,TREE:Ws,WORKDIR:m0,add:$ye,abortMerge:Bye,addNote:Vye,addRemote:Wye,annotatedTag:qye,branch:Yye,checkout:Qye,clone:lve,commit:cve,getConfig:Pve,getConfigAll:Dve,setConfig:Awe,currentBranch:uve,deleteBranch:fve,deleteRef:dve,deleteRemote:mve,deleteTag:_ve,expandOid:wve,expandRef:Eve,fastForward:Cve,fetch:kve,findMergeBase:Ave,findRoot:Rve,getRemoteInfo:Ove,getRemoteInfo2:Lve,hashBlob:Mve,indexPack:Fve,init:Hve,isDescendent:Uve,isIgnored:jve,listBranches:$ve,listFiles:Vve,listNotes:Gve,listRemotes:Kve,listServerRefs:Qve,listTags:Zve,log:rwe,merge:nwe,packObjects:owe,pull:awe,push:fwe,readBlob:dwe,readCommit:pwe,readNote:gwe,readObject:_we,readTag:ywe,readTree:vwe,remove:wwe,removeNote:Swe,renameBranch:Twe,resetIndex:Cwe,updateIndex:Owe,resolveRef:kwe,status:Rwe,statusMatrix:Iwe,tag:Dwe,version:Lwe,walk:Nwe,writeBlob:Mwe,writeCommit:Fwe,writeObject:Hwe,writeRef:Uwe,writeTag:$we,writeTree:zwe};function Wwe(t){let e=[t];return{next(){return Promise.resolve({done:e.length===0,value:e.pop()})},return(){return e=[],{}},[Symbol.asyncIterator](){return this}}}function Gwe(t){return t[Symbol.asyncIterator]?t[Symbol.asyncIterator]():t[Symbol.iterator]?t[Symbol.iterator]():t.next?t:Wwe(t)}async function qwe(t,e){const r=Gwe(t);for(;;){const{value:n,done:i}=await r.next();if(n&&await e(n),i)break}r.return&&r.return()}async function Kwe(t){let e=0;const r=[];await qwe(t,s=>{r.push(s),e+=s.byteLength});const n=new Uint8Array(e);let i=0;for(const s of r)n.set(s,i),i+=s.byteLength;return n}function Ywe(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{next(){return e.read()},return(){return e.releaseLock(),{}},[Symbol.asyncIterator](){return this}}}async function Xwe({onProgress:t,url:e,method:r="GET",headers:n={},body:i}){i&&(i=await Kwe(i));const s=await fetch(e,{method:r,headers:n,body:i}),o=s.body&&s.body.getReader?Ywe(s.body):[new Uint8Array(await s.arrayBuffer())];n={};for(const[a,l]of s.headers.entries())n[a]=l;return{url:s.url,method:s.method,statusCode:s.status,statusMessage:s.statusText,body:o,headers:n}}var Qwe={request:Xwe};const Zwe=t=>{const e=t.split("/")[2],r=ct.get(`git:${e}`);if(!r)return null;try{const{username:n,password:i}=JSON.parse(r||"{}");return{username:n,password:i}}catch(n){return console.log(`Failed to parse Git Cookie ${n}`),null}},Jwe=(t,e)=>{const r=t.split("/")[2];ct.set(`git:${r}`,JSON.stringify(e))};function eEe(){const[t,e]=D.useState(!1),[r,n]=D.useState(),[i,s]=D.useState(),o=D.useRef({});D.useEffect(()=>{ko.then(l=>{o.current={},n(l),s(pF(l,o)),e(!0)})},[]);const a=D.useCallback(async l=>{if(!r||!i||!t)throw"Webcontainer not initialized";o.current={},await Vwe.clone({fs:i,http:Qwe,dir:r.workdir,url:l,depth:1,singleBranch:!0,corsProxy:"https://cors.isomorphic-git.org",onAuth:u=>{let h=Zwe(u);return h||(confirm("This repo is password protected. Ready to enter a username & password?")?(h={username:prompt("Enter username"),password:prompt("Enter password")},h):{cancel:!0})},onAuthFailure:(u,h)=>{Be.error(`Error Authenticating with ${u.split("/")[2]}`)},onAuthSuccess:(u,h)=>{Jwe(u,h)}});const c={};for(const[u,h]of Object.entries(o.current))c[u]=h;return{workdir:r.workdir,data:c}},[r]);return{ready:t,gitClone:a}}const pF=(t,e)=>({promises:{readFile:async(r,n)=>{const i=n.encoding,s=ci.relative(t.workdir,r);return console.log("readFile",s,i),await t.fs.readFile(s,i)},writeFile:async(r,n,i)=>{const s=i.encoding,o=ci.relative(t.workdir,r);return console.log("writeFile",{relativePath:o,data:n,encoding:s}),e.current&&(e.current[o]={data:n,encoding:s}),await t.fs.writeFile(o,n,{...i,encoding:s})},mkdir:async(r,n)=>{const i=ci.relative(t.workdir,r);return console.log("mkdir",i,n),await t.fs.mkdir(i,{...n,recursive:!0})},readdir:async(r,n)=>{const i=ci.relative(t.workdir,r);return console.log("readdir",i,n),await t.fs.readdir(i,n)},rm:async(r,n)=>{const i=ci.relative(t.workdir,r);return console.log("rm",i,n),await t.fs.rm(i,{...n||{}})},rmdir:async(r,n)=>{const i=ci.relative(t.workdir,r);return console.log("rmdir",i,n),await t.fs.rm(i,{recursive:!0,...n})},unlink:async r=>{const n=ci.relative(t.workdir,r);return await t.fs.rm(n,{recursive:!1})},stat:async r=>{try{const n=ci.relative(t.workdir,r),i=await t.fs.readdir(ci.dirname(n),{withFileTypes:!0}),s=ci.basename(n),o=i.find(a=>a.name==s);if(!o)throw new Error(`ENOENT: no such file or directory, stat '${r}'`);return{isFile:()=>o.isFile(),isDirectory:()=>o.isDirectory(),isSymbolicLink:()=>!1,size:1,mode:438,mtimeMs:Date.now(),uid:1e3,gid:1e3}}catch(n){console.log(n?.message);const i=new Error(`ENOENT: no such file or directory, stat '${r}'`);throw i.code="ENOENT",i.errno=-2,i.syscall="stat",i.path=r,i}},lstat:async r=>await pF(t,e).promises.stat(r),readlink:async r=>{throw new Error(`EINVAL: invalid argument, readlink '${r}'`)},symlink:async(r,n)=>{throw new Error(`EPERM: operation not permitted, symlink '${r}' -> '${n}'`)},chmod:async(r,n)=>await Promise.resolve()}}),ci={dirname:t=>!t||!t.includes("/")?".":(t=t.replace(/\/+$/,""),t.split("/").slice(0,-1).join("/")||"/"),basename:(t,e)=>{t=t.replace(/\/+$/,"");const r=t.split("/").pop()||"";return e&&r.endsWith(e)?r.slice(0,-e.length):r},relative:(t,e)=>{if(!t||!e)return".";const r=u=>u.replace(/\/+$/,"").split("/").filter(Boolean),n=r(t),i=r(e);let s=0;const o=Math.min(n.length,i.length);for(let u=0;u<o&&n[u]===i[u];u++)s++;const a=n.length-s,l=i.slice(s),c=[...Array(a).fill(".."),...l];return c.length===0?".":c.join("/")}},tEe=["node_modules/**",".git/**",".github/**",".vscode/**","**/*.jpg","**/*.jpeg","**/*.png","dist/**","build/**",".next/**","coverage/**",".cache/**",".vscode/**",".idea/**","**/*.log","**/.DS_Store","**/npm-debug.log*","**/yarn-debug.log*","**/yarn-error.log*","**/*lock.json","**/*lock.yaml"],rEe=B4().add(tEe);function nEe({importChat:t}){const{ready:e,gitClone:r}=eEe(),n=async i=>{if(!e)return;const s=prompt("Enter the Git url");if(s){const{workdir:o,data:a}=await r(s);if(t){const l=Object.keys(a).filter(_=>!rEe.ignores(_));console.log(l);const c=new TextDecoder("utf-8"),u=l.map(_=>{const{data:m,encoding:p}=a[_];return{path:_,content:p==="utf8"?m:m instanceof Uint8Array?c.decode(m):""}}).filter(_=>_.content),h=await F4(u),f=H4(h),g=[{role:"assistant",content:`Cloning the repo ${s} into ${o}
<boltArtifact id="imported-files" title="Git Cloned Files" type="bundled">           
${u.map(_=>`<boltAction type="file" filePath="${_.path}">
${_.content}
</boltAction>`).join(`
`)}
</boltArtifact>`,id:Vm(),createdAt:new Date}];f&&g.push(f),await t(`Git Project:${s.split("/").slice(-1)[0]}`,g)}}};return R.jsx(ra,{tooltip:"Clone A Git Repo",children:R.jsxs("button",{onClick:i=>{n()},title:"Clone A Git Repo",className:"px-4 py-2 rounded-lg border border-bolt-elements-borderColor bg-bolt-elements-prompt-background text-bolt-elements-textPrimary hover:bg-bolt-elements-background-depth-3 transition-all flex items-center gap-2",children:[R.jsx("span",{className:"i-ph:git-branch"}),"Clone A Git Repo"]})})}const iEe=({files:t,imageDataList:e,onRemove:r})=>!t||t.length===0?null:R.jsx("div",{className:"flex flex-row overflow-x-auto -mt-2",children:t.map((n,i)=>R.jsx("div",{className:"mr-2 relative",children:e[i]&&R.jsxs("div",{className:"relative pt-4 pr-4",children:[R.jsx("img",{src:e[i],alt:n.name,className:"max-h-20"}),R.jsx("button",{onClick:()=>r(i),className:"absolute top-1 right-1 z-10 bg-black rounded-full w-5 h-5 shadow-md hover:bg-gray-900 transition-colors flex items-center justify-center",children:R.jsx("div",{className:"i-ph:x w-3 h-3 text-gray-200"})})]})},n.name+n.size))}),sEe=({model:t,setModel:e,provider:r,setProvider:n,modelList:i,providerList:s})=>{const[o,a]=D.useState(()=>{const l=ct.get("providers");if(l)try{const c=JSON.parse(l);return s.filter(u=>c[u.name])}catch(c){return console.error("Failed to parse providers from cookies:",c),s}return s});return D.useEffect(()=>{const l=()=>{const u=ct.get("providers");if(u)try{const h=JSON.parse(u),f=s.filter(d=>h[d.name]);if(a(f),r&&!h[r.name]&&f.length>0){const d=f[0];n?.(d);const g=i.find(_=>_.provider===d.name);g&&e?.(g.name)}}catch(h){console.error("Failed to parse providers from cookies:",h)}};l();const c=setInterval(l,1e3);return()=>clearInterval(c)},[s,r,n,i,e]),o.length===0?R.jsx("div",{className:"mb-2 p-4 rounded-lg border border-bolt-elements-borderColor bg-bolt-elements-prompt-background text-bolt-elements-textPrimary",children:R.jsx("p",{className:"text-center",children:"No providers are currently enabled. Please enable at least one provider in the settings to start using the chat."})}):R.jsxs("div",{className:"mb-2 flex gap-2 flex-col sm:flex-row",children:[R.jsx("select",{value:r?.name??"",onChange:l=>{const c=o.find(h=>h.name===l.target.value);c&&n&&n(c);const u=[...i].find(h=>h.provider===l.target.value);u&&e&&e(u.name)},className:"flex-1 p-2 rounded-lg border border-bolt-elements-borderColor bg-bolt-elements-prompt-background text-bolt-elements-textPrimary focus:outline-none focus:ring-2 focus:ring-bolt-elements-focus transition-all",children:o.map(l=>R.jsx("option",{value:l.name,children:l.name},l.name))}),R.jsx("select",{value:t,onChange:l=>e?.(l.target.value),className:"flex-1 p-2 rounded-lg border border-bolt-elements-borderColor bg-bolt-elements-prompt-background text-bolt-elements-textPrimary focus:outline-none focus:ring-2 focus:ring-bolt-elements-focus transition-all lg:max-w-[70%]",children:[...i].filter(l=>l.provider==r?.name&&l.name).map((l,c)=>R.jsx("option",{value:l.name,children:l.label},c))},r?.name)]})},oEe=({isListening:t,onStart:e,onStop:r,disabled:n})=>R.jsx(qt,{title:t?"Stop listening":"Start speech recognition",disabled:n,className:je("transition-all",{"text-bolt-elements-item-contentAccent":t}),onClick:t?r:e,children:t?R.jsx("div",{className:"i-ph:microphone-slash text-xl"}):R.jsx("div",{className:"i-ph:microphone text-xl"})}),aEe=76,lEe=Qe.forwardRef(({textareaRef:t,messageRef:e,scrollRef:r,showChat:n=!0,chatStarted:i=!1,isStreaming:s=!1,model:o,setModel:a,provider:l,setProvider:c,providerList:u,input:h="",enhancingPrompt:f,handleInputChange:d,promptEnhanced:g,enhancePrompt:_,sendMessage:m,handleStop:p,importChat:b,exportChat:y,uploadedFiles:v=[],setUploadedFiles:w,imageDataList:S=[],setImageDataList:x,messages:E},T)=>{const k=i?400:200,[B,P]=D.useState(()=>{const ie=ct.get("apiKeys");if(ie)try{return JSON.parse(ie)}catch(se){return console.error("Failed to parse API keys from cookies:",se),{}}return{}}),[O,A]=D.useState(i1),[$,te]=D.useState(!1),[Q,ee]=D.useState(!1),[L,M]=D.useState(null),[U,j]=D.useState("");D.useEffect(()=>{console.log(U)},[U]),D.useEffect(()=>{try{const se=ct.get("apiKeys");if(se){const me=JSON.parse(se);typeof me=="object"&&me!==null&&P(me)}}catch(se){console.error("Error loading API keys from cookies:",se),ct.remove("apiKeys")}let ie;try{const se=ct.get("providers");if(se){const me=JSON.parse(se);typeof me=="object"&&me!==null&&(ie=me)}}catch(se){console.error("Error loading Provider Settings from cookies:",se),ct.remove("providers")}if(Wz(ie).then(se=>{A(se)}),typeof window<"u"&&("SpeechRecognition"in window||"webkitSpeechRecognition"in window)){const se=window.SpeechRecognition||window.webkitSpeechRecognition,me=new se;me.continuous=!0,me.interimResults=!0,me.onresult=de=>{const ve=Array.from(de.results).map(F=>F[0]).map(F=>F.transcript).join("");j(ve),d&&d({target:{value:ve}})},me.onerror=de=>{console.error("Speech recognition error:",de.error),ee(!1)},M(me)}},[]);const H=()=>{L&&(L.start(),ee(!0))},Z=()=>{L&&(L.stop(),ee(!1))},re=(ie,se)=>{m&&(m(ie,se),L&&(L.abort(),j(""),ee(!1),d&&d({target:{value:""}})))},ge=()=>{const ie=document.createElement("input");ie.type="file",ie.accept="image/*",ie.onchange=async se=>{const me=se.target.files?.[0];if(me){const de=new FileReader;de.onload=ve=>{const F=ve.target?.result;w?.([...v,me]),x?.([...S,F])},de.readAsDataURL(me)}},ie.click()},X=async ie=>{const se=ie.clipboardData?.items;if(se){for(const me of se)if(me.type.startsWith("image/")){ie.preventDefault();const de=me.getAsFile();if(de){const ve=new FileReader;ve.onload=F=>{const he=F.target?.result;w?.([...v,de]),x?.([...S,he])},ve.readAsDataURL(de)}break}}},V=R.jsxs("div",{ref:T,className:je(Vc.BaseChat,"relative flex h-full w-full overflow-hidden"),"data-chat-visible":n,children:[R.jsx(To,{children:()=>R.jsx($K,{})}),R.jsxs("div",{ref:r,className:"flex flex-col lg:flex-row overflow-y-auto w-full h-full",children:[R.jsxs("div",{className:je(Vc.Chat,"flex flex-col flex-grow lg:min-w-[var(--chat-min-width)] h-full"),children:[!i&&R.jsxs("div",{id:"intro",className:"mt-[26vh] max-w-chat mx-auto text-center px-4 lg:px-0",children:[R.jsx("h1",{className:"text-3xl lg:text-6xl font-bold text-bolt-elements-textPrimary mb-4 animate-fade-in",children:"Where ideas begin"}),R.jsx("p",{className:"text-md lg:text-xl mb-8 text-bolt-elements-textSecondary animate-fade-in animation-delay-200",children:"Bring ideas to life in seconds or get help on existing projects."})]}),R.jsxs("div",{className:je("pt-6 px-2 sm:px-6",{"h-full flex flex-col":i}),children:[R.jsx(To,{children:()=>i?R.jsx(g0e,{ref:e,className:"flex flex-col w-full flex-1 max-w-chat pb-6 mx-auto z-1",messages:E,isStreaming:s}):null}),R.jsxs("div",{className:je("bg-bolt-elements-background-depth-2 p-3 rounded-lg border border-bolt-elements-borderColor relative w-full max-w-chat mx-auto z-prompt mb-6",{"sticky bottom-2":i}),children:[R.jsxs("svg",{className:je(Vc.PromptEffectContainer),children:[R.jsxs("defs",{children:[R.jsxs("linearGradient",{id:"line-gradient",x1:"20%",y1:"0%",x2:"-14%",y2:"10%",gradientUnits:"userSpaceOnUse",gradientTransform:"rotate(-45)",children:[R.jsx("stop",{offset:"0%",stopColor:"#b44aff",stopOpacity:"0%"}),R.jsx("stop",{offset:"40%",stopColor:"#b44aff",stopOpacity:"80%"}),R.jsx("stop",{offset:"50%",stopColor:"#b44aff",stopOpacity:"80%"}),R.jsx("stop",{offset:"100%",stopColor:"#b44aff",stopOpacity:"0%"})]}),R.jsxs("linearGradient",{id:"shine-gradient",children:[R.jsx("stop",{offset:"0%",stopColor:"white",stopOpacity:"0%"}),R.jsx("stop",{offset:"40%",stopColor:"#ffffff",stopOpacity:"80%"}),R.jsx("stop",{offset:"50%",stopColor:"#ffffff",stopOpacity:"80%"}),R.jsx("stop",{offset:"100%",stopColor:"white",stopOpacity:"0%"})]})]}),R.jsx("rect",{className:je(Vc.PromptEffectLine),pathLength:"100",strokeLinecap:"round"}),R.jsx("rect",{className:je(Vc.PromptShine),x:"48",y:"24",width:"70",height:"1"})]}),R.jsx("div",{children:R.jsxs("div",{className:$?"hidden":"",children:[R.jsx(sEe,{model:o,setModel:a,modelList:O,provider:l,setProvider:c,providerList:u||ec,apiKeys:B},l?.name+":"+O.length),(u||[]).length>0&&l&&R.jsx(y0e,{provider:l,apiKey:B[l.name]||"",setApiKey:ie=>{const se={...B,[l.name]:ie};P(se),ct.set("apiKeys",JSON.stringify(se))}})]})}),R.jsx(iEe,{files:v,imageDataList:S,onRemove:ie=>{w?.(v.filter((se,me)=>me!==ie)),x?.(S.filter((se,me)=>me!==ie))}}),R.jsxs("div",{className:je("relative shadow-xs border border-bolt-elements-borderColor backdrop-blur rounded-lg"),children:[R.jsx("textarea",{ref:t,className:je("w-full pl-4 pt-4 pr-16 focus:outline-none resize-none text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary bg-transparent text-sm","transition-all duration-200","hover:border-bolt-elements-focus"),onDragEnter:ie=>{ie.preventDefault(),ie.currentTarget.style.border="2px solid #1488fc"},onDragOver:ie=>{ie.preventDefault(),ie.currentTarget.style.border="2px solid #1488fc"},onDragLeave:ie=>{ie.preventDefault(),ie.currentTarget.style.border="1px solid var(--bolt-elements-borderColor)"},onDrop:ie=>{ie.preventDefault(),ie.currentTarget.style.border="1px solid var(--bolt-elements-borderColor)",Array.from(ie.dataTransfer.files).forEach(me=>{if(me.type.startsWith("image/")){const de=new FileReader;de.onload=ve=>{const F=ve.target?.result;w?.([...v,me]),x?.([...S,F])},de.readAsDataURL(me)}})},onKeyDown:ie=>{if(ie.key==="Enter"){if(ie.shiftKey)return;if(ie.preventDefault(),s){p?.();return}re?.(ie)}},value:h,onChange:ie=>{d?.(ie)},onPaste:X,style:{minHeight:aEe,maxHeight:k},placeholder:"How can Bolt help you today?",translate:"no"}),R.jsx(To,{children:()=>R.jsx(b0e,{show:h.length>0||s||v.length>0,isStreaming:s,disabled:!u||u.length===0,onClick:ie=>{if(s){p?.();return}(h.length>0||v.length>0)&&re?.(ie)}})}),R.jsxs("div",{className:"flex justify-between items-center text-sm p-4 pt-2",children:[R.jsxs("div",{className:"flex gap-1 items-center",children:[R.jsx(qt,{title:"Upload file",className:"transition-all",onClick:()=>ge(),children:R.jsx("div",{className:"i-ph:paperclip text-xl"})}),R.jsx(qt,{title:"Enhance prompt",disabled:h.length===0||f,className:je("transition-all",f?"opacity-100":"",g?"text-bolt-elements-item-contentAccent":"",g?"pr-1.5":"",g?"enabled:hover:bg-bolt-elements-item-backgroundAccent":""),onClick:()=>_?.(),children:f?R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"i-svg-spinners:90-ring-with-bg text-bolt-elements-loader-progress text-xl animate-spin"}),R.jsx("div",{className:"ml-1.5",children:"Enhancing prompt..."})]}):R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"i-bolt:stars text-xl"}),g&&R.jsx("div",{className:"ml-1.5",children:"Prompt enhanced"})]})}),R.jsx(oEe,{isListening:Q,onStart:H,onStop:Z,disabled:s}),i&&R.jsx(To,{children:()=>R.jsx(T0e,{exportChat:y})}),R.jsxs(qt,{title:"Model Settings",className:je("transition-all flex items-center gap-1",{"bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent":$,"bg-bolt-elements-item-backgroundDefault text-bolt-elements-item-contentDefault":!$}),onClick:()=>te(!$),disabled:!u||u.length===0,children:[R.jsx("div",{className:`i-ph:caret-${$?"right":"down"} text-lg`}),$?R.jsx("span",{className:"text-xs",children:o}):R.jsx("span",{})]})]}),h.length>3?R.jsxs("div",{className:"text-xs text-bolt-elements-textTertiary",children:["Use ",R.jsx("kbd",{className:"kdb px-1.5 py-0.5 rounded bg-bolt-elements-background-depth-2",children:"Shift"})," +"," ",R.jsx("kbd",{className:"kdb px-1.5 py-0.5 rounded bg-bolt-elements-background-depth-2",children:"Return"})," a new line"]}):null]})]})]})]}),!i&&R.jsxs("div",{className:"flex justify-center gap-2",children:[Z0e(b),R.jsx(nEe,{importChat:b})]}),!i&&e_e((ie,se)=>{if(s){p?.();return}re?.(ie,se)})]}),R.jsx(To,{children:()=>R.jsx(sie,{chatStarted:i,isStreaming:s})})]})]});return R.jsx(lq,{delayDuration:200,children:V})});var mF="vercel.ai.error",cEe=Symbol.for(mF),gF,uEe=class _F extends Error{constructor({name:e,message:r,cause:n}){super(r),this[gF]=!0,this.name=e,this.cause=n}static isInstance(e){return _F.hasMarker(e,mF)}static hasMarker(e,r){const n=Symbol.for(r);return e!=null&&typeof e=="object"&&n in e&&typeof e[n]=="boolean"&&e[n]===!0}toJSON(){return{name:this.name,message:this.message}}};gF=cEe;var LR=uEe,bF="AI_InvalidArgumentError",yF=`vercel.ai.error.${bF}`,hEe=Symbol.for(yF),vF,fEe=class extends LR{constructor({message:t,cause:e,argument:r}){super({name:bF,message:t,cause:e}),this[vF]=!0,this.argument=r}static isInstance(t){return LR.hasMarker(t,yF)}};vF=hEe;let dEe=(t,e=21)=>(r=e)=>{let n="",i=r|0;for(;i--;)n+=t[Math.random()*t.length|0];return n};var Tc={exports:{}};const pEe=typeof Ne<"u",NR=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,MR=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function wF(t,e,r){r==null&&e!==null&&typeof e=="object"&&(r=e,e=void 0),pEe&&Ne.isBuffer(t)&&(t=t.toString()),t&&t.charCodeAt(0)===65279&&(t=t.slice(1));const n=JSON.parse(t,e);if(n===null||typeof n!="object")return n;const i=r&&r.protoAction||"error",s=r&&r.constructorAction||"error";if(i==="ignore"&&s==="ignore")return n;if(i!=="ignore"&&s!=="ignore"){if(NR.test(t)===!1&&MR.test(t)===!1)return n}else if(i!=="ignore"&&s==="ignore"){if(NR.test(t)===!1)return n}else if(MR.test(t)===!1)return n;return EF(n,{protoAction:i,constructorAction:s,safe:r&&r.safe})}function EF(t,{protoAction:e="error",constructorAction:r="error",safe:n}={}){let i=[t];for(;i.length;){const s=i;i=[];for(const o of s){if(e!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"__proto__")){if(n===!0)return null;if(e==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.__proto__}if(r!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"constructor")&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype")){if(n===!0)return null;if(r==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.constructor}for(const a in o){const l=o[a];l&&typeof l=="object"&&i.push(l)}}}return t}function pS(t,e,r){const n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return wF(t,e,r)}finally{Error.stackTraceLimit=n}}function mEe(t,e){const r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return wF(t,e,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=r}}Tc.exports=pS;Tc.exports.default=pS;Tc.exports.parse=pS;Tc.exports.safeParse=mEe;Tc.exports.scan=EF;var gEe=Tc.exports;const BR=mn(gEe);var _Ee=({prefix:t,size:e=7,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{const i=dEe(r,e);if(t==null)return i;if(r.includes(n))throw new fEe({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return s=>`${t}${n}${i(s)}`},SF=_Ee();function bEe(t){const e=["ROOT"];let r=-1,n=null;function i(l,c,u){switch(l){case'"':{r=c,e.pop(),e.push(u),e.push("INSIDE_STRING");break}case"f":case"t":case"n":{r=c,n=c,e.pop(),e.push(u),e.push("INSIDE_LITERAL");break}case"-":{e.pop(),e.push(u),e.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=c,e.pop(),e.push(u),e.push("INSIDE_NUMBER");break}case"{":{r=c,e.pop(),e.push(u),e.push("INSIDE_OBJECT_START");break}case"[":{r=c,e.pop(),e.push(u),e.push("INSIDE_ARRAY_START");break}}}function s(l,c){switch(l){case",":{e.pop(),e.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{r=c,e.pop();break}}}function o(l,c){switch(l){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=c,e.pop();break}}}for(let l=0;l<t.length;l++){const c=t[l];switch(e[e.length-1]){case"ROOT":i(c,l,"FINISH");break;case"INSIDE_OBJECT_START":{switch(c){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}case"}":{r=l,e.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(c){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(c){case'"':{e.pop(),e.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(c){case":":{e.pop(),e.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{i(c,l,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{s(c,l);break}case"INSIDE_STRING":{switch(c){case'"':{e.pop(),r=l;break}case"\\":{e.push("INSIDE_STRING_ESCAPE");break}default:r=l}break}case"INSIDE_ARRAY_START":{switch(c){case"]":{r=l,e.pop();break}default:{r=l,i(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(c){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=l,e.pop();break}default:{r=l;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{i(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{e.pop(),r=l;break}case"INSIDE_NUMBER":{switch(c){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=l;break}case"e":case"E":case"-":case".":break;case",":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,l),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&s(c,l);break}case"}":{e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&s(c,l);break}case"]":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,l);break}default:{e.pop();break}}break}case"INSIDE_LITERAL":{const h=t.substring(n,l+1);!"false".startsWith(h)&&!"true".startsWith(h)&&!"null".startsWith(h)?(e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?s(c,l):e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,l)):r=l;break}}}let a=t.slice(0,r+1);for(let l=e.length-1;l>=0;l--)switch(e[l]){case"INSIDE_STRING":{a+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{a+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{a+="]";break}case"INSIDE_LITERAL":{const u=t.substring(n,t.length);"true".startsWith(u)?a+="true".slice(u.length):"false".startsWith(u)?a+="false".slice(u.length):"null".startsWith(u)&&(a+="null".slice(u.length))}}return a}function yEe(t){if(t===void 0)return{value:void 0,state:"undefined-input"};try{return{value:BR.parse(t),state:"successful-parse"}}catch{try{return{value:BR.parse(bEe(t)),state:"repaired-parse"}}catch{}}return{value:void 0,state:"failed-parse"}}var Eh={code:"0",name:"text",parse:t=>{if(typeof t!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:t}}},Sh={code:"1",name:"function_call",parse:t=>{if(t==null||typeof t!="object"||!("function_call"in t)||typeof t.function_call!="object"||t.function_call==null||!("name"in t.function_call)||!("arguments"in t.function_call)||typeof t.function_call.name!="string"||typeof t.function_call.arguments!="string")throw new Error('"function_call" parts expect an object with a "function_call" property.');return{type:"function_call",value:t}}},xh={code:"2",name:"data",parse:t=>{if(!Array.isArray(t))throw new Error('"data" parts expect an array value.');return{type:"data",value:t}}},Th={code:"3",name:"error",parse:t=>{if(typeof t!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:t}}},Ch={code:"4",name:"assistant_message",parse:t=>{if(t==null||typeof t!="object"||!("id"in t)||!("role"in t)||!("content"in t)||typeof t.id!="string"||typeof t.role!="string"||t.role!=="assistant"||!Array.isArray(t.content)||!t.content.every(e=>e!=null&&typeof e=="object"&&"type"in e&&e.type==="text"&&"text"in e&&e.text!=null&&typeof e.text=="object"&&"value"in e.text&&typeof e.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:t}}},kh={code:"5",name:"assistant_control_data",parse:t=>{if(t==null||typeof t!="object"||!("threadId"in t)||!("messageId"in t)||typeof t.threadId!="string"||typeof t.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:t.threadId,messageId:t.messageId}}}},Ah={code:"6",name:"data_message",parse:t=>{if(t==null||typeof t!="object"||!("role"in t)||!("data"in t)||typeof t.role!="string"||t.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:t}}},Rh={code:"7",name:"tool_calls",parse:t=>{if(t==null||typeof t!="object"||!("tool_calls"in t)||typeof t.tool_calls!="object"||t.tool_calls==null||!Array.isArray(t.tool_calls)||t.tool_calls.some(e=>e==null||typeof e!="object"||!("id"in e)||typeof e.id!="string"||!("type"in e)||typeof e.type!="string"||!("function"in e)||e.function==null||typeof e.function!="object"||!("arguments"in e.function)||typeof e.function.name!="string"||typeof e.function.arguments!="string"))throw new Error('"tool_calls" parts expect an object with a ToolCallPayload.');return{type:"tool_calls",value:t}}},Ph={code:"8",name:"message_annotations",parse:t=>{if(!Array.isArray(t))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:t}}},Ih={code:"9",name:"tool_call",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string"||!("args"in t)||typeof t.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:t}}},Dh={code:"a",name:"tool_result",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("result"in t))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:t}}},Oh={code:"b",name:"tool_call_streaming_start",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:t}}},Lh={code:"c",name:"tool_call_delta",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("argsTextDelta"in t)||typeof t.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:t}}},Nh={code:"d",name:"finish_message",parse:t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const e={finishReason:t.finishReason};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),{type:"finish_message",value:e}}},Mh={code:"e",name:"finish_step",parse:t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const e={finishReason:t.finishReason,isContinued:!1};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),"isContinued"in t&&typeof t.isContinued=="boolean"&&(e.isContinued=t.isContinued),{type:"finish_step",value:e}}},xF=[Eh,Sh,xh,Th,Ch,kh,Ah,Rh,Ph,Ih,Dh,Oh,Lh,Nh,Mh],vEe={[Eh.code]:Eh,[Sh.code]:Sh,[xh.code]:xh,[Th.code]:Th,[Ch.code]:Ch,[kh.code]:kh,[Ah.code]:Ah,[Rh.code]:Rh,[Ph.code]:Ph,[Ih.code]:Ih,[Dh.code]:Dh,[Oh.code]:Oh,[Lh.code]:Lh,[Nh.code]:Nh,[Mh.code]:Mh};Eh.name+"",Eh.code,Sh.name+"",Sh.code,xh.name+"",xh.code,Th.name+"",Th.code,Ch.name+"",Ch.code,kh.name+"",kh.code,Ah.name+"",Ah.code,Rh.name+"",Rh.code,Ph.name+"",Ph.code,Ih.name+"",Ih.code,Dh.name+"",Dh.code,Oh.name+"",Oh.code,Lh.name+"",Lh.code,Nh.name+"",Nh.code,Mh.name+"",Mh.code;var wEe=xF.map(t=>t.code),EEe=t=>{const e=t.indexOf(":");if(e===-1)throw new Error("Failed to parse stream string. No separator found.");const r=t.slice(0,e);if(!wEe.includes(r))throw new Error(`Failed to parse stream string. Invalid code ${r}.`);const n=r,i=t.slice(e+1),s=JSON.parse(i);return vEe[n].parse(s)};function pxe(t,e){const r=xF.find(n=>n.name===t);if(!r)throw new Error(`Invalid stream part type: ${t}`);return`${r.code}:${JSON.stringify(e)}
`}var SEe=10;function xEe(t,e){const r=new Uint8Array(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return t.length=0,r}async function*TEe(t,{isAborted:e}={}){const r=new TextDecoder,n=[];let i=0;for(;;){const{value:s}=await t.read();if(s&&(n.push(s),i+=s.length,s[s.length-1]!==SEe))continue;if(n.length===0)break;const o=xEe(n,i);i=0;const a=r.decode(o,{stream:!0}).split(`
`).filter(l=>l!=="").map(EEe);for(const l of a)yield l;if(e?.()){t.cancel();break}}}function Wd(t,e){return!t||!e||!e.length?t:{...t,annotations:[...e]}}async function CEe({reader:t,abortControllerRef:e,update:r,onToolCall:n,onFinish:i,generateId:s=SF,getCurrentDate:o=()=>new Date}){var a;const l=o();let c={},u;const h=[],f=[];let d;const g={};let _={completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},m="unknown";for await(const{type:p,value:b}of TEe(t,{isAborted:()=>e?.current===null})){if(p==="error")throw new Error(b);if(p==="finish_step"){b.isContinued||(u={});continue}if(p==="finish_message"){if(m=b.finishReason,b.usage!=null){const{completionTokens:x,promptTokens:E}=b.usage;_={completionTokens:x,promptTokens:E,totalTokens:x+E}}continue}if(u!=null&&(p==="text"||p==="tool_call"||p==="tool_call_streaming_start"||p==="tool_call_delta"||p==="tool_result")&&(c.text&&h.push(c.text),c.function_call&&h.push(c.function_call),c.tool_calls&&h.push(c.tool_calls),c=u,u=void 0),p==="text"&&(c.text?c.text={...c.text,content:(c.text.content||"")+b}:c.text={id:s(),role:"assistant",content:b,createdAt:l}),p==="tool_call_streaming_start")c.text==null&&(c.text={id:s(),role:"assistant",content:"",createdAt:l}),c.text.toolInvocations==null&&(c.text.toolInvocations=[]),g[b.toolCallId]={text:"",toolName:b.toolName,prefixMapIndex:c.text.toolInvocations.length},c.text.toolInvocations.push({state:"partial-call",toolCallId:b.toolCallId,toolName:b.toolName,args:void 0});else if(p==="tool_call_delta"){const x=g[b.toolCallId];x.text+=b.argsTextDelta;const{value:E}=yEe(x.text);c.text.toolInvocations[x.prefixMapIndex]={state:"partial-call",toolCallId:b.toolCallId,toolName:x.toolName,args:E},c.text.internalUpdateId=s()}else if(p==="tool_call"){if(g[b.toolCallId]!=null?c.text.toolInvocations[g[b.toolCallId].prefixMapIndex]={state:"call",...b}:(c.text==null&&(c.text={id:s(),role:"assistant",content:"",createdAt:l}),c.text.toolInvocations==null&&(c.text.toolInvocations=[]),c.text.toolInvocations.push({state:"call",...b})),c.text.internalUpdateId=s(),n){const x=await n({toolCall:b});x!=null&&(c.text.toolInvocations[c.text.toolInvocations.length-1]={state:"result",...b,result:x})}}else if(p==="tool_result"){const x=(a=c.text)==null?void 0:a.toolInvocations;if(x==null)throw new Error("tool_result must be preceded by a tool_call");const E=x.findIndex(T=>T.toolCallId===b.toolCallId);if(E===-1)throw new Error("tool_result must be preceded by a tool_call with the same toolCallId");x[E]={...x[E],state:"result",...b}}let y=null;p==="function_call"&&(c.function_call={id:s(),role:"assistant",content:"",function_call:b.function_call,name:b.function_call.name,createdAt:l},y=c.function_call);let v=null;p==="tool_calls"&&(c.tool_calls={id:s(),role:"assistant",content:"",tool_calls:b.tool_calls,createdAt:l},v=c.tool_calls),p==="data"&&f.push(...b);let w=c.text;p==="message_annotations"&&(d?d.push(...b):d=[...b],y=Wd(c.function_call,d),v=Wd(c.tool_calls,d),w=Wd(c.text,d),c.text!=null&&(c.text.internalUpdateId=s())),d?.length&&(c.text&&(c.text.annotations=[...d]),c.function_call&&(c.function_call.annotations=[...d]),c.tool_calls&&(c.tool_calls.annotations=[...d]));const S=[y,v,w].filter(Boolean).map(x=>({...Wd(x,d)}));r([...h,...S],[...f])}return i?.({message:c.text,finishReason:m,usage:_}),{messages:[c.text,c.function_call,c.tool_calls].filter(Boolean),data:f}}var kEe=()=>fetch;async function AEe({api:t,body:e,streamProtocol:r="data",credentials:n,headers:i,abortController:s,restoreMessagesOnFailure:o,onResponse:a,onUpdate:l,onFinish:c,onToolCall:u,generateId:h,fetch:f=kEe()}){var d,g;const _=await f(t,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",...i},signal:(d=s?.())==null?void 0:d.signal,credentials:n}).catch(p=>{throw o(),p});if(a)try{await a(_)}catch(p){throw p}if(!_.ok)throw o(),new Error((g=await _.text())!=null?g:"Failed to fetch the chat response.");if(!_.body)throw new Error("The response body is empty.");const m=_.body.getReader();switch(r){case"text":{const p=REe(),b={id:h(),createdAt:new Date,role:"assistant",content:""};for(;;){const{done:y,value:v}=await m.read();if(y)break;if(b.content+=p(v),l([{...b}],[]),s?.()===null){m.cancel();break}}return c?.(b,{usage:{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},finishReason:"unknown"}),{messages:[b],data:[]}}case"data":return await CEe({reader:m,abortControllerRef:s!=null?{current:s()}:void 0,update:l,onToolCall:u,onFinish({message:p,finishReason:b,usage:y}){c&&p!=null&&c(p,{usage:y,finishReason:b})},generateId:h});default:{const p=r;throw new Error(`Unknown stream protocol: ${p}`)}}}function REe(t){const e=new TextDecoder;return function(r){return r?e.decode(r,{stream:!0}):""}}async function PEe({getStreamedResponse:t,experimental_onFunctionCall:e,experimental_onToolCall:r,updateChatRequest:n,getCurrentMessages:i}){for(;;){const s=await t();if("messages"in s){let o=!1;for(const a of s.messages)if(!((a.function_call===void 0||typeof a.function_call=="string")&&(a.tool_calls===void 0||typeof a.tool_calls=="string"))){if(o=!0,e){const l=a.function_call;if(typeof l!="object"){console.warn("experimental_onFunctionCall should not be defined when using tools");continue}const c=await e(i(),l);if(c===void 0){o=!1;break}n(c)}if(r){const l=a.tool_calls;if(!Array.isArray(l)||l.some(u=>typeof u!="object")){console.warn("experimental_onToolCall should not be defined when using tools");continue}const c=await r(i(),l);if(c===void 0){o=!1;break}n(c)}}if(!o)break}else{let o=function(l){for(const c of l.messages){if(c.tool_calls!==void 0)for(const u of c.tool_calls)typeof u=="object"&&u.function.arguments&&typeof u.function.arguments!="string"&&(u.function.arguments=JSON.stringify(u.function.arguments));c.function_call!==void 0&&typeof c.function_call=="object"&&c.function_call.arguments&&typeof c.function_call.arguments!="string"&&(c.function_call.arguments=JSON.stringify(c.function_call.arguments))}};const a=s;if((a.function_call===void 0||typeof a.function_call=="string")&&(a.tool_calls===void 0||typeof a.tool_calls=="string"))break;if(e){const l=a.function_call;if(typeof l!="object"){console.warn("experimental_onFunctionCall should not be defined when using tools");continue}const c=await e(i(),l);if(c===void 0)break;o(c),n(c)}if(r){const l=a.tool_calls;if(typeof l!="object"){console.warn("experimental_onToolCall should not be defined when using functions");continue}const c=await r(i(),l);if(c===void 0)break;o(c),n(c)}}}}var TF={exports:{}},CF={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ql=D;function IEe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var DEe=typeof Object.is=="function"?Object.is:IEe,OEe=Ql.useState,LEe=Ql.useEffect,NEe=Ql.useLayoutEffect,MEe=Ql.useDebugValue;function BEe(t,e){var r=e(),n=OEe({inst:{value:r,getSnapshot:e}}),i=n[0].inst,s=n[1];return NEe(function(){i.value=r,i.getSnapshot=e,Tb(i)&&s({inst:i})},[t,r,e]),LEe(function(){return Tb(i)&&s({inst:i}),t(function(){Tb(i)&&s({inst:i})})},[t]),MEe(r),r}function Tb(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!DEe(t,r)}catch{return!0}}function FEe(t,e){return e()}var HEe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?FEe:BEe;CF.useSyncExternalStore=Ql.useSyncExternalStore!==void 0?Ql.useSyncExternalStore:HEe;TF.exports=CF;var UEe=TF.exports;const Gs=()=>{},Kr=Gs(),Cb=Object,ft=t=>t===Kr,xi=t=>typeof t=="function",ao=(t,e)=>({...t,...e}),jEe=t=>xi(t.then),Gd=new WeakMap;let $Ee=0;const Bh=t=>{const e=typeof t,r=t&&t.constructor,n=r==Date;let i,s;if(Cb(t)===t&&!n&&r!=RegExp){if(i=Gd.get(t),i)return i;if(i=++$Ee+"~",Gd.set(t,i),r==Array){for(i="@",s=0;s<t.length;s++)i+=Bh(t[s])+",";Gd.set(t,i)}if(r==Cb){i="#";const o=Cb.keys(t).sort();for(;!ft(s=o.pop());)ft(t[s])||(i+=s+":"+Bh(t[s])+",");Gd.set(t,i)}}else i=n?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return i},Yi=new WeakMap,kb={},qd={},mS="undefined",v0=typeof window!=mS,av=typeof document!=mS,zEe=()=>v0&&typeof window.requestAnimationFrame!=mS,kF=(t,e)=>{const r=Yi.get(t);return[()=>!ft(e)&&t.get(e)||kb,n=>{if(!ft(e)){const i=t.get(e);e in qd||(qd[e]=i),r[5](e,ao(i,n),i||kb)}},r[6],()=>!ft(e)&&e in qd?qd[e]:!ft(e)&&t.get(e)||kb]};let lv=!0;const VEe=()=>lv,[cv,uv]=v0&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Gs,Gs],WEe=()=>{const t=av&&document.visibilityState;return ft(t)||t!=="hidden"},GEe=t=>(av&&document.addEventListener("visibilitychange",t),cv("focus",t),()=>{av&&document.removeEventListener("visibilitychange",t),uv("focus",t)}),qEe=t=>{const e=()=>{lv=!0,t()},r=()=>{lv=!1};return cv("online",e),cv("offline",r),()=>{uv("online",e),uv("offline",r)}},KEe={isOnline:VEe,isVisible:WEe},YEe={initFocus:GEe,initReconnect:qEe},FR=!Qe.useId,Fh=!v0||"Deno"in window,XEe=t=>zEe()?window.requestAnimationFrame(t):setTimeout(t,1),Ab=Fh?D.useEffect:D.useLayoutEffect,Rb=typeof navigator<"u"&&navigator.connection,HR=!Fh&&Rb&&(["slow-2g","2g"].includes(Rb.effectiveType)||Rb.saveData),gS=t=>{if(xi(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?Bh(t):"",[t,e]};let QEe=0;const hv=()=>++QEe,AF=0,RF=1,PF=2,ZEe=3;var qc={__proto__:null,ERROR_REVALIDATE_EVENT:ZEe,FOCUS_EVENT:AF,MUTATE_EVENT:PF,RECONNECT_EVENT:RF};async function IF(...t){const[e,r,n,i]=t,s=ao({populateCache:!0,throwOnError:!0},typeof i=="boolean"?{revalidate:i}:i||{});let o=s.populateCache;const a=s.rollbackOnError;let l=s.optimisticData;const c=f=>typeof a=="function"?a(f):a!==!1,u=s.throwOnError;if(xi(r)){const f=r,d=[],g=e.keys();for(const _ of g)!/^\$(inf|sub)\$/.test(_)&&f(e.get(_)._k)&&d.push(_);return Promise.all(d.map(h))}return h(r);async function h(f){const[d]=gS(f);if(!d)return;const[g,_]=kF(e,d),[m,p,b,y]=Yi.get(e),v=()=>{const O=m[d];return(xi(s.revalidate)?s.revalidate(g().data,f):s.revalidate!==!1)&&(delete b[d],delete y[d],O&&O[0])?O[0](PF).then(()=>g().data):g().data};if(t.length<3)return v();let w=n,S;const x=hv();p[d]=[x,0];const E=!ft(l),T=g(),k=T.data,B=T._c,P=ft(B)?k:B;if(E&&(l=xi(l)?l(P,k):l,_({data:l,_c:P})),xi(w))try{w=w(P)}catch(O){S=O}if(w&&jEe(w))if(w=await w.catch(O=>{S=O}),x!==p[d][0]){if(S)throw S;return w}else S&&E&&c(S)&&(o=!0,_({data:P,_c:Kr}));if(o&&!S)if(xi(o)){const O=o(w,P);_({data:O,error:Kr,_c:Kr})}else _({data:w,error:Kr,_c:Kr});if(p[d][1]=hv(),Promise.resolve(v()).then(()=>{_({_c:Kr})}),S){if(u)throw S;return}return w}}const UR=(t,e)=>{for(const r in t)t[r][0]&&t[r][0](e)},JEe=(t,e)=>{if(!Yi.has(t)){const r=ao(YEe,e),n={},i=IF.bind(Kr,t);let s=Gs;const o={},a=(u,h)=>{const f=o[u]||[];return o[u]=f,f.push(h),()=>f.splice(f.indexOf(h),1)},l=(u,h,f)=>{t.set(u,h);const d=o[u];if(d)for(const g of d)g(h,f)},c=()=>{if(!Yi.has(t)&&(Yi.set(t,[n,{},{},{},i,l,a]),!Fh)){const u=r.initFocus(setTimeout.bind(Kr,UR.bind(Kr,n,AF))),h=r.initReconnect(setTimeout.bind(Kr,UR.bind(Kr,n,RF)));s=()=>{u&&u(),h&&h(),Yi.delete(t)}}};return c(),[t,i,c,s]}return[t,Yi.get(t)[4]]},eSe=(t,e,r,n,i)=>{const s=r.errorRetryCount,o=i.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*r.errorRetryInterval;!ft(s)&&o>s||setTimeout(n,a,i)},tSe=(t,e)=>Bh(t)==Bh(e),[DF,rSe]=JEe(new Map),nSe=ao({onLoadingSlow:Gs,onSuccess:Gs,onError:Gs,onErrorRetry:eSe,onDiscarded:Gs,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:HR?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:HR?5e3:3e3,compare:tSe,isPaused:()=>!1,cache:DF,mutate:rSe,fallback:{}},KEe),iSe=(t,e)=>{const r=ao(t,e);if(e){const{use:n,fallback:i}=t,{use:s,fallback:o}=e;n&&s&&(r.use=n.concat(s)),i&&o&&(r.fallback=ao(i,o))}return r},sSe=D.createContext({}),oSe="$inf$",OF=v0&&window.__SWR_DEVTOOLS_USE__,aSe=OF?window.__SWR_DEVTOOLS_USE__:[],lSe=()=>{OF&&(window.__SWR_DEVTOOLS_REACT__=Qe)},cSe=t=>xi(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],uSe=()=>ao(nSe,D.useContext(sSe)),hSe=t=>(e,r,n)=>t(e,r&&((...s)=>{const[o]=gS(e),[,,,a]=Yi.get(DF);if(o.startsWith(oSe))return r(...s);const l=a[o];return ft(l)?r(...s):(delete a[o],l)}),n),fSe=aSe.concat(hSe),dSe=t=>function(...r){const n=uSe(),[i,s,o]=cSe(r),a=iSe(n,o);let l=t;const{use:c}=a,u=(c||[]).concat(fSe);for(let h=u.length;h--;)l=u[h](l);return l(i,s||a.fetcher||null,a)},pSe=(t,e,r)=>{const n=e[t]||(e[t]=[]);return n.push(r),()=>{const i=n.indexOf(r);i>=0&&(n[i]=n[n.length-1],n.pop())}};lSe();const jR=Qe.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)}),Pb={dedupe:!0},mSe=(t,e,r)=>{const{cache:n,compare:i,suspense:s,fallbackData:o,revalidateOnMount:a,revalidateIfStale:l,refreshInterval:c,refreshWhenHidden:u,refreshWhenOffline:h,keepPreviousData:f}=r,[d,g,_,m]=Yi.get(n),[p,b]=gS(t),y=D.useRef(!1),v=D.useRef(!1),w=D.useRef(p),S=D.useRef(e),x=D.useRef(r),E=()=>x.current,T=()=>E().isVisible()&&E().isOnline(),[k,B,P,O]=kF(n,p),A=D.useRef({}).current,$=ft(o)?r.fallback[p]:o,te=(de,ve)=>{for(const F in A){const he=F;if(he==="data"){if(!i(de[he],ve[he])&&(!ft(de[he])||!i(re,ve[he])))return!1}else if(ve[he]!==de[he])return!1}return!0},Q=D.useMemo(()=>{const de=!p||!e?!1:ft(a)?E().isPaused()||s?!1:ft(l)?!0:l:a,ve=oe=>{const ye=ao(oe);return delete ye._k,de?{isValidating:!0,isLoading:!0,...ye}:ye},F=k(),he=O(),ae=ve(F),W=F===he?ae:ve(he);let G=ae;return[()=>{const oe=ve(k());return te(oe,G)?(G.data=oe.data,G.isLoading=oe.isLoading,G.isValidating=oe.isValidating,G.error=oe.error,G):(G=oe,oe)},()=>W]},[n,p]),ee=UEe.useSyncExternalStore(D.useCallback(de=>P(p,(ve,F)=>{te(F,ve)||de()}),[n,p]),Q[0],Q[1]),L=!y.current,M=d[p]&&d[p].length>0,U=ee.data,j=ft(U)?$:U,H=ee.error,Z=D.useRef(j),re=f?ft(U)?Z.current:U:j,ge=M&&!ft(H)?!1:L&&!ft(a)?a:E().isPaused()?!1:s?ft(j)?!1:l:ft(j)||l,X=!!(p&&e&&L&&ge),V=ft(ee.isValidating)?X:ee.isValidating,ie=ft(ee.isLoading)?X:ee.isLoading,se=D.useCallback(async de=>{const ve=S.current;if(!p||!ve||v.current||E().isPaused())return!1;let F,he,ae=!0;const W=de||{},G=!_[p]||!W.dedupe,oe=()=>FR?!v.current&&p===w.current&&y.current:p===w.current,ye={isValidating:!1,isLoading:!1},Se=()=>{B(ye)},pe=()=>{const Ae=_[p];Ae&&Ae[1]===he&&delete _[p]},Te={isValidating:!0};ft(k().data)&&(Te.isLoading=!0);try{if(G&&(B(Te),r.loadingTimeout&&ft(k().data)&&setTimeout(()=>{ae&&oe()&&E().onLoadingSlow(p,r)},r.loadingTimeout),_[p]=[ve(b),hv()]),[F,he]=_[p],F=await F,G&&setTimeout(pe,r.dedupingInterval),!_[p]||_[p][1]!==he)return G&&oe()&&E().onDiscarded(p),!1;ye.error=Kr;const Ae=g[p];if(!ft(Ae)&&(he<=Ae[0]||he<=Ae[1]||Ae[1]===0))return Se(),G&&oe()&&E().onDiscarded(p),!1;const xe=k().data;ye.data=i(xe,F)?xe:F,G&&oe()&&E().onSuccess(F,p,r)}catch(Ae){pe();const xe=E(),{shouldRetryOnError:ue}=xe;xe.isPaused()||(ye.error=Ae,G&&oe()&&(xe.onError(Ae,p,xe),(ue===!0||xi(ue)&&ue(Ae))&&(!E().revalidateOnFocus||!E().revalidateOnReconnect||T())&&xe.onErrorRetry(Ae,p,xe,Ce=>{const Pe=d[p];Pe&&Pe[0]&&Pe[0](qc.ERROR_REVALIDATE_EVENT,Ce)},{retryCount:(W.retryCount||0)+1,dedupe:!0})))}return ae=!1,Se(),!0},[p,n]),me=D.useCallback((...de)=>IF(n,w.current,...de),[]);if(Ab(()=>{S.current=e,x.current=r,ft(U)||(Z.current=U)}),Ab(()=>{if(!p)return;const de=se.bind(Kr,Pb);let ve=0;const he=pSe(p,d,(ae,W={})=>{if(ae==qc.FOCUS_EVENT){const G=Date.now();E().revalidateOnFocus&&G>ve&&T()&&(ve=G+E().focusThrottleInterval,de())}else if(ae==qc.RECONNECT_EVENT)E().revalidateOnReconnect&&T()&&de();else{if(ae==qc.MUTATE_EVENT)return se();if(ae==qc.ERROR_REVALIDATE_EVENT)return se(W)}});return v.current=!1,w.current=p,y.current=!0,B({_k:b}),ge&&(ft(j)||Fh?de():XEe(de)),()=>{v.current=!0,he()}},[p]),Ab(()=>{let de;function ve(){const he=xi(c)?c(k().data):c;he&&de!==-1&&(de=setTimeout(F,he))}function F(){!k().error&&(u||E().isVisible())&&(h||E().isOnline())?se(Pb).then(ve):ve()}return ve(),()=>{de&&(clearTimeout(de),de=-1)}},[c,u,h,p]),D.useDebugValue(re),s&&ft(j)&&p){if(!FR&&Fh)throw new Error("Fallback data is required when using suspense in SSR.");S.current=e,x.current=r,v.current=!1;const de=m[p];if(!ft(de)){const ve=me(de);jR(ve)}if(ft(H)){const ve=se(Pb);ft(re)||(ve.status="fulfilled",ve.value=!0),jR(ve)}else throw H}return{mutate:me,get data(){return A.data=!0,re},get error(){return A.error=!0,H},get isValidating(){return A.isValidating=!0,V},get isLoading(){return A.isLoading=!0,ie}}},Kd=dSe(mSe);function gSe(t,e){if(typeof t!="function")throw new TypeError(`Expected the first argument to be a \`function\`, got \`${typeof t}\`.`);let r,n=0;return function(...s){clearTimeout(r);const o=Date.now(),a=o-n,l=e-a;l<=0?(n=o,t.apply(this,s)):r=setTimeout(()=>{n=Date.now(),t.apply(this,s)},l)}}var _Se=gSe;const bSe=mn(_Se);function $R(t,e){return e!=null?bSe(t,e):t}var ySe=async(t,e,r,n,i,s,o,a,l,c,u,h,f,d,g,_,m)=>{var p;const b=o.current;r(e.messages,!1);const y=d?e.messages:e.messages.map(({role:w,content:S,experimental_attachments:x,name:E,data:T,annotations:k,toolInvocations:B,function_call:P,tool_calls:O,tool_call_id:A})=>({role:w,content:S,...x!==void 0&&{experimental_attachments:x},...E!==void 0&&{name:E},...T!==void 0&&{data:T},...k!==void 0&&{annotations:k},...B!==void 0&&{toolInvocations:B},tool_call_id:A,...P!==void 0&&{function_call:P},...O!==void 0&&{tool_calls:O}})),v=i.current;return await AEe({api:t,body:(p=g?.({messages:e.messages,requestData:e.data,requestBody:e.body}))!=null?p:{messages:y,data:e.data,...s.current.body,...e.body,...e.functions!==void 0&&{functions:e.functions},...e.function_call!==void 0&&{function_call:e.function_call},...e.tools!==void 0&&{tools:e.tools},...e.tool_choice!==void 0&&{tool_choice:e.tool_choice}},streamProtocol:c,credentials:s.current.credentials,headers:{...s.current.headers,...e.headers},abortController:()=>a.current,restoreMessagesOnFailure(){m||r(b,!1)},onResponse:h,onUpdate(w,S){r([...e.messages,...w],!1),n([...v??[],...S??[]],!1)},onToolCall:f,onFinish:u,generateId:l,fetch:_})};function vSe({api:t="/api/chat",id:e,initialMessages:r,initialInput:n="",sendExtraMessageFields:i,experimental_onFunctionCall:s,experimental_onToolCall:o,onToolCall:a,experimental_prepareRequestBody:l,experimental_maxAutomaticRoundtrips:c=0,maxAutomaticRoundtrips:u=c,maxToolRoundtrips:h=u,maxSteps:f=h!=null?h+1:1,streamMode:d,streamProtocol:g,onResponse:_,onFinish:m,onError:p,credentials:b,headers:y,body:v,generateId:w=SF,fetch:S,keepLastMessageOnError:x=!1,experimental_throttle:E}={}){d&&(g??(g=d==="text"?"text":void 0));const T=D.useId(),k=e??T,B=typeof t=="string"?[t,k]:k,[P]=D.useState([]),{data:O,mutate:A}=Kd([B,"messages"],null,{fallbackData:r??P}),$=D.useRef(O||[]);D.useEffect(()=>{$.current=O||[]},[O]);const{data:te,mutate:Q}=Kd([B,"streamData"],null),ee=D.useRef(te);D.useEffect(()=>{ee.current=te},[te]);const{data:L=!1,mutate:M}=Kd([B,"loading"],null),{data:U=void 0,mutate:j}=Kd([B,"error"],null),H=D.useRef(null),Z=D.useRef({credentials:b,headers:y,body:v});D.useEffect(()=>{Z.current={credentials:b,headers:y,body:v}},[b,y,v]);const re=D.useCallback(async ae=>{const W=$.current.length;try{M(!0),j(void 0);const ye=new AbortController;H.current=ye,await PEe({getStreamedResponse:()=>ySe(t,ae,$R(A,E),$R(Q,E),ee,Z,$,H,w,g,m,_,a,i,l,S,x),experimental_onFunctionCall:s,experimental_onToolCall:o,updateChatRequest:Se=>{ae=Se},getCurrentMessages:()=>$.current}),H.current=null}catch(ye){if(ye.name==="AbortError")return H.current=null,null;p&&ye instanceof Error&&p(ye),j(ye)}finally{M(!1)}const G=$.current,oe=G[G.length-1];G.length>W&&oe!=null&&f>1&&zR(oe)&&wSe(G)<f&&await re({messages:G})},[A,M,t,Z,_,m,p,j,Q,ee,g,i,s,o,l,a,f,$,H,w,S,x,E]),ge=D.useCallback(async(ae,{options:W,functions:G,function_call:oe,tools:ye,tool_choice:Se,data:pe,headers:Te,body:Ae,experimental_attachments:xe}={})=>{var ue,Ce;ae.id||(ae.id=w());const Pe=await VR(xe),ze={headers:Te??W?.headers,body:Ae??W?.body},I={messages:$.current.concat({...ae,id:(ue=ae.id)!=null?ue:w(),createdAt:(Ce=ae.createdAt)!=null?Ce:new Date,experimental_attachments:Pe.length>0?Pe:void 0}),options:ze,headers:ze.headers,body:ze.body,data:pe,...G!==void 0&&{functions:G},...oe!==void 0&&{function_call:oe},...ye!==void 0&&{tools:ye},...Se!==void 0&&{tool_choice:Se}};return re(I)},[re,w]),X=D.useCallback(async({options:ae,functions:W,function_call:G,tools:oe,tool_choice:ye,data:Se,headers:pe,body:Te}={})=>{if($.current.length===0)return null;const Ae={headers:pe??ae?.headers,body:Te??ae?.body};if($.current[$.current.length-1].role==="assistant"){const Ce={messages:$.current.slice(0,-1),options:Ae,headers:Ae.headers,body:Ae.body,data:Se,...W!==void 0&&{functions:W},...G!==void 0&&{function_call:G},...oe!==void 0&&{tools:oe},...ye!==void 0&&{tool_choice:ye}};return re(Ce)}const ue={messages:$.current,options:Ae,headers:Ae.headers,body:Ae.body,data:Se,...W!==void 0&&{functions:W},...G!==void 0&&{function_call:G},...oe!==void 0&&{tools:oe},...ye!==void 0&&{tool_choice:ye}};return re(ue)},[re]),V=D.useCallback(()=>{H.current&&(H.current.abort(),H.current=null)},[]),ie=D.useCallback(ae=>{typeof ae=="function"&&(ae=ae($.current)),A(ae,!1),$.current=ae},[A]),se=D.useCallback(ae=>{typeof ae=="function"&&(ae=ae(ee.current)),Q(ae,!1),ee.current=ae},[Q]),[me,de]=D.useState(n),ve=D.useCallback(async(ae,W={},G)=>{var oe,ye,Se,pe,Te;if((oe=ae?.preventDefault)==null||oe.call(ae),!me&&!W.allowEmptySubmit)return;G&&(Z.current={...Z.current,...G});const Ae=await VR(W.experimental_attachments),xe={headers:(Se=W.headers)!=null?Se:(ye=W.options)==null?void 0:ye.headers,body:(Te=W.body)!=null?Te:(pe=W.options)==null?void 0:pe.body},Ce={messages:!me&&!Ae.length&&W.allowEmptySubmit?$.current:$.current.concat({id:w(),createdAt:new Date,role:"user",content:me,experimental_attachments:Ae.length>0?Ae:void 0}),options:xe,headers:xe.headers,body:xe.body,data:W.data};re(Ce),de("")},[me,w,re]),F=ae=>{de(ae.target.value)},he=({toolCallId:ae,result:W})=>{const G=$.current.map((ye,Se,pe)=>Se===pe.length-1&&ye.role==="assistant"&&ye.toolInvocations?{...ye,toolInvocations:ye.toolInvocations.map(Te=>Te.toolCallId===ae?{...Te,result:W}:Te)}:ye);A(G,!1);const oe=G[G.length-1];zR(oe)&&re({messages:G})};return{messages:O||[],setMessages:ie,data:te,setData:se,error:U,append:ge,reload:X,stop:V,input:me,setInput:de,handleInputChange:F,handleSubmit:ve,isLoading:L,addToolResult:he,experimental_addToolResult:he}}function zR(t){return t.role==="assistant"&&t.toolInvocations&&t.toolInvocations.length>0&&t.toolInvocations.every(e=>"result"in e)}function wSe(t){let e=0;for(let r=t.length-1;r>=0&&t[r].role==="assistant";r--)e++;return e}async function VR(t){if(t==null)return[];if(t instanceof FileList)return Promise.all(Array.from(t).map(async e=>{const{name:r,type:n}=e,i=await new Promise((s,o)=>{const a=new FileReader;a.onload=l=>{var c;s((c=l.target)==null?void 0:c.result)},a.onerror=l=>o(l),a.readAsDataURL(e)});return{name:r,contentType:n,url:i}}));if(Array.isArray(t))return t;throw new Error("Invalid attachments type")}var ESe=vSe;const Xi=ba({started:!1,aborted:!1,showChat:!0}),SSe=jh({enter:"animated fadeInRight",exit:"animated fadeOutRight"}),WR=Fr("Chat");function mxe(){Jl.trace("Chat");const{ready:t,initialMessages:e,storeMessageHistory:r,importChat:n,exportChat:i}=lO(),s=St(Ji);return R.jsxs(R.Fragment,{children:[t&&R.jsx(xSe,{description:s,initialMessages:e,exportChat:i,storeMessageHistory:r,importChat:n}),R.jsx(B9,{closeButton:({closeToast:o})=>R.jsx("button",{className:"Toastify__close-button",onClick:o,children:R.jsx("div",{className:"i-ph:x text-lg"})}),icon:({type:o})=>{switch(o){case"success":return R.jsx("div",{className:"i-ph:check-bold text-bolt-elements-icon-success text-2xl"});case"error":return R.jsx("div",{className:"i-ph:warning-circle-bold text-bolt-elements-icon-error text-2xl"})}},position:"bottom-right",pauseOnFocusLoss:!0,transition:SSe})]})}const xSe=D.memo(({description:t,initialMessages:e,storeMessageHistory:r,importChat:n,exportChat:i})=>{Eq();const s=D.useRef(null),[o,a]=D.useState(e.length>0),[l,c]=D.useState([]),[u,h]=D.useState([]),{activeProviders:f}=Wh(),[d,g]=D.useState(()=>ct.get("selectedModel")||Bz),[_,m]=D.useState(()=>{const se=ct.get("selectedProvider");return ec.find(me=>me.name===se)||Fz}),{showChat:p}=St(Xi),[b,y]=T9(),[v,w]=D.useState({}),{messages:S,isLoading:x,input:E,handleInputChange:T,setInput:k,stop:B,append:P}=ESe({api:"/api/chat",body:{apiKeys:v},onError:se=>{WR.error(`Request failed

`,se),Be.error("There was an error processing your request: "+(se.message?se.message:"No details were returned"))},onFinish:()=>{WR.debug("Finished streaming")},initialMessages:e,initialInput:ct.get(G0)||""}),{enhancingPrompt:O,promptEnhanced:A,enhancePrompt:$,resetEnhancer:te}=vq(),{parsedMessages:Q,parseMessages:ee}=yq(),L=o?400:200;D.useEffect(()=>{Xi.setKey("started",e.length>0)},[]),D.useEffect(()=>{ee(S,x),S.length>e.length&&r(S).catch(se=>Be.error(se.message))},[S,x,ee]);const M=()=>{const se=s.current;se&&(se.scrollTop=se.scrollHeight)},U=()=>{B(),Xi.setKey("aborted",!0),Ve.abortAllActions()};D.useEffect(()=>{const se=s.current;if(se){se.style.height="auto";const me=se.scrollHeight;se.style.height=`${Math.min(me,L)}px`,se.style.overflowY=me>L?"auto":"hidden"}},[E,s]);const j=async()=>{o||(await Promise.all([y("#examples",{opacity:0,display:"none"},{duration:.1}),y("#intro",{opacity:0,flex:1},{duration:.2,ease:On})]),Xi.setKey("started",!0),a(!0))},H=async(se,me)=>{const de=me||E;if(de.length===0||x)return;await Ve.saveAllFiles();const ve=Ve.getFileModifcations();Xi.setKey("aborted",!1),j(),ve!==void 0?(P({role:"user",content:[{type:"text",text:`[Model: ${d}]

[Provider: ${_.name}]

${de}`},...u.map(F=>({type:"image",image:F}))]}),Ve.resetAllFileModifications()):P({role:"user",content:[{type:"text",text:`[Model: ${d}]

[Provider: ${_.name}]

${de}`},...u.map(F=>({type:"image",image:F}))]}),k(""),ct.remove(G0),c([]),h([]),te(),s.current?.blur()},Z=se=>{T(se)},re=D.useCallback(Rg(se=>{const me=se.target.value.trim();ct.set(G0,me,{expires:30})},1e3),[]),[ge,X]=Sq();D.useEffect(()=>{const se=ct.get("apiKeys");se&&w(JSON.parse(se))},[]);const V=se=>{g(se),ct.set("selectedModel",se,{expires:30})},ie=se=>{m(se),ct.set("selectedProvider",se.name,{expires:30})};return R.jsx(lEe,{ref:b,textareaRef:s,input:E,showChat:p,chatStarted:o,isStreaming:x,enhancingPrompt:O,promptEnhanced:A,sendMessage:H,model:d,setModel:V,provider:_,setProvider:ie,providerList:f,messageRef:ge,scrollRef:X,handleInputChange:se=>{Z(se),re(se)},handleStop:U,description:t,importChat:n,exportChat:i,messages:S.map((se,me)=>se.role==="user"?se:{...se,content:Q[me]||""}),enhancePrompt:()=>{$(E,se=>{k(se),M()},d,_,v)},uploadedFiles:l,setUploadedFiles:c,imageDataList:u,setImageDataList:h})});function TSe({}){const t=St(Ve.showWorkbench),{showChat:e}=St(Xi),r=XO(1024),n=t||!e;return R.jsx("div",{className:"flex",children:R.jsxs("div",{className:"flex border border-bolt-elements-borderColor rounded-md overflow-hidden",children:[R.jsx(GR,{active:e,disabled:!n||r,onClick:()=>{n&&Xi.setKey("showChat",!e)},children:R.jsx("div",{className:"i-bolt:chat text-sm"})}),R.jsx("div",{className:"w-[1px] bg-bolt-elements-borderColor"}),R.jsx(GR,{active:t,onClick:()=>{t&&!e&&Xi.setKey("showChat",!0),Ve.showWorkbench.set(!t)},children:R.jsx("div",{className:"i-ph:code-bold"})})]})})}function GR({active:t=!1,disabled:e=!1,children:r,onClick:n}){return R.jsx("button",{className:je("flex items-center p-1.5",{"bg-bolt-elements-item-backgroundDefault hover:bg-bolt-elements-item-backgroundActive text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary":!t,"bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent":t&&!e,"bg-bolt-elements-item-backgroundDefault text-alpha-gray-20 dark:text-alpha-white-20 cursor-not-allowed":e}),onClick:n,children:r})}function CSe(){const t=St(Ji),{editing:e,handleChange:r,handleBlur:n,handleSubmit:i,handleKeyDown:s,currentDescription:o,toggleEditMode:a}=YO({initialDescription:t,syncWithGlobalStore:!0});return t?R.jsx("div",{className:"flex items-center justify-center",children:e?R.jsxs("form",{onSubmit:i,className:"flex items-center justify-center",children:[R.jsx("input",{type:"text",className:"bg-bolt-elements-background-depth-1 text-bolt-elements-textPrimary rounded px-2 mr-2 w-fit",autoFocus:!0,value:o,onChange:r,onBlur:n,onKeyDown:s,style:{width:`${Math.max(o.length*8,100)}px`}}),R.jsx(Gp,{children:R.jsx(ra,{tooltip:"Save title",children:R.jsx("div",{className:"flex justify-between items-center p-2 rounded-md bg-bolt-elements-item-backgroundAccent",children:R.jsx("button",{type:"submit",className:"i-ph:check-bold scale-110 hover:text-bolt-elements-item-contentAccent",onMouseDown:i})})})})]}):R.jsxs(R.Fragment,{children:[o,R.jsx(Gp,{children:R.jsx(ra,{tooltip:"Rename chat",children:R.jsx("div",{className:"flex justify-between items-center p-2 rounded-md bg-bolt-elements-item-backgroundAccent ml-2",children:R.jsx("button",{type:"button",className:"i-ph:pencil-fill scale-110 hover:text-bolt-elements-item-contentAccent",onClick:l=>{l.preventDefault(),a()}})})})})]})}):null}function gxe(){const t=St(Xi);return R.jsxs("header",{className:je("flex items-center p-5 border-b h-[var(--header-height)]",{"border-transparent":!t.started,"border-bolt-elements-borderColor":t.started}),children:[R.jsxs("div",{className:"flex items-center gap-2 z-logo text-bolt-elements-textPrimary cursor-pointer",children:[R.jsx("div",{className:"i-ph:sidebar-simple-duotone text-xl"}),R.jsxs("a",{href:"/",className:"text-2xl font-semibold text-accent flex items-center",children:[R.jsx("img",{src:"/logo-light-styled.png",alt:"logo",className:"w-[90px] inline-block dark:hidden"}),R.jsx("img",{src:"/logo-dark-styled.png",alt:"logo",className:"w-[90px] inline-block hidden dark:block"})]})]}),t.started&&R.jsxs(R.Fragment,{children:[R.jsx("span",{className:"flex-1 px-4 truncate text-center text-bolt-elements-textPrimary",children:R.jsx(To,{children:()=>R.jsx(CSe,{})})}),R.jsx(To,{children:()=>R.jsx("div",{className:"mr-1",children:R.jsx(TSe,{})})})]})]})}export{He as A,XSe as B,W3 as C,gQ as D,ke as E,GSe as F,jQ as G,YSe as H,Lt as I,RZ as J,HSe as K,ey as L,_Ee as M,R3 as N,SF as O,SQ as P,pxe as Q,lO as R,eEe as S,Jt as T,To as U,lEe as V,mxe as W,B4 as X,F4 as Y,H4 as Z,gxe as _,VSe as a,KSe as b,en as c,WSe as d,rt as e,tZ as f,Ft as g,qSe as h,WQ as i,En as j,gr as k,Pg as l,uo as m,Ng as n,ot as o,jSe as p,jn as q,sc as r,NQ as s,ce as t,UQ as u,nl as v,eZ as w,lr as x,am as y,EZ as z};
